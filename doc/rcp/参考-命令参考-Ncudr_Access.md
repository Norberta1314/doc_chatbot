专业维护 : 
专业维护 : 
背景知识 
UDR或UDSF作为分布式数据存储器，为了方便对节点状态和分布式数据进行管理，需要一些专业维护功能。 
功能说明 
本功能涉及UDR或UDSF中专业维护。 
子主题： 
## CGW管理 
## CGW管理 
背景知识 
UDR存储结构化数据，UDSF存储非结构化数据，UDR和UDSF既可以以NFS形式部署在业务NF中，也可以以NF形式独立部署并被多个业务NF共享。 
UDSF支持容灾部署，数据可以在2个UDSF之间复制。 
UDR支持第三方应用访问结构化数据，如第三方应用通过LDAP接口访问USPP数据。 
UDR和UDSF独立部署、UDSF容灾部署以及第三方应用访问UDR，都需要节点和其他NF的节点或第三方应用通讯。 
业务NF和独立部署的UDSF之间、容灾部署的UDSF之间、第三方应用和UDR之间的通讯，都需要通过CGW： 
 
业务NF和独立部署的UDSF之间，需要通过部署在UDSF的CGW通讯 
 
容灾部署的UDSF之间，需要通过部署在两个UDSF的CGW通讯 
 
第三方应用和UDR之间，需要通过部署在UDR的CGW通讯 
 
功能说明 
本功能提供CGW节点状态和链路状态的查询。 
子主题： 
### 查询节点状态(SHOW CGW STATUS) 
### 查询节点状态(SHOW CGW STATUS) 
功能说明 
该命令用于查询CGW节点状态。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
CommID|CommID|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|CGW节点的CommID，用于通讯。
NFID|NF ID|参数可选性: 任选参数类型: 数字参数范围: 0-255|NF标识
Status|状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|CGW工作状态：0  无效状态 1  上电初始化状态2  工作状态3  宕机状态4  闭塞状态
VRUNAME|VRU名称|参数可选性: 任选参数类型: 字符串参数范围: 0-256|VRU名称
VMName|虚机名称|参数可选性: 任选参数类型: 字符串参数范围: 0-256|CGW所在虚机名称
MsgBuffUsed|消息缓冲区使用率(%)|参数可选性: 任选参数类型: 字符串参数范围: 0-100|消息发送缓冲区使用率
OUTP|输出|参数可选性: 任选参数类型: 字符串|该参数用于指示命令执行失败时输出的结果。
命令举例 
`
查询CGW节点状态命令示例如下。
(No.40) : SHOW CGW STATUS
-----------------Ncudr_Access_0----------------
------------------------------------------------------------------------------------------------------------
CommID       NF ID    状态     VRU名称                    虚机名称                         消息缓冲区使用率
1006635009   67       工作态   vru-cudr-access-cgw-0      NFV-R-67-VM-GSUCommonC2M40001    50%
1006635010   67       工作态   vru-cudr-access-cgw-1      NFV-R-67-VM-GSUCommonC2M40002    80%
------------------------------------------------------------------------------------------------------------
记录数：2
` 
### 查询链路状态(SHOW CGW LINK) 
### 查询链路状态(SHOW CGW LINK) 
功能说明 
该命令用于查询CGW链路状态。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|VRU名称。可选参数。如果输入，则查询指定VRU的链路信息。如果不输，查询全部VRU的链路信息。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 任选参数类型: 字符串参数范围: 0-256|VRU名称。
CommID|CommID|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|CGW节点的CommID，用于通讯。
linkNo|链路序号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|链路序号。
linkstatus|链路状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|链路状态：LinkOK： 正常。LinkBreak：断开。LinkOffline ：离线
IPType|IP类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|IP类型：IPV4IPV6
LocalIP|本地IP|参数可选性: 任选参数类型: 字符串参数范围: 0-256|本地IP地址。
LocalPort|本地端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|本地端口号。
RemoteIP|对端IP地址|参数可选性: 任选参数类型: 字符串参数范围: 0-256|对端IP地址。
RemotePort|对端端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|对端端口号。
RemoteNFID|对端NF ID|参数可选性: 任选参数类型: 数字参数范围: 0-255|对端NFID。
RemoteCommID|对端CommID|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|对端CommID。
RemoteAPPType|对端应用类型|参数可选性: 任选参数类型: 字符串参数范围: 0-256|对端应用类型：CGWNeAPPExternalAPP
OUTP|输出|参数可选性: 任选参数类型: 字符串|该参数用于指示命令执行失败时输出的结果。
命令举例 
`
"
查询CGW链路状态命令示例如下。
(No.2) : SHOW CGW LINK:
-----------------Ncudr_Access_0----------------
VRU名称                CommID      链路序号   链路状态  IP类型  本地IP    本地端口   对端IP地址  对端端口  对端NF ID    对端CommID  对端应用类型
---------------------------------------------------------------------------------------------------------------------------------------
vru-cudr-access-cgw-0  1006635009  0          正常      IPV4    10.6.6.6  56000      10.8.8.8    36000     67           1006635009  CGW
vru-cudr-access-cgw-0  1006635009  1          正常      IPV4    10.6.6.6  56000      10.8.8.8    36001     67           1006635010  CGW
vru-cudr-access-cgw-0  1006635009  2          正常      IPV4    10.6.6.6  35000      10.8.8.8    58000     67           1006635009  CGW
vru-cudr-access-cgw-0  1006635009  3          正常      IPV4    10.6.6.6  35000      10.8.8.8    58001     67           1006635010  CGW
vru-cudr-access-cgw-1  1006635010  0          正常      IPV4    10.6.6.6  56001      10.8.8.8    36000     67           1006635009  CGW
vru-cudr-access-cgw-1  1006635010  1          正常      IPV4    10.6.6.6  56001      10.8.8.8    36001     67           1006635010  CGW
vru-cudr-access-cgw-1  1006635010  2          正常      IPV4    10.6.6.6  35001      10.8.8.8    58000     67           1006635009  CGW
vru-cudr-access-cgw-1  1006635010  3          正常      IPV4    10.6.6.6  35001      10.8.8.8    58001     67           1006635010  CGW
---------------------------------------------------------------------------------------------------------------------------------------
Total Records:8
"
` 
