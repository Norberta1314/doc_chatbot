 服务化接口配置管理 


[](None)背景知识 


服务化接口是指NF（Network Function，网络功能）对外提供或公开的一组服务接口，可以通过调用这些接口进行NF服务操作。服务化接口使用HTTP/2（Hypertext Transfer Protocol，超文本传输协议）协议携带JSON（JavaScript object notation）码流作为应用层序列化协议。 




[](None)功能说明 


服务化接口配置管理用于管理本网元服务化接口相关配置。 

可进行NRF服务器策略配置、重选配置、订阅条件配置、本地NRF配置等相关服务化接口配置。 




[](None)子主题： 






# NRF服务器分组配置 
# NRF服务器分组配置 


[](None)背景知识 


NRF服务器是5G核心网络中的网络实体，支持以下功能： 


 
维护可用NF实例及其支持的服务的NF配置文件； 

 
允许其他NF实例订阅并获得有关给定类型的新NF实例在NRF中的注册的通知； 

 
支持服务发现功能。它从NF实例接收NF发现请求，并提供满足某些条件（例如，支持给定服务）的可用NF实例的信息。 

 

NRF服务器配置分3级，从高到低：NRF服务器模板配置、NRF服务器分组配置、NRF服务器节点配置。一个NRF服务器模板配置包含主备两个NRF服务器分组，一个NRF服务器分组包含多个NRF服务器节点。 

该配置用于配置NRF服务器分组编号。 




[](None)功能说明 


该配置用于配置NRF服务器分组编号。 

NRF服务器分组配置包括新增NRF服务器分组配置、修改NRF服务器分组配置、删除NRF服务器分组配置、查询NRF服务器分组配置。当需要对NRF服务器分组进行操作时，执行该配置。 




[](None)子主题： 






## 新增NRF服务器分组配置(ADD SBINRFGROUP) 
## 新增NRF服务器分组配置(ADD SBINRFGROUP) 


[](None)功能说明 

该命令用于新增NRF服务器分组配置。当NRF服务器节点配置需要引用新的NRF服务器分组时，使用该命令。该命令执行成功后，NRF服务器节点配置可引用该NRF服务器分组。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器组的描述信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器组的描述信息。




[](None)命令举例 


`
新增NRF服务器分组配置，编号为1，描述信息为"GROUP1"。
ADD SBINRFGROUP:ID=1,DESC="GROUP1"
` 


## 修改NRF服务器分组配置(SET SBINRFGROUP) 
## 修改NRF服务器分组配置(SET SBINRFGROUP) 


[](None)功能说明 

该命令用于修改NRF服务器分组配置。当需要修改NRF服务器分组配置的描述信息时，使用该命令。该命令执行成功后，描述信息变为修改内容。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器组的描述信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器组的描述信息。




[](None)命令举例 


`
修改NRF服务器分组配置，编号为1，描述信息为"GROUP1"。 
SET SBINRFGROUP:ID=1,DESC="GROUP1"
` 


## 删除NRF服务器分组配置(DEL SBINRFGROUP) 
## 删除NRF服务器分组配置(DEL SBINRFGROUP) 


[](None)功能说明 

该命令用于删除NRF服务器分组配置。当需要删除不再被引用的NRF服务器分组配置时，使用该命令。该命令执行成功后，对应编号的NRF服务器分组配置被删除。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器组的描述信息。




[](None)命令举例 


`
删除NRF服务器分组配置，编号为1。
DEL SBINRFGROUP:ID=1
` 


## 查询NRF服务器分组配置(SHOW SBINRFGROUP) 
## 查询NRF服务器分组配置(SHOW SBINRFGROUP) 


[](None)功能说明 

该命令用于查询NRF服务器分组配置。当需要查询NRF服务器分组配置的描述信息时，使用该命令。该命令执行成功后，显示该NRF服务器分组配置的编号和描述信息。 


[](None)注意事项 


 
如需要查询全部NRF服务器分组配置信息，则不需要输入任何参数。 

 
如需要查询指定的NRF服务器分组配置信息，则需要输入分组编号。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器组编号。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器组的描述信息。




[](None)命令举例 


`
查询NRF服务器分组配置，编号为1。
SHOW SBINRFGROUP:ID=1

(No.1) : SHOW SBINRFGROUP:ID=1
-----------------CommonS_HTTP_LB_0----------------
NRF服务器组编号 描述信息
1               group1
记录数：1

执行成功耗时: 0.135 秒

` 


# NRF服务器节点配置 
# NRF服务器节点配置 


[](None)背景知识 


NRF服务器是5G核心网络中的网络实体，支持以下功能： 


 
维护可用NF实例及其支持的服务的NF配置文件； 

 
允许其他NF实例订阅并获得有关给定类型的新NF实例在NRF中的注册的通知； 

 
支持服务发现功能。它从NF实例接收NF发现请求，并提供满足某些条件（例如，支持给定服务）的可用NF实例的信息。 

 

NRF服务器配置分3级，从高到低：NRF服务器模板配置、NRF服务器分组配置、NRF服务器节点配置。一个NRF服务器模板配置包含主备两个NRF服务器分组，一个NRF服务器分组包含多个NRF服务器节点。 

该配置用于配置NRF服务器的地址端口、使用的HTTP客户端模板编号、归属的NRF分组服务器等信息，多个节点可以归属同一个分组。 




[](None)功能说明 


该配置用于配置NRF服务器的地址端口、使用的HTTP客户端模板编号、归属的NRF分组服务器等信息，多个节点可以归属同一个分组。 

NRF服务器节点配置包括新增NRF服务器节点配置、修改NRF服务器节点配置、删除NRF服务器节点配置、查询NRF服务器节点配置。当需要对NRF服务器节点进行操作时，执行该配置。 




[](None)子主题： 






## 新增NRF服务器节点配置(ADD SBINRFNODE) 
## 新增NRF服务器节点配置(ADD SBINRFNODE) 


[](None)功能说明 

该命令用于新增NRF服务器节点。当需要在某个NRF服务器分组下添加NRF服务器节点时，使用该命令。命令执行成功后，该服务器节点即归属于引用的NRF服务器分组。 


[](None)注意事项 


 
引用的NRF服务器分组必须存在，可通过SHOW SBINRFGROUP命令查询当前的NRF服务器分组。 

 
引用的HTTP客户端模板编号必须存在，可通过SHOW CLIENTPROFILE命令查询当前的客户端模板号。 

 
引用的通知时使用的HTTP服务端模板编号必须存在，可通过SHOW SERVERPROFILE命令查询当前的服务端模板号。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
SERVERIPADDR|NRF服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。
SERVERPORT|NRF服务器端口|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置NRF服务器端口。
SERVERFQDN|NRF服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器FQDN。
SCHEME|URI scheme|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: HTTP|该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。若选择URI scheme为HTTPS，则引用的HTTP客户端模板需配置TLS证书，可通过SHOW CLIENTPROFILE命令查看引用的客户端模板是否配置TLS证书。
APIVERSION|API版本|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: V1|该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号，需关联客户端模板配置，其编号需在SHOW CLIENTPROFILE命令查询得到的模板编号内。
NOTIFYSVRPROFILEID|通知时使用的HTTP服务端模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号，需关联服务端模板配置，其编号需在SHOW SERVERPROFILE命令查询得到的模板编号内。当值为0时，不引用HTTP服务端模板，相关的订阅会失败，不能正常接收通知消息。
PRIORITY|NRF服务器节点优先级|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置NRF服务器节点优先级，默认值为0。0代表优先级最高，值越小优先级越高。
GROUPID|归属的NRF服务器组编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
SERVERIPADDR|NRF服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。
SERVERPORT|NRF服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置NRF服务器端口。
SERVERFQDN|NRF服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器FQDN。
SCHEME|URI scheme|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: HTTP|该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。若选择URI scheme为HTTPS，则引用的HTTP客户端模板需配置TLS证书，可通过SHOW CLIENTPROFILE命令查看引用的客户端模板是否配置TLS证书。
APIVERSION|API版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: V1|该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号，需关联客户端模板配置，其编号需在SHOW CLIENTPROFILE命令查询得到的模板编号内。
NOTIFYSVRPROFILEID|通知时使用的HTTP服务端模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号，需关联服务端模板配置，其编号需在SHOW SERVERPROFILE命令查询得到的模板编号内。当值为0时，不引用HTTP服务端模板，相关的订阅会失败，不能正常接收通知消息。
PRIORITY|NRF服务器节点优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置NRF服务器节点优先级，默认值为0。0代表优先级最高，值越小优先级越高。
GROUPID|归属的NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)命令举例 


`
增加NRF服务器节点配置，编号为1，服务器IP地址为“192.168.20.100”，端口号为8080，scheme为“HTTP”，API版本号为“v1”，HTTP客户端模板编号为1，通知时使用的HTTP服务端模板号为2，NRF服务器节点优先级为0，归属的NRF服务器组编号为1。 
ADD SBINRFNODE:ID=1,SERVERIPADDR="192.168.20.100",SERVERPORT=8080,SCHEME="HTTP",APIVERSION="V1",CLIENTPROFILEID=1,NOTIFYSVRPROFILEID=2,PRIORITY=0,GROUPID=1
` 


## 修改NRF服务器节点配置(SET SBINRFNODE) 
## 修改NRF服务器节点配置(SET SBINRFNODE) 


[](None)功能说明 

该命令用于修改NRF服务器节点。当NRF服务器节点信息发生变化时，使用该命令。命令执行成功后，修改后的NRF服务器节点信息会在后续的服务化接口消息中使用。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
SERVERIPADDR|NRF服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。
SERVERPORT|NRF服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置NRF服务器端口。
SERVERFQDN|NRF服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器FQDN。
SCHEME|URI scheme|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: HTTP|该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。若选择URI scheme为HTTPS，则引用的HTTP客户端模板需配置TLS证书，可通过SHOW CLIENTPROFILE命令查看引用的客户端模板是否配置TLS证书。
APIVERSION|API版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: V1|该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号，需关联客户端模板配置，其编号需在SHOW CLIENTPROFILE命令查询得到的模板编号内。
NOTIFYSVRPROFILEID|通知时使用的HTTP服务端模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号，需关联服务端模板配置，其编号需在SHOW SERVERPROFILE命令查询得到的模板编号内。当值为0时，不引用HTTP服务端模板，相关的订阅会失败，不能正常接收通知消息。
PRIORITY|NRF服务器节点优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置NRF服务器节点优先级，默认值为0。0代表优先级最高，值越小优先级越高。
GROUPID|归属的NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
SERVERIPADDR|NRF服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。
SERVERPORT|NRF服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置NRF服务器端口。
SERVERFQDN|NRF服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器FQDN。
SCHEME|URI scheme|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: HTTP|该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。若选择URI scheme为HTTPS，则引用的HTTP客户端模板需配置TLS证书，可通过SHOW CLIENTPROFILE命令查看引用的客户端模板是否配置TLS证书。
APIVERSION|API版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: V1|该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号，需关联客户端模板配置，其编号需在SHOW CLIENTPROFILE命令查询得到的模板编号内。
NOTIFYSVRPROFILEID|通知时使用的HTTP服务端模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号，需关联服务端模板配置，其编号需在SHOW SERVERPROFILE命令查询得到的模板编号内。当值为0时，不引用HTTP服务端模板，相关的订阅会失败，不能正常接收通知消息。
PRIORITY|NRF服务器节点优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置NRF服务器节点优先级，默认值为0。0代表优先级最高，值越小优先级越高。
GROUPID|归属的NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)命令举例 


`
修改NRF服务器节点配置，编号为1，服务器IP地址为“192.168.20.100”，端口号为8080，URI scheme为“HTTP”，API版本号为“v1”，HTTP客户端模板编号为1，通知时使用的HTTP服务端模板号为2，NRF服务器节点优先级为0，归属的NRF服务器组编号为1。 
SET SBINRFNODE:ID=1,SERVERIPADDR="192.168.20.100",SERVERPORT=8080,SCHEME="HTTP",APIVERSION="V1",CLIENTPROFILEID=1,NOTIFYSVRPROFILEID=2,PRIORITY=0,GROUPID=1
` 


## 删除NRF服务器节点配置(DEL SBINRFNODE) 
## 删除NRF服务器节点配置(DEL SBINRFNODE) 


[](None)功能说明 

该命令用于删除NRF服务器节点。当本网元不再需要与该对端NRF服务器节点进行服务化接口消息通信时，执行该命令。该命令执行成功后，对应的NRF服务器节点删除成功。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
SERVERIPADDR|NRF服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。
SERVERPORT|NRF服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置NRF服务器端口。
SERVERFQDN|NRF服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器FQDN。
SCHEME|URI scheme|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: HTTP|该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。若选择URI scheme为HTTPS，则引用的HTTP客户端模板需配置TLS证书，可通过SHOW CLIENTPROFILE命令查看引用的客户端模板是否配置TLS证书。
APIVERSION|API版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: V1|该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号，需关联客户端模板配置，其编号需在SHOW CLIENTPROFILE命令查询得到的模板编号内。
NOTIFYSVRPROFILEID|通知时使用的HTTP服务端模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号，需关联服务端模板配置，其编号需在SHOW SERVERPROFILE命令查询得到的模板编号内。当值为0时，不引用HTTP服务端模板，相关的订阅会失败，不能正常接收通知消息。
PRIORITY|NRF服务器节点优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置NRF服务器节点优先级，默认值为0。0代表优先级最高，值越小优先级越高。
GROUPID|归属的NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)命令举例 


`
删除NRF服务器节点配置，编号为1。
DEL SBINRFNODE:ID=1
` 


## 查询NRF服务器节点配置(SHOW SBINRFNODE) 
## 查询NRF服务器节点配置(SHOW SBINRFNODE) 


[](None)功能说明 

该命令用于查询NRF服务器节点配置，包括NRF服务器IP地址、NRF服务器端口、HTTP客户端模板编号、通知时使用的HTTP服务端模板编号等配置信息。当需要查询NRF服务器节点配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部NRF服务器节点配置信息，则不需要输入任何参数。 

 
如需要查询指定的NRF服务器节点配置信息，则需要输入NRF服务器节点编号。 

 
如需要查询指定的NRF服务器分组下的所有NRF服务器节点配置信息，则需要输入归属的NRF服务器组编号。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
GROUPID|归属的NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器节点编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点编号。
SERVERIPADDR|NRF服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。
SERVERPORT|NRF服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置NRF服务器端口。
SERVERFQDN|NRF服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置NRF服务器FQDN。
SCHEME|URI scheme|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: HTTP|该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。若选择URI scheme为HTTPS，则引用的HTTP客户端模板需配置TLS证书，可通过SHOW CLIENTPROFILE命令查看引用的客户端模板是否配置TLS证书。
APIVERSION|API版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: V1|该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号，需关联客户端模板配置，其编号需在SHOW CLIENTPROFILE命令查询得到的模板编号内。
NOTIFYSVRPROFILEID|通知时使用的HTTP服务端模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号，需关联服务端模板配置，其编号需在SHOW SERVERPROFILE命令查询得到的模板编号内。当值为0时，不引用HTTP服务端模板，相关的订阅会失败，不能正常接收通知消息。
PRIORITY|NRF服务器节点优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置NRF服务器节点优先级，默认值为0。0代表优先级最高，值越小优先级越高。
GROUPID|归属的NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器节点归属的NRF服务器组编号，需关联NRF服务器分组配置，其编号需在SHOW SBINRFGROUP命令查询得到的NRF服务器分组编号内。




[](None)命令举例 


`
查询NRF服务器节点配置，编号为1。
SHOW SBINRFNODE:ID=1

(No.49) : SHOW SBINRFNODE:ID=1
-----------------CommonS_HTTP_LB_0----------------
NRF服务器节点编号 NRF服务器IP地址 NRF服务器端口 NRF服务器FQDN URI scheme API版本 HTTP客户端模板编号 通知时使用的HTTP服务端模板编号 NRF服务器节点优先级 归属的NRF服务器组编号
1                 172.225.21.12       8080                    HTTP       v1        1                            1                    0                 1
记录数：1

执行成功耗时: 0.142 秒

` 


# NRF服务器策略配置 
# NRF服务器策略配置 


[](None)背景知识 


NRF服务器是5G核心网络中的网络实体，支持以下功能： 


 
维护可用NF实例及其支持的服务的NF配置文件； 

 
允许其他NF实例订阅并获得有关给定类型的新NF实例在NRF中的注册的通知； 

 
支持服务发现功能。它从NF实例接收NF发现请求，并提供满足某些条件（例如，支持给定服务）的可用NF实例的信息。 

 

NRF服务器配置分3级，从高到低：NRF服务器模板配置、NRF服务器分组配置、NRF服务器节点配置。一个NRF服务器模板配置包含主备两个NRF服务器分组，一个NRF服务器分组包含多个NRF服务器节点。 

该配置用于配置NRF服务器的NRF模式、主备策略、流控策略等信息，该配置需要挂在NRF服务器模板配置上才能对对应的模板生效。 




[](None)功能说明 

该配置用于配置NRF服务器的NRF模式、主备策略、流控策略等信息，该配置需要挂在NRF服务器模板配置上才能对对应的模板生效。 

NRF服务器策略配置包括新增NRF服务器策略配置、修改NRF服务器策略配置、删除NRF服务器策略配置、查询NRF服务器策略配置。当需要对NRF服务器策略进行操作时，执行该配置。



[](None)子主题： 






## 新增NRF服务器策略配置(ADD SBINRFPOLICY) 
## 新增NRF服务器策略配置(ADD SBINRFPOLICY) 


[](None)功能说明 

本命令用于新增NRF服务器策略配置。当需要配置网元与NRF服务器之间的主备、重定向、流控等策略时，需要增加本配置。本配置通过策略编号关联到NRF模板。命令执行成功后，NRF模板将应用所关联配置的策略。 


[](None)注意事项 

本策略配置中的流控默认开启，会对关联NRF模板最大并发消息处理量限制，需根据实际情况谨慎确定是否开启。 

负载是否上报是由负载上报变化量阈值以及负载上报起始阈值和负载上报停止阈值共同决定的。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。
NRFPATTERN|NRF模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DUAL_ACTIVE|该参数用于设置NRF模式，包括主备模式和互备双活模式，默认值为互备双活模式。该参数需和对接的NRF服务端实际主备模式保持一致。该参数决定NRF服务端主备节点的状态检测结果。当NRF模式调整为主备模式时，只支持手动倒回。换言之，当NRF模式调整为主备模式时，主用恢复后启用方式即使配置为自动倒回模式，也不会自动倒回，只能采用手动倒回方式或者通过设置永久重定向响应码进行切换。
NRFENABLEMODE|主用恢复后启用方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: AUTO_SWITCH|该参数用于设置主用NRF恢复后的启用方式。自动倒回：缺省为自动倒回，即主用NRF恢复后将自动倒回。手动倒回：需要手动执行动态命令进行倒回。缺省为自动倒回，即主用NRF恢复后将自动倒回。手动启用时，需要手动执行SWP NRF SERVER动态命令进行倒回。
REDIRECTTIMES|临时重定向次数|参数可选性: 任选参数类型: 数字参数范围: 2-100默认值: 2|该参数用于设置NRF返回307时临时重定向最大次数，默认值为2。超过此值，则返回失败。
ALLNRFOFFRSPCODE|主备不可用响应码|参数可选性: 任选参数类型: 数字参数范围: 400-599默认值: 420|该参数用于设置主备NRF都不可用时，SBI-GW给NF的响应码，缺省为420。
SPAREOFFLINERSPCODE|主备间永久重定向响应码|参数可选性: 任选参数类型: 数字参数范围: 300-399默认值: 308|该参数用于设置永久重定向响应的响应码，默认值为308。当前首选NRF服务节点收该参数指定的永久性重定向响应时，则将首选NRF服务节点组切换到另一节点组上，即当前首选NRF服务节点组为主用，则切到备用，当前为备用，则切到主用。
TRAFFICCONTROLFLAG|是否启用流控功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用流量控制功能，默认值为启用，流量控制值固定：大规格-5000个请求每秒；中规格-2000个请求每秒；小规格-1000个请求每秒。该参数会对除注册，去注册，更新注册，心跳以外，其他SBIGW收到来自NF的请求消息进行流量控制。
HEARTBEATINTERVAL|心跳间隔(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 10|该参数用于设置与NRF之间的心跳间隔，默认值为10。
LOADREPORTTHRESHOLD|负载上报变化量阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于配置SBIGW向NRF服务端发送心跳消息的负载变化量阀值。SBIGW向NRF服务端发送心跳消息时，若当前负载相比已上报的负载，变化量超过该配置，则带负载字段；否则不带。若配置为0，表示不判断，心跳均带负载。默认值为20。
LOADREPORTSTART|负载上报起始阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端上报负载的起始阈值。当负载高于此阈值，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。
LOADREPORTSTOP|负载上报停止阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端负载上报停止阈值 。当负载低于此阈值，停止上报。若配置为0，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。
NRFPATTERN|NRF模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DUAL_ACTIVE|该参数用于设置NRF模式，包括主备模式和互备双活模式，默认值为互备双活模式。该参数需和对接的NRF服务端实际主备模式保持一致。该参数决定NRF服务端主备节点的状态检测结果。当NRF模式调整为主备模式时，只支持手动倒回。换言之，当NRF模式调整为主备模式时，主用恢复后启用方式即使配置为自动倒回模式，也不会自动倒回，只能采用手动倒回方式或者通过设置永久重定向响应码进行切换。
NRFENABLEMODE|主用恢复后启用方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: AUTO_SWITCH|该参数用于设置主用NRF恢复后的启用方式。自动倒回：缺省为自动倒回，即主用NRF恢复后将自动倒回。手动倒回：需要手动执行动态命令进行倒回。缺省为自动倒回，即主用NRF恢复后将自动倒回。手动启用时，需要手动执行SWP NRF SERVER动态命令进行倒回。
REDIRECTTIMES|临时重定向次数|参数可选性: 任选参数类型: 数字参数范围: 2-100默认值: 2|该参数用于设置NRF返回307时临时重定向最大次数，默认值为2。超过此值，则返回失败。
ALLNRFOFFRSPCODE|主备不可用响应码|参数可选性: 任选参数类型: 数字参数范围: 400-599默认值: 420|该参数用于设置主备NRF都不可用时，SBI-GW给NF的响应码，缺省为420。
SPAREOFFLINERSPCODE|主备间永久重定向响应码|参数可选性: 任选参数类型: 数字参数范围: 300-399默认值: 308|该参数用于设置永久重定向响应的响应码，默认值为308。当前首选NRF服务节点收该参数指定的永久性重定向响应时，则将首选NRF服务节点组切换到另一节点组上，即当前首选NRF服务节点组为主用，则切到备用，当前为备用，则切到主用。
TRAFFICCONTROLFLAG|是否启用流控功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用流量控制功能，默认值为启用，流量控制值固定：大规格-5000个请求每秒；中规格-2000个请求每秒；小规格-1000个请求每秒。该参数会对除注册，去注册，更新注册，心跳以外，其他SBIGW收到来自NF的请求消息进行流量控制。
HEARTBEATINTERVAL|心跳间隔(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 10|该参数用于设置与NRF之间的心跳间隔，默认值为10。
LOADREPORTTHRESHOLD|负载上报变化量阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于配置SBIGW向NRF服务端发送心跳消息的负载变化量阀值。SBIGW向NRF服务端发送心跳消息时，若当前负载相比已上报的负载，变化量超过该配置，则带负载字段；否则不带。若配置为0，表示不判断，心跳均带负载。默认值为20。
LOADREPORTSTART|负载上报起始阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端上报负载的起始阈值。当负载高于此阈值，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。
LOADREPORTSTOP|负载上报停止阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端负载上报停止阈值 。当负载低于此阈值，停止上报。若配置为0，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。




[](None)命令举例 


`
新增NRF服务器策略配置，编号为1，NRF模式为“互备双活模式”，主用恢复后启用方式为“自动倒回”，临时重定向次数为2，主备不可用响应码为420，主备间永久重定向响应码为308，是否启用流控功能“启用”，心跳间隔为10秒，负载上报变化量阈值为20%，负载上报起始阈值为50%，负载上报停止阈值为30%。
ADD SBINRFPOLICY:ID=1,NRFPATTERN="DUAL_ACTIVE",NRFENABLEMODE="AUTO_SWITCH",REDIRECTTIMES=2,ALLNRFOFFRSPCODE=420,SPAREOFFLINERSPCODE=308,TRAFFICCONTROLFLAG="TRUE",HEARTBEATINTERVAL=10,LOADREPORTTHRESHOLD=20,LOADREPORTSTART=50,LOADREPORTSTOP=30
` 


## 修改NRF服务器策略配置(SET SBINRFPOLICY) 
## 修改NRF服务器策略配置(SET SBINRFPOLICY) 


[](None)功能说明 

本命令用于修改NRF服务器策略配置。当需要修改网元与NRF服务器之间的主备、重定向、流控等策略时，需要修改本配置。命令执行成功后，相关联的NRF模板所配置的策略将发生变更。 


[](None)注意事项 

本策略配置中的流控默认开启，会对关联NRF模板最大并发消息处理量限制，需根据实际情况谨慎确定是否开启。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。
NRFPATTERN|NRF模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DUAL_ACTIVE|该参数用于设置NRF模式，包括主备模式和互备双活模式，默认值为互备双活模式。该参数需和对接的NRF服务端实际主备模式保持一致。该参数决定NRF服务端主备节点的状态检测结果。当NRF模式调整为主备模式时，只支持手动倒回。换言之，当NRF模式调整为主备模式时，主用恢复后启用方式即使配置为自动倒回模式，也不会自动倒回，只能采用手动倒回方式或者通过设置永久重定向响应码进行切换。
NRFENABLEMODE|主用恢复后启用方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: AUTO_SWITCH|该参数用于设置主用NRF恢复后的启用方式。自动倒回：缺省为自动倒回，即主用NRF恢复后将自动倒回。手动倒回：需要手动执行动态命令进行倒回。缺省为自动倒回，即主用NRF恢复后将自动倒回。手动启用时，需要手动执行SWP NRF SERVER动态命令进行倒回。
REDIRECTTIMES|临时重定向次数|参数可选性: 任选参数类型: 数字参数范围: 2-100默认值: 2|该参数用于设置NRF返回307时临时重定向最大次数，默认值为2。超过此值，则返回失败。
ALLNRFOFFRSPCODE|主备不可用响应码|参数可选性: 任选参数类型: 数字参数范围: 400-599默认值: 420|该参数用于设置主备NRF都不可用时，SBI-GW给NF的响应码，缺省为420。
SPAREOFFLINERSPCODE|主备间永久重定向响应码|参数可选性: 任选参数类型: 数字参数范围: 300-399默认值: 308|该参数用于设置永久重定向响应的响应码，默认值为308。当前首选NRF服务节点收该参数指定的永久性重定向响应时，则将首选NRF服务节点组切换到另一节点组上，即当前首选NRF服务节点组为主用，则切到备用，当前为备用，则切到主用。
TRAFFICCONTROLFLAG|是否启用流控功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用流量控制功能，默认值为启用，流量控制值固定：大规格-5000个请求每秒；中规格-2000个请求每秒；小规格-1000个请求每秒。该参数会对除注册，去注册，更新注册，心跳以外，其他SBIGW收到来自NF的请求消息进行流量控制。
HEARTBEATINTERVAL|心跳间隔(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 10|该参数用于设置与NRF之间的心跳间隔，默认值为10。
LOADREPORTTHRESHOLD|负载上报变化量阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于配置SBIGW向NRF服务端发送心跳消息的负载变化量阀值。SBIGW向NRF服务端发送心跳消息时，若当前负载相比已上报的负载，变化量超过该配置，则带负载字段；否则不带。若配置为0，表示不判断，心跳均带负载。默认值为20。
LOADREPORTSTART|负载上报起始阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端上报负载的起始阈值。当负载高于此阈值，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。
LOADREPORTSTOP|负载上报停止阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端负载上报停止阈值 。当负载低于此阈值，停止上报。若配置为0，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。
NRFPATTERN|NRF模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DUAL_ACTIVE|该参数用于设置NRF模式，包括主备模式和互备双活模式，默认值为互备双活模式。该参数需和对接的NRF服务端实际主备模式保持一致。该参数决定NRF服务端主备节点的状态检测结果。当NRF模式调整为主备模式时，只支持手动倒回。换言之，当NRF模式调整为主备模式时，主用恢复后启用方式即使配置为自动倒回模式，也不会自动倒回，只能采用手动倒回方式或者通过设置永久重定向响应码进行切换。
NRFENABLEMODE|主用恢复后启用方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: AUTO_SWITCH|该参数用于设置主用NRF恢复后的启用方式。自动倒回：缺省为自动倒回，即主用NRF恢复后将自动倒回。手动倒回：需要手动执行动态命令进行倒回。缺省为自动倒回，即主用NRF恢复后将自动倒回。手动启用时，需要手动执行SWP NRF SERVER动态命令进行倒回。
REDIRECTTIMES|临时重定向次数|参数可选性: 任选参数类型: 数字参数范围: 2-100默认值: 2|该参数用于设置NRF返回307时临时重定向最大次数，默认值为2。超过此值，则返回失败。
ALLNRFOFFRSPCODE|主备不可用响应码|参数可选性: 任选参数类型: 数字参数范围: 400-599默认值: 420|该参数用于设置主备NRF都不可用时，SBI-GW给NF的响应码，缺省为420。
SPAREOFFLINERSPCODE|主备间永久重定向响应码|参数可选性: 任选参数类型: 数字参数范围: 300-399默认值: 308|该参数用于设置永久重定向响应的响应码，默认值为308。当前首选NRF服务节点收该参数指定的永久性重定向响应时，则将首选NRF服务节点组切换到另一节点组上，即当前首选NRF服务节点组为主用，则切到备用，当前为备用，则切到主用。
TRAFFICCONTROLFLAG|是否启用流控功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用流量控制功能，默认值为启用，流量控制值固定：大规格-5000个请求每秒；中规格-2000个请求每秒；小规格-1000个请求每秒。该参数会对除注册，去注册，更新注册，心跳以外，其他SBIGW收到来自NF的请求消息进行流量控制。
HEARTBEATINTERVAL|心跳间隔(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 10|该参数用于设置与NRF之间的心跳间隔，默认值为10。
LOADREPORTTHRESHOLD|负载上报变化量阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于配置SBIGW向NRF服务端发送心跳消息的负载变化量阀值。SBIGW向NRF服务端发送心跳消息时，若当前负载相比已上报的负载，变化量超过该配置，则带负载字段；否则不带。若配置为0，表示不判断，心跳均带负载。默认值为20。
LOADREPORTSTART|负载上报起始阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端上报负载的起始阈值。当负载高于此阈值，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。
LOADREPORTSTOP|负载上报停止阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端负载上报停止阈值 。当负载低于此阈值，停止上报。若配置为0，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。




[](None)命令举例 


`
修改NRF服务器策略配置，编号为1，NRF模式为“互备双活模式”，主用恢复后启用方式为“自动倒回”，临时重定向次数为2，主备不可用响应码为420，主备间永久重定向响应码为308，是否启用流控功能“启用”，心跳间隔为10秒，负载上报变化量阈值为20%，负载上报起始阈值为50%，负载上报停止阈值为30%。
SET SBINRFPOLICY:ID=1,NRFPATTERN="DUAL_ACTIVE",NRFENABLEMODE="AUTO_SWITCH",REDIRECTTIMES=2,ALLNRFOFFRSPCODE=420,SPAREOFFLINERSPCODE=308,TRAFFICCONTROLFLAG="TRUE",HEARTBEATINTERVAL=10,LOADREPORTTHRESHOLD=20,LOADREPORTSTART=50,LOADREPORTSTOP=30
` 


## 删除NRF服务器策略配置(DEL SBINRFPOLICY) 
## 删除NRF服务器策略配置(DEL SBINRFPOLICY) 


[](None)功能说明 

本命令用于删除NRF服务器策略配置。当不再需要网元与NRF服务器之间的主备、重定向、流控等策略时，需要删除本配置。 


[](None)注意事项 

删除该配置前，需要先修改(或删除)NRF模板对本配置策略编号的引用。通过SHOW SBINRFPROFILE查询。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。
NRFPATTERN|NRF模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DUAL_ACTIVE|该参数用于设置NRF模式，包括主备模式和互备双活模式，默认值为互备双活模式。该参数需和对接的NRF服务端实际主备模式保持一致。该参数决定NRF服务端主备节点的状态检测结果。当NRF模式调整为主备模式时，只支持手动倒回。换言之，当NRF模式调整为主备模式时，主用恢复后启用方式即使配置为自动倒回模式，也不会自动倒回，只能采用手动倒回方式或者通过设置永久重定向响应码进行切换。
NRFENABLEMODE|主用恢复后启用方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: AUTO_SWITCH|该参数用于设置主用NRF恢复后的启用方式。自动倒回：缺省为自动倒回，即主用NRF恢复后将自动倒回。手动倒回：需要手动执行动态命令进行倒回。缺省为自动倒回，即主用NRF恢复后将自动倒回。手动启用时，需要手动执行SWP NRF SERVER动态命令进行倒回。
REDIRECTTIMES|临时重定向次数|参数可选性: 任选参数类型: 数字参数范围: 2-100默认值: 2|该参数用于设置NRF返回307时临时重定向最大次数，默认值为2。超过此值，则返回失败。
ALLNRFOFFRSPCODE|主备不可用响应码|参数可选性: 任选参数类型: 数字参数范围: 400-599默认值: 420|该参数用于设置主备NRF都不可用时，SBI-GW给NF的响应码，缺省为420。
SPAREOFFLINERSPCODE|主备间永久重定向响应码|参数可选性: 任选参数类型: 数字参数范围: 300-399默认值: 308|该参数用于设置永久重定向响应的响应码，默认值为308。当前首选NRF服务节点收该参数指定的永久性重定向响应时，则将首选NRF服务节点组切换到另一节点组上，即当前首选NRF服务节点组为主用，则切到备用，当前为备用，则切到主用。
TRAFFICCONTROLFLAG|是否启用流控功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用流量控制功能，默认值为启用，流量控制值固定：大规格-5000个请求每秒；中规格-2000个请求每秒；小规格-1000个请求每秒。该参数会对除注册，去注册，更新注册，心跳以外，其他SBIGW收到来自NF的请求消息进行流量控制。
HEARTBEATINTERVAL|心跳间隔(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 10|该参数用于设置与NRF之间的心跳间隔，默认值为10。
LOADREPORTTHRESHOLD|负载上报变化量阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于配置SBIGW向NRF服务端发送心跳消息的负载变化量阀值。SBIGW向NRF服务端发送心跳消息时，若当前负载相比已上报的负载，变化量超过该配置，则带负载字段；否则不带。若配置为0，表示不判断，心跳均带负载。默认值为20。
LOADREPORTSTART|负载上报起始阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端上报负载的起始阈值。当负载高于此阈值，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。
LOADREPORTSTOP|负载上报停止阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端负载上报停止阈值 。当负载低于此阈值，停止上报。若配置为0，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。




[](None)命令举例 


`
删除NRF服务器策略配置，编号为1。
DEL SBINRFPOLICY:ID=1
` 


## 查询NRF服务器策略配置(SHOW SBINRFPOLICY) 
## 查询NRF服务器策略配置(SHOW SBINRFPOLICY) 


[](None)功能说明 

本命令用于查看NRF服务器策略配置。当需要查看网元与NRF服务器之间的主备、重定向、流控等策略时，执行本命令。命令执行成功后，将显示相关策略配置。 


[](None)注意事项 

当输入策略编号时，将查询指定编号的策略配置。当不填写策略编号时，将查询所有的策略配置。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。该参数由NRF模板配置引用，通过ADD SBINRFPROFILE和SET SBINRFPROFILE命令配置。
NRFPATTERN|NRF模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DUAL_ACTIVE|该参数用于设置NRF模式，包括主备模式和互备双活模式，默认值为互备双活模式。该参数需和对接的NRF服务端实际主备模式保持一致。该参数决定NRF服务端主备节点的状态检测结果。当NRF模式调整为主备模式时，只支持手动倒回。换言之，当NRF模式调整为主备模式时，主用恢复后启用方式即使配置为自动倒回模式，也不会自动倒回，只能采用手动倒回方式或者通过设置永久重定向响应码进行切换。
NRFENABLEMODE|主用恢复后启用方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: AUTO_SWITCH|该参数用于设置主用NRF恢复后的启用方式。自动倒回：缺省为自动倒回，即主用NRF恢复后将自动倒回。手动倒回：需要手动执行动态命令进行倒回。缺省为自动倒回，即主用NRF恢复后将自动倒回。手动启用时，需要手动执行SWP NRF SERVER动态命令进行倒回。
REDIRECTTIMES|临时重定向次数|参数可选性: 任选参数类型: 数字参数范围: 2-100默认值: 2|该参数用于设置NRF返回307时临时重定向最大次数，默认值为2。超过此值，则返回失败。
ALLNRFOFFRSPCODE|主备不可用响应码|参数可选性: 任选参数类型: 数字参数范围: 400-599默认值: 420|该参数用于设置主备NRF都不可用时，SBI-GW给NF的响应码，缺省为420。
SPAREOFFLINERSPCODE|主备间永久重定向响应码|参数可选性: 任选参数类型: 数字参数范围: 300-399默认值: 308|该参数用于设置永久重定向响应的响应码，默认值为308。当前首选NRF服务节点收该参数指定的永久性重定向响应时，则将首选NRF服务节点组切换到另一节点组上，即当前首选NRF服务节点组为主用，则切到备用，当前为备用，则切到主用。
TRAFFICCONTROLFLAG|是否启用流控功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用流量控制功能，默认值为启用，流量控制值固定：大规格-5000个请求每秒；中规格-2000个请求每秒；小规格-1000个请求每秒。该参数会对除注册，去注册，更新注册，心跳以外，其他SBIGW收到来自NF的请求消息进行流量控制。
HEARTBEATINTERVAL|心跳间隔(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 10|该参数用于设置与NRF之间的心跳间隔，默认值为10。
LOADREPORTTHRESHOLD|负载上报变化量阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于配置SBIGW向NRF服务端发送心跳消息的负载变化量阀值。SBIGW向NRF服务端发送心跳消息时，若当前负载相比已上报的负载，变化量超过该配置，则带负载字段；否则不带。若配置为0，表示不判断，心跳均带负载。默认值为20。
LOADREPORTSTART|负载上报起始阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端上报负载的起始阈值。当负载高于此阈值，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。
LOADREPORTSTOP|负载上报停止阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数用于配置SBIGW向NRF服务端负载上报停止阈值 。当负载低于此阈值，停止上报。若配置为0，则负载变化超过"负载上报变化量阈值(%)"，上报一次负载值。默认值为0。




[](None)命令举例 


`
查询NRF策略，编号为1。
SHOW SBINRFPOLICY:ID=1

(No.1) : SHOW SBINRFPOLICY:
-----------------CommonS_HTTP_LB_0----------------
操作维护       NRF服务器策略编号 NRF模式      主用恢复后启用方式 临时重定向次数 主备不可用响应码 主备间永久重定向响应码 是否启用流控功能 心跳间隔(秒) 负载上报变化量阈值(%) 负载上报起始阈值(%) 负载上报停止阈值(%) 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
复制 修改 删除 1                 互备双活模式 自动倒回           2              420              308                    启用             10           20                     50               30               
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2022-01-20 09:45:13 耗时: 0.687 秒

` 


# NRF服务器模板配置 
# NRF服务器模板配置 


[](None)背景知识 


NRF服务器是5G核心网络中的网络实体，支持以下功能： 


 
维护可用NF实例及其支持的服务的NF配置文件； 

 
允许其他NF实例订阅并获得有关给定类型的新NF实例在NRF中的注册的通知； 

 
支持服务发现功能。它从NF实例接收NF发现请求，并提供满足某些条件（例如，支持给定服务）的可用NF实例的信息。 

 

NRF服务器配置分3级，从高到低：NRF服务器模板配置、NRF服务器分组配置、NRF服务器节点配置。一个NRF服务器模板配置包含主备两个NRF服务器分组，一个NRF服务器分组包含多个NRF服务器节点。 

该配置用于配置NRF模板下的主备NRF服务器分组，以及该模板使用的NRF服务器策略。 




[](None)功能说明 


该配置用于配置NRF模板下的主备NRF服务器分组，以及该模板使用的NRF服务器策略。 

NRF服务器模板配置包括新增NRF服务器模板配置、修改NRF服务器模板配置、删除NRF服务器模板配置、查询NRF服务器模板配置。当需要对NRF服务器模板进行操作时，执行该配置。 




[](None)子主题： 






## 新增NRF服务器模板配置(ADD SBINRFPROFILE) 
## 新增NRF服务器模板配置(ADD SBINRFPROFILE) 


[](None)功能说明 

该命令用于新增NRF服务器模板配置。当需要和对端网元进行服务化接口消息通信时，使用该命令。该命令执行成功后，引用NRF服务器策略编号以及主用、备用NRF服务器组号的NRF服务器模板配置成功。 


[](None)注意事项 

同一个NRF服务器分组ID只能在一个NRF服务器模板中出现一次。 

此配置引用的主用NRF服务器组中至少要配置一个NRF服务器节点，否则锚定主节点失败。 

主用NRF服务器组下的节点为主用节点，备用NRF服务器组下的节点为备用节点。 

配置的NRF服务器策略编号可通过[SHOW SBINRFPOLICY](../mml/1220516.html)命令进行查询。

配置的主用/备用NRF服务器组编号可通过[SHOW SBINRFGROUP](../mml/1220508.html)命令进行查询。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。
POLICYID|NRF服务器策略编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。配置的NRF服务器策略编号可通过SHOW SBINRFPOLICY命令进行查询。
ACTIVESRVGRPID|主用NRF服务器组编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置主用NRF服务器组编号。配置的主用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。
BAKSRVGRPID|备用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置备用NRF服务器组编号。配置的备用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。当值为0时，表示不启用备用NRF服务器组。
DETECTMETHOD|检测方法|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DETECTBY_HEARTBEAT|该参数用于设置检测方法。检测方法是枚举值，取值范围是HEARTBEAT和RETRIEVE，默认值是HEARTBEAT。HEARTBEAT：节点检测消息使用29510-g30协议定义的heart-beat消息进行检测，url中携带的NfInstanceId默认为全０。RETRIEVE：节点检测消息使用29510-g30协议定义的Retrieval消息进行检测。即NF服务使用者应向资源URI“nf-instances”收集资源而发送的HTTP GET请求。
DETECTNFINSTID|检测使用的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 0-64默认值: 00000000-0000-0000-0000-000000000000|该参数用于设置检测使用的NF实例标识。检测使用的NF实例标识默认值为00000000-0000-0000-0000-000000000000。
ISSELFDETECTID|检测使用自身NF实例标识|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置节点检测是否使用网元自身的NF实例标识。节点检测默认不使用网元自身NF实例标识。
ABNORMALTIMES|异常不可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 5|该参数用于设置异常不可用检测次数，即本端发出的检测消息对端连续几次不回，则将对端认定为不可用状态。异常不可用检测次数默认值为5。
NORMALTIMES|可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于设置可用检测次数。即本端发出的检测消息对端连续几次回成功响应，则将对端认定为可用状态。可用检测次数默认值为3。
INTERVAL|检测间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-300默认值: 5|该参数用于设置检测间隔。检测间隔默认值为5（秒）。
SERVICESFORMAT|服务信息格式类型配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: FORMAT_ARRAY|该参数用于设置服务信息格式类型。服务信息格式类型是枚举值，取值范围是MAP、ARRAY、BOTH，默认值是ARRAY。MAP：如果注册消息携带nfServices（数组类型），则SBIGW会将其转化为nfServiceList（map类型），并清除掉nfServices，再进行后续处理。ARRAY：如果注册消息携带nfServiceList，则SBIGW会将其转化为nfServices，并清除掉nfServiceList，再进行后续处理。BOTH：收到注册消息后SBIGW会同时保存nfServices和nfServiceList。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。
POLICYID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。配置的NRF服务器策略编号可通过SHOW SBINRFPOLICY命令进行查询。
ACTIVESRVGRPID|主用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置主用NRF服务器组编号。配置的主用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。
BAKSRVGRPID|备用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置备用NRF服务器组编号。配置的备用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。当值为0时，表示不启用备用NRF服务器组。
DETECTMETHOD|检测方法|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DETECTBY_HEARTBEAT|该参数用于设置检测方法。检测方法是枚举值，取值范围是HEARTBEAT和RETRIEVE，默认值是HEARTBEAT。HEARTBEAT：节点检测消息使用29510-g30协议定义的heart-beat消息进行检测，url中携带的NfInstanceId默认为全０。RETRIEVE：节点检测消息使用29510-g30协议定义的Retrieval消息进行检测。即NF服务使用者应向资源URI“nf-instances”收集资源而发送的HTTP GET请求。
DETECTNFINSTID|检测使用的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 0-64默认值: 00000000-0000-0000-0000-000000000000|该参数用于设置检测使用的NF实例标识。检测使用的NF实例标识默认值为00000000-0000-0000-0000-000000000000。
ISSELFDETECTID|检测使用自身NF实例标识|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置节点检测是否使用网元自身的NF实例标识。节点检测默认不使用网元自身NF实例标识。
ABNORMALTIMES|异常不可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 5|该参数用于设置异常不可用检测次数，即本端发出的检测消息对端连续几次不回，则将对端认定为不可用状态。异常不可用检测次数默认值为5。
NORMALTIMES|可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于设置可用检测次数。即本端发出的检测消息对端连续几次回成功响应，则将对端认定为可用状态。可用检测次数默认值为3。
INTERVAL|检测间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-300默认值: 5|该参数用于设置检测间隔。检测间隔默认值为5（秒）。
SERVICESFORMAT|服务信息格式类型配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: FORMAT_ARRAY|该参数用于设置服务信息格式类型。服务信息格式类型是枚举值，取值范围是MAP、ARRAY、BOTH，默认值是ARRAY。MAP：如果注册消息携带nfServices（数组类型），则SBIGW会将其转化为nfServiceList（map类型），并清除掉nfServices，再进行后续处理。ARRAY：如果注册消息携带nfServiceList，则SBIGW会将其转化为nfServices，并清除掉nfServiceList，再进行后续处理。BOTH：收到注册消息后SBIGW会同时保存nfServices和nfServiceList。




[](None)命令举例 


`
新增NRF服务器模板配置，编号为1，NRF服务器策略编号1，主用NRF服务器组编号为2，备用NRF服务器组编号为3，检测方法为心跳检测，检测使用的NF实例标识为"00000000-0000-0000-0000-000000000000"，检测使用自身NF实例标识为否，异常不可用检测次数为5，可用检测次数为3，检测间隔为5, 服务信息格式类型配置为数组。 
ADD SBINRFPROFILE:ID=1,POLICYID=1,ACTIVESRVGRPID=2,BAKSRVGRPID=3,DETECTMETHOD="DETECTBY_HEARTBEAT",DETECTNFINSTID="00000000-0000-0000-0000-000000000000",ISSELFDETECTID="false",ABNORMALTIMES=5,NORMALTIMES=3,INTERVAL=5,SERVICESFORMAT="FORMAT_ARRAY"
` 


## 修改NRF服务器模板配置(SET SBINRFPROFILE) 
## 修改NRF服务器模板配置(SET SBINRFPROFILE) 


[](None)功能说明 

该命令用于修改NRF服务器模板配置。当需要修改NRF服务器模板配置所引用的NRF服务器策略编号以及主用、备用NRF服务器组号时，使用该命令。该命令执行成功后，模板引用配置发生变更。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。
POLICYID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。配置的NRF服务器策略编号可通过SHOW SBINRFPOLICY命令进行查询。
ACTIVESRVGRPID|主用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置主用NRF服务器组编号。配置的主用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。
BAKSRVGRPID|备用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置备用NRF服务器组编号。配置的备用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。当值为0时，表示不启用备用NRF服务器组。
DETECTMETHOD|检测方法|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DETECTBY_HEARTBEAT|该参数用于设置检测方法。检测方法是枚举值，取值范围是HEARTBEAT和RETRIEVE，默认值是HEARTBEAT。HEARTBEAT：节点检测消息使用29510-g30协议定义的heart-beat消息进行检测，url中携带的NfInstanceId默认为全０。RETRIEVE：节点检测消息使用29510-g30协议定义的Retrieval消息进行检测。即NF服务使用者应向资源URI“nf-instances”收集资源而发送的HTTP GET请求。
DETECTNFINSTID|检测使用的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 0-64默认值: 00000000-0000-0000-0000-000000000000|该参数用于设置检测使用的NF实例标识。检测使用的NF实例标识默认值为00000000-0000-0000-0000-000000000000。
ISSELFDETECTID|检测使用自身NF实例标识|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置节点检测是否使用网元自身的NF实例标识。节点检测默认不使用网元自身NF实例标识。
ABNORMALTIMES|异常不可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 5|该参数用于设置异常不可用检测次数，即本端发出的检测消息对端连续几次不回，则将对端认定为不可用状态。异常不可用检测次数默认值为5。
NORMALTIMES|可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于设置可用检测次数。即本端发出的检测消息对端连续几次回成功响应，则将对端认定为可用状态。可用检测次数默认值为3。
INTERVAL|检测间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-300默认值: 5|该参数用于设置检测间隔。检测间隔默认值为5（秒）。
SERVICESFORMAT|服务信息格式类型配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: FORMAT_ARRAY|该参数用于设置服务信息格式类型。服务信息格式类型是枚举值，取值范围是MAP、ARRAY、BOTH，默认值是ARRAY。MAP：如果注册消息携带nfServices（数组类型），则SBIGW会将其转化为nfServiceList（map类型），并清除掉nfServices，再进行后续处理。ARRAY：如果注册消息携带nfServiceList，则SBIGW会将其转化为nfServices，并清除掉nfServiceList，再进行后续处理。BOTH：收到注册消息后SBIGW会同时保存nfServices和nfServiceList。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。
POLICYID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。配置的NRF服务器策略编号可通过SHOW SBINRFPOLICY命令进行查询。
ACTIVESRVGRPID|主用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置主用NRF服务器组编号。配置的主用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。
BAKSRVGRPID|备用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置备用NRF服务器组编号。配置的备用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。当值为0时，表示不启用备用NRF服务器组。
DETECTMETHOD|检测方法|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DETECTBY_HEARTBEAT|该参数用于设置检测方法。检测方法是枚举值，取值范围是HEARTBEAT和RETRIEVE，默认值是HEARTBEAT。HEARTBEAT：节点检测消息使用29510-g30协议定义的heart-beat消息进行检测，url中携带的NfInstanceId默认为全０。RETRIEVE：节点检测消息使用29510-g30协议定义的Retrieval消息进行检测。即NF服务使用者应向资源URI“nf-instances”收集资源而发送的HTTP GET请求。
DETECTNFINSTID|检测使用的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 0-64默认值: 00000000-0000-0000-0000-000000000000|该参数用于设置检测使用的NF实例标识。检测使用的NF实例标识默认值为00000000-0000-0000-0000-000000000000。
ISSELFDETECTID|检测使用自身NF实例标识|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置节点检测是否使用网元自身的NF实例标识。节点检测默认不使用网元自身NF实例标识。
ABNORMALTIMES|异常不可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 5|该参数用于设置异常不可用检测次数，即本端发出的检测消息对端连续几次不回，则将对端认定为不可用状态。异常不可用检测次数默认值为5。
NORMALTIMES|可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于设置可用检测次数。即本端发出的检测消息对端连续几次回成功响应，则将对端认定为可用状态。可用检测次数默认值为3。
INTERVAL|检测间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-300默认值: 5|该参数用于设置检测间隔。检测间隔默认值为5（秒）。
SERVICESFORMAT|服务信息格式类型配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: FORMAT_ARRAY|该参数用于设置服务信息格式类型。服务信息格式类型是枚举值，取值范围是MAP、ARRAY、BOTH，默认值是ARRAY。MAP：如果注册消息携带nfServices（数组类型），则SBIGW会将其转化为nfServiceList（map类型），并清除掉nfServices，再进行后续处理。ARRAY：如果注册消息携带nfServiceList，则SBIGW会将其转化为nfServices，并清除掉nfServiceList，再进行后续处理。BOTH：收到注册消息后SBIGW会同时保存nfServices和nfServiceList。




[](None)命令举例 


`
修改NRF服务器模板配置，编号为1，NRF服务器策略编号1，主用NRF服务器组编号为2，备用NRF服务器组编号为3，检测方法为心跳检测，检测使用的NF实例标识为"00000000-0000-0000-0000-000000000000"，异常不可用检测次数为5，可用检测次数为3，检测间隔为5, 服务信息格式类型配置为数组。 
SET SBINRFPROFILE:ID=1,POLICYID=1,ACTIVESRVGRPID=2,BAKSRVGRPID=3,DETECTMETHOD="DETECTBY_HEARTBEAT",DETECTNFINSTID="00000000-0000-0000-0000-000000000000",ABNORMALTIMES=5,NORMALTIMES=3,INTERVAL=5,SERVICESFORMAT="FORMAT_ARRAY"
` 


## 删除NRF服务器模板配置(DEL SBINRFPROFILE) 
## 删除NRF服务器模板配置(DEL SBINRFPROFILE) 


[](None)功能说明 

该命令用于删除NRF服务器模板配置。当需要删除NRF服务器模板与NRF服务器策略编号以及主用、备用NRF服务器组号之间的引用关系时，使用该命令。该命令执行成功后，对应编号的NRF服务器模板配置被删除。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。
POLICYID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。配置的NRF服务器策略编号可通过SHOW SBINRFPOLICY命令进行查询。
ACTIVESRVGRPID|主用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置主用NRF服务器组编号。配置的主用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。
BAKSRVGRPID|备用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置备用NRF服务器组编号。配置的备用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。当值为0时，表示不启用备用NRF服务器组。
DETECTMETHOD|检测方法|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DETECTBY_HEARTBEAT|该参数用于设置检测方法。检测方法是枚举值，取值范围是HEARTBEAT和RETRIEVE，默认值是HEARTBEAT。HEARTBEAT：节点检测消息使用29510-g30协议定义的heart-beat消息进行检测，url中携带的NfInstanceId默认为全０。RETRIEVE：节点检测消息使用29510-g30协议定义的Retrieval消息进行检测。即NF服务使用者应向资源URI“nf-instances”收集资源而发送的HTTP GET请求。
DETECTNFINSTID|检测使用的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 0-64默认值: 00000000-0000-0000-0000-000000000000|该参数用于设置检测使用的NF实例标识。检测使用的NF实例标识默认值为00000000-0000-0000-0000-000000000000。
ISSELFDETECTID|检测使用自身NF实例标识|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置节点检测是否使用网元自身的NF实例标识。节点检测默认不使用网元自身NF实例标识。
ABNORMALTIMES|异常不可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 5|该参数用于设置异常不可用检测次数，即本端发出的检测消息对端连续几次不回，则将对端认定为不可用状态。异常不可用检测次数默认值为5。
NORMALTIMES|可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于设置可用检测次数。即本端发出的检测消息对端连续几次回成功响应，则将对端认定为可用状态。可用检测次数默认值为3。
INTERVAL|检测间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-300默认值: 5|该参数用于设置检测间隔。检测间隔默认值为5（秒）。
SERVICESFORMAT|服务信息格式类型配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: FORMAT_ARRAY|该参数用于设置服务信息格式类型。服务信息格式类型是枚举值，取值范围是MAP、ARRAY、BOTH，默认值是ARRAY。MAP：如果注册消息携带nfServices（数组类型），则SBIGW会将其转化为nfServiceList（map类型），并清除掉nfServices，再进行后续处理。ARRAY：如果注册消息携带nfServiceList，则SBIGW会将其转化为nfServices，并清除掉nfServiceList，再进行后续处理。BOTH：收到注册消息后SBIGW会同时保存nfServices和nfServiceList。




[](None)命令举例 


`
删除NRF服务器模板配置，编号为1。
DEL SBINRFPROFILE:ID=1
` 


## 查询NRF服务器模板配置(SHOW SBINRFPROFILE) 
## 查询NRF服务器模板配置(SHOW SBINRFPROFILE) 


[](None)功能说明 

该命令用于查询NRF服务器模板配置。当需要查询NRF服务器模板配置的引用信息时，使用该命令。该命令执行成功后，显示该NRF服务器模板配置的所引用的NRF服务器策略编号以及主用、备用NRF服务器组号。 


[](None)注意事项 


 
如需要查询全部NRF服务器模板配置信息，则不需要输入任何参数。 

 
如需要查询指定的NRF服务器模板配置信息，则需要输入模板编号。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号。
POLICYID|NRF服务器策略编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器策略编号。配置的NRF服务器策略编号可通过SHOW SBINRFPOLICY命令进行查询。
ACTIVESRVGRPID|主用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置主用NRF服务器组编号。配置的主用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。
BAKSRVGRPID|备用NRF服务器组编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置备用NRF服务器组编号。配置的备用NRF服务器组编号可通过SHOW SBINRFGROUP命令进行查询。当值为0时，表示不启用备用NRF服务器组。
DETECTMETHOD|检测方法|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DETECTBY_HEARTBEAT|该参数用于设置检测方法。检测方法是枚举值，取值范围是HEARTBEAT和RETRIEVE，默认值是HEARTBEAT。HEARTBEAT：节点检测消息使用29510-g30协议定义的heart-beat消息进行检测，url中携带的NfInstanceId默认为全０。RETRIEVE：节点检测消息使用29510-g30协议定义的Retrieval消息进行检测。即NF服务使用者应向资源URI“nf-instances”收集资源而发送的HTTP GET请求。
DETECTNFINSTID|检测使用的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 0-64默认值: 00000000-0000-0000-0000-000000000000|该参数用于设置检测使用的NF实例标识。检测使用的NF实例标识默认值为00000000-0000-0000-0000-000000000000。
ISSELFDETECTID|检测使用自身NF实例标识|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置节点检测是否使用网元自身的NF实例标识。节点检测默认不使用网元自身NF实例标识。
ABNORMALTIMES|异常不可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 5|该参数用于设置异常不可用检测次数，即本端发出的检测消息对端连续几次不回，则将对端认定为不可用状态。异常不可用检测次数默认值为5。
NORMALTIMES|可用检测次数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于设置可用检测次数。即本端发出的检测消息对端连续几次回成功响应，则将对端认定为可用状态。可用检测次数默认值为3。
INTERVAL|检测间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-300默认值: 5|该参数用于设置检测间隔。检测间隔默认值为5（秒）。
SERVICESFORMAT|服务信息格式类型配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: FORMAT_ARRAY|该参数用于设置服务信息格式类型。服务信息格式类型是枚举值，取值范围是MAP、ARRAY、BOTH，默认值是ARRAY。MAP：如果注册消息携带nfServices（数组类型），则SBIGW会将其转化为nfServiceList（map类型），并清除掉nfServices，再进行后续处理。ARRAY：如果注册消息携带nfServiceList，则SBIGW会将其转化为nfServices，并清除掉nfServiceList，再进行后续处理。BOTH：收到注册消息后SBIGW会同时保存nfServices和nfServiceList。




[](None)命令举例 


`
查询NRF服务器模板配置，编号为1。
SHOW SBINRFPROFILE:ID=1

(No.1) : SHOW SBINRFPROFILE:ID=1
-----------------CommonS_HTTP_LB_0----------------
NRF服务器模板编号 NRF服务器策略编号 主用NRF服务器组编号 备用NRF服务器组编号 检测方法       检测使用的NF实例标识                   检测使用自身NF实例标识  异常不可用检测次数 可用检测次数 检测间隔（秒）服务信息格式类型配置
1                 1                 2                   3                   HEARTBEAT     "00000000-0000-0000-0000-000000000000"  不启用                      5                   3            5            ARRAY
记录数：1

执行成功耗时: 0.137 秒

` 


# NRF服务器模板选择配置 
# NRF服务器模板选择配置 


[](None)背景知识 


NRF服务器是5G核心网络中的网络实体，支持以下功能： 


 
维护可用NF实例及其支持的服务的NF配置文件； 

 
允许其他NF实例订阅并获得有关给定类型的新NF实例在NRF中的注册的通知； 

 
支持服务发现功能。它从NF实例接收NF发现请求，并提供满足某些条件（例如，支持给定服务）的可用NF实例的信息。 

 

对于注册消息，SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）会根据注册NF类型和本配置来选择要发送的目的NRF服务器。 

对于订阅、服务发现、授权消息，SBI-GW会根据消息中的目的NF类型和本配置来选择要发送的目的NRF服务器。 




[](None)功能说明 


该配置用来根据NF类型选择对应的NRF服务器模板，从而获得要发送的目的NRF服务器。 

该配置包括新增NRF服务器模板选择、修改NRF服务器模板选择、删除NRF服务器模板选择、查询NRF服务器模板选择等。 




[](None)子主题： 






## 新增NRF服务器模板选择配置(ADD SBINRFPROFILESEL) 
## 新增NRF服务器模板选择配置(ADD SBINRFPROFILESEL) 


[](None)功能说明 

该命令用于新增NRF服务器模板选择配置。当业务不指定NRF服务器模板，需要根据NF类型选择NRF服务器模板时，使用该命令。命令执行成功后，业务不指定NRF服务器模板则根据NF类型选择NRF服务器模板。 


[](None)注意事项 

引用的NRF服务器模板编号必须存在，可用[SHOW SBINRFPROFILE](../mml/1220512.html)查询当前的NRF服务器模板编号。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册、注册更新、去注册，则该参数设置为需要注册、注册更新、去注册的NF类型，其他情况如订阅、服务发现等设置为目的NF类型。
NRFPROFILEID|NRF服务器模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置被选择的NRF服务器模板编号，需关联NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册，则该参数设置为需要注册的NF类型，其他情况设置为目的NF类型。
NRFPROFILEID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置被选择的NRF服务器模板编号，需关联NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。




[](None)命令举例 


`
新增NRF服务器模板选择配置：如果本NF类型为AMF，并且向NRF注册时需要使用编号为1的NRF服务器模板，则设置NF类型为"AMF",NRF服务器模板编号为1。
ADD SBINRFPROFILESEL:NFTYPE="AMF_TYPE",NRFPROFILEID=1;
` 


## 修改NRF服务器模板选择配置(SET SBINRFPROFILESEL) 
## 修改NRF服务器模板选择配置(SET SBINRFPROFILESEL) 


[](None)功能说明 

该命令用于修改NRF服务器模板选择配置。当特定NF类型选择的NRF服务器模板发生变化时，使用该命令。修改后的特定NF类型选择的NRF服务器模板会在后续的消息流程中使用 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册、注册更新、去注册，则该参数设置为需要注册、注册更新、去注册的NF类型，其他情况如订阅、服务发现等设置为目的NF类型。
NRFPROFILEID|NRF服务器模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置被选择的NRF服务器模板编号，需关联NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册，则该参数设置为需要注册的NF类型，其他情况设置为目的NF类型。
NRFPROFILEID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置被选择的NRF服务器模板编号，需关联NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。




[](None)命令举例 


`
修改NRF服务器模板选择配置：如果本NF类型为AMF，并且向NRF注册时需要使用编号为1的NRF服务器模板，则设置NF类型为“AMF”，NRF服务器模板编号为1。
SET  SBINRFPROFILESEL:NFTYPE="AMF_TYPE",NRFPROFILEID=1;
` 


## 删除NRF服务器模板选择配置(DEL SBINRFPROFILESEL) 
## 删除NRF服务器模板选择配置(DEL SBINRFPROFILESEL) 


[](None)功能说明 

该命令用于删除NRF服务器模板选择配置。当不再需要根据特定NF类型选择NRF服务器模板时，执行该命令。该命令执行成功后，若业务不指定NRF服务器模板，则不会根据NF类型选择NRF服务器模板。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册、注册更新、去注册，则该参数设置为需要注册、注册更新、去注册的NF类型，其他情况如订阅、服务发现等设置为目的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册，则该参数设置为需要注册的NF类型，其他情况设置为目的NF类型。
NRFPROFILEID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置被选择的NRF服务器模板编号，需关联NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。




[](None)命令举例 


`
删除NRF服务器模板选择配置：NF类型为“AMF”。
DEL  SBINRFPROFILESEL:NFTYPE="AMF_TYPE";
` 


## 查询NRF服务器模板选择配置(SHOW SBINRFPROFILESEL) 
## 查询NRF服务器模板选择配置(SHOW SBINRFPROFILESEL) 


[](None)功能说明 

该命令用于查询NRF服务器模板选择配置，包括NF类型、NRF服务器模板编号信息。当需要查询NRF服务器模板选择配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部NRF服务器模板选择配置信息，则不需要输入任何参数。 

 
如需要查询特定NF类型的NRF服务器模板选择配置信息，则需要输入NF类型。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册、注册更新、去注册，则该参数设置为需要注册、注册更新、去注册的NF类型，其他情况如订阅、服务发现等设置为目的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册，则该参数设置为需要注册的NF类型，其他情况设置为目的NF类型。
NRFPROFILEID|NRF服务器模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置被选择的NRF服务器模板编号，需关联NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。




[](None)命令举例 


`
查询NRF服务器模板选择配置，NF类型为"AMF"。
SHOW SBINRFPROFILESEL:NFTYPE="AMF_TYPE"

(No.1) : SHOW SBINRFPROFILESEL:NFTYPE="AMF_TYPE"
-----------------CommonS_HTTP_LB_0----------------
NF类型 NRF服务器模板编号
AMF    1
记录数：1

执行成功耗时: 0.132 秒

` 


# 重选配置 
# 重选配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）可以对于外发请求在出现超时等特定失败场景下能够重新选择新的局向继续发送，以增加流程成功的几率。 

该配置用于配置失败重选策略，SBI在重选时可根据该配置的策略进行选择。 




[](None)功能说明 

该配置用于配置失败重选策略。 

重选配置包括新增重选配置、修改重选配置、删除重选配置、查询重选配置。当需要触发重选流程时，执行该配置。



[](None)子主题： 






## 新增重选配置(ADD SBIRESELECT) 
## 新增重选配置(ADD SBIRESELECT) 


[](None)功能说明 

该命令用于新增重选配置。当消息超时需要进行重选时，使用该命令。新增重选配置成功后，若消息超时，会根据目的NF类型、链路重选次数、IP重选次数、NF重选次数、重选等待时长、重选等待补充时长进行重选。 


[](None)注意事项 

目的NF类型要与消息接受方NF类型一致，否则不会进行重选。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置同一个目的IP的不同链路重选次数，默认值为0，默认不进行重选。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置同一个NF的不同IP重选次数，默认值为1。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置不同NF的重选次数，默认值为1。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选等待时长，单位秒，默认值为2。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置同一个目的IP的不同链路重选次数，默认值为0，默认不进行重选。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置同一个NF的不同IP重选次数，默认值为1。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置不同NF的重选次数，默认值为1。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选等待时长，单位秒，默认值为2。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
新增重选配置，目的NF类型为“NRF”，链路重选次数为2，IP重选次数为2，NF重选次数为2，重选等待时长为5秒，重选等待补充时长为100毫秒。
ADD SBIRESELECT:TARGETNFTYPE="NRF_TYPE",LINKRESELTIMES=2,IPRESELECTIMES=2,NFRESELECTIMES=2,RESELECTTIME=5,SUPPLRESELECTIME=100
` 


## 修改重选配置(SET SBIRESELECT) 
## 修改重选配置(SET SBIRESELECT) 


[](None)功能说明 

该命令用于修改重选配置。当需要修改目的NF类型对应的重选次数或者重选等待时长时使用该命令。修改重选配置成功后，一旦消息超时则会根据新的配置进行重选。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置同一个目的IP的不同链路重选次数，默认值为0，默认不进行重选。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置同一个NF的不同IP重选次数，默认值为1。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置不同NF的重选次数，默认值为1。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选等待时长，单位秒，默认值为2。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置同一个目的IP的不同链路重选次数，默认值为0，默认不进行重选。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置同一个NF的不同IP重选次数，默认值为1。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置不同NF的重选次数，默认值为1。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选等待时长，单位秒，默认值为2。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
修改重选配置，目的NF类型为“NRF”，链路重选次数为2，IP重选次数为2，NF重选次数为2，重选等待时长为5秒，重选等待补充时长为200毫秒。
SET SBIRESELECT:TARGETNFTYPE="NRF_TYPE",LINKRESELTIMES=2,IPRESELECTIMES=2,NFRESELECTIMES=2,RESELECTTIME=5,SUPPLRESELECTIME=200
` 


## 删除重选配置(DEL SBIRESELECT) 
## 删除重选配置(DEL SBIRESELECT) 


[](None)功能说明 

该命令用于删除重选配置。当目的NF类型不需要重选时，使用该命令。删除重选配置成功后，若消息超时则不会进行重选。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置同一个目的IP的不同链路重选次数，默认值为0，默认不进行重选。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置同一个NF的不同IP重选次数，默认值为1。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置不同NF的重选次数，默认值为1。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选等待时长，单位秒，默认值为2。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
删除重选配置，目的NF类型为“NRF”。
DEL SBIRESELECT:TARGETNFTYPE="NRF_TYPE"
` 


## 查询重选配置(SHOW SBIRESELECT) 
## 查询重选配置(SHOW SBIRESELECT) 


[](None)功能说明 

该命令用于查询重选配置，包括目的NF类型、链路重选次数、IP重选次数、NF重选次数、重选等待时长以及重选等待补充时长。当需要查询重选配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部重选配置信息，则不需要输入任何参数。 

 
如需要查询指定目的NF类型的重选配置信息，则需要选择目的NF类型。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置同一个目的IP的不同链路重选次数，默认值为0，默认不进行重选。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置同一个NF的不同IP重选次数，默认值为1。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置不同NF的重选次数，默认值为1。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选等待时长，单位秒，默认值为2。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
查询重选配置。
SHOW SBIRESELECT

(No.1) : SHOW SBIRESELECT:
-----------------HTTP服务----------------
操作维护       目的NF类型 链路重选次数 IP重选次数 NF重选次数 重选等待时长(秒) 重选等待补充时长(毫秒)
----------------------------------------------------------------------------------------------
复制 修改 删除 NEF              2         2          2           5                100
----------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-01-09 10:32:50 耗时: 0.774 秒

` 


# 重选状态码配置 
# 重选状态码配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）在外发请求时出现超时等特定失败场景下能够重新选择新的局向继续发送，以增加流程成功的几率。 

默认情况下，只有在超时的场景下才会进行重选，通过该配置可以使得某些失败状态码也会触发失败重选流程。 




[](None)功能说明 


该配置用于配置失败重选的状态码。 

重选状态码配置包括新增重选状态码配置、修改重选状态码配置、删除状态码重选配置、查询重选状态码配置。当需要使得某些状态码能够触发失败重选流程时，使用该配置。 




[](None)子主题： 






## 新增重选状态码配置(ADD SBIRESELECTSTATUSCODE) 
## 新增重选状态码配置(ADD SBIRESELECTSTATUSCODE) 


[](None)功能说明 

该命令用于新增重选状态码配置。当需要由HTTP状态码触发重选局向流程时，使用该命令。新增重选状态码配置成功后，若本网元向目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。 


[](None)注意事项 

若目的NF类型返回给本网元的重选状态码触发重选，则重选次数和重选等待时长由目的NF类型的重选配置决定。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。若本网元向此类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置触发重选的HTTP状态码。若本网元向配置类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。当目的NF类型为“全部”或者“NRF”时，不允许配置为“否”




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。若本网元向此类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置触发重选的HTTP状态码。若本网元向配置类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。当目的NF类型为“全部”或者“NRF”时，不允许配置为“否”




[](None)命令举例 


`
新增重选状态码配置：标识为1，目的NF类型为“NRF”,状态码为400，是否重选为“是”。
ADD SBIRESELECTSTATUSCODE:ID=1,TARGETNFTYPE="NRF_TYPE",STATUSCODE=400,RESELECT="RESELECT"
` 


## 修改重选状态码配置(SET SBIRESELECTSTATUSCODE) 
## 修改重选状态码配置(SET SBIRESELECTSTATUSCODE) 


[](None)功能说明 

该命令用于修改重选状态码配置。当需要修改目的NF类型的重选状态码时，使用该命令。修改重选状态码配置成功后，若本网元向目的NF发送消息失败，根据目的NF回的状态码与更新的状态码是否一致，来决定是否进行重选。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。若本网元向此类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置触发重选的HTTP状态码。若本网元向配置类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。当目的NF类型为“全部”或者“NRF”时，不允许配置为“否”




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。若本网元向此类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置触发重选的HTTP状态码。若本网元向配置类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。当目的NF类型为“全部”或者“NRF”时，不允许配置为“否”




[](None)命令举例 


`
修改重选状态码配置：标识为1，目的NF类型为“NRF”,状态码为400，是否重选为“是”。
SET SBIRESELECTSTATUSCODE:ID=1,TARGETNFTYPE="NRF_TYPE",STATUSCODE=400,RESELECT="RESELECT"
` 


## 删除重选状态码配置(DEL SBIRESELECTSTATUSCODE) 
## 删除重选状态码配置(DEL SBIRESELECTSTATUSCODE) 


[](None)功能说明 

该命令用于删除重选状态码配置。当目的NF类型不需要由状态码触发重选时，使用该命令。删除重选状态码配置成功后，目的NF类型的NF发送原先配置的状态码时，不会触发重选。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。若本网元向此类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置触发重选的HTTP状态码。若本网元向配置类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。当目的NF类型为“全部”或者“NRF”时，不允许配置为“否”




[](None)命令举例 


`
删除重选状态码配置：标识为1
DEL SBIRESELECTSTATUSCODE:ID=1
` 


## 查询重选状态码配置(SHOW SBIRESELECTSTATUSCODE) 
## 查询重选状态码配置(SHOW SBIRESELECTSTATUSCODE) 


[](None)功能说明 

该命令用于查询重选状态码配置，包括标识、目的NF类型和状态码。当需要查询重选状态码配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部重选状态码配置信息，则不需要输入任何参数。 

 
如需要查询指定标识的重选状态码配置信息，则需要输入标识。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选状态码配置的标识。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置重选的目的NF类型。若本网元向此类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置触发重选的HTTP状态码。若本网元向配置类型的目的NF发送消息失败，根据目的NF回的状态码与配置的状态码是否一致，来决定是否进行重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。当目的NF类型为“全部”或者“NRF”时，不允许配置为“否”




[](None)命令举例 


`
查询重选状态码配置。
SHOW SBIRESELECTSTATUSCODE

(No.1) : SHOW SBIRESELECTSTATUSCODE:
-----------------CommonS_HTTP_LB_0----------------
操作维护       标识 目的NF类型 状态码 是否重选
----------------------------------------------
复制 修改 删除 1    NRF        400    是
----------------------------------------------
记录数：1
执行成功开始时间:2021-01-07 15:43:05 耗时: 0.603 秒

` 


# 服务发现配置 
# 服务发现配置 


[](None)背景知识 


服务发现，是指NF（Network Function）实例通过查询NRF（Network Repository Function）来发现其他NF（Network Function）实例所提供的服务。 

可以通过该配置对服务发现的参数做一些定制化的修改。 




[](None)功能说明 


该配置可以对服务发现相关的参数进行维护。 

该配置包括修改服务发现配置、查询服务发现配置等。 




[](None)子主题： 






## 修改服务发现配置(SET SBISRVDISCOVERY) 
## 修改服务发现配置(SET SBISRVDISCOVERY) 


[](None)功能说明 

该命令用于修改服务发现配置。当服务发现的信息变化时，使用该命令。修改后的服务发现配置信息会在后续的服务发现流程中使用。 


[](None)注意事项 

引用的DNS模板编号必须存在，可用[SHOW COMM DNS PROFILE](../mml/1229009.html)查询当前的DNS模板编号。

如果开启号段叠加功能，建议将3号全局参数（服务发现单号段保存NonRange开关）设置为关闭。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CACHEFLAG|是否启用缓存发现结果功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用缓存发现结果功能。
CACHEPROTECTTIMES|NF启动时缓存更新保护策略持续次数|参数可选性: 任选参数类型: 数字参数范围: 0-3600默认值: 0|为了防止NF启动时瞬时大话务量冲击SBI-GW，配置服务发现结果缓存更新保护策略持续的次数。默认配置为0， 现网使用时根据具体情况配置。服务发现结果缓存更新保护策略：当NF启动/重启时，会有瞬时大话务量产生，为预防SBI-GW受到冲击，在保护策略持续次数内，当服务发现结果中的NF在本地cache内已存在时，则不进行NFProfile基本信息的比较和更新；当服务发现结果中的NF在本地cache内不存在时，则需要缓存NFProfile。同一个NF，每发现一次，该次数便会减少一次。
LOCALAGINGTIME|本地老化时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-360000默认值: 3600|该参数用于设置服务发现缓存的老化时长，单位为秒，缺省值为3600。
LOCALAGINGRANDOM|随机时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-3600默认值: 600|该参数用于设置服务发现缓存老化时长的随机值部分， 单位为秒，缺省值为600，即随机部分在0-3600之间取值。实际缓存老化时长=本地老化时长+Random（0 - 随机时长），通过此方式将老化时间离散化。
LOCALAGINGFLAG|本地老化时长处理策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NOTENABLELOCALCONFIG|该参数用于设置本地老化时长参数是否有效及处理策略。缺省为不启用本地配置，则本网元使用NRF在服务发现响应中返回的老化时长执行本地缓存老化。
RECACHETHRESHOLD|续缓存时间阈值（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-300默认值: 60|该参数用于设置续缓存时间阈值，默认值为60，0表示不支持续缓存功能。在服务发现缓存结果失效前设置的时间内，如果收到服务发现请求，则会向NRF发起服务发现请求，更新服务发现缓存结果。该参数主要目的是减少缓存失效后，并发进行服务发现，但此时无缓存可用，都去NRF执行服务发现的情况。
DNSPROFILEID|DNS模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置引用DNS模板配置中的编号，其编号需在SHOW COMM DNS PROFILE命令查询得到的DNS编号范围内。0表示不配置DNS模板编号。
SUBREQNFTYPE|订阅者NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅者NF类型。无效值表示不配置订阅者NF类型。
SUBREQFQDN|订阅者FQDN|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置订阅者FQDN类型。N/A表示取消订阅者FQDN设置。
STOPAGING|NRF不可用时停止老化|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置NRF不可用时，是否停止服务发现缓存的老化，默认值为停止。
RECOVERAGINGTIME|NRF恢复可用后老化时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 60-3600默认值: 1800|STOPAGING开启后，NRF主备均不可用时会停止对应服务发现结果cache老化；NRF恢复后，相关cache的老化时间会被修改为NRF恢复可用后老化时间和续缓存时间阈值范围内的随机值(避免大量cache同时老化对NRF构成冲击)，从而保证相关cache在本配置时间范围内，要么通过业务流程刷新，要么老化掉。
SUBWITHPLMN|订阅是否携带PLMN ID|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置订阅请求是否携带被订阅NF所属的PLMN ID。配置为是时，如果SBIGW之前收到的服务发现结果中携带了该NF所属的PLMN ID，则会在订阅请求中携带该PLMN ID。当配置为否或者服务发现结果中不携带该NF所属的PLMN ID时，订阅请求不携带PLMN ID。
RANGEAPPEND|号段叠加|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置是否对单号段的NF进行号段叠加。若发现结果中的NF携带的supiranges和gpsiranges各只带一个号段范围，则为单号段。配置为是时，将新发现返回的NF携带的号段与本地已缓存的NF中的号段进行叠加；配置为否时，直接用新发现返回的NF携带的号段覆盖本地已缓存的NF的号段信息。如果开启此功能，需要开启缓存发现结果功能，同时建议将3号全局参数（服务发现单号段保存NonRange开关）设置为关闭。
GETRANGESFORLOCALNF|通过本网NF实例标识获取完整号段|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置在服务发现结果返回单号段的NF且该NF归属于本网时，是否通过NFInstID向NRF获取完整号段。配置为是时，通过NFInstID获取完整号段；配置为否时，不通过NFInstID获取完整号段。如果开启此功能，需要开启缓存发现结果功能。
GETRANGESFORINTERNF|通过异网NF实例标识获取完整号段|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置在服务发现结果返回单号段的NF且该NF归属于异网时，是否通过NFInstID向NRF获取完整号段。配置为是时，通过NFInstID获取完整号段；配置为否时，不通过NFInstID获取完整号段。如果开启此功能，需要开启缓存发现结果功能。
MINPERIOD|触发完整号段获取发现结果最小有效时间（分钟）|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 600|该参数用于设置触发完整号段获取发现结果的最小有效时间，单位为分钟，缺省值为600。若发现结果携带的有效期小于该值，则不会主动通过NFInstID获取完整号段。
DISCOVERYCENTRALIZE|集中发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SWITCH_OFF|该开关用于控制是各SC独立向NRF发送服务发现，还是各SC集中到Special SC发送服务发现，默认关闭，各SC独立向NRF发送服务发现。配置为开启时，则集中到Special SC发送服务发现，保证同样的发现条件只向NRF发现一次，减少发现次数。
CENTREDISCOVERYTPS|每秒的集中发现次数|参数可选性: 任选参数类型: 数字参数范围: 10-10000默认值: 3000|该参数用于控制集中发现开关打开时，整个网元每秒支持的集中服务发现次数。每个Normal SC每秒支持的集中服务发现次数=整个网元每秒支持的集中发现次数/N，其中N为整个网元中HTTP_LB服务所有可用的Normal SC的数量。当集中发现参数配置为开启时，整个网元的服务发现请求将被平均分配到每个Normal SC上。此时Normal SC会计算该SC每秒被分配到的集中服务发现次数，如果超过该Normal SC每秒支持的集中服务发现次数，则该Normal SC发送集中服务发现请求失败。
DELAYTIMES|续缓存失败延时次数|参数可选性: 任选参数类型: 数字参数范围: 0-128默认值: 0|该参数用于SBIGW的服务发现功能向NRF续缓存失败时延长缓存有效期的次数。配置为0时表示不启用续缓存失败延时功能。
DELAYTIMELEN|续缓存失败延时时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 1800|该参数用于服务发现向NRF续缓失败时延长缓存有效期的时长。该参数在“续缓存失败延时次数”不为0时生效。
AGEDDELAY|老化延时（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-86400默认值: 0|该参数用于设置服务发现缓存有效期到期后的延时老化时间。
REFRESHINTERVAL|无可用NF缓存最小刷新间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-3600默认值: 2|该参数为向NRF续缓存失败时，为避免对同一个发现结果频繁刷新的时间间隔。
FAILRESULTRECACHE|失败缓存续缓存阈值（秒）|参数可选性: 任选参数类型: 数字参数范围: 5-3600默认值: 300|该参数用于设置服务发现失败结果缓存进入续缓存阶段的时间，续缓存是指在缓存到达有效期前，提前一段时间向NRF重新服务发现的行为。在失败缓存生效后，缓存仍处于有效期内且剩余有效时间在续缓存时间范围外，服务发现直接采用失败结果缓存，收到新的服务发现请求后，不会去向NRF进行服务发现。NRF从主备均不可用到恢复可用后，失败缓存的老化时间会被修改为（失败缓存续缓存阈值，NRF恢复可用后老化时间）区间内的随机值(避免大量cache同时老化对NRF构成冲击)。为了确保离散性，如果NRF恢复可用后老化时间不大于（失败缓存续缓存阈值 + 60秒），按照离散区间为60秒处理。
SUPPORTGZIP|gzip压缩|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置服务发现响应是否启用gzip压缩，默认为不启用。该参数设置为启用时，在发送的服务发现请求中携带Accept-Encoding: gzip，并且在收到服务发现响应时，如果响应中携带了Content-Encoding: gzip时能够将响应中的压缩消息体进行解压后处理。




[](None)命令举例 


`
修改服务发现配置：是否启用缓存发现结果功能为“启用”，NF启动时缓存更新保护策略持续次数为0，本地老化时长为3600秒，随机时长为600秒，本地老化时长处理策略为“不启用本地配置”，续缓存时间阈值为60秒，引用DNS模板配置编号为0，NRF不可用时停止老化开关打开，NRF恢复可用后老化时间为1800秒，订阅是否携带PLMN ID为“否”，号段叠加开关关闭，通过本网NF实例标识获取完整号段开关关闭，通过异网NF实例标识获取完整号段开关关闭，触发完整号段获取发现结果最小有效时间为600分钟，集中发现关闭，每秒的集中发现次数为5000，续缓存失败延时次数为1，续缓存失败延时时长为1800秒，老化延时为0秒，续缓存失败时最小刷新间隔为2秒，失败缓存续缓存阈值为300秒，gzip压缩不启用。
SET SBISRVDISCOVERY:CACHEFLAG="true",CACHEPROTECTTIMES=0,LOCALAGINGTIME=3600,LOCALAGINGRANDOM=600,LOCALAGINGFLAG="NOTENABLELOCALCONFIG",RECACHETHRESHOLD=60,DNSPROFILEID=0,STOPAGING="true",RECOVERAGINGTIME=1800,SUBWITHPLMN="NO",RANGEAPPEND="false",GETRANGESFORLOCALNF="false",GETRANGESFORINTERNF="false",CENTREDISCOVERYTPS=5000,MINPERIOD=600,DISCOVERYCENTRALIZE="SWITCH_OFF",DELAYTIMES=1,DELAYTIMELEN=1800,AGEDDELAY=0,REFRESHINTERVAL=2,FAILRESULTRECACHE=300,SUPPORTGZIP="false";
` 


## 查询服务发现配置(SHOW SBISRVDISCOVERY) 
## 查询服务发现配置(SHOW SBISRVDISCOVERY) 


[](None)功能说明 

该命令用于查询服务发现配置，包括是否启用缓存发现结果功能、本地老化时长、本地老化时长处理策略、DNS模板编号、订阅者FQDN等配置信息。当需要查询服务发现配置信息时，使用该命令。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CACHEFLAG|是否启用缓存发现结果功能|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置是否启用缓存发现结果功能。
CACHEPROTECTTIMES|NF启动时缓存更新保护策略持续次数|参数可选性: 任选参数类型: 数字参数范围: 0-3600默认值: 0|该参数用于设置防NF启动时瞬时大话务量冲击，启用服务发现结果缓存更新保护策略持续的次数。默认配置为0， 现网使用时根据具体情况配置。服务发现结果缓存更新保护策略：当NF启动/重启时，会有瞬时大话务量产生，为预防冲击，在保护策略持续次数内，当服务发现结果中的NF在本地cache内已存在时，则不进行NFProfile基本信息比较更新，不进行按服务的信息比较更新，当有新服务存在时插入新服务信息，即在此期间查询到的NFProfile信息不会发生变更。
LOCALAGINGTIME|本地老化时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-360000默认值: 3600|该参数用于设置服务发现缓存的老化时长，单位为秒，缺省值为3600。
LOCALAGINGRANDOM|随机时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-3600默认值: 600|该参数用于设置服务发现缓存老化时长的随机值部分， 单位为秒，缺省值为600。实际缓存老化时长=本地老化时长+Random（0 - 随机时长），通过此方式将老化时间离散化。
LOCALAGINGFLAG|本地老化时长处理策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NOTENABLELOCALCONFIG|该参数用于设置本地老化时长参数是否有效及处理策略。缺省为不启用本地配置，则本网元使用NRF在服务发现响应中返回的老化时长执行本地缓存老化。
RECACHETHRESHOLD|续缓存时间阈值（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-300默认值: 60|该参数用于设置续缓存时间阈值，默认值为60，0表示不支持续缓存功能。在服务发现缓存结果失效前设置的时间内，如果收到服务发现请求，则会向NRF发起服务发现请求，更新服务发现缓存结果。该参数主要目的是减少缓存失效后，并发进行服务发现，但此时无缓存可用，都去NRF执行服务发现的情况。
DNSPROFILEID|DNS模板编号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置引用DNS模板配置中的编号，其编号需在SHOW COMM DNS PROFILE命令查询得到的DNS编号范围内。0表示不配置DNS模板编号。
SUBREQNFTYPE|订阅者NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅者NF类型。无效值表示不配置订阅者NF类型。
SUBREQFQDN|订阅者FQDN|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置订阅者FQDN类型。N/A表示取消订阅者FQDN设置。
STOPAGING|NRF不可用时停止老化|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: true|该参数用于设置NRF不可用时，是否停止服务发现缓存的老化，默认值为停止。
RECOVERAGINGTIME|NRF恢复可用后老化时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 60-3600默认值: 1800|STOPAGING开启后，NRF主备均不可用时会停止对应服务发现结果cache老化；NRF恢复后，相关cache的老化时间会被修改为NRF恢复可用后老化时间和续缓存时间阈值范围内的随机值(避免大量cache同时老化对NRF构成冲击)，从而保证相关cache在本配置时间范围内，要么通过业务流程刷新，要么老化掉。NRF恢复可用后老化时间取值需比续缓存时间阈值大60s。
SUBWITHPLMN|订阅是否携带PLMN ID|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置订阅请求是否携带被订阅NF所属的PLMN ID。配置为是时，如果SBIGW之前收到的服务发现结果中携带了该NF所属的PLMN ID，则会在订阅请求中携带该PLMN ID。当配置为否或者服务发现结果中不携带该NF所属的PLMN ID时，订阅请求不携带PLMN ID。
RANGEAPPEND|号段叠加|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置是否对单号段的NF进行号段叠加。若发现结果中的NF携带的supiranges和gpsiranges各只带一个号段范围，则为单号段。配置为是时，将新发现返回的NF携带的号段与本地已缓存的NF中的号段进行叠加；配置为否时，直接用新发现返回的NF携带的号段覆盖本地已缓存的NF的号段信息。如果开启此功能，需要开启缓存发现结果功能，同时建议将3号全局参数（服务发现单号段保存NonRange开关）设置为关闭。
GETRANGESFORLOCALNF|通过本网NF实例标识获取完整号段|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置在服务发现结果返回单号段的NF且该NF归属于本网时，是否通过NFInstID向NRF获取完整号段。配置为是时，通过NFInstID获取完整号段；配置为否时，不通过NFInstID获取完整号段。如果开启此功能，需要开启缓存发现结果功能。
GETRANGESFORINTERNF|通过异网NF实例标识获取完整号段|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置在服务发现结果返回单号段的NF且该NF归属于异网时，是否通过NFInstID向NRF获取完整号段。配置为是时，通过NFInstID获取完整号段；配置为否时，不通过NFInstID获取完整号段。如果开启此功能，需要开启缓存发现结果功能。
MINPERIOD|触发完整号段获取发现结果最小有效时间（分钟）|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 600|该参数用于设置触发完整号段获取发现结果的最小有效时间，单位为分钟，缺省值为600。若发现结果携带的有效期小于该值，则不会主动通过NFInstID获取完整号段。
DISCOVERYCENTRALIZE|集中发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SWITCH_OFF|该开关用于控制是各SC独立向NRF发送服务发现，还是各SC集中到Special SC发送服务发现，默认关闭，各SC独立向NRF发送服务发现。配置为开启时，则集中到Special SC发送服务发现，保证同样的发现条件只向NRF发现一次，减少发现次数。
CENTREDISCOVERYTPS|每秒的集中发现次数|参数可选性: 任选参数类型: 数字参数范围: 10-10000默认值: 3000|该参数用于控制集中发现开关打开时，整个网元每秒支持的集中服务发现次数。每个Normal SC每秒支持的集中服务发现次数=整个网元每秒支持的集中发现次数/N，其中N为整个网元中HTTP_LB服务所有可用的Normal SC的数量。当集中发现参数配置为开启时，整个网元的服务发现请求将被平均分配到每个Normal SC上。此时Normal SC会计算该SC每秒被分配到的集中服务发现次数，如果超过该Normal SC每秒支持的集中服务发现次数，则该Normal SC发送集中服务发现请求失败。
DELAYTIMES|续缓存失败延时次数|参数可选性: 任选参数类型: 数字参数范围: 0-128默认值: 0|该参数用于SBIGW的服务发现功能向NRF续缓存失败时延长缓存有效期的次数。配置为0时表示不启用续缓存失败延时功能。
DELAYTIMELEN|续缓存失败延时时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 1800|该参数用于服务发现向NRF续缓失败时延长缓存有效期的时长。该参数在“续缓存失败延时次数”不为0时生效。
AGEDDELAY|老化延时（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-86400默认值: 0|该参数用于设置服务发现缓存有效期到期后的延时老化时间。
REFRESHINTERVAL|无可用NF缓存最小刷新间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 0-3600默认值: 2|该参数为向NRF续缓存失败时，为避免对同一个发现结果频繁刷新的时间间隔。
FAILRESULTRECACHE|失败缓存续缓存阈值（秒）|参数可选性: 任选参数类型: 数字参数范围: 5-3600默认值: 300|该参数用于设置服务发现失败结果缓存进入续缓存阶段的时间，续缓存是指在缓存到达有效期前，提前一段时间向NRF重新服务发现的行为。在失败缓存生效后，缓存仍处于有效期内且剩余有效时间在续缓存时间范围外，服务发现直接采用失败结果缓存，收到新的服务发现请求后，不会去向NRF进行服务发现。NRF从主备均不可用到恢复可用后，失败缓存的老化时间会被修改为（失败缓存续缓存阈值，NRF恢复可用后老化时间）区间内的随机值(避免大量cache同时老化对NRF构成冲击)。为了确保离散性，如果NRF恢复可用后老化时间不大于（失败缓存续缓存阈值 + 60秒），按照离散区间为60秒处理。
SUPPORTGZIP|gzip压缩|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: false|该参数用于设置服务发现响应是否启用gzip压缩，默认为不启用。该参数设置为启用时，在发送的服务发现请求中携带Accept-Encoding: gzip，并且在收到服务发现响应时，如果响应中携带了Content-Encoding: gzip时能够将响应中的压缩消息体进行解压后处理。




[](None)命令举例 


`
查询服务发现配置。
SHOW SBISRVDISCOVERY

(No.1) : SHOW SBISRVDISCOVERY:
-----------------sbigw_service_24_st/CommonS_HTTP_LB_0----------------
操作维护       是否启用缓存发现结果功能 NF启动时缓存更新保护策略持续次数 本地老化时长（秒） 随机时长（秒） 本地老化时长处理策略 续缓存时间阈值（秒） DNS模板编号 订阅者NF类型 订阅者FQDN NRF不可用时停止老化 NRF恢复可用后老化时间（秒） 订阅是否携带PLMN ID 号段叠加 通过本网NF实例标识获取完整号段 通过异网NF实例标识获取完整号段 触发完整号段获取发现结果最小有效时间（分钟） 集中发现 每秒的集中发现次数 续缓存失败延时次数 续缓存失败延时时长（秒） 老化延时（秒） 无可用NF缓存最小刷新间隔（秒） 失败缓存续缓存阈值（秒） gzip压缩
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
修改           启用                     0                                3600               600            不启用本地配置       0                    0                                   启用                1800                        否                  不启用   不启用                         不启用                         600                                          关闭     3000               0                  1800                     0              2               300            不启用    
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

执行成功开始时间:2022-09-15 11:22:33 耗时: 2.521秒



` 


# 服务发现方式配置 
# 服务发现方式配置 


[](None)背景知识 


服务发现方式有多种，包括动态发现、静态发现、IPV4优先、IPV6优先等，该配置可对不同的NF（Network Function）实例定制不同的服务发现方式。 




[](None)功能说明 


该配置可对不同的NF实例定制不同的服务发现方式。 

该配置包括新增服务发现方式配置、修改服务发现方式配置、删除服务发现方式配置、查询服务发现方式配置等。 




[](None)子主题： 






## 新增服务发现方式配置(ADD SBISRVDISCOVERYMODE) 
## 新增服务发现方式配置(ADD SBISRVDISCOVERYMODE) 


[](None)功能说明 

该命令用于新增服务发现方式配置。当需要新增发现特定目的NF类型的方式时，使用该命令。命令执行成功后，发现特定目的NF类型的方式即在后续服务发现流程中使用。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。
DISCOVERYMODE|发现方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DYNAMIC_ONLY|该参数用于设置服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI-GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI-GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI-GW收到对端NRF的成功响应，但发现结果中所有NF状态均不可用。外部失败响应(非404)：SBI-GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置地址选择方式，默认为随机。随机：选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：选择目的NF时，优先选择IPv4地址的NF。IPv6优先：选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置http默认端口，默认值为80。配置为0时，表示不支持http默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置https默认端口，默认值为443。配置为0时，表示不支持https默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DYNAMIC_ONLY|该参数用于设置服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI-GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI-GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI-GW收到对端NRF的成功响应，但发现结果中所有NF状态均不可用。外部失败响应(非404)：SBI-GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置地址选择方式，默认为随机。随机：选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：选择目的NF时，优先选择IPv4地址的NF。IPv6优先：选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置http默认端口，默认值为80。配置为0时，表示不支持http默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置https默认端口，默认值为443。配置为0时，表示不支持https默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。




[](None)命令举例 


`
新增服务发现方式配置：目标NF类型为“UDM”，发现方式为“静态”，服务发现动转静场景配置为空，地址选择方式为“IPV4”，http默认端口为“800”，默认https端口为“520”。
ADD SBISRVDISCOVERYMODE:TARGETNFTYPE="UDM_TYPE",DISCOVERYMODE="STATIC_ONLY",D2SSCENES="NULL",IPSELECTMODE="IPV4_FIRST",DEFAULTPORTFORHTTP=800,DEFAULTPORTFORHTTPS=520;
` 


## 修改服务发现方式配置(SET SBISRVDISCOVERYMODE) 
## 修改服务发现方式配置(SET SBISRVDISCOVERYMODE) 


[](None)功能说明 

该命令用于修改服务发现方式配置。当特定NF类型的发现方式发生变化时，使用该命令。修改后的特定NF类型的服务发现方式会在后续的服务发现流程中使用。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DYNAMIC_ONLY|该参数用于设置服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI-GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI-GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI-GW收到对端NRF的成功响应，但发现结果中所有NF状态均不可用。外部失败响应(非404)：SBI-GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置地址选择方式，默认为随机。随机：选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：选择目的NF时，优先选择IPv4地址的NF。IPv6优先：选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置http默认端口，默认值为80。配置为0时，表示不支持http默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置https默认端口，默认值为443。配置为0时，表示不支持https默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DYNAMIC_ONLY|该参数用于设置服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI-GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI-GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI-GW收到对端NRF的成功响应，但发现结果中所有NF状态均不可用。外部失败响应(非404)：SBI-GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置地址选择方式，默认为随机。随机：选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：选择目的NF时，优先选择IPv4地址的NF。IPv6优先：选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置http默认端口，默认值为80。配置为0时，表示不支持http默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置https默认端口，默认值为443。配置为0时，表示不支持https默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。




[](None)命令举例 


`
修改服务发现方式配置：目标NF类型为“UDM”，发现方式为“动态”，地址选择方式为“随机”，http默认端口为“90”，默认https端口为“580”。
SET SBISRVDISCOVERYMODE:TARGETNFTYPE="UDM_TYPE",DISCOVERYMODE="DYNAMIC_ONLY",IPSELECTMODE="RANDOM",DEFAULTPORTFORHTTP=90,DEFAULTPORTFORHTTPS=580;
` 


## 删除服务发现方式配置(DEL SBISRVDISCOVERYMODE) 
## 删除服务发现方式配置(DEL SBISRVDISCOVERYMODE) 


[](None)功能说明 

该命令用于删除服务发现方式配置。当不再需要特定NF类型的发现方式时，执行该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DYNAMIC_ONLY|该参数用于设置服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI-GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI-GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI-GW收到对端NRF的成功响应，但发现结果中所有NF状态均不可用。外部失败响应(非404)：SBI-GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置地址选择方式，默认为随机。随机：选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：选择目的NF时，优先选择IPv4地址的NF。IPv6优先：选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置http默认端口，默认值为80。配置为0时，表示不支持http默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置https默认端口，默认值为443。配置为0时，表示不支持https默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。




[](None)命令举例 


`
删除UDM服务发现方式配置：目标NF类型为“UDM”。
DEL SBISRVDISCOVERYMODE:TARGETNFTYPE="UDM_TYPE";
` 


## 查询服务发现方式配置(SHOW SBISRVDISCOVERYMODE) 
## 查询服务发现方式配置(SHOW SBISRVDISCOVERYMODE) 


[](None)功能说明 

该命令用于查询服务发现方式配置，包括目的NF类型、服务发现方式、地址选择方式、http默认端口、https默认端口信息。当需要查询服务发现方式配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部服务发现方式配置信息，则不需要输入任何参数。 

 
如需要查询特定的目标NF类型的服务发现方式配置信息，则需要输入目标NF类型。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF类型。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DYNAMIC_ONLY|该参数用于设置服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI-GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI-GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI-GW收到对端NRF的成功响应，但发现结果中所有NF状态均不可用。外部失败响应(非404)：SBI-GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置地址选择方式，默认为随机。随机：选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：选择目的NF时，优先选择IPv4地址的NF。IPv6优先：选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置http默认端口，默认值为80。配置为0时，表示不支持http默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置https默认端口，默认值为443。配置为0时，表示不支持https默认端口。配置修改需要等缓存老化或者手工删除缓存后再次重新服务发现生效。




[](None)命令举例 


`
查询UDM服务发现方式配置：目标NF类型为“UDM”
SHOW SBISRVDISCOVERYMODE:TARGETNFTYPE="UDM_TYPE"

(No.1) :SHOW SBISRVDISCOVERYMODE:TARGETNFTYPE="UDM_TYPE"
-----------------CommonS_HTTP_LB_0----------------
操作维护       目标NF类型 发现方式 服务发现动转静场景         地址选择方式 http默认端口 https默认端口 
------------------------------------------------------------------------------------------------------
复制 修改 删除 UDM        动态     NRF不可用且本地无对应cache 随机         80           443           
------------------------------------------------------------------------------------------------------
记录数：1

执行成功耗时: 0.162 秒

` 


# 服务发现流控配置 
# 服务发现流控配置 


[](None)背景知识 


服务发现：NF（Network Function）实例通过查询NRF（Network Repository Function）来发现其他NF（Network Function）实例所提供的服务。 

服务发现流控：限制同时向NRF发起的服务发现次数，包括并发的服务发现次数和每秒的服务发现次数。 




[](None)功能说明 


该配置用于设置服务发现流控门限，限制服务发现的并发个数和每秒的服务发现次数，避免瞬时大流量对NRF构成冲击。 

当需要对特定目标NF类型进行服务发现流控时，使用该配置。 




[](None)子主题： 






## 新增服务发现流控配置(ADD SBISRVDISCOVFLOWCTRL) 
## 新增服务发现流控配置(ADD SBISRVDISCOVFLOWCTRL) 


[](None)功能说明 

该命令用于新增服务发现流控配置。当需要对特定的目标NF类型进行服务发现流控时，使用该命令。命令执行成功后，特定目标NF类型的服务发现并发次数或者每秒的服务发现次数将受到限制。 


[](None)注意事项 

服务发现次数设置过大将起不到保护NRF作用，设置过小则对正常业务造成影响，需要根据NRF处理能力设置合适的值。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。
THRESHOLD|并发的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-2048默认值: 0|该参数用于设置目标NF类型最大服务发现并发次数，该次数是每SC的并发次数。整网元的服务发现并发数为每SC并发的服务发现次数与SBI-GW SC个数的乘积。
REQTPS|每秒的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目标NF类型每秒的最大服务发现次数，该次数是每SC的每秒的服务发现次数。整网元的每秒的服务发现次数为每SC每秒的服务发现次数与SBI-GW SC个数的乘积。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。
THRESHOLD|并发的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-2048默认值: 0|该参数用于设置目标NF类型最大服务发现并发次数，该次数是每SC的并发次数。整网元的服务发现并发数为每SC并发的服务发现次数与SBI-GW SC个数的乘积。
REQTPS|每秒的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目标NF类型每秒的最大服务发现次数，该次数是每SC的每秒的服务发现次数。整网元的每秒的服务发现次数为每SC每秒的服务发现次数与SBI-GW SC个数的乘积。




[](None)命令举例 


`
新增服务发现流量控制配置：目标NF类型为“SMF”，并发的服务发现次数为“50”, 每秒的服务发现次数为10。
ADD SBISRVDISCOVFLOWCTRL:TARGETNFTYPE="SMF_TYPE",THRESHOLD=50,REQTPS=10
` 


## 修改服务发现流控配置(SET SBISRVDISCOVFLOWCTRL) 
## 修改服务发现流控配置(SET SBISRVDISCOVFLOWCTRL) 


[](None)功能说明 

该命令用于修改服务发现流控配置。当特定NF类型的服务发现流控门限需要调整时，使用该命令。命令执行成功后，特定目标NF类型的服务发现并发次数或者每秒的服务发现次数将受新的门限值限制。 


[](None)注意事项 

服务发现次数设置过大将起不到保护NRF作用，设置过小则对正常业务造成影响，需要根据NRF处理能力设置合适的值。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。
THRESHOLD|并发的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-2048默认值: 0|该参数用于设置目标NF类型最大服务发现并发次数，该次数是每SC的并发次数。整网元的服务发现并发数为每SC并发的服务发现次数与SBI-GW SC个数的乘积。
REQTPS|每秒的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目标NF类型每秒的最大服务发现次数，该次数是每SC的每秒的服务发现次数。整网元的每秒的服务发现次数为每SC每秒的服务发现次数与SBI-GW SC个数的乘积。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。
THRESHOLD|并发的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-2048默认值: 0|该参数用于设置目标NF类型最大服务发现并发次数，该次数是每SC的并发次数。整网元的服务发现并发数为每SC并发的服务发现次数与SBI-GW SC个数的乘积。
REQTPS|每秒的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目标NF类型每秒的最大服务发现次数，该次数是每SC的每秒的服务发现次数。整网元的每秒的服务发现次数为每SC每秒的服务发现次数与SBI-GW SC个数的乘积。




[](None)命令举例 


`
修改服务发现流量控制配置：目标NF类型为“SMF”，并发的服务发现次数为“60”, 每秒的服务发现次数为20。
SET SBISRVDISCOVFLOWCTRL:TARGETNFTYPE="SMF_TYPE",THRESHOLD=60,REQTPS=20
` 


## 删除服务发现流控配置(DEL SBISRVDISCOVFLOWCTRL) 
## 删除服务发现流控配置(DEL SBISRVDISCOVFLOWCTRL) 


[](None)功能说明 

该命令用于删除服务发现流控配置。当不再需要对特定NF类型的服务发现进行流控时，执行该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。
THRESHOLD|并发的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-2048默认值: 0|该参数用于设置目标NF类型最大服务发现并发次数，该次数是每SC的并发次数。整网元的服务发现并发数为每SC并发的服务发现次数与SBI-GW SC个数的乘积。
REQTPS|每秒的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目标NF类型每秒的最大服务发现次数，该次数是每SC的每秒的服务发现次数。整网元的每秒的服务发现次数为每SC每秒的服务发现次数与SBI-GW SC个数的乘积。




[](None)命令举例 


`
删除服务发现流量控制配置：目标NF类型为“UDM”。
DEL SBISRVDISCOVFLOWCTRL:TARGETNFTYPE="UDM_TYPE"
` 


## 查询服务发现流控配置(SHOW SBISRVDISCOVFLOWCTRL) 
## 查询服务发现流控配置(SHOW SBISRVDISCOVFLOWCTRL) 


[](None)功能说明 

该命令用于查询服务发现流控配置，包括目标NF类型、并发的服务发现次数以及每秒的服务发现次数。当需要查询服务发现流控配置信息时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目标NF的类型。
THRESHOLD|并发的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-2048默认值: 0|该参数用于设置目标NF类型最大服务发现并发次数，该次数是每SC的并发次数。整网元的服务发现并发数为每SC并发的服务发现次数与SBI-GW SC个数的乘积。
REQTPS|每秒的服务发现次数|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目标NF类型每秒的最大服务发现次数，该次数是每SC的每秒的服务发现次数。整网元的每秒的服务发现次数为每SC每秒的服务发现次数与SBI-GW SC个数的乘积。




[](None)命令举例 


`
查询服务发现流量控制配置：目标NF类型为“SMF”。
SHOW SBISRVDISCOVFLOWCTRL:TARGETNFTYPE="SMF_TYPE"

(No.3) : SHOW SBISRVDISCOVFLOWCTRL:TARGETNFTYPE="SMF_TYPE"
-----------------CommonS_HTTP_LB_0----------------
操作维护       目标NF类型 并发的服务发现次数  每秒的服务发现次数
--------------------------------------------------------------------------
复制 修改 删除 SMF        60                           20
--------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-05-13 14:56:32 耗时: 0.136 秒

` 


# 服务发现失败结果缓存配置 
# 服务发现失败结果缓存配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）需要支持服务发现失败结果的缓存功能，在部分服务发现失败场景下使用缓存的服务发现失败结果，避免持续向NRF进行服务发现造成影响。 

SBI-GW在收到NRF的服务发现失败响应时，主要包括2XX且响应消息中不携带可用NF、404以及其他外部错误，根据配置的缓存策略对服务发现失败结果进行缓存，在该失败缓存有效期内，服务发现将采用该失败结果缓存，不再去NRF进行服务发现。 




[](None)功能说明 


该配置可对不同的目的NF类型、服务发现参数以及失败场景定制不同的失败缓存策略。 

当需要用到SBI-GW的服务发现失败缓存功能时，比如连续向NRF服务发现均失败的场景，使用该配置。SBI-GW根据目的NF类型、服务发现参数以及失败场景，按照该策略进行失败缓存的处理。 




[](None)子主题： 






## 服务发现失败结果缓存策略配置 
## 服务发现失败结果缓存策略配置 


[](None)背景知识 


SBI-GW在收到NRF的服务发现失败响应时，需要按照缓存策略对失败结果进行缓存，包括失败次数和缓存时间。该配置提供服务发现失败结果缓存策略配置功能。 

通过本配置，可以在特定发现条件下，向NRF服务发现失败达到策略配置次数时，决定写入失败缓存的有效时间。 




[](None)功能说明 


该配置可以配置不同的服务发现失败结果缓存策略。包括：失败次数和缓存时间。 

当NF需要对服务发现失败结果进行缓存时使用该配置，无该配置时“服务发现失败结果缓存条件配置”无法关联到策略，配置不成功。SBI-GW根据该组配置中的缓存次数和缓存时间对失败结果进行写入缓存处理。 




[](None)子主题： 






### 新增服务发现失败结果缓存策略配置(ADD SBISRVDISCOVFAILPOLICY) 
### 新增服务发现失败结果缓存策略配置(ADD SBISRVDISCOVFAILPOLICY) 


[](None)功能说明 

该命令用于新增服务发现失败结果缓存策略配置。当需要配置服务发现失败结果缓存策略时，使用该命令。命令执行成功后，该配置供“服务发现失败结果缓存条件配置”引用，当服务发现失败时，满足失败结果缓存条件的发现结果，SBI-GW将根据配置的“服务发现失败结果缓存策略配置”中的失败次数和缓存时间（秒）进行缓存。 


[](None)注意事项 

该配置仅在“服务发现配置”启用缓存发现结果功能的情况下生效，可用[SHOW SBISRVDISCOVERY](../mml/1220526.html)查询当前的“服务发现配置”中“是否启用缓存发现结果功能”的状态。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。
FAILTIMES|失败次数|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 10|该参数用于设置相同服务发现条件下服务发现失败结果次数。当相同服务发现条件连续收到相同失败响应的次数达到该配置次数时，服务发现失败结果缓存开始生效。失败结果缓存有效时间内，后续服务发现采用该缓存作为发现结果，不再向NRF进行服务发现。
VALIDTIME|缓存时间（秒）|参数可选性: 必选参数类型: 数字参数范围: 10-65535默认值: 600|该参数用于设置失败缓存的有效时长，在失败缓存生效后，如果缓存时间内（不在失败续缓存时间范围内）服务发现命中失败缓存，不向NRF查询，使用失败缓存作为发现结果。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。
FAILTIMES|失败次数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 10|该参数用于设置相同服务发现条件下服务发现失败结果次数。当相同服务发现条件连续收到相同失败响应的次数达到该配置次数时，服务发现失败结果缓存开始生效。失败结果缓存有效时间内，后续服务发现采用该缓存作为发现结果，不再向NRF进行服务发现。
VALIDTIME|缓存时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 10-65535默认值: 600|该参数用于设置失败缓存的有效时长，在失败缓存生效后，如果缓存时间内（不在失败续缓存时间范围内）服务发现命中失败缓存，不向NRF查询，使用失败缓存作为发现结果。




[](None)命令举例 


`
新增服务发现失败结果缓存策略配置：缓存策略标识为1，失败次数为10，缓存时间（秒）为600。
ADD SBISRVDISCOVFAILPOLICY:ID=1,FAILTIMES=10,VALIDTIME=600;
` 


### 修改服务发现失败结果缓存策略配置(SET SBISRVDISCOVFAILPOLICY) 
### 修改服务发现失败结果缓存策略配置(SET SBISRVDISCOVFAILPOLICY) 


[](None)功能说明 

该命令用于修改服务发现失败结果缓存策略配置。当需要修改配置的服务发现失败结果缓存策略时，使用该命令。命令执行成功后，当服务发现失败时，满足失败结果缓存条件的发现结果，SBI-GW将根据修改后的“服务发现失败结果缓存策略配置”中的失败次数和缓存时间（秒）进行缓存。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。
FAILTIMES|失败次数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 10|该参数用于设置相同服务发现条件下服务发现失败结果次数。当相同服务发现条件连续收到相同失败响应的次数达到该配置次数时，服务发现失败结果缓存开始生效。失败结果缓存有效时间内，后续服务发现采用该缓存作为发现结果，不再向NRF进行服务发现。
VALIDTIME|缓存时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 10-65535默认值: 600|该参数用于设置失败缓存的有效时长，在失败缓存生效后，如果缓存时间内（不在失败续缓存时间范围内）服务发现命中失败缓存，不向NRF查询，使用失败缓存作为发现结果。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。
FAILTIMES|失败次数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 10|该参数用于设置相同服务发现条件下服务发现失败结果次数。当相同服务发现条件连续收到相同失败响应的次数达到该配置次数时，服务发现失败结果缓存开始生效。失败结果缓存有效时间内，后续服务发现采用该缓存作为发现结果，不再向NRF进行服务发现。
VALIDTIME|缓存时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 10-65535默认值: 600|该参数用于设置失败缓存的有效时长，在失败缓存生效后，如果缓存时间内（不在失败续缓存时间范围内）服务发现命中失败缓存，不向NRF查询，使用失败缓存作为发现结果。




[](None)命令举例 


`
修改服务发现失败结果缓存策略配置：缓存策略标识为1，失败次数为5， 缓存时间（秒）为600。
SET SBISRVDISCOVFAILPOLICY:ID=1,FAILTIMES=5,VALIDTIME=600;
` 


### 删除服务发现失败结果缓存策略配置(DEL SBISRVDISCOVFAILPOLICY) 
### 删除服务发现失败结果缓存策略配置(DEL SBISRVDISCOVFAILPOLICY) 


[](None)功能说明 

该命令用于删除服务发现失败结果缓存策略配置。当没有“服务发现失败结果缓存条件配置”需要引用该服务发现失败结果缓存策略配置时，执行该命令。 


[](None)注意事项 

该配置需要在没有被“服务发现失败结果缓存条件配置”引用时才可以被删除。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。
FAILTIMES|失败次数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 10|该参数用于设置相同服务发现条件下服务发现失败结果次数。当相同服务发现条件连续收到相同失败响应的次数达到该配置次数时，服务发现失败结果缓存开始生效。失败结果缓存有效时间内，后续服务发现采用该缓存作为发现结果，不再向NRF进行服务发现。
VALIDTIME|缓存时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 10-65535默认值: 600|该参数用于设置失败缓存的有效时长，在失败缓存生效后，如果缓存时间内（不在失败续缓存时间范围内）服务发现命中失败缓存，不向NRF查询，使用失败缓存作为发现结果。




[](None)命令举例 


`
删除服务发现失败结果缓存策略配置：缓存策略标识为1。
DEL SBISRVDISCOVFAILPOLICY:ID=1;
` 


### 查询服务发现失败结果缓存策略配置(SHOW SBISRVDISCOVFAILPOLICY) 
### 查询服务发现失败结果缓存策略配置(SHOW SBISRVDISCOVFAILPOLICY) 


[](None)功能说明 

该命令用于查询服务发现失败结果缓存策略配置，包括缓存策略标识、失败次数以及缓存时间（秒）。当需要查询服务发现失败结果缓存策略配置信息时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置缓存策略标识。
FAILTIMES|失败次数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 10|该参数用于设置相同服务发现条件下服务发现失败结果次数。当相同服务发现条件连续收到相同失败响应的次数达到该配置次数时，服务发现失败结果缓存开始生效。失败结果缓存有效时间内，后续服务发现采用该缓存作为发现结果，不再向NRF进行服务发现。
VALIDTIME|缓存时间（秒）|参数可选性: 任选参数类型: 数字参数范围: 10-65535默认值: 600|该参数用于设置失败缓存的有效时长，在失败缓存生效后，如果缓存时间内（不在失败续缓存时间范围内）服务发现命中失败缓存，不向NRF查询，使用失败缓存作为发现结果。




[](None)命令举例 


`
查询服务发现失败结果缓存策略配置：缓存策略标识为1。
SHOW SBISRVDISCOVFAILPOLICY:ID=1;

(No.2) : SHOW SBISRVDISCOVFAILPOLICY:ID=1
-----------------http_st_ci_1/CommonS_HTTP_LB_0----------------
操作维护       缓存策略标识 失败次数 缓存时间（秒） 
--------------------------------------------
复制 修改 删除 1    10       600            
--------------------------------------------
记录数：1

执行成功开始时间:2022-12-09 08:47:29 耗时: 1.007秒

` 


## 服务发现失败结果缓存条件配置 
## 服务发现失败结果缓存条件配置 


[](None)背景知识 


SBI-GW在收到NRF的服务发现失败响应时，需要按照目的NF类型、发现条件以及发现失败类型对失败结果进行缓存。该配置提供服务发现失败结果缓存条件配置功能。 

通过本配置，可以避免特定发现条件下，连续向NRF服务发现失败造成影响。 




[](None)功能说明 


该配置可以配置不同的服务发现失败结果缓存条件。包括：目的NF类型、发现条件以及发现失败类型。 

当NF需要对服务发现失败结果进行缓存时使用该配置，无该配置时仍正常向NRF进行服务发现。SBI-GW根据该组配置中的目的NF类型、发现条件以及发现失败类型进行匹配，对满足条件的失败缓存按照缓存策略进行写入缓存处理。 




[](None)子主题： 






### 新增服务发现失败结果缓存条件配置(ADD SBISRVDISCOVFAILCOND) 
### 新增服务发现失败结果缓存条件配置(ADD SBISRVDISCOVFAILCOND) 


[](None)功能说明 

该命令用于新增服务发现失败结果缓存条件配置。当需要对特定的目的NF类型以及服务发现条件指定“服务发现失败结果缓存策略”时，使用该命令。命令执行成功后，服务发现失败时，若服务发现请求中目的NF类型以及服务发现条件与配置匹配，且失败场景与配置中的场景一致，SBI-GW将使用配置指定的“服务发现失败结果缓存策略”进行缓存处理。 


[](None)注意事项 

该配置仅在“服务发现配置”启用缓存发现结果功能的情况下生效，可用[SHOW SBISRVDISCOVERY](../mml/1220526.html)查询当前的“服务发现配置”中“是否启用缓存发现结果功能”的状态。

引用的缓存策略标识必须存在，可用[SHOW SBISRVDISCOVFAILPOLICY](../mml/1224031.html)查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。
FAILRSPTYPE|发现失败类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于设置发现失败类型。2XX_NULL：NRF回送响应为200，且消息携带的NFProfileList为空。404_FOR_DYNAMIC：NRF回送响应为404。4XX：NRF回送响应为4XX，不包括404，408，429。5XX：NRF回送响应为5XX，不包括503。6XX：NRF回送响应为6XX。
CACHEPOLICYID|缓存策略标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现失败时对应目的NF类型和发现条件下使用的发现结果缓存策略标识。引用的缓存策略标识必须存在，可用SHOW SBISRVDISCOVFAILPOLICY查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。
FAILRSPTYPE|发现失败类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现失败类型。2XX_NULL：NRF回送响应为200，且消息携带的NFProfileList为空。404_FOR_DYNAMIC：NRF回送响应为404。4XX：NRF回送响应为4XX，不包括404，408，429。5XX：NRF回送响应为5XX，不包括503。6XX：NRF回送响应为6XX。
CACHEPOLICYID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现失败时对应目的NF类型和发现条件下使用的发现结果缓存策略标识。引用的缓存策略标识必须存在，可用SHOW SBISRVDISCOVFAILPOLICY查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。




[](None)命令举例 


`
新增服务发现失败结果缓存条件配置：目的NF类型为“AMF”，发现条件为“target-nf-instance-id”, 发现失败类型为“2XX_NULL”，缓存策略标识为1。
ADD SBISRVDISCOVFAILCOND:TARGETNFTYPE="AMF_TYPE",COMDISCOVERYPARAMS="TARGET_NF_INSTANCE_ID",FAILRSPTYPE="2XX_NULL",CACHEPOLICYID=1;
` 


### 修改服务发现失败结果缓存条件配置(SET SBISRVDISCOVFAILCOND) 
### 修改服务发现失败结果缓存条件配置(SET SBISRVDISCOVFAILCOND) 


[](None)功能说明 

该命令用于修改服务发现失败结果缓存条件配置。当需要修改配置中的目的NF类型、服务发现条件、发现失败类型、缓存策略标识时，使用该命令。命令执行成功后，服务发现失败时，若服务发现请求中目的NF类型以及服务发现条件与修改后的配置匹配，且失败场景与配置中的场景一致，SBI-GW将使用修改后配置中指定的“服务发现失败结果缓存策略”进行缓存处理。 


[](None)注意事项 

引用的缓存策略标识必须存在，可用[SHOW SBISRVDISCOVFAILPOLICY](../mml/1224031.html)查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。
FAILRSPTYPE|发现失败类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现失败类型。2XX_NULL：NRF回送响应为200，且消息携带的NFProfileList为空。404_FOR_DYNAMIC：NRF回送响应为404。4XX：NRF回送响应为4XX，不包括404，408，429。5XX：NRF回送响应为5XX，不包括503。6XX：NRF回送响应为6XX。
CACHEPOLICYID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现失败时对应目的NF类型和发现条件下使用的发现结果缓存策略标识。引用的缓存策略标识必须存在，可用SHOW SBISRVDISCOVFAILPOLICY查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。
FAILRSPTYPE|发现失败类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现失败类型。2XX_NULL：NRF回送响应为200，且消息携带的NFProfileList为空。404_FOR_DYNAMIC：NRF回送响应为404。4XX：NRF回送响应为4XX，不包括404，408，429。5XX：NRF回送响应为5XX，不包括503。6XX：NRF回送响应为6XX。
CACHEPOLICYID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现失败时对应目的NF类型和发现条件下使用的发现结果缓存策略标识。引用的缓存策略标识必须存在，可用SHOW SBISRVDISCOVFAILPOLICY查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。




[](None)命令举例 


`
修改服务发现失败结果缓存条件配置：目的NF类型为“AMF”，发现条件为“target-nf-instance-id”, 发现失败类型为“2XX_NULL”，缓存策略标识为2。
SET SBISRVDISCOVFAILCOND:TARGETNFTYPE="AMF_TYPE",COMDISCOVERYPARAMS="TARGET_NF_INSTANCE_ID",FAILRSPTYPE="2XX_NULL",CACHEPOLICYID=2;
` 


### 删除服务发现失败结果缓存条件配置(DEL SBISRVDISCOVFAILCOND) 
### 删除服务发现失败结果缓存条件配置(DEL SBISRVDISCOVFAILCOND) 


[](None)功能说明 

该命令用于删除服务发现失败结果缓存条件配置。当不再需要对该服务发现条件进行失败结果缓存处理时，执行该命令，之后服务发现将正常向NRF进行发现。 


[](None)注意事项 

删除配置后再对该条件下做服务发现请求时，正常向NRF进行服务发现。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。
FAILRSPTYPE|发现失败类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现失败类型。2XX_NULL：NRF回送响应为200，且消息携带的NFProfileList为空。404_FOR_DYNAMIC：NRF回送响应为404。4XX：NRF回送响应为4XX，不包括404，408，429。5XX：NRF回送响应为5XX，不包括503。6XX：NRF回送响应为6XX。
CACHEPOLICYID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现失败时对应目的NF类型和发现条件下使用的发现结果缓存策略标识。引用的缓存策略标识必须存在，可用SHOW SBISRVDISCOVFAILPOLICY查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。




[](None)命令举例 


`
删除服务发现失败结果缓存条件配置：目的NF类型为“AMF”，发现条件为“target-nf-instance-id”。
DEL SBISRVDISCOVFAILCOND:TARGETNFTYPE="AMF_TYPE",COMDISCOVERYPARAMS="TARGET_NF_INSTANCE_ID";
` 


### 查询服务发现失败结果缓存条件配置(SHOW SBISRVDISCOVFAILCOND) 
### 查询服务发现失败结果缓存条件配置(SHOW SBISRVDISCOVFAILCOND) 


[](None)功能说明 

该命令用于查询服务发现失败结果缓存条件配置，包括目的NF类型、发现条件、发现失败类型以及缓存策略标识。当需要查询服务发现失败结果缓存条件配置信息时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的类型。
COMDISCOVERYPARAMS|发现条件|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现条件。对于发现条件配置中的参数，当服务发现请求中携带的发现条件参数组合与本配置勾选的发现条件参数组合相同时匹配成功。配置为“清零（重置）标志”时，表示服务发现请求携带本配置中发现条件参数的任意组合均可匹配成功。服务发现请求中携带以下参数不影响匹配结果：target-nf-type、requester-nf-type、requester-nf-instance-id、service-names、requester-nf-instance-fqdn、requester-plmn-list、requester-plmn-specific-snssai-list、requester-features、supported-features、required-features。服务发现请求中携带以下参数将导致匹配失败，不进行失败缓存处理：accept-Encoding、if-None-Match、access-type、address-domain、af-ee-data、amf-set-id、an-node-type、atsss-capability、chf-supported-plmn、client-type、complex-query、data-set、dnai-list、event-id-list、external-group-identity、gpsi、group-id-list、hnrf-uri、home-pub-key-id、imsi、internal-group-identity、ip-domain、ipv4-addr、ipv6-prefix、limit、lmf-id、max-payload-size、n1-msg-class、n2-info-class、nef-id、notification-type、nsi-list、nwdaf-event-list、pdu-session-types、pfd-data、plmn-specific-snssai-list、preferred-api-versions、preferred-nf-instances、rat-type、redundant-gtpu、redundant-transport、remote-plmn-id、requester-snssais、routing-indicator、scp-domain-list、supi、target-snpn、tngf-info、twif-info、ue-ipv4-address、ue-ipv6-prefix、upf-iwk-eps-ind、upf-ue-ip-addr-ind、v2x-support-ind、w-agf-info。
FAILRSPTYPE|发现失败类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于设置发现失败类型。2XX_NULL：NRF回送响应为200，且消息携带的NFProfileList为空。404_FOR_DYNAMIC：NRF回送响应为404。4XX：NRF回送响应为4XX，不包括404，408，429。5XX：NRF回送响应为5XX，不包括503。6XX：NRF回送响应为6XX。
CACHEPOLICYID|缓存策略标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现失败时对应目的NF类型和发现条件下使用的发现结果缓存策略标识。引用的缓存策略标识必须存在，可用SHOW SBISRVDISCOVFAILPOLICY查询当前的“服务发现失败结果缓存策略”已有的缓存策略标识。




[](None)命令举例 


`
查询服务发现失败结果缓存条件配置：目的NF类型为“AMF”，发现条件为“target-nf-instance-id”。
SHOW SBISRVDISCOVFAILCOND:TARGETNFTYPE="AMF_TYPE",COMDISCOVERYPARAMS="TARGET_NF_INSTANCE_ID"

(No.15) : SHOW SBISRVDISCOVFAILCOND:
-----------------CommonS_HTTP_LB_0----------------
操作维护       目的NF类型 发现条件              发现失败类型 缓存策略标识 
------------------------------------------------------------------------
复制 修改 删除 AMF        TARGET_NF_INSTANCE_ID 2XX_NULL     1          
------------------------------------------------------------------------
记录数：1

执行成功开始时间:2022-12-14 13:43:11 耗时: 1.663秒

` 


# 路由策略配置 
# 路由策略配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）需要支持NF的请求消息路由功能。 

SBI-GW在收到NF的请求消息时，需要按照一定的策略进行消息路由，比如：是否需要令牌、后续请求自动倒回方式等。该配置支持对不同的NF实例提供定制化的路由策略。 




[](None)功能说明 


该配置可对不同的NF实例定制不同的路由策略。包括：是否需要令牌、后续请求自动倒回方式、目标URI内是否优先携带FQDN。 

当NF需要用到SBI-GW的请求消息路由功能时，使用该配置。SBI-GW根据本端NF和远端NF确定当前请求消息的路由策略，按照该策略进行消息的路由处理。 




[](None)子主题： 






## 新增路由策略配置(ADD SBIROUTEPOLICY) 
## 新增路由策略配置(ADD SBIROUTEPOLICY) 


[](None)功能说明 

本命令用于新增路由策略。当业务网元（如：SMF、AMF）需要使用SBI-GW的路由功能时，使用该命令以目的NF类型和本端NF类型为索引新增路由的策略配置。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。
NEEDTOKEN|是否需要令牌|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置后续请求自动倒回配置。默认为不自动倒回。不自动倒回：后续请求继续使用当前NF。自动倒回到高优先级NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果失败则继续使用当前NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI内是否优先携带FQDN。默认不优先携带FQDN。否：不优先携带FQDN。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望初始请求消息锚定NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和后续请求自动倒回配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置后续请求自动倒回配置。默认为不自动倒回。不自动倒回：后续请求继续使用当前NF。自动倒回到高优先级NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果失败则继续使用当前NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI内是否优先携带FQDN。默认不优先携带FQDN。否：不优先携带FQDN。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望初始请求消息锚定NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和后续请求自动倒回配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
增加路由策略配置，目的NF类型为“NRF”，本地NF类型为“UDM”，是否需要令牌为“是”，后续请求自动倒回为“自动倒回到高优先级NF”，目标URI内是否优先携带FQDN为“是”，后续请求容灾倒换开关为“是”，变更通知后后续请求是否重路由为“重路由”，支持位置优选为“是”，位置匹配策略为“指定Label个数匹配”，Label个数为“2”，位置选择优先级为“位置_优先级_权重”，容灾时停止位置优选为“否”，位置匹配NF比例阈值为“50”，自主路由请求支持服务发现为“否”，自主路由请求支持服务发现为“否”,支持目的NF的429/503处理为“否”，支持SCP的429/503处理为“否”，支持SEPP的429/503处理为“否”，全不可用时忽略注册状态为“否”。 
ADD SBIROUTEPOLICY:TARGETNFTYPE="NRF_TYPE",NFTYPE="UDM_TYPE",NEEDTOKEN="YES",INNERAUTOBACK="AUTOBACK_PRIORITY",FQDNINTARGETURI="YES",INNERDISASTERSWITCH="YES",INNERNOTIFYREROUTE="YES",PREFERLOCALITY="YES",LOCALITYMATCHPLCY="SPECIFYNUM",LABELNUM="2",LOCALITYSELPRIOR="LOCALITY_PRIORITY_WEIGHT",DRSTOPPREFERLOCALITY="NO",LOCMATCHNFPROP="50",AUTOREQSRVDSCVR="NO",SPRTNF429503="NO",SPRTSCP429503="NO",SPRTSEPP429503="NO",IGNOREREGSTATUS="NO";
` 


## 修改路由策略配置(SET SBIROUTEPOLICY) 
## 修改路由策略配置(SET SBIROUTEPOLICY) 


[](None)功能说明 

本命令用于修改路由策略。当业务网元（如：SMF、AMF）使用SBI-GW的路由功能过程中需要修改路由参数时（如：后续请求自动倒回配置修改），使用该命令以目的NF类型和本端NF类型为索引修改路由的策略配置。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置后续请求自动倒回配置。默认为不自动倒回。不自动倒回：后续请求继续使用当前NF。自动倒回到高优先级NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果失败则继续使用当前NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI内是否优先携带FQDN。默认不优先携带FQDN。否：不优先携带FQDN。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望初始请求消息锚定NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和后续请求自动倒回配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置后续请求自动倒回配置。默认为不自动倒回。不自动倒回：后续请求继续使用当前NF。自动倒回到高优先级NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果失败则继续使用当前NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI内是否优先携带FQDN。默认不优先携带FQDN。否：不优先携带FQDN。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望初始请求消息锚定NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和后续请求自动倒回配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
修改路由策略配置，目的NF类型为“NRF”，本地NF类型为“UDM”，是否需要令牌为“否”，后续请求自动倒回为“自动倒回到初始锚定NF”，目标URI内是否优先携带FQDN为“否”，后续请求容灾倒换开关为“是”，变更通知后后续请求是否重路由为“重路由”，支持位置优选为“是”，位置匹配策略为“指定Label个数匹配”，Label个数为“2”，位置选择优先级为“位置_优先级_权重”，容灾时停止位置优选为“否”，位置匹配NF比例阈值为“50”，自主路由请求支持服务发现为“否”。
SET SBIROUTEPOLICY:TARGETNFTYPE="NRF_TYPE",NFTYPE="UDM_TYPE",NEEDTOKEN="NO",INNERAUTOBACK="AUTOBACK_INITANCHOR",FQDNINTARGETURI="NO",INNERDISASTERSWITCH="YES",INNERNOTIFYREROUTE="YES",PREFERLOCALITY="YES",LOCALITYMATCHPLCY="SPECIFYNUM",LABELNUM="2",LOCALITYSELPRIOR="LOCALITY_PRIORITY_WEIGHT",DRSTOPPREFERLOCALITY="NO",LOCMATCHNFPROP="50",AUTOREQSRVDSCVR="NO";
` 


## 删除路由策略配置(DEL SBIROUTEPOLICY) 
## 删除路由策略配置(DEL SBIROUTEPOLICY) 


[](None)功能说明 

本命令用于删除路由策略。当业务网元（如：SMF、AMF）不再使用SBI-GW的路由功能时，使用该命令以目的NF类型和本端NF类型为索引删除路由策略配置。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置后续请求自动倒回配置。默认为不自动倒回。不自动倒回：后续请求继续使用当前NF。自动倒回到高优先级NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果失败则继续使用当前NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI内是否优先携带FQDN。默认不优先携带FQDN。否：不优先携带FQDN。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望初始请求消息锚定NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和后续请求自动倒回配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
删除路由策略配置，目的NF类型为“NRF”，本地NF类型为“UDM”。
DEL SBIROUTEPOLICY:TARGETNFTYPE=NRF_TYPE,NFTYPE=UDM_TYPE;
` 


## 查询路由策略配置(SHOW SBIROUTEPOLICY) 
## 查询路由策略配置(SHOW SBIROUTEPOLICY) 


[](None)功能说明 

本命令用于查询路由策略。当需要查询已经存在的路由策略配置时，使用该命令。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF类型。
NFTYPE|NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置发起请求的一端的NF类型。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置后续请求自动倒回配置。默认为不自动倒回。不自动倒回：后续请求继续使用当前NF。自动倒回到高优先级NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果失败则继续使用当前NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI内是否优先携带FQDN。默认不优先携带FQDN。否：不优先携带FQDN。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望初始请求消息锚定NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和后续请求自动倒回配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
查询路由策略配置，目的NF类型为“NRF”，本地NF类型为“UDM”。
SHOW SBIROUTEPOLICY:TARGETNFTYPE="NRF_TYPE",NFTYPE="UDM_TYPE";

(No.1) : SHOW SBIROUTEPOLICY:
-----------------CommonS_HTTP_LB_0----------------
操作维护       目的NF类型 NF类型 是否需要令牌 后续请求自动倒回     目标URI内是否优先携带FQDN 后续请求容灾倒换开关 变更通知后后续请求是否重路由 支持位置优选 位置匹配策略      Label个数 位置选择优先级   容灾时停止位置优选 位置匹配NF比例阈值(%) 自主路由请求支持服务发现 支持目的NF的429/503处理 支持SCP的429/503处理 支持SEPP的429/503处理 全不可用时忽略注册状态 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
复制 修改 删除 NRF        UDM    是           自动倒回到高优先级NF 是                        是                   重路由                       否           指定Label个数匹配 2         位置_优先级_权重 是                 50                    否                       是                      否                   否                    否                     
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

` 


# 客户端路由配置管理 
# 客户端路由配置管理 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）需要支持NF的请求消息路由功能。 

SBI-GW在进行消息路由时，需要按照NF的要求提供特定功能，比如：目的NF黑名单等。该组配置提供定制化的路由功能。 
"




[](None)功能说明 


该组配置可定制不同的路由功能。包括：目的NF黑名单等。 

当NF需要用到SBI-GW的请求消息路由功能时，使用该组配置。SBI-GW根据该组配置的特定功能，进行消息的路由处理。 




[](None)子主题： 






## 目的NF黑名单配置 
## 目的NF黑名单配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）需要支持NF的请求消息路由功能。 

SBI-GW在进行消息路由时，需要避免选择某些网元作为目的NF。该配置为路由提供目的NF黑名单功能。 




[](None)功能说明 


该配置可将指定的网元加入黑名单中。 

当NF需要用到SBI-GW的请求消息路由功能时，使用该配置。SBI-GW进行消息的目的NF选择时，根据网元实例标识避免选中配置中的网元实例。 




[](None)子主题： 






### 新增目的NF黑名单配置(ADD SBITARGETNFBLACKLIST) 
### 新增目的NF黑名单配置(ADD SBITARGETNFBLACKLIST) 


[](None)功能说明 

本命令用于新增目的NF黑名单配置。当业务网元（如：SMF、AMF）使用SBI-GW的路由功能，需要配置不能被选中的目的NF时，使用该命令以目的NF实例标识为索引新增目的NF黑名单配置。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定不能包含大写英文字母。
DESC|描述|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定英文字母，不能为大写。
DESC|描述|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)命令举例 


`
增加目的NF黑名单配置，目的NF实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”，描述为“nf_0”。
ADD SBITARGETNFBLACKLIST:TARGETNFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0",DESC="nf_0";
` 


### 修改目的NF黑名单配置(SET SBITARGETNFBLACKLIST) 
### 修改目的NF黑名单配置(SET SBITARGETNFBLACKLIST) 


[](None)功能说明 

本命令用于修改目的NF黑名单配置。当业务网元（如：SMF、AMF）需要修改不能被选中的目的NF配置参数时，使用该命令以目的NF实例标识为索引修改目的NF黑名单配置。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定不能包含大写英文字母。
DESC|描述|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定英文字母，不能为大写。
DESC|描述|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)命令举例 


`
修改目的NF黑名单配置，目的NF实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”，描述为“nf_01”。
SET SBITARGETNFBLACKLIST:TARGETNFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0",DESC="nf_01";
` 


### 删除目的NF黑名单配置(DEL SBITARGETNFBLACKLIST) 
### 删除目的NF黑名单配置(DEL SBITARGETNFBLACKLIST) 


[](None)功能说明 

本命令用于删除目的NF黑名单配置。当业务网元（如：SMF、AMF）不再使用不能被选中的目的NF配置时，使用该命令以目的NF实例标识为索引删除目的NF黑名单配置。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定不能包含大写英文字母。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定英文字母，不能为大写。
DESC|描述|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)命令举例 


`
删除目的NF黑名单配置，目的NF实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”。
DEL SBITARGETNFBLACKLIST:TARGETNFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0";
` 


### 查询目的NF黑名单配置(SHOW SBITARGETNFBLACKLIST) 
### 查询目的NF黑名单配置(SHOW SBITARGETNFBLACKLIST) 


[](None)功能说明 

本命令用于查询目的NF黑名单。当需要查询已经存在的目的NF黑名单配置时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定不能包含大写英文字母。
DESC|描述|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFINSTID|目的NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置目的NF实例标识。业务网元使用SBI-GW的路由功能时，如果不希望某些网元被选为目的网元，则将这些网元的实例标识作为目的NF实例标识加入目的NF黑名单配置中。数据来源：本端规划。配置原则：限定英文字母，不能为大写。
DESC|描述|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置目的NF实例的描述，方便操作员为目的NF实例标识添加描述和备注。数据来源：本端规划。配置原则：无特殊配置要求。




[](None)命令举例 


`
查询目的NF黑名单配置，目的NF实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”。
SHOW  SBITARGETNFBLACKLIST:TARGETNFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0";

(No.1) : SHOW SBITARGETNFBLACKLIST:
-----------------http_st_ci_1/CommonS_HTTP_LB_0----------------
操作维护       目的NF实例标识                       描述 
---------------------------------------------------------
复制 修改 删除 aaa00a00-0a00-000a-a0a0-00aa00a00aa0 nf_01 
---------------------------------------------------------
记录数：1

` 


# 订阅条件配置 
# 订阅条件配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）需要代理NF发起订阅。 
订阅条件确定需要在NRF中监视其状态的NF实例集。 
当满足订阅中指定的条件NF实例发生变化时，NRF会通知NF服务使用者。 




[](None)功能说明 


该配置用于进行SBI代理的NF的订阅条件配置。订阅条件的需要按3GPP TS 29.510 6.1.6.2.35章节进行配置 




[](None)子主题： 






## 新增订阅条件配置(ADD SBISUBCOND) 
## 新增订阅条件配置(ADD SBISUBCOND) 


[](None)功能说明 

该命令用于新增订阅条件配置。当SBIGW需要主动向NRF Server发起订阅，使用该命令。该命令执行成功后，SBIGW可根据配置的目的NF类型，条件类型，条件值和事件类型，主动向NRF Server发起订阅。 


[](None)注意事项 

配置订阅请求是由配置发起的向目的NF的请求。该请求的发送依赖于NRF服务器模板选择配置，需要根据不同的目的NF类型选择对应的NRF服务器模板。使用命令查询[SHOW SBINRFPROFILESEL](../mml/1220530.html)当前NRF服务器模板选择配置。

订阅条件配置中没有校验条件值为空，有可能造成订阅全网！ 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-255|该参数用于设置目的NF类型。
CONDTYPE|条件类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅条件类型。
CONDVALUE|条件值|参数可选性: 必选参数类型: 字符串参数范围: 0-1024|该参数用于设置订阅条件值。条件类型中的AMF集、Guami列表、网络切片、NF组、NF集、NF服务集、UPF集对应的条件值均要配置为json格式，且每种类型所携带的参数均要符合29510-g30协议。
EVENTTYPE|事件类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅事件类型。
PLMNID|订阅目的NF的PLMN ID|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于设置订阅目的NF的PLMN ID。该参数主要应用于异网漫游场景，代表订阅NF归属的PLMN。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-255|该参数用于设置目的NF类型。
CONDTYPE|条件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅条件类型。
CONDVALUE|条件值|参数可选性: 任选参数类型: 字符串参数范围: 0-1024|该参数用于设置订阅条件值。条件类型中的AMF集、Guami列表、网络切片、NF组、NF集、NF服务集、UPF集对应的条件值均要配置为json格式，且每种类型所携带的参数均要符合29510-g30协议。
EVENTTYPE|事件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅事件类型。
PLMNID|订阅目的NF的PLMN ID|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于设置订阅目的NF的PLMN ID。该参数主要应用于异网漫游场景，代表订阅NF归属的PLMN。




[](None)命令举例 


`
新增订阅条件配置：编号为1，目的NF类型为"AMF"，条件类型为"NF实例ID"，条件值为"bc88e883-17c6-454e-a797-0721b2511200"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=1,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_NFINSTID",CONDVALUE="\"bc88e883-17c6-454e-a797-0721b2511200\"",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为2，目的NF类型为"AMF"，条件类型为"NF类型"，条件值为"AMF"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=2,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_NFTYPE",CONDVALUE="\"AMF\"",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为3，目的NF类型为"AMF"，条件类型为"服务名"，条件值为"namf-comm"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=3,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_SERVNAME",CONDVALUE="\"namf-comm\"",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为4，目的NF类型为"AMF"，条件类型为"AMF集"，条件值为"{"amfRegionId":"2a","amfSetId":"0ab"}"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=4,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_AMF",CONDVALUE="{\"amfRegionId\":\"2a\",\"amfSetId\":\"0ab\"} ",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为5，目的NF类型为"AMF"，条件类型为"Guami列表"，条件值为"[{"amfId":"aca001","plmnId":{"mcc":"460","mnc":"11"}},{"amfId":"aca002","plmnId":{"mcc":"460","mnc":"12"}}]"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=5,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_GUAMILIST",CONDVALUE="[{\"amfId\":\"aca001\",\"plmnId\":{\"mcc\":\"460\",\"mnc\":\"11\"}},{\"amfId\":\"aca002\",\"plmnId\":{\"mcc\":\"460\",\"mnc\":\"12\"}}]",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为6，目的NF类型为"AMF"，条件类型为"网络切片"，条件值为"{"nsiList":["a01","a02"],"snssaiList":[{"sd":"010101","sst":1},{"sd":"010102","sst":1}]}"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=6,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_NETSLICE",CONDVALUE="{\"nsiList\":[\"a01\",\"a02\"],\"snssaiList\":[{\"sd\":\"010101\",\"sst\":1},{\"sd\":\"010102\",\"sst\":1}]}",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186" 

新增订阅条件配置：编号为7，目的NF类型为"UDM"，条件类型为"NF组"，条件值为"{"nfGroupId":"abc01","nfType":"UDM"}"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=7,TARGETNFTYPE="UDM_TYPE",CONDTYPE="COND_NFGROUP",CONDVALUE="{\"nfGroupId\":\"abc01\",\"nfType\":\"UDM\"}",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186" 

新增订阅条件配置：编号为8，目的NF类型为"AMF"，条件类型为"NF集"，条件值为"aac02"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=8,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_NFSET",CONDVALUE="\"aac02\"",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为9，目的NF类型为"AMF"，条件类型为"NF服务集"，条件值为"ad055"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=9,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_NESERVSET",CONDVALUE="\"ad055\"",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186"

新增订阅条件配置：编号为10，目的NF类型为"AMF"，条件类型为"UPF集"，条件值为"{"smfServingArea":["afb001","afb002"],"taiList":[{"nid":"01020304050","plmnId":{"mcc":"460","mnc":"01"},"tac":"ac02"},{"nid":"01020304051","plmnId":{"mcc":"460","mnc":"02"},"tac":"ac03"}]}"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
ADD SBISUBCOND:ID=10,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_UPF",CONDVALUE="{\"smfServingArea\":[\"afb001\",\"afb002\"],\"taiList\":[{\"nid\":\"01020304050\",\"plmnId\":{\"mcc\":\"460\",\"mnc\":\"01\"},\"tac\":\"ac02\"},{\"nid\":\"01020304051\",\"plmnId\":{\"mcc\":\"460\",\"mnc\":\"02\"},\"tac\":\"ac03\"}]}",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186" 
` 


## 修改订阅条件配置(SET SBISUBCOND) 
## 修改订阅条件配置(SET SBISUBCOND) 


[](None)功能说明 

该命令用于修改订阅条件配置。当需要订阅的条件信息发生变化，使用该命令。该命令执行成功后，SBIGW可根据新的订阅条件配置，主动向NRF Server发起订阅。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-255|该参数用于设置目的NF类型。
CONDTYPE|条件类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅条件类型。
CONDVALUE|条件值|参数可选性: 必选参数类型: 字符串参数范围: 0-1024|该参数用于设置订阅条件值。条件类型中的AMF集、Guami列表、网络切片、NF组、NF集、NF服务集、UPF集对应的条件值均要配置为json格式，且每种类型所携带的参数均要符合29510-g30协议。
EVENTTYPE|事件类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅事件类型。
PLMNID|订阅目的NF的PLMN ID|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于设置订阅目的NF的PLMN ID。该参数主要应用于异网漫游场景，代表订阅NF归属的PLMN。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-255|该参数用于设置目的NF类型。
CONDTYPE|条件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅条件类型。
CONDVALUE|条件值|参数可选性: 任选参数类型: 字符串参数范围: 0-1024|该参数用于设置订阅条件值。条件类型中的AMF集、Guami列表、网络切片、NF组、NF集、NF服务集、UPF集对应的条件值均要配置为json格式，且每种类型所携带的参数均要符合29510-g30协议。
EVENTTYPE|事件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅事件类型。
PLMNID|订阅目的NF的PLMN ID|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于设置订阅目的NF的PLMN ID。该参数主要应用于异网漫游场景，代表订阅NF归属的PLMN。




[](None)命令举例 


`
修改订阅条件配置：编号为1，目的NF类型为"AMF"，条件类型为"Guami列表"，条件值为"[{"amfId":"111111","plmnId":{"mcc":"460","mnc":"11"}},{"amfId":"222222","plmnId":{"mcc":"460","mnc":"12"}}]"，事件类型为"上线事件"&"下线事件"&"NFProfile变更事件"，订阅目的NF的PLMN ID为"460-186"。
SET SBISUBCOND:ID=1,TARGETNFTYPE="AMF_TYPE",CONDTYPE="COND_GUAMILIST",CONDVALUE="[{\"amfId\":\"111111\",\"plmnId\":{\"mcc\":\"460\",\"mnc\":\"11\"}},{\"amfId\":\"222222\",\"plmnId\":{\"mcc\":\"460\",\"mnc\":\"12\"}}]",EVENTTYPE="EVENT_REGISTERED"&"EVENT_DEREGISTERED"&"EVENT_CHANGED",PLMNID="460-186";
` 


## 删除订阅条件配置(DEL SBISUBCOND) 
## 删除订阅条件配置(DEL SBISUBCOND) 


[](None)功能说明 

该命令用于删除订阅条件配置。当SBIGW不再需要主动向NRF Server发起订阅时，使用该命令。该命令执行成功后，对应的订阅条件配置删除成功。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-255|该参数用于设置目的NF类型。
CONDTYPE|条件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅条件类型。
CONDVALUE|条件值|参数可选性: 任选参数类型: 字符串参数范围: 0-1024|该参数用于设置订阅条件值。条件类型中的AMF集、Guami列表、网络切片、NF组、NF集、NF服务集、UPF集对应的条件值均要配置为json格式，且每种类型所携带的参数均要符合29510-g30协议。
EVENTTYPE|事件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅事件类型。
PLMNID|订阅目的NF的PLMN ID|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于设置订阅目的NF的PLMN ID。该参数主要应用于异网漫游场景，代表订阅NF归属的PLMN。




[](None)命令举例 


`
删除编号为１的订阅配置。
DEL SBISUBCOND:ID=1

(No.9) : DEL SBISUBCOND:ID=1
-----------------CommonS_HTTP_LB_0----------------

执行成功开始时间:2020-12-07 16:08:38 耗时: 0.155 秒

` 


## 查询订阅条件配置(SHOW SBISUBCOND) 
## 查询订阅条件配置(SHOW SBISUBCOND) 


[](None)功能说明 

该命令用于查询订阅条件配置。当需要查询订阅条件配置信息时，使用该命令。该命令执行成功后，显示目的NF类型，条件类型，条件值和事件类型等订阅配置信息。 


[](None)注意事项 


 
如需要查询全部订阅条件配置信息，则不需要输入任何参数。 

 
如需要查询指定的订阅条件配置信息，则需要输入配置编号。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置订阅条件编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-255|该参数用于设置目的NF类型。
CONDTYPE|条件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅条件类型。
CONDVALUE|条件值|参数可选性: 任选参数类型: 字符串参数范围: 0-1024|该参数用于设置订阅条件值。条件类型中的AMF集、Guami列表、网络切片、NF组、NF集、NF服务集、UPF集对应的条件值均要配置为json格式，且每种类型所携带的参数均要符合29510-g30协议。
EVENTTYPE|事件类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置订阅事件类型。
PLMNID|订阅目的NF的PLMN ID|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于设置订阅目的NF的PLMN ID。该参数主要应用于异网漫游场景，代表订阅NF归属的PLMN。




[](None)命令举例 


`
查询订阅配置。
SHOW SBISUBCOND

(No.1) : SHOW SBISUBCOND:
-----------------CommonS_HTTP_LB_0----------------
ID 目的NF类型 条件类型  条件值                                                                                                      事件类型                             订阅目的NF的PLMN ID
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1  AMF        Guami列表 [{"amfId":"111111","plmnId":{"mcc":"460","mnc":"11"}},{"amfId":"222222","plmnId":{"mcc":"460","mnc":"12"}}] 上线事件&下线事件&NF Profile变更事件 460-186
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-12-09 20:24:59 耗时: 1.09 秒

` 


# NRF状态检测失败响应码配置 
# NRF状态检测失败响应码配置 


[](None)背景知识 


网元发送状态检测请求给NRF，如果收到来自NRF的响应，则认为检测成功。
NRF在不可用的情况下仍可能回响应（比如HTTPLB正常工作，NRF服务未工作，则NRF收到访问请求可能会回送500响应，但此时NRF不能正常工作），此时需要判定该次NRF检测失败。 




[](None)功能说明 


该配置用于设置NRF状态检测失败响应码。
当需要根据NRF回复的响应码判断节点检测是否成功时，需要使用该组命令。
当NRF服务端返回的响应码等于该命令配置的失败码时，则认为此次节点检测失败；反之，则认为此次节点检测成功。 




[](None)子主题： 






## 新增NRF状态检测失败响应码配置(ADD DCTVFAILRSPCODE) 
## 新增NRF状态检测失败响应码配置(ADD DCTVFAILRSPCODE) 


[](None)功能说明 

该命令用于新增NRF状态检测失败响应码配置。当需要根据失败码限制节点检测失败时，使用该命令。该命令执行成功后，当NRF服务端返回的响应码等于该命令配置的失败码时，则认为此次节点检测失败。 


[](None)注意事项 

该命令需配合[SHOW SBINRFPROFILE](../mml/1220512.html)命令使用。新增NRF状态检测失败响应码后，当NRF服务端返回的响应码等于该命令配置的检测失败码的次数达到[SHOW SBINRFPROFILE](../mml/1220512.html)命令中配置的异常不可用检测次数时，该节点置为不可用状态。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NRFPROFILEID|NRF服务器模板ID|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。
RSPCODE|检测失败响应码|参数可选性: 必选参数类型: 数字参数范围: 300-599|该参数用于设置检测失败响应码，当NRF返回的响应码与此处配置的失败响应码一致时，则表示该次检测失败




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NRFPROFILEID|NRF服务器模板ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。
RSPCODE|检测失败响应码|参数可选性: 任选参数类型: 数字参数范围: 300-599|该参数用于设置检测失败响应码，当NRF返回的响应码与此处配置的失败响应码一致时，则表示该次检测失败




[](None)命令举例 


`
新增NRF状态检测失败响应码配置，编号为1，错误码为300。
ADD DCTVFAILRSPCODE:NRFPROFILEID=1,RSPCODE=300
` 


## 删除NRF状态检测失败响应码配置(DEL DCTVFAILRSPCODE) 
## 删除NRF状态检测失败响应码配置(DEL DCTVFAILRSPCODE) 


[](None)功能说明 

该命令用于删除NRF状态检测失败响应码配置。当需要删除NRF服务器模板与失败码对节点检测的限制关系时，使用该命令。该命令执行成功后，对应的失败码不再作为节点检测失败的标准。后续NRF返回该响应码的节点检测消息时认为该次检测成功。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NRFPROFILEID|NRF服务器模板ID|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。
RSPCODE|检测失败响应码|参数可选性: 必选参数类型: 数字参数范围: 300-599|该参数用于设置检测失败响应码，当NRF返回的响应码与此处配置的失败响应码一致时，则表示该次检测失败




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NRFPROFILEID|NRF服务器模板ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。
RSPCODE|检测失败响应码|参数可选性: 任选参数类型: 数字参数范围: 300-599|该参数用于设置检测失败响应码，当NRF返回的响应码与此处配置的失败响应码一致时，则表示该次检测失败




[](None)命令举例 


`
删除NRF状态检测失败响应码配置，编号为1，错误码为300。
DEL DCTVFAILRSPCODE:NRFPROFILEID=1,RSPCODE=300
` 


## 查询NRF状态检测失败响应码配置(SHOW DCTVFAILRSPCODE) 
## 查询NRF状态检测失败响应码配置(SHOW DCTVFAILRSPCODE) 


[](None)功能说明 

该命令用于查询NRF状态检测失败响应码配置。该命令执行成功后，显示各个NRF服务器模板编号及对应的NRF状态检测失败响应码。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NRFPROFILEID|NRF服务器模板ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。
RSPCODE|检测失败响应码|参数可选性: 任选参数类型: 数字参数范围: 300-599|该参数用于设置检测失败响应码，当NRF返回的响应码与此处配置的失败响应码一致时，则表示该次检测失败




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NRFPROFILEID|NRF服务器模板ID|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，其编号需在SHOW SBINRFPROFILE命令查询得到的NRF服务器模板编号范围内。
RSPCODE|检测失败响应码|参数可选性: 任选参数类型: 数字参数范围: 300-599|该参数用于设置检测失败响应码，当NRF返回的响应码与此处配置的失败响应码一致时，则表示该次检测失败




[](None)命令举例 


`
查询所有NRF状态检测失败响应码配置。
SHOW DCTVFAILRSPCODE

(No.3) : SHOW DCTVFAILRSPCODE:
-----------------CommonS_HTTP_LB_0----------------
操作维护       NRF服务器模板ID 检测失败响应码 
----------------------------------------------
复制 删除      1               300            
----------------------------------------------
记录数：1
执行成功开始时间:2021-05-27 14:07:25 耗时: 0.54 秒

` 


# 出局负载控制策略配置 
# 出局负载控制策略配置 


[](None)背景知识 


按照3GPP TS 29.500协议描述，服务提供者可以在发送的消息中携带包含负载信息的3gpp-Sbi-Lci头部，或者携带包含过载信息的3gpp-Sbi-Oci头部，服务使用者（本端）后续向服务提供者（对端）发送请求时，可以根据对端NF的负载或过载信息，来调整选择NF时的权重，或丢弃部分请求；还可以选择是否订阅对端NF的负载变化通知。 




[](None)功能说明 


该配置用于设置服务使用者（本端）对出局请求(发送给服务提供者的请求)消息的负载控制策略。当需要对出局请求进行负载控制(例如将对端NF负载纳入NF选择)时，配置该组命令。如果不配置，则无法对出局请求进行有效的负载控制，可能导致对端NF出现过载。 




[](None)子主题： 






## 修改出局负载控制策略配置(SET SBILOADCTRLPOLICY) 
## 修改出局负载控制策略配置(SET SBILOADCTRLPOLICY) 


[](None)功能说明 

该命令用于设置出局负载控制策略相关配置。当服务使用者需要修改对出局请求（发送给服务提供者的请求）消息生效的负载控制策略时，使用该命令。执行成功后，SBI-GW会使用最新的策略对出局请求消息进行控制。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFLOADINSELECT|将负载纳入NF选择|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否把对端NF负载纳入NF选择。如果服务提供者(对端)在消息中携带了包含负载信息的3gpp-Sbi-Lci头部，或者携带了包含过载信息的3gpp-Sbi-Oci头部， 当后续服务使用者(本端)向对端发送请求时，需要根据本配置参数决定是否将对端的负载信息或过载信息纳入NF选择的权重之中。是：将对端的负载信息或过载信息纳入NF选择的权重之中。否：不将对端的负载信息或过载信息纳入NF选择的权重之中。
SUBTOLOADCHG|订阅负载变化|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置是否订阅对端NF负载变化触发的通知。如果服务提供者(对端)支持在消息中携带包含负载信息的3gpp-Sbi-Lci头部，则服务使用者(本端)可以选择是否需要向NRF订阅对端NF负载变化触发的通知。是：向NRF订阅对端NF负载变化触发的通知。否：不向NRF订阅对端NF负载变化触发的通知。




[](None)命令举例 


`
修改出局负载控制策略配置：将负载纳入NF选择为“是”，订阅负载变化为“否”。
SET SBILOADCTRLPOLICY:NFLOADINSELECT="YES",SUBTOLOADCHG="NO";
` 


## 查询出局负载控制策略配置(SHOW SBILOADCTRLPOLICY) 
## 查询出局负载控制策略配置(SHOW SBILOADCTRLPOLICY) 


[](None)功能说明 

该命令用于查询出局负载控制策略相关配置。当需要查询出局负载控制策略配置参数时，使用该命令。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFLOADINSELECT|将负载纳入NF选择|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否把对端NF负载纳入NF选择。如果服务提供者(对端)在消息中携带了包含负载信息的3gpp-Sbi-Lci头部，或者携带了包含过载信息的3gpp-Sbi-Oci头部， 当后续服务使用者(本端)向对端发送请求时，需要根据本配置参数决定是否将对端的负载信息或过载信息纳入NF选择的权重之中。是：将对端的负载信息或过载信息纳入NF选择的权重之中。否：不将对端的负载信息或过载信息纳入NF选择的权重之中。
SUBTOLOADCHG|订阅负载变化|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置是否订阅对端NF负载变化触发的通知。如果服务提供者(对端)支持在消息中携带包含负载信息的3gpp-Sbi-Lci头部，则服务使用者(本端)可以选择是否需要向NRF订阅对端NF负载变化触发的通知。是：向NRF订阅对端NF负载变化触发的通知。否：不向NRF订阅对端NF负载变化触发的通知。




[](None)命令举例 


`
查询出局负载控制策略配置。
SHOW SBILOADCTRLPOLICY

(No.1) : SHOW SBILOADCTRLPOLICY:
-----------------CommonS_HTTP_LB_0----------------
操作维护       将负载纳入NF选择         订阅负载变化
--------------------------------------------------------
修改           是                       否  
--------------------------------------------------------
记录数：1
执行成功开始时间:2020-11-23 13:57:11 耗时: 0.162 秒

` 


# 业务指定模板配置 
# 业务指定模板配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）支持客户端路由功能，路由请求的重选功能及服务发现功能。 

该组配置命令为针对以上所述功能实现的基于模板的配置命令，相比基于NF级的配置更为灵活。 




[](None)功能说明 


当业务网元（目前只有SMF）需要指定基于模板的配置，包括路由模板策略、路由失败重选或服务发现方式配置时，使用该组命令。 

该组命令用于配置业务在请求中指定的配置模板，包括路由策略模板配置、重选模板配置、重选状态码模板配置、服务发现方式模板配置。 


 
当业务指定模板配置时，选择到对应配置并按照配置的策略进行消息流程处理。 

 
当业务没有指定模板配置时，SBI-GW直接使用基于NF级的默认配置。 

 




[](None)子主题： 






## 路由策略模板配置 
## 路由策略模板配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）需要支持NF的请求消息路由功能。 

SBI-GW在收到NF的请求消息时，需要按照一定的策略进行消息路由，比如：是否需要令牌、后续请求自动倒回方式等。该配置支持对不同的NF实例提供定制化的路由策略。 




[](None)功能说明 


该配置可对不同的NF实例定制不同的路由策略。包括：是否需要令牌、后续请求自动倒回方式、目标URI内是否优先携带FQDN。 

当NF需要用到SBI-GW的请求消息路由功能时，使用该配置。SBI-GW根据请求消息中的路由策略模板编号确定当前请求消息的路由策略，按照该策略进行消息的路由处理。 




[](None)子主题： 






### 新增路由策略模板配置(ADD SBIROUTEPOLICYPF) 
### 新增路由策略模板配置(ADD SBIROUTEPOLICYPF) 


[](None)功能说明 

本命令用于新增业务指定的路由策略模板。当业务网元（目前只有SMF）需要使用SBI-GW的路由功能，且需要定制自身的路由策略时，使用该命令。 

该命令配置完成后，业务网元可以根据指定的路由策略进行路由选择。 


[](None)注意事项 

业务指定的路由策略模板实际未配置时，会导致本次路由失败。 

模板名称参数为关键字，不可以为空。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
PFNAME|模板名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置路由策略模板的名称，一个模板名称唯一识别一个路由策略模板编号。
NEEDTOKEN|是否需要令牌|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置SBI-GW收到后续请求（非初始请求）后，根据此处配置的后续请求自动倒回方式选择合适的目的NF向其发送后续请求消息。默认为不自动倒回。该参数只有在“后续请求容灾倒换开关”配置为“是”的前提下才生效。不自动倒回：SBI-GW收到后续请求消息后，将请求消息发送给当前目的NF。自动倒回到高优先级NF：SBI-GW收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的目的NF，如果失败则继续使用当前目的NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前目的NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI（Uniform Resource Identifier，统一资源标识符）内是否优先携带FQDN（Fully Qualified Domain Name，全称域名）。默认不优先携带FQDN。否：不优先携带FQDN，携带IP地址和端口。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望使用初始请求消息锚定的NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和“后续请求自动倒回”参数配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由策略模板的名称，一个模板名称唯一识别一个路由策略模板编号。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置SBI-GW收到后续请求（非初始请求）后，根据此处配置的后续请求自动倒回方式选择合适的目的NF向其发送后续请求消息。默认为不自动倒回。该参数只有在“后续请求容灾倒换开关”配置为“是”的前提下才生效。不自动倒回：SBI-GW收到后续请求消息后，将请求消息发送给当前目的NF。自动倒回到高优先级NF：SBI-GW收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的目的NF，如果失败则继续使用当前目的NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前目的NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI（Uniform Resource Identifier，统一资源标识符）内是否优先携带FQDN（Fully Qualified Domain Name，全称域名）。默认不优先携带FQDN。对于SCP C/D模式，SEPP的targetapiroot模式中的request URI，使用SCP/SEPP路由集配置中的SCP/SEPP URI是否携带FQDN配置。否：不优先携带FQDN，携带IP地址和端口。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望使用初始请求消息锚定的NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和“后续请求自动倒回”参数配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
增加路由策略模板配置，模板编号为1，模板名称为“subSDN”，是否需要令牌为“是”，后续请求自动倒回为“自动倒回到高优先级NF”，目标URI内是否优先携带FQDN为“是”，后续请求容灾倒换开关为“是”，变更通知后后续请求是否重路由为“重路由”，支持位置优选为“是”，位置匹配策略为“指定Label个数匹配”，Label个数为“2”，位置选择优先级为“位置_优先级_权重”，容灾时停止位置优选为“否”，位置匹配NF比例阈值为“50”，自主路由请求支持服务发现为“否”,支持目的NF的429/503处理为“是”，支持SCP的429/503处理为“否”，支持SEPP的429/503处理为“否”，全不可用时忽略注册状态为“否。 
ADD SBIROUTEPOLICYPF:PFID=1,PFNAME="subSDN",NEEDTOKEN="YES",INNERAUTOBACK="AUTOBACK_PRIORITY",FQDNINTARGETURI="YES",INNERDISASTERSWITCH="YES",INNERNOTIFYREROUTE="YES",PREFERLOCALITY="YES",LOCALITYMATCHPLCY="SPECIFYNUM",LABELNUM="2",LOCALITYSELPRIOR="LOCALITY_PRIORITY_WEIGHT",DRSTOPPREFERLOCALITY="NO",LOCMATCHNFPROP="50",AUTOREQSRVDSCVR="NO",SPRTNF429503="YES",SPRTSCP429503="NO",SPRTSEPP429503="NO",IGNOREREGSTATUS="NO";
` 


### 修改路由策略模板配置(SET SBIROUTEPOLICYPF) 
### 修改路由策略模板配置(SET SBIROUTEPOLICYPF) 


[](None)功能说明 

本命令用于修改业务指定的路由策略模板。当业务网元（目前只有SMF）需要使用SBI-GW的路由功能，且已存在的路由策略不满足当前要求需要重新修改时，使用该命令。 


[](None)注意事项 

模板名称不支持修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置SBI-GW收到后续请求（非初始请求）后，根据此处配置的后续请求自动倒回方式选择合适的目的NF向其发送后续请求消息。默认为不自动倒回。该参数只有在“后续请求容灾倒换开关”配置为“是”的前提下才生效。不自动倒回：SBI-GW收到后续请求消息后，将请求消息发送给当前目的NF。自动倒回到高优先级NF：SBI-GW收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的目的NF，如果失败则继续使用当前目的NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前目的NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI（Uniform Resource Identifier，统一资源标识符）内是否优先携带FQDN（Fully Qualified Domain Name，全称域名）。默认不优先携带FQDN。否：不优先携带FQDN，携带IP地址和端口。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望使用初始请求消息锚定的NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和“后续请求自动倒回”参数配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由策略模板的名称，一个模板名称唯一识别一个路由策略模板编号。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置SBI-GW收到后续请求（非初始请求）后，根据此处配置的后续请求自动倒回方式选择合适的目的NF向其发送后续请求消息。默认为不自动倒回。该参数只有在“后续请求容灾倒换开关”配置为“是”的前提下才生效。不自动倒回：SBI-GW收到后续请求消息后，将请求消息发送给当前目的NF。自动倒回到高优先级NF：SBI-GW收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的目的NF，如果失败则继续使用当前目的NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前目的NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI（Uniform Resource Identifier，统一资源标识符）内是否优先携带FQDN（Fully Qualified Domain Name，全称域名）。默认不优先携带FQDN。对于SCP C/D模式，SEPP的targetapiroot模式中的request URI，使用SCP/SEPP路由集配置中的SCP/SEPP URI是否携带FQDN配置。否：不优先携带FQDN，携带IP地址和端口。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望使用初始请求消息锚定的NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和“后续请求自动倒回”参数配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
修改路由策略模板配置，模板编号为1，是否需要令牌为“否”，后续请求自动倒回为“自动倒回到初始锚定NF”，目标URI内是否优先携带FQDN为“否”，后续请求容灾倒换开关为“是”，变更通知后后续请求是否重路由为“重路由”，支持位置优选为“是”，位置匹配策略为“指定Label个数匹配”，Label个数为“2”，位置选择优先级为“位置_优先级_权重”，容灾时停止位置优选为“否”，位置匹配NF比例阈值为“50”，自主路由请求支持服务发现为“否”。
SET SBIROUTEPOLICYPF:PFID=1,NEEDTOKEN="NO",INNERAUTOBACK="AUTOBACK_INITANCHOR",FQDNINTARGETURI="NO",INNERDISASTERSWITCH="YES",INNERNOTIFYREROUTE="YES",PREFERLOCALITY="YES",LOCALITYMATCHPLCY="SPECIFYNUM",LABELNUM="2",LOCALITYSELPRIOR="LOCALITY_PRIORITY_WEIGHT",DRSTOPPREFERLOCALITY="NO",LOCMATCHNFPROP="50",AUTOREQSRVDSCVR="NO";
` 


### 删除路由策略模板配置(DEL SBIROUTEPOLICYPF) 
### 删除路由策略模板配置(DEL SBIROUTEPOLICYPF) 


[](None)功能说明 

本命令用于删除业务指定的路由策略模板。当业务网元（目前只有SMF）不再需要使用某个路由策略时，可使用该命令删除相应的路由策略。 


[](None)注意事项 

当前正在被业务使用的路由策略模板不允许删除，强制删除会导致路由失败。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由策略模板的名称，一个模板名称唯一识别一个路由策略模板编号。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置SBI-GW收到后续请求（非初始请求）后，根据此处配置的后续请求自动倒回方式选择合适的目的NF向其发送后续请求消息。默认为不自动倒回。该参数只有在“后续请求容灾倒换开关”配置为“是”的前提下才生效。不自动倒回：SBI-GW收到后续请求消息后，将请求消息发送给当前目的NF。自动倒回到高优先级NF：SBI-GW收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的目的NF，如果失败则继续使用当前目的NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前目的NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI（Uniform Resource Identifier，统一资源标识符）内是否优先携带FQDN（Fully Qualified Domain Name，全称域名）。默认不优先携带FQDN。对于SCP C/D模式，SEPP的targetapiroot模式中的request URI，使用SCP/SEPP路由集配置中的SCP/SEPP URI是否携带FQDN配置。否：不优先携带FQDN，携带IP地址和端口。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望使用初始请求消息锚定的NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和“后续请求自动倒回”参数配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
删除路由策略模板配置，模板编号为1。
DEL SBIROUTEPOLICYPF:PFID=1;
` 


### 查询路由策略模板配置(SHOW SBIROUTEPOLICYPF) 
### 查询路由策略模板配置(SHOW SBIROUTEPOLICYPF) 


[](None)功能说明 

本命令用于查询业务指定的路由策略模板。当业务网元（目前只有SMF）需要查询已经存在的定制路由策略模板时，使用该命令。 


[](None)注意事项 

如需要查询全部路由策略模板信息，则不需要输入任何参数。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由策略模板的名称，一个模板名称唯一识别一个路由策略模板编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由策略模板编号，用于唯一标识一条路由策略模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由策略模板的名称，一个模板名称唯一识别一个路由策略模板编号。
NEEDTOKEN|是否需要令牌|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置是否需要令牌。默认不需要。否：不需要令牌。向目的NF发送请求消息时，不进行鉴权处理。是：需要令牌。向目的NF发送请求消息时，进行鉴权处理。
INNERAUTOBACK|后续请求自动倒回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: NO_AUTOBACK|该参数用于设置SBI-GW收到后续请求（非初始请求）后，根据此处配置的后续请求自动倒回方式选择合适的目的NF向其发送后续请求消息。默认为不自动倒回。该参数只有在“后续请求容灾倒换开关”配置为“是”的前提下才生效。不自动倒回：SBI-GW收到后续请求消息后，将请求消息发送给当前目的NF。自动倒回到高优先级NF：SBI-GW收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的目的NF，如果失败则继续使用当前目的NF。自动倒回到初始锚定NF：收到后续请求时，如果当前路由信息中携带的NF不是初始锚定的NF，且路由集中初始锚定NF可用，则倒回到初始请求时选择的NF，如果失败则继续使用当前目的NF。自动倒回高优先级优选初始锚定NF：收到后续请求时，从路由集中选择比当前路由信息中携带的NF优先级更高且最高的可用的NF，如果选择结果中存在初始锚定NF，则优选初始锚定NF；如果失败则继续使用当前目的NF。
FQDNINTARGETURI|目标URI内是否优先携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置目标URI（Uniform Resource Identifier，统一资源标识符）内是否优先携带FQDN（Fully Qualified Domain Name，全称域名）。默认不优先携带FQDN。对于SCP C/D模式，SEPP的targetapiroot模式中的request URI，使用SCP/SEPP路由集配置中的SCP/SEPP URI是否携带FQDN配置。否：不优先携带FQDN，携带IP地址和端口。是：优先携带FQDN，如果没有FQDN则携带IP地址和端口。
INNERDISASTERSWITCH|后续请求容灾倒换开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置后续请求（非初始请求）是否支持容灾倒换的开关。默认支持。否：不支持后续请求容灾倒换，只能在初始请求锚定NF内进行重选。当业务希望使用初始请求消息锚定的NF后，后续请求消息都发送到该NF，则配置为否。是：支持后续请求容灾倒换，和“后续请求自动倒回”参数配置配合使用。业务不关心后续请求消息发送到哪个NF，只要求消息可以正常发送，则配置为是。
INNERNOTIFYREROUTE|变更通知后后续请求是否重路由|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: YES|该参数用于设置在NRF通知SBI-GW订阅的NF变更后，SBI-GW在收到后续请求（非初始请求）时的重路由方式。默认为重路由。不重路由：SBI-GW在收到变更通知后，后续请求消息不重新进行路由选择处理。重路由：SBI-GW在收到变更通知后，后续请求消息重新进行路由选择处理。锚定NF注册状态不可用时重路由：SBI-GW在收到变更通知后，仅在当前锚定目的NF的注册状态不可用时，后续请求消息重新进行路由选择处理。对于注册状态不可用判断: 1、status为SUSPENDED 、UNREGISTERED，则状态不可用 2、NF的status或者当前访问的NFS status任一不可用，则认为路由选择时NF注册状态不可用。
PREFERLOCALITY|支持位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在服务发现返回结果并构建完路由集后选择目的网元时，或者重选目的网元时，是否根据位置优选。默认为否。否：SBI-GW路由选择目的网元时，不根据位置优选。是：SBI-GW路由选择目的网元时，根据位置优选。
LOCALITYMATCHPLCY|位置匹配策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: LONGEST|该参数用于设置在SBI-GW路由支持位置优选时，目的网元和路由请求的位置参数之间的匹配策略。默认按Label最长匹配。 按Label最长匹配：和路由请求的位置参数相匹配的Label个数最多的目的网元优先选择。全匹配：和路由请求的位置参数完全相同的目的网元优先选择。指定Label个数匹配：和路由请求的位置参数指定数量的Label相匹配的目的网元优先选择。
LABELNUM|Label个数|参数可选性: 任选参数类型: 数字参数范围: 2-3默认值: 2|该参数用于设置在SBI-GW路由支持位置优选且位置匹配策略为指定Label个数匹配时，指定的Label个数。默认为2。
LOCALITYSELPRIOR|位置选择优先级|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: LOCALITY_PRIORITY_WEIGHT|该参数用于设置在SBI-GW路由支持位置优选时，位置参数、优先级参数和权重参数的匹配顺序。默认按位置_优先级_权重选择。 位置_优先级_权重：按照位置、优先级和权重的顺序确定目的网元。优先级_位置_权重：按照优先级、位置和权重的顺序确定目的网元。
DRSTOPPREFERLOCALITY|容灾时停止位置优选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于设置在SBI-GW路由支持位置优选时，在状态可用的网元中位置匹配的网元的比例低于指定阈值时是否停止位置优选。默认为是。 否：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时不停止位置优选。是：SBI-GW路由根据位置优选目的网元时，位置匹配的网元比例低于指定阈值时停止位置优选。
LOCMATCHNFPROP|位置匹配NF比例阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-100默认值: 50|该参数用于设置在SBI-GW路由支持位置优选且容灾时停止位置优选时，停止位置优选的比例阈值。默认为50。
AUTOREQSRVDSCVR|自主路由请求支持服务发现|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于在SBI-GW自主路由请求场景，是否支持服务发现。默认为否。
SPRTNF429503|支持目的NF的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持目的NF直接返回的429或503的响应处理。默认不支持。
SPRTSCP429503|支持SCP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SCP返回的429或503的响应处理。默认不支持。
SPRTSEPP429503|支持SEPP的429/503处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在非直连组网场景中，是否支持直连SEPP返回的429或503的响应处理。默认不支持。
IGNOREREGSTATUS|全不可用时忽略注册状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置在直连和非直连两种组网场景中，是否支持当服务发现结果中的NF都不是已注册态时忽略注册状态。默认不支持。




[](None)命令举例 


`
查询路由策略模板配置，模板编号为1，模板名称为“subSDN”。
SHOW SBIROUTEPOLICYPF:PFID=1,PFNAME="subSDN";

(No.1) : SHOW SBIROUTEPOLICYPF:
-----------------sbigw_service_17_st/CommonS_HTTP_LB_0----------------
操作维护       模板编号 模板名称 是否需要令牌 后续请求自动倒回 目标URI内是否优先携带FQDN 后续请求容灾倒换开关 变更通知后后续请求是否重路由 支持位置优选 位置匹配策略    Label个数 位置选择优先级   容灾时停止位置优选 位置匹配NF比例阈值(%) 自主路由请求支持服务发现 支持目的NF的429/503处理 支持SCP的429/503处理 支持SEPP的429/503处理 全不可用时忽略注册状态 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
复制 修改 删除 1        subSDN   是           不自动倒回       否                        是                   重路由                       否           按Label最长匹配 2         位置_优先级_权重 是                 50                    否                       是                      否                   否                    否                     
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

` 


## 重选模板配置 
## 重选模板配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）可以在路由请求出现超时等特定失败场景下能够重新选择新的局向继续发送，以增加流程成功的几率。 

该组命令用于配置失败重选模板策略，当业务在请求中指定重选模板配置时，SBI-GW可以根据指定的重选模板进行重选流程。 




[](None)功能说明 


该配置用于配置失败重选模板。 

当需要触发重选流程时，使用该配置。SBI-GW根据请求中的重选模板编号确定重选配置，进行路由重选。 




[](None)子主题： 






### 新增重选模板配置(ADD SBIRESELECTPF) 
### 新增重选模板配置(ADD SBIRESELECTPF) 


[](None)功能说明 

该命令用于新增重选模板配置。当业务需要指定重选配置时，使用该命令。新增重选模板配置成功后，业务可以指定已配置的重选模板进行路由重选。 

当业务网元发送的路由请求等待响应超时或者收到指定的重选响应码时，业务网元会根据指定模板中配置的链路重选次数、IP重选次数、NF重选次数、重选等待时长以及重选等待补充时长进行路由重选。 


[](None)注意事项 

业务指定的重选模板编号实际未配置时，会导致路由重选失败。模板名称为关键字，不可以为空。 

系统支持的该配置项最大记录数为128。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
PFNAME|模板名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置重选模板的名称，一个模板名称唯一识别一个路由重选模板编号，设置后不可修改。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置业务网元对同一个目的IP重选不同链路的次数，默认值为0，即业务网元在当前链路路由失败后，不再重新选择同一目的IP的其他链路发送消息。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一个目的NF的不同IP地址重选次数，默认值为1，即业务网元在向目的NF的当前IP地址发送消息失败后，会重新选择一个该目的NF的其他IP地址发送消息。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一路由集中不同NF的重选次数，默认值为1，即业务网元在向目的NF发送路由消息失败时，会在同一个路由集中重新选择一个NF发送消息。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选链路、IP地址或者NF的等待时长，单位秒，默认值为2。当路由请求等待响应时长超过重选等待时长时，业务网元会根据链路重选次数、IP重选次数或NF重选次数的配置值进行路由重选。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置重选模板的名称，一个模板名称唯一识别一个路由重选模板编号，设置后不可修改。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置业务网元对同一个目的IP重选不同链路的次数，默认值为0，即业务网元在当前链路路由失败后，不再重新选择同一目的IP的其他链路发送消息。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一个目的NF的不同IP地址重选次数，默认值为1，即业务网元在向目的NF的当前IP地址发送消息失败后，会重新选择一个该目的NF的其他IP地址发送消息。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一路由集中不同NF的重选次数，默认值为1，即业务网元在向目的NF发送路由消息失败时，会在同一个路由集中重新选择一个NF发送消息。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选链路、IP地址或者NF的等待时长，单位秒，默认值为2。当路由请求等待响应时长超过重选等待时长时，业务网元会根据链路重选次数、IP重选次数或NF重选次数的配置值进行路由重选。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
新增重选模板配置，模板编号为1，模板名称为“reselect1”，链路重选次数为“0”，IP重选次数“1”，NF重选次数为“1”，重选等待时长为“2”秒，重选等待补充时长为“100”毫秒。
ADD SBIRESELECTPF:PFID=1,PFNAME="reselect1",LINKRESELTIMES=0,IPRESELECTIMES=1,NFRESELECTIMES=1,RESELECTTIME=2,SUPPLRESELECTIME=100
` 


### 修改重选模板配置(SET SBIRESELECTPF) 
### 修改重选模板配置(SET SBIRESELECTPF) 


[](None)功能说明 

该命令用于修改重选模板配置。当需要修改重选模板编号对应的重选次数或者重选等待时长等参数时使用该命令。修改重选配置模板成功后，一旦路由响应超时，则会根据新的配置进行路由重选。 


[](None)注意事项 

模板名称为关键字，不可以修改，不可以为空。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置业务网元对同一个目的IP重选不同链路的次数，默认值为0，即业务网元在当前链路路由失败后，不再重新选择同一目的IP的其他链路发送消息。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一个目的NF的不同IP地址重选次数，默认值为1，即业务网元在向目的NF的当前IP地址发送消息失败后，会重新选择一个该目的NF的其他IP地址发送消息。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一路由集中不同NF的重选次数，默认值为1，即业务网元在向目的NF发送路由消息失败时，会在同一个路由集中重新选择一个NF发送消息。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选链路、IP地址或者NF的等待时长，单位秒，默认值为2。当路由请求等待响应时长超过重选等待时长时，业务网元会根据链路重选次数、IP重选次数或NF重选次数的配置值进行路由重选。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置重选模板的名称，一个模板名称唯一识别一个路由重选模板编号，设置后不可修改。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置业务网元对同一个目的IP重选不同链路的次数，默认值为0，即业务网元在当前链路路由失败后，不再重新选择同一目的IP的其他链路发送消息。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一个目的NF的不同IP地址重选次数，默认值为1，即业务网元在向目的NF的当前IP地址发送消息失败后，会重新选择一个该目的NF的其他IP地址发送消息。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一路由集中不同NF的重选次数，默认值为1，即业务网元在向目的NF发送路由消息失败时，会在同一个路由集中重新选择一个NF发送消息。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选链路、IP地址或者NF的等待时长，单位秒，默认值为2。当路由请求等待响应时长超过重选等待时长时，业务网元会根据链路重选次数、IP重选次数或NF重选次数的配置值进行路由重选。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
修改重选模板配置，模板编号为“1”，链路重选次数修改为“1”。
SET SBIRESELECTPF:PFID=1,LINKRESELTIMES=1
` 


### 删除重选模板配置(DEL SBIRESELECTPF) 
### 删除重选模板配置(DEL SBIRESELECTPF) 


[](None)功能说明 

该命令用于删除重选模板配置。当重选模板不再被业务使用时，可使用该命令删除重选模板。 


[](None)注意事项 

正在被业务使用的重选模板不允许删除，强制删除会导致路由重选失败。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置重选模板的名称，一个模板名称唯一识别一个路由重选模板编号，设置后不可修改。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置业务网元对同一个目的IP重选不同链路的次数，默认值为0，即业务网元在当前链路路由失败后，不再重新选择同一目的IP的其他链路发送消息。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一个目的NF的不同IP地址重选次数，默认值为1，即业务网元在向目的NF的当前IP地址发送消息失败后，会重新选择一个该目的NF的其他IP地址发送消息。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一路由集中不同NF的重选次数，默认值为1，即业务网元在向目的NF发送路由消息失败时，会在同一个路由集中重新选择一个NF发送消息。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选链路、IP地址或者NF的等待时长，单位秒，默认值为2。当路由请求等待响应时长超过重选等待时长时，业务网元会根据链路重选次数、IP重选次数或NF重选次数的配置值进行路由重选。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
删除重选模板配置，模板编号为“1”。
DEL SBIRESELECTPF:PFID=1
` 


### 查询重选模板配置(SHOW SBIRESELECTPF) 
### 查询重选模板配置(SHOW SBIRESELECTPF) 


[](None)功能说明 

该命令用于查询重选模板配置信息，包括模板编号、模板名称、链路重选次数、IP重选次数、NF重选次数、重选等待时长以及重选等待补充时长。 


[](None)注意事项 

如需要查询全部重选配置信息，则不需要输入任何参数。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置重选模板的名称，一个模板名称唯一识别一个路由重选模板编号，设置后不可修改。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置重选模板的标识，该参数全局唯一，标识一条路由重选模板配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置重选模板的名称，一个模板名称唯一识别一个路由重选模板编号，设置后不可修改。
LINKRESELTIMES|链路重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 0|该参数用于设置业务网元对同一个目的IP重选不同链路的次数，默认值为0，即业务网元在当前链路路由失败后，不再重新选择同一目的IP的其他链路发送消息。
IPRESELECTIMES|IP重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一个目的NF的不同IP地址重选次数，默认值为1，即业务网元在向目的NF的当前IP地址发送消息失败后，会重新选择一个该目的NF的其他IP地址发送消息。
NFRESELECTIMES|NF重选次数|参数可选性: 任选参数类型: 数字参数范围: 0-10默认值: 1|该参数用于设置业务网元对同一路由集中不同NF的重选次数，默认值为1，即业务网元在向目的NF发送路由消息失败时，会在同一个路由集中重新选择一个NF发送消息。
RESELECTTIME|重选等待时长(秒)|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 2|该参数用于设置重选链路、IP地址或者NF的等待时长，单位秒，默认值为2。当路由请求等待响应时长超过重选等待时长时，业务网元会根据链路重选次数、IP重选次数或NF重选次数的配置值进行路由重选。
SUPPLRESELECTIME|重选等待补充时长(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-900默认值: 0|该参数用于设置重选等待补充时长，单位为毫秒。重选等待时长加上重选等待补充时长得到重选时长。重选等待补充时长限定其取值只能为0或100~900之间的整百数，例如100、200、900。SBIGW等响应超时进行重选时，实际的重选时长是以下两个配置时长中时间短的为准，两个配置时长分别为：客户端模板配置中的等待响应超时定时器时长和本配置的重选时长总和。




[](None)命令举例 


`
查询重选模板配置。
SHOW SBIRESELECTPF

(No.2) : SHOW SBIRESELECTPF:
-----------------CommonS_HTTP_LB_0----------------
操作维护       模板编号 模板名称 链路重选次数 IP重选次数 NF重选次数 重选等待时长(秒) 重选等待补充时长(毫秒)
------------------------------------------------------------------------------------------------------
复制 修改 删除 1        123      0            1          1          2                  100
------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-04-21 16:33:51 耗时: 1.145 秒

` 


## 重选状态码模板配置 
## 重选状态码模板配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）在外发请求时出现超时等特定失败场景下能够重新选择新的局向继续发送，以增加流程成功的几率。 

默认情况下，只有在请求超时的场景下才会进行重选。当业务在请求中指定重选状态码模板配置时，可以通过该配置使得某些失败状态码的出现也会触发失败重选流程。 




[](None)功能说明 


当业务指定重选状态码模板编号时，可通过该配置设置触发重选流程的失败状态码。 

重选状态码模板配置包括状态码模板编号配置和状态码模板参数配置。 




[](None)子主题： 






### 状态码模板编号配置 
### 状态码模板编号配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）在外发请求时出现超时等特定失败场景下能够重新选择新的局向继续发送，以增加流程成功的几率。 

默认情况下，只有在请求超时的场景下才会进行重选。当业务的请求中指定重选状态码模板配置时，可以通过该配置使得某些失败状态码的出现也会触发失败重选流程。 




[](None)功能说明 


当业务指定重选状态码模板编号时，需要先使用该配置设置状态码模板编号，以提供给状态模板参数配置引用。 




[](None)子主题： 






#### 新增状态码模板编号配置(ADD SBISTATUSCODEPFID) 
#### 新增状态码模板编号配置(ADD SBISTATUSCODEPFID) 


[](None)功能说明 

该命令用于新增状态码模板编号。当业务网元需要由HTTP状态码触发重选局向流程，且需要指定重选状态码模板配置时，使用该命令。 

为便于在状态码模板参数配置中配置一组重选状态码，需要先提供指定的模板编号，以及唯一对应的模板名称。 


[](None)注意事项 

当需要执行新增状态码模板参数配置[ADD SBISTATUSCODEPFPARAM](../mml/1223012.html)命令时，需要先使用该命令，新增状态码模板编号。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置状态码模板编号，该参数全局唯一，标识一条HTTP重选状态码配置信息。
PFNAME|模板名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置状态码模板名称，一个模板名称唯一识别一个状态码模板编号，设置后不可修改。




[](None)命令举例 


`
新增状态码模板编号配置：模板编号为“1”，模板名称为“profile1”。
ADD SBISTATUSCODEPFID:PFID=1,PFNAME="profile1"
` 


#### 删除状态码模板编号配置(DEL SBISTATUSCODEPFID) 
#### 删除状态码模板编号配置(DEL SBISTATUSCODEPFID) 


[](None)功能说明 

该命令用于删除状态码模板编号。当业务不再需要状态码模板编号时，使用该命令。 


[](None)注意事项 

当状态码模板编号被状态码模板参数配置引用时，必须先执行[DEL SBISTATUSCODEPFPARAM](../mml/1223014.html)命令解除状态码模板编号在状态码模板参数中的引用，才能删除相应的状态码模板编号。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置状态码模板编号，该参数全局唯一，标识一条HTTP重选状态码配置信息。




[](None)命令举例 


`
删除状态码模板编号配置：模板编号为“1”。
DEL SBISTATUSCODEPFID:PFID=1
` 


#### 查询状态码模板编号配置(SHOW SBISTATUSCODEPFID) 
#### 查询状态码模板编号配置(SHOW SBISTATUSCODEPFID) 


[](None)功能说明 

该命令用于查询状态码模板编号。当需要查询状态码模板编号及对应的模板名称时，使用该命令。 


[](None)注意事项 

如需要查询全部状态码模板编号信息，则不需要输入任何参数。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置状态码模板编号，该参数全局唯一，标识一条HTTP重选状态码配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置状态码模板名称，一个模板名称唯一识别一个状态码模板编号，设置后不可修改。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置状态码模板编号，该参数全局唯一，标识一条HTTP重选状态码配置信息。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置状态码模板名称，一个模板名称唯一识别一个状态码模板编号，设置后不可修改。




[](None)命令举例 


`
查询状态码模板编号配置。
SHOW SBISTATUSCODEPFID

(No.25) : SHOW SBISTATUSCODEPFID
-----------------CommonS_HTTP_LB_0----------------
操作维护       模板编号 模板名称 
---------------------------------
复制 删除      1        profile1 
---------------------------------
记录数：1
执行成功开始时间:2021-04-21 13:51:04 耗时: 0.575 秒

` 


### 状态码模板参数配置 
### 状态码模板参数配置 


[](None)背景知识 


SBI-GW（Service Based Interface-GateWay，基于服务化接口的代理网关）在外发请求时出现超时等特定失败场景下能够重新选择新的局向继续发送，以增加流程成功的几率。 

默认情况下，只有在请求超时的场景下才会进行重选。当业务的请求中指定重选状态码模板配置时，可以通过该配置使得某些失败状态码的出现也会触发失败重选流程。 




[](None)功能说明 


当业务指定重选状态码模板编号，且需要某些状态码能够触发失败重选流程时，使用该配置。 

该配置用于指定能够触发失败路由重选的状态码，当业务网元向目的NF发送消息失败，且目的NF返回的状态码与配置的状态码一致时，触发路由重选。 




[](None)子主题： 






#### 新增状态码模板参数配置(ADD SBISTATUSCODEPFPARAM) 
#### 新增状态码模板参数配置(ADD SBISTATUSCODEPFPARAM) 


[](None)功能说明 

该命令用于新增状态码模板参数配置。当业务网元需要由HTTP状态码触发重选局向流程，且需要指定重选状态码模板配置时，使用该命令。 

新增状态码模板参数配置成功后，由业务网元指定重选状态码模板编号。若本网元向目的NF发送消息失败，则通过判断返回的失败响应状态码与配置的重选状态码是否一致，来决定是否进行路由重选。 


[](None)注意事项 

该命令引用了状态码模板编号配置中的参数“模板编号”，所以需要先执行[ADD SBISTATUSCODEPFID](../mml/1223008.html)命令新增状态码模板编号配置。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数引用已配置的状态码模板编号，通过执行SHOW SBISTATUSCODEPFID命令查询。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置触发路由重选的HTTP状态码。若业务指定重选模板编号，并通过本网元向目的NF发送消息失败，则本网元通过判断目的NF回的状态码与重选模板编号关联的状态码是否一致，来决定是否进行路由重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。




[](None)命令举例 


`
新增状态码模板参数配置：模板编号为1，重选状态码为408，是否重选为“是”。
ADD SBISTATUSCODEPFPARAM:PFID=1,STATUSCODE=408,RESELECT=RESELECT
` 


#### 删除状态码模板参数配置(DEL SBISTATUSCODEPFPARAM) 
#### 删除状态码模板参数配置(DEL SBISTATUSCODEPFPARAM) 


[](None)功能说明 

该命令用于删除状态码模板参数配置。当业务不再需要重选状态码模板时，执行该命令删除。 


[](None)注意事项 

当同一个状态码模板编号的所有状态码模板参数配置都已被删除时，业务不可在请求中指定该状态码模板配置，否则将导致状态码重选流程失败。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数引用已配置的状态码模板编号，通过执行SHOW SBISTATUSCODEPFID命令查询。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置触发路由重选的HTTP状态码。若业务指定重选模板编号，并通过本网元向目的NF发送消息失败，则本网元通过判断目的NF回的状态码与重选模板编号关联的状态码是否一致，来决定是否进行路由重选。




[](None)命令举例 


`
删除状态码模板参数配置：模板编号为1，重选状态码为408。
DEL SBISTATUSCODEPFPARAM:PFID=1,STATUSCODE=408
` 


#### 查询状态码模板参数配置(SHOW SBISTATUSCODEPFPARAM) 
#### 查询状态码模板参数配置(SHOW SBISTATUSCODEPFPARAM) 


[](None)功能说明 

该命令用于查询状态码模板参数配置，包括模板编号和重选状态码。当需要查询状态码模板参数配置信息时，使用该命令。 


[](None)注意事项 

如需要查询全部状态码模板参数信息，则不需要输入任何参数。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数引用已配置的状态码模板编号，通过执行SHOW SBISTATUSCODEPFID命令查询。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置触发路由重选的HTTP状态码。若业务指定重选模板编号，并通过本网元向目的NF发送消息失败，则本网元通过判断目的NF回的状态码与重选模板编号关联的状态码是否一致，来决定是否进行路由重选。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数引用已配置的状态码模板编号，通过执行SHOW SBISTATUSCODEPFID命令查询。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置触发路由重选的HTTP状态码。若业务指定重选模板编号，并通过本网元向目的NF发送消息失败，则本网元通过判断目的NF回的状态码与重选模板编号关联的状态码是否一致，来决定是否进行路由重选。
RESELECT|是否重选|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: RESELECT|该参数用于设置是否重选。




[](None)命令举例 


`
查询状态码模板参数配置：模板编号为2。
SHOW SBISTATUSCODEPFPARAM:PFID=2

(No.1) : SHOW SBISTATUSCODEPFPARAM:PFID=2
-----------------CommonS_HTTP_LB_0----------------
操作维护       模板编号 状态码 是否重选
----------------------------------------
复制 删除      2        400    是
----------------------------------------
记录数：1
执行成功开始时间:2021-04-21 14:11:29 耗时: 1.493 秒

` 


## 服务发现方式模板配置 
## 服务发现方式模板配置 


[](None)背景知识 


服务发现方式有多种，包括动态发现、静态发现、IPv4优先、IPv6优先等，该配置可对不同的NRF模板定制不同的服务发现方式。 




[](None)功能说明 


该配置可对不同的NRF模板定制不同的服务发现方式。 

当需要由业务指定NF发现方式时，使用该配置。配置成功后，SBI-GW根据业务消息携带的discoveryModeProfileId（服务方式模板标识）获取对应模板的服务发现方式，再进行后续的服务发现流程。如果不配置服务发现方式模板，则业务无法选择NF发现方式，SBI-GW会根据目标NF类型，通过服务发现方式配置去获取发现方式。 




[](None)子主题： 






### 新增服务发现方式模板配置(ADD SBISRVDISCOVERYMODEPROFILE) 
### 新增服务发现方式模板配置(ADD SBISRVDISCOVERYMODEPROFILE) 


[](None)功能说明 

该命令用于新增服务发现方式模板配置。当需要由业务指定服务发现的方式时，使用该命令。命令执行成功后，SBI-GW根据业务消息携带的discoveryModeProfileId（服务方式模板标识）获取对应模板的服务发现方式，再进行后续的服务发现流程。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
PFNAME|模板名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置服务发现方式模板的名称，一个模板名称唯一识别一个服务发现方式模板编号，设置后不可修改。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DISCOVERY_MODE_DYNAMIC_ONLY|该参数用于设置服务发现方式模板的服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI GW收到对端NRF的成功响应，但发现结果中所有NF注册态均不可用。外部失败响应(非404)：SBI GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: IPSELECT_MODE_RANDOM|该参数用于设置服务发现方式模板的地址选择方式。随机：SBI-GW在选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：SBI-GW在选择目的NF时，优先选择IPv4地址的NF。IPv6优先：SBI-GW在选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置服务发现方式模板的HTTP默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置服务发现方式模板的HTTPS默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置服务发现方式模板的名称，一个模板名称唯一识别一个服务发现方式模板编号，设置后不可修改。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DISCOVERY_MODE_DYNAMIC_ONLY|该参数用于设置服务发现方式模板的服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI GW收到对端NRF的成功响应，但发现结果中所有NF注册态均不可用。外部失败响应(非404)：SBI GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: IPSELECT_MODE_RANDOM|该参数用于设置服务发现方式模板的地址选择方式，默认为随机。随机：SBI-GW在选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：SBI-GW在选择目的NF时，优先选择IPv4地址的NF。IPv6优先：SBI-GW在选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置服务发现方式模板的HTTP默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置服务发现方式模板的HTTPS默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。




[](None)命令举例 


`
新增服务发现方式模板配置：模板标识为1，模板名称为“aaa”, 发现方式为“静态”，服务发现动转静场景配置为空，地址选择方式为“IPV4”，http默认端口为800，默认https端口为520。
ADD SBISRVDISCOVERYMODEPROFILE:PFID=1,PFNAME="aaa",DISCOVERYMODE="DISCOVERY_MODE_STATIC_ONLY",D2SSCENES="NULL",IPSELECTMODE="IPSELECT_MODE_IPV4_FIRST",DEFAULTPORTFORHTTP=800,DEFAULTPORTFORHTTPS=520;
` 


### 修改服务发现方式模板配置(SET SBISRVDISCOVERYMODEPROFILE) 
### 修改服务发现方式模板配置(SET SBISRVDISCOVERYMODEPROFILE) 


[](None)功能说明 

该命令用于修改服务发现方式模板配置。当指定模板标识的发现方式发生变化时，使用该命令。该命令执行成功后，SBI-GW根据修改后的配置进行服务发现。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DISCOVERY_MODE_DYNAMIC_ONLY|该参数用于设置服务发现方式模板的服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI GW收到对端NRF的成功响应，但发现结果中所有NF注册态均不可用。外部失败响应(非404)：SBI GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: IPSELECT_MODE_RANDOM|该参数用于设置服务发现方式模板的地址选择方式。随机：SBI-GW在选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：SBI-GW在选择目的NF时，优先选择IPv4地址的NF。IPv6优先：SBI-GW在选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置服务发现方式模板的HTTP默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置服务发现方式模板的HTTPS默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置服务发现方式模板的名称，一个模板名称唯一识别一个服务发现方式模板编号，设置后不可修改。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DISCOVERY_MODE_DYNAMIC_ONLY|该参数用于设置服务发现方式模板的服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI GW收到对端NRF的成功响应，但发现结果中所有NF注册态均不可用。外部失败响应(非404)：SBI GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: IPSELECT_MODE_RANDOM|该参数用于设置服务发现方式模板的地址选择方式，默认为随机。随机：SBI-GW在选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：SBI-GW在选择目的NF时，优先选择IPv4地址的NF。IPv6优先：SBI-GW在选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置服务发现方式模板的HTTP默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置服务发现方式模板的HTTPS默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。




[](None)命令举例 


`
修改服务发现方式模板配置：模板标识为1，发现方式为“动态”，地址选择方式为“随机”，http默认端口为90，默认https端口为580。
SET SBISRVDISCOVERYMODEPROFILE:PFID=1,DISCOVERYMODE="DISCOVERY_MODE_DYNAMIC_ONLY",IPSELECTMODE="IPSELECT_MODE_RANDOM",DEFAULTPORTFORHTTP=90,DEFAULTPORTFORHTTPS=580;
` 


### 删除服务发现方式模板配置(DEL SBISRVDISCOVERYMODEPROFILE) 
### 删除服务发现方式模板配置(DEL SBISRVDISCOVERYMODEPROFILE) 


[](None)功能说明 

该命令用于删除服务发现方式模板配置。当业务不需要指定服务发现方式时，使用该命令。该命令执行成功后，业务无法再通过这个模板的配置来指定发现方式。SBI-GW会根据目标NF类型，通过服务发现方式配置去获取发现方式，可通过[SHOW SBISRVDISCOVERYMODE](../mml/1220538.html)命令查询。


[](None)注意事项 

删除模板配置后，业务无法再通过这个模板的配置来指定服务发现方式。 

当业务未指定服务发现方式模板标识，或者服务发现方式模板没有配置时，SBI-GW会根据目标NF类型，通过服务发现方式配置去获取发现方式。若仍未获取到，默认为动态发现。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置服务发现方式模板的名称，一个模板名称唯一识别一个服务发现方式模板编号，设置后不可修改。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DISCOVERY_MODE_DYNAMIC_ONLY|该参数用于设置服务发现方式模板的服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI GW收到对端NRF的成功响应，但发现结果中所有NF注册态均不可用。外部失败响应(非404)：SBI GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: IPSELECT_MODE_RANDOM|该参数用于设置服务发现方式模板的地址选择方式，默认为随机。随机：SBI-GW在选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：SBI-GW在选择目的NF时，优先选择IPv4地址的NF。IPv6优先：SBI-GW在选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置服务发现方式模板的HTTP默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置服务发现方式模板的HTTPS默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。




[](None)命令举例 


`
删除服务发现方式模板配置：模板标识为1。
DEL SBISRVDISCOVERYMODEPROFILE:PFID=1;
` 


### 查询服务发现方式模板配置(SHOW SBISRVDISCOVERYMODEPROFILE) 
### 查询服务发现方式模板配置(SHOW SBISRVDISCOVERYMODEPROFILE) 


[](None)功能说明 

该命令用于查询服务发现方式模板配置，包括模板标识、模板名称、发现方式、地址选择方式、http默认端口、https默认端口信息。当需要查询服务发现方式模板配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部服务发现方式模板配置信息，则不需要输入任何参数。 

 
如需要查询指定模板标识的服务发现方式模板配置信息，则需要输入模板标识。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置服务发现方式模板的名称，一个模板名称唯一识别一个服务发现方式模板编号，设置后不可修改。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PFID|模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务发现方式模板的标识，该参数全局唯一。
PFNAME|模板名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置服务发现方式模板的名称，一个模板名称唯一识别一个服务发现方式模板编号，设置后不可修改。
DISCOVERYMODE|发现方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DISCOVERY_MODE_DYNAMIC_ONLY|该参数用于设置服务发现方式模板的服务发现方式，默认为动态。动态：SBI-GW首先在动态cache中查找目标NF，若查找不到，则向NRFServer查询。静态：SBI-GW在本地配置的NRF中查找目标NF。动态优先：SBI-GW优先进行动态匹配，如果动态匹配失败且符合配置的服务发现动转静场景，则转静态匹配。
D2SSCENES|服务发现动转静场景|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: NRFUNAVAILABLE_AND_NO_CACHE&404_FOR_DYNAMIC&NO_NF_IN_DYNAMIC_RESULT&TIMEOUT_FOR_DYNAMIC|该参数用于在“服务发现方式”参数配置为“动态优先”时，在以下动态发现响应场景中，可由动态发现转为静态发现。注意：如果该参数的值全部都不勾选，即默认配置为缺省值；如果该参数值为NULL，即表示所有场景下都不支持动态转静态发现。NRF不可用且本地无对应cache：本地无对应服务的缓存，且对端NRF主备均不可用。动态发现结果为404：SBI GW收到对端NRF的服务发现失败响应码为404。动态发现结果中无NF：SBI GW收到对端NRF的成功响应，但发现结果中无NF。动态发现超时：等服务发现响应超时。动态发现结果中NF注册态均不可用：SBI GW收到对端NRF的成功响应，但发现结果中所有NF注册态均不可用。外部失败响应(非404)：SBI GW收到对端NRF的服务发现失败响应，且响应码为非404。其他失败：动态发现时的内部失败场景。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: IPSELECT_MODE_RANDOM|该参数用于设置服务发现方式模板的地址选择方式，默认为随机。随机：SBI-GW在选择目的NF时，随机选择IPv4地址或IPv6地址的NF。IPv4优先：SBI-GW在选择目的NF时，优先选择IPv4地址的NF。IPv6优先：SBI-GW在选择目的NF时，优先选择IPv6地址的NF。
DEFAULTPORTFORHTTP|http默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 80|该参数用于设置服务发现方式模板的HTTP默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。
DEFAULTPORTFORHTTPS|https默认端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 443|该参数用于设置服务发现方式模板的HTTPS默认端口。当业务发现消息携带的needIpEndPoints为true，但服务发现的响应结果未携带地址信息，同时服务发现配置又引用了DNS模板号（可通过SHOW SBISRVDISCOVERY命令查看），此时SBI-GW会向DNS进行查询，查询结果只会返回IP地址，而远端端口则由该参数决定，随后SBI-GW可以向对应的地址端口发消息访问服务。使用HTTP端口或是HTTPS端口由发现响应中的scheme决定。




[](None)命令举例 


`
查询服务发现方式模板配置：模板标识为1
SHOW SBISRVDISCOVERYMODEPROFILE:PFID=1

(No.1) :SHOW SBISRVDISCOVERYMODEPROFILE:PFID=1
-----------------CommonS_HTTP_LB_0----------------
操作维护       模板标识 模板名称 发现方式 服务发现动转静场景                                                                 地址选择方式 http默认端口 https默认端口 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
复制 修改 删除 1        1        动态     NRF不可用且本地无对应cache & 动态发现结果为404 & 动态发现结果中无NF & 动态发现超时 随机         80           443           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

执行成功耗时: 0.162 秒

` 


# SCP/SEPP配置管理 
# SCP/SEPP配置管理 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自的业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SEPP（Security Edge Protection Proxy）安全边缘保护代理，是一个非透明代理，部署在PLMN边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，SEPP充当实际服务提供者和实际服务使用者之间的服务中继。 




[](None)功能说明 


SCP/SEPP配置目录包含了SCP和SEPP功能所需要的所有配置，包括路由集相关的配置、SCP配置、异网漫游配置。当业务需要使用SCP或SEPP进行消息转发时，需要配置该组命令。如果不配置SCP配置或SEPP配置目录下的命令，则SCP或SEPP功能无法生效。 




[](None)子主题： 






## 路由集配置 
## 路由集配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自的业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SEPP（Security Edge Protection Proxy）安全边缘保护代理，是一个非透明代理，部署在PLMN边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，SEPP充当实际服务提供者和实际服务使用者之间的服务中继。 

SBI-GW新增SCP/SEPP路由集相关配置，在收到请求后，根据实际场景需要将请求发送到SCP或通过SEPP转接。一个SCP/SEPP路由集最多包含四个SCP/SEPP服务器，一个SCP/SEPP服务器最多包含八个SCP/SEPP节点。 




[](None)功能说明 


该配置用于配置SCP/SEPP路由集编号、路由集名和SCP C模式下是否携带发现头部。 

当业务需要使用SCP或SEPP进行消息转发时，使用该配置。 




[](None)子主题： 






### 新增路由集配置(ADD SBISCPROUTESET) 
### 新增路由集配置(ADD SBISCPROUTESET) 


[](None)功能说明 

该命令用于新增SCP/SEPP路由集配置。当本网元需要和对端网元使用SCP/SEPP进行间接通讯时，使用该命令。命令执行成功后，在SCP/SEPP模式下可以引用该路由集。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。
ADDDISCOVERY|C模式下携带发现头部|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OPTION_NO|该参数用于设置C模式下是否携带服务发现头部。默认不携带。否：C模式下不携带发现头部。是：C模式下携带发现头部，将服务发现参数转为3gpp-Sbi-Discovery-*头部。
FQDNINSCPSEPPURI|SCP/SEPP URI是否携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: FQDN_NO|该参数用于设置SCP C模式、D模式和SEPP targetapiroot模式的请求uri是否携带FQDN。默认不携带。否：不携带FQDN，携带IP地址和端口。是：携带FQDN。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。
ADDDISCOVERY|C模式下携带发现头部|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OPTION_NO|该参数用于设置C模式下是否携带服务发现头部。默认不携带。否：C模式下不携带发现头部。是：C模式下携带发现头部，将服务发现参数转为3gpp-Sbi-Discovery-*头部。
FQDNINSCPSEPPURI|SCP/SEPP URI是否携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: FQDN_NO|该参数用于设置SCP C模式、D模式和SEPP targetapiroot模式的请求uri是否携带FQDN。默认不携带。否：不携带FQDN，携带IP地址和端口。是：携带FQDN。




[](None)命令举例 


`
新增路由集配置：路由集ID为1，路由集名为“SCP RouteSet1”，C模式下携带发现头部为“是”，SCP/SEPP URI是否携带FQDN为否。
ADD SBISCPROUTESET:ID=1,NAME="SCP RouteSet1",ADDDISCOVERY="OPTION_YES",FQDNINSCPSEPPURI="FQDN_NO"
` 


### 修改路由集配置(SET SBISCPROUTESET) 
### 修改路由集配置(SET SBISCPROUTESET) 


[](None)功能说明 

该命令用于修改SCP/SEPP路由集配置。当需要修改路由集名称或C模式下是否携带发现头部配置时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。
ADDDISCOVERY|C模式下携带发现头部|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OPTION_NO|该参数用于设置C模式下是否携带服务发现头部。默认不携带。否：C模式下不携带发现头部。是：C模式下携带发现头部，将服务发现参数转为3gpp-Sbi-Discovery-*头部。
FQDNINSCPSEPPURI|SCP/SEPP URI是否携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: FQDN_NO|该参数用于设置SCP C模式、D模式和SEPP targetapiroot模式的请求uri是否携带FQDN。默认不携带。否：不携带FQDN，携带IP地址和端口。是：携带FQDN。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。
ADDDISCOVERY|C模式下携带发现头部|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OPTION_NO|该参数用于设置C模式下是否携带服务发现头部。默认不携带。否：C模式下不携带发现头部。是：C模式下携带发现头部，将服务发现参数转为3gpp-Sbi-Discovery-*头部。
FQDNINSCPSEPPURI|SCP/SEPP URI是否携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: FQDN_NO|该参数用于设置SCP C模式、D模式和SEPP targetapiroot模式的请求uri是否携带FQDN。默认不携带。否：不携带FQDN，携带IP地址和端口。是：携带FQDN。




[](None)命令举例 


`
修改路由集配置：路由集ID为1，C模式下携带发现头部修改为“否”。
SET SBISCPROUTESET:ID=1,ADDDISCOVERY="OPTION_NO"
` 


### 删除路由集配置(DEL SBISCPROUTESET) 
### 删除路由集配置(DEL SBISCPROUTESET) 


[](None)功能说明 

该命令用于删除SCP/SEPP路由集配置。当和对端网元通信不需要通过SCP/SEPP时，使用该命令。命令执行成功后，对应的SCP/SEPP路由集配置被删除。 


[](None)注意事项 

删除该配置之前，需要解除SCP/SEPP模式下对该路由集的引用。 

可以通过以下命令查询待删除的路由集的引用情况： 


 
SHOW SBISCPSELBYNFTYPE 

 
SHOW SBISCPSELBYIPV4RNG 

 
SHOW SBISCPSELBYIPV6RNG 

 
SHOW SBISCPSELBYFQDN 

 
SHOW SBISCPSELBYNFINSTID 

 
SHOW SBISCPDEFAULTSELECTION 

 
SHOW SBISEPPSELBYPLMN 

 
SHOW SBISEPPSELBYFQDN 

 
SHOW SBISEPPDEFAULTSELECTION 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。
ADDDISCOVERY|C模式下携带发现头部|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OPTION_NO|该参数用于设置C模式下是否携带服务发现头部。默认不携带。否：C模式下不携带发现头部。是：C模式下携带发现头部，将服务发现参数转为3gpp-Sbi-Discovery-*头部。
FQDNINSCPSEPPURI|SCP/SEPP URI是否携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: FQDN_NO|该参数用于设置SCP C模式、D模式和SEPP targetapiroot模式的请求uri是否携带FQDN。默认不携带。否：不携带FQDN，携带IP地址和端口。是：携带FQDN。




[](None)命令举例 


`
删除路由集配置：路由集ID为1。
DEL SBISCPROUTESET:ID=1
` 


### 查询路由集配置(SHOW SBISCPROUTESET) 
### 查询路由集配置(SHOW SBISCPROUTESET) 


[](None)功能说明 

该命令用于查询SCP/SEPP路由集配置。当需要查询路由集ID、路由集名和C模式下携带发现头部的配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部路由集配置信息，则不需要输入任何参数。 

 
如需要查询指定路由集ID的路由集配置信息，则需要输入路由集ID。 

 
如需要查询指定路由集名的路由集配置信息，则需要输入路由集名。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置路由集ID。
NAME|路由集名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置路由集名。
ADDDISCOVERY|C模式下携带发现头部|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OPTION_NO|该参数用于设置C模式下是否携带服务发现头部。默认不携带。否：C模式下不携带发现头部。是：C模式下携带发现头部，将服务发现参数转为3gpp-Sbi-Discovery-*头部。
FQDNINSCPSEPPURI|SCP/SEPP URI是否携带FQDN|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: FQDN_NO|该参数用于设置SCP C模式、D模式和SEPP targetapiroot模式的请求uri是否携带FQDN。默认不携带。否：不携带FQDN，携带IP地址和端口。是：携带FQDN。




[](None)命令举例 


`
查询路由集配置。
SHOW SBISCPROUTESET

(No.7) : SHOW SBISCPROUTESET:
-----------------CommonS_HTTP_LB_0----------------
操作维护       路由集ID 路由集名      C模式下携带发现头部 SCP/SEPP URI是否携带FQDN
----------------------------------------------------------------------------------
复制 修改 删除 1        SCP RouteSet1 否                  否
----------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-09-22 17:16:14 耗时: 0.551 秒

` 


## 服务器配置 
## 服务器配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SEPP（Security Edge Protection Proxy）安全边缘保护代理，是一个非透明代理，部署在PLMN边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，SEPP充当实际服务提供者和实际服务使用者之间的服务中继。 

SBI-GW新增SCP/SEPP路由集相关配置，在收到请求后，根据实际场景需要将请求发送到SCP或通过SEPP转接。一个SCP/SEPP路由集最多包含四个SCP/SEPP服务器，一个SCP/SEPP服务器最多包含八个SCP/SEPP节点。 




[](None)功能说明 


该配置用于配置SCP/SEPP服务器编号、服务器FQDN、服务器归属的路由集编号等。 

当业务需要使用SCP或SEPP进行消息转发时，使用该配置。 




[](None)子主题： 






### 新增服务器配置(ADD SBISCPSERVER) 
### 新增服务器配置(ADD SBISCPSERVER) 


[](None)功能说明 

该命令用于新增SCP/SEPP服务器配置。当需要在SCP/SEPP路由集下添加相应的服务器配置时，使用该命令。命令执行成功后，该服务器即归属于配置指定的SCP/SEPP路由集。 


[](None)注意事项 

新增服务器配置前，需要先执行新增路由集配置命令。 

引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。
PRIORITY|优先级|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 100|该参数用于设置服务器优先级，数值越小优先级越高。
WEIGHT|权重|参数可选性: 必选参数类型: 数字参数范围: 1-65535默认值: 100|该参数用于设置服务器权重，数值越大所占权重越高。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。
PRIORITY|优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 100|该参数用于设置服务器优先级，数值越小优先级越高。
WEIGHT|权重|参数可选性: 任选参数类型: 数字参数范围: 1-65535默认值: 100|该参数用于设置服务器权重，数值越大所占权重越高。




[](None)命令举例 


`
新增服务器配置：服务器ID为1，服务器FQDN为“fqdn.scp.com.cn”，归属的路由集ID为1，优先级和权重为100。
ADD SBISCPSERVER:ID=1,FQDN="fqdn.scp.com.cn",ROUTESETID=1,PRIORITY=100,WEIGHT=100
` 


### 修改服务器配置(SET SBISCPSERVER) 
### 修改服务器配置(SET SBISCPSERVER) 


[](None)功能说明 

该命令用于修改SCP/SEPP服务器配置。当需要修改服务器FQDN、优先级、权重或归属的路由集ID时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。
PRIORITY|优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 100|该参数用于设置服务器优先级，数值越小优先级越高。
WEIGHT|权重|参数可选性: 任选参数类型: 数字参数范围: 1-65535默认值: 100|该参数用于设置服务器权重，数值越大所占权重越高。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。
PRIORITY|优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 100|该参数用于设置服务器优先级，数值越小优先级越高。
WEIGHT|权重|参数可选性: 任选参数类型: 数字参数范围: 1-65535默认值: 100|该参数用于设置服务器权重，数值越大所占权重越高。




[](None)命令举例 


`
修改服务器配置：服务器ID为1，服务器FQDN修改为“fqdn.sepp.com.cn”。
SET SBISCPSERVER:ID=1,FQDN="fqdn.sepp.com.cn"
` 


### 删除服务器配置(DEL SBISCPSERVER) 
### 删除服务器配置(DEL SBISCPSERVER) 


[](None)功能说明 

该命令用于删除SCP/SEPP服务器配置。当需要删除的服务器不再被SCP/SEPP路由集引用时，使用该命令。命令执行成功后，对应的SCP/SEPP服务器配置被删除。 


[](None)注意事项 

删除该配置之前，需要修改（或删除）SCP/SEPP节点对该服务器ID的引用。可以通过[SHOW SBISCPNODE](../mml/1223033.html)命令查询当前节点信息。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。
PRIORITY|优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 100|该参数用于设置服务器优先级，数值越小优先级越高。
WEIGHT|权重|参数可选性: 任选参数类型: 数字参数范围: 1-65535默认值: 100|该参数用于设置服务器权重，数值越大所占权重越高。




[](None)命令举例 


`
删除服务器配置：服务器ID为1。
DEL SBISCPSERVER:ID=1
` 


### 查询服务器配置(SHOW SBISCPSERVER) 
### 查询服务器配置(SHOW SBISCPSERVER) 


[](None)功能说明 

该命令用于查询SCP/SEPP服务器配置。当需要查询服务器详细信息时，使用该命令。命令执行成功后，将显示服务器FQDN、优先级、权重和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部服务器配置信息，则不需要输入任何参数。 

 
如需要查询指定服务器ID的服务器配置信息，则需要输入服务器ID。 

 
如需要查询指定服务器FQDN的服务器配置信息，则需要输入服务器FQDN。 

 
如需要查询归属指定的路由集ID的服务器配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器ID。
FQDN|服务器FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置服务器FQDN。
ROUTESETID|归属路由集ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器归属的路由集ID。
PRIORITY|优先级|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 100|该参数用于设置服务器优先级，数值越小优先级越高。
WEIGHT|权重|参数可选性: 任选参数类型: 数字参数范围: 1-65535默认值: 100|该参数用于设置服务器权重，数值越大所占权重越高。




[](None)命令举例 


`
查询服务器配置。
SHOW SBISCPSERVER

(No.14) : SHOW SBISCPSERVER:
-----------------CommonS_HTTP_LB_0----------------
操作维护       服务器ID 服务器FQDN      归属路由集ID 优先级 权重 
-----------------------------------------------------------------
复制 修改 删除 1        fqdn.scp.com.cn 1            100    100  
-----------------------------------------------------------------
记录数：1
执行成功开始时间:2021-09-23 14:26:35 耗时: 0.845 秒

` 


## 节点配置 
## 节点配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SEPP（Security Edge Protection Proxy）安全边缘保护代理，是一个非透明代理，部署在PLMN边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，SEPP充当实际服务提供者和实际服务使用者之间的服务中继。 

SBI-GW新增SCP/SEPP路由集相关配置，在收到请求后，根据实际场景需要将请求发送到SCP或通过SEPP转接。一个SCP/SEPP路由集最多包含四个SCP/SEPP服务器，一个SCP/SEPP服务器最多包含八个SCP/SEPP节点。 




[](None)功能说明 


该配置用于配置SCP/SEPP服务节点编号、服务器IP地址和端口、归属的服务器编号和使用的HTTP客户端模板编号。 

当业务需要使用SCP或SEPP进行消息转发时，使用该配置。 




[](None)子主题： 






### 新增节点配置(ADD SBISCPNODE) 
### 新增节点配置(ADD SBISCPNODE) 


[](None)功能说明 

该命令用于新增SCP/SEPP节点配置。当需要在某个服务器下增加SCP/SEPP节点时，使用该命令。命令执行成功后，该节点归属于配置指定的服务器。 


[](None)注意事项 


 
引用的服务器ID必须存在，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。 

 
引用的HTTP客户端模板编号必须存在，可通过SHOW CLIENTPROFILE命令查询当前配置的客户端模板信息。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SERVERIPADDR|服务器IP地址|参数可选性: 必选参数类型: 字符串|该参数用于设置服务器IP地址。
SERVERPORT|服务器端口|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器端口。
SCPSERVERID|归属服务器ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置HTTP客户端模板编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SERVERIPADDR|服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置服务器IP地址。
SERVERPORT|服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器端口。
SCPSERVERID|归属服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置HTTP客户端模板编号。




[](None)命令举例 


`
新增节点配置：节点ID为1，服务器IP地址为“10.10.0.1”，服务器端口为8080，归属的服务器ID为1，HTTP客户端模板编号为1。
ADD SBISCPNODE:ID=1,SERVERIPADDR="10.10.0.1",SERVERPORT=8080,SCPSERVERID=1,CLIENTPROFILEID=1
` 


### 修改节点配置(SET SBISCPNODE) 
### 修改节点配置(SET SBISCPNODE) 


[](None)功能说明 

该命令用于修改SCP/SEPP节点配置。当需要修改服务器节点信息时，使用该命令。命令执行成功后，修改后的服务器节点信息会在后续的业务流程中使用。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SERVERIPADDR|服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置服务器IP地址。
SERVERPORT|服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器端口。
SCPSERVERID|归属服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置HTTP客户端模板编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SERVERIPADDR|服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置服务器IP地址。
SERVERPORT|服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器端口。
SCPSERVERID|归属服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置HTTP客户端模板编号。




[](None)命令举例 


`
修改节点配置：节点ID为1，服务器IP地址修改为“20.20.0.2”。
SET SBISCPNODE:ID=1,SERVERIPADDR="20.20.0.2"
` 


### 删除节点配置(DEL SBISCPNODE) 
### 删除节点配置(DEL SBISCPNODE) 


[](None)功能说明 

该命令用于删除SCP/SEPP节点配置。当网元不再需要使用该SCP/SEPP服务器节点通信时，使用该命令。命令执行成功后，对应的服务器节点被删除。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SERVERIPADDR|服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置服务器IP地址。
SERVERPORT|服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器端口。
SCPSERVERID|归属服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置HTTP客户端模板编号。




[](None)命令举例 


`
删除节点配置：节点ID为1。
DEL SBISCPNODE:ID=1
` 


### 查询节点配置(SHOW SBISCPNODE) 
### 查询节点配置(SHOW SBISCPNODE) 


[](None)功能说明 

该命令用于查询SCP/SEPP节点配置。当需要查询服务器节点配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部服务器节点配置信息，则不需要输入任何参数。 

 
如需要查询指定节点ID的服务器节点配置信息，则需要输入节点ID。 

 
如需要查询归属指定的服务器ID的服务器节点配置信息，则需要输入归属的服务器ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SCPSERVERID|归属服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|节点ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置节点ID。
SERVERIPADDR|服务器IP地址|参数可选性: 任选参数类型: 字符串|该参数用于设置服务器IP地址。
SERVERPORT|服务器端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置服务器端口。
SCPSERVERID|归属服务器ID|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置归属的服务器ID。
CLIENTPROFILEID|HTTP客户端模板编号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置HTTP客户端模板编号。




[](None)命令举例 


`
查询节点配置。
SHOW SBISCPNODE

(No.6) : SHOW SBISCPNODE:
-----------------CommonS_HTTP_LB_0----------------
操作维护       节点ID 服务器IP地址 服务器端口 归属服务器ID HTTP客户端模板编号 
------------------------------------------------------------------------------
复制 修改 删除 1      10.10.0.1    8080       1            1                  
------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-09-23 17:07:20 耗时: 0.522 秒

` 


## 归属PLMN配置 
## 归属PLMN配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自的业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SEPP（Security Edge Protection Proxy，安全边缘保护代理）是一个非透明代理，部署在PLMN（Public Land Mobile Network，公共陆地移动网）边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，用户面通过拜访网络和归属网络的UPF（User Plane Function，用户平面功能）使用BG（Border Gateways，边界网关）连接。 

SBI-GW收到用户业务请求后，根据实际场景需要将请求发送到归属网络的SEPP。 




[](None)功能说明 


该配置用于设置本网元的归属PLMN信息。当业务需要识别对端是归属网络方用户或异网漫游用户时，使用该配置。 




[](None)子主题： 






### 新增归属PLMN配置(ADD SBIHOMEPLMN) 
### 新增归属PLMN配置(ADD SBIHOMEPLMN) 


[](None)功能说明 

该命令用于新增归属PLMN配置。当需要将指定PLMN纳入归属PLMN范围时，使用该命令。 

命令执行成功后，使用该PLMN的用户即可识别为归属网络方用户。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 必选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)命令举例 


`
新增归属PLMN配置：移动国家码为"460"，移动网号为"012"。
ADD SBIHOMEPLMN:MCC="460",MNC="012";
` 


### 删除归属PLMN配置(DEL SBIHOMEPLMN) 
### 删除归属PLMN配置(DEL SBIHOMEPLMN) 


[](None)功能说明 

该命令用于删除归属PLMN配置。当指定PLMN不再归属于本网时，使用该命令。 

命令执行成功后，使用该PLMN的用户即被识别为异网漫游用户。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 必选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)命令举例 


`
删除归属PLMN配置：移动国家码为"460"，移动网号为"012"。
DEL SBIHOMEPLMN:MCC="460",MNC="012";
` 


### 查询归属PLMN配置(SHOW SBIHOMEPLMN) 
### 查询归属PLMN配置(SHOW SBIHOMEPLMN) 


[](None)功能说明 

该命令用于查询归属PLMN配置。当需要查询本网的归属PLMN信息时，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)命令举例 


`
查询归属PLMN配置。
SHOW SBIHOMEPLMN

(No.3) : SHOW SBIHOMEPLMN:
-----------------CommonS_HTTP_LB_0----------------
操作维护       移动国家码 移动网号 
-----------------------------------
复制 删除      460        012      
-----------------------------------
记录数：1
执行成功开始时间:2021-11-16 17:14:56 耗时: 0.559 秒

` 


## SCP配置 
## SCP配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


SCP配置目录包含了SCP功能所需要的所有配置，包括基本属性配置和各类SCP选择配置。当业务需要使用SCP功能时，需要配置该组命令。如果不配置SCP配置目录下的命令，则SCP功能无法生效。 




[](None)子主题： 






### SCP基本属性配置 
### SCP基本属性配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置SCP功能开关、回调路由请求模式和SCP节点地址选择方式。 

当业务需要使用SCP功能时，使用该配置。 




[](None)子主题： 






#### 修改SCP基本属性配置(SET SBISCPBASICATTRIBUTE) 
#### 修改SCP基本属性配置(SET SBISCPBASICATTRIBUTE) 


[](None)功能说明 

该命令用于修改SCP基本属性配置。当本网元需要使用SCP进行间接通讯或委托发现功能时，使用该命令。命令执行成功后，SBI-GW将按照修改后的SCP属性进行业务消息流程处理。 


[](None)注意事项 

只有当SCP功能开关配置为启用SCP功能时，该命令的其他配置项才会生效。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCPSWITCH|SCP功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCP_OFF|该参数用于设置系统是否启用SCP功能。默认不启用SCP功能。
CALLBACKMODE|回调请求路由模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-2默认值: SCP_C|该参数用于设置SCP回调请求使用的路由模式。回调请求是指使用callback-uri作为当前请求中的url的一类请求类型的统称。该配置选择的SCP模式应该与组网时确定的模式一致，默认值为C模式SCP。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置SCP节点的地址选择方式，默认为随机。随机：选择SCP节点时，随机选择IPv4地址或IPv6地址的SCP节点。IPv4优先：选择SCP节点时，优先选择IPv4地址的SCP节点。IPv6优先：选择SCP节点时，优先选择IPv6地址的SCP节点。
MATCHORDER|模糊匹配顺序|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: IP_MATCH_PREFER|当按NF类型选择配置和按NF实例选择配置均无法匹配到SCP模式时，使用该参数进行SCP匹配，默认为IP优先。IP优先：先根据目的NF的IP进行匹配，没有IP匹配策略或获取不到目的NF IP，则继续根据目的NF的FQDN进行匹配，仍未匹配上，则匹配失败，继续进行其他匹配。FQDN优先：先根据目的NF的FQDN进行匹配，没有FQDN匹配策略或获取不到目的NF的FQDN，则继续进行IP匹配，仍未匹配上，则匹配失败，继续进行其他匹配。




[](None)命令举例 


`
修改SCP基本属性配置：将SCP功能开关修改为“启用SCP功能”。
SET SBISCPBASICATTRIBUTE:SCPSWITCH="SCP_ON"
` 


#### 查询SCP基本属性配置(SHOW SBISCPBASICATTRIBUTE) 
#### 查询SCP基本属性配置(SHOW SBISCPBASICATTRIBUTE) 


[](None)功能说明 

该命令用于查询SCP基本属性配置。当需要查询SCP功能开关、回调请求路由模式和IP地址选择方式等属性时，使用该命令。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCPSWITCH|SCP功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCP_OFF|该参数用于设置系统是否启用SCP功能。默认不启用SCP功能。
CALLBACKMODE|回调请求路由模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-2默认值: SCP_C|该参数用于设置SCP回调请求使用的路由模式。回调请求是指使用callback-uri作为当前请求中的url的一类请求类型的统称。该配置选择的SCP模式应该与组网时确定的模式一致，默认值为C模式SCP。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置SCP节点的地址选择方式，默认为随机。随机：选择SCP节点时，随机选择IPv4地址或IPv6地址的SCP节点。IPv4优先：选择SCP节点时，优先选择IPv4地址的SCP节点。IPv6优先：选择SCP节点时，优先选择IPv6地址的SCP节点。
MATCHORDER|模糊匹配顺序|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: IP_MATCH_PREFER|当按NF类型选择配置和按NF实例选择配置均无法匹配到SCP模式时，使用该参数进行SCP匹配，默认为IP优先。IP优先：先根据目的NF的IP进行匹配，没有IP匹配策略或获取不到目的NF IP，则继续根据目的NF的FQDN进行匹配，仍未匹配上，则匹配失败，继续进行其他匹配。FQDN优先：先根据目的NF的FQDN进行匹配，没有FQDN匹配策略或获取不到目的NF的FQDN，则继续进行IP匹配，仍未匹配上，则匹配失败，继续进行其他匹配。




[](None)命令举例 


`
查询SCP基本属性配置。
SHOW SBISCPBASICATTRIBUTE

(No.1) : SHOW SBISCPBASICATTRIBUTE:
-----------------CommonS_HTTP_LB_0----------------
操作维护       SCP功能开关 回调请求路由模式 地址选择方式 模糊匹配顺序 
----------------------------------------------------------------------
修改           启用SCP功能 C模式SCP         随机         优先匹配IP   
----------------------------------------------------------------------
记录数：1
执行成功开始时间:2022-03-15 20:18:44 耗时: 0.67 秒

` 


### SCP按NF类型选择配置 
### SCP按NF类型选择配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以根据对端网元的NF类型来选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置按对端网元的NF类型选择的SCP模式和归属的路由集。 

当业务需要使用SCP功能，并按对端网元的NF类型来选择SCP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。 




[](None)子主题： 






#### 新增SCP按NF类型选择配置(ADD SBISCPSELBYNFTYPE) 
#### 新增SCP按NF类型选择配置(ADD SBISCPSELBYNFTYPE) 


[](None)功能说明 

该命令用于新增SCP按NF类型选择配置。当本网元需要使用SCP进行间接通讯或委托发现功能时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的类型来选择SCP模式和路由集。 


[](None)注意事项 

新增SCP按NF类型选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SCP按NF类型选择配置，目的NF类型为“NRF_TYPE”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
ADD SBISCPSELBYNFTYPE:NFTYPE="NRF_TYPE",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 修改SCP按NF类型选择配置(SET SBISCPSELBYNFTYPE) 
#### 修改SCP按NF类型选择配置(SET SBISCPSELBYNFTYPE) 


[](None)功能说明 

该命令用于修改SCP按NF类型选择配置。当目的NF使用的SCP模式或归属的路由集发生变化时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的NF类型来选择修改后的SCP模式和路由集。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SCP按NF类型选择配置，目的NF类型为“NRF_TYPE”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
SET SBISCPSELBYNFTYPE:NFTYPE="NRF_TYPE",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 删除SCP按NF类型选择配置(DEL SBISCPSELBYNFTYPE) 
#### 删除SCP按NF类型选择配置(DEL SBISCPSELBYNFTYPE) 


[](None)功能说明 

该命令用于删除SCP按NF类型选择配置。当不需要根据目的NF的类型来选择SCP模式和路由集时，使用该命令。命令执行成功后，对应的SCP按NF类型选择配置被删除。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SCP按NF类型选择配置，目的NF类型为“NRF_TYPE”。
DEL SBISCPSELBYNFTYPE:NFTYPE="NRF_TYPE"
` 


#### 查询SCP按NF类型选择配置(SHOW SBISCPSELBYNFTYPE) 
#### 查询SCP按NF类型选择配置(SHOW SBISCPSELBYNFTYPE) 


[](None)功能说明 

该命令用于查询SCP按NF类型选择配置。当需要查询目的NF的相关SCP详细信息时，使用该命令。命令执行成功后，将显示SCP模式和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部SCP按NF类型选择配置信息，则不需要输入任何参数。 

 
如需要查询指定NF类型的配置信息，则需要输入目的NF类型。 

 
如需要查询指定SCP模式的配置信息，则需要输入SCP模式。 

 
如需要查询归属指定的路由集ID的配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于设置目的NF的NF类型。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SCP按NF类型选择配置。
SHOW SBISCPSELBYNFTYPE

(No.1) : SHOW SBISCPSELBYNFTYPE:
-----------------CommonS_HTTP_LB_0----------------

操作维护       目的NF类型 SCP模式  路由集ID 
--------------------------------------------
复制 修改 删除 NRF        C模式SCP 1        
--------------------------------------------
记录数：1
执行成功 开始时间:2021-04-20 16:55:06 耗时: 0.649 秒

` 


### SCP按FQDN选择配置 
### SCP按FQDN选择配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以根据对端网元的FQDN来选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置按对端网元FQDN选择的SCP模式和归属的路由集。 

当业务需要使用SCP功能，并按对端网元FQDN来选择SCP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。若未配置，则本网元按FQDN选择SCP模式和SCP/SEEP服务器和节点失败，继续其他选择流程。 




[](None)子主题： 






#### 新增SCP按FQDN选择配置(ADD SBISCPSELBYFQDN) 
#### 新增SCP按FQDN选择配置(ADD SBISCPSELBYFQDN) 


[](None)功能说明 

该命令用于新增SCP按FQDN选择配置。当本网元需要使用SCP和目的NF进行间接通讯或需要委托SCP服务发现目的NF时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的FQDN在所有的SCP按FQDN选择配置中使用最右和最长匹配原则来匹配FQDN，找到网元FQDN的字串，从而选择SCP模式和路由集。 


[](None)注意事项 

新增SCP按FQDN选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则需要执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SCP按FQDN选择配置，FQDN为"zte.com.cn"，SCP模式为"SCP_C"，SCP路由集ID为“1”。
ADD SBISCPSELBYFQDN:FQDN="zte.com.cn",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 修改SCP按FQDN选择配置(SET SBISCPSELBYFQDN) 
#### 修改SCP按FQDN选择配置(SET SBISCPSELBYFQDN) 


[](None)功能说明 

该命令用于修改SCP按FQDN选择配置。当需要修改SCP模式和归属的路由集ID时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的FQDN来选择修改后的SCP模式和路由集。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则需要执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SCP按FQDN选择配置，FQDN为"zte.com.cn"，SCP模式为"SCP_C"，SCP路由集ID为“1”。
SET SBISCPSELBYFQDN:FQDN="zte.com.cn",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 删除SCP按FQDN选择配置(DEL SBISCPSELBYFQDN) 
#### 删除SCP按FQDN选择配置(DEL SBISCPSELBYFQDN) 


[](None)功能说明 

该命令用于删除SCP按FQDN选择配置。当不需要根据目的NF的FQDN来选择SCP模式和路由集时，使用该命令。命令执行成功后，本网元根据目的NF的FQDN选择SCP的流程失败，后续继续进行其他匹配流程。
 


[](None)注意事项 

删除该SCP按FQDN选择配置后，按目的NF的FQDN选择SCP模式和路由集会失败，若无其他路由策略，将无法和目的NF通讯。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SCP按FQDN选择配置，FQDN为"zte.com.cn"。
DEL SBISCPSELBYFQDN:FQDN="zte.com.cn"
` 


#### 查询SCP按FQDN选择配置(SHOW SBISCPSELBYFQDN) 
#### 查询SCP按FQDN选择配置(SHOW SBISCPSELBYFQDN) 


[](None)功能说明 

该命令用于查询SCP按FQDN选择配置。当需要查询目的NF的FQDN的相关SCP详细信息时，使用该命令。命令执行成功后，将显示SCP模式和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部SCP按FQDN选择配置信息，则不需要输入任何参数。 

 
如需要查询指定FQDN的配置信息，则需要输入FQDN。 

 
如需要查询指定SCP模式的配置信息，则需要输入SCP模式。 

 
如需要查询归属指定的路由集ID的配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现目的NF后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SCP按FQDN选择配置。
SHOW SBISCPSELBYFQDN

(No.2) : SHOW SBISCPSELBYFQDN:
-----------------CommonS_HTTP_LB_0----------------
操作维护            FQDN             SCP模式             SCP路由集ID 
-------------------------------------------------------------------------
复制 修改 删除      zte.com.cn       C模式SCP            1 
-------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-29 16:33:51 耗时: 1.145 秒

` 


### SCP按IPv4地址范围选择配置 
### SCP按IPv4地址范围选择配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以根据对端网元的IPv4地址来匹配是否在某个IPv4地址范围内，从而选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置按对端网元IPv4地址范围选择的SCP模式和归属的路由集。 

当业务需要使用SCP功能，并按对端网元IPv4地址来选择SCP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。 




[](None)子主题： 






#### 新增SCP按IPv4地址范围选择配置(ADD SBISCPSELBYIPV4RNG) 
#### 新增SCP按IPv4地址范围选择配置(ADD SBISCPSELBYIPV4RNG) 


[](None)功能说明 

该命令用于新增SCP按IPv4地址范围选择配置。当本网元需要使用SCP进行间接通讯或委托发现功能时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的IPv4地址来匹配是否在某个IPv4地址范围内，从而选择SCP模式和路由集。 


[](None)注意事项 

新增SCP按IPv4地址范围选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 必选参数类型: 字符串|该参数用于设置IPv4地址范围的起始地址。
END|结束|参数可选性: 必选参数类型: 字符串|该参数用于设置IPv4地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SCP按IPv4地址范围选择配置，标识为“1”，描述信息为“SMF1”，起始为“1.2.3.4”，结束为“4.3.2.1”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
ADD SBISCPSELBYIPV4RNG:ID=1,DESC="SMF1",START="1.2.3.4",END="4.3.2.1",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 修改SCP按IPv4地址范围选择配置(SET SBISCPSELBYIPV4RNG) 
#### 修改SCP按IPv4地址范围选择配置(SET SBISCPSELBYIPV4RNG) 


[](None)功能说明 

该命令用于修改SCP按IPv4地址范围选择配置。当IPv4地址范围发生变化，或者需要修改SCP模式和归属的路由集ID时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的IPv4地址来匹配是否在修改后的IPv4地址范围内，从而选择SCP模式和路由集。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SCP按IPv4地址范围选择配置，标识为“1”，描述信息为“SMF1”，起始为“1.2.3.4”，结束为“4.3.2.1”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
SET SBISCPSELBYIPV4RNG:ID=1,DESC="SMF1",START="1.2.3.4",END="4.3.2.1",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 删除SCP按IPv4地址范围选择配置(DEL SBISCPSELBYIPV4RNG) 
#### 删除SCP按IPv4地址范围选择配置(DEL SBISCPSELBYIPV4RNG) 


[](None)功能说明 

该命令用于删除SCP按IPv4地址范围选择配置。当不需要根据目的NF的IPv4地址来选择SCP模式和路由集时，使用该命令。命令执行成功后，对应的SCP按IPv4地址范围选择配置被删除。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SCP按IPv4地址范围选择配置，标识为“1”。
DEL SBISCPSELBYIPV4RNG:ID=1
` 


#### 查询SCP按IPv4地址范围选择配置(SHOW SBISCPSELBYIPV4RNG) 
#### 查询SCP按IPv4地址范围选择配置(SHOW SBISCPSELBYIPV4RNG) 


[](None)功能说明 

该命令用于查询SCP按IPv4地址范围选择配置。当需要查询IPv4地址范围选择配置详细信息时，使用该命令。命令执行成功后，将显示描述信息、IPv4地址起始结束地址、SCP模式和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部SCP按IPv4地址范围选择配置信息，则不需要输入任何参数。 

 
如需要查询指定ID的配置信息，则需要输入ID。 

 
如需要查询指定描述信息的配置信息，则需要输入描述信息。 

 
如需要查询指定起始或结束IPv4地址的配置信息，则需要输入IPv4地址。 

 
如需要查询指定SCP模式的配置信息，则需要输入SCP模式。 

 
如需要查询归属指定的路由集ID的配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv4地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SCP按IPv4地址范围选择配置。
SHOW SBISCPSELBYIPV4RNG

(No.2) : SHOW SBISCPSELBYIPV4RNG:
-----------------CommonS_HTTP_LB_0----------------
操作维护       标识 描述信息 起始    结束    SCP模式  路由集ID 
---------------------------------------------------------------
复制 修改 删除 1    SMF1     1.2.3.4 4.3.2.1 C模式SCP 1        
---------------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-29 16:33:51 耗时: 1.145 秒

` 


### SCP按IPv6地址范围选择配置 
### SCP按IPv6地址范围选择配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以根据对端网元的IPv6地址来匹配是否在某个IPv6地址范围内，从而选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置按对端网元IPv6地址范围选择的SCP模式和归属的路由集。 

当业务需要使用SCP功能，并按对端网元IPv6地址来选择SCP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。 




[](None)子主题： 






#### 新增SCP按IPv6地址范围选择配置(ADD SBISCPSELBYIPV6RNG) 
#### 新增SCP按IPv6地址范围选择配置(ADD SBISCPSELBYIPV6RNG) 


[](None)功能说明 

该命令用于新增SCP按IPv6地址范围选择配置。当本网元需要使用SCP进行间接通讯或委托发现功能时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的IPv6地址来匹配是否在某个IPv6地址范围内，从而选择SCP模式和路由集。 


[](None)注意事项 

新增SCP按IPv6地址范围选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 必选参数类型: 字符串|该参数用于设置IPv6地址范围的起始地址。
END|结束|参数可选性: 必选参数类型: 字符串|该参数用于设置IPv6地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SCP按IPv6地址范围选择配置，标识为“1”，描述信息为“SMF1”，起始为“1::1”，结束为“2::2”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
ADD SBISCPSELBYIPV6RNG:ID=1,DESC="SMF1",START="1::1",END="2::2",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 修改SCP按IPv6地址范围选择配置(SET SBISCPSELBYIPV6RNG) 
#### 修改SCP按IPv6地址范围选择配置(SET SBISCPSELBYIPV6RNG) 


[](None)功能说明 

该命令用于修改SCP按IPv6地址范围选择配置。当IPv6地址范围发生变化，或者需要修改SCP模式和归属的路由集ID时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的IPv6地址来匹配是否在修改后的IPv6地址范围内，从而选择SCP模式和路由集。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SCP按IPv6地址范围选择配置，标识为“1”，描述信息为“SMF1”，起始为“1::1”，结束为“2::2”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
SET SBISCPSELBYIPV6RNG:ID=1,DESC="SMF1",START="1::1",END="2::2",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 删除SCP按IPv6地址范围选择配置(DEL SBISCPSELBYIPV6RNG) 
#### 删除SCP按IPv6地址范围选择配置(DEL SBISCPSELBYIPV6RNG) 


[](None)功能说明 

该命令用于删除SCP按IPv6地址范围选择配置。当不需要根据目的NF的IPv6地址来选择SCP模式和路由集时，使用该命令。命令执行成功后，对应的SCP按IPv6地址范围选择配置被删除。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SCP按IPv6地址范围选择配置，标识为“1”。
DEL SBISCPSELBYIPV6RNG:ID=1
` 


#### 查询SCP按IPv6地址范围选择配置(SHOW SBISCPSELBYIPV6RNG) 
#### 查询SCP按IPv6地址范围选择配置(SHOW SBISCPSELBYIPV6RNG) 


[](None)功能说明 

该命令用于查询SCP按IPv6地址范围选择配置。当需要查询IPv6地址范围选择配置详细信息时，使用该命令。命令执行成功后，将显示描述信息、IPv6地址起始结束地址、SCP模式和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部SCP按IPv6地址范围选择配置信息，则不需要输入任何参数。 

 
如需要查询指定ID的配置信息，则需要输入ID。 

 
如需要查询指定描述信息的配置信息，则需要输入描述信息。 

 
如需要查询指定起始或结束IPv6地址的配置信息，则需要输入IPv6地址。 

 
如需要查询指定SCP模式的配置信息，则需要输入SCP模式。 

 
如需要查询归属指定的路由集ID的配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置该配置的ID。
DESC|描述信息|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于设置该配置的描述信息。
START|起始|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的起始地址。
END|结束|参数可选性: 任选参数类型: 字符串|该参数用于设置IPv6地址范围的结束地址。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SCP按IPv6地址范围选择配置。
SHOW SBISCPSELBYIPV6RNG

(No.2) : SHOW SBISCPSELBYIPV6RNG:
-----------------CommonS_HTTP_LB_0----------------
操作维护       标识 描述信息 起始 结束 SCP模式  路由集ID 
---------------------------------------------------------
复制 修改 删除 1    SMF1     1::1 2::2 C模式SCP 1        
---------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-29 16:33:51 耗时: 1.145 秒

` 


### SCP按NF实例选择配置 
### SCP按NF实例选择配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以根据对端网元的实例标识和网元名来选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置按对端网元的实例标识和网元名选择的SCP模式和归属的路由集。 

当业务需要使用SCP功能，并按对端网元的实例标识和网元名来选择SCP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。 




[](None)子主题： 






#### 新增SCP按NF实例选择配置(ADD SBISCPSELBYNFINSTID) 
#### 新增SCP按NF实例选择配置(ADD SBISCPSELBYNFINSTID) 


[](None)功能说明 

该命令用于新增SCP按NF实例选择配置。当本网元需要使用SCP进行间接通讯或委托发现功能时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的实例标识和网元名组合来选择SCP模式和路由集。 


[](None)注意事项 

新增SCP按NF实例选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SCP按NF实例选择配置，网元实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”，网元名为“SMF1”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
ADD SBISCPSELBYNFINSTID:NFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0",NFNAME="SMF1",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 修改SCP按NF实例选择配置(SET SBISCPSELBYNFINSTID) 
#### 修改SCP按NF实例选择配置(SET SBISCPSELBYNFINSTID) 


[](None)功能说明 

该命令用于修改SCP按NF实例选择配置。当目的NF使用的SCP模式或归属的路由集发生变化时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的实例标识和网元名组合来选择修改后的SCP模式和路由集。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SCP按NF实例选择配置，网元实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”，网元名为“SMF1”，SCP模式为“SCP_C”，SCP路由集ID为“1”。
SET SBISCPSELBYNFINSTID:NFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0",NFNAME="SMF1",SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 删除SCP按NF实例选择配置(DEL SBISCPSELBYNFINSTID) 
#### 删除SCP按NF实例选择配置(DEL SBISCPSELBYNFINSTID) 


[](None)功能说明 

该命令用于删除SCP按NF实例选择配置。当不需要根据目的NF的实例标识和网元名组合来选择SCP模式和路由集时，使用该命令。命令执行成功后，对应的SCP按NF实例选择配置被删除。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SCP按NF实例选择配置，网元实例标识为“aaa00a00-0a00-000a-a0a0-00aa00a00aa0”。
DEL SBISCPSELBYNFINSTID:NFINSTID="aaa00a00-0a00-000a-a0a0-00aa00a00aa0"
` 


#### 查询SCP按NF实例选择配置(SHOW SBISCPSELBYNFINSTID) 
#### 查询SCP按NF实例选择配置(SHOW SBISCPSELBYNFINSTID) 


[](None)功能说明 

该命令用于查询SCP按NF实例选择配置。当需要查询目的NF的相关SCP详细信息时，使用该命令。命令执行成功后，将显示SCP模式和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部SCP按NF实例选择配置信息，则不需要输入任何参数。 

 
如需要查询指定网元实例标识的配置信息，则需要输入网元实例标识。 

 
如需要查询指定网元名的配置信息，则需要输入网元名。 

 
如需要查询指定SCP模式的配置信息，则需要输入SCP模式。 

 
如需要查询归属指定的路由集ID的配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFINSTID|NF实例标识|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于设置目的NF的实例标识。
NFNAME|NF名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置目的NF的名称。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SCP按NF实例选择配置。
SHOW SBISCPSELBYNFINSTID

(No.2) : SHOW SBISCPSELBYNFINSTID:
-----------------CommonS_HTTP_LB_0----------------
操作维护       NF实例标识                           NF名 SCP模式  路由集ID 
----------------------------------------------------------
复制 修改 删除 aaa00a00-0a00-000a-a0a0-00aa00a00aa0 SMF1 C模式SCP 1        
----------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-29 16:33:51 耗时: 1.145 秒

` 


### SCP缺省选择配置 
### SCP缺省选择配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以根据对端网元缺省配置来选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。 




[](None)功能说明 


该配置用于配置缺省时选择的SCP模式和归属的路由集。 

当业务需要使用SCP功能，且没有配置相关选择配置时，要选择SCP模式和SCP/SEPP服务器节点时，使用该配置。 




[](None)子主题： 






#### 修改SCP缺省选择配置(SET SBISCPDEFAULTSELECTION) 
#### 修改SCP缺省选择配置(SET SBISCPDEFAULTSELECTION) 


[](None)功能说明 

该命令用于修改SCP缺省选择配置。当本网元需要使用SCP进行间接通讯或委托发现功能时，使用该命令。命令执行成功后，SBI-GW可以在其他SCP选择配置失效或选择失败时，根据SCP缺省配置来选择SCP模式和路由集。 


[](None)注意事项 

修改SCP缺省配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SCP缺省选择配置，SCP模式为“SCP_C”，SCP路由集ID为“1”。
SET SBISCPDEFAULTSELECTION:SCPMODE="SCP_C",SCPROUTESET=1
` 


#### 查询SCP缺省选择配置(SHOW SBISCPDEFAULTSELECTION) 
#### 查询SCP缺省选择配置(SHOW SBISCPDEFAULTSELECTION) 


[](None)功能说明 

该命令用于查询SCP缺省选择配置信息。当需要查询缺省配置详细信息时，使用该命令。命令执行成功后，将显示SCP模式和归属的路由集ID。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SCP缺省选择配置。
SHOW SBISCPDEFAULTSELECTION

(No.2) : SHOW SBISCPDEFAULTSELECTION:
-----------------CommonS_HTTP_LB_0----------------
操作维护       SCP模式  路由集ID 
---------------------------------
修改           C模式SCP 1        
---------------------------------
记录数：1
执行成功开始时间:2021-06-29 16:33:51 耗时: 1.145 秒

` 


### SCP路由模板配置 
### SCP路由模板配置 


[](None)背景知识 


5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。 

SBI-GW收到请求后，可以配置路由模板，然后在SCP模式下可以引用该路由模板，业务下发初始路由请求指定该SCP模板时可以使用该模板。 




[](None)功能说明 


该配置用于配置SCP路由模板。 

当业务需要使用SCP路由模板，使用该配置。 




[](None)子主题： 






#### 新增SCP路由模板配置(ADD SBISCPROUTETEMPLATE) 
#### 新增SCP路由模板配置(ADD SBISCPROUTETEMPLATE) 


[](None)功能说明 

该命令用于新增SCP路由模板配置。当需要新增SCP路由模板配置时，使用该命令。命令执行成功后，在SCP模式下可以引用该路由模板，业务下发初始路由请求指定该SCP模板时可以使用该模板。 


[](None)注意事项 

新增SCP路由模板配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。

新增SCP路由模板配置前，需要先确认引用的服务器ID必须存在，可以通过[SHOW SBISCPSERVER](../mml/1223029.html)命令查询当前配置的服务器信息。如果服务器ID不存在，则执行新增服务器配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
NAME|名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置SCP路由模板名。
SCPMODE|SCP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|SCP路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP服务器ID为0的无效值时，需要修改路由集ID为非0的有效值。
SCPSERVERID|SCP服务器ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP服务器ID，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。当SCP服务器下所有的SCP节点异常后，本端NF会优选此SCP服务器关联的SCP路由集下的其他SCP服务器。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP路由集ID为0的无效值时，需要修改服务器ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置SCP路由模板名。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|SCP路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP服务器ID为0的无效值时，需要修改路由集ID为非0的有效值。
SCPSERVERID|SCP服务器ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP服务器ID，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。当SCP服务器下所有的SCP节点异常后，本端NF会优选此SCP服务器关联的SCP路由集下的其他SCP服务器。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP路由集ID为0的无效值时，需要修改服务器ID为非0的有效值。




[](None)命令举例 


`
新增路由模板配置：路由模板标识为1，名称为“SCP RouteTemplate1”，SCP模式为“SCP_NO”，SCP路由集ID为“0”，SCP服务器ID为“0”。
ADD SBISCPROUTETEMPLATE:ID=1,NAME="SCP RouteTemplate1",SCPMODE="SCP_NO",SCPROUTESET="0",SCPSERVERID="0"
` 


#### 修改SCP路由模板配置(SET SBISCPROUTETEMPLATE) 
#### 修改SCP路由模板配置(SET SBISCPROUTETEMPLATE) 


[](None)功能说明 

该命令用于修改SCP路由模板配置。当需要修改路由模板名称、SCP模式、SCP路由集ID或SCP服务器ID时，使用该命令。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。

如果修改服务器ID，需要先确认引用的服务器ID必须存在，可以通过[SHOW SBISCPSERVER](../mml/1223029.html)命令查询当前配置的服务器信息。如果服务器ID不存在，则执行新增服务器配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|SCP路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP服务器ID为0的无效值时，需要修改路由集ID为非0的有效值。
SCPSERVERID|SCP服务器ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP服务器ID，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。当SCP服务器下所有的SCP节点异常后，本端NF会优选此SCP服务器关联的SCP路由集下的其他SCP服务器。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP路由集ID为0的无效值时，需要修改服务器ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置SCP路由模板名。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|SCP路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP服务器ID为0的无效值时，需要修改路由集ID为非0的有效值。
SCPSERVERID|SCP服务器ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP服务器ID，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。当SCP服务器下所有的SCP节点异常后，本端NF会优选此SCP服务器关联的SCP路由集下的其他SCP服务器。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP路由集ID为0的无效值时，需要修改服务器ID为非0的有效值。




[](None)命令举例 


`
修改路由模板配置：路由模板标识为1，SCP模式修改为“SCP_NO”，SCP路由集ID修改为“0”，SCP服务器ID修改为“0”。
SET SBISCPROUTETEMPLATE:ID=1,SCPMODE="SCP_NO",SCPROUTESET="0",SCPSERVERID="0"
` 


#### 删除SCP路由模板配置(DEL SBISCPROUTETEMPLATE) 
#### 删除SCP路由模板配置(DEL SBISCPROUTETEMPLATE) 


[](None)功能说明 

该命令用于删除SCP路由模板配置。当需要删除某模板配置时，使用该命令。命令执行成功后，对应的SCP路由模板配置被删除。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置SCP路由模板名。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|SCP路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP服务器ID为0的无效值时，需要修改路由集ID为非0的有效值。
SCPSERVERID|SCP服务器ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP服务器ID，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。当SCP服务器下所有的SCP节点异常后，本端NF会优选此SCP服务器关联的SCP路由集下的其他SCP服务器。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP路由集ID为0的无效值时，需要修改服务器ID为非0的有效值。




[](None)命令举例 


`
删除路由模板配置：路由模板标识为1。
DEL SBISCPROUTETEMPLATE:ID=1
` 


#### 查询SCP路由模板配置(SHOW SBISCPROUTETEMPLATE) 
#### 查询SCP路由模板配置(SHOW SBISCPROUTETEMPLATE) 


[](None)功能说明 

该命令用于查询SCP路由模板配置。当需要查询路由模板ID、路由模板名和C模式下携带发现头部的配置信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部路由模板配置信息，则不需要输入任何参数。 

 
如需要查询指定路由模板ID的路由模板配置信息，则需要输入路由模板ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置SCP路由模板名。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SCP路由模板ID。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置SCP路由模板名。
SCPMODE|SCP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: SCP_NO|该参数用于设置SCP模式。不启用SCP：不启用间接通讯或委托发现功能。C模式SCP：该模式下为无委托发现的间接通信，服务消费者向NRF发现后，根据发现结果向SCP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SCP节点构成。SCP将请求路由到选定的NF服务实例。D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|SCP路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP服务器ID为0的无效值时，需要修改路由集ID为非0的有效值。
SCPSERVERID|SCP服务器ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的SCP服务器ID，可以通过SHOW SBISCPSERVER命令查询当前配置的服务器信息。当SCP服务器下所有的SCP节点异常后，本端NF会优选此SCP服务器关联的SCP路由集下的其他SCP服务器。默认值为0，含义为无效值，当SCP模式为不启用SCP时，该值需为0。当修改SCP模式为其它模式，SCP路由集ID为0的无效值时，需要修改服务器ID为非0的有效值。




[](None)命令举例 


`
查询路由模板配置。
SHOW SBISCPROUTETEMPLATE

(No.7) : SHOW SBISCPROUTETEMPLATE:
-----------------------------CommonS_HTTP_LB_0----------------------------
操作维护       标识     名称                 SCP模式 SCP路由集ID SCP服务器ID
----------------------------------------------------------------------------------
复制 修改 删除 1        SCP RouteTemplate1   SCP_NO  0           0
----------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-09-22 17:16:14 耗时: 0.551 秒

` 


## 异网漫游配置 
## 异网漫游配置 


[](None)背景知识 


SEPP（Security Edge Protection Proxy，安全边缘保护代理）是一个非透明代理，部署在PLMN（Public Land Mobile Network，公共陆地移动网）边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，用户面通过拜访网络和归属网络的UPF（User Plane Function，用户平面功能）使用BG（Border Gateways，边界网关）连接。 

SBI-GW收到用户业务请求后，根据实际场景需要将请求发送到归属网络的SEPP。 




[](None)功能说明 


异网漫游配置目录包含了SEPP功能所需要的所有配置，包括基本属性配置和各类SEPP选择配置。当业务需要使用SEPP功能时，需要配置该组命令。如果不配置异网漫游配置目录下的命令，则SEPP功能无法生效。 




[](None)子主题： 






### SEPP基本属性配置 
### SEPP基本属性配置 


[](None)背景知识 


SEPP（Security Edge Protection Proxy，安全边缘保护代理）是一个非透明代理，部署在PLMN（Public Land Mobile Network，公共陆地移动网）边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，用户面通过拜访网络和归属网络的UPF（User Plane Function，用户平面功能）使用BG（Border Gateways，边界网关）连接。 

SBI-GW收到用户业务请求后，根据实际场景需要将请求发送到归属网络的SEPP。 




[](None)功能说明 


SEPP基本属性用于配置SEPP功能开关、回调路由请求模式和SEPP节点地址选择方式。 

当业务需要使用异网漫游功能时，使用该配置。 




[](None)子主题： 






#### 修改基本属性配置(SET SBISEPPBASICATTRIBUTE) 
#### 修改基本属性配置(SET SBISEPPBASICATTRIBUTE) 


[](None)功能说明 

该命令用于修改SEPP基本属性配置。当本网元需要使用SEPP进行异网漫游时，使用该命令。命令执行成功后，SBI-GW将按照修改后的SEPP属性进行业务消息流程处理。 


[](None)注意事项 

只有当SEPP功能开关配置为启用SEPP功能时，该命令的其他配置项才会生效。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SEPPSWITCH|SEPP功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SEPP_OFF|该参数用于设置系统是否启用SEPP功能。不启用SEPP功能：不启用异网漫游功能。启用SEPP功能：启用异网漫游功能。
CALLBACKMODE|回调请求路由模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-2默认值: SEPP_TARGETAPIROOT|该参数用于设置SEPP回调请求使用的路由模式。回调请求是指使用callback-uri（对端请求中携带的字段）作为当前请求中的url的一类请求类型的统称。该配置选择的回调请求路由模式应该与组网时确定的模式一致。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF请求发现NF后，根据发现结果向SEPP发送请求，该请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置SEPP节点的地址选择方式，默认为随机。随机：选择SEPP节点时，随机选择IPv4地址或IPv6地址的SEPP节点。IPv4优先：选择SEPP节点时，优先选择IPv4地址的SEPP节点。IPv6优先：选择SEPP节点时，优先选择IPv6地址的SEPP节点。




[](None)命令举例 


`
修改SEPP基本属性配置：将SEPP功能开关修改为“启用SEPP功能”，回调请求路由模式修改为“TargetApiRoot模式SEPP”，IP地址选择方式修改为“随机”。
SET SBISEPPBASICATTRIBUTE:SEPPSWITCH="SEPP_ON",CALLBACKMODE="SEPP_TARGETAPIROOT",IPSELECTMODE="RANDOM"
` 


#### 查询基本属性配置(SHOW SBISEPPBASICATTRIBUTE) 
#### 查询基本属性配置(SHOW SBISEPPBASICATTRIBUTE) 


[](None)功能说明 

该命令用于查询SEPP基本属性配置。当需要查询SEPP功能开关、回调请求路由模式和IP地址选择方式等属性时，使用该命令。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SEPPSWITCH|SEPP功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SEPP_OFF|该参数用于设置系统是否启用SEPP功能。不启用SEPP功能：不启用异网漫游功能。启用SEPP功能：启用异网漫游功能。
CALLBACKMODE|回调请求路由模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-2默认值: SEPP_TARGETAPIROOT|该参数用于设置SEPP回调请求使用的路由模式。回调请求是指使用callback-uri（对端请求中携带的字段）作为当前请求中的url的一类请求类型的统称。该配置选择的回调请求路由模式应该与组网时确定的模式一致。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF请求发现NF后，根据发现结果向SEPP发送请求，该请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
IPSELECTMODE|地址选择方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: RANDOM|该参数用于设置SEPP节点的地址选择方式，默认为随机。随机：选择SEPP节点时，随机选择IPv4地址或IPv6地址的SEPP节点。IPv4优先：选择SEPP节点时，优先选择IPv4地址的SEPP节点。IPv6优先：选择SEPP节点时，优先选择IPv6地址的SEPP节点。




[](None)命令举例 


`
查询SEPP基本属性配置。
SHOW SBISEPPBASICATTRIBUTE

(No.2) : SHOW SBISEPPBASICATTRIBUTE:
-----------------CommonS_HTTP_LB_0----------------
操作维护       SEPP功能开关 回调请求路由模式      地址选择方式 
---------------------------------------------------------------
修改           启用SEPP功能 TargetApiRoot模式SEPP 随机         
---------------------------------------------------------------
记录数：1
执行成功开始时间:2021-10-11 14:53:24 耗时: 0.672 秒

` 


### SEPP按PLMN选择配置 
### SEPP按PLMN选择配置 


[](None)背景知识 


SEPP（Security Edge Protection Proxy，安全边缘保护代理）是一个非透明代理，部署在PLMN（Public Land Mobile Network，公共陆地移动网）边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，用户面通过拜访网络和归属网络的UPF（User Plane Function，用户平面功能）使用BG（Border Gateways，边界网关）连接。 

SBI-GW收到用户业务请求后，根据实际场景需要将请求发送到归属网络的SEPP。 




[](None)功能说明 


该配置用于设置按PLMN匹配所使用的SEPP模式和路由集ID。当业务需要SEPP进行异网漫游且需要通过PLMN进行选择SEPP模式时，使用该配置。 




[](None)子主题： 






#### 新增SEPP按PLMN选择配置(ADD SBISEPPSELBYPLMN) 
#### 新增SEPP按PLMN选择配置(ADD SBISEPPSELBYPLMN) 


[](None)功能说明 

该命令用于新增SEPP按PLMN选择配置。当本网元需要使用SEPP进行异网漫游时，使用该命令。命令执行成功后，SBI-GW可以根据路由请求中的target_plmnList参数携带的目的PLMN值进行匹配，从而选择使用的SEPP模式和SEPP路由集。 


[](None)注意事项 

新增SEPP按PLMN选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则命令执行失败。需要先执行[ADD SBISCPROUTESET](../mml/1223022.html)命令，新增路由集配置。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 必选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SEPP按PLMN选择配置：移动国家码为"460"，移动网号为"012"，SEPP模式为SEPP TargetApiRoot模式，路由集ID为1。
ADD SBISEPPSELBYPLMN:MCC="460",MNC="012",SEPPMODE="SEPP_TARGETAPIROOT",SCPROUTESET=1;
` 


#### 修改SEPP按PLMN选择配置(SET SBISEPPSELBYPLMN) 
#### 修改SEPP按PLMN选择配置(SET SBISEPPSELBYPLMN) 


[](None)功能说明 

该命令用于修改SEPP按PLMN选择配置。当需要修改使用的SEPP模式或SEPP路由集ID时，使用该命令。命令执行成功后，SBI-GW可以根据PLMN匹配结果，使用修改后的SEPP模式和SEPP路由集。 


[](None)注意事项 

修改SEPP按PLMN选择配置中使用的路由集ID前，需要先确认修改后的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则命令执行失败。需要先执行[ADD SBISCPROUTESET](../mml/1223022.html)命令，新增路由集配置。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 必选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SEPP按PLMN选择配置：移动国家码为"460"，移动网号为"012"，SEPP模式为SEPP TargetApiRoot模式，路由集ID为2。
SET SBISEPPSELBYPLMN:MCC="460",MNC="012",SEPPMODE="SEPP_TARGETAPIROOT",SCPROUTESET=2;
` 


#### 删除SEPP按PLMN选择配置(DEL SBISEPPSELBYPLMN) 
#### 删除SEPP按PLMN选择配置(DEL SBISEPPSELBYPLMN) 


[](None)功能说明 

该命令用于删除SEPP按PLMN选择配置。当本网元异网漫游不需要使用该PLMN进行SEPP匹配时，使用该命令。命令执行成功后，对应的SEPP按PLMN选择的配置被删除。 


[](None)注意事项 

删除SEPP按PLMN选择配置后，相关异网漫游请求可以通过按FQDN选择配置[ADD SBISEPPSELBYFQDN](../mml/1223062.html)和缺省异网漫游配置[SET SBISEPPDEFAULTSELECTION](../mml/1223066.html)进行SEPP匹配。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 必选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SEPP按PLMN选择配置：移动国家码为"460"，移动网号为"012"。
DEL SBISEPPSELBYPLMN:MCC="460",MNC="012";
` 


#### 查询SEPP按PLMN选择配置(SHOW SBISEPPSELBYPLMN) 
#### 查询SEPP按PLMN选择配置(SHOW SBISEPPSELBYPLMN) 


[](None)功能说明 

该命令用于查询SEPP按PLMN选择配置。当需要查询不同PLMN匹配使用的SEPP模式和SEPP路由集信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部SEPP按PLMN选择配置信息，则不需要输入任何参数。 

 
如需要查询指定PLMN匹配使用的SEPP模式和SEPP路由集配置信息，则需要输入PLMN。 

 
如需要查询指定SEPP模式的相关配置信息，则需要输入SEPP模式。 

 
如需要查询归属指定的路由集ID的相关配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MCC|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动国家/地区代码，包含3个数字。该参数由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。MCC（Mobile Country Code，移动国家码）对于所有的记录都是唯一的。
MNC|移动网号|参数可选性: 任选参数类型: 字符串参数范围: 2-3|该参数用于设置PLMN（Public Land Mobile Network，公共陆地移动网）的移动网络代码，包含2或3位数字。该参数由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SEPP按PLMN选择的全部配置。
SHOW SBISEPPSELBYPLMN

(No.1) : SHOW SBISEPPSELBYPLMN:
-----------------CommonS_HTTP_LB_0----------------
操作维护       移动国家码 移动网号 SEPP模式   路由集ID 
-------------------------------------------------------
复制 修改 删除 460        012      不启用SEPP 1      
-------------------------------------------------------
记录数：1
执行成功开始时间:2021-11-16 19:14:56 耗时: 0.559 秒

` 


### SEPP按FQDN选择配置 
### SEPP按FQDN选择配置 


[](None)背景知识 


SEPP（Security Edge Protection Proxy，安全边缘保护代理）是一个非透明代理，部署在PLMN（Public Land Mobile Network，公共陆地移动网）边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，用户面通过拜访网络和归属网络的UPF（User Plane Function，用户平面功能）使用BG（Border Gateways，边界网关）连接。 

SBI-GW收到用户业务请求后，根据实际场景需要将请求发送到归属网络的SEPP。 




[](None)功能说明 


该配置用于配置按对端网元的FQDN选择的SEPP模式和归属的路由集。 

当业务需要使用异网漫游功能，并按对端网元的FQDN来选择SEPP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。 




[](None)子主题： 






#### 新增SEPP按FQDN选择配置(ADD SBISEPPSELBYFQDN) 
#### 新增SEPP按FQDN选择配置(ADD SBISEPPSELBYFQDN) 


[](None)功能说明 

该命令用于新增SEPP按FQDN选择配置。当本网元需要使用SEPP进行异网漫游时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的FQDN在所有配置中使用最右和最长匹配原则来匹配FQDN，找到网元FQDN的字串，从而选择SEPP模式和路由集。 


[](None)注意事项 

新增SEPP按FQDN选择配置前，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
新增SEPP按FQDN选择配置，FQDN为"zte.com.cn",SEPP模式为"SEPP_TARGETAPIROOT"，SCP路由集ID为“1”。
ADD SBISEPPSELBYFQDN:FQDN="zte.com.cn",SEPPMODE="SEPP_TARGETAPIROOT",SCPROUTESET=1
` 


#### 修改SEPP按FQDN选择配置(SET SBISEPPSELBYFQDN) 
#### 修改SEPP按FQDN选择配置(SET SBISEPPSELBYFQDN) 


[](None)功能说明 

该命令用于修改SEPP按FQDN选择配置。当需要修改SEPP模式和归属的路由集ID时，使用该命令。命令执行成功后，SBI-GW可以根据目的NF的FQDN来选择修改后的SEPP模式和路由集。 


[](None)注意事项 

如果修改路由集ID，需要先确认引用的路由集ID必须存在，可以通过[SHOW SBISCPROUTESET](../mml/1223025.html)命令查询当前配置的路由集信息。如果路由集ID不存在，则执行新增路由集配置命令。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改SEPP按FQDN选择配置，FQDN为"zte.com.cn",SEPP模式为"SEPP_TARGETAPIROOT"，SCP路由集ID为“1”。
SET SBISEPPSELBYFQDN:FQDN="zte.com.cn",SEPPMODE="SEPP_TARGETAPIROOT",SCPROUTESET=1
` 


#### 删除SEPP按FQDN选择配置(DEL SBISEPPSELBYFQDN) 
#### 删除SEPP按FQDN选择配置(DEL SBISEPPSELBYFQDN) 


[](None)功能说明 

该命令用于删除SEPP按FQDN选择配置。当不需要根据目的NF的FQDN来选择SEPP模式和路由集时，使用该命令。命令执行成功后，对应的SEPP按FQDN选择配置被删除。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
删除SEPP按FQDN选择配置，FQDN为"zte.com.cn"。
DEL SBISEPPSELBYFQDN:FQDN="zte.com.cn"
` 


#### 查询SEPP按FQDN选择配置(SHOW SBISEPPSELBYFQDN) 
#### 查询SEPP按FQDN选择配置(SHOW SBISEPPSELBYFQDN) 


[](None)功能说明 

该命令用于查询SEPP按FQDN选择配置。当需要查询目的NFFQDN的相关SEPP详细信息时，使用该命令。命令执行成功后，将显示SEPP模式和归属的路由集ID。 


[](None)注意事项 


 
如需要查询全部SEPP按FQDN选择配置信息，则不需要输入任何参数。 

 
如需要查询指定FQDN的配置信息，则需要输入FQDN。 

 
如需要查询指定SEPP模式的配置信息，则需要输入SEPP模式。 

 
如需要查询归属指定的路由集ID的配置信息，则需要输入归属的路由集ID。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FQDN|FQDN|参数可选性: 任选参数类型: 字符串参数范围: 1-255|该参数用于设置目的NF的FQDN。不允许包含大写字母、斜杠和冒号。
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询SEPP按FQDN选择配置。
SHOW SBISEPPSELBYFQDN

(No.2) : SHOW SBISEPPSELBYFQDN:
-----------------CommonS_HTTP_LB_0----------------
操作维护       FQDN       SEPP模式              路由集ID 
---------------------------------------------------------
复制 修改 删除 zte.com.cn TargetApiRoot模式SEPP 1        
---------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-29 16:33:51 耗时: 1.145 秒

` 


### 缺省异网漫游配置 
### 缺省异网漫游配置 


[](None)背景知识 


SEPP（Security Edge Protection Proxy，安全边缘保护代理）是一个非透明代理，部署在PLMN（Public Land Mobile Network，公共陆地移动网）边界，从安全层面保护跨PLMN服务使用者和服务提供者间的连接。 

5G SA核心网异网漫游采用归属路由方式，即异网漫游用户的数据回到归属网络，用户业务由归属网络负责处理。拜访网络和归属网络的信令面通过各自的SEPP连接，用户面通过拜访网络和归属网络的UPF（User Plane Function，用户平面功能）使用BG（Border Gateways，边界网关）连接。 

SBI-GW收到用户业务请求后，根据实际场景需要将请求发送到归属网络的SEPP。 




[](None)功能说明 


缺省异网漫游用于配置缺省使用的SEPP模式及SEPP路由集ID。 

当[SET SBISEPPBASICATTRIBUTE](../mml/1223052.html)命令中“SEPP功能开关”参数设置为“启用SEPP功能”，目标节点不属于归属PLMN，且按照PLMN、FQDN（Fully Qualified Domain Name，全称域名）匹配SEPP失败时，使用该缺省配置。




[](None)子主题： 






#### 修改缺省异网漫游配置(SET SBISEPPDEFAULTSELECTION) 
#### 修改缺省异网漫游配置(SET SBISEPPDEFAULTSELECTION) 


[](None)功能说明 

该命令用于修改缺省异网漫游配置。当本网元需要修改缺省SEPP模式及SEPP路由集ID时，使用该命令。命令执行成功后，SBI-GW将按照修改后的SEPP模式和SEPP路由集ID作为缺省异网漫游配置，进行业务消息流程处理。 


[](None)注意事项 

只有当[SET SBISEPPBASICATTRIBUTE](../mml/1223052.html)命令中“SEPP功能开关”参数设置为“启用SEPP功能”，目标节点不属于归属PLMN，且按照PLMN、FQDN匹配SEPP失败时，使用缺省异网漫游配置。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
修改缺省异网漫游配置：将SEPP模式修改为“TargetApiRoot模式SEPP”，SEPP路由集ID为“1”。
SET SBISEPPDEFAULTSELECTION:SEPPMODE="SEPP_TARGETAPIROOT",SCPROUTESET=1
` 


#### 查询缺省异网漫游配置(SHOW SBISEPPDEFAULTSELECTION) 
#### 查询缺省异网漫游配置(SHOW SBISEPPDEFAULTSELECTION) 


[](None)功能说明 

该命令用于查询缺省异网漫游配置。当需要查询SEPP异网漫游配置中的缺省SEPP模式和SEPP路由集ID时，使用该命令。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SEPPMODE|SEPP模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NO_SEPP|该参数用于设置SEPP异网漫游模式。不启用SEPP：不使用异网漫游。TargetApiRoot模式SEPP：该模式下，服务消费者向NRF发现后，根据发现结果向SEPP发送请求，请求包含选定的服务生产者指向的NF服务实例地址，其中请求的url由目的SEPP节点构成。SEPP将请求路由到选定的NF服务实例。SEPP代理：该模式下的服务消费者向SEPP发送的外部信令请求中无SEPP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。
SCPROUTESET|路由集ID|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置目的NF归属的路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。默认值为0，含义为无效值，仅SEPP模式为不启用SEPP时，该值可为0。当修改SEPP模式为其它模式时，需要修改路由集ID为非0的有效值。




[](None)命令举例 


`
查询缺省异网漫游配置。
SHOW SBISEPPDEFAULTSELECTION

(No.13) : SHOW SBISEPPDEFAULTSELECTION:
-----------------CommonS_HTTP_LB_0----------------
操作维护       SEPP模式              路由集ID 
----------------------------------------------
修改           TargetApiRoot模式SEPP 1        
----------------------------------------------
记录数：1
执行成功开始时间:2021-10-11 16:27:40 耗时: 0.641 秒

` 


## 非直连重选状态码配置 
## 非直连重选状态码配置 


[](None)背景知识 


当NF通过SCP/SEPP进行消息转发时，SBI-GW通过失败重选、重定向、容灾倒换倒回提高周边网元在异常场景下的业务成功率。在该非直连场景下，若业务想在对端返回失败时进行SCP/SEPP或目的NF重选，可用非直连重选状态码配置，SBIGW可根据非直连网元类型和HTTP失败响应状态码匹配重选动作。 




[](None)功能说明 


在对端返回失败响应时，该配置用于配置非直连场景下不同HTTP失败响应码对应的重选动作。默认使用本配置的重选动作，若原因模板标识引用了原因模板，则根据原因码匹配重选动作。 




[](None)子主题： 






### 新增非直连重选状态码配置(ADD SBIRESELECTSTACODE) 
### 新增非直连重选状态码配置(ADD SBIRESELECTSTACODE) 


[](None)功能说明 

该命令用于新增非直连重选状态码配置。当NF通过SCP/SEPP进行消息转发但转发失败时，若需要根据非直连网元类型和HTTP响应状态码确定重选动作时，使用该命令。命令执行成功后，若本网元发送消息失败，可根据重选动作进行重选。 


[](None)注意事项 

默认使用本配置的重选动作，当需要使用原因码模板参数中的重选动作，在本配置的原因码模板标识参数中引用。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
新增非直连重选状态码配置，非直连网元类型为C模式SCP，状态码为404，原因模板标识为1，重选动作为重选SCP/SEPP
ADD SBIRESELECTSTACODE:NONDIRECTNFTYPE=SCP_C,STATUSCODE=404,CAUSEPF=1,ACTION=RESELECT_SCP_SEPP;
` 


### 修改非直连重选状态码配置(SET SBIRESELECTSTACODE) 
### 修改非直连重选状态码配置(SET SBIRESELECTSTACODE) 


[](None)功能说明 

该命令用于修改非直连重选状态码配置。当非直连网元类型和响应状态码配置对应的重选需要修改时，使用该命令。命令执行成功后，修改对应的重选动作。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
修改非直连重选状态码配置，非直连网元类型为C模式SCP，状态码为404，原因模板标识为0，重选动作为重选目的NF。
SET SBIRESELECTSTACODE:NONDIRECTNFTYPE=SCP_C,STATUSCODE=404,CAUSEPF=0,ACTION=RESELECT_TARGETNF;
` 


### 删除非直连重选状态码配置(DEL SBIRESELECTSTACODE) 
### 删除非直连重选状态码配置(DEL SBIRESELECTSTACODE) 


[](None)功能说明 

该命令用于删除非直连重选状态码配置。当不再需要非直连网元类型和响应状态码配置对应的重选动作时，使用该命令。命令执行成功后，该非直连网元类型和响应状态码配置不再进行重选。 


[](None)注意事项 

删除该配置后，SBIGW不再根据该非直连网元类型和响应状态码配置进行重选。请谨慎执行命令。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 必选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
删除非直连重选状态码配置，非直连网元类型为C模式SCP，状态码为404。
DEL SBIRESELECTSTACODE:NONDIRECTNFTYPE=SCP_C,STATUSCODE=404;
` 


### 查询非直连重选状态码配置(SHOW SBIRESELECTSTACODE) 
### 查询非直连重选状态码配置(SHOW SBIRESELECTSTACODE) 


[](None)功能说明 

该命令用于查询非直连重选状态码配置。当需要查询当前的非直连重选状态码配置时，执行该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NONDIRECTNFTYPE|非直连网元类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于设置非直连网元类型。业务在使用SCP/SEPP进行消息转发时，该参数具体取值如下：C模式SCP。D模式SCP。代理模式SCP。TargeApiRoot模式SEPP。代理模式SEPP。中间SCP/SEPP网元。
STATUSCODE|状态码|参数可选性: 任选参数类型: 数字参数范围: 400-599|该参数用于设置HTTP失败响应状态码。状态码取值范围为400-599。
CAUSEPF|原因模板标识|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 0|该参数用于设置非直连重选状态码配置引用的原因模板。默认值为0，表示不引用，此时重选动作为本配置所配置的重选动作。如果本参数取值不为0，则匹配原因模板参数的原因码，根据模板参数的重选动作重选。原因模板编号配置使用SHOW SBICAUSECODEPFID查看。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置非直连网元类型和响应状态码配置对应的失败重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
查询非直连重选状态码配置。
SHOW SBIRESELECTSTACODE;

(No.1) : SHOW SBIRESELECTSTACODE:
-----------------CommonS_HTTP_LB_0----------------
操作维护       非直连网元类型 状态码 原因模板标识 重选动作     
---------------------------------------------------------------
复制 修改 删除 C模式SCP       404    1            重选SCP/SEPP 
--------------------------------------------------------------
记录数：1

执行成功开始时间:2022-08-09 10:40:10 耗时: 1.029秒


` 


# NRF号码分析配置 
# NRF号码分析配置 


[](None)背景知识 


在服务发现流程中，获取NRF服务器模板信息有以下几种方式： 

业务消息直接指定NRF服务器模板标识 

通过NF Type来获取对应的NRF服务器模板标识 

通过消息中携带的SUPI号码或者GPSI号码来获取对应的NRF服务器模板标识 




[](None)功能说明 

NRF号码分析配置用于在服务发现时，通过消息携带的号码来获取NRF服务器模板信息。
目前NRF号码分析配置支持SUPI号码分析配置、GPSI号码分析配置等操作。 




[](None)子主题： 






## SUPI号码分析配置 
## SUPI号码分析配置 


[](None)背景知识 


配置时SUPI号码限制长度为5-15位，目前只匹配以"imsi-"开头的SUPI号码。 




[](None)功能说明 


SUPI号码分析配置用于在服务发现时，通过消息携带的SUPI号码来获取NRF服务器模板信息。 

当消息携带的SUPI号码在配置的号码段范围内时，可以获取对应配置的NRF服务器模板。 




[](None)子主题： 






### 新增SUPI号码分析配置(ADD SBISUPINUMBERANALYSIS) 
### 新增SUPI号码分析配置(ADD SBISUPINUMBERANALYSIS) 


[](None)功能说明 

本命令用于新增SUPI号码分析配置。当业务不指定NRF服务器模板，SBI-GW需要根据业务携带的SUPI号码来选择NRF服务器模板时，使用该命令。该命令执行成功后，起始号码、结束号码以及引用的NRF服务器模板配置成功。若业务携带的SUPI号码在配置的号码段内，则SBI-GW会选择对应的NRF服务器模板。 


[](None)注意事项 

起始号码和结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。 

配置的NRF服务器模板编号可通过[SHOW SBINRFPROFILE](../mml/1220512.html)命令进行查询。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。
START|开始|参数可选性: 必选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 必选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
新增SUPI号码分析配置，编号为1，起始号码13859，结束号码13900，NRF服务器模板编号为1。 
ADD SBISUPINUMBERANALYSIS:ID=1,START="13859",END="13900",NRFPF=1
` 


### 修改SUPI号码分析配置(SET SBISUPINUMBERANALYSIS) 
### 修改SUPI号码分析配置(SET SBISUPINUMBERANALYSIS) 


[](None)功能说明 

本命令用于修改SUPI号码分析配置。当需要修改SUPI号码分析配置中的起始号码、结束号码或者引用的NRF服务器模板标识时，使用该命令。该命令执行成功后，SBI-GW根据修改后的配置选择对应的NRF服务器模板。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
修改SUPI号码分析配置，编号为1，起始号码13859，结束号码13900，NRF服务器模板编号为1。 
SET SBISUPINUMBERANALYSIS:ID=1,START="13859",END="13900",NRFPF=1
` 


### 删除SUPI号码分析配置(DEL SBISUPINUMBERANALYSIS) 
### 删除SUPI号码分析配置(DEL SBISUPINUMBERANALYSIS) 


[](None)功能说明 

本命令用于删除SUPI号码分析配置。当业务网元不再需要根据SUPI号码来获取NRF服务器模板时，使用该命令。该命令执行成功后，如果业务携带的SUPI号码在原先配置的号码段内，SBI-GW也无法选择对应的NRF服务器模板。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
删除SUPI号码分析配置，编号为1。
DEL SBISUPINUMBERANALYSIS:ID=1
` 


### 查询SUPI号码分析配置(SHOW SBISUPINUMBERANALYSIS) 
### 查询SUPI号码分析配置(SHOW SBISUPINUMBERANALYSIS) 


[](None)功能说明 

本命令用于查询SUPI号码分析配置。当需要查询SUPI号码分析配置的信息时，使用该命令。该命令执行成功后，显示该SUPI号码分析配置的起始号码、结束号码和NRF服务器模板标识。 


[](None)注意事项 


 
如需要查询全部SUPI号码分析配置信息，则不需要输入任何参数。 

 
如需要查询指定的SUPI号码分析配置信息，则需要输入配置索引。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置SUPI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
查询SUPI号码分析配置，编号为1。
SHOW SBISUPINUMBERANALYSIS:ID=1

(No.1) : SHOW SBISUPINUMBERANALYSIS:ID=1
-----------------CommonS_HTTP_LB_0----------------
配置索引        开始              结束              NRF服务器模板标识 
1               13859             13900             1     
记录数：1

执行成功耗时: 0.137 秒

` 


## GPSI号码分析配置 
## GPSI号码分析配置 


[](None)背景知识 


配置时GPSI号码限制长度为5-15位，目前只匹配以"msisdn-"开头的GPSI号码。 




[](None)功能说明 


GPSI号码分析配置用于在服务发现时，通过消息携带的GPSI号码来获取NRF服务器模板信息。 

当消息携带的GPSI号码在配置的号码段范围内时，可以获取对应配置的NRF服务器模板。 




[](None)子主题： 






### 新增GPSI号码分析配置(ADD SBIGPSINUMBERANALYSIS) 
### 新增GPSI号码分析配置(ADD SBIGPSINUMBERANALYSIS) 


[](None)功能说明 

本命令用于新增GPSI号码分析配置。当业务不指定NRF服务器模板，SBI-GW需要根据业务携带的GPSI号码来选择NRF服务器模板时，使用该命令。该命令执行成功后，起始号码、结束号码以及引用的NRF服务器模板配置成功。若业务携带的GPSI号码在配置的号码段内，则SBI-GW会选择对应的NRF服务器模板。 


[](None)注意事项 

起始号码和结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。 

配置的NRF服务器模板编号可通过[SHOW SBINRFPROFILE](../mml/1220512.html)命令进行查询。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。
START|开始|参数可选性: 必选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 必选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 必选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
新增GPSI号码分析配置，编号为1，起始号码13859，结束号码13900，NRF服务器模板编号为1。 
ADD SBIGPSINUMBERANALYSIS:ID=1,START="13859",END="13900",NRFPF=1
` 


### 修改GPSI号码分析配置(SET SBIGPSINUMBERANALYSIS) 
### 修改GPSI号码分析配置(SET SBIGPSINUMBERANALYSIS) 


[](None)功能说明 

本命令用于修改GPSI号码分析配置。当需要修改GPSI号码分析配置中的起始号码、结束号码或者引用的NRF服务器模板标识时，使用该命令。该命令执行成功后，SBI-GW根据修改后的配置选择对应的NRF服务器模板。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
修改GPSI号码分析配置，编号为1，起始号码13859，结束号码13900，NRF服务器模板编号为1。 
SET SBIGPSINUMBERANALYSIS:ID=1,START="13859",END="13900",NRFPF=1
` 


### 删除GPSI号码分析配置(DEL SBIGPSINUMBERANALYSIS) 
### 删除GPSI号码分析配置(DEL SBIGPSINUMBERANALYSIS) 


[](None)功能说明 

本命令用于删除GPSI号码分析配置。当业务网元不再需要根据GPSI号码来获取NRF服务器模板时，使用该命令。该命令执行成功后，如果业务携带的GPSI号码在原先配置的号码段内，SBI-GW也无法选择对应的NRF服务器模板。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
删除GPSI号码分析配置，编号为1。
DEL SBIGPSINUMBERANALYSIS:ID=1
` 


### 查询GPSI号码分析配置(SHOW SBIGPSINUMBERANALYSIS) 
### 查询GPSI号码分析配置(SHOW SBIGPSINUMBERANALYSIS) 


[](None)功能说明 

本命令用于查询GPSI号码分析配置。当需要查询GPSI号码分析配置的信息时，使用该命令。该命令执行成功后，显示该GPSI号码分析配置的起始号码、结束号码和NRF服务器模板标识。 


[](None)注意事项 


 
如需要查询全部GPSI号码分析配置信息，则不需要输入任何参数。 

 
如需要查询指定的GPSI号码分析配置信息，则需要输入配置索引。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|配置索引|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置GPSI号码分析配置编号。
START|开始|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置起始号码。起始号码由数字组成，长度为5到15位。
END|结束|参数可选性: 任选参数类型: 字符串参数范围: 0-31|该参数用于设置结束号码。结束号码由数字组成，长度为5到15位，且结束号码必须大于起始号码。
NRFPF|NRF服务器模板标识|参数可选性: 任选参数类型: 数字参数范围: 1-255|该参数用于设置NRF服务器模板编号，对应NRF服务器模板的信息可以通过SHOW SBINRFPROFILE命令进行查询。




[](None)命令举例 


`
查询GPSI号码分析配置，编号为1。
SHOW SBIGPSINUMBERANALYSIS:ID=1

(No.1) : SHOW SBIGPSINUMBERANALYSIS:ID=1
-----------------CommonS_HTTP_LB_0----------------
配置索引        开始              结束              NRF服务器模板标识 
1               13859             13900             1     
记录数：1

执行成功耗时: 0.137 秒

` 


# 订阅参数配置 
# 订阅参数配置 


[](None)背景知识 


当订阅者NF向NRF订阅其他NF的信息时，可以在初始订阅请求的消息体中携带SubscriptionData参数，其中包含了若干订阅相关参数。 




[](None)功能说明 


当需要新增或修改初始订阅请求消息体携带的某些参数值时，可以使用该配置。如果不配置订阅参数，则订阅请求会携带默认的参数值。 




[](None)子主题： 






## 修改订阅参数配置(SET SBISUBPARAM) 
## 修改订阅参数配置(SET SBISUBPARAM) 


[](None)功能说明 

该命令用于修改订阅参数配置。当需要新增或修改初始订阅请求消息体携带的某些参数值时，需要使用该命令。新增或修改后的参数会在后续的初始订阅流程中使用。 


[](None)注意事项 

修改该配置可能会导致已存在的订阅的通知请求处理异常，需要谨慎修改。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NOTIFICATIONPREFIX|通知URI前缀|参数可选性: 任选参数类型: 字符串参数范围: 5-64默认值: nf-notification/v1|当订阅者NF发送初始订阅请求时，会在消息体中携带NF状态通知URI(nfStatusNotificationUri)参数。该参数用于设置通知URI中除了scheme、主机名和端口之外的其他参数前缀部分。
INTERPLMNSUBSWITCH|异网漫游订阅开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SWITCH_ON|异网漫游订阅是指本端的公共陆地移动网（PLMN）的网元对远端的公共陆地移动网（PLMN）的网元进行订阅，且两者所处的公共陆地移动网（PLMN）不同。当订阅者NF发送初始订阅请求时，会在消息体中携带异网漫游订阅开关参数。该参数用于决定异网漫游订阅是否开启。
SUBREQINTERPLMNFQDN|订阅者Inter Plmn Fqdn|参数可选性: 任选参数类型: 字符串参数范围: 0-256|当订阅者NF发送初始订阅请求时，会在消息体中携带订阅者Inter Plmn Fqdn参数。该参数用于设置订阅者FQDN。N/A表示取消订阅者FQDN设置。
CBINTERPLMNFQDN|nfStatusNotificationUri携带Inter Plmn Fqdn开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SWITCH_OFF|当订阅者NF发送初始订阅请求时，会在消息体中携带nfStatusNotificationUri携带Inter Plmn Fqdn开关参数。该参数用于设置异网漫游订阅是否携带SUBREQINTERPLMNFQDN。若开启，异网漫游订阅携带SUBREQINTERPLMNFQDN。若关闭，异网漫游订阅携带IP地址。




[](None)命令举例 


`
修改订阅参数配置：通知URI前缀为“nf-notification/v1”，异网漫游订阅开关为开启，订阅者Inter PLMN FQDN为“zte.com.cn”，nfStatusNotificationUri携带Inter PLMN FQDN开关为开启。
SET SBISUBPARAM:NOTIFICATIONPREFIX="nf-notification/v1",INTERPLMNSUBSWITCH=SWITCH_ON,SUBREQINTERPLMNFQDN="zte.com.cn",CBINTERPLMNFQDN=SWITCH_ON;
` 


## 查询订阅参数配置(SHOW SBISUBPARAM) 
## 查询订阅参数配置(SHOW SBISUBPARAM) 


[](None)功能说明 

该命令用于查询订阅参数配置。当需要查询订阅参数时，使用该命令。 


[](None)注意事项 

无


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NOTIFICATIONPREFIX|通知URI前缀|参数可选性: 任选参数类型: 字符串参数范围: 5-64默认值: nf-notification/v1|当订阅者NF发送初始订阅请求时，会在消息体中携带NF状态通知URI(nfStatusNotificationUri)参数。该参数用于设置通知URI中除了scheme、主机名和端口之外的其他参数前缀部分。
INTERPLMNSUBSWITCH|异网漫游订阅开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SWITCH_ON|异网漫游订阅是指本端的公共陆地移动网（PLMN）的网元对远端的公共陆地移动网（PLMN）的网元进行订阅，且两者所处的公共陆地移动网（PLMN）不同。当订阅者NF发送初始订阅请求时，会在消息体中携带异网漫游订阅开关参数。该参数用于决定异网漫游订阅是否开启。
SUBREQINTERPLMNFQDN|订阅者Inter Plmn Fqdn|参数可选性: 任选参数类型: 字符串参数范围: 0-256|当订阅者NF发送初始订阅请求时，会在消息体中携带订阅者Inter Plmn Fqdn参数。该参数用于设置订阅者FQDN。N/A表示取消订阅者FQDN设置。
CBINTERPLMNFQDN|nfStatusNotificationUri携带Inter Plmn Fqdn开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SWITCH_OFF|当订阅者NF发送初始订阅请求时，会在消息体中携带nfStatusNotificationUri携带Inter Plmn Fqdn开关参数。该参数用于设置异网漫游订阅是否携带SUBREQINTERPLMNFQDN。若开启，异网漫游订阅携带SUBREQINTERPLMNFQDN。若关闭，异网漫游订阅携带IP地址。




[](None)命令举例 


`
查询订阅参数配置配置。
SHOW SBISUBPARAM

(No.109) : SHOW SBISUBPARAM:
-----------------CommonS_HTTP_LB_0----------------
操作维护       通知URI前缀                 异网漫游订阅开关        订阅者Inter Plmn Fqdn      nfStatusNotificationUri携带Inter Plmn Fqdn开关
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
修改           nf-notification/v1              开启                    zte.com.cn                                 关闭                                                                       
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-04-12 17:10:16 耗时: 2.104 秒

` 


# 原因码模板配置 
# 原因码模板配置 


[](None)背景知识 


当NF通过SCP/SEPP进行消息转发时，SBI-GW通过失败重选、重定向和容灾倒换倒回流程提高周边网元在异常场景下的业务成功率。当NF通过SCP/SEPP进行消息转发时，若发生消息外发超时，网元内部消息发送失败，网元外部回失败响应的场景，都会触发SBI-GW启动失败重选流程。在该失败场景下，可使用原因码模板配置进行SCP/SEPP或目的NF重选。 




[](None)功能说明 


原因码模板配置包括原因模板编号配置和原因模板参数配置。非直连流程失败时，可配置该组合命令，由非直连重选状态码配置引用后触发失败重选流程。无该配置时，无法根据失败原因码确定重选动作。 




[](None)子主题： 






## 原因码模板编号配置 
## 原因码模板编号配置 


[](None)背景知识 


当NF通过SCP/SEPP进行消息转发时，SBI-GW通过失败重选、重定向、容灾倒换倒回流程提高周边网元在异常场景下的业务成功率。在NF通过SCP/SEPP进行消息转发失败时，可使用原因码模板编号配置确定原因码重选模板。 




[](None)功能说明 


当NF通过SCP/SEPP进行消息转发失败时，若需要根据失败响应中的原因码确定重选动作，可使用该配置。一个原因码模板编号下可配置多个原因码模板参数。若需要根据原因码确定重选动作，在非直连重选状态码配置中引用该模板。无该配置时，非直连重选状态码配置中无法引用原因码模板。 




[](None)子主题： 






### 新增原因码模板编号配置(ADD SBICAUSECODEPFID) 
### 新增原因码模板编号配置(ADD SBICAUSECODEPFID) 


[](None)功能说明 

该命令用于新增原因码模板编号配置。当NF通过SCP/SEPP进行消息转发但转发失败时，若需要根据失败原因码确定重选动作，执行该命令。命令执行成功后，在原因码模板参数、非直连重选状态码配置中可引用该模板编号。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)命令举例 


`
新增原因码模板编号配置，标识为1，名称为SCP。
ADD SBICAUSECODEPFID:ID=1,NAME="SCP"
` 


### 修改原因码模板编号配置(SET SBICAUSECODEPFID) 
### 修改原因码模板编号配置(SET SBICAUSECODEPFID) 


[](None)功能说明 

该命令用于修改原因码模板编号配置。非直连场景下，若需要修改原因码模板编号对应的名称时，使用该命令。命令执行成功后，修改该模板编号对应的名称。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)命令举例 


`
修改原因码模板编号配置，标识为1，名称为SEPP。
SET SBICAUSECODEPFID:ID=1,NAME="SEPP"
` 


### 删除原因码模板编号配置(DEL SBICAUSECODEPFID) 
### 删除原因码模板编号配置(DEL SBICAUSECODEPFID) 


[](None)功能说明 

该命令用于删除原因码模板编号配置。当不再需要该非直连失败重选的原因码模板时，使用该命令。命令执行成功后，删除该原因码模板编号配置，SBIGW不再根据该原因模板获取重选动作。 


[](None)注意事项 

删除原因码模板编号配置前，需要先删除引用该配置的原因码模板参数配置。删除该配置后，无法根据该模板编号获取重选动作，请谨慎执行。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)命令举例 


`
删除原因码模板编号配置，标识为1。
DEL SBICAUSECODEPFID:ID=1
` 


### 查询原因码模板编号配置(SHOW SBICAUSECODEPFID) 
### 查询原因码模板编号配置(SHOW SBICAUSECODEPFID) 


[](None)功能说明 

该命令用于查询原因码模板编号配置。当需要查询原因码模板编号配置，使用该命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板编号。
NAME|名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置原因码模板编号对应的名称。仅用于表示标识的名称。




[](None)命令举例 


`
查询原因码模板编号配置。
SHOW SBICAUSECODEPFID

(No.1) : SHOW SBICAUSECODEPFID:
-----------------CommonS_HTTP_LB_0----------------
操作维护       标识 名称 
-------------------------
复制 修改 删除 1    SEPP 
-------------------------
记录数：1
执行成功开始时间:2022-07-08 05:57:44 耗时: 0.142 秒

` 


## 原因码模板参数配置 
## 原因码模板参数配置 


[](None)背景知识 


当NF通过SCP/SEPP进行消息转发时，SBI-GW通过失败重选、重定向、容灾倒换倒回流程提高周边网元在异常场景下的业务成功率。在NF通过SCP/SEPP进行消息转发失败时，可使用原因码模板参数配置确定原因码对应的重选动作。 




[](None)功能说明 


当NF通过SCP/SEPP进行消息转发失败时，若需要根据失败响应中的原因码确定重选动作，可使用该配置。原因码模板参数配置用于对失败原因进行匹配，匹配成功后，根据重选动作触发失败重选流程。无该配置时，失败响应中的原因码无法匹配重选动作。 




[](None)子主题： 






### 新增原因码模板参数配置(ADD SBICAUSECODEPFPARAM) 
### 新增原因码模板参数配置(ADD SBICAUSECODEPFPARAM) 


[](None)功能说明 

该命令用于新增原因码模板参数配置。当NF通过SCP/SEPP进行消息转发但转发失败时，若需要根据失败原因码确定失败重选动作时，使用该命令。命令执行成功后，该模板参数归属于指定的模板编号，SBIGW可根据原因码匹配重选动作。 


[](None)注意事项 

新增模板参数前，需要先执行新增原因码模板编号配置。 
引用的模板编号必须存在，可通过[SHOW SBICAUSECODEPFID](../mml/1223107.html)命令查询当前配置的原因码模板编号信息。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
新增原因码模板参数配置，标识为1，原因码为SCP_FAILURE，重选动作为RESELECT_SCP_SEPP。
ADD SBICAUSECODEPFPARAM:ID=1,CAUSE="SCP_FAILURE",ACTION="RESELECT_SCP_SEPP"
` 


### 修改原因码模板参数配置(SET SBICAUSECODEPFPARAM) 
### 修改原因码模板参数配置(SET SBICAUSECODEPFPARAM) 


[](None)功能说明 

该命令用于修改原因码模板参数配置。当需要修改原因码模板参数对应的重选动作时使用该命令。命令执行成功后，修改该原因码对应的重选动作。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
修改原因码模板参数配置，标识为1，原因码为SCP_FAILURE，重选动作为RESELECT_TARGETNF。
SET SBICAUSECODEPFPARAM:ID=1,CAUSE="SCP_FAILURE",ACTION="RESELECT_TARGETNF"
` 


### 删除原因码模板参数配置(DEL SBICAUSECODEPFPARAM) 
### 删除原因码模板参数配置(DEL SBICAUSECODEPFPARAM) 


[](None)功能说明 

该命令用于删除原因码模板参数配置。当该失败原因码不需要重选时，使用该命令。命令执行成功后，SBIGW不再根据该原因码获取重选动作。 


[](None)注意事项 

删除该原因码模板参数配置后，SBIGW不再根据该原因码获取重选动作。请谨慎执行命令。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
删除原因码模板参数配置，标识为1，原因码为SCP_FAILURE。
DEL SBICAUSECODEPFPARAM:ID=1,CAUSE=SCP_FAILURE
` 


### 查询原因码模板参数配置(SHOW SBICAUSECODEPFPARAM) 
### 查询原因码模板参数配置(SHOW SBICAUSECODEPFPARAM) 


[](None)功能说明 

该命令用于查询原因码模板参数配置。当需要查询当前的原因码模板参数配置时，使用该命令。命令执行成功后，系统显示所有原因码对应的重选策略。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|标识|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于设置原因码模板参数标识。该参数引用原因码模板编号配置，原因码模板编号配置使用SHOW SBICAUSECODEPFID查看。
CAUSE|原因码|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置失败原因码。CAUSE值只能是大写字符或下划线_组成的字符串。
ACTION|重选动作|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置失败原因码对应的重选动作。重选SCP/SEPP：由SCP/SEPP引起的失败，重选SCP/SEPP。重选目的NF：由目的NF引起的失败，重选目的NF。




[](None)命令举例 


`
查询原因码模板参数配置。
SHOW SBICAUSECODEPFPARAM

(No.1) : SHOW SBICAUSECODEPFPARAM:
-----------------CommonS_HTTP_LB_0-----------------
操作维护           标识    原因码       重选动作     
---------------------------------------------------
复制 修改 删除    1      SCP_FAILURE   重选SCP/SEPP 
---------------------------------------------------
记录数：1
执行成功开始时间:2022-07-08 06:17:37 耗时: 0.144 秒

` 


# 性能统计目的NF类型映射配置 
# 性能统计目的NF类型映射配置 


[](None)背景知识 


当进行秒级性能统计时，通过该配置，可以选择对不同网元类型的服务发现流程进行统计。 




[](None)功能说明 


性能统计目的NF类型映射配置用于秒级性能统计 中，服务发现请求中的targetNfType与配置匹配，则上报该网元的统计。 




[](None)子主题： 






## 新增性能统计目的NF类型映射配置(ADD PMSTATNFTYPEMAPPING) 
## 新增性能统计目的NF类型映射配置(ADD PMSTATNFTYPEMAPPING) 


[](None)功能说明 

该命令用于新增性能统计目的NF类型映射配置。当进行服务发现相关流程的秒级性能统计时，如果配置了目的NF类型编号与对应目的NF类型，如果服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。 


[](None)注意事项 

无。  


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 必选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-65535|该参数用于设置目的NF类型。若服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 任选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-65535|该参数用于设置目的NF类型。若服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。




[](None)命令举例 


`
新增性能统计目的NF类型映射配置：目的NF类型编号为1，目的NF类型为“NRF”。
ADD PMSTATNFTYPEMAPPING:TARGETNFTYPEID=1,TARGETNFTYPE="NRF_TYPE"
` 


## 修改性能统计目的NF类型映射配置(SET PMSTATNFTYPEMAPPING) 
## 修改性能统计目的NF类型映射配置(SET PMSTATNFTYPEMAPPING) 


[](None)功能说明 

该命令用于修改性能统计目的NF类型映射配置。当需要修改性能统计目的NF类型映射时，使用该命令。修改性能统计目的NF类型映射配置成功后，如果服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。 


[](None)注意事项 

无。  


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 必选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。
TARGETNFTYPE|目的NF类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-65535|该参数用于设置目的NF类型。若服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 任选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-65535|该参数用于设置目的NF类型。若服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。




[](None)命令举例 


`
修改性能统计目的NF类型映射配置：目的NF类型编号为1，目的NF类型为“NRF”。
SET PMSTATNFTYPEMAPPING:TARGETNFTYPEID=1,TARGETNFTYPE="NRF_TYPE"
` 


## 删除性能统计目的NF类型映射配置(DEL PMSTATNFTYPEMAPPING) 
## 删除性能统计目的NF类型映射配置(DEL PMSTATNFTYPEMAPPING) 


[](None)功能说明 

该命令用于删除性能统计目的NF类型映射配置。删除性能统计目的NF类型映射配置成功后，如果服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，不会上报该网元的统计。 


[](None)注意事项 

无。  


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 必选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 任选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-65535|该参数用于设置目的NF类型。若服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。




[](None)命令举例 


`
删除性能统计目的NF类型映射配置：目的NF类型编号为1
DEL PMSTATNFTYPEMAPPING:TARGETNFTYPEID=1
` 


## 查询性能统计目的NF类型映射配置(SHOW PMSTATNFTYPEMAPPING) 
## 查询性能统计目的NF类型映射配置(SHOW PMSTATNFTYPEMAPPING) 


[](None)功能说明 

该命令用于查询性能统计目的NF类型映射配置，包括目的NF类型编号、目的NF类型。当需要查询性能统计目的NF类型映射信息时，使用该命令。 


[](None)注意事项 


 
如需要查询全部性能统计目的NF类型映射配置信息，则不需要输入任何参数。 

 
如需要查询指定目的NF类型编号的性能统计目的NF类型映射配置信息，则需要输入目的NF类型编号。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 任选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TARGETNFTYPEID|目的NF类型编号|参数可选性: 任选参数类型: 数字参数范围: 1-5|该参数用于设置性能统计目的NF类型映射配置的目的NF类型编号。
TARGETNFTYPE|目的NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-65535|该参数用于设置目的NF类型。若服务发现中的TARGETNFTYPE参数与配置网元类型相匹配，则上报该网元的统计。




[](None)命令举例 


`
查询性能统计目的NF类型映射配置。
SHOW PMSTATNFTYPEMAPPING

(No.1) : SHOW PMSTATNFTYPEMAPPING:
-----------------CommonS_HTTP_LB_0----------------
操作维护       目的NF类型编号 目的NF类型
--------------------------------------
复制 修改 删除        1                       NRF       
--------------------------------------
记录数：1
执行成功开始时间:2021-01-07 15:43:05 耗时: 0.603 秒

` 


