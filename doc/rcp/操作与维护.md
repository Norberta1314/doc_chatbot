# 操作与维护 
## 拓扑管理 
### 逻辑视图 
在拓扑管理页面，选择菜单逻辑视图，进入逻辑视图页面，如[图1]所示。
图1  逻辑视图页面

逻辑视图由网元树、工具栏和资源图层三部分组成：
网元树
网元树为拓扑图提供导航功能。 
工具栏
工具栏上的按钮说明参见[表1]。
按钮|名称|说明
---|---|---
|默认模式|默认选择该按钮，在逻辑视图页面进行网元选择。
|框选模式|单击该按钮，可以框选需要的网元。
|上移|返回到网元树根目录。
|回退|单击该按钮，可以按照当前访问顺序，访问上一个网元。
|前进|单击该按钮，可以按照当前访问顺序，访问下一个网元。
|保存视图|设置图层的布局，单击该按钮保存布局样式。
|恢复视图|设置图层的布局后，在没有保存布局样式之前，单击该按钮，可以恢复到修改布局之前的样式。
|过滤|按资源名称、链路名称、链路链接状态过滤当前资源。
|展开所有子图层|将当前资源的所有子图层展开。
|收缩所有子图层|将当前资源所有展开的子图层收起。
/|位置解锁/位置锁定|单击，解锁图标，可以拖动图层中的图标位置。单击，锁定图层中图标，不能随意拖动。
|显示图例|显示逻辑视图中图例含义。
|布局设置|设置图层的布局，包括放射布局、矩阵布局。线型可以选择直线、曲线、折线。
|开启编辑/结束编辑|鼠标右键单击源节点，再右键单击目的节点，即可以创建一条虚链路。
/|表格/图层|将当前资源内容切换为表格/图层的显示模式。
|导出|支持将当前图层导出为.svg或.png格式的文件。
|全局设置|设置节点、链路的图标和颜色，文字的样式、告警是否提示，以及图层的背景。
|统计信息|对指定拓扑对象的子孙对象进行统计，链路只要有一端位于当前分支就进行统计。
|搜索|资源搜索具体操作可参见“搜索资源”。
|打开信息概览|选中资源节点，单击该按钮，查询资源信息概览。
/|缩小/放大|单击该按钮，可以缩小/放大整个图层。
|全图显示|资源图层在显示窗口全图显示。
|全屏显示|将当前图层/表格全屏显示。
|打开鸟瞰图|通过鸟瞰图方式查看图层资源。
资源图层
资源图层可用表格/图标的形式显示资源内容。 
图层上的资源图标支持钻取操作。例如双击网元图标，可以进一步查看该网元上的服务、微服务等内容。 
#### 搜索资源 
摘要 :本节介绍如何在逻辑视图中搜索指定的资源。 
步骤 :在逻辑视图页面工具栏，单击高级搜索，弹出资源搜索区域，如[图1]所示。
图1  搜索资源

参数名|参数说明
---|---
查找范围|搜索资源的图层范围：所有图层：在所有图层搜索资源。当前图层：仅在当前图层搜索资源。
资源显示名称|搜索资源的关键字。
参考[表1]，在搜索参数区域中输入搜索条件，并单击查询按钮，符合条件的资源显示在下方表格中，如[图2]所示。
图2  资源搜索结果

#### 查看网元当前告警 
摘要 :本节介绍如何在拓扑图上查看网元的当前告警信息。 
步骤 :在逻辑视图页面，单击左侧资源树上某个网元，该网元图标出现在右侧图层上。
右击网元图标，选择菜单告警→当前告警
，如[图1]所示。
图1  查看网元当前告警

系统跳转到告警监控页面，并显示所选网元的当前告警信息，如[图2]所示。
图2  网元当前告警列表

#### 查看网元信息概览 
摘要 :本节介绍如何查看网元的概览信息。 
网元的概览信息包括以下两个部分： 
网元告警信息汇总：列出该网元上严重、主要、次要及警告级别的告警数。 
网元重点KPI监控：对该网元上重点KPI（可自定义）的性能指标值进行监控。 
网元重点告警：对该网元上重点告警进行监控。 
步骤 :在逻辑视图页面，单击左侧资源树上某个网元，该网元图标出现在右侧图层上。
右击网元图标，在快捷菜单中选择信息概览，如[图1]所示。
图1  网元信息概览

系统弹出网元信息概览对话框，如[图2]所示。维护人员可以查看该网元上各级别的告警数汇总，以及重点监控的KPI指标值。
图2  网元信息概览页面

 说明： 
维护人员可以自定义网元的重点监控KPI指标和重点告警。具体操作可参见“[设置重点KPI监控条件]”
和“[设置重点告警监控条件]”。
#### 设置重点KPI监控条件 
摘要 :本节介绍如何设置网元信息概览页面中重点KPI的监控条件。
前提 :对于需要重点监控的KPI指标，需要预先定义相关的性能测量任务。
步骤 :在逻辑视图页面，参考[查看网元信息概览]，进入信息概览对话框，如[图1]所示。
图1  重点KPI监控

单击按钮，系统弹出设置重点KPI对话框，如[图2]所示。
图2  设置重点KPI对话框

单击新建按钮，进入设置重点KPI对话框。选择需要监控的网元类型和测量对象类型，并勾选需监控的计数器/指标，设置监控粒度，如[图3]所示。
图3  选择测量对象类型

单击确定，所选的计数器/指标出现在监控KPI列表中，如[图4]所示。
图4  监控KPI列表

单击修改按钮，设置KPI的上下门限值，并单击完成，如[图5]所示。
图5  修改门限

#### 设置重点告警监控条件 
摘要 :本节介绍如何设置网元信息概览页面中重点告警的监控条件。
步骤 :在逻辑视图页面，参考[查看网元信息概览]，进入资源信息对话框，如[图1]所示。
图1  资源信息

单击重点告警后的按钮，系统弹出重点告警设置对话框，如[图2]所示。
图2  重点告警设置

从可选区域中选择需要重点关注的网元和告警，单击按钮，添加到已选区域。
单击确定按钮，完成重点告警的设置。
#### 网元分组管理 
概述 :ElasticNet UME系统支持对被管理网元进行分组。在拓扑管理页面，维护人员可以根据管理的需要，将多个网元放入一个分组中。
ElasticNet UME系统的分组具有如下规则：
系统支持创建多个分组。 
在分组中，也可以创建子分组。 
一个分组内可以包含一个或多个网元。 
同一个网元可以同时在多个分组中存在。 
所有网元默认都在ROOT节点中。 
##### 使用场景 
在创建角色时，可以为不同的分组分配不同的操作权限，如[图1]所示。具体操作可参见“新建角色
”。
图1  新建角色权限分配

 说明： 
当父级节点（例如ROOT节点）具有更高级权限时，子节点也会拥有相同的高级权限，而会忽略子节点的权限设置。实际分配权限时，应避免这样的情况。
##### 创建网元分组 
摘要 :本节介绍如何创建网元分组，并添加网元至新建的分组。 
步骤 :在逻辑视图页面，右击拓扑图空白处，在弹出的快捷菜单中选择新建分组，[图1]所示。
图1  创建分组

在基本信息页签，参考[表1]，设置分组基本信息，如[图2]所示。
图2  创建分组

参数名|参数说明
---|---
节点位置|当前分组的层级结构，由当前分组创建时的位置自动填写。
分组名称|新分组的名称。
分组描述|新分组的简短描述信息。
位置规则|如果需要根据网元的位置信息自动添加网元，单击，并输入位置条件。多个位置之间以逗号分隔。
IP规则|如果需要根据网元的IP值自动添加网元，单击，并输入IP段或多个IP值。IP段以“-”线连接，多个IP值以","分隔。
切换至设置成员页签，勾选需要添加至分组的网元，如[图3]所示。
图3  设置分组成员

单击确定，新创建的分组出现在拓扑树上，如[图4]所示。
图4  已加入分组网元

##### 修改网元分组 
摘要 :本节介绍如何修改网元分组，包括分组的名称、分组的成员等。 
步骤 :在资源树上选择一个分组节点，页面右侧显示该分组的网元图标。右击网元图标，选择修改分组，进入修改分组页面，如[图1]所示。
图1  网元分组信息

修改分组页面，根据实际情况的需要，修改如下信息，如[图2]所示。
在基本信息页签，修改分组的基本信息。 
在移动分组页签，选择一个分组，可将当前分组移动至该分组作为该分组的子分组。 
在设置成员页签，添加或删除网元。 
图2  修改分组页面

单击确定。
##### 删除网元分组 
摘要 :本节介绍如何删除网元分组。删除网元分组后，所有该分组下的子分组和成员全部被删除。 
 说明： 
ROOT节点不能删除。
步骤 :在资源树上选择一个分组节点，页面右侧显示该分组的网元图标，如[图1]所示。
图1  删除分组节点

右击网元图标，选择删除分组，弹出删除分组确认对话框，如[图2]所示。
图2  删除分组确认对话框

单击删除，删除该分组。
### 分层接入 
网元接入是通过创建网元代理并启动网元代理把网元接入ElasticNet UME系统。
 说明： 
新建OAM代理时，可能会出现“新建代理失败”的报错信息，参考[FAQ]处理。
#### 新建OAM代理 
摘要 :本节介绍如何新建OAM代理。 
OAM代理用于接入ZTE Common Core的相关网元（版本为V7.X）。 
前提 :已登录ElasticNet UME客户端。 
已确定ElasticNet UME与网元之间的连接方式。 
采用双向认证时，已获取网元侧的证书文件。 
步骤 :在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面

单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为OAM，并输入其它参数，如[图2]所示。
图2  新建OAM代理-公共信息

参数|说明
---|---
代理类型|选择OAM。
代理名称|输入接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置网元的相关连接参数，如[图3]所示。
图3  新建OAM代理-基本属性

参数|说明
---|---
网络地址|网元代理的IP地址。
端口|选择接入对端网元的协议类型及其对应的端口号。当采用HTTP方式接入时，默认端口号为7778。当采用HTTPS（单向认证）方式接入时，默认端口号为8777。当采用HTTPS（双向认证）方式接入时，默认端口号为8778。说明：协议类型和端口号需要与对端网元上的配置保持一致。
协议|选择接入对端网元的协议类型及其对应的端口号。当采用HTTP方式接入时，默认端口号为7778。当采用HTTPS（单向认证）方式接入时，默认端口号为8777。当采用HTTPS（双向认证）方式接入时，默认端口号为8778。说明：协议类型和端口号需要与对端网元上的配置保持一致。
位置|代理的位置。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
在安全参数区域，选择与网元之间的安全参数，如[图4]所示。
图4  安全参数

参数|说明
---|---
认证方式|当ElasticNet UME与代理之间采用HTTPS协议交互时，选择的认证方式。单向认证：客户端对服务端进行认证。双向认证：客户端对服务端进行认证，同时，服务端对客户端也需要进行认证。
根证书|当采用双向认证方式时，单击上传，上传网元提供的根证书文件（例如：ca.cert）。
客户端证书 / 客户端密钥|当采用双向认证方式时，单击上传，上传网元提供的客户端证书文件（例如：oam.srv.cli.crt）和客户端私钥文件（例如：oam.srv.cli.key）。
Token 用户名 / Token 密码|输入网元侧提供的用户名和密码信息。
支持集中安全|选择是否启用集中安全管理：是：启用集中安全。否：不启用集中安全。RCP网元选择是。
（可选）如果网元侧修改了告警SNMP上报时的默认参数，在网元告警参数区域，选择版本为v3，并设置相关的认证参数。
图5  网元告警参数

参数|说明
---|---
版本|选择下级网元告警上报时SNMP V3的参数。NA：表示ElasticNet UME采用默认SNMP参数与下级网元进行对接。v3：表示ElasticNet UME采用定制的SNMP参数与下级网元进行对接，需进一步输入相关的用户名及安全级别。
用户名|当网元采用自定义的SNMP参数时，输入网元侧设置的SNMP v3用户名。
安全级别|当网元采用自定义的SNMP参数时，选择与网元对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
（可选）当需要对网元进行“双域双活升级”操作前，需要在双域双活升级参数区域中，选择支持双域升级，并配置新旧网元在两个域中的相关IP地址，如[图6]所示。
 说明： 
“双域双活升级”是指在对网元版本升级过程中，先在新的域中创建新版本网元，再将旧域中网元上的业务逐渐迁移至新网元，以实现网元升级过程中不中断业务。 
图6  双域双活升级参数

参数|说明
---|---
支持双域升级|在需要进行“双域双活升级”操作前，需要选择是，并填写新旧网元的IP参数，供升级组件使用。
实地址1 / 实地址2|分别填写新旧网元在两个域中的实际IP地址。
NAT地址1 / NAT地址2|当ElasticNet UME与网元之间存在防火墙时，分别输入新旧网元经过防火墙NAT映射后的IP地址及端口号。
NAT端口1 / NAT端口2|当ElasticNet UME与网元之间存在防火墙时，分别输入新旧网元经过防火墙NAT映射后的IP地址及端口号。
输入相关参数后，单击新建按钮，完成OAM代理的创建。
#### 管理代理 
摘要 :本节介绍如何对对代理进行查看、启动、停止、修改、删除、同步操作。 
步骤 :在拓扑管理页面，选择菜单分层接入，进入分层接入页面， 如[图1]所示。
图1  分层接入

根据不同情况，选择执行如下操作。 
如果...|那么...
---|---
查看代理|选择代理名称，单击的查看按钮。
修改代理|选择代理名称单击的停止按钮，停用代理。单击更多，选择修改，修改相关参数。
删除代理|选择代理名称单击的停止按钮，停用代理。单击更多，选择删除，可以删除代理。
同步代理|单击更多，选择同步，手动同步。
#### FAQ 
网元的分层接入，在新建OAM代理时会出现一些报错信息，可以参考相应的处理方法消除。
新建代理失败：OAM标识 XXX 已经存在 
新建代理失败：网元类型XXX无效 
OAM网元重新实例化后无法接入，需要删除后重新接入 
##### 新建代理失败：OAM标识 XXX 已经存在 
故障现象
新建代理失败，提示“OAM标识 XXX 已经存在”，如[图1]所示。
图1  新建代理失败

原因分析
OAM代理上报的标识与已经接入到EMS中的OAM的代理的标识重复。 
解决办法
方法一：修改OAM代理上报的标识值。 
方法二：删除已存在的OAM，重新新建。选择菜单 拓扑→逻辑视图，单击表格图标，如图2所示。图2  视图列表在页面的搜索框中输入待查找的OAM代理的资源北向标识，找到与新建代理标识重复的OAM代理。删除查询到的OAM代理，重新新建上面的OAM代理。 
##### 新建代理失败：网元类型XXX无效 
故障现象
新建代理失败，提示“网元类型 XXX 无效”，如[图3]所示。
图3  新建代理失败

原因分析
当网元上传的的网元类型不在EMS支持的列表中，会提示网元类型无效。 
解决办法
修改OAM代理上报的网元类型值。 
##### OAM网元重新实例化后无法接入，需要删除后重新接入 
故障现象
OAM网元重新实例化后无法接入。 
原因分析
VNFM没有接入EMS时，OAM代理重新实例化后，OAM代理不会自动删除，重新接入。但是新建接入时，EMS会报错，IP地址和端口重复错误。 
解决办法
将EMS中已接入的OAM代理删除，重新新建代理接入。 
## 缩略语 
## 缩略语 
HTTP :Hypertext Transfer Protocol超文本传输协议
### HTTPS 
Hypertext Transfer Protocol Secure超文本传输安全协议
### KPI 
Key Performance Index关键性能指标
### NAT 
Network Address Translation网络地址转换
### SNMP 
Simple Network Management Protocol简单网络管理协议
### USPP 
Universal Subscriber Profile Platform通用用户数据平台
## 配置管理 
### 命令终端 
#### 命令终端概述 
##### 功能 
当下级被管理网元接入ElasticNet UME系统后，需要对新接入的网元进行性能测量相关设置，包括测量指标、测量对象、测量周期的设置，确保网元的性能测量结果可以正常上报至ElasticNet UME服务器，供客户端进行查询。
命令终端是网管系统提供给工程技术人员的命令行工具。通过在此工具中输入单命令或批处理命令，实现对网管对象的管理功能。 
 说明： 
主要介绍命令终端窗口及其相关操作说明，需要结合网元设备的MML命令手册使用。 
##### 窗口 
命令终端窗口如[图1]所示。
图1  命令终端
人机命令树：单击拓扑树中的一个网元节点，该区域显示对应的人机命令。也可以使用关键字搜索到相关的命令。 
资源拓扑树：显示接入的网元。 
命令处理区：显示命令执行的文本结果、操作结果、帮助。 
命令输入区：输入命令和参数。 
#### 按图形窗口执行命令 
摘要 :本节介绍如何通过命令终端窗口的人机命令树，对目标管理对象执行单条MML命令。 
步骤 :选择菜单命令终端→命令处理
，进入命令处理页面。在资源拓扑树上选择一个目标网元节点，人机命令树上自动刷新并显示其对应的MML命令。也可通过搜索方式查询网元。
选择一条要执行的MML命令，命令框中参数显示区输入的对应参数，下面的MML命令就显示相应的输入值，如[图1]所示。
图1  选中命令

单击执行按钮执行命令。命令执行成功，在文本结果页中显示命令执行的结果信息，如[图2]所示。
图2  执行结果

相关任务 :将执行结果区内的信息保存到本地，参见“保存命令执行结果”。 
查看已经执行过的操作记录，参见“查看操作记录”。 
了解命令功能和参数，参见“获取命令帮助”。 
##### 保存命令执行结果 
摘要 :本节介绍如何保存命令执行结果。命令执行结果是将执行结果区内的信息以.html格式文件保存到本地。
步骤 :选择菜单命令终端→命令处理
，进入命令处理页面。
在命令处理区，选择文本结果，显示命令执行的结果，如[图1]所示。
图1  文本结果

单击导出，将文本结果导出到本地，如[图2]所示。
图2  导出按钮

导出选项的说明参见[表1]。
参数名称|参数说明
---|---
全部导出|将所有命令执行结果保存到一个文件中（txt或者html格式）。
按资源节点导出|筛选命令执行结果，将同一资源节点的执行结果保存到一个文件中（txt或者html格式）。
（可选）单击清空按钮，清除命令执行的文本结果。
（可选）单击设置按钮，设置显示的数量，如[图3]所示。
图3  设置显示数量

##### 查看操作记录 
摘要 :本介绍如何查看已经执行过的操作记录。每条操作记录记录着命令执行时间、执行结果（成功或失败）、命令内容等信息。 
步骤 :切换至操作记录页签，可以查看命令的执行记录，如[图1]所示。
图1  查看操作记录

回显命令：用于在命令树上定位该命令，并自动填写执行该命令时的参数，以方便维护人员再次执行该命令。 
查看结果：用于查看该命令之前的执行结果。 
##### 获取命令帮助 
摘要 :本节介绍如何从命令处理窗口获取命令帮助，了解命令功能和参数。
步骤 :在命令树中选择一条命令。 
切换至帮助页签， 可以查看该命令的帮助信息，如[图1]所示。
图1  查看帮助

#### 批量执行命令 
摘要 :本节介绍如何批量执行人机命令。 
用户将需要执行的多条命令，导入批处理文件，运行批处理文件即可。批处理文件最多支持50000条命令，且导入文件大小不超过1M。 
步骤 :选择菜单命令终端→批处理
，进入批处理页面。如[图1]所示。
图1  批处理

选择资源类型，单击选择，在弹出的对话框中选择需要执行批处理的资源节点。
单击导入按钮，从本地导入批处理文件。或者在命令窗口现场编辑批处理命令。
单击执行按钮，批量执行命令。
#### 创建定时任务 
摘要 :本节介绍如何创建定时任务，定期执行MML命令。 
步骤 :选择菜单命令终端→定时任务
，进入定时任务页面，如[图1]所示。
图1  定时任务页面

单击新建按钮，进入新建页面，如[图2]所示。
图2  新建任务

参考[表1]设置相关参数。
参数名称|参数说明
---|---
基本信息|任务名称|定时任务名称。不能包含 \/:;?"'*|$<>%#
描述|基本信息|定时任务的描述说明。
状态|基本信息|激活、挂起。激活状态时该任务生效。
失败中断执行|基本信息|当某一条命令执行失败时，不再执行后续命令。
周期信息|执行策略|可以单次执行，也可以周期执行。周期执行可以选择按照天、周、月、小时执行任务。
操作对象|资源类型|选择定时任务生效的资源节点。
MML命令|操作对象|可以直接编辑MML命令，或者单击导入导入MML命令。
单击新建按钮，系统显示新建任务成功提示，新建任务出现在定时任务列表中。
相关任务 :任务名称|任务说明
---|---
修改定时任务|当定时任务状态为已挂起时，单击操作栏中修改按钮，进入定时任务修改页面。修改定时任务信息并单击保存按钮。
查看定时任务详情|单击详情栏中按钮，查看定时任务详情。
激活定时任务|定时任务状态为已挂起时，单击操作栏中激活按钮，至状态栏状态为已激活。
挂起定时任务|定时任务状态为已激活时，单击操作栏中挂起按钮，至状态栏状态为已挂起。
批量删除定时任务|当定时任务状态为已挂起时，选择需要删除的定时任务，单击删除按钮。
查看定时任务日志|单击操作栏中日志按钮，查看定时任务日志信息。
#### 执行群发脚本 
摘要 :本节介绍如何创建群发脚本，并在一个或多个网元上执行该脚本。 
步骤 :选择菜单命令终端→脚本群发
，进入脚本群发页面，如[图1]所示。
图1  脚本群发页面

单击新建按钮，打开新建页面，如[图2]所示。
图2  脚本导入

参数名称|参数说明
---|---
资源类型|在导航树中选择需要群发执行命令的资源节点。
MML命令|单击编辑按钮，现场编辑需要执行的MML命令脚本。单击导入，从本地选择需要导入脚本文件。
在资源类型中，选择资源类型，并单击右侧选择，选择一个或多个资源，如[图3]所示。单击确定。
图3  选择执行命令的资源

在MML命令区域，导入或手工编辑命令脚本。
单击新建按钮，脚本群发任务出现在列表中，如[图4]所示。
图4  创建任务成功

单击执行，执行群发脚本。
待脚本执行完成后，单击查看结果，系统在执行结果区域中显示脚本执行的结果，如[图5]所示。
图5  查看执行结果

#### 参数配置 
命令终端的参数配置包括用户SSH并发数的配置，以及自定义危险命令配置。
##### 配置SSH并发数 
摘要 :维护人员可以通过SSH方式接入ElasticNet UME并执行命令。系统可以配置某一用户名的并发接入数，超过该数量的SSH接入将被拒绝。
系统支持新建用户并发数，并且可以对用户并发数进行修改、删除等操作。 
步骤 :选择菜单命令终端→参数配置
，默认进入SSH并发配置页签，如[图1]所示。
图1  参数配置页面

单击新建按钮，填写用户名和并发数，如[图2]所示。
图2  设置并发数量页面

单击新建按钮。
若用户名不存在，弹出”新建用户配置失败，请输入正确的用户名”。 
用户名存在，回到参数配置首页并弹出“新建用户配置成功”。 
相关任务 :任务名称|任务说明
---|---
删除用户并发数配置|单击参数配置列表上的删除按钮。在弹出的确认框中单击删除按钮。系统提示“删除用户配置成功”。
修改用户并发数配置|单击修改按钮，修改该用户的并发数。单击确定按钮。系统提示“修改用户配置成功”。
##### 配置危险命令 
摘要 :用户可以将某些命令设置为危险命令，当执行该危险命令时，系统会弹出确认对话框，提示用户是否确认执行该命令。当用户确认后，系统再执行操作，从而降低操作失误的风险。 
 说明： 
某些网元已经默认定义了一些危险命令/高危命令。对于这些命令，无论用户是否进行设置，系统都会认为是危险命令/高危命令。 
步骤 :选择菜单命令终端→参数配置
，切换到危险命令配置页签，如[图1]所示。
图1  危险命令配置页签

在资源拓扑树选择网元资源，在右侧人机命令树选择需要设置为危险的命令，如[图2]所示。
 说明： 
可以通过工具栏的网元类型和网元名称筛选框，快速找到所需的网元。 
可以通过工具栏上的筛选框，通过命令名称或命令助记符快速找到所需的命令。 
图2  选择命令

：表示该命令为普通命令。 
：表示该命令为自定义危险命令。 
单击，设置该条命令为危险命令，如[图3]所示。
图3  设置危险命令

（可选）单击，取消该条命令作为危险命令。
### 查看离线配置变化表 
摘要 :离线配置变化表用于记录网元上未同步的配置数据。当维护人员在ElasticNet UME上对网元的配置数据进行修改后，系统将修改的配置数据存放在网元的配置数据变化表中。当维护人员执行网元的数据同步命令后，该配置数据才会生效。
当ElasticNet UME系统发现被管理网元上存在未同步的配置数据时，会以提示消息的方式提醒维护人员。维护人员可以进一步对未同步的配置数据进行处理，例如：执行数据同步操作，或者撤销数据变更操作等。本节介绍如何在ElasticNet UME上查看各网元的离线配置数据变化表。
 说明： 
部分网元不支持离线配置数据查询。 
前提 :已登录用户需要具备网元配置的权限。 
步骤 :使用具有网元数据配置权限的用户登录ElasticNet UME客户端。当系统中存在该网元的配置数据变化表时，页面右下角会弹出提示信息，如[图1]所示。
图1  离线配置变化表提示消息

单击查看详情，可以跳转到离线配置变化表页面，查看离线配置变化表的状态列，如[图2]所示。
图2  离线配置变化表

其中，状态栏用于显示网元上的离线配置变化表状态，包括：
未知：表示该网元不支持离线配置数据通知功能。维护人员需要手工查询该网元上是否有未同步的配置数据。 
有变化表：表示该网元存在未同步的配置数据，提醒维护人员可以进一步登录命令终端，对该网元未同步的配置数据进行处理。 
对于状态为有变化表的网元，在配置管理页面，选择命令终端→命令处理
，进入命令处理页面。选择存在变化表的网元，并执行数据同步命令，可将变化的配置数据同步到该网元上。具体操作参见“[按图形窗口执行命令]”。
等待5分钟后，在离线配置变化表页面，单击刷新按钮，该网元的信息从离线配置变化表清单中消失。
### 进入RCP策略管理窗口 
摘要 :本节介绍如何通过代理拉远方式，访问策略管理功能模块，实现RCP策略配置。 
 说明： 
如果单击管理按钮，无法打开RCP策略管理页面，单击下载链接，下载并安装ielink插件。
步骤 :登录EM客户端，选择菜单配置→RCP策略管理
或配置→核心网业务管理→RCP策略管理
，打开RCP策略管理页面，如[图1]所示。
图1  RCP策略管理

选择网元实例，单击管理按钮，进入策略配置页面， 如[图2]所示。
图2  策略配置

## 缩略语 
## 缩略语 
### MML 
Man Machine Language人机语言
### OSD 
Open Script Designer脚本设计器
### OSE 
Open Script Execution Engine脚本执行引擎
### SDK 
Software Development Kit软件开发工具
### SSH 
Secure Shell安全外壳协议
### UME 
Unified Management Expert统一管理专家
## 安全管理 
### 安全管理概述 
#### 功能简介 
安全管理用于确保用户对ElasticNet UME系统的合法使用，保证系统正常、可靠地持续运行。
安全管理包括用户账户管理（即管理角色、操作集、用户、资源）以及为平台各服务组件提供统一的身份认证和授权管理，从而实现不同权限的用户可访问或管理不同的网络资源。 
ElasticNet UME系统的安全管理员登录ElasticNet UME客户端，打开安全管理页面，在安全管理页面执行安全配置操作。ElasticNet UME服务器端程序提供登录认证和操作鉴权的逻辑处理功能。
#### 管理项关系模型 
安全管理提供了用户组、用户、角色、操作集以及管理资源的管理功能。安全管理关系模型如[图1]所示。
图1  安全管理关系模型

用户组用于管理用户的行政归属，用户必须包含角色且隶属于某个用户组，用户组的定义不影响用户的权限。 
用户的权限由其所属的角色决定。 
角色的权限由操作集和管理资源共同决定。 
一个操作集是一个或多个操作权限的集合。 
### 基本概念 
#### 用户 
用户是系统操作者在ElasticNet UME中的标识，包括用户名、密码和权限等属性。
根据用户类型可以将用户分为以下三种： 
本地用户：指在ElasticNet UME认证登录的用户。 
第三方系统接入用户：用于ElasticNet UME与第三方系统对接的用户，例如ElasticNet UME与OSS系统对接的用户。 
远端用户：用于与LDAP服务器或RADIUS服务器对接的用户。 
 说明： 
系统提供的缺省用户admin，具有对整个系统和所有管理对象的最高权限。admin用户可管理所有的管理资源并具有所有的操作权限，同时属于“系统管理员”和“安全管理员”两个角色。 
使用该用户操作务必谨慎，禁止做任何影响系统安全性的操作，例如共享或扩散admin用户的用户名和密码。 
#### 角色 
角色是操作权限和管理资源的集合。 
角色中所包含的用户具有该角色的所有操作权限。通过将用户加入到角色中为用户实现快速授权，使权限管理更加合理和方便。 
#### 操作权限和操作集 
操作权限是指用户可以执行某项具体操作的权限。操作集是多个操作权限的集合。 
安全管理员将操作权限分配给角色后，所属该角色的全部用户可以执行相应操作。安全管理员将操作集赋予角色，所属该角色的全部用户即拥有了操作集的所有操作权限。 
#### 区域 
区域是从地理位置或管理资源使用情况划分的系统子域。安全管理员可根据业务需求创建不同的区域，并按区域为用户授权，进行权限管理。每个区域都可以创建一个区域安全管理员角色，属于这个角色的用户为区域安全管理员。区域安全管理员能够对其管理区域内的资源进行授权。 
安全管理员拥有整个系统的安全管理操作权限，例如：角色管理、用户管理、安全数据维护、调整资源所属区域并创建区域安全管理员等。但安全管理员没有业务相关权限。 
区域安全管理员拥有本区域内的安全管理操作权限，例如：本区域内的角色管理、用户管理，但区域安全管理员没有安全数据的维护权限，也没有业务相关权限。 
授权范围关系如[图1]所示。
图1  授权范围

### 安全管理页面介绍 
使用具有安全管理员权限的账户登录系统，选择菜单系统→安全
，打开安全管理页面。
安全页面左侧功能节点说明参见[表1]。
功能节点|说明
---|---
安全指引|选择节点安全指引，在右侧区域显示安全指引页面。该页面对操作集、角色和用户进行了简要介绍。按照页面箭头所指方向，依次单击新建操作集、新建角色、新建用户、导出安全数据和导入安全数据按钮并进行相应参数设置，可以快速创建操作集、角色、用户、备份用户管理数据以及恢复用户管理数据。
用户管理|选择节点用户管理，在右侧区域显示用户管理页面。可以查询/新建/修改/删除/复制用户，可以查询/新建/修改/删除用户组，同时为用户设置角色权限、账户规则、用户组等操作。在该页面也可以执行强行退出用户和解锁用户操作。
账户规则|选择节点账户规则，在右侧区域显示账户规则页面。可以查询/新建/修改/删除账户规则、设置是否启用强密码，设置账户规则的锁定方式以及执行将用户和账户规则进行批量绑定的操作。
角色管理|选择节点角色管理，在右侧区域显示角色管理页面。可以查询/新建/修改/删除/复制角色，查询/新建/修改/删除操作集，也可以创建导入网元角色。
参数配置|选择节点参数配置，在右侧区域显示参数配置页面。可以配置用户闲置时间、登录横幅是否开启以及编辑登录横幅内容。
认证方式配置|选择节点认证方式配置，在右侧区域显示认证方式配置页面。
金库模式参数配置|金库模式用于对特定网元上执行的危险操作进行二次授权配置。这些危险操作只有经过具有“二次授权”权限的人员的授权确认后才会生效。选择节点金库模式参数配置，在右侧区域显示金库模式参数配置页面。可以对指定网元进行二次授权，可以配置重要的设备参与二次授权控制。
### 创建用户账号 
在系统初始配置和日常操作阶段，需要先规划角色和操作集，再创建用户账号。角色和操作集可以通过新建的方式配置，也可以使用系统默认配置的角色和操作集。 
初始配置用户的工作流程如[图1]所示，操作说明参见[表1]。
图1  初始配置用户流程

步骤|操作|说明
---|---|---
1|新建操作集|将不同的操作权限组成一个集合，以集合的方式将操作权限分配给角色可以降低权限管理的复杂性。
2|新建角色|分配给该角色对网管系统中各项资源的操作权限。
3|新建用户组|根据不同的地域或不同行政部门设置用户组，以方便对用户进行归属管理。
4|定制用户账户规则|设置系统安全策略，如定制用户账户规则。
5|新建用户|为新用户设置用户名和密码，分配用户具有的角色，定义用户所属的用户组。
#### 新建操作集 
摘要 :操作集是一系列操作权限的集合，用来定义角色的操作权限。一个角色与一个操作集进行绑定后，包含该角色的用户即拥有相应操作集内的所有操作权限。 
ElasticNet UME系统默认的操作集包括安全管理员权限、管理员权限、系统维护权限、操作权限、以及查看权限。对应的角色分别为安全管理员、系统管理员、系统维护员、系统操作员以及系统监控员。
安全管理员可以根据实际情况，新建操作集，包含与默认操作集不一致的一系列操作权限。 
相关信息 :系统已经预定义了5个操作集，这些预定义的操作集无法被修改，维护人员可以直接使用，可以满足用户基本的权限分配场景。若用户还有其他的权限分配情况，可自定义操作集。 
系统预定义的操作集如[图1]所示。
图1  默认角色和对应操作集

预定义操作集名称|操作集说明
---|---
安全管理员权限|进行安全数据维护、调整资源所属组织，没有业务相关权限。
管理员权限|除了安全信息维护权限外，对管理系统及被管网络有不受限制的完全访问权，不能够对单个资源进行分配。
系统维护权限|当该权限分配给某个资源时，具备对该资源不受限制的完全访问权限，包括资源帐号等敏感信息的修改权限。
操作权限|当该权限分配给某个资源时，可对该资源进行浏览，并进行一般的配置修改以完成开局、日常维护、故障处理等工作，但不能够修改资源的帐号等一些敏感的配置信息。
查看权限|当该权限分配给某个资源时，仅能够对该资源进行查询操作。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单角色管理，打开角色管理页面，切换到操作集页签，如[图2]所示。
图2  操作集

单击新建操作集按钮，打开新建操作集页面，如[图3]所示。
图3  新建操作集

 说明： 
操作集分配情况的操作树上的选项与实际接入的网元类型有关。 
在基本信息区域框，输入操作集名称和操作集描述；在操作集分配情况区域框，选择该操作集的操作权限。操作集名称不能重复。
单击新建按钮，完成新建操作集并退出新建操作集页面。
相关任务 :任务|操作
---|---
导入操作集|在操作集页面，单击导入操作集按钮，选择用户自定义的操作集文件，单击打开按钮完成操作集的导入。
导出操作集|在操作集页面，单击导出操作集按钮，将操作集以文件形式保存到本地。
查看系统默认操作集|在操作集的列表框中，单击操作集名列的系统默认操作集名称，打开查看操作集页面。该页面显示了系统默认操作集的名称、描述信息，以及该操作集拥有的权限。
查看自定义操作集|在操作集的列表框中，单击操作集名列的用户自定义操作集名称，打开查看操作集页面。该页面显示了用户自定义操作集的名称、描述信息，以及该操作集拥有的权限。
修改操作集|在操作集页面，选中某一个操作集，单击修改按钮，重新配操作。
删除操作集|在操作集页面，选中某一个操作集，单击删除按钮，删除此操作集。
复制操作集|在操作集页面，选中某一个操作集，单击复制按钮，重用此操作集包含的操作，新建成为另一个操作集。
#### 新建角色 
角色对应用户的管理权限，包括操作集和管理资源。ElasticNet UME允许同一角色对不同的网元拥有不同的管理权限。
系统默认的角色包括安全管理员、系统管理员、系统维护员、系统操作员、以及系统监控员。对应的默认操作集分别为安全管理员权限、管理员权限、系统维护权限、操作权限以及查看权限。 
如果默认的角色包含的操作集和管理权限不能满足用户管理的需求，安全管理员可以根据设定的安全管理规划，创建需要的角色。 
安全管理员可以根据需要锁定指定角色。指定角色一旦锁定后，与该角色绑定的用户将不能使用该角色所拥有的权限。未分配角色的用户允许登录ElasticNet UME系统但没有操作权限。
系统预定义的角色参见[表1]。这些预定义的角色无法被修改。
预定义角色名称|角色说明
---|---
安全管理员|进行安全数据维护、调整资源所属组织，没有业务相关权限。
系统管理员|不具备维护安全信息的权限，除此之外对管理系统及被管网络有不受限制的完全访问权。
系统维护员|不具备维护安全信息及管理系统的权限，除此之外具有被管网络的所有权限。
系统操作员|可进行一般的配置修改，不能对管理系统本身进行备份恢复等维护工作，不能修改敏感的资源配置信息。
系统监控员|可对网络信息进行浏览。
##### 新建区域安全管理员角色 
摘要 :区域是从地理位置或管理对象使用情况划分的系统子域。安全管理员可根据业务需求创建不同的区域，并按区域为用户授权，进行权限管理。每个区域都可以创建一个区域安全管理员角色，属于这个角色的用户为区域安全管理员。 
区域安全管理员角色仅仅具有与安全相关的权限，没有业务相关权限。 
本节介绍如何创建区域安全管理员角色。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单角色管理，打开角色管理页面，如[图1]所示。
图1  角色管理页面

单击新建角色，页面如[图2]所示。
图2  选择创建角色

选择区域安全管理员角色，单击确定按钮，打开新建角色页面，如[图3]所示。
图3  区域安全管理员角色页面

在基本信息区域中，输入角色名称和角色描述信息，在权限分配区域中选择角色的管理资源，并分配该资源下的操作权限。新建角色页面的参数说明参见[表1]。
参数名称|参数说明
---|---
基本信息|角色名称|角色的名称。角色名称必须输入，且不能重复。名称可以包含汉字、数字、字母、下划线、中划线、点和空格。
角色描述信息|基本信息|对角色的详细描述信息。
锁定该角色|基本信息|角色锁定后，所有拥有该角色的用户均不能使用该角色赋予的权限。
是否区域安全管理员|基本信息|默认选中，当前新建的角色是区域安全管理员角色。
权限分配|定义角色具有的管理资源（例如：某区域内的网元）。区域安全管理员角色拥有所选资源的安全管理操作权限，可以基于该资源创建角色和用户，并为其分配操作权限。但区域安全管理员角色自身没有资源的相关操作权限。|权限分配
单击新建按钮，完成新建区域安全管理员角色并退出新建角色页面。
##### 新建通用角色 
摘要 :角色对应用户的管理权限，包括操作集和管理资源。ElasticNet UME允许同一角色对不同的网元拥有不同的管理权限。
本节介绍如何新建非区域与安全管理员以外的其他角色。 
步骤 :在安全管理页面，选择菜单角色管理，打开角色管理页面，如[图1]所示。
图1  角色管理页面

单击新建角色，页面如[图2]所示。
图2  选择创建角色

选择其他角色，单击确定按钮，进入新建角色页面，如[图3]所示。
图3  新建其他角色-基本信息区域

在基本信息区域中，输入角色名称和角色描述信息。
参数名称|参数说明
---|---
角色名称|角色的名称。角色名称必须输入，且不能重复。名称可以包含汉字、数字、字母、下划线、中划线、点和空格。
角色描述信息|对角色的详细描述信息。
锁定该角色|角色锁定后，所有拥有该角色的用户均不能使用该角色赋予的权限。
是否区域安全管理员|默认不选中，当前新建的角色不是区域安全管理员角色。
在权限分配区域的资源树中选择角色的管理资源，并在操作集信息列表框中选择对于该资源的的操作权限。
图4  新建其它角色-权限分配区域

参数名称|参数说明
---|---
资源树|定义角色具有的管理资源。从资源树中选取模块节点，并在操作集信息列表中为该资源设置权限。
操作集信息|用于定义角色具有的操作权限。操作集分为系统默认的操作集和用户自定义的操作集（参见“新建操作集”）。
单击新建按钮，完成新建角色操作。
相关任务 :任务|操作
---|---
查看角色信息|在角色管理页面的列表框中，单击角色所在行的角色名，打开查看角色页面。该页面显示了角色名称、描述信息、管理资源以及操作集信息。
查看自定义角色|在角色管理页面，选择角色页签，显示用户自定义的角色。单击角色所在行的角色名，打开查看角色页面。该页面显示了角色名称、描述信息、管理资源以及操作集信息。
查看角色下的用户|在角色管理页面，选择角色页签，显示用户自定义的角色。在角色所在行的操作列，单击查看用户按钮，弹出查看用户对话框。查看分配了该角色的用户信息。
修改角色|在角色管理页面，选择角色页签，显示用户自定义的角色。单击角色所在行的修改按钮，打开修改角色页面。修改自定义角色的描述信息、管理资源以及操作集信息。修改完毕，单击确定按钮完成角色参数的修改。
删除角色|在角色管理页面，选择角色页签，显示用户自定义的角色。在角色所在行的操作列，在更多下拉列表框中选择删除，弹出删除角色对话框。单击删除按钮，删除已配置的角色。
复制角色|在角色管理页面，选择角色页签，显示用户自定义的角色。在角色所在行的操作列，在更多下拉列表框中选择复制，弹出复制角色对话框。输入角色名称和角色描述信息，单击确定按钮完成角色复制。
#### 新建用户组 
摘要 :用户组用于管理用户的行政归属。实际应用中，安全管理员可以根据不同的地域或不同行政部门对用户进行分组，以方便对用户进行归属管理。这个分组就是用户组。UME系统缺省情况下，存在一个根用户组。该用户组是最高组织，所有新建用户组均是其下级子组织。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，进入用户管理页面，如[图1]所示。
图1  用户管理页面

单击用户组/个卡片，在页面下方区域显示用户组配置信息，如[图2]所示。
图2  用户组/个

将光标放置在根用户组上方，单击右侧出现的加号，弹出新建用户组对话框，如[图3]所示。
图3  新建用户组

输入用户组名称以及用户组描述信息，单击新建按钮，系统自动在根用户组下增加下级用户组，如[图4]所示。
图4  新建用户组完成页面

相关任务 :任务|操作
---|---
修改用户组|在用户管理页面，单击修改按钮。修改用户组描述信息。修改完毕单击确定按钮。
删除用户组|在用户管理页面，单击删除按钮，弹出删除对话框。单击删除按钮。
#### 定制用户账户规则 
摘要 :用户账户规则即账户安全策略，提供了用户访问控制功能，包括设置帐号策略、密码策略、登录IP地址控制策略和登录时间控制策略。 
创建用户时，需要绑定账户规则。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单账户规则，打开账户规则页面，如[图1]所示。ElasticNet UME提供默认的账户规则，可以在列表框的规则名称列单击默认规则，查看默认账户规则的参数设置。
图1  账户规则

单击新建账户规则，打开新建账户规则页面，规则名称与密码策略配置项如[图2]所示。
图2  规则名称与密码策略

账号锁定规则配置项如[图3]所示。
图3  账号锁定规则

账号策略配置项如[图4]所示。
图4  账号策略

允许登录IP范围配置项如[图5]所示。
图5  允许登录IP范围

设置账户规则参数。账户规则参数说明参见[表1]。
参数|说明
---|---
规则名称与密码策略|规则名称|输入账户规则名称。
最小密码字符长度|规则名称与密码策略|设置密码的最小长度，最小值：8。
最大密码字符长度|规则名称与密码策略|设置用户密码的最大长度。最大值：64。
密码重复|规则名称与密码策略|选中复选框，启用该功能。设置用户密码不能与最近旧密码重复的次数。取值范围：1-100。
密码规则|规则名称与密码策略|选中复选框，启用强密码检测。启用强密码检测时，需要检测连续字符数、重复字符数、用户名和密码的相同字符数。
首次登录|规则名称与密码策略|选中复选框，启用该功能。绑定该账户规则的用户首次登录时必须修改密码。
密码最大有效期|规则名称与密码策略|设置密码的最大有效期，取值范围：0-365。0表示永不过期。
过期提示|规则名称与密码策略|选中复选框，启用该功能。设置密码过期前需要提示，并设置提前多少天进行提示。
账号锁定规则|锁定规则|永不锁定：用户登录失败不受次数限制，用户不会因登录失败次数过多而被锁定。暂时锁定：用户登录失败次数达到锁定密码错误输入次数的值后锁定用户，超过锁定后解锁时间设定的时长后可以自动解锁。也可以在锁定后，使用系统管理员“admin”用户解锁该账户。被解锁的账户可以重新登录ElasticNet UME系统。永久锁定：用户登录失败次数达到锁定密码错误输入次数设定的值后锁定用户，且不允许该用户再次登录。
锁定后解锁时间|账号锁定规则|设置锁定后，经过多长时间会自动解锁。取值范围：1-4320，单位：分钟。
锁定密码错误输入次数|账号锁定规则|设置用户登录时，连续输入指定次数的错误密码后锁定该帐户。
账号锁定|账号锁定规则|选中复选框，启用该功能。选择是否根据IP地址来锁定用户。
账号策略|用户有效期|设置用户在多少天的有效期内能登录系统。过期后，系统禁止该用户登录。
自动禁用前未登录天数|账号策略|设置用户在多少天没有登录后，自动禁用该用户。
用户名最小长度|账号策略|设置用户名最小长度。
账号登录方式|账号策略|设置用户账号登录的方式。用户仅仅可以通过设置的登录方式登录系统。
工作时间|账号策略|设置允许用户登录系统的工作时间范围。
允许登录IP范围|设置允许用户登录系统的IP地址范围。单击添加IP范围按钮，弹出添加IP范围对话框，设置允许用户登录系统的IP地址范围。|允许登录IP范围
设置完成后，单击新建按钮，保存设置并退出新建账户规则页面。
相关任务 :任务|操作
---|---
将账户规则和用户绑定|在账户规则页面，单击绑定用户按钮，弹出绑定用户对话框。从账户规则下拉列表框中选择账户规则，在用户待选项列表中选择用户。单击确定按钮，批量完成账户规则与用户的绑定。
修改规则|在账户规则页面，在列表框中需要修改的规则所在行，单击修改按钮，打开修改账户规则页面。修改账户规则参数，单击确定按钮完成修改。
删除规则|在账户规则页面，在列表框中需要删除的规则所在行，单击删除按钮，弹出确认对话框。单击确定按钮删除账户规则。
导入密码常用词|单击导入密码常用词按钮，弹出确认对话框。单击导入按钮，选择包含常用密码的文本文件，单击打开按钮导入。
导出密码常用词|单击导出密码常用词按钮，导出设置强密码规则时禁止使用的常用密码。
#### 新建用户 
摘要 :本节介绍如何创建一个新的用户，并为该用户分角色。新建用户必须分配角色，否则使用该用户登录系统后将无任何操作权限。 
一个用户只能归属于一个用户组。新建用户默认属于根用户组。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理

单击新建用户，打开新建用户页面，如[图2]所示。
图2  基本信息页面

基本信息页签的参数说明参见[表1]。
参数名|参数说明
---|---
用户名|新建用户的用户名，即该用户的登录名称。用户名不区分大小写，不允许重复，最长30个字符。
用户全名|用户的全称。最长100个字符。
随机密码|勾选该选项后，系统将随机生成用户的密码，并将密码会发到该用户电子邮件配置的邮箱地址。该用户登录系统时需要使用邮件中的密码登录。
密码|用户登录时输入的口令。在用户账户规则中，可以定制密码的长度范围。
确认密码|再次输入密码，必须和用户密码一致。
电话|新建用户的电话号码。
电子邮件|新建用户的电子邮件。
用户描述|用户描述。
账户规则|选择账户规则，单击查看详情，查看规则名称与密码策略，账号锁定规则和允许登录IP范围。定制一个账号规则参见“定制用户账户规则”。
用户组|选择用户所归属的用户组。新建一个用户组参见“新建用户组”。
二次授权|选择启用选项，该用户可以为其他需要二次授权的网管操作进行授权。
同时登录数限制|设置使用该用户名同时登录ElasticNet UME的用户数量。全局：同一个用户名只允许1个人同时登录。不限制：同一个用户名允许多人同时登录。按IP限制：同一个用户名只允许在同一个IP上多人同时登录。自定义：自定义同一个用户名的同时登录人数。
单击下一步，进入权限分配页签，为该用户分配角色，如[图3]。
图3  权限分配

单击新建按钮，完成用户的创建。
相关任务 :任务|操作
---|---
修改用户|在所有用户页面，在列表框中单击用户所在行的修改按钮，打开修改用户页面。修改用户基本信息参数，单击下一步按钮继续。修改用户对应的角色，修改完毕单击确定按钮。
删除用户|在所有用户页面，在列表框中单击用户所在行的删除按钮，弹出删除用户对话框。单击删除按钮删除用户。
复制用户|在所有用户页面，在列表框中单击用户所在行的更多按钮，在下拉列表框中选择复制，弹出复制用户对话框。输入用户名，单击复制按钮复制对应用户。
查看用户权限|在所有用户页面，在列表框中单击用户所在行的更多按钮，在下拉列表框中选择查看用户权限，弹出查看用户权限对话框。查看用户拥有的权限信息。
设置日志查看范围|在所有用户页面，在列表框中单击用户所在行的更多按钮，在下拉列表框中选择设置日志查看范围，弹出设置日志查看范围对话框。选择角色，单击确认按钮。该用户登录系统后，能在日志管理中查看所选角色对应用户的操作日志信息。
启用/禁用用户|在所有用户页面，在列表框中单击用户所在行的状态列。在下拉列表框中选择可用或禁用，启用被禁用户或禁用已启用用户。
批量修改用户登录密码|在所有用户页面，单击批量修改密码按钮，弹出批量修改密码对话框。输入新密码，在用户列表中选择用户，单击确定按钮，完成批量修改密码。
查询登录用户|参见“查询和管理登录用户”。
强制用户退出登录|参见“强制退出用户”。
#### 映射网元用户 
摘要 :映射网元用户功能是ElasticNet UME获取网元的用户信息，并将网元的用户映射为ElasticNet UME用户。ElasticNet UME系统管理员用户具备网元管理员用户的操作权限，ElasticNet UME普通用户具有映射的网元用户相同的操作权限。
ElasticNet UME用户登录后，第一次通过ElasticNet UME直接登录网元时需输入密码，提示保存，再次登录网元时，无需重复输入用户名密码，直接登录。
ElasticNet UME用户登录网元并执行MML命令时，根据映射的网元用户权限执行命令和鉴权。
前提 :设置映射关系的网元支持集中安全功能。网元集中安全功能的开启参见分层接入
。
##### 操作 
在安全管理页面，选择菜单用户管理，进入用户管理页面，如[图1]所示。
图1  用户管理

单击映射网元用户，进入映射网元用户页面，如[图2]所示。
图2  映射网元用户

参考[表1]，设置映射关系。
参数|说明
---|---
网元|需要设置映射关系的网元。
网管用户|ElasticNet UME与网元用户建立映射关系的用户名。
映射网元用户名|与ElasticNet UME用户建立映射关系的网元用户名。
单击确定，完成映射关系的设置。
### 用户管理日常操作 
#### 查询和管理登录用户 
摘要 :查询并管理当前登录用户的信息。可查询登录用户名，客户端IP地址和登录时间；设置登录用户会话数告警门限值，当系统检测到登录用户数超出某告警设置门限后，自动生成相应级别的告警。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理页面

单击登录用户会话数卡片，在页面下方区域显示登录用户信息，如[图2]所示。
图2  登录用户信息

（可选）设置登录用户会话数门限值。 
单击登录用户会话数告警门限设置按钮，弹出登录用户会话数告警门限设置对话框， 如[图3]所示。
图3  登录用户会话数告警门限设置

设置各类告警门限值，单击确定按钮完成设置。
#### 强制退出用户 
摘要 :当安全管理员进行系统维护，或发现用户试图进行非法操作时，安全管理员可以强制断开该用户与ElasticNet UME的连接，迫使该用户退出系统。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理页面

单击登录用户会话数卡片，在页面下方区域显示当前登录用户信息，如[图2]所示。
图2  登录用户信息

执行如下操作将对应登录用户强行退出。 
如果...|那么...
---|---
强行退出一个用户|在登录用户会话数列表框中用户所在行的操作列，单击强制退出按钮，弹出强制退出对话框。单击退出按钮，强制用户退出登录。
强行退出多个用户|单击登录用户会话数列表框的复选框，选择需要强制退出的用户。单击登录用户会话数列表框上方的强制退出按钮，弹出强制退出对话框。单击退出按钮，强制多个用户退出登录。
#### 解锁用户 
摘要 :用户账户规则中设置了账户锁定的时效及对应的锁定条件。如果用户账户规则的锁定时效参数设置为暂时锁定或永久锁定，用户密码输入错误次数达到了设置的密码错误次数后，ElasticNet UME将锁定该用户账户。
安全管理员可以查看用户锁定情况，并对用户进行解锁操作。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，打开用户管理页面。系统默认显示所有用户信息。
单击锁定用户/人卡片，在页面下方区域显示当前锁定的用户信息，包括被锁定用户、锁定者IP以及锁定时间，如[图1]所示。
图1  当前锁定用户

在列表框中锁定用户所在行的操作列栏，单击解锁按钮，将对应的用户解锁。
#### 禁用用户 
摘要 :当指定用户不被允许登录ElasticNet UME时，安全管理员可以将该用户禁用。
用户被禁用后，不能登录ElasticNet UME。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，打开用户管理页面。
在需要禁用的用户对应的操作列列，选择菜单更多→禁用
，如[图1]所示。
图1  禁用用户

在禁用用户确认对话框中，选择禁用。
图2  禁用用户

相关任务 :任务|操作
---|---
启用用户|在需启用的用户操作列列，选择菜单更多→启用。在确认对话框中，单击启用。
#### 批量修改用户密码 
摘要 :批量修改除安全管理员以外的所有用户的密码，该修改不受任何有关密码规则的限制。可根据需要选择需修改密码的用户，将选中用户的密码修改为统一密码。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理

单击批量修改密码，弹出批量修改密码对话框，如[图2]所示。
图2  批量修改密码对话框

在密码输入框中输入新密码，在确认密码输入框中再次输入新密码。
 说明： 
密码长度输入范围：[8,64]，并必须包含大写字母、小写字母、数字和特殊字符。 
在用户的待选项列表中选择用户，选中的用户自动添加至已选项栏。
单击确定，确认批量修改用户密码。
#### 批量绑定账户规则 
摘要 :绑定用户功能用于将账户规则与多个用户进行批量绑定，可根据需要将多个用户的账户规则批量修改为统一的指定账户规则。 
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单账户规则，打开账户规则页面，如[图1]所示。ElasticNet UME提供默认的账户规则，可以在列表框的规则名称列单击默认规则，查看默认账户规则的参数设置。
图1  账户规则

单击绑定用户按钮，打开绑定用户对话框，如[图2]所示。
图2  绑定用户

从账户规则下拉列表框中选择账户规则。
在用户待选项列表中选择用户，单击确定按钮完成规则的批量绑定。
### 安全数据维护 
#### 参数设置 
##### 设置用户闲置退出时间 
摘要 :设置了用户闲置退出时间参数后，如果登录用户在设置时间内没有任何操作，ElasticNet UME会自动注销该用户。默认用户闲置退出时间为30分钟，建议设置不能小于10分钟，否则会影响用户正常的持续使用。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单参数配置，打开参数配置页面。
单击修改按钮，在认证相关配置区域内设置用户闲置退出时间参数。
图1  设置用户闲时退出时间

单击确定按钮完成修改。
##### 设置同名用户同时登录数限制 
摘要 :系统默认不限制同名用户同时登录系统的数量。本任务介绍如何设置同名用户同时登录ElasticNet UME系统的用户数量。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单参数配置，打开参数配置页面。
单击修改按钮，在认证相关配置区域，选择同名用户同时登录数限制为自定义，并在文本输入框中输入数值。
图1  设置同名用户同时登录数限制

单击确定按钮完成修改。
##### 修改登录横幅信息 
摘要 :ElasticNet UME默认关闭登录横幅。如果将登录横幅状态设置为开启状态，当用户登录时会出现登录横幅显示页面，用户必须单击接受按钮，才能进入系统。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单参数配置，打开参数配置页面。
单击修改按钮，在登录横幅相关配置区域，选择登录横幅状态为开启。如[图1]所示。
图1  参数配置

在登录横幅描述区域，修改横幅内容，单击确定按钮，完成修改。
#### 认证方式配置 
ElasticNet UME除了支持本地认证，还支持与第三方认证服务器对接，实现远端认证。运营商可将登录信息统一部署在第三方认证服务器上。用户登录ElasticNet UME系统时，由第三方认证服务器实现用户的鉴权。
ElasticNet UME支持多种远端认证协议，包括：RADIUS认证、LDAP/LDAPS、LDAP/LDAPS+本地、4A票据等。
ElasticNet UME默认使用本地认证方式。
相关对接的配置指导可以联系中兴通讯技术支持工程师获取。 
##### 配置本地认证 
摘要 :本地认证中心为用户提供统一的身份合法性校验服务。 
本地认证中心包括令牌管理功能，提供获取和校验令牌服务。用户获取到令牌后，该令牌作为用户的一个临时身份许可，用户可以借此来获取一定的系统服务。 
本地认证的令牌在用户身份认证合法之后才予以发放，其有效期支持在系统中可配置。用户身份认证合法后，还需要验证通过该用户设置的安全策略，才被认为是合法用户。 
oAuth2.0提供四种授权模式： 
授权模式|说明
---|---
授权码模式|授权码模式是先获取用户授权码，再通过授权码获取访问令牌的方式，是oAuth2.0的最标准的授权模式。
简化模式|简化模式是应用于只有客户端的微型应用场景，所有认证在浏览器侧完成。EM中业务逻辑都由服务器处理，所以没有该使用场景。
用户凭证模式|用户凭证模式，通过用户凭证（用户名/密码）换取访问令牌的方式，该方式是用户非常信任该认证客户端，可以把密码交给认证客户端的场景下使用，在本系统中可用于北向或者南向对外接口的调用认证。该模式的流程就是传入用户凭证，就可以获取到用户访问令牌。
客户端模式|客户端模式，是用认证客户端代替用户的认证方式，基本不采用。除非应用与资源服务器是非常可信的关系。
步骤 :在安全管理页面，选择菜单认证方式配置，打开认证方式配置页面，如[图1]所示。
图1  本地认证

 说明： 
系统默认是采用本地认证。本地认证，用户名和密码保存在本地ElasticNet UME系统。
如果需要选择其他的认证方式，单击修改按钮，在认证方式下拉框中选择本地即可。
##### 配置中移4A认证 
摘要 :4A是指：认证Authentication、授权Authorization、记账Accounting、审计Audit，中文名称为统一安全管理平台解决方案。即将身份认证、授权、记账和审计定义为网络安全的四大组成部分，从而确立了身份认证在整个网络安全系统中的地位与作用。 
中移的网络安全管控平台通过账号同步管理接口对ElasticNet UME账号进行集中统一的管理。ElasticNet UME账号的权限管理部分，中移网络安全管控平台通过同步接口实现ElasticNet UME侧帐号角色的新增、修改和删除，并完成账号与角色的关联关系建立。角色内部包含的权限信息由ElasticNet UME内部完成。
安全管控平台采用JNDI方式操作ElasticNet UME厂商提供的虚拟LDAP。ElasticNet UME侧提供给安全管控平台具有登录并操作LDAP权限的账号。
ElasticNet UME接入安全管控平台后，对账号的创建、删除、修改密码等操作必须在安全管控平台中完成。在安全管控平台创建ElasticNet UME的账号后即可使用此账号登录并操作ElasticNet UME。
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择中移4A，页面如[图1]所示。
图1  中移4A认证

设置相关参数，单击确定按钮，完成认证方式的配置。
##### 配置Radius认证 
摘要 :RADIUS远程用户拨号认证系统，是目前最广泛的3A协议，即同时兼顾Authentication、Authorization及Accounting三种服务的协定。
Radius协议认证机制灵活，支持PAP、CHAP等认证方式。
Radius服务器对用户的认证过程通常需要利用NAS等设备的代理认证功能，Radius 客户端和服务器之间通过共享密钥认证相互间交互的消息，用户密码采用密文方式在网络上传输，增强了安全性。Radius协议合并了认证和授权过程，即响应报文中携带了授权信息。 
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择Radius，使用Radius认证，用户名和密码保存在Radius服务器。页面如[图1]所示。
图1  Radius认证

参数名|参数说明
---|---
认证方式|选择Radius。
Radius服务器IP地址|RADIUS服务器的IP地址。
Radius服务器端口|RADIUS服务器的端口号。
Radius秘钥|保存在RADIUS服务器上用于用户认证的密码。
Radius超时时间(秒)|设置RADIUS认证时，网络连接等待时间。在设定的时间内如果没有收到RADIUS server返回的应答，登录失败。
Radius验证类型|系统支持以下两种验证类型：PAP：简单明文验证方式。CHAP：加密验证方式，避免建立连接时传送用户的真实密码。
根据对接Radius服务器相关参数，修改相关配置，单击确定按钮，完成认证方式的配置。
##### 配置LDAP/LDAPS认证 
摘要 :LDAP称为轻量目录访问协议，系统和LDAP服务器之间的通信支持普通方式（不加密）、SSL//TLS方式。采用LDAP/LDAPS认证方式，用户信息存储在LDAP服务器上。 
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择LDAP/LDAPS，页面如[图1]所示。
图1  LDAP/LDAPS认证

参考[表1] ，输入相关参数，单击确定按钮，完成认证方式的配置修改。
参数|说明
---|---
认证方式|选择LDAP/LDAPS。
服务器IP地址|LDAP服务器IP地址。
服务器端口|LDAP服务器端口，根据LDAP服务器具体配置来填写。使用非SSL/TLS方式连接LDAP服务器，默认：389。使用SSL/TLS方式连接LDAP服务器，默认：636。
使用Windows Active Directory|选中该项时，则需要填写用户基底参数，即用户的完整DN。用户基底：用户DN前缀：服务账号DN：服务账号密码
使用固定用户DN后缀|选中该项时，则需要配置如下参数：用户DN前缀：需要登录系统的用户在LDAP服务器中的DN前缀，例如：cn=。用户DN后缀：需要登录系统的用户在LDAP服务器中的DN后缀，例如：ou=account,ou=system。
使用固定角色|选中使用固定角色，则 LDAP用户角色 选择用系统定义好的固定角色，例如，系统管理员、系统维护员、系统操作员、系统监控员、安全管理员等。不选中使用固定角色 ，则 角色基底需要输入用于查询LDAP服务器中用户关联的角色。
使用SSL/TLS|选中使用SSL/TLS，表明通过TLS/SSL连接LDAP服务。需要上传LDAP服务使用的SSL的CA证书文件和证书密码。
##### 配置LDAP/LDAPS+本地认证 
摘要 :LDAP/LDAPS+本地认证模式下，在LDAP认证失败后，且用户不是从LDAP中同步的用户，系统尝试使用本地ElasticNet UME系统保存的用户名和密码进行认证。 
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择LDAP/LDAPS+本地，页面如[图1]所示。
图1  LDAP/LDAPS+本地认证

参考[表1]，输入相关参数，单击确定按钮，完成认证方式的配置修改。
参数|说明
---|---
认证方式|选择LDAP/LDAPS。
服务器IP地址|LDAP服务器IP地址。
服务器端口|LDAP服务器端口，根据LDAP服务器具体配置来填写。使用非SSL/TLS方式连接LDAP服务器，默认：389。使用SSL/TLS方式连接LDAP服务器，默认：636。
使用Windows Active Directory|选中该项时，则需要填写用户基底参数，即用户的完整DN。用户基底：用户DN前缀：服务账号DN：服务账号密码
使用固定用户DN后缀|选中该项时，则需要配置如下参数：用户DN前缀：需要登录系统的用户在LDAP服务器中的DN前缀，例如：cn=。用户DN后缀：需要登录系统的用户在LDAP服务器中的DN后缀，例如：ou=account,ou=system。
使用固定角色|选中使用固定角色，则 LDAP用户角色 选择用系统定义好的固定角色，例如，系统管理员、系统维护员、系统操作员、系统监控员、安全管理员等。不选中使用固定角色 ，则 角色基底需要输入用于查询LDAP服务器中用户关联的角色。
使用SSL/TLS|选中使用SSL/TLS，表明通过TLS/SSL连接LDAP服务。需要上传LDAP服务使用的SSL的CA证书文件和证书密码。
##### 配置4A票据认证 
摘要 :ElasticNet UME系统支持与运营商的4A系统进行对接，实现用户账户的集中安全认证。
相关信息 :4A系统是统一安全管理平台，包含认证（Authentication）、账号（Account）、授权（Authorization）、审计（Audit），它可以实现集中认证管理、集中账号管理、集中权限管理和集中审计管理的功能。 
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择4A票据，页面如[图1]所示。
图1  4A票据认证

参考[表1]，设置相关参数。
参数|说明
---|---
认证方式|4A票据。
服务器地址|4A认证服务器地址。
票据认证URL|默认值：  /sso?method=qryUserByTicket。请根据实际情况填写。
票据注销URL|默认值：  /sso?method=logout。请根据实际情况填写。
4A登录URL|可以不填。
本系统Portal|在中移4A系统中配置ElasticNet UME的访问地址： https://ip:port/api/oauth2/v1/chinamobile  ，其中ip和port填写访问ElasticNet UME的浮动IP地址和端口。在中移4A中系统中，访问该地址时需要携带正确的票据信息ticket，票据正确后会跳转到portal中。例如，访问地址：https://10.74.151.54:28001/api/oauth2/v1/chinamobile?ticket=*******。
单击确定按钮，完成认证参数设置。
##### 配置NFV票据认证 
摘要 :对接中移4A系统进行登录，采用NFV票据认证方式认证登录用户。 
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择NFV票据，页面如[图1]所示。
图1  NFV票据认证

参考[表1]，设置相关参数。
参数|说明
---|---
认证方式|NFV票据。
服务器地址|4A认证服务器地址。
票据认证URL|请根据实际情况填写。例如：/casp/qryUserByTicket
票据注销URL|请根据实际情况填写。例如：/casp/logout
4A登录URL|请根据实际情况填写。例如：/casp/auth/login_sy.jsp
APP在4A中编号|请根据实际情况填写。例如：nfvzx
4A状态URL|请根据实际情况填写。例如：/casp/auth/login_sy.jsp。
资源秘钥|请根据实际情况填写。
状态检测超时时间|默认值：0。
Token获取URL|请根据实际情况填写。例如：/casp/v1/security/authentication/token
用户名|请根据实际情况填写。
密码|请根据实际情况填写。
本系统Portal|在中移4A系统中配置ElasticNet UME的访问地址： https://ip:port/api/oauth2/v1/chinamobile ，其中ip和port填写访问ElasticNet UME的浮动IP地址和端口。在中移4A中系统中，访问该地址时需要携带正确的票据信息ticket，票据正确后会跳转到portal中。例如，访问地址：https://10.74.151.54:28001/api/oauth2/v1/?iamcaspticket=*******。
单击确定按钮，完成认证参数设置。
##### 配置OTCP票据认证 
摘要 :对接OTCP系统进行登录，采用OTCP票据认证方式认证登录用户。 
步骤 :在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择OTCP票据，页面如[图1]所示。
图1  OTCP票据认证

参考[表1]，设置相关参数。
参数|说明
---|---
认证方式|OTCP票据。
服务器地址|OTCP服务器地址。
认证客户端ID|请根据实际情况填写。
认证客户端密钥|请根据实际情况填写。
本系统Portal|在OTCP系统中配置ElasticNet UME的访问地址。
单击确定按钮，完成认证参数设置。
#### 开启金库模式 
摘要 :金库模式功能，即当用户进行危险操作时，网管要能够对危险操作进行二次授权。这些危险操作只有经过具有“二次授权”权限的人员的授权确认后才会生效。二次授权过程中，授权人员会对操作的必要性和危害进行二次评估，以最大限度防止误操作的发生。 
系统管理员用户拥有最高权限，执行操作不需要二次授权。 
安全管理员给系统维护员及以上用户授予并管理“二次授权”权限。 
系统管理员用户、隶属于管理员群组中的用户、被安全管理员授予“二次授权”权限的用户拥有二次授权权限。 
被安全管理员授予“二次授权”权限的用户不能自已给自己授权，必须由另外一个具有”二次授权“权限的用户授权。 
需要二次授权的操作包括： 
网元许可证管理：“批量发布”和“批量回滚”功能需要二次授权。 
删除网元代理：只要执行删除操作，就需要二次授权。 
命令处理：命令终端的某些命令，需要二次鉴权。哪些命令需要二次鉴权由提供命令的模块决定。 
系统默认二次授权功能不开启。如果需要开启，则由安全管理员开启并配置需要二次授权操作的网元以及相关操作属性。 
前提 :以安全管理员用户登录ElasticNet UME系统。
步骤 :在安全管理页面，选择菜单金库模式参数配置，打开金库模式参数配置页面，如[图1]所示。
图1  金库模式参数配置

选择发布许可证，参考[表1]，配置二次授权操作的相关属性，如[图2]所示。（回滚许可证开启二次授权操作，参考发布许可证的授权设置操作。）
图2  启用发布许可证操作的金库模式

参数|说明
---|---
金库模式|默认：不启用。如果需要则开启。
二次授权资源|指定对哪些网元的操作需要二次授权。
资源二次授权门限|允许一次操作的对象数量。当一次操作的对象数量低于该门限时，不需要二次授权，当一次操作的对象数量大于或等于该门限时需要二次授权。
资源禁用门限|当一次操作的对象数量大于或等于该门限时，操作会被拦截禁止。
选择删除代理，单击修改按钮，设置二次授权，页面如[图3]所示。（命令处理开启二次授权操作，参考删除代理设置操作。）
图3  启用删除代理操作的金库模式

单击确定，完成授权设置。
#### 安全数据管理 
ElasticNet UME提供安全管理指引，以及安全数据的备份与恢复。
##### 备份用户管理数据 
摘要 :系统支持以.xlsx文件格式导出自定义配置的安全数据。导出的安全数据信息包括用户信息、角色信息以及用户组信息。
前提 :以安全管理员账户登录ElasticNet UME。
步骤 :在安全管理页面，选择菜单安全指引，打开安全指引页面，如[图1]所示。
图1  安全指引

单击导出安全数据，弹出导出安全数据对话框，如[图2]所示。
图2  导出安全数据

配置导出安全数据参数。参数说明参见[表1]。
参数|说明
---|---
安全数据|系统支持导出自定义用户信息，自定义角色信息，以及自定义用户组信息。用户信息：包含用户名、用户全名、状态、用户描述、电话号码、邮箱、所属用户组、所属角色以及同时登录数限制。角色信息：包含角色名、角色描述、以及锁定状态。用户组信息：包含用户组名、用户组描述、以及所属用户组。
登录密码|输入当前账号登录系统的密码。
文件加密|选择是否文件加密。加密后，打开文件或者导入文件时需要输入密码。
文件密码/确认文件密码|文件加密密码，长度不能小于8位，且必须包含字母、数字、特殊字符。
 说明： 
导出安全数据时，不能导出admin用户信息、纯网元用户信息、预定义角色信息以及根用户组信息。 
配置完成，单击导出按钮，将安全数据信息以xlsx格式导出到本地磁盘。
##### 恢复用户管理数据 
摘要 :重新安装系统或者升级系统后，可以导入备份的安全数据，方便快捷的恢复系统用户管理配置。导入的安全数据信息包括用户信息、角色信息以及用户组信息。 
前提 :以安全管理员账户登录系统ElasticNet UME。 
安全数据已经导出并做好备份。 
步骤 :在安全管理页面，选择菜单安全指引，打开安全指引页面，如[图1]所示。
图1  安全指引

单击导入安全数据，打开导入安全数据页面，如[图2]所示。
图2  导入安全数据

单击选择文件按钮，选择安全数据备份文件。
配置导入安全数据参数，参数说明参见[表1]。
参数|说明
---|---
文件密码|请选择需要导入的安全数据文件，若文件已加密，请输入文件的解密密码。
登录密码|输入当前账号登录系统的密码。
文件中包含用户|如果备份安全数据包含用户信息，选择该选项。
新增用户初始密码/确认新增用户初始密码|导入数据时，需要为为导入的用户设置统一的初始密码。初始密码长度不能小于8位，且必须包含字母、数字、特殊字符。
单击导入按钮，系统开始导入安全数据信息。
 说明： 
执行导入操作后，系统会显示导入结果。如果某信息导入失败，系统会显示失败原因。 
## 缩略语 
## 缩略语 
### CHAP 
Challenge Handshake Authentication Protocol挑战握手认证协议
### LDAP 
Lightweight Directory Access Protocol轻量级目录访问协议
### LDAPS 
LDAP over SSL安全LDAP
### PAP 
Password Authentication Protocol密码认证协议
### RADIUS 
Remote Authentication Dial In User Service远端鉴权拨号用户服务
### SSL 
Secure Sockets Layer安全套接字层
## 性能管理 
### 性能管理概述 
#### 基本概念 
##### 概念关系 
性能管理的要点是性能统计任务和测量结果，通过性能管理为指定的测量对象创建测量任务，并得到测量结果。 
性能管理的基本概念包括测量对象类型、测量对象、测量类型、性能计数器、性能指标、采集粒度、查询粒度、性能测量任务、性能门限任务。 
##### 测量对象类型 
测量对象类型是指具有相同属性的测量对象的类型，例如Diameter链路、路由区。 
##### 测量对象 
测量对象是指具体被测量的物理实体和逻辑实体，如某个NF、某条链路、某个跟踪区。
##### 测量类型 
测量类型可以实现对测量对象的某类指标的测量。一个测量对象类型下可以有多个不同的测量类型，例如路由区测量对象类型下的测量类型有：路由区附着测量、路由区更新测量等。 
##### 性能计数器 
性能计数器指测量类型中所包含的具体测量指标，是性能测量的基本单元。每一种测量类型中包含若干个计数器。一个计数器可以通过如下几个属性来描述。 
计数器ID：性能计数器的唯一标识。 
计数器描述：对性能计数器的解释。 
测量触发点：描述性能计数器的触发过程。 
采集方式：计数器采集数据所使用的方式，其取值参见表1。 
取值|名称|说明
---|---|---
CC|累计|累积计数器跟踪统计周期内某事件的累积变化量，且计数器值单向累加。在每个统计周期开始时，计数器将被重置为一个预先定义的值（通常为0）；在统计周期结束时计数器的值即为有效的采集结果。
MAX|最大值|最大值计数器用来对某事件进行最大值统计，且计数器中仅仅保存最大结果。该类型计数器上报的数据是统计周期内的最大值。
MIN|最小值|最小值计数器用来对某事件进行最小值统计，且计数器中仅仅保存最小结果。该类型计数器上报的数据是统计周期内的最小值。
AVG|平均值|平均值计数器采样连续变化事件的数据值，在统计周期结束时计算并上报平均值。
CUR|当前值|当前值计数器用每次上报事件数据替换计数器中的原有数据，在统计周期结束时上报的结果为最近一次上报事件数据。
##### 性能指标 
性能指标可以作为评价网络运行稳定性及安全性的依据。性能指标是维护人员基于性能计数器通过四则运算而定制的一种复合型计数器，包括用户自定义和系统定义两类。 
用户自定义指标：维护人员根据系统现有的计数器，自行定义四则运算公式，在EM客户端上创建。在创建自定义后，维护人员可以对其进行查看、修改、删除操作。 
系统预定义指标：系统自动定义的指标，维护人员可以在EM客户端上查看，但不允许修改和删除。 
##### 采集粒度 
采集粒度是指网管系统对性能数据进行采集的周期，系统支持的采集粒度有：5分钟、15分钟、30分钟、1小时、1天。 
##### 查询粒度 
查询粒度是指查询测量任务数据的统计周期。维护人员可以设置的查询粒度为5分钟、15分钟、30分钟、1小时、1天、1周、1月。 
 说明： 
查询粒度必须大于或等于对应测量任务中设置的采集粒度。 
##### 性能测量任务 
性能测量任务定义了性能数据的收集、存储和传输方式，以及最终数据的展示结果和处理方法。 
一个性能测量任务规定了何时、对何种测量类型的具体指标、以何种周期采集性能数据。 
维护人员在EM客户端上创建性能测量任务，EM根据任务设定的运行周期自动采集指定的性能参数，得出网络性能的统计结果，使维护人员及时了解网络的运行状态。 
##### 性能门限任务 
性能管理提供的性能QoS任务通常称为性能门限任务，QoS是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。当网络过载或拥塞时，QoS能确保重要业务不受延迟或丢弃，以便保证网络的高效运行。
一个性能门限任务规定了何时、对何种测量类型的具体指标进行门限计算。如果计算结果超过了预设的门限值，将产生性能门限告警，并上报到告警管理系统，提醒维护人员关注网络运行的异常情况。 
实现原理 :性能管理涉及的系统主要是EM服务器（例如中兴通讯的ElasticNet UME）、EM客户端和NF，EM客户端采用B/S方式，使用浏览器即可登录到EM服务器。
EM服务器：接收EM客户端操作请求，向NF下发性能测量任务，接收和存储NF上报的性能测量数据，并通过EM客户端展示。EM服务器通过北向接口上报性能测量数据给NMS。 
EM客户端：提供Web页面访问EM服务器，提供性能管理操作界面和结果展示。 
NF：收集呼叫处理信息、信令信息及业务信息，并将这些信息汇总成性能测量任务的结果，上报给EM服务器。 
性能管理总体流程如[图1]所示。
图1  性能管理流程

性能管理总体流程包括测量任务的创建、性能数据入库、性能数据显示以及门限值检查等流程，详细说明如下： 
维护人员通过EM客户端创建性能测量任务，EM服务器将该任务下发到NF。 
NF会按性能测量任务中指定的粒度和其它条件上报性能数据给EM服务器。 
EM服务器保存NF上报的性能数据。 
维护人员通过EM客户端访问EM服务器并查询性能数据，NF的性能数据按照用户的定制查询条件展现在客户端上。 
如果维护人员设置了门限任务，对某个指标设置了门限。当NF上报性能数据时，EM服务器会启动门限判断。如果达到门限，则会上报相应的告警，展现在EM客户端。 
EM服务器通过北向接口，将NF的性能数据提供给上级网管NMS，供北向用户分析。 
#### 性能管理功能 

#### 性能管理功能 

##### 性能指标管理 
性能指标（PI）是基于测量对象的计数器统计，通过对一个或者多个测量对象的计数器进行加、减、乘、除运算得到用户需要的测量指标，可用于门限任务、监控和历史性能数据查询等，支持的数据类型有整型、长整型、浮点型、百分型以及逻辑布尔型。
系统预先定义的性能指标为预定义性能指标，预定义性能指标不支持修改和删除操作。维护人员可根据实际情况，自定义新的性能指标，自定义性能指标支持修改和删除操作。 
##### 测量任务管理 
EM服务器为了采集NF的性能数据，需要在性能管理系统中创建性能测量任务，以便及时获取系统运行时的性能数据。
测量任务管理提供了测量任务的创建、修改、删除、查询、任务同步以及任务运行状态监控等功能。 
测量任务状态具体说明参见[表1]。
测量任务状态|说明
---|---
激活|该测量任务正在运行，EM服务器将会采集指定位置上的指定测量对象在指定时间范围内的性能数据。激活状态的测量任务不可进行修改、删除等操作。
挂起|该测量任务暂时停止数据采集，可通过激活操作恢复数据采集。


##### 性能数据查询 




性能数据查询是日常维护和性能监测的重要操作，维护人员可根据查询的性能数据对系统进行调整和优化。 


维护人员在EM客户端中设置查询条件，EM服务器查询性能数据，并呈现给维护人员。


性能管理系统支持以下几种性能数据查询。 



 
自定义查询性能数据：维护人员通过自定义的条件查询NF性能数据。 

 
按任务查询性能数据：维护人员通过性能测量任务查询与该任务相关的NF性能数据。 

 
按模板查询性能数据：维护人员选择性能数据查询模板，按照模板中设定的条件查询NF性能数据。 

 




##### 性能数据导出 
性能管理功能支持性能查询结果的导出功能，包括手工导出性能测量数据和定时导出性能测量数据两种方式。 
手工导出性能测量数据：当维护人员通过各种方式查询到性能数据时，维护人员通过手工的方式将查询到的性能数据导出为csv、xlsx、html 、pdf文件。 
定时导出性能测量数据：系统支持通过模板创建定时导出任务，定时查询性能测量数据，并将结果自动导出为csv、xlsx、html 、pdf文件。 
##### 性能数据补采 
在异常情况下（如NF与EM服务器通信中断），EM服务器出现性能数据不完整的情况，EM系统的自动补采或者手动补采功能，可以重新对性能数据进行采集。性能数据补采流程如[图1]所示。
图1  性能数据补采流程

性能数据补采流程说明如下： 
EM服务器将性能测量任务下发到被管理的NF。 
当采集周期结束时，NF将测量任务中指定的性能数据上报给EM服务器。 
EM服务器对性能数据进行汇总、存储等操作。 
EM服务器自动判断性能数据是否存在缺失。维护人员也可以通过查询数据的完整性操作，手工检查是否存在数据缺失。 
对于缺失的性能数据，EM服务器自动向NF发起补采请求。维护人员也可以通过补采性能数据操作，手工补采缺失的性能数据。 
NF再次上报EM服务器缺失的性能数据。 
EM服务器按照用户的定制查询条件，将NF的性能数据展现在EM客户端上。 
##### 性能门限告警 
为了方便维护人员监控网络运行状况，及时发现不合理的性能测量指标数据，EM系统提供性能门限告警功能。
维护人员可以针对特定测量任务的具体测量指标设定门限。当该任务指标的测量结果高于或低于设定的门限时，性能管理系统自动向告警系统发送测量任务指标门限告警，以提醒维护人员及时关注该性能指标。维护人员可以根据指标门限告警信息，分析测量值异常的原因并消除此类异常情况。 
EM系统的性能门限告警产生和恢复的流程如[图2]所示。
图2  性能门限告警产生和恢复的流程

性能门限管理功能实现了对测量指标值的监控，如果维护人员设置了门限任务，对某个指标设置了门限，当NF数据上报时，EM服务器会启动门限判断。如果指标值符合触发告警的门限范围，则会上报相应的告警，展现在EM客户端上。如果指标值符合恢复告警的门限范围，则会恢复已经产生的告警。
性能门限告警产生和恢复的流程说明如下： 
采集周期结束时，NF将测量任务中指定的性能数据上报给EM服务器。 
EM服务器检查是否设置了该测量周期指标门限。 
如果设置了门限，EM服务器将NF上报的性能数据与设定的门限进行比对。 
EM服务器判断NF的性能指标值是否达到了告警触发/恢复条件。 
如果NF的性能指标值已经达到了告警触发/恢复条件，EM服务器继续检查当前的系统中是否已经存在该指标的门限告警。 
如果NF性能指标值已经达到了告警触发条件，且当前系统中不存在该指标的门限告警，则产生对应的门限告警；如果NF性能指标值已经达到了告警恢复条件，且当前系统中已存在该指标的门限告警，则产生一条该门限告警清除的消息。 
应用场景 :#### 系统初建时的性能管理操作 
当被管理网元接入ElasticNet UME系统后，需要对新接入的网元进行性能测量相关设置，包括测量指标、测量对象、测量周期的设置，确保网元的性能测量结果可以正常上报至ElasticNet UME服务器，供客户端进行查询。
系统初建时的性能管理操作流程如[图1]所示。
图1  系统初建时的性能管理操作流程

步骤|过程|说明|操作参考
---|---|---|---
1|接入下级被管理网元|在拓扑→分层接入页面中，维护人员可以创建下级被管理网元。|分层接入
2|查询性能测量指标|通常情况下，系统预先定义了多种计数器和性能指标。维护人员可以查找需要关注的性能指标。|查询性能指标
3|分析该性能指标所属的测量对象类型|维护人员查找到需要关注的性能指标后，分析该指标所属的测量对象类型。后续创建测量任务时，需要选择该测量对象类型。|查看测量对象
4|创建测量任务|维护人员在ElasticNet UME客户端，创建性能测量任务，设置相关的采集条件，包括网元、测量对象类型、测量指标、采集粒度和采集时间段等。网元根据测量任务设定的条件，自动采集性能数据并上报。|创建测量任务
5|（可选）创建定时导出任务|ElasticNet UME系统支持通过定时任务来自动查询并导出网元的性能数据。系统支持将查询结果导出为多种格式的文件，并支持将查询结果通过电子邮件发送到指定邮箱，或通过FTP协议传送到指定的FTP服务器上。|创建定时导出任务
#### 日常维护时的性能管理操作 
日常维护时，性能测量任务通常已经创建好了，维护人员需要查看性能测量的结果，检查结果数据是否完整。对于查询到的性能测量数据，维护人员可以设置各种图形化的展示方式，并可将其导出为报表文件。 
日常维护时的性能管理操作流程如[图1]所示。
图1  日常维护时的性能管理操作流程

步骤|过程|说明|操作参考
---|---|---|---
1|查询性能测量结果数据|维护人员可以通过如下几种方式查询性能数据：创建历史性能任务查询创建定时导出任务查询|查询历史性能数据
2|查询数据的完整性|维护人员可以查询指定时间段内，网元上报的性能数据是否完整。|检查性能数据完整性
3|补采性能数据|如果性能数据不完整，维护人员可以通过补采数据操作来尝试补采性能数据。|补采性能数据
4|查询数据的完整性|再次检查性能数据是否完整。如果仍然不完整，则需要分析原因（如：是否与网元的链路断？网元上是否存在性能数据？）|检查性能数据完整性
5|保存性能数据查询结果|维护人员可以将查询到的性能数据导出为多种文件格式进⾏保存。|创建定时导出任务
#### 特殊场景下的性能管理操作 
场景说明 :系统升级割接、重大节日、定位和处理故障时，维护人员通常需要对某些特定的性能指标进行关注。借助实时监控、门限任务等功能，维护人员可以通过监控任务，分析网元的这些性能指标，了解网络的运行情况。 
特殊场景下的性能管理包括如下几种操作： 
通过实时/历史性能数据监控任务，对网元上报给ElasticNet UME服务器的性能数据进行监控。 
通过性能数据门限任务，当网元上报的性能数据超过设定的门限时，产生性能阈值告警。 
##### 历史性能数据监控 
通过历史性能数据监控任务，维护人员对网元上报给ElasticNet UME服务器的性能数据进行监控。
历史性能数据监控操作流程如[图1]所示。
图1  历史性能数据监控操作流程

步骤|过程|说明|操作参考
---|---|---|---
1|检查系统中是否已经存在所需监控的性能指标|检查需要监控的性能指标（计数器/KPI/PI）是否已经存在。|查询性能指标、查询计数器
2|创建性能测量指标|如果需要监控的性能指标不存在，维护人员可以根据需要自己创建一个KPI/PI指标。|新建性能指标
3|检查是否已为该性能指标对应的性能对象（PO）创建了性能测量任务|历史性能数据监控是基于性能测量任务来采集网元的性能指标的。只有当前的性能测量任务中包含了需要监控的指标，网元才会将该指标的数值上报给ElasticNet UME服务器。|-
4|创建性能测量任务|如果当前的性能测量任务中没有包含所需监控指标所属的PO，维护人员需先创建性能测量任务。|创建测量任务
5|创建历史性能数据监控任务|通过历史性能数据监控任务，可对监控指标值进行查询、计算操作，并显示在客户端上，以便维护人员了解网元性能指标的变化情况。|创建历史监控任务
6|设置监控任务指标阈值|在创建历史性能数据监控任务的过程中，维护人员可以为该性能指标值设定一个阈值。历史性能数据监控指标值高于或低于阈值时，会以不同的颜色填充表格背景色。|性能门限任务管理
7|分析监控数据|网元的监控数据可以以表格或图形的形式显示，供维护人员查询及分析。|查询历史性能数据
8|关闭监控任务|当监控结束后，维护人员可以关闭该监控任务。|-
##### 性能数据门限任务监控 
性能门限任务可以帮助维护人员实时掌握所关心的网络运行和质量状况。维护人员可以预先设置告警的门限值。当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警，及时通知维护人员。 
性能门限任务可以对网元的性能计数器/KPI进行监控。 
性能数据门限任务监控流程如[图2]所示。
图2  性能数据门限任务监控流程

步骤|过程|说明|操作参考
---|---|---|---
1|检查系统中是否已经存在所需监控的性能指标|检查需要关注的性能指标（计数器/KPI）是否已经存在。|查询性能指标
2|创建性能测量指标|如果需要关注的性能指标不存在，维护人员可以根据需要自己创建一个KPI指标。|新建性能指标
3|创建性能门限任务|创建一个性能门限任务，该任务需包含所需关注的性能指标。在创建性能门限任务的同时，系统会自动创建一个相关的性能测量任务，用来采集网元的性能指标值。|性能门限任务管理
4|设置性能指标告警门限值|在创建性能门限任务过程中，维护人员可设置性能指标的门限值。|性能门限任务管理
5|监控性能越界告警|当指标的测量结果超过设置的门限值时，系统会产生相应级别的告警。维护人员可以监控这些告警，以了解网元的性能指标是否超过/低于预期。|-
6|挂起/删除门限任务|当监控任务结束后，维护人员可以挂起或删除门限任务。删除门限任务时，相关的性能测量任务会一并删除。|-
### 性能任务管理 
#### 测量任务管理 
测量任务定义如何收集、存储和传输性能数据，以及最终性能数据的展示内容和处理方式。系统按照一定的任务调度规则和具体的采集粒度收集性能数据，产生测量报告。 
在性能测量任务中，维护人员可以指定需要进行性能测量的网元类型、测量对象类型、性能数据采集粒度以及性能数据采集的时间段。 
##### 创建测量任务 
摘要 :本节介绍如何创建测量任务。 
在性能测量任务中，维护人员可以指定需要进行性能测量的网元类型、测量对象类型、性能数据采集粒度以及性能数据采集的时间段。 
测量任务创建完成后，网元会根据测量任务设定的条件，采集相关数据，上报到ElasticNet UME服务器。
步骤 :在性能管理页面，选择菜单性能任务→测量任务
，打开测量任务页签，如[图1]所示。
图1  测量任务管理

单击新建，打开新建测量任务页面。输入名称，选择网元类型、测量对象类型和测量族，如[图2]所示。
图2  选择测量族

测量任务页面的参数说明参见[表1]。
参数|说明
---|---
名称|测量任务的名称。
网元类型|选择测量任务归属的网元类型。
测量对象类型|选择网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
测量族|测量对象类型支持的测量类型，如果已经选择了测量对象类型，则下拉列表框仅显示该类型下支持的测量族。一个测量族包含的性能计数器可通过查询计数器进行查看。
单击下一步，切换到选择对象页面，如[图3]所示。
图3  选择对象页面

选择对象页面的参数说明参见[表2]。
参数名称|参数说明
---|---
选择类型|按对象范围：配置对象范围参数，并选择资源。按测量对象模板：配置对象过滤和测量对象模板参数。
对象范围|选择类型选择按对象范围，该参数可见。
对象过滤|选择类型选择按测量对象模板，该参数可见。测量任务包含所有对象选项，包括网元、服务、测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。从预定义的模板中选择，创建测量对象模板参见“ 创建测量对象模板 ”。
单击下一步切换到选择时间页签，设置测量任务的基本信息，如[图4]所示。
图4  选择时间

时间页面的参数说明参见[表3]。
参数|说明
---|---
状态|测量任务创建后默认的状态。
粒度|在粒度下拉菜单后选择查询粒度，包括5分钟、15分钟、30分钟、1小时、1天。例如：选择15分钟，表示以15分钟为单位显示查询结果。
时间范围|自定义选择任务有效时间。
有效时段和日期|有效时段有效时间为：00:00-24:00。每段时间以小时为单位分为24个时间粒度，可以单击选择时间段中的小时时间粒度。有效日期查询的有效日期，包括：按月和按周。勾选中按月：下面列出一个月的所有待选天，可全选，可选择某些天。勾选中按周：下面列出一周的所有天，从周一 ~ 周日，可全选，可单击选择某些天。
单击新建按钮，完成测量任务的新建。新建的测量任务出现在测量任务页签中。
相关任务 :将已建立的测量任务作为模板，另存为新的测量任务。 
在[图1]中，选择需要另存的测量任务，单击更多→另存为
，页面如[图5]所示。
图5  另存为测量任务

（可选）如果需要修改相关信息，则修改测量任务的测量类型，对象和时间信息，并单击下一步。
单击新建按钮，完成测量任务另存为新的测量任务。
##### 激活测量任务 
摘要 :本节介绍如何激活测量任务。 
对于当前运行状态为未激活的测量任务，如要按照该任务的规则采集性能数据，则需要激活该测量任务。
任务激活后，任务信息会同步到对应的网元设备，网元设备进行性能数据的采集，并将采集的性能数据上传存储到ElasticNet UME服务器的数据库中。
步骤 :在性能管理页面，选择菜单性能任务→测量任务
，打开测量任务页签，如[图1]所示。
图1  测量任务

选中状态为未激活的测量任务，在操作列选择更多→激活
。
 说明： 
一次可操作多条测量任务。 
##### 查询测量任务 
摘要 :本节介绍如何查询已创建的测量任务的详细信息。 
步骤 :在性能管理页面，选择菜单性能任务→测量任务
，已创建的测量任务显示在测量任务列表中，如[图1]所示。
图1  测量任务

选择需要查询的测量任务，单击查询按钮，查询测量任务详情，如[图2]所示。
图2  查询详情

相关任务 : 说明： 
只能对处于未激活状态的任务进行修改和删除操作。
任务|操作
---|---
修改测量任务|在已创建的测量任务列表中，选择需要修改的测量任务。单击更多→修改，修改测量任务的测量族，对象和时间信息。修改完毕，单击修改按钮。
删除测量任务|在已创建的测量任务列表中，选择需要删除的测量任务。单击更多→删除，显示删除信息提示框。单击删除按钮，删除测量任务。
##### 同步测量任务 
摘要 :本节介绍如何将网管服务器上的测量任务同步到网元。 
当ElasticNet UME服务器和被管理网元设备上的测量任务信息不一致时，同步测量任务可将ElasticNet UME服务器上的测量任务信息同步到相应的网元设备上。
步骤 :在性能管理页面，选择菜单性能任务→测量任务
，打开测量任务页面，如[图1]所示。
图1  测量任务

选中需要同步的测量任务，在操作列选择更多→同步
。切换到网元任务页签，查看具体网元的测量任务状态，如[图2]所示。
图2  网元任务

选择需要同步到网元的测量任务，单击同步按钮，提示“同步消息发送成功 
”。
#### 性能门限任务管理 
概述 :为了监控网络性能指标的变化趋势，及时发现性能指标的异常变化（如大幅上升或下降等），维护人员可以创建性能门限任务，预先设置告警的门限值。当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警，及时通知维护人员。当网元性能指标回落入阈值范围内时，系统产生越限告警相应的告警清除消息，此时越限告警恢复。 
ElasticNet UME系统支持以下多种类型的性能门限任务：
普通门限任务系统可以同时对一个或多个性能指标/计数器进行监控，预先设置这些计数器的告警的门限值。当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警。 
历史统计对比任务系统可以将当前性能测量值和历史连续N个时段内的性能测量值进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。 
历史同期对比任务系统可以将当前性能测量值和历史连续N个时段内同一时期的性能测量值进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。 
复合条件任务维护人员可以自定义包含有一个或多个性能计数器的逻辑运算表达式，系统会对运算结果进行监控。当逻辑运算结果为True时，会触发相应级别的门限告警。 
 说明： 
在创建门限任务时，需要勾选自动创建测量任务。系统需要通过测量任务，才能实现上报网元性能数据、产生门限告警的功能。
##### 告警阈值说明 
门限任务通过设置上门限/下门限值来确定门限告警触发的条件。
图1  告警门限说明

对于值越大告警级别越严重的指标（例如：CPU占用率），需要设置触发告警的上门限。 
对于值越小告警级别越严重的指标（例如：接通率），需要设置触发告警的下门限。 
对于需要将值保持在合理范围内的指标（例如：环境温度、风扇转速），需要同时设置触发告警的上门限和下门限。 
同时，为了避免指标在告警和告警清除状态间的频繁抖动，维护人员还可以设置粘滞值。
例如，对于值越大告警级别越严重的指标，当指标值超过“上门限+粘滞值”时，系统会触发该等级的告警；而当指标值低于“上门限-粘滞值”时，系统自动清除该等级的告警。
##### 新建普通性能门限任务 
摘要 :在普通性能门限任务中，维护人员可以同时对一个或多个性能指标/计数器进行监控，预先设置这些计数器的告警的门限值。 
当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警，及时通知维护人员。 
前提 :如果监控自定义指标的性能门限越界告警，则该指标需要已创建。自定义监控指标参考[新建性能指标]。
步骤 :在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面

单击新建按钮，在基本信息页签，参考[表1]，输入门限任务的名称，并选择网元类型，如[图2]所示。
图2  新建门限任务

参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建普通门限任务。系统支持对同一个测量对象类型下的所有指标/计数器同时进行门限设置。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建普通门限任务。
图3  选择新建普通门限任务

在弹出的新建普通门限任务对话框中，选择需监控的计数器/性能指标，参考[表2]，设置门限任务的基础信息，如[图4]所示。
图4  普通门限任务

参数名称|参数说明
---|---
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
按级别发送告警|当产生性能门限告警时，是否按告警级别发送告警。开启：当性能告警级别发生变更时，会产生一条新的告警。关闭：当性能告警级别发生变更时，更新原有告警。
告警标题|如果不填写，使用默认的告警标题，例如“虚拟机CPU使用率(%)高于二级门限”。
单击新建门限级别，参考[表3]，设置该计数器/指标的门限值，如[图5]所示。
 说明： 
有关上下门限和粘滞值说明，可参见[性能门限任务管理]。
图5  设置普通门限页面

参数|说明
---|---
级别|选择高于/低于门限值时，系统触发的告警级别。
门限|性能指标超出门限后上报该门限的越限告警，当性能指标低于门限后上报该门限的告警恢复。当告警方向向上时，门限上限值设置应遵循以下约束：警告告警门限值+警告告警粘滞值＜次要告警门限值-次要告警粘滞值次要告警门限值+次要告警粘滞值＜主要告警门限值-主要告警粘滞值主要告警门限值+主要告警粘滞值＜严重告警门限值-严重告警粘滞值当告警方向向下时，门限下陷值设置应遵循以下约束：警告告警门限值-警告告警粘滞值＞次要告警门限值+次要告警粘滞值次要告警门限值-次要告警粘滞值＞主要告警门限值+主要告警粘滞值主要告警门限值-主要告警粘滞值＞严重告警门限值+严重告警粘滞值告警门限值的单位与测量项目的单位有关。
粘滞值|为了避免门限的越限告警在告警和告警恢复状态之间频繁抖动，而设定的滞后值。粘滞值为门限设置的上下浮动值，没有特殊要求建议一般情况设置为0。例如严重告警门限为95，粘滞值为2，则严重告警门限高值为97，低值为93。
（可选）如果需要同时监控多个性能指标/计数器，可重复步骤5。 
 说明： 
在一个门限任务中同时监控多个性能指标/计数器时，所选的指标/计数器必须同属一种性能测量类型。 
单击新建。设置的门限值出现在门限设置下方表格中，如[图6]所示。
图6  门限设置结果

单击下一步，切换到选择对象页签，选择需要监控的对象，如[图7]所示。
图7  新建门限任务-对象选择页面

参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图8]所示。
图8  选择时间页面

参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图9]所示。
图9  门限任务创建结果

##### 新建历史统计对比任务 
摘要 :为了监控网络性能指标的变化趋势，及时发现性能指标的异常变化（如大幅上升或下降等），维护人员可以创建历史统计对比任务，对性能指标的变化增量设置告警阈值。 
在历史统计对比任务中，系统可以将当前性能测量值和和历史连续N个时段内的性能测量值进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。当变化增量回落到阈值范围内时，ElasticNet UME系统会自动清除之前产生越限告警。
前提 :如果监控自定义指标的性能门限越界告警，则该指标需要已创建。自定义监控指标参考[新建性能指标]。
步骤 :在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面

单击新建按钮，在基本信息页签，参考[表1]，输入门限任务的名称，并选择网元类型，如[图2]所示。
图2  新建门限任务

参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建历史统计对比任务，用于和过去连续N个周期中的数据进行对比，监控数据波动情况，波动超过门限则发生告警。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建历史统计对比任务。
图3  选择新建历史统计对比任务

在弹出的新建历史统计对比任务对话框中，选择需监控的计数器/性能指标，参考[表2]，设置门限任务的基础信息，如[图4]所示。
图4  历史统计对比任务

参数名称|参数说明
---|---
对比时间|可按照分钟/小时/天/周填写相应的时间，系统会统计对应过去所有连续时间粒度的数据。例如：对比时间填写1天，系统会统计昨天此时间到今天此时间24小时所有时间粒度的数据。
数据统计算法|对所选N个历史数据的统计方法，包括：平均：计算N个历史数据的平均值。最大：选择N个历史数据中的最大值。最小：选择N个历史数据中的最小值。
对比方式|对比率：ABS((当前值-历史统计值)/当前值)*100%对比值：当前值-历史统计值
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
按级别发送告警|当产生性能门限告警时，是否按告警级别发送告警。开启：当性能告警级别发生变更时，会产生一条新的告警。关闭：当性能告警级别发生变更时，更新原有告警。
告警标题|自定义的告警标题。如果不填写，系统使用默认的告警标题，例如“虚拟机CPU使用率(%)高于二级门限”。
单击新建门限级别，参考[表3]，设置该计数器/指标门限值，如[图5]所示。
 说明： 
有关上下门限和粘滞值说明，可参见[性能门限任务管理]。
图5  设置告警门限值

参数|说明
---|---
级别|选择高于/低于门限值时，系统触发的告警级别。
门限|性能指标超出门限后上报该门限的越限告警，当性能指标低于门限后上报该门限的告警恢复。当告警方向向上时，门限上限值设置应遵循以下约束：警告告警门限值+警告告警粘滞值＜次要告警门限值-次要告警粘滞值次要告警门限值+次要告警粘滞值＜主要告警门限值-主要告警粘滞值主要告警门限值+主要告警粘滞值＜严重告警门限值-严重告警粘滞值当告警方向向下时，门限下陷值设置应遵循以下约束：警告告警门限值-警告告警粘滞值＞次要告警门限值+次要告警粘滞值次要告警门限值-次要告警粘滞值＞主要告警门限值+主要告警粘滞值主要告警门限值-主要告警粘滞值＞严重告警门限值+严重告警粘滞值告警门限值的单位与测量项目的单位有关。
粘滞值|为了避免门限的越限告警在告警和告警恢复状态之间频繁抖动，而设定的滞后值。粘滞值为门限设置的上下浮动值，没有特殊要求建议一般情况设置为0。例如严重告警门限为95，粘滞值为2，则严重告警门限高值为97，低值为93。
单击新建。设置的门限值出现在门限设置下方表格中，如[图6]所示。
图6  门限设置结果

单击下一步，切换到选择对象页签，选择需要监控的对象，如[图7]所示。
图7  新建门限任务-对象选择页面

参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图8]所示。
图8  选择时间页面

参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图9]所示。
图9  门限任务创建结果

##### 新建历史同期对比任务 
摘要 :为了监控网络性能指标的变化趋势，及时发现性能指标的异常变化（如大幅上升或下降等），维护人员可以创建历史同期对比任务，对性能指标的变化增量设置告警阈值。 
在历史同期对比任务中，系统可以将网元的当前性能测量数据和连续N个周期中相同时间段的历史性能数据进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。当变化增量回落到阈值范围内时，ElasticNet UME系统会自动清除之前产生越限告警。
前提 :如果监控自定义指标的性能门限越界告警，则该指标需要已创建。自定义监控指标参考[新建性能指标]。
步骤 :在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面

单击新建按钮，参考[表1]输入门限任务的名称，并选择管理对象类型，如[图2]所示。
图2  新建门限任务

参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建历史同期对比任务，用于和过去连续N个周期中相同时间段的数据进行对比，监控数据波动情况，波动超过门限则发生告警。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建历史同期对比任务。
图3  选择新建历史同期对比任务

在弹出的新建历史同期对比任务对话框中，选择需监控的计数器/性能指标，并参考[表2]，设置门限任务的基础信息，如[图4]所示。
图4  历史同期对比任务

参数名称|参数说明
---|---
历史数据个数|选择需要对比的历史数据个数，即N的数值。
数据统计算法|对所选N个历史数据的统计方法，包括：平均：计算N个历史数据的平均值。最大：选择N个历史数据中的最大值。最小：选择N个历史数据中的最小值。加权平均：通过系统预定义的加权比重计算N个历史数据的平均值。距离当前时间越近，权重越高；距离当前时间越远，则权重越低。
对比方式|系统提供以下两种对比方式：按天：取最近N个工作日/周末的当前时间粒度的历史数据。需要区分工作日和周末场景，系统默认周一~周五为工作日，周六~周日为周末。例如：假设N为2，粒度为1小时。如果当前时间为周二（工作日）8:00，则系统取本周一、上周五这2天8:00这个时间粒度的历史数据进行统计。如果当前时间为周日（周末）8:00，则系统取本周六、上周日这2天8:00这个时间粒度的历史数据进行统计。按周：取连续N周相同星期当前时间粒度的历史数据。例如：假设N为2，粒度为1小时。如果当前时间为周二8:00，则系统取上周二、上上周二这2天8:00这个时间粒度的历史数据进行统计。
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
按级别发送告警|当产生性能门限告警时，是否按告警级别发送告警。开启：当性能告警级别发生变更时，会产生一条新的告警。关闭：当性能告警级别发生变更时，更新原有告警。
告警标题|如果不填写，使用默认的告警标题，例如“虚拟机CPU使用率(%)高于二级门限”。
单击新建门限级别按钮，参考[表3]，设置该计数器/指标告警门限值，如[图5]所示。
 说明： 
有关上下门限和粘滞值说明，可参见[性能门限任务管理]。
图5  设置告警门限值

参数|说明
---|---
级别|选择高于/低于门限值时，系统触发的告警级别。
门限|设置性能数据变化值的告警门限。当性能数据变化值超出或低于告警上限/下限门限值后，系统上报该门限的越限告警。其中：性能数据变化值=当前性能值-历史经验值。历史经验值由系统根据图4中的设定，对历史同期数据进行计算后得出。如果需要同时设置多个级别的告警门限值时，应遵从如下原则：当性能数据变化值越高，告警越严重时，门限上限值设置应遵循以下约束：警告告警门限值+警告告警粘滞值＜次要告警门限值-次要告警粘滞值次要告警门限值+次要告警粘滞值＜主要告警门限值-主要告警粘滞值主要告警门限值+主要告警粘滞值＜严重告警门限值-严重告警粘滞值当性能数据变化值越低，告警越严重时，门限下限值设置应遵循以下约束：警告告警门限值-警告告警粘滞值＞次要告警门限值+次要告警粘滞值次要告警门限值-次要告警粘滞值＞主要告警门限值+主要告警粘滞值主要告警门限值-主要告警粘滞值＞严重告警门限值+严重告警粘滞值告警门限值的单位与测量项目的单位有关。
粘滞值|为了避免门限的越限告警在告警和告警恢复状态之间频繁抖动，而设定的滞后值。粘滞值为门限设置的上下浮动值，没有特殊要求建议一般情况设置为0。例如严重告警门限为95，粘滞值为2，则严重告警门限高值为97，低值为93。
单击新建。设置的门限值出现在门限设置下方表格中，如[图6]所示。
图6  门限设置结果

单击下一步，切换到选择对象页签，选择需要监控的对象，如[图7]所示。
图7  新建门限任务-对象选择页面

参数|说明
---|---
对象汇总|表示性能数据的汇总规则：网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图8]所示。
图8  选择时间页面

参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图9]所示。
图9  门限任务创建结果

##### 新建复合条件任务 
摘要 :在复合条件任务中，维护人员可以自定义包含有一个或多个性能计数器的逻辑运算表达式，系统会对运算结果进行监控。当逻辑运算结果为True时，会触发相应级别的门限告警。 
步骤 :在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面

单击新建按钮，在基本信息页签，参考[表1]输入门限任务的名称，并选择管理对象类型，如[图2]所示。
图2  新建门限任务

参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建复合条件任务。用户可自定义条件公式，满足多个计数器指标共同决定是否触发告警的场景。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建复合条件任务。
图3  选择新建复合条件任务

在弹出的新建复合条件任务对话框，设置告警清除观察期，并单击新建门限级别，如[图4]所示。
图4  新建复合条件任务对话框

参数名称|参数说明
---|---
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
在新出现的门限级别中，选择触发的告警级别，输入告警标题，并单击新建条件，如[图5]所示。
图5  新建告警触发条件

单击新建门限级别按钮，设置该告警门限的触发条件，如[图6]所示。
图6  设置普通门限页面

参数|说明
---|---
指标|选择计数器，添加到右侧条件编辑器中。
条件编辑器|选择一个或多个计数器进行运算，当整个表达式为True时，则触发对应级别的告警。其中：&&：逻辑与。例如：a&&b，表示只有a和b都为True时，整个表达式结果为True。||：逻辑或。例如：a||b，表示只要任意a或者b为True时，整个表达式结果为True。==：判断是否相等。例如：a==b，表示a和b相等时为True。!=：判断是否不相等。例如：a!=b，表示a不等于b时为True。
检验|单击检验，可以检验输入的表达式是否合法。
重置|单击重置，可以清空当前输入的表达式。
单击新建。告警门限触发条件和告警级别出现在列表中，如[图7]所示。
图7  门限条件设置结果

（可选）如果需要设置多个告警级别和告警触发条件，则重复步骤4-8，如[图8]所示。
图8  添加多个门限条件示例

单击新建，设置的门限告警规则出现在列表中，如[图9]所示。
图9  门限规则

单击下一步，切换到选择对象页签，选择需要监控的对象，如[图10]所示。
图10  新建门限任务-对象选择页面

参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图11]所示。
图11  选择时间页面

参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图12]所示。
图12  门限任务创建结果

#### 检查性能数据完整性 
摘要 :通常情况下，系统会按照性能测量任务从网元采集性能数据。但某些特殊情况下（如网元与ElasticNet UME服务器通信中断），服务器会出现未按时采集到网元性能数据的情况。
通过数据完整性检查，维护人员可以查询指定时间段内ElasticNet UME服务器上的网元性能数据是否完整。如果性能数据不完整，维护人员还可以尝试补采数据操作。
步骤 :在性能管理页面，选择菜单性能任务→数据完整性检查
，打开数据完整性检查页面，如[图1]所示。
图1  完整性查询-基本信息

选择测量族，页面的参数说明参见[表1]。
参数|说明
---|---
网元类型|性能数据查询的网元类型。
测量对象类型|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
测量族|测量对象类型包括的所有测量项。
单击下一步，切换到选择对象页签，如[图2]所示，选择作为查询对象的网元。
图2  选择对象页面

单击下一步，切换到选择时间页签，如[图3]所示。参数说明参见[表2]。
图3  选择时间

参数|说明
---|---
粒度|网元设备进行数据采集的周期。
时间范围|表示查询性能数据的时间段。
单击查询按钮。数据完整性检查窗口将显示检查结果，如[图4]所示。
图4  检查数据完整性

（可选）对于完整性为缺失的检查任务，选择操作列的补采数据，尝试重新从网元采集性能数据。
#### 补采性能数据 
摘要 :由于某种原因（如网元与ElasticNet UME服务器间的通信中断）导致ElasticNet UME服务器上性能数据不完整时，如果网元上的性能数据还没有被清除，此时维护人员可以通过手工方式补采测量任务中丢失的性能数据。
步骤 :在性能管理页面，选择菜单性能任务→补采
，进入补采页面，如[图1]所示。
图1  性能数据补采

在选择测量族页面，选择网元类型、测量对象类型和测量族。参数说明参见[表1]。
参数|说明
---|---
网元类型|性能数据查询的网元类型。
测量对象类型|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
测量族|测量对象类型包括的所有测量项。
单击下一步切换到选择对象页面，选择对象范围，界面如[图2]所示。
图2  选择对象

单击下一步，选择补采时间范围，页面如[图3]所示。
图3  选择时间

单击确定，系统显示补采成功。
### 性能数据查询 
系统支持以多种方式查询性能测量的结果，如根据自定义条件查询性能数据、自动查询并导出性能数据及实时监控性能数据。 
#### 查询历史性能数据 
摘要 :本节介绍如何设置历史性能数据的查询任务的查询条件，并输出查询结果。 
步骤 :在性能管理页面，选择菜单性能查询→历史查询
，打开历史查询页面，如[图1]所示。
图1  历史查询

在左侧导航树中选择已保存的查询模板查询性能数据，如[图2]所示。如果没有可用的查询模板，执行以下步骤操作。
图2  查询模板

根据查询模板的访问控制设置，查询模板放到不同目录下。 
私有：只有自己可见。 
公开：所有人可见，创建者可改。 
完全共享：所有人可见可改。 
选中查询模板，单击后面的按钮，可以执行以下操作，如[图3]所示。
图3  查询模板设置

单击新建，打开临时查询历史性能数据页面，如[图4]所示。
图4  临时查询

单击指标模板下拉框，选择预定义的指标模板，设置计数器/指标参数。指标模板的创建参考“[创建指标模板]”。
单击选择指标/计数器，在弹出的对话框中设置参数信息，如[图5]所示。
图5  选择指标/计数器

参数名称|参数说明
---|---
网元类型|单击下拉菜单选择网元类型。
计算完整率|ElasticNet UME在性能测量数据查询结果中能够提供性能测量数据的完整率查询，以测量任务中定制的性能测量数据的时间粒度和统计对象为分析对象。性能测量数据的完整率 =某时间段实际数据上报条数/ 该时间段理论数据上报条数。
测量对象类型|单击下拉菜单选择测量对象类型。
计数器/指标-待选项|选择测量对象类型会关联到可选择的计数器/指标。选择指标时，此处可以调用在指标管理中自定义的新建指标。勾选中待选项中计数器/指标前的选择框，计数器/指标将被移动到已选项区域框。
计数器/指标-已选项|在已选项区域框中，单击计数器/指标项前的按钮，可以移除选中的计数器/指标。
设置性能数据查询的其他参数，如[图6]所示。
图6  性能数据查询

参数|说明
---|---
对象汇总|网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
对象范围|针对通配对象的具体网元、服务和测量对象。
时间粒度/时区/范围|选择查询粒度和查询时间。
（可选）如果需要导出历史性能查询结果，单击后台导出按钮，则在我的导出页面能查询到导出查询结果，参见“[我的导出]”。
单击查询，查询结果如[图7]所示。
图7  查询结果

（可选）单击保存。在弹出的对话框中设置查询模板的参数，单击确定，如[图8]所示。
新建的查询模板根据访问控制参数的设置，分类保存在左侧导航树中，如[图2]所示。
图8  设置查询模板

#### 我的导出 
摘要 :新建的历史性能数据查询任务中，单击导出按钮，则在我的导出页面能查询导出文件。
步骤 :在性能管理页面，选择菜单性能查询→历史查询
，打开历史查询页面，如[图1]所示。
图1  历史查询

单击后台导出按钮，设置查询结果导出文件的文件名称和文件类型，如[图2]所示。
图2  导出查询结果

单击确定，弹出如[图3]所示的提示信息。
图3  提示信息

选择菜单性能→性能查询→我的导出
，查询结果文件列表如[图4]所示。
图4  我的导出

单击文件名，导出文件会被保存到本地。 
（可选）如果需要删除导出记录，单击文件名后的删除按钮。
#### 创建定时导出任务 
摘要 :根据已有的指标模板，新建性能数据查询结果的定时导出任务。指标模板可以使用系统预定义模板或者用户自定义模板。 
步骤 :在性能管理页面，选择菜单性能查询→定时导出任务
，进入定时导出任务列表页面，如[图1]所示。
图1  定时导出任务

单击新建按钮，进入新建定时导出任务页面，如[图2]所示。
图2  新建定时导出任务

设置任务基本信息。基本信息页面的参数说明参见[表1]。
参数|说明
---|---
名称|模板任务的名称。
指标模板名称|从下拉列表框中选择系统预定义和用户自定义的指标模板。创建指标模板操作可参见“创建指标模板”。
统计分析|设置逻辑分析。按逻辑过滤条件或/与输出满足条件的查询结果。
设置TopN统计。同一时间N个对象：在查询结果中取每个时间粒度内的N个对象的最大或最小值。同一对象N个时间：在查询结果中取每个对象的N个最大或最小值的时间范围。全部：结合对象和时间粒度，取N个最大或最小值。|统计分析
设置忙时统计。忙时最大值：查询结果按照时间段输出最大值。忙时最小值：查询结果按照时间段输出最小值。|统计分析
单击下一步，进入选择对象页签，设置对象汇总和对象范围，并选择资源，如[图3]所示。
图3  选择对象

参数|说明
---|---
对象汇总|表示查询性能的汇总规则。原始数据：查询数据库中的原始性能数据。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
对象范围|针对通配对象的具体网元、服务和测量对象。
单击下一步，进入选择时间页签，设置性能数据的汇总粒度和执行周期，如[图4]所示。
图4  选择任务执行周期

单击下一步，进入用户定制页签，设置导出文件类型等个性化参数设置，可以使用默认值，如[图5]所示。
图5  用户定制

（可选）单击下一步，进入门限设置页签，根据实际情况设置门限值，如[图6]所示。
图6  设置门限

单击新建按钮，完成定时导出任务的新建。新创建的定时导出任务出现在任务列表中，如[图7]所示。
图7  创建定时导出任务结果

### 性能数据监控 
维护人员可以通过执行监控历史任务和实时监控任务来监控系统性能数据。 
#### 创建实时监控任务 
摘要 :维护人员可以新建实时性能监控任务，对ElasticNet UME服务器采集的网元指标和计数器数据进行实时监控。
 说明： 
对于分层接入代理类型为V4OMS的网元，创建实时监控任务之前，需基于测量族创建对应的测量任务。 
对于通过其他代理类型接入的网元，创建实时监控任务之前，不需要创建对应的测量任务。 
步骤 :在性能管理页面，选择菜单性能监控→实时监控
，进入实时监控任务列表页面，如[图1]所示。
图1  实时性能监控任务

单击新建，选择计数器/指标，如[图2]所示。
图2  选择计数器/指标

选择计数器/指标页面的参数说明参见[表1]。
参数|说明
---|---
名称|为该监控任务设置一个名称。
保留历史数据文件|实时监控任务本身只保留2000条数据，选中是，则把历史数据存到文件中，可以导出，保存的文件在pvc上。
网元类型|选择性能监控的网元类型。
上报北向数据|选择是否上报北向数据。
测量对象类型|网元类型支持的测量对象类型。选择网元类型后，下拉列表框仅显示该类型下支持的测量对象类型。
计数器/指标|选择需要进行监控的性能计数器和指标。
也可以单击选择指标模板，使用预定义的模板创建实时监控指标。
单击下一步，选择监控的对象，如[图3]所示。
图3  选择对象

参数说明参见[表2]。
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。原始数据：查询数据库中的原始性能数据。
对象范围|针对通配对象的具体网元、服务和测量对象。
单击下一步，设置监控的时间，如[图4]所示。
图4  选择监控的时间

（可选）如果需要对监控结果的数值范围进行筛选，单击下一步，设置监控指标的上下门限值，如[图5]所示。
图5  设置门限

单击新建，新创建的监控任务，出现在实时监控任务列表中，如[图6]所示。
图6  新建实时监控完成

单击数据展示栏中的图形或者表格，展示查询结果。
图7  实时性能监控结果

相关任务 :任务|操作
---|---
导出任务结果|在实时监控页面的任务列表中，选中一项任务，单击更多→导出，实时性能数据查询结果以文件形式保存到本地。
挂起任务|在实时监控页面的任务列表中，选中不需要继续执行的任务，单击挂起，则暂停该项任务执行。
#### 创建历史监控任务 
摘要 :维护人员可以新建历史性能监控任务，对ElasticNet UME服务器采集的网元指标和计数器历史数据进行监控。
通过性能监控任务，ElasticNet UME服务器将性能测量任务中采集到的性能数据，以表格或图形的方式实时地呈现给维护人员。
前提 :已新建性能测量任务，且测量任务中已包含了需要监控的测量族。 
步骤 :在性能管理页面，选择菜单性能监控→历史监控
，进入历史监控任务列表页面，如[图1]所示。
图1  历史性能监控任务

单击新建，设置任务的基本信息和监控的计数器/指标，如[图2]所示。
图2  历史性能监控任务设置

选择计数器/指标页面的参数说明参见[表1]。
参数|说明
---|---
名称|为该监控任务设置一个名称。
网元类型|选择性能监控的网元类型。
测量对象类型|网元类型支持的测量对象类型。选择网元类型后，下拉列表框仅显示该类型下支持的测量对象类型。
计数器/指标|选择需要进行监控的性能计数器和指标。
单击下一步，选择监控的对象，如[图3]所示。
图3  选择监控对象

选择对象页面的参数说明参见[表2]。
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。原始数据：查询数据库中的原始性能数据。
对象范围|针对通配对象的具体网元、服务和测量对象。
单击下一步，设置监控的时间粒度，如[图4]所示。
图4  选择监控的时间粒度

（可选）如果需要对监控结果的数值范围进行筛选，单击下一步，设置监控指标的上下门限值，如[图5]所示。
图5  设置门限

单击新建，新创建的监控任务，出现在历史监控任务列表中，如[图6]所示。
图6  监控任务创建结果

单击数据展示栏中的图形或者表格，展示查询结果。
相关任务 :任务|操作
---|---
导出任务结果|在历史监控页面的任务列表中，选中一项任务，单击导出，历史性能数据查询结果以文件形式保存到本地。
挂起任务|在历史监控页面的任务列表中，选中不需要继续执行的任务，单击挂起，则暂停该项任务执行。
### 测量对象和指标管理 
#### 指标管理 
维护人员可以通过指标管理模块查询ElasticNet UME接入的网元类型以及对应的测量对象类型和计数器。指标管理模块还提供了指标的新建、删除、修改、查看、导入、导出等功能。
##### 查询性能指标 
摘要 :查询系统预定义和自定义的性能指标，以及各指标的详细计算公式。 
步骤 :在性能管理页面，选择菜单指标管理，指标页签中显示各网元类型和测量对象预定义和自定义的所有性能指标，如[图1]所示。
图1  指标

单击按钮，可以对网元类型、测量对象类型、族、来源进行筛选，查询相应的指标，如[图2]所示。
图2  筛选查询指标

单击指标名称，可以查看该性能指标的详细信息，包括指标的计算公式等信息，如[图3]所示。
图3  性能指标详细信息

##### 新建性能指标 
摘要 :如果系统预定义的指标不能满足需求，可以创建⾃定义的性能指标。 
步骤 :在性能管理页面，选择菜单指标管理，指标页签中显示各网元类型和测量对象预定义和自定义的所有性能指标，如[图1]所示。
图1  指标

单击新建按钮，显示新建指标页面，如[图2]所示，设置指标的基本信息。
图2  新建指标

参数说明参见[表1]。
参数|说明
---|---
名称|新建性能指标的名称，不能与已经存在的指标名称重复。
描述|性能指标的描述信息，不超过500个字符。一般采用默认值。
类型|指标类型：KPI、PI、SPI
数据类型|根据指标类型的不同，设置数据类型也不同，包括：整型、浮点型、百分型、布尔型。
单位|设置指标的单位。
默认异常值|公式计算异常时的指标值。
告警码|设置指标的告警码。
族|选择新建指标所属的测量族。
网元类型|性能指标归属的网元类型。
测量对象类型|网元类型下的测量对象类型，不同的网元类型有不同的测量对象类型。
公式|测量指标的计算公式，据新建指标的计算公式，在可选计数器和指标导航树中选择计数器，如图3所示，并在下⽅的运算符号区域框中选择运算符号，指标公式变量说明参见表2。
图3  新建指标-指标公式页面

变量名称|变量说明
---|---
C|指引用的计数器前缀，计数器类型均以C开头后跟数字用于标识。
Gr|指标计算中的一个变量，代表一条记录中的粒度值，单位是秒。在计算时，其Gr具体值是由查询结果里每条记录的粒度决定的。
P|指引用的指标，当指标中引用了其他指标，则其表达式为P开头后跟指标的数字编号。
单击新建按钮，新创建的指标出现在指标列表中，如[图4]所示。
图4  新建指标

##### 查询计数器 
摘要 :查询所有网元的计数器。 
步骤 :在性能管理页面，选择菜单指标管理，切换到计数器页签，显示所有网元类型支持的计数器，如[图1]所示。
图1  计数器

单击按钮，可以对网元类型、测量对象类型、测量族进行筛选，查询相应的计数器，如[图2]所示。
图2  筛选查询计数器

##### 查询测量对象类型 
摘要 :查询接入的网元类型的测量对象类型。 
步骤 :在性能管理页面，选择菜单指标管理，切换到测量对象类型页签，显示所有网元类型支持的测量对象类型，如[图1]所示。
图1  测量对象类型

单击按钮，可以对网元类型进行筛选，查询某一网元类型所支持的所有测量对象类型，如[图2]所示。
图2  筛选查询测量对象类型

##### 查询网元类型 
摘要 :查询系统支持接入管理的网元类型。 
步骤 :在性能管理页面，选择菜单指标管理，切换到网元类型页签，显示系统接入的所有网元类型，如[图1]所示。
图1  网元类型

在搜索框输入网元类型名称，单击按钮，可以直接显示查询结果，如[图2]所示。
图2  搜索查询网元类型

#### 创建指标模板 
摘要 :维护人员可以将各项查询条件保存为模板，以便在[查询历史性能数据]、[创建定时导出任务]、 [创建实时监控任务]时调用。
模板可以设定的查询条件包括查询的网元类型、查询的指标/计数器。 
也可以在本地预定义模板文件，导入系统直接使用。 
步骤 :在性能管理页面，选择菜单性能查询→指标模板
，页面如[图1]所示。
图1  指标模板

单击新建按钮，弹出新建指标模板对话框，如[图2]所示。
图2  新建查询模板

设置模板的基本信息。基本信息参数说明参见[表1]。
参数|说明
---|---
名称|模板的名称。|名称
访问控制|私有：只有自己可见。公开：所有人可见，创建者可改。完全共享：所有人可见可改。|访问控制
计数器/指标|网元类型|性能数据查询的网元类型。
计算完整率|计数器/指标|ElasticNet UME在性能测量数据查询结果中能够提供性能测量数据的完整率查询，以测量任务中定制的性能测量数据的时间粒度和统计对象为分析对象。性能测量数据的完整率 =某时间段实际数据上报条数/ 该时间段理论数据上报条数。
测量对象类型|计数器/指标|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
计数器/指标|计数器/指标|测量对象类型的不同测量指标，选中的计数器和指标将会显示在右侧区域框中。
对象汇总|网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。|对象汇总
粒度|选择查询粒度。|粒度
有效时段和日期|设置有效时段和日期。|有效时段和日期
（可选）如果需要自定义列头，单击下一步，并勾选或重命名需要显示的列头名称，如[图3]所示。
 说明： 
自定义列头只在定时导出任务的执行结果中生效。 
图3  自定义列头

单击新建按钮。新建的模板出现在指标模板窗口中。
#### 查看测量对象 
摘要 :维护人员可以在客户端上查看系统中已有的测量对象类型下的测量对象。 
步骤 :在性能管理页面，选择菜单性能查询→测量对象查询
，打开测量对象查询页面，如[图1]所示。
图1  测量对象查询

选择网元和测量对象类型，单击按钮，测量对象的查询信息显示如[图2]所示。
图2  查询结果

#### 创建测量对象模板 
摘要 :维护人员可以根据需求创建测量对象模板。创建的对象模板可以在[创建测量任务]和[性能门限任务管理]中选择和使用。
 说明： 
当测量对象模板被测量任务或门限任务所引用时，不允许修改和删除该模板。
步骤 :在性能管理页面，选择菜单性能查询→测量对象模板
，页面如[图1]所示。
图1  对象模板

单击新建按钮，创建测量对象模板，页面如[图2]所示。
图2  新建对象模板

参数说明参考[表1]。
参数|说明
---|---
名称|模板的名称。
网元类型|性能数据查询的网元类型。
测量对象类型|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
对象范围|针对通配对象的具体网元、服务和测量对象。
设置好相关参数后，单击新建，完成测量对象模板的创建。
## 缩略语 
## 缩略语 
### B/S 
Browser/Server浏览器和服务器结构
EM :Element Management网元管理
NF :Network Function网络功能
### NMS 
Network Management System网络管理系统
### PI 
Performance Index性能指标
QoS :Quality of Service服务质量
## 告警管理 
### 告警管理概述 
告警是反映网元、网络运行情况和故障定位的一个信息来源，为了保证网络正常运行，网络管理员或维护员应定期对告警进行监控和处理。 
实现原理 :ElasticNet UME告警管理的消息处理流程如[图1]所示。
图1  告警管理的消息流程

告警上报和呈现的过程如下。 
ElasticNet UME维护人员可以通过客户端的告警监控功能，对被管理网元产生的告警进行实时监控。
当被管理网元发生故障时，会产生告警事件，并实时上报给ElasticNet UME服务器。
ElasticNet UME服务器对网元上报的告警进行收集，并储存在自身的数据库中。
ElasticNet UME服务器可以将当前的告警信息集中呈现在客户端上。
维护人员可以在ElasticNet UME浏览器上查看当前告警和历史告警，并能完成各种告警处理的功能。
通过ElasticNet UME服务器的北向接口，网元的告警信息可以提供给上级NMS网管，供北向用户分析。
#### 相关概念 
告警和通知 :###### 告警 
告警是对被管理对象以及ElasticNet UME系统本身在运行过程中发生的异常情况进行报告，提醒用户进行相应的告警处理。
告警对应的问题或故障解决后，系统将自动返回告警恢复消息。 
当异常或故障出现时，告警管理系统将及时准确地显示相应的告警信息。 
告警信息一般会持续一段时间，在问题或故障消失后，告警信息才会消失，并返回相应的告警恢复消息。 
###### 通知 
通知是对管理对象以及ElasticNet UME系统在运行中的一些操作或异常信息提示，以便维护人员及时掌握各模块的运行状况。
###### 告警和通知的区别 
告警：ElasticNet UME或被管对象发生了异常或故障，若不处理，会引起业务异常。告警可以被确认和清除。 
通知：ElasticNet UME或被管对象发生了某种变化，不一定会引起业务的异常。通知不能被确认和清除。 
###### 告警和通知的标识方法 
告警/通知的唯一标识方法：资源类型+告警码/通知码。 
资源类型：用来进行告警码的分类。 
告警码/通知码：是一个整型字段。用于唯一的标识一条告警/通知。 
##### 告警级别 


###### 级别分类 
告警根据对系统的影响程度分为四种级别：严重、主要、次要和警告，详细说明参见[表1]。
告警级别|级别说明
---|---
严重|表示正常业务受到严重影响，需要立即修复。
主要|表示系统出现影响正常业务的迹象，需要紧急修复。
次要|表示系统存在不影响正常业务的因素，但应采取纠正措施，以免发生更严重的故障。
警告|表示系统存在潜在的或即将影响正常业务的问题，应采取措施诊断纠正，以免其转变成一个更加严重的，影响正常业务的故障。


###### 重定义告警级别 
系统初始化时设置了每条告警的默认告警级别，维护人员也可以根据不同的业务需求和实际环境调整告警的级别。 


##### 告警状态 


###### 告警状态分类 
告警共有如下几种状态： 

 
未确认未清除 

 
已确认未清除 

 
未确认已清除 

 
已确认已清除 

 


###### 告警状态转换 
告警状态转换关系如[图1]所示。
图1  告警状态转换





 
确认/反确认告警确认告警，表示维护人员正在处理该告警。告警被确认后，由未确认状态变成已确认状态。反确认告警，表示将已确认状态的告警重新变成未确认告警。 

 
清除告警当故障排除后，告警会由未清除状态变为已清除状态，该告警变为历史告警，被记录进告警数据库中。维护人员也可以通过手工清除的方式，将未清除的告警变为已清除状态。如果网元的故障依然存在，网元可能会再次上报该告警。 

 


###### 当前告警和历史告警 

 
未确认未清除和已确认未清除状态的告警被称为当前告警，存放当前告警的库叫当前告警库。 

 
未确认已清除和已确认已清除状态的告警被称为历史告警，存放历史告警的库叫历史告警库。 

 


#### 告警页面介绍 
在ElasticNet UME客户端主页面中，选择告警菜单，打开告警主页面，如[图1]所示。
图1  告警主页面
快捷菜单栏 
告警监控栏 
功能导航树 
在告警监控区域，单击条件模板按钮，弹出如[图2]所示的对话框。
图2  条件模板

ElasticNet UME系统在条件模板中默认设置了公有模板和私有模板两个模块，其中：
公有模板为ElasticNet UME系统默认提供的查询模板，包括告警监控、最近一天、最近两天三种查询模板，用户不可对其进行编辑操作。 
私有模板为用户自定义的查询模板。 
单击模板后图标，可将此模板设置为默认模板，默认按照此模板条件进行查询。 
单击模板后图标，可取消此模板的默认状态。 
标号|名称|说明
---|---|---
1|快捷菜单栏|：告警铃。若有告警，左上角的数字表示全部告警数目。光标指向此图标，展示各级别告警的数目，单击可快速进入相应级别告警的查询页面。：系统通知信息。：帮助。光标指向此图标，可打开操作与维护、故障管理手册。：用户。光标指向此图标，可查看用户名、密码修改页面和注销。：设置。单击可设置当前的皮肤、显示语言、时区、导航菜单栏打开方式以及版本信息。
2|告警监控栏|查看当前网元告警。
3|功能导航树|进入各功能页面的导航树。
#### 告警管理模块说明 
告警管理操作可分为以下模块。监控告警/通知：维护人员查询查看告警和通知。 
处理告警：维护人员根据告警信息定位故障后，对告警进行确认、清除、前转等操作。 
管理告警数据：维护人员导出告警，设置定时统计任务和定时输出任务。 
告警设置：设置告警的属性，设置告警处理规则，设置告警抑制计划任务和设置自定义告警处理建议。 
各模块包含的子模块及操作说明参见[表1]。
模块|子模块|链接
---|---|---
监控告警和通知|查询当前告警|查询当前告警
查询历史告警|监控告警和通知|查询历史告警
查询通知|监控告警和通知|查询通知
查看告警详情|监控告警和通知|查看告警详情
查看当前告警统计|监控告警和通知|查看当前告警统计
查看历史告警统计|监控告警和通知|查看历史告警统计
查看告警提示|监控告警和通知|查看告警提示
处理告警|确认告警|确认告警
自定义告警处理建议|处理告警|自定义告警处理建议
清除告警|处理告警|清除告警
前转告警|处理告警|前转告警
管理告警|告警同步|同步当前告警
导出告警|管理告警|导出告警
导出通知|管理告警|手动导出通知
定时统计|管理告警|定时导出历史统计数据
告警设置|设置告警属性|设置告警属性
设置告警处理规则|告警设置|设置告警处理规则
设置告警抑制计划|告警设置|设置告警抑制计划
规则运行|规则管理|新建关联规则
规则包管理|规则运行|导入规则包
### 监控告警和通知 
维护人员可实时监控ElasticNet UME所管理的网络设备和平台产生的告警和通知。
#### 查询当前告警 
ElasticNet UME支持实时监控被管理网元和ElasticNet UME自身的当前告警，并支持以图形化的方式显示。ElasticNet UME提供告警高级筛选过滤功能（支持按网元类型、位置、告警类型、告警码、发生时间、确认时间、确认状态、确认用户、根源/衍生告警、注释、可见性等筛选过滤）和排序。
维护人员可以通过多种方式查询当前告警。 
##### 按自定义条件查询 
摘要 :按自定义的告警设置条件查询当前告警。 
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面，如[图1]所示。
图1  告警监控

单击条件查询按钮，打开条件筛选设置页面，根据需要选择设置一个或多个条件，如[图2]所示。参数说明参见[表1]。
图2  条件查询页面

参数名|参数说明
---|---
级别|筛选指定的告警级别。目前共有四项告警级别，分别为：严重、主要、次要、警告。
发生时间|网元侧告警产生时间。根据告警发生的时间来筛选告警。
告警码|根据告警码来筛选告警。单击选择按钮，在搜索栏输入告警码或告警码名称来查找到要选择的告警码。单击小箭头，选中的告警码从待选项框进入已选项框。开启排除模式按钮，选择的结果为已选项的反集。
确认状态|根据告警的确认状态来筛选告警。包括已确认、未确认。可以勾选一个或多个状态。
可见性|根据告警的可见性来筛选告警。
根源衍生|根据根源告警或衍生告警性质来筛选告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
资源|在资源区域，可以按照对象或类型进行筛选。选择按对象筛选，单击选择资源，右侧下拉列表框中默认选择对象类型为网元，可更改需要查询的对象类型（不可多选，如网元、VNFM、分组），并单击选择按钮，选择需要查询的有关具体资源（可多选）。选择按类型筛选，单击选择资源，在右侧下拉列表框中选择需要的网元类型（可多选）。
单击显示高级查询，选择查询条件，单击查询按钮，如[图3]所示。高级查询条件参数说明参见[表2]。
图3  高级查询条件页面

设置条件|说明
---|---
时区|设置告警查询的时区条件。可以选择网元时区或者客户端时区。
确认时间|网元侧告警确认时间。
服务端时间|告警在网管侧入库时间。
改变时间|网元上报更新消息所携带的时间。
清除状态|包括已清除、未清除。可以勾选一个或多个状态。
告警类型|选择需要的告警类型。
确认用户|输入确认告警的用户名。
对象原始流水号|告警条目流水号。
注释|输入注释内容。
告警原因|告警产生的原因。
工程状态|包括普通、调测、新建3种工程状态。
网元虚拟化标识|包括全部、物理网元、虚拟网元。
排序列|选择排序列方式，包含有服务端时间、发生时间、告警级别、告警类型、告警码。
排序方式|选择降序或升序。
相关任务 :任务|操作
---|---
恢复默认条件查询|在图1中，单击默认按钮，恢复系统默认条件设置。
保存当前告警|在图1中，单击 按钮，设置名称，另存当前告警。
导出当前告警|在图1中，单击导出按钮，可以导出已选的告警或者是导出全部告警。参考手动导出告警。
定制告警列|在图1中，单击按钮，可以自定义告警列项。
##### 按告警级别查询 
摘要 :通过告警级别查询当前告警。 
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
单击告警主页面右上方的告警灯图标，如[图1]所示，在下拉菜单中选择告警级别，按告警级别（严重、主要、次要和警告）分类查询。
图1  单击告警灯

例如，选择严重告警，查询结果如[图2]所示。
图2  查询结果

##### 按已有条件查询 
摘要 :通过已有查询条件查询当前告警。系统提供三种默认查询条件：告警监控、最近一天和最近两天。用户自定义的查询保存后，也会在查询条件的选项中显示。
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
在告警监控栏，单击条件模板按钮，打开条件模板页面，如[图1]所示。
图1  选择条件模板

选择已存在的条件模板，按已有条件查询告警，如[图2]所示。图2  按查询条件查询

#### 查询历史告警 
摘要ElasticNet UME提供历史告警高级筛选过滤查询功能（支持按网元类型、位置、告警类型、清除类型、告警码、发生时间、确认时间、清除时间、确认状态、确认用户、根源/衍生告警、注释、可见性等筛选过滤）和排序。并提供历史告警确认、注释、刷新、导出等功能。维护人员可以通过多种方式查询历史告警。 
##### 按自定义条件查询 
摘要 :通过自定义查询条件，查询存放在历史告警库中的告警。 
步骤 :在告警管理页面，选择菜单历史告警→告警查询
。
单击高级筛选按钮，打开告警筛选条件设置页面，如[图1]所示。
图1  高级筛选

参见[表1]设置查询的条件，根据需要选择设置一个或多个条件。
设置条件|说明
---|---
资源|按资源对象或者资源类型过滤告警。|资源
告警码|在搜索栏输入告警码或告警码名称来查找到要选择的告警码。单击小箭头，选中的告警码从待选项框进入已选项框。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|时区|设置告警查询的时区条件。可以选择网元时区或者客户端时区。
发生时间|时间条件|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
服务端时间|时间条件|告警在网管侧入库时间。
改变时间|时间条件|网元上报更新消息所携带的时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|包括严重、主要、次要、警告4个级别。
根源衍生告警|其他条件|勾选根源告警、衍生告警中的一个或两个。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|告警清除的条件，可以需要选择。
确认用户|其他条件|输入确认告警的用户名。
对象原始流水号|其他条件|系统生成的流水号。
注释|其他条件|输入注释内容。
告警原因|其他条件|告警产生的原因。
按关联网元查询|其他条件|是否按关联的网元查询告警。
更多条件|网元虚拟化网元标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
排序规则|排序列|选择排序列方式，包含有清除时间、发生时间、告警级别、告警类型、告警码。
排序方式|排序规则|勾选降序或升序。
单击查询按钮，开始查询。
##### 按已有条件查询 
摘要 :通过已有的查询条件，查询存放在历史告警库中的告警。系统提供三种默认查询条件：所有、最近一天和最近两天。用户自定义的查询保存后，也会显示在查询条件的选项中。
步骤 :在告警管理页面，选择菜单历史告警→告警查询
。
单击页面右上方的查询条件按钮。在下拉菜单中选择查询条件，如[图1]所示，开始查询。
图1  选择查询条件

#### 查询通知 
##### 查询通知信息 
摘要 :
维护人员按自定义查询条件查询已经上报的通知信息。 
步骤 :在告警管理页面，选择菜单通知→通知查询
，打开通知查询页面。
单击高级筛选按钮，打开高级查询设置页面。
参见[表1]设置查询条件。设置条件|说明
---|---
资源|按资源对象或者资源类型过滤通知。|资源
通知码|在搜索栏输入通知码或通知码名称来查找到要选择的通知码。单击小箭头，选中的告警码从待选项框进入已选项框。开启排除模式按钮，选择的结果为已选项的反集。|通知码
时间条件|时区|设置告警查询的时区条件。可以选择网元时区或者客户端时区。
发生时间|时间条件|网元侧通知产生时间。
更多条件|网元虚拟化标识|可选物理网元、虚拟网元或者全选。
单击查询按钮。
相关任务 :在通知查询页面，维护人员也可以通过已有的查询条件查询通知信息，方法如下：
在通知查询页面右上角，单击查询条件按钮。
在下拉菜单中选择需要的查询条件，如[图1]所示。
图1  按条件查询通知

##### 监控通知信息 
摘要 :通知监控可以实时查看通知信息，并可导出通知信息。 
步骤 :在告警管理页面，选择菜单通知→通知监控
，打开通知监控页面，如[图1]所示。
图1  通知监控

单击按钮，可以查看通知的详细信息，以及处理建议，如[图2]所示。
图2  详情

相关任务 :任务|操作
---|---
查看最新通知|在图1中，单击刷新按钮，系统产生的通知全部显示在列表中，按照最近的时间顺序从上到下排序显示。
清除通知|在图1中，单击清空表格按钮，删除页面显示的所有通知信息。
导出通知|导出已选通知在图1中，在通知列表中选中需要导出的通知，单击导出→导出已选，通知信息以文件方式保存到本地。导出全部通知在图1中，单击导出→导出全部，通知信息以文件方式保存到本地。
#### 查看告警详情 
摘要 :查看当前告警、历史告警的详细信息、处理建议，活跃期告警轨迹和相关规则。 
步骤 :根据需要，打开相应页面。如果...|那么...
---|---
查看当前告警详情|在告警管理页面，选择菜单当前告警→告警监控，打开告警监控页面。
查看历史告警详情|在告警管理页面，选择菜单历史告警→告警查询，打开告警查询页面。
单击告警所在行的详情按钮，如[图1]所示。图1  查看告警详情

在打开的页面中查看该告警的详情和处理建议，如[图2]所示。图2  告警详情

选择活跃期告警轨迹页签，查看告警的变化记录，如[图3]所示。图3  活跃期告警轨迹

选择相关规则页签，查看告警相关规则。
#### 查看告警提示 
摘要 :当前告警监控是按照告警发生时间降序排列的，因此在告警数量比较多的场景下，用户当前重点关注的告警信息，可能会被推到下一页，不方便查看。 
告警提示功能给用户提供定制策略，可定制重点关注重要告警。定制后，当这些告警产生或状态发生变化时，则会在当前告警监控界面呈现的同时，还会在告警提示页面上呈现。 
告警提示页面是实现告警提示功能的一种提示方式，在告警提示页面中的告警表格中展示了满足提示规则的告警列表。 
 说明： 
告警提示的实时监控表格只显示最近40秒以来新上报的告警，时间以告警的服务器时间为准。 
告警提示列表只显示最多100条告警。 
步骤 :定制告警提示策略
在告警管理页面，选择菜单告警设置→其他设置
，切换到提示设置页签，如[图1]所示。
图1  告警提示设置

单击新建按钮，创建告警提示策略。具体操作参考[设置告警提示]。
查看告警提示
在告警管理页面，选择菜单当前告警→告警提示
，查看相关告警信息，如[图2]所示。
图2  告警提示

#### 查看当前告警统计 
摘要 :通过统计当前告警的相关统计信息（告警数量和百分比），方便维护人员监控当前设备和网络的状态。 
ElasticNet UME系统支持的统计类型：
按网元统计 
按网元类型统计 
按切片统计 
步骤 :在告警管理页面，选择菜单当前告警→告警统计
，打开告警统计页面，如[图1]所示。
图1  告警统计图

单击表格按钮，告警的统计信息以表格方式显示，如[图2]所示。
图2  告警统计表

（可选）如果需要保存统计结果，单击按钮，统计结果以文件方式保存到本地。文件格式为.csv/.txt/.xml/.html。如[图3]所示。
图3  导出全部

单击刷新频率下拉框，设置统计数据的刷新频率，如[图4]所示。
图4  刷新频率

#### 查看历史告警统计 
历史告警统计指：按某个属性，对历史告警的平均时长，或告警发生次数进行统计汇总。 
ElasticNet UME系统支持的统计类型：基础统计：对所有符合设定条件的历史告警进行统计。 
忙时统计：只统计业务繁忙时刻的历史告警。 
重要告警码统计：统计符合条件的告警的发生频次。 
故障/故障率频次统计：统计符合条件的故障的发生频次。 
##### 查看基础统计 
摘要 :基础统计是对所有符合设定条件的历史告警进行统计。用户可以通过告警码、告警类型或告警级别统计项来设定统计条件。统计结果以表、饼图或者柱状图的形式显示。 
步骤 :在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到基础统计页签，如[图1]所示。
图1  基础统计页面

单击查询条件按钮，选择系统预定义或者用户自定义的查询条件，如[图2]所示。
图2  查询条件

查询条件选好后，统计结果自动显示。 
（可选）单击表格、环状图、柱状图按钮，切换统计结果显示形式。
相关任务 :任务|操作
---|---
修改统计查询条件|单击查询条件下拉框，选择一个查询条件，如告警码Top5。单击修改按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
新建统计查询条件|单击新建按钮。在弹出的页面设置相关参数，参考表1。设置完成后，单击统计按钮。
保存统计数据|单击导出全部按钮，基础统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
恢复默认统计查询条件|单击默认按钮，恢复系统默认查询条件（告警码Top5）。
参数|说明
---|---
基本信息|名称|设置基础统计模板的名称。
动作|统计行|设置行的统计项。维度一：告警码、告警类型、级别、网元、网元类型、时间（小时/日期/周，统计的是服务端的时间）。维度二：告警码、告警类型、级别、网元。维度二的选项与维度一相关，确定维度一的统计项后，维度二的可选项根据维度一自动调整显示。
统计列|动作|设置列的统计项。
最大显示条数|动作|设置最大显示条数，范围：5-500。
资源|按资源对象或者资源类型统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|勾选一个或多个告警级别，包括：严重、主要、次要和警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|勾选需要的清除类型。
确认用户|其他条件|输入确认告警的用户名。
注释|其他条件|备注定时输出信息。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
##### 查看忙时统计 
摘要 :用户在某种业务范围内或某些时段，会比较关注历史告警的平均时长，或者历史告警发生次数。忙时统计就是用来统计业务繁忙时刻的历史告警。 
用户可以通过设置告警的平均时长或告警频次，来统计告警。 
步骤 :在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到忙时统计页签，如[图1]所示。
图1  历史告警忙时统计列表

单击查询条件按钮，选择系统预定义或者用户自定义的查询条件，如[图2]所示。
图2  查询条件

查询条件选好后，统计结果自动显示。 
（可选）单击表格、环状图、柱状图按钮，切换统计结果显示形式。
相关任务 :任务|操作
---|---
修改统计查询条件|单击查询条件下拉框，选择一个查询条件，如告警频次。单击修改按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
新建统计查询条件|单击新建按钮。在弹出的页面设置相关参数，参考表1。设置完成后，单击统计按钮。
保存统计数据|单击导出全部按钮，忙时统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
恢复默认统计查询条件|单击默认按钮，恢复系统默认查询条件（告警频次）。
参数|说明
---|---
基本信息|名称|设置忙时统计模板的名称。
动作|统计类型|包括：告警频次、平均时长。
有效时段|动作|设置统计时间范围。
显示设置|动作|设置显示设置为全部或最大显示条数。
资源|按资源对象或者资源类型统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|勾选一个或多个告警级别，包括：严重、主要、次要和警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|勾选需要的清除类型。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
##### 查看重要告警码统计 
摘要 :本节介绍如何设置统计条件，对指定的告警码、按照指定的时间段内发生的频次进行统计。 
步骤 :在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到重要告警码统计页签，参考[表1]设置统计参数。
参数|说明
---|---
资源|按资源对象统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。|告警码
时间条件|发生时间|网元侧告警产生时间。
持续时间|时间条件|告警持续存在时间。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
单击统计按钮，统计结果显示在列表中，如[图1]所示。
图1  重要告警码统计列表

相关任务 :任务|操作
---|---
修改统计查询条件|在图1中，单击 按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
保存统计数据|单击导出全部按钮，重要告警码统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
##### 查看故障/故障频次统计 
摘要 :故障/故障率频次统计是指统计分析全网或部分网元故障率和故障次数，并输出报表。本节介绍如何设置相关的查询条件，统计每个月符合条件的告警故障次数和故障率数据。 
步骤 :在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到故障/故障频次统计页签，参考[表1]设置统计查询条件。
参数|说明
---|---
资源|按资源对象或者资源类型统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|勾选一个或多个告警级别，有严重、主要、次要和警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|勾选需要的清除类型。
确认用户|其他条件|输入确认告警的用户名。
注释|其他条件|备注定时输出信息。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
单击统计按钮，页面会显示统计结果，如[图1]所示。
图1  故障/故障频次统计列表

相关任务 :任务|操作
---|---
修改统计查询条件|在图1中，单击 按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
保存统计数据|单击导出全部按钮，故障/故障率频次统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
### 告警处理 
#### 确认告警 
摘要 :确认告警表示某条告警由当前用户跟踪处理，其他用户不需太多关注。确认后告警状态变成已确认。
已确认的告警若需要取消，则执行反确认操作。反确认后告警状态变成未确认。
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
勾选当前页面显示的告警，可选择一个或多个，如[图1]所示。单击按扭，确认选中的告警。被确认的告警状态变成已确认。图1  勾选要处理的告警

#### 自定义告警处理建议 
对于告警处理的建议，维护人员可以自定义。 
在ElasticNet UME系统，可以通过以下两个途径之一自定义告警处理。
集中自定义：批量对告警处理建议进行自定义。 
单个自定义：查看到某个告警时自定义其处理建议。 
##### 集中自定义处理建议 
摘要 :本节介绍如何在自定义处理建议页面补充告警的自定义处理建议。
步骤 :在告警管理页面，选择菜单告警设置→处理建议设置
，打开处理建议设置页面。
在搜索框中输入告警码或告警码名称，选择目标告警码，选中的告警码的默认处理建议会显示出来，如[图1]所示。图1  自定义处理建议页面

在自定义处理建议文本框中输入自定义的处理建议内容。
单击保存按钮。
（可选）若要恢复默认处理建议，单击重置按钮。
##### 单个自定义处理建议 
摘要 :本节介绍如何在查看某个告警码的详情时，补充该告警的自定义处理建议。 
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
对于一个告警，单击所在行的详情按钮。查看默认的处理建议，如[图1]所示。图1  处理建议

在自定义处理建议文本框中输入自定义的处理建议内容。
单击保存按钮。
（可选）若要恢复默认处理建议，单击重置按钮。
#### 清除告警 
摘要 :故障排除后告警无法自动清除时，需要维护人员手动清除告警。 
 说明： 
手动清除告警前，需要确认： 
告警无法自动清除。 
已确认网元不存在该告警。 
已确认ElasticNet UME上不存在该告警。 
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
根据需要进行操作。如果...|那么...
---|---
清除单个告警|单击该告警所在行的按钮。
清除多个告警|勾选多个告警，单击按钮。
在弹出的确认清除选中告警的对话框中，单击清除按钮。
#### 前转告警 
摘要 :维护人员可以设置告警前转规则来自动将符合条件的告警前转到指定的联系人。也可以在处理告警时，手动将一条告警前转到指定的联系人（邮件/短信通知用户）。 
本节介绍手动前转告警的操作方法。 
 说明： 
为了实现告警前转功能，需要预先完成系统的前转配置，包括邮件前转配置和短信前转配置。
前转配置的具体操作可参见前转配置
。
前提 :已经在系统→安全→用户管理 中，预先配置好前转用户的邮件地址和电话号码。 
已经在系统→配置中心→系统配置→前转配置→邮件/短信前转配置中完成邮件服务器/短信中心的前转配置。 
步骤 :在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
参见[查询当前告警]，查找到要处理的告警。
单击待前转告警所在行的按钮，选择前转按钮，如[图1]所示。图1  设置告警前转

在如[图2]所示页面，参考[表1]设置前转的相关信息。
图2  前转设置窗口

如果...|那么...
---|---
邮件前转|选择一个或多个需发送的联系人。设置邮件前转的邮件标题和邮件内容。
短信前转|选择一个或多个需发送的联系人。设置短信前转的内容。
设置完成，单击确定。
### 管理告警和通知 
#### 同步当前告警 
摘要 :由于网络中断等原因，可能造成ElasticNet UME的告警数据与网元告警数据不一致。通过手动同步操作，可以将选中网元的当前告警数据同步到ElasticNet UME。
步骤 :在告警管理页面，选择菜单当前告警→告警同步
，打开告警同步页面，如[图1]所示。图1  告警同步

根据需要，要进行网元同步操作。 
如果...|那么...
---|---
同步全网元|单击全网同步按钮，完成全网元同步操作。
同步已选网元|勾选需同步的网元，单击同步按钮，完成所选网元同步操作。
查看同步结果，如[图2]所示。图2  同步结果

#### 导出告警 
##### 手动导出告警 
摘要 :可以将当前告警或者历史告警导出到指定类型的文件中，方便通过文件查看告警。 
步骤 :根据需要，进入对应页面。 
如果...|那么...
---|---
导出当前告警|在告警管理页面，选择菜单当前告警→告警监控，打开告警监控页面。
导出历史告警|在告警管理页面，选择菜单历史告警→告警查询，打开告警查询页面。
单击导出→导出已选
，则导出选中的告警。单击导出→导出全部
，则导出所有的告警。如[图1]所示。图1  导出

在弹出的对话框中，设置文件名和文件类型，类型可以是.csv/.txt/.xml/.html，如[图2]所示。
图2  设置导出告警文件类型

单击确定按钮，文件会以zip包的形式下载到本地。
##### 定时导出当前告警 
摘要 :定时导出功能指ElasticNet UME定期导出符合条件的当前告警，保存为文件，并支持将文件上传至指定的FTP/SFTP服务器。
步骤 :在告警管理页面，选择菜单当前告警→定时导出
，打开定时导出页面。
单击新建按钮，打开创建定时导出任务页面。
参考[表1]，设置定时导出参数。
参数|说明
---|---
基本信息|名称|设置定时导出任务名。
描述|基本信息|简要描述任务相关信息。
激活|基本信息|设置任务创建后的状态，默认：激活状态。
导出格式|基本信息|导出数据保存的文件格式类型，包括.csv、.txt、.xml、.html、xlsx。
导出策略|基本信息|设置导出的是增量数据还是全量数据。
高级设置|启用第三方FTP|设置是否启用第三方FTP服务器来保存输出的文件。是：表示将文件保存到第三方服务器。需要设置第三方FTP服务器的IP、文件路径、端口、用户名和密码，单击测试连接来测试ElasticNet UME是否能正常连接到此第三方服务器。否：表示使用默认服务器。
周期设置|高级设置|设置定时导出的时间周期。包括：分钟、小时、天。
执行时间|高级设置|当任务周期为天时，需要设置任务执行的具体时间（服务端时间）。
资源|按资源对象或者资源类型定时输出告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
确认时间|时间条件|网元侧告警确认时间。
其他条件|确认状态|勾选确认状态：已确认、未确认。
可见性|其他条件|设置定时导出当前告警时，才有此参数。
告警级别|其他条件|勾选一种或多种告警级别：严重、主要、次要、警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选一个或多个告警类型。
确认用户|其他条件|输入用户名称。
注释|其他条件|备注定时输出信息。
更多条件|网元虚拟化标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调试、新建3种工程状态。
参数设置完成后，单击新建，完成创建定时导出任务，定时任务列表如[图1]所示。
图1  定时导出

相关任务 :任务|操作
---|---
激活定时导出任务|激活单个任务：单击任务所在行的激活按钮。激活多个任务：勾选多个任务，单击列表上方的激活按钮。
暂停定时导出任务|暂停单个任务：单击任务所在行的挂起按钮。暂停多个任务：勾选多个任务，单击列表上方的挂起按钮。
删除定时导出任务|删除单个任务：单击任务所在行的删除按钮。删除多个任务：勾选多个任务，单击列表上方的删除按钮。
查看定时导出任务执行日志|单击一个任务所在行的日志按钮，显示该任务执行的日志信息，如图2所示。单击任务文件名，定时导出的告警信息以表格形式下载到本地，可以直接打开查看。
图2  日志

##### 定时导出历史告警 
摘要 :定时导出功能指ElasticNet UME定期导出符合条件的历史告警，保存为文件，并支持将文件上传至指定的FTP/SFTP服务器。
步骤 :在告警管理页面，选择菜单历史告警→定时导出
，打开定时导出页面。
单击新建按钮，打开创建定时导出任务页面。
参考[表1]，设置定时导出参数。
参数|说明
---|---
基本信息|名称|设置定时导出任务名。
描述|基本信息|简要描述任务相关信息。
激活|基本信息|设置任务创建后的状态，默认：激活状态。
导出格式|基本信息|导出数据保存的文件格式类型，包括.csv、.txt、.xml、.html、xlsx。
高级筛选|启用第三方FTP|设置是否启用第三方FTP服务器来保存输出的文件。是：表示将文件保存到第三方服务器。需要设置第三方FTP服务器的IP、文件路径、端口、用户名和密码，单击测试连接来测试ElasticNet UME是否能正常连接到此第三方服务器。否：表示使用默认服务器。
周期设置|高级筛选|设置定时导出的时间周期。包括：分钟、小时、天。
执行时间|高级筛选|当任务周期为天时，需要设置任务执行的具体时间（服务端时间）。
资源|按资源对象或者资源类型定时输出告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
确认时间|时间条件|网元侧告警确认时间。
清除时间|时间条件|网元侧告警清除时间。定时导出历史告警时，需要设置此参数。
其他条件|确认状态|勾选确认状态：已确认、未确认。
告警级别|其他条件|勾选一种或多种告警级别：严重、主要、次要、警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选一个或多个告警类型。
清除类型|其他条件|勾选一个或多个清除类型。定时导出历史告警时，需要设置此参数。
确认用户|其他条件|输入用户名称。
注释|其他条件|备注定时输出信息。
按关联网元查询|其他条件|是否按关联的网元查询告警。
更多条件|网元虚拟化标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调试、新建3种工程状态。
参数设置完成后，单击新建，完成创建定时导出任务，定时任务列表如[图1]所示。
图1  定时导出

相关任务 :任务|操作
---|---
激活定时导出任务|激活单个任务：单击任务所在行的激活按钮。激活多个任务：勾选多个任务，单击列表上方的激活按钮。
暂停定时导出任务|暂停单个任务：单击任务所在行的挂起按钮。暂停多个任务：勾选多个任务，单击列表上方的挂起按钮。
删除定时导出任务|删除单个任务：单击任务所在行的删除按钮。删除多个任务：勾选多个任务，单击列表上方的删除按钮。
查看定时导出任务执行日志|单击一个任务所在行的日志按钮，显示该任务执行的日志信息，如图2所示。单击任务文件名，定时导出的告警信息以表格形式下载到本地，可以直接打开查看。
图2  日志

#### 手动导出通知 
摘要 :手动导出当前通知或者历史通知，方便通过文件查看通知。 
步骤 :根据需要，进入对应页面。 
如果...|那么...
---|---
导出当前通知|在告警管理页面，选择菜单通知→通知监控，打开通知监控页面。
导出历史通知|在告警管理页面，选择菜单通知→通知查询，打开通知查询页面。
选中需要导出的通知，单击导出按钮，选择导出已选；或者直接单击导出按钮，选择导出全部。
设置保存的文件名和文件类型，如[图1]所示，类型可以是.csv/.txt/.xml/.html。图1  保存文件

单击确定按钮，文件会以zip包的形式下载到本地。
#### 定时导出历史统计数据 
摘要 :定时统计任务指通过创建定时统计任务，使用历史告警数据的基础统计查询模板，把统计结果输出到指定的目录下。 
定时统计支持三种执行计划：按天执行、按周执行、按月执行。一个定时统计任务一天只能执行一次。 
步骤 :在告警管理页面，选择菜单历史告警→定时统计
，打开定时统计页面，如[图1]所示。
图1  定时统计

单击新建按钮，创建定时统计任务计划，如[图2]所示。
图2  新建定时统计

参考[表1]，设置定时统计任务执行的相关参数。
参数|说明
---|---
任务信息|名称|定时统计任务的名称。
任务时间|任务信息|定时任务执行的时间区段。
模板名称|任务信息|下拉框选择历史告警数据基础统计的查询条件模板。创建查询模板参考查看基础统计。
激活|任务信息|任务创建后的状态。默认：激活。
高级筛选|启用第三方FTP|历史告警的定时统计任务结果需要放到第三方FTP服务器，则开启此选项。根据对接的FTP服务器，配置相关参数。
执行计划|每天：设置每天几点执行任务。每周：设置周几执行任务，并指定具体时间点。每月：设置每月第几天执行任务，并指定具体时间点。|执行计划
单击新建按钮，完成定时统计任务创建，任务显示在列表中，如[图3]所示。
图3  定时统计任务创建完成

相关任务 :任务|操作
---|---
激活任务|激活单个任务：单击任务所在行的激活按钮。激活多个任务：勾选多个任务，单击列表上方的已激活按钮。
暂停任务|暂停单个任务：单击任务所在行的挂起按钮。暂停多个任务：勾选多个任务，单击列表上方的挂起按钮。
修改任务|单击状态为已暂停的任务所在行的修改按钮，参考表1重新修改相关参数。
删除任务|删除单个任务：单击任务所在行的删除按钮。删除多个任务：勾选多个任务，单击列表上方的删除按钮。
查看任务执行日志|单击一个任务所在行的日志按钮，显示该任务执行的日志信息，页面如图4所示。单击日志生成的文件名，统计结果以.csv文件保存到本地，可以直接打开查看。
图4  定统计任务日志

### 告警设置 
#### 设置告警属性 
##### 重定义告警级别 
摘要 :系统初始化时设置了每条告警的默认告警级别。级别重定义设置的功能就是在系统运行过程中，根据不同的业务需求和实际环境修改告警级别，以引起重点关注。 
 小心！ 
告警级别重定义可能会影响业务，谨慎操作。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，打开其他设置页面，如[图1]所示。
图1  级别重定义

在级别重定义页签，单击资源类型的下拉框，选择要修改的告警，如[图2]所示。
图2  选择资源类型

选好重定义的告警后，单击重定义级别列的下拉框，选择新级别，如[图3]所示。
图3  重定义告警级别

单击保存按钮。
##### 设置告警提示的声音和颜色 
摘要 :通过定制不同级别告警的提示声音和显示颜色，提醒用户及时关注系统发生的故障或事件。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到声音颜色设置页签，如[图1]所示。
图1  声音颜色设置

在声音设置行中，单击告警级别下默认.wav按钮，弹出打开窗口。选择本地要上传的音频文件。
（可选）单击重置按钮，恢复系统默认的声音设置。
单击声音设置行的关闭声音或开启声音按钮，可以开启和关闭告警级别声音提示。
在颜色设置行中，单击级别的缺省色块，打开颜色选择器，如[图2]所示。
图2  设置级别颜色

在颜色选择器中选取需要的颜色，单击页面空白处，完成自定义颜色选择，如[图3]所示。
图3  设置颜色

（可选）单击重置按钮，恢复系统默认的颜色设置。
##### 定制告警码 
摘要 :在创建自定义的性能指标时，对告警码的定制可以为该指标设定一个自定义的告警级别。根据不同的网元或网元类型设置自定义的告警级别。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到告警码定制页签，如[图1]所示。图1  告警码定制

单击资源类型后的选择框，选择资源类型以便于快速定位到要修改的告警码。
单击要修改的告警码对应的修改按钮，打开自定义告警码级别页面，如[图2]所示。图2  自定义告警码级别

单击自定义告警码级别下拉框选择一个告警级别。
在自定义告警码名称文本框中输入新的名称。
单击确认按钮。
##### 设置告警提示 
摘要 :用户可以针对需要重点关注的告警设置提示任务。设置告警提示后，当这些告警产生或状态发生变化时，告警信息会在当前告警→告警监控
页面和当前告警→告警提示
页面同时呈现。
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到提示设置页签，如[图1]所示。
图1  提示设置

单击新建按钮，打开新建告警提示页面。
参考[表1]，设置告警提示任务参数。
参数|说明
---|---
基本信息|名称|设置告警提示任务名。新建告警提示任务时，不允许和现有的告警提示任务名称重复。
描述|基本信息|简要描述告警提示任务相关说明。
激活|基本信息|告警提示任务创建后的状态，默认：激活。
资源|按资源对象或者资源类型定时输出告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
其他条件|告警级别|包括：严重、主要、次要、警告。支持全选。
告警类型|其他条件|下拉框勾选需要的告警类型。
更多条件|网元虚拟化标识|包括全部、物理网元、虚拟网元。
工程状态|更多条件|包括普通、调测、新建3种工程状态。支持全选。
单击新建按钮，完成告警提示设置，如[图2]所示。
图2  新建提示完成

相关任务 :任务|操作
---|---
激活告警提示任务|勾选要激活的告警提示任务。单击激活按钮。
暂停告警提示任务|勾选要暂停的告警提示任务。单击挂起按钮。
删除告警提示任务|勾选要删除的告警提示任务。单击删除按钮。
修改告警提示任务|单击要修改的告警提示任务所在行的挂起按钮。单击要修改的告警提示任务所在行的修改按钮，在弹出的页面中修改告警提示任务的相关参数。修改完成，单击修改按钮保存修改。
##### 设置前转模板 
摘要 :设置告警前转至邮箱或者手机的内容模板，即前转给邮箱或手机的消息格式。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到前转模板设置页签，如[图1]所示。图1  前转模板设置

在邮件的标题栏和内容栏输入模板内容。在短信的内容栏输入内容。
（可选）单击默认按钮，恢复系统默认模板。
单击校验按钮。若校验通过，文本框后有标记，如[图2]所示。
图2  校验通过

单击保存按钮。
##### 设置历史告警自动确认 
摘要 :设置自动确认任务后，在设置的时间前的历史告警会自动确认。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到确认任务设置页签，如[图1]所示。
图1  确认任务设置页面

单击设置按钮，设置自动确认历史告警的天数，如[图2]所示。
图2  设置自动确认天数

单击确定按钮。
##### 设置自动同步任务 
摘要 :由于网络中断等原因，可能造成ElasticNet UME告警数据与网元告警数据不一致。通过设置告警同步方式，可以将选中网元的当前告警数据自动同步到ElasticNet UME。
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到同步设置页签，如[图1]所示。
图1  同步设置

参考[表1]，设置同步周期和激活自动同步设置。
参数|说明
---|---
同步周期设置|设置每多长时间同步一次。同步周期以天、时为单位。
自动同步设置|设置是否开启自动同步。
单击保存按钮，完成同步设置。
##### 设置锁定告警 
摘要 :处于清除状态的未确认的告警，称为锁定告警。锁定告警保留在当前告警列表中，有相应锁定图标显示。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到锁定告警设置页签，如[图1]所示。
图1  锁定告警设置

参考[表1]，选择选择是否锁定告警。
参数|说明
---|---
已清除的告警直接进入历史告警库|不锁定告警，已清除的告警进入历史告警库。
已清除未确认的告警作为当前告警|锁定告警，已清除未确认的告警保留在当前告警中，有相应的锁定图标显示。
自动确认|设置是否需要自动确认锁定告警。
单击保存按钮。
##### 设置列定制模板 
摘要 :本节主要介绍如何设置定制列模板。 
步骤 :在告警管理页面，选择菜单告警设置→其他设置
，切换到列定制模板设置页签，如[图1]所示。
图1  设置列定制模板页面

单击新建按钮，打开新建列定制模板页面，如[图2]所示。
图2  新建列定制模板页面

参考[表1]，设置列定制任务参数。
参数名称|参数说明
---|---
模板名称|自定义模板名称。
模板类型|在下拉菜单中选择模板类型：当前告警历史告警通知
列定制|勾选需要定制的列名。
单击新建按钮，完成列定制模板设置。
相关任务 :任务|操作
---|---
修改列定制模板|单击要修改的列定制模板所在行的修改按钮，在弹出的页面中修改列定制模板任务的相关参数。修改完成，单击修改按钮保存修改。注：系统默认模板不可进行修改操作。
设置列定制模板为默认模板|单击要设为默认模板所在行的设为默认模板按钮，此模板即可设为默认模板。
删除列定制模板|单击要删除的列定制模板所在行的删除按钮，在弹出的确认弹框中，单击删除按钮，删除成功。注：系统默认模板不可进行删除操作。
应用列定制模板|以当前告警为例：在告警主页面左侧导航树中，选择当前告警→告警监控，打开告警监控页面。单击按钮，进入列定制页面。单击右上角重置按钮，即可应用列定制模板。
#### 设置告警处理规则 
摘要 :告警处理是指当指定的告警或通知满足一定条件时，ElasticNet UME系统将自动触发处理操作。设置告警处理规则，即设置告警触发条件和需要执行的动作，ElasticNet UME按照设置的规则自动对告警进行处理，提高告警处理的效率。
相关信息 :ElasticNet UME系统的告警/通知规则多样，每个规则类型的应用说明参见[表1]。
规则类型|应用说明
---|---
显示过滤规则|符合条件的告警会被过滤，即按设定的操作进入当前告警库，不显示在EM系统操作界面上。若告警既满足抑制计划任务（参见“设置告警抑制计划”），又满足显示过滤规则，将直接被抑制计划任务过滤。
告警确认规则|符合条件的告警会被自动确认。
告警清除规则|符合条件的告警会被自动清除。
告警屏蔽规则|符合条件的告警会被自动屏蔽。被屏蔽的告警不再上报，节省网络带宽。
闪断告警规则|在短时间内频繁上报并恢复的告警，符合条件，自动执行指定的操作，如将多条相同的告警合并显示为一条告警。
通知过滤规则|符合条件的通知会被直接丢弃，不显示在EM的操作界面上，也不会保存在数据库。此规则只对新上报的通知生效。
告警前转规则|符合条件的告警上报时或持续一定时间未恢复时，将其通过邮件或手机短信发送到指定人员。
上报过滤规则|当告警上报时，符合条件的告警会被自动过滤丢弃，不上报到EM系统。
告警延迟规则|上报后立即恢复的告警，若符合条件，延迟一段时间后上报。若符合条件的告警在指定时间内恢复，则不显示在EM界面。
告警计时规则|对符合条件的新上报告警的状态进行计时，如果持续时间达到指定的时间，则进行指定的操作。该规则不影响北向。
北向过滤规则|符合条件的告警，在被过滤后将不上报到北向上级管理系统。此规则可能导致北向上级管理系统与EM系统告警不一致。
重复历史告警过滤规则|距最近一条历史告警（包括已被过滤的）一定时间内上报的重复历史告警（发生位置和告警码相同）会被自动过滤丢弃。查询历史告警时可以看到历史告警上报的次数。此规则对新上报的重复历史告警生效。
重复通知过滤规则|距最近一条通知（包括已被过滤的）一定时间内上报的重复通知（发生位置和告警码相同）会被自动过滤丢弃。查询通知时可以看到通知上报的次数。此规则对新上报的重复通知生效。
告警归并规则|告警归并规则用于合并由相同故障引起的告警，并显示其中的一条告警来表示这些告警。该规则不影响北向。
步骤 :在告警管理页面，选择菜单告警设置→规则设置
，打开规则设置页面，如[图1]所示。
图1  规则设置

单击新建按钮，打开创建规则页面。
参考[表2]和[表3]，设置规则相关参数和动作。
参数|说明
---|---
基本信息|规则类型|选择一个规则类型，规则类型说明参见表1。
名称|基本信息|设置告警处理规则任务的名称。
描述|基本信息|简要描述规则任务信息。
激活|基本信息|设置规则创建后的状态，默认：激活。
资源|系统自动处理满足资源分类条件的告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
其他条件|告警级别|勾选一种或多种告警级别：严重、主要、次要、警告。
告警类型|其他条件|勾选一个或多个告警类型。
更多条件|网元虚拟化标识|包括全部、物理网元、虚拟网元。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
规则|动作|说明
---|---|---
告警计时规则|告警持续时间|设置持续时间的阈值，达到此阈值开始执行规则动作。
确认状态|告警计时规则|选择告警确认状态为未确认或已确认。
规则动作|告警计时规则|告警设定的状态持续时长达到设定的值后，告警级别升级或创建新的告警。级别跃迁次要可跃迁到严重或主要；警告可跃迁到次要、主要或严重。创建新告警设置新告警的级别和附加信息。
告警前转规则|联系人|选择前转联系人
前转方式|告警前转规则|选择邮件地址或者电话号码，可多选。
前转周期|告警前转规则|设置前转的频次，包括30分钟、1小时、2小时、3小时。
有效时段|告警前转规则|设置前转哪个时间段内的告警。
重复通知过滤规则|过滤|设置距最近一次通知的重复通知时间，30秒~3600秒。
重复历史告警过滤规则|过滤|设置距最近一次历史告警的重复通知时间，30秒~3600秒。
闪断告警规则|标准|设置在多少条告警在多少分钟内上报，会合并产生一条新告警，并且不显示原有告警。
告警延迟规则|延迟时间|设置延迟时间，10秒~86400秒。
告警归并规则|新告警级别|设置新告警的告警级别，包括严重、主要、次要、警告。
新告警附加文本|告警归并规则|描述新告警内容。
单击新建按钮，新创建的告警规则出现在列表中，如[图2]所示。
图2  新创建告警规则

相关任务 :任务|操作
---|---
激活规则|勾选要激活的规则。单击激活按钮。
暂停规则|勾选要暂停的规则。单击挂起按钮。
删除规则|勾选要删除的规则。单击删除按钮。
修改规则|单击要修改的规则所在行的挂起按钮。单击要修改的规则所在行的修改按钮，在弹出的页面中修改规则。修改完成，单击修改按钮保存修改。
#### 设置告警抑制计划 
摘要 :抑制计划是对工程割接、倒换等任务期间产生的告警进行抑制管理。在抑制计划任务生效期间，若有满足任务条件的告警上报时，页面会出现一条“抑制计划任务(1023) 
”告警，满足任务条件的告警会被此告警抑制且不会出现在告警页面中。
告警抑制计划任务可以根据设置隐藏这些人工造成的非正常告警，确保告警显示更准确。 
步骤 :在告警管理页面，选择菜单告警设置→抑制计划
，打开抑制计划页面，如[图1]所示。
图1  抑制计划页面

单击新建按钮，打开新建抑制计划页面。
参考[表1]设置新建抑制计划的相关参数。
参数|说明
---|---
基本信息|名称|设置抑制计划任务名。新建抑制计划任务时，不允许和现有的抑制计划任务名称重复。
激活|基本信息|设置抑制计划任务创建后的状态，默认：激活。
备注|基本信息|简要描述抑制计划任务相关信息。
联系人|基本信息|为抑制计划设置联系人。
工程任务描述|基本信息|为抑制计划设置工程任务描述信息。
任务周期|基本信息|设置抑制计划任务的开始时间和结束时间。
动作|上报北向|设置抑制计划任务产生的新告警是否上报到北向上级管理系统。
工程状态|动作|包括普通、调测、新建3种工程状态。
资源|设置抑制计划的资源。|资源
更多条件|网元虚拟化标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
任务参数设置完成，单击新建按钮，完成抑制计划的创建，页面如[图2]所示。
图2  计划已创建

相关任务 :任务|操作
---|---
暂停抑制计划|勾选要激活的计划。单击激活按钮。
激活抑制计划|勾选要暂停的计划。单击挂起按钮。
删除抑制计划|勾选要删除的计划。单击删除按钮。
修改抑制计划|单击要修改的计划所在行的挂起按钮。单击要修改的计划所在行的修改按钮，在弹出的页面中修改计划。修改完成，单击修改按钮保存修改。
### 告警关联规则管理 
5G的虚拟化垂直架构从下往上包括物理层、虚拟层、业务层三个层次。当底层出现故障时，将影响上层业务。ElasticNet UME系统包含告警根因分析（RCA）模块，可以在多个层面找出根源告警，快速定位故障。
通过新建或导入告警关联规则，系统可以基于拓扑关系把底层设备的告警和同时期的上层业务告警关联起来，以达到根故障识别的目的。 
#### 导入规则包 
摘要 :规则包是一类RCA规则的集合，支持RCA规则包的新建、导入和导出功能。
步骤 :在告警管理页面，选择菜单规则运行→规则包管理
，打开规则包管理页面，如[图1]所示。
图1  规则包管理

单击导入按钮，在弹出的对话框中选择RCA规则包（仅支持.ura或者.zip格式的文件）。
#### 新建关联规则 
摘要 :RCA规则可以由网络运维专家根据经验手工创建，也可以在规则包管理中导入含有RCA规则的规则包（参见“[导入规则包]”）。
前提 :已创建该RCA归属的规则包。 
步骤 :在告警管理页面，选择菜单规则运行→规则管理
，打开规则管理页面，如[图1]所示。
图1  规则管理

单击新建按钮，打开添加规则页面，如[图2]所示。
图2  新建规则

新建规则页面参数说明参见[表1]。
参数|说明
---|---
基本信息|规则名称|新建RCA规则的名称。
所属规则包|基本信息|新建RCA规则归属的规则包。
启用状态|基本信息|RCA规则新建后默认的状态。
规则内容|规则模板|可以自定义RCA规则内容，也可以选择已有的规则模板。
描述|规则内容|描述根告警和子告警的关联信息。
设置规则参数，以选择规则模板为例（例如“EMS垂直关联告警码精确匹配模板”），页面如[图3]所示。
图3  新建规则示例

单击确定按钮，新建的RCA规则显示在规则管理列表中。
相关任务 :任务|操作
---|---
激活规则|选择处于未启用状态的规则，打开启用开关。
修改规则|选择处于未启用状态的规则，单击修改按钮，在打开的页面修改参数列表的值。修改完成，单击确定按钮。
删除规则|选择处于未启用状态的规则，单击删除按钮，在打开的页面修改参数列表的值。修改完成，单击确定按钮。
查询规则日志|在图1中，单击需查询日志的规则所在行操作列中的日志按钮，打开日志查询页面。
#### 查看根告警及其子告警 
摘要 :当前告警监控列表或者历史告警中只呈现根告警，子告警显示在根告警的折叠表中。运维人员只需关注根告警，子告警可以不用处理。 
前提 :已配置RCA规则，参见“[新建关联规则]”。
步骤 :当前告警监控
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。告警关联列存在根源，表示该条告警有子告警，本条告警为根告警，如[图1]所示。
图1  当前告警监控

单击按钮，查看子告警，如[图2]所示。
图2  根源告警

单击按钮，查看根源衍生关系，如[图3]所示。
图3  根源衍生关系

在操作列选择菜单更多→拓扑
，查看根告警及其子告警信息，以及三层关联拓扑，如[图4]所示。
图4  查看父子告警信息

历史告警查询
在告警管理页面，选择菜单历史告警→告警查询
，打开告警查询页面，如[图5]所示。
图5  历史告警查询

单击根源或者子告警的详情按钮，切换到衍生-根源关系页面，查看该告警相关的根告警或者子告警信息，如[图6]所示。
图6  查看根源和子告警关系

## 缩略语 
## 缩略语 
FTP :File Transfer Protocol文件传输协议
IP :Internet Protocol因特网协议
### NMS 
Network Management System网络管理系统
### RCA 
Root Cause Analysis根本原因分析
SFTP :Secure File Transfer Protocol安全文件传输协议
## 日志管理 
### 日志管理概述 
#### 功能简介 
ElasticNet UME系统支持日志查询、日志统计和日志输出功能。日志管理的各项操作必须在用户被赋予操作权限的条件下进行。
日志查询用户通过设置查询过滤条件，查询日志信息。日志查询结果可以导出到本地硬盘，导出文件格式为csv、txt或xlsx。日志查询条件可保存为常用查询模板，便于快速过滤待关注的日志。 
日志统计通过趋势图、块状图、条形图等图形形式展示指定时间段内的日志统计信息，便于直观的分析特定时间段内系统的操作状态及运行情况。 
日志输出为了保证充足的数据库空间，ElasticNet UME支持将日志导出到本地硬盘中保存。为了保证充足的硬盘空间，用户可以设置日志输出任务，ElasticNet UME定期检测日志，并将满足条件的日志定时输出到到syslog服务器或FTP服务器中保存。 
#### 日志分类 
ElasticNet UME系统支持三类日志：安全日志、系统日志和操作日志。三种类型的日志定义参考[表1]。
日志类型|定义|日志级别|触发场景
---|---|---|---
安全日志|安全日志记录与ElasticNet UME系统安全相关的操作信息，用于发现安全风险及安全问题。|非常重要、重要、注意、普通|安全管理员触发，例如：用户登录、会话超时、用户解锁。
系统日志|系统日志记录网元或ElasticNet UME系统运行过程中信息，用于分析系统运行状态，便于排障和问题定位。|致命、严重、重要、警告、提醒、正常|系统自动运行触发，例如：性能数据汇总。
操作日志|操作日志记录用户在ElasticNet UME上进行的操作信息（不包括影响系统安全的操作信息），用于分析用户操作是否对系统正常运行造成影响。|非常重要、重要、注意、普通|用户操作触发，例如：新增用户、修改网元。
应用场景 :ElasticNet UME系统支持存储和管理运行过程中的日志信息。通过查看并分析日志信息，发现安全风险，排查故障或及时做出规避动作。
例行维护例行维护过程中，定期查询操作日志，监控用户进行的非法操作或在非正常时间段进行的非法操作。 
排除故障排障过程中，查询致命或严重的日志信息，分析用户是否有影响安全的操作或系统是否执行了致命级别的操作，便于定位问题，及时排除故障。 
### 查询日志 
按时间、级别、操作结果、操作对象、用户名称、主机地址、操作类型、详细信息等条件查询日志，并可将结果导出成csv文件。
#### 查询操作日志 
摘要 :本节介绍如何查询操作日志。 
步骤 :在日志管理页面，选择菜单日志查询，打开日志查询页面，如[图1]所示。
图1  操作日志

参考[表1]，设置通用查询条件。
参数名称|参数说明
---|---
操作结果|设置查询操哪种结果状态的日志。状态包括：成功、失败。可以多选。
级别|设置查询哪个级别的日志。级别包括：非常重要、重要、注意、普通。可以多选。
操作对象|筛选对象资源类型。
时间|设置查询哪个时间段的日志。时间段选项包括：今天、最近7天、最近30天、全部、自定义。选择自定义，需设置具体的起止时间范围。
（可选）单击高级条件按钮，设置高级查询条件，如[图2]所示。
图2  操作日志-高级查询条件

参数名称|参数说明
---|---
用户名称|设置按用户名称查询操作日志。用户包括所有有操作记录的用户。如果不选择，则查询所有用户的操作日志。
客户端地址|设置按客户端IP地址查询操作日志。根据客户端IP地址来选择客户端，如果不选择，则查询所有客户端的操作日志。
接入方式|设置按接入方式查询操作日志。如果不选择，则查询所有接入方式的操作日志。
操作名称|设置按操作类型查询操作日志。在下拉列表中选择要查询的操作类型。如果不选择，则查询所有操作类型的操作日志。
功能模块|设置按功能模块查询操作日志。如果不选择，则查询所有功能模块操作日志。
详细信息|输入查询关键字，单击，在操作日志的详情的详细信息描述中进行模糊匹配，查询相关的操作日志。
单击查询按钮，页面显示按照设置条件过滤后的日志信息，如[图3]所示。
图3  操作日志查询结果

查询结果相关字段说明参考[表3]。
参数名称|参数说明
---|---
详情|操作日志的详细信息，包括操作描述和重要参数。如果操作结果是失败，还包括失败原因说明。
功能模块|日志按功能模块分类。
操作名称|具体的操作类型。
操作对象|操作对应的资源对象。如果是对ElasticNet UME系统本身的操作，则显示EM。如果是对网元的操作，则显示网元名称。
对象地址|操作对象的IP地址。
级别|日志的重要程度。包括：非常重要、重要、注意、普通，等级依次降低。操作和对应的操作级别是在系统预定义配置好的。
操作结果|包括成功、失败两种结果。
用户名称|执行相关操作的用户。
操作开始时间|操作的开始时间，精确到年月日时分秒。
操作结束时间|操作的结束时间，精确到年月日时分秒。
客户端地址|EM客户端IP地址。
接入方式|客户端的接入模式，包括：WEB、SSH、API、GUI 、TELNET。
相关任务 :任务|操作
---|---
保存当查询条件|单击保存查询条件，保存自定义设置的查询条件。单击我的查询条件，可以查看已保存自定义查询条件。
重置查询条件|单击重置，恢复系统默认的查询条件。
导出查询结果|单击导出结果，将查询的日志结果以文件形式保存到本地。文件格式：csv/txt/xlsx.
#### 查询安全日志 
摘要 :本节介绍如何查询安全日志。 
步骤 :在日志管理页面，选择菜单日志查询，切换到安全日志页面，如[图1]所示。
图1  安全日志

参考[表1]，设置通用查询条件。
参数名称|参数说明
---|---
操作结果|设置查询操哪种结果状态的日志。状态包括：成功、失败。可以多选。
级别|设置查询哪个级别的日志。级别包括：非常重要、重要、注意、普通。可以多选。
时间|设置查询哪个时间段的日志。时间段选项包括：今天、最近7天、最近30天、自定义、全部。选择自定义，需设置具体的起止时间范围。
（可选）单击高级条件按钮，设置高级查询条件，如[图2]所示。
图2  安全日志-高级条件

参数名称|参数说明
---|---
用户名称|设置按用户名称查询安全日志。用户包括所有有安全日志记录的用户。如果不选择，则查询所有用户的安全日志。
客户端地址|设置按客户端IP地址查询安全日志。根据客户端IP地址来选择客户端，如果不选择，则查询所有客户端的安全日志。
接入方式|设置按接入方式查询安全日志。如果不选择，则查询所有接入方式的安全日志。
日志名称|设置按日志名称查询安全日志。如果不选择，则查询所有安全日志。
详细信息|输入查询关键字，单击，在安全日志的详情的详细信息描述中进行模糊匹配，查询相关的安全日志。
单击查询按钮，页面显示按照设置条件过滤后的日志信息，如[图3]所示。
图3  安全日志查询结果

查询结果相关字段说明参考[表3]。
参数名称|参数说明
---|---
详情|安全日志的详细信息，包括操作描述和重要参数。如果操作结果是失败，还包括失败原因说明。
日志名称|安全日志名称。
用户名称|执行相关操作的用户。
级别|日志的重要程度。包括：非常重要、重要、注意、普通，等级依次降低。操作和对应的操作级别是在系统预定义配置好的。
操作时间|操作发起时间，精确到年月日时分秒。
操作结果|包括成功、失败两种结果。
客户端地址|EM客户端IP地址。
接入方式|客户端执行操作时的接入模式。
相关任务 :任务|操作
---|---
保存查询条件|单击保存查询条件，保存自定义设置的查询条件。单击我的查询条件，查看已保存的自定义查询条件。
重置查询条件|单击重置，恢复系统默认的查询条件。
导出查询结果|单击导出结果，将查询的日志结果以文件形式保存到本地。文件格式：csv/txt/xlsx.
#### 查询系统日志 
摘要 :本节介绍如何查询系统日志。 
步骤 :在日志管理页面，选择菜单日志查询，切换到系统日志页面，如[图1]所示。
图1  系统日志

参考[表1]，设置通用查询条件。
参数名称|参数说明
---|---
级别|设置查询哪个级别的日志。级别包括：致命、严重、重要、警告、提醒、正常。可以多选。
时间|设置查询哪个时间段的日志。时间段选项包括：今天、最近7天、最近30天、自定义、全部。选择自定义，需设置具体的起止时间范围。
（可选）单击高级条件按钮，设置高级查询条件，如[图2]所示。
图2  系统日志-高级条件

参数名称|参数说明
---|---
日志名称|设置按日志名称查询系统日志。如果不选择，则查询所有系统日志。
来源|系统日志的来源。
详细信息|输入查询关键字，单击，在系统日志的详情的详细信息描述中进行模糊匹配，查询相关的系统日志。
单击查询按钮，页面显示按照设置条件过滤后的日志信息，如[图3]所示。
图3  系统日志查询结果

查询结果相关字段说明参考[表3]。
参数名|说明
---|---
详情|系统日志的详细信息，显示系统操作结果，包含关键信息和重要参数。
日志名称|系统日志名称
级别|日志的重要程度。包括：致命、严重、重要、警告、提醒、正常，等级依次降低。操作和对应的操作级别是在系统预定义配置好的。
来源|微服务名称 。
操作开始时间|操作的开始时间，精确到年月日时分秒。
操作结束时间|操作的结束时间，精确到年月日时分秒。
主机地址|微服务的IP地址。
相关任务 :任务|操作
---|---
保存查询条件|单击保存查询条件，保存自定义设置的查询条件。单击我的查询条件，查询已保存的自定义查询条件。
重置查询条件|单击重置，恢复系统默认的查询条件。
导出查询结果|单击导出结果，将查询的日志结果以文件形式保存到本地。文件格式：csv/txt/xlsx.
### 查看日志统计信息 
摘要 :本节介绍如何查看日志统计信息。 
本节以查询“操作日志”为例说明，查看日志信息的统计信息。统计项目包括级别、操作结果、Top5操作、Top5客户端地址 和Top5用户5个分项的内容。
步骤 :在日志管理页面，选择菜单日志统计，进入日志统计页面。
选择查询日志统计信息的时间范围（例如，最近7天），选择日志类型（例如，操作日志），如[图1]所示。
图1  日志统计

在趋势图中，选择级别，查看其趋势图和具体统计信息，如[图2]所示。
图2  级别-趋势图和统计信息

每个项目的统计信息有趋势图和单项统计图： 
在趋势图中，单击 趋势图以柱状图展示。单击 趋势图以折线图展示。 
单项统计图以饼状图、条状图等形式展现，单击具体条目还可以查看详情。 
在环形图中单击各级别日志（例如：重要），页面下方将显示详细信息，如[图3]所示。
图3  级别-重要

### 导出日志 
日志输出仅支持输出ElasticNet UME自身的日志信息。当任务状态为激活时，ElasticNet UME系统可以将日志信息输出至第三方日志服务器。
系统支持以下两种日志服务器： 
FTP/SFTP服务器：系统每天定时将前一天的日志文件输出到指定的FTP/SFTP服务器上。 
Syslog服务器：系统实时将日志信息输出到指定的Syslog服务器上。 
#### 导出日志到FTP服务器 
摘要 :ElasticNet UME可以定时将日志文件输出到指定的FTP/SFTP服务器。
步骤 :在日志管理页面，选择菜单日志输出，默认打开FTP配置页签。
单击修改按钮，拖动激活按钮，修改任务为开启状态，并设置输出的日志类型和周期，如[图1]所示。
图1  设置输出的日志类型和周期

参数名|参数说明
---|---
激活|任务状态为激活时，点亮配置页面，可进行参数设置。
日志类型|当前输出的规范：输出规范需要预先设置。选择菜单系统→配置中心→系统配置→日志配置，具体参见设置日志输出规范。操作日志：用户在ElasticNet UME系统的操作记录，包括用户进行的操作、操作起始时间、操作结果，以及用户的接入方式等信息。安全日志：主要记录用户的登录、注销、会话超时等。系统日志：主要记录网元的连接状态等系统信息。
周期设置|设置日志输出的粒度和周期。
语言|根据需要选择中文、英文。
在服务器信息设置区域，设置FTP/SFTP服务器的相关参数信息，如[图2]所示。
图2  FTP/SFTP服务器信息设置

参数名|参数说明
---|---
服务器地址/端口|第三方FTP/SFTP服务器地址/端口。
用户名|第三方FTP/SFTP服务器登录用户名。
密码|第三方FTP/SFTP服务器登录密码。
路径|日志保存在FTP/SFTP服务器的路径。
在清理设置区域，选择是否要开启日志数据清理，以及日志文件的最长保存时间，如[图3]所示。
图3  清理设置

参数名|参数说明
---|---
清理|选择是否需要开启日志文件清理功能。
文件保存最大天数|启用日志文件清理后，设置日志文件在FTP/SFTP服务器上的最长保存时间（单位：天）。
参数设置完成后，单击确定 ，配置信息设置成功。
#### 导出日志到Syslog服务器 
摘要 :ElasticNet UME可以实时将日志信息输出到指定的Syslog服务器。
步骤 :在日志管理页面，选择菜单日志输出，切换到Syslog配置页签。
单击修改按钮，拖动激活按钮，修改任务为开启状态，如[图1]所示。
图1  Syslog配置

参考[表1]，设置任务类型和服务器信息 。
参数|参数说明
---|---
类型|激活|任务状态为激活时，点亮配置页面，可进行参数设置。
日志类型|类型|选择日志类型。。操作日志：用户在EM系统的操作记录，包括用户进行的操作、操作起始时间、操作结果，以及用户的接入方式等信息。安全日志：主要记录用户的登录、注销、会话超时等。系统日志：主要记录网元的连接状态等系统信息。
语言|类型|根据需要选择中文、英文。
服务器信息|服务器地址/端口|第三方Syslog服务器地址/端口。
字符集|服务器信息|Syslog服务器的字符编码方式。
参数设置完成后，单击确定 ，配置信息设置成功。
## 缩略语 
## 缩略语 
FTP :File Transfer Protocol文件传输协议
SFTP :Secure File Transfer Protocol安全文件传输协议
## 信令跟踪 
### 端到端跟踪 
端到端用户信令跟踪是指跟踪特定用户端到端的核心网侧全流程信令。 
#### 跟踪用户 
摘要 :本节介绍如何创建一个端到端的用户跟踪任务，对指定用户进行端到端跟踪。对于不同的网元，可以跟踪不同接口的协议信息。 
根据需求，跟踪任务创建后，可以立即执行、定时执行，也可以是持续运行跟踪任务。 
步骤 :在跟踪管理页面，选择端到端跟踪→用户跟踪
，进入用户跟踪页面，如[图1]所示。
图1  用户跟踪页面

单击新建按钮，打开新建任务页面，如[图2]所示，通用参数说明参见[表1]。
图2  新建用户跟踪

参数|说明
---|---
跟踪类型|用户跟踪的类型。
网元类型|选择需要跟踪的网元类型。
协议类型|选择需要跟踪的协议类型。
时间设置|即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
任务数提示|显示已建任务和系统支持任务的比率。
设置好相关参数后，单击新建，完成用户跟踪任务的建立。
#### 跟踪Pool 
摘要 :本节介绍如何创建一个Pool跟踪任务。对于核心网侧不同的Pool，选择需要跟踪的协议类型进行数据跟踪。 
根据需求，跟踪任务创建后，可以立即执行、定时执行，也可以是持续运行跟踪任务。 
步骤 :在跟踪管理页面，选择菜单端到端跟踪→Pool跟踪
，进入Pool跟踪页面，如[图1]所示。
图1  Pool跟踪

单击新建按钮，创建Pool跟踪任务，页面如[图2]和[图3]所示。
图2  新建Pool跟踪1

图3  新建Pool跟踪2

参考[表1]，设置跟踪任务参数，单击新建按钮，创建跟踪任务完成。
参数|说明
---|---
跟踪类型|Pool跟踪的类型。
时间设置|即时：设置跟踪的时长，任务创建后，立即生效，上报设置时长内的跟踪数据。持续：任务创建后，立即生效，持续上报跟踪数据，不会自动停止。定时：任务创建后，在指定时间段生效，上报指定时间段内跟踪数据。
### CN跟踪（OAM） 
CN跟踪（OAM）实现对中兴通讯核心网ZXUN RCP进行信令跟踪，包括跟踪指定的接口、跟踪指定的用户、跟踪指定的NF、跟踪随机用户等。通过对跟踪到的各类信令的解码及展示功能，操作维护人员可以直观地分析和判断相关信令的正确性，有助于协助排查相关问题。跟踪码流及其解码结果，可以导出为数据文件，供事后分析。 
后续的信令跟踪操作以通用操作为例说明。具体网元的信令跟踪的详细信息需要参考网元对应版本的随机文档。 
#### 通用操作 
##### 新建跟踪任务 
摘要 :本节介绍如何创建一个跟踪任务。跟踪任务的类别包括信令跟踪、失败观察。根据需求，跟踪任务创建后，可以立即执行、定时执行，也可以持续运行。 
步骤 :在跟踪页面，选择CN跟踪（OAM），在左侧的导航树中选择网元PCF/PCRF，页面如[图1]所示。
图1  CN跟踪页面

单击新建按钮，打开新建任务界面，如[图2]所示，通用参数说明参见[表1]。
图2  新建任务界面-通用参数

项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|跟踪任务分类，可根据需要选择。
任务类型|基本信息|根据选择NF不同，任务类型也不同。
选择网元|选择网元|在网元列表中选择需要跟踪的网元。
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
任务数提示|显示已建任务数与系统支持任务数的比率。|任务数提示
单击下一步，进入业务参数页面，如[图3]所示。
 说明： 
跟踪任务的分类不同，后续业务参数的设置也不同。 
图3  业务参数页面

设置好相关业务参数后，单击新建并监控按钮，任务创建成功，进入实时监控状态，如[图4]所示。
图4  实时监控

##### 启动跟踪任务 
摘要 :本节介绍如何启动任务状态是已停止的跟踪任务。
步骤 :在任务列表中勾选需要启动的任务，如[图1]所示。
图1  勾选任务

单击启动按钮，进行任务启动，任务状态变为已激活，如[图2]所示。
图2  启动任务

##### 停止跟踪任务 
摘要 :本节介绍如何停止已经激活或者正在激活中的任务。 
步骤 :在任务列表页面中勾选需要停止的任务，如[图1]所示。
图1  勾选任务

单击停止按钮，将选中的任务停止，任务状态变为已停止，如[图2]所示。
图2  停止任务

##### 修改跟踪任务 
摘要 :本节介绍如何修改任务状态为已停止跟踪任务。只能修改选择网元、时间设置、业务参数参数。
步骤 :在任务列表页面中勾选需要修改的任务，在操作列选择更多→修改
，修改选中的任务，如[图1]所示。修改相关参数的操作参考[新建跟踪任务]。
图1  勾选任务

##### 删除跟踪任务 
摘要 :本节介绍如何删除已停止跟踪的任务。 
步骤 :在任务列表页面中勾选需要删除的任务（可以选择多个跟踪任务），如[图1]所示。
图1  勾选任务

单击删除按钮，在弹出的确认删除所选任务对话框中，单击确定按钮，如[图2]所示。
图2  确认删除所选任务对话框

单击确定按钮，选中的任务从任务类表删除。
##### 查看网元状态 
摘要 :本节介绍如何查看网元的任务状态。 
步骤 :在任务列表页面中，选择需要查看网元状态的跟踪任务所在行，在操作列选择更多→查看网元状态
，弹出查看网元状态对话框，如[图1]所示。
图1  查看网元状态

参见[表1]，查看所选任务的网元的状态。
项目|说明
---|---
任务号|跟踪任务的编号。
网元名|跟踪的网元。
状态|网元的任务状态有如下。已激活：网管下发的任务已经在网元上启动成功。未激活：网元已收到网管下发的任务，启动失败。失败的详细原因在描述列显示。
描述|显示任务运行的详细信息。
##### 实时监控跟踪数据 
摘要 :本节介绍如何监控实时跟踪数据。 
步骤 :在信令跟踪任务的列表中，如[图1]所示，选中所要查询任务。
图1  跟踪任务详情列表

单击监控按钮，默认进入实时监控页签，如[图2]所示。
图2  实时数据

##### 查看历史跟踪数据 
摘要 :本节介绍如何查看历史跟踪数据。 
步骤 :在信令跟踪任务的列表中，如[图1]所示，选中所要查询任务。
图1  跟踪任务列表

单击监控按钮，切换到历史数据页签，如[图2]所示。
图2  设置查询时间

单击高级筛选按钮，设置查询条件，单击查询按钮，历史数据显示如[图3]所示。
图3  历史数据查询

##### 查看详细码流 
摘要 :本节介绍如何查看详细码流。 
步骤 :在实时监控跟踪数据页面或者是查看历史跟踪数据页面，如[图1]所示，选择需要查看详细码流的跟踪任务项。
图1  跟踪数据页面

单击按钮，弹出事件详情界面，查看数据的详细信息，如[图2]所示。
图2  事件详情

##### 保存数据 
摘要 :本节介绍如何保存历史跟踪数据。保存的文件格式为为四种：.html 
 /.txt  
/.sta 
/ .pcap 
。
步骤 :在历史数据查询结果列表中，选择需要导出的条目，如[图1]所示。
图1  选择导出条目

单击导出已选，则选中的条目跟踪信息以文件保存到本地（格式可选：.html 
  /.txt  
/.sta 
/ .pcap 
），如[图2]所示。
图2  选择格式文件

单击导出按钮，则选中数据保存到本地。
##### 设置信令数据存储参数 
摘要 :本节介绍信令数据存储参数的设置。 
步骤 :在跟踪管理页面，选择设置→信令数据存储设置
，页面如[图1]所示。
图1  信令数据存储设置

如果需要修改默认参数设置，单击修改按钮，重新设置参数后，单击提交按钮完成设置。
##### 设置原因码 
摘要 :本节介绍如何设置原因码。原因码设置指用户按照个人需求，自定义需要凸显的异常信令。 
步骤 :在跟踪管理页面，选择设置→原因码设置
，界面如[图1]所示。
图1  原因码设置

单击修改按钮，选择需要凸显的异常信令，单击提交按钮。
（可选）如果不需要自定义凸显某些异常信令，单击恢复默认按钮，则回到到初始模型配置。
##### 查看离线数据 
摘要 :本节介绍如何查看离线数据。 
步骤 :在跟踪管理页面，单击菜单工具→离线数据查看
，打开离线数据查看页面，如[图1]所示。
图1  查看离线数据

单击选择文件按钮，选择需要查看的离线数据文件，如[图2]所示。
图2  上传数据文件

单击上传按钮，则选中的文件开始上传，结束后显示具体跟踪信息，如[图3]所示。
图3  上传结果

#### SIG信令跟踪 
##### 跟踪基于偶联ID的SCTP信令 
摘要 :SCTP实现在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。
本节介绍基于偶联ID的SCTP信令的跟踪方法。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面

设置跟踪任务的通用参数。 
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务的名称。
任务分类|基本信息|选择SIG信令跟踪。
任务类型|基本信息|选择SCTP跟踪 基于偶联ID。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面

设置跟踪任务的业务参数。 
参数|说明
---|---
AssociationID|SCTP链路ID。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，跟踪结果示例如[图3]所示。任务创建成功，新建的任务显示在任务列表中，如[图4]所示。
图3  基于偶联ID的SCTP跟踪结果示例

图4  基于偶联ID的SCTP跟踪任务

##### 跟踪基于端口号的SCTP信令 
摘要 :SCTP实现在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。
本节介绍基于端口号的SCTP信令的跟踪方法。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面

设置跟踪任务的通用参数。 
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务的名称。
任务分类|基本信息|选择SIG信令跟踪。
任务类型|基本信息|选择SCTP跟踪 基于端口号。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面

设置跟踪任务的业务参数。 
参数|参数说明
---|---
LocalPort|本端端口号。
PeerPort|对端端口号。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  基于端口号的SCTP跟踪任务

##### 跟踪基于IP+PORT的SCTP信令 
摘要 :SCTP实现在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。
本节介绍基于IP+PORT的SCTP信令的跟踪方法。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面

设置跟踪任务的通用参数。 
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务的名称。
任务分类|基本信息|选择SIG信令跟踪。
任务类型|基本信息|选择SCTP跟踪 基于IP+PORT。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面

设置跟踪任务的业务参数。 
参数|参数说明
---|---
VPNID|VPN的ID。
LocalIP|本端IP地址。
PeerIP|对端IP地址。
LocalPort|本端端口号。
PeerPort|对端端口号。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  基于IP+PORT的SCTP跟踪任务

#### PCF信令跟踪 
##### 跟踪用户 
摘要 :本节介绍根据不同接口的用户标识创建信令跟踪任务。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  用户跟踪-通用参数页面

设置通用参数，通用参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|选择PCF信令跟踪。
任务类型|基本信息|选择用户跟踪。
选择网元|选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  用户跟踪-业务参数页面

设置业务参数，参数说明参见[表2]。
参数|说明
---|---
接口|选择跟踪的接口类型。
跟踪方式|选择跟踪方式，选项如下：特定用户：至少配置一个用户号码。单击新增按钮，输入IMSI/MSISDN任意一个号码。单击图标，保存号码。全用户：仅供内部调试使用，请谨慎操作。
单击新建并监控按钮，跟踪结果示例如[图3]所示。任务创建成功，新建的任务显示在任务列表中，如[图4]所示。
图3  用户跟踪结果示例

图4  用户跟踪任务

##### 跟踪全量消息 
摘要 :根据协议类型、消息选项和用户号码跟踪全部消息。本节介绍创建一个全跟踪任务的过程。 
 说明： 
全跟踪仅供内部调试使用，请谨慎操作。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  全跟踪-通用参数页面

设置通用参数，通用参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|选择PCF信令跟踪。
任务类型|基本信息|选择全跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  全跟踪-业务参数页面

设置业务参数，参数说明参见[表2]。
参数|说明
---|---
消息选项|选择跟踪消息选项。
协议跟踪类型|选择跟踪的协议类型。
号码跟踪类型|选择跟踪的号码类型。特定用户：至少配置一个用户号码。单击新增按钮，输入IMSI/MSISDN任意一个号码。单击图标，保存号码。全用户：仅供内部调试使用，请谨慎操作。
SC跟踪类型|选择跟踪的SC类型。全部指定：输入指定的SC类型名称。单击新增按钮，输入SC。单击图标，保存。
单击新建并监控按钮，跟踪结果示例如[图3]所示。任务创建成功，新建的任务显示在任务列表中，如[图4]所示。
图3  全跟踪结果示例

图4  全跟踪任务

##### 跟踪Diameter信令 
摘要 :本节介绍创建一个Diameter信令跟踪任务的过程。 
 说明： 
Diameter信令跟踪仅供内部调试使用，请谨慎操作。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  Diameter信令跟踪-通用参数页面

设置通用参数，通用参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|选择PCF信令跟踪。
任务类型|基本信息|选择Diameter信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  Diameter信令跟踪-业务参数页面

设置业务参数，参数说明参见[表2]。
参数|说明
---|---
Diameter跟踪模式|跟踪类型选项：按链路跟踪按设备主机名/设备域名跟踪按接口跟踪
链路号|选择跟踪的Diameter信令链路号。
单击新建并监控按钮，跟踪结果示例如[图3]所示。任务创建成功，新建的任务显示在任务列表中，如[图4]所示。
图3  Diameter信令跟踪结果示例

图4  Diameter信令跟踪任务

##### 跟踪短消息信令 
摘要 :本节介绍根据接口、短消息跟踪方式和链路号创建信令跟踪任务。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  短消息信令跟踪-通用参数页面

设置通用参数，通用参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|选择PCF信令跟踪。
任务类型|基本信息|选择短消息信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  短消息信令跟踪-业务参数页面

设置业务参数，参数说明参见[表2]。
参数|说明
---|---
接口|选择跟踪的接口类型。
短消息跟踪模式|选择短消息跟踪模式，选项如下：按链路跟踪按用户跟踪按短信中心跟踪
链路号|选择跟踪的短消息链路号。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  用户跟踪任务

#### SBIGW信令跟踪 
##### 跟踪HTTP链路信令 
摘要 :SBIGW信令跟踪支持按链路跟踪HTTP信令。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数设置

设置信令跟踪的通用参数，参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|设置跟踪任务的名称。
任务分类|基本信息|选择SBIGW信令跟踪。
任务类型|基本信息|选择HTTP链路信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数设置

设置业务参数，当本端和对端的地址、端口均匹配时，则该HTTP信令可被跟踪上报。参数说明参见[表2]。
参数名称|参数含义
---|---
对端IP地址|对端地址，不支持掩码。未设置则默认匹配。
对端端口|对端端口号。缺省为0，默认匹配。
本端IP地址|本端地址，不支持掩码。未设置则默认匹配。
本端端口|本端端口号。缺省为0，默认匹配。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  HTTP链路信令跟踪

##### 跟踪HTTP服务信令 
摘要 :SBIGW信令跟踪支持按HTTP服务跟踪HTTP信令。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数设置

设置信令跟踪的通用参数，参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务的名称。
任务分类|基本信息|选择SBIGW信令跟踪。
任务类型|基本信息|选择HTTP服务信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数设置

设置业务参数，当服务名和服务参数均匹配时，则该HTTP信令可被跟踪上报。参数说明参见[表2]。
参数名称|参数含义
---|---
服务名|设定的服务名在URL中存在则表示匹配。
服务参数|服务参数在URL和data中作为字符串进行查找，如果查找到，则匹配上；如果设置的服务参数为空，则默认匹配。服务参数只根据请求中的data判断，若请求无该服务参数，但响应中含有此服务参数，该HTTP信令不会被跟踪到。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  HTTP服务信令跟踪

##### 跟踪SBIGW全流程信令 
摘要 :SBIGW全流程信令跟踪支持指定业务关键字对业务发送给SBIGW的客户端路由请求进行跟踪。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数设置

设置信令跟踪的通用参数，参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务的名称。
任务分类|基本信息|选择SBIGW信令跟踪。
任务类型|基本信息|选择SBIGW全流程信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数设置

设置业务参数，参数说明参见[表2]。
参数名称|参数含义
---|---
跟踪方式|缺省为指定业务关键字，可设置业务关键字，当SBIGW接收到符合条件的客户端路由请求时，向EM上报跟踪消息。单击新增按钮，设置业务关键字，单击按钮保存设置。如果需要跟踪多个用户号码，可以继续单击新增按钮，设置下一个业务关键字。最多可设置3个业务关键字。
消息类型|当前仅支持客户端路由。
内部消息跟踪点|设置内部消息的跟踪点，缺省为发送方。
单击新建并监控按钮，任务创建成功。新建的任务显示在任务列表中，如[图3]所示。
图3  SBIGW全流程信令跟踪

#### 跟踪IPS数据 
摘要 :本节介绍根据收发包的源地址、源端口、目的地址、目的端口或者协议号等信息创建IPS数据跟踪任务。 
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  IPS跟踪-通用参数页面

设置通用参数，通用参数说明参见[表1]。
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|选择IPS跟踪。
任务类型|基本信息|默认为数据跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  IPS跟踪-业务参数页面

设置业务参数，参数说明参见[表2]。
参数|说明
---|---
跟踪方向|选择跟踪方向，选项如下：收包发包收发包
IP类型|选择跟踪的IP类型，选项如下：IPV4IPV6
源地址|当跟踪方向为收包和收发包时，源地址和源地址掩码需要配置为对端地址和掩码。当跟踪方向为发包时，源地址和源地址掩码需要配置为本端地址和掩码。
源地址掩码|当跟踪方向为收包和收发包时，源地址和源地址掩码需要配置为对端地址和掩码。当跟踪方向为发包时，源地址和源地址掩码需要配置为本端地址和掩码。
目的地址|当跟踪方向为收包和收发包时，目的地址和目的地址掩码需要配置为本端地址和掩码。当跟踪方向为发包时，目的地址和目的地址掩码需要配置为对端地址和掩码。
目的地址掩码|当跟踪方向为收包和收发包时，目的地址和目的地址掩码需要配置为本端地址和掩码。当跟踪方向为发包时，目的地址和目的地址掩码需要配置为对端地址和掩码。
协议号|设置协议号，协议号说明如下：1 ICMP2 IGMP4 IP6 TCP17 UDP41 IPv647 GRE58 IPv6-ICMP112 VRRP132 SCTP
源端口起始值|设置源端口范围。若为单个端口，则源端口起始值和源端口结束值需要设置为同一值。
源端口结束值|设置源端口范围。若为单个端口，则源端口起始值和源端口结束值需要设置为同一值。
目的端口起始值|设置目的端口范围。若为单个端口，则目的端口起始值和目的端口结束值需要设置为同一值。
目的端口结束值|设置目的端口范围。若为单个端口，则目的端口起始值和目的端口结束值需要设置为同一值。
内容过滤|选择是否使用内容过滤跟踪特征报文。
VLAN过滤|如果IPS使用子接口通信，需要选择是。如果IPS使用主接口通信，需要选择否。
SC编号|SC编号为IPS容器编号，可执行SHOW SCINFO命令查询。
单击新建按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  IPS跟踪任务

举例 :IPS数据跟踪任务举例参见下表。 
场景|参数配置|说明
---|---|---
收包：指定源目地址|跟踪方向：收包IP类型：IPV6源地址：2A12:12:1::101:1源地址掩码长度：128目的地址：2A12:23::102:1目的地址掩码长度：128|源地址为对端网元地址，目的地址为本端网元地址。
发包：指定源目地址|跟踪方向：发包IP类型：IPV6源地址：AB05:63::102:1源地址掩码长度：128目的地址：AB05:70:1::1:2 目的地址掩码长度：128|源地址为本端网元地址，目的地址为对端网元地址。
收发包：指定源目地址|跟踪方向：收发包IP类型：IPV6源地址：AB05:70:1::1:2源地址掩码长度：128目的地址：AB05:63::102:1目的地址掩码长度：128|源地址为对端网元地址，目的地址为本端网元地址。
发包：指定源端口|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：20000源端口结束值：20000|源端口为本端网元端口值。指定单个端口，源端口起始值和源端口结束值需要设置为同一值。
发包：指定目的端口|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128目的端口起始值：8080目的端口结束值：8080|目的端口为对端网元端口值。指定单个端口，目的端口起始值和目的端口结束值需要设置为同一值。
发包：指定源目端口|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：20000源端口结束值：20000目的端口起始值：8080目的端口结束值：8080|源端口为本端网元端口值，目的端口为对端网元端口值。指定单个端口，端口起始值和端口结束值需要设置为同一值。
收包：指定源端口|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8080源端口结束值：8080|源端口为对端网元端口值。指定单个端口，源端口起始值和源端口结束值需要设置为同一值。
收包：指定目的端口|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128目的端口起始值：20000目的端口结束值：20000|目的端口为本端网元端口值。指定单个端口，目的端口起始值和目的端口结束值需要设置为同一值。
收包：指定源目端口|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8080源端口结束值：8080目的端口起始值：20000目的端口结束值：20000|源端口为对端网元端口值，目的端口为本端网元端口值。指定单个端口，端口起始值和端口结束值需要设置为同一值。
收发包：指定源端口|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8080源端口结束值：8080|源端口为对端网元端口值。指定单个端口，源端口起始值和源端口结束值需要设置为同一值。
收发包：指定目的端口|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128目的端口起始值：20001目的端口结束值：20001|目的端口为本端网元端口值。指定单个端口，目的端口起始值和目的端口结束值需要设置为同一值。
收发包：指定源目端口|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8080源端口结束值：8080目的端口起始值：20001目的端口结束值：20001|源端口为对端网元端口值，目的端口为本端网元端口值。指定单个端口，端口起始值和端口结束值需要设置为同一值。
发包：指定源端口范围|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8000源端口结束值：8100|源端口范围为本端网元端口范围。
发包：指定目的端口范围|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128目的端口起始值：20000目的端口结束值：20010|目的端口范围为对端网元端口范围。
发包：指定源目端口范围|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8000源端口结束值：8100目的端口起始值：20000目的端口结束值：20010|源端口范围为本端网元端口范围，目的端口范围为对端网元端口范围。
收包：指定源端口范围|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8000源端口结束值：8100|源端口范围为对端网元端口范围。
收包：指定目的端口范围|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128目的端口起始值：20000目的端口结束值：20010|目的端口范围为本端网元端口范围。
收包：指定源目端口范围|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8000源端口结束值：8100目的端口起始值：20000目的端口结束值：20010|源端口范围为对端网元端口范围，目的端口范围为本端网元端口范围。
收发包：指定源端口范围|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8000源端口结束值：8100|源端口范围为对端网元端口范围。
收发包：指定目的端口范围|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128目的端口起始值：10000目的端口结束值：10010|目的端口范围为本端网元端口范围。
收发包：指定源目端口范围|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128源端口起始值：8000源端口结束值：8100目的端口起始值：10000目的端口结束值：10010|源端口范围为对端网元端口范围，目的端口范围为本端网元端口范围。
发包：指定协议号|跟踪方向：发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128协议号：6|-
收包：指定协议号|跟踪方向：收包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128协议号：6|-
收发包：指定协议号|跟踪方向：收发包IP类型：IPV6源地址掩码长度：128目的地址掩码长度：128协议号：17|-
#### 观察PCF失败消息 
PCF失败观察 
摘要 :本节介绍对PCF失败消息进行观察，将产生的失败数据上报给EM，便于定位分析问题。
步骤 :在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数设置

设置失败观察任务的通用参数。 
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务的名称。
任务分类|基本信息|选择PCF失败观察。
任务类型|基本信息|选择PCF失败观察。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。|选择网元
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
单击下一步，进入业务参数页面，如[图2]所示。
图2  PCF失败观察

设置业务参数，参数说明参见[表1]。
参数|说明
---|---
失败级别|失败级别分为：告警错误通知
号码跟踪类型|跟踪方式选项：特定用户：至少配置一个用户号码。单击新增按钮，输入IMSI/MSISDN任意一个号码。单击图标，保存号码。全用户：仅供内部调试使用，请谨慎操作。
失败原因码跟踪类型|跟踪方式选项：全部：跟踪所有失败。指定：选择跟踪的失败原因。
匹配方式|匹配方式需要和失败码配合使用。正向：表示跟踪失败原因列表中失败。逆向：表示跟踪失败原因列表之外的其他失败。
协议跟踪类型|跟踪方式选项：全部：跟踪所有协议。指定：选择跟踪的协议。
单击新建并监控按钮，跟踪结果如[图3]所示。任务创建成功，新建的任务显示在任务列表中，如[图4]所示。
图3  PCF失败观察示例

图4  PCF失败观察任务

## 缩略语 
## 缩略语 
EM :Element Management网元管理
### GRE 
General Routing Encapsulation通用路由封装
### ICMP 
Internet Control Message ProtocolInternet控制报文协议
### IGMP 
Internet Group Management Protocol因特网组播管理协议
IMSI :International Mobile Subscriber Identity国际移动用户标识
IP :Internet Protocol因特网协议
IPv6 :Internet Protocol Version 6互联网通信协议第六版
MSISDN :Mobile Station International Subscriber Directory Number移动台国际用户目录号
PCF :Policy Control Function策略控制功能
SC :Service Component服务组件
SCTP :Stream Control Transmission Protocol流控制传输协议
TCP :Transmission Control Protocol传输控制协议
### UDP 
User Datagram Protocol用户数据报协议
### VPN 
Virtual Private Network虚拟专用网
### VRRP 
Virtual Router Redundancy Protocol虚拟路由器冗余协议
## 备份与恢复 
### 备份与恢复简介 
概述 :数据是系统中最宝贵的资源，一旦发生数据丢失，将给系统造成重大影响，严重的将影响系统的运行，给系统拥有者带来无法弥补的损失。 
数据只要进行存储交换等操作，就存在安全问题，若未采取备份和恢复手段与措施，就可能导致数据丢失，通过备份恢复，可提高系统的可服务性。 
虚拟化后，ZXUN RCP以及关联产品均运行在云平台上。有必要对数据进行备份，同时务必将备份的数据文件及时归档到第三方的物理存储设备上，以备异常时能通过恢复操作及时恢复系统，减少用户的损失。
#### 备份 
备份是指在备份介质上创建数据副本的过程。数据副本用于原数据被损坏或丢失的情况下恢复数据。 
备份方式分为自动备份和手工备份两种：自动备份是系统通过定时任务，定时将需要备份的数据进行备份，防止系统数据丢失；在故障时，可通过备份文件对系统进行恢复。 
手工备份是系统的操作维护人员保存系统中的重要数据，以备在系统数据丢失或者出现无法解决的故障时，对系统进行恢复。 
#### 恢复 
恢复是指在数据丢失后通过数据副本重新创建原数据的过程。 
注意事项 :维护人员要求执行备份恢复的维护工程师应了解以下相关知识：熟悉Linux常用命令和操作。熟悉本产品设备网络组网、服务器应用部署。熟悉本产品各服务器相关文件、文件路径。为保证备份恢复的效率，防止误操作，维护工程师需符合以下要求：上岗前须进行培训。熟练掌握本产品相关操作流程。严格遵守操作规程和行业安全规程，确保人身安全与设备安全。 
备份恢复中禁止操作内容禁止在忙时执行备份、恢复操作。 说明：执行备份操作会影响磁盘的I/O，并对现有网络运行有重大影响，需要在系统闲时进行，如凌晨0～4点。执行备份操作前需要经过严格的审批，并由专人执行。禁止修改业务数据。禁止卸载业务。禁止删除服务器上重要目录。 
### 备份NF数据 
在网管上进行NF数据的备份恢复。
#### 手工备份NF数据 
摘要 :本节介绍对NF数据进行手工备份的操作过程。
 说明： 
备份前需要确认NF是否存在变化表及变化表是否影响业务，如果影响则解决后再备份；如果不影响，则先传表后再备份。 
步骤 :在EM网管客户端的配置页面，选择PCF名称→PCF节点
。
执行[BACKUP]命令，手动备份NF数据。
参数说明参见[表1]。
参数|参数名称|参数说明
---|---|---
ID|备份任务编号|默认值：1。保持默认值即可。
NAME|备份任务名称|保持默认值即可。
FILEPATH|备份文件路径|不输入，则备份至默认路径，即OMU主用虚机。默认备份路径为sftp://主用OMU IP地址:29029/Oamdata/NF节点号/oam/brm/，用户名ems，密码ZTE_oamdbg_1。输出到第三方服务器：输入第三方服务器路径，格式为sftp://IP地址:端口号/具体路径。
USERNAME|SFTP用户名|备份到OMU主用虚机上：不需要输入用户名。备份到第三方服务器：输入SFTP服务器的用户名。
PASSWORD|SFTP用户密码|备份到OMU主用虚机上：不需要输入密码。备份到第三方服务器：输入SFTP服务器的用户密码。
FILENAME|备份文件名称|不需要添加文件扩展名，系统会自动添加扩展名.zip，若不输入则系统默认为：<网元名称>_<备份日期>_<备份开始时间>。
BAKFILEPWD|备份文件密码|此参数只对欧盟局点有效，其他局点勿填。对于欧盟场景此参数值将作为密码对备份文件进行压缩打包处理，后续如果尝试将此备份数据恢复到系统中，则必须在备份文件密码中输入该密码才能成功。 所以请牢记此密码，一旦密码丢失则当前备份的数据将无法恢复到系统中。
NFS|NFS名称|默认为备份NF下所有的NFS配置数据。可以手动指定NFS名称进行单独备份。
SETID|备份对象|默认不输入。可以选择单独备份基本配置数据、IP协议栈配置数据、安全数据、日志数据、OAM数据库文件、NFS私有数据其中一个或者多个。
 说明： 
可在网管操作记录页面中，查看到上报备份进度，100%表示备份完成。
#### 自动备份NF数据 


摘要 :系统安装完成，运行正常后，系统自动创建NF数据自动备份策略，在配置数据损坏丢失情况下以便快速恢复。 


步骤 :

在EM网管客户端的配置界面，选择PCF名称→NF节点
，使用[SHOW AUTO STRATEGY]命令查询自动备份策略。


在执行结果中，确认存在“BASICCM”和“IPSTACK”的备份任务。 




#### 查询系统对象集合 


摘要 :系统对象集合是指一系列可备份的对象集合，备份数据时可通过此命令查询需要备份的数据编号。 


步骤 :

在EM网管客户端的配置页面，选择PCF名称→PCF节点
。


执行[SHOW SYS SET]命令，输入系统对象集合编号进行查询，若不输入参数则查询所有系统对象集合。


单击执行按钮，执行命令。命令执行结果如[图1]所示。
图1  查询系统对象集合示例








### 恢复NF数据 
摘要 :将磁盘中备份的数据恢复到网管服务器中。 
 说明： 
建议在非话务高峰时进行操作。 
步骤 :恢复数据
在EM网管客户端的配置页面，选择PCF名称→PCF节点
。
执行[RESTORE]命令，输入需要恢复的备份文件对应的备份文件名及备份路径、SFTP用户名及密码、恢复NF的配置数据库，参数说明参见[表1]。
标识|参数名称|参数说明
---|---|---
ID|恢复任务编号|默认值：1。保持默认值即可。
NAME|恢复任务名称|保持默认值即可。
FILENAME|恢复文件路径|恢复OMU上的备份文件。输入sftp://主用OMU IP地址：29029/Oamdata/NF节点号/oam/brm/备份文件名称。恢复第三方服务器上的备份数据。输入sftp://IP:端口/路径/备份文件名称。
USERNAME|SFTP用户名|输入SFTP服务器的用户名。
PASSWORD|SFTP用户密码|输入SFTP服务器的用户密码。
BAKFILEPWD|恢复文件密码|此参数只对欧盟局点有效，其他局点勿填。对于欧盟局点：如果待恢复的备份文件是手工备份产生的，请使用手工备份时输入的密码。如果待恢复的备份文件是自动备份产生的，请向管理员咨询SET GDPRPWD设置的密码，并使用该密码进行数据恢复。
ISREINST|是否重新实例化环境|重新实例化局恢复数据需要选择“是”。其他场景选择“否”。
 说明： 
可在网管操作记录页面中，查看备份进度，100%表示恢复完成。
同步数据
选择PCF名称→PCF节点
，执行[SYNA]:STYPE="ALL"命令，同步全部数据。
执行[SYN ONLINE]:STYPE="ALL"命令，进行在线一致性同步。
重启容器
选择PCF名称→PCF节点
，执行[SHOW VRU]命令，查询vru-tmsp-rosng容器名称，查询结果如[图1]所示。
图1  查询vru-tmsp-rosng容器名称

执行[RESET VRU]命令，重启vru-tmsp-rosng-0容器与vru-tmsp-rosng-1容器。 
## 缩略语 
## 缩略语 
EM :Element Management网元管理
### I/O 
Input/Output输入/输出
MANO :Management and Orchestration管理和编排
NF :Network Function网络功能
NFS :Network Function Service网络功能服务
NFVO :Network Functions Virtualization Orchestrator网络功能虚拟化编排器
OAM :Operation, Administration and Maintenance操作管理维护
OMU :Operation & Management Unit操作管理单元
SFTP :Secure File Transfer Protocol安全文件传输协议
VNFM :Virtualized Network Function Manager虚拟化网络功能管理器
## 例行维护 
### 例行维护的分类 
描述 :为了充分发挥设备的性能和作用，减少各种意外事故的发生，需要对运行中的设备进行例行维护。例行维护是一种预防性的维护，能及时发现并消除设备所存在的缺陷或隐患，通过对设备进行定期的检查与保养，确保设备能够长期安全、稳定、可靠地运行。 
#### 分类 
例行维护分为以下两种： 
日常维护 
定期维护 
#### 日常维护 
日常维护是指每天进行的、维护过程相对简单、并可由一般维护人员实施的维护操作。 
日常维护的目的包括： 
及时发现ZXUN RCP系统所发出的告警或已存在的缺陷，并采取适当的措施予以恢复和处理，维持设备的健康水平，降低故障率。 
及时发现业务运行过程中各连接状态的异常现象，并采取适当的措施以恢复和处理，确保业务运行正常。 
实时掌握ZXUN RCP系统和网络的运行状况，了解ZXUN RCP系统或网络的运行趋势，提高维护人员对突发事件的处理效率。 
#### 定期维护 
定期维护是指按一定周期（如：每周、每月、每年）进行的、维护过程相对复杂、且多数情况下须由经过专门培训的维护人员实施的维护操作。 
定期维护的目的包括： 
通过定期维护，使ZXUN RCP系统的健康水平长期处于良好状态，确保系统能够安全、稳定、可靠运行。 
通过定期检查、备份、测试等手段，及时发现设备在运行过程中所出现的功能失效、性能下降等缺陷，并采取适当的措施及时予以处理，以消除隐患、预防事故的发生。 
### 例行维护注意事项 
建立完善的维护制度，对维护人员的日常工作进行规范。应有详细的值班日志，对系统的日常运行情况、版本情况、数据变更情况、升级情况、问题处理情况等做好详细的记录，便于出现问题后进行分析和处理。应有交接班记录，做到责任分明。 
维护人员在上岗前必须接受必要的维护培训，学习必要的维护知识和相关的网络知识，掌握基本操作技能和应急处理技能。维护操作时要按照相关手册的说明来进行，以确保人身安全与系统安全。维护人员应该有严谨的工作态度和较高的维护水平，并通过不断学习提高维护技能。 
所有的重大操作（如重启系统、加载软件等）均应作记录，并在操作前仔细确认操作的可行性，在做好相应的备份、应急和安全措施后，方可由有资质的操作人员执行。 
改动数据前要做数据备份，修改数据后应在一定的时间内（一般为一周）确认系统运行正常，才能删除备份数据。 
网管口令应该按级设置、严格管理、定期更改，并只向维护人员发放。 
严禁在计算机终端上玩游戏、上网等，禁止在计算机终端中安装、运行、拷贝其他任何与系统无关的软件。 
维护过程中可能用到的软件和资料应在指定位置就近存放，在需要使用时能及时获得。 
维护人员应每天进行常规检查与测试，并做好记录。 
发现故障应及时处理，疑难问题应先详细记录各种原始信息，并及时联系中兴通讯技术支持。 
将中兴通讯当地办事处的联络方法放在醒目的地方并周知所有维护人员，以便在需要支持时能及时联络。注意时常更新最新的联络方法。 
### 对维护人员的基本要求 
#### 理论知识 
熟悉移动通信原理专业知识。 
熟悉Diameter、HTTP2/JSON、SMPP、SMTP等相关信令协议。 
熟悉3GPP、IETF RFC等相关技术规范。 
了解以太网、TCP/IP、B/S、WEB应用、数据库等计算机知识。 
熟悉ZXUN RCP产品的功能结构、业务流程等产品知识。 
#### 系统组网和运行环境 
熟悉ZXUN RCP的组网方式和IP规划。 
熟悉ZXUN RCP各业务功能的实现原理。 
熟悉ZXUN RCP的业务配置。 
熟悉ZXUN RCP与网络上其它设备之间的连接关系。 
熟悉ZXUN RCP与网络上其它设备之间所使用的协议。 
#### 设备操作要求 
熟练掌握ZXUN RCP产品的日常操作。 
熟悉哪些操作将导致部分或全部业务中断。 
熟悉哪些操作将造成设备损坏。 
熟悉哪些操作将导致用户投诉。 
熟悉有哪些应急或备份的措施。 
#### 仪器仪表使用要求 
ZXUN RCP产品的维护人员应熟练使用万用表和信令分析仪来定位故障。
### 例行维护常用工具 
EM网管系统中常用以下工具：
信令跟踪 
告警管理 
性能管理 
日志管理 
### 日例行维护 
#### 检查当前告警 
维护目的 :在日例行维护中，需要实时检查当前告警信息，并及时排查告警原因。 
通过EM客户端对ZXUN RCP告警进行检查。
需要特别关注告警级别为严重和主要的告警。
维护指导 :在EM客户端中，选择菜单告警，打开告警窗口。查看所有节点的当前告警，如[图1]所示。
图1  告警监控页面

在告警监控页面中，查看当前告警信息。
参考标准 :系统应无异常告警。 
异常处理 :发现系统有任何告警都应及时分析并尽快解决。 
在EM上发现系统有告警产生时，可以查看告警信息，按照告警处理建议及时处理该告警。如果仍无法消除告警，及时联系中兴通讯技术支持
。
#### 检查CPU使用率 
维护目的 :查看ZXUN RCP系统的CPU使用率是否满足要求。
维护指导 :在EM客户端的性能页面，选择性能任务→测量任务
，出现测量任务页面，如[图1]所示。
图1  测量任务

单击+新建按钮，出现新建页面，如[图2]所示。
图2  新建测量任务

输入名称，选择网元类型、测量对象类型和测量族。
测量任务页面的参数说明参见[表1]。
参数名称|参数说明
---|---
网元类型|测量任务归属的网元类型。选择RCP。
测量对象类型|网元类型支持的管理对象类型。单击下拉列表框，选择虚拟机vCPU核测量。
测量族|测量对象类型支持的测量类型，选中复选框虚拟机vCPU核测量。
单击下一步按钮，切换到选择对象页面，如[图3]所示。
图3  选择对象

设置对象范围，其余参数保持默认值。
单击下一步按钮，切换到选择时间页面，如[图4]所示。
图4  选择时间

设置测量任务的时间。 
时间参数说明参见[表2]。
参数名称|参数说明
---|---
粒度|在粒度下拉菜单中选择查询粒度。如选择15分钟，表示以15分钟为单位显示查询结果。
时间范围|在时间范围中选择查询时间。设置开始时间和结束时间。
有效时段和日期|选中选择有效时段或输入有效时段。选中选择有效时段，可以勾选时间段，选项包括：00:00~12:00或12:00~24:00。可多选。选中选择有效时段，可以单击选择时间段中的某几个小时。查询的有效日期，包括：按月和按周。选中按月：下面列出一个月的所有待选天，可全选，可选择某些天。选中按周：下面列出一周的所有天，从星期一~星期日，可全选，可单击选择某些天。
单击新建按钮，完成测量任务的新建。新建的测量任务出现在测量任务页面中，如[图5]所示。
图5  测量任务查询

在新建的测量任务所在行中，单击操作列的历史查询按钮，出现历史查询页面，如[图6]所示。
图6  历史查询

按照时间粒度，可以查看所有时段各vCPU使用率情况。 
参考标准 :IPU虚机的1~7号vCPU及GSU（GW）虚机的2、6、7号vCPU的使用率平均值为100%（由于软件设计原因导致）。 
其它vCPU使用率平均值小于60%。 
异常处理 :如果用户容量已经超过设计要求，且vCPU使用率的数据长期处在高位，表明系统负荷较大，需要扩容。 
如果用户容量还没有达到设计要求，但是vCPU使用率的数值经常处在高位，及时联系中兴通讯技术支持。 
#### 检查内存/磁盘空间使用率 
维护目的 :查看ZXUN RCP系统的内存、磁盘使用率是否满足要求。
当磁盘剩余空间不足时，设备的运行速度会变慢，严重时会引起设备故障。因此需要定期查看磁盘剩余空间，在磁盘剩余空间不足时及时进行处理，避免引起设备故障。 
维护指导 :在EM客户端的性能页面，选择性能任务→测量任务
，出现测量任务页面，如[图1]所示。
图1  测量任务

单击+新建按钮，出现新建页面，如[图2]所示。
图2  新建测量任务

输入名称，选择网元类型、测量对象类型和测量族。
测量任务页面的参数说明参见[表1]。
参数名称|参数说明
---|---
网元类型|测量任务归属的网元类型。选择RCP。
测量对象类型|网元类型支持的管理对象类型。单击下拉列表框，选择虚拟机基本测量。
测量族|测量对象类型支持的测量类型，选中复选框虚拟机基本测量。
单击下一步按钮，切换到选择对象页面，如[图3]所示。
图3  选择对象

设置对象范围，其余参数保持默认值。
单击下一步按钮，切换到选择时间页面，如[图4]所示。
图4  选择时间

设置测量任务的时间。 
时间参数说明参见[表2]。
参数名称|参数说明
---|---
粒度|在粒度下拉菜单中选择查询粒度。如选择15分钟，表示以15分钟为单位显示查询结果。
时间范围|在时间范围中选择查询时间。设置开始时间和结束时间。
有效时段和日期|选中选择有效时段或输入有效时段。选中选择有效时段，可以勾选时间段，选项包括：00:00~12:00或12:00~24:00。可多选。选中选择有效时段，可以单击选择时间段中的某几个小时。查询的有效日期，包括：按月和按周。选中按月：下面列出一个月的所有待选天，可全选，可选择某些天。选中按周：下面列出一周的所有天，从星期一~星期日，可全选，可单击选择某些天。
单击新建按钮，完成测量任务的新建。新建的测量任务出现在测量任务页面中，如[图5]所示。
图5  测量任务查询

在新建的测量任务所在行中，单击查询按钮，出现历史查询页面，如[图6]所示。
图6  历史查询

按照时间粒度，可以查看所有时段各虚机的内存和磁盘使用情况。 
参考标准 :所有虚拟机的内存使用率小于90%。 
所有虚拟机的磁盘空间使用率小于75%。 
异常处理 :内存使用率异常处理： 
如果用户容量已经超过设计要求，且内存使用率的数据长期处在高位，表明系统负荷较大，需要扩容。 
如果用户容量还没有达到设计要求，但是内存使用率的数值经常处在高位，及时联系中兴通讯技术支持。 
磁盘空间使用率异常处理： 
清理磁盘上的垃圾文件。 
清除旧的备份文件，仅保留最近一天的备份文件。 
 说明： 
清除备份文件前需确保这些备份文件已备份到其他磁盘上。 
如果磁盘空间使用率仍然较高，及时联系中兴通讯技术支持
。
#### 检查日志信息 
维护目的 :日志按照内容分为： 
操作日志记录用户操作信息。 
安全日志记录用户登录、注销的日志信息。 
系统日志记录服务器定时任务的完成情况。 
检查操作日志、安全日志和系统日志，可掌握系统的运行情况。 
维护指导 :在EM客户端中，选择菜单系统→日志→日志查询
，打开日志查询页面，如[图1]所示。
图1  日志查询页面

在日志查询页面即可查看所有日志信息。
参考标准 :不会有不断出现的、大量的报错日志。 
没有非法或未经授权的操作，如随意修改FTP密码、随意缩小用户的权限等操作。 
没有修改数据的异常日志。 
异常处理 :如果有异常的日志，须查明是何人操作、为何操作，非法操作可能会导致不可预料的结果。 
根据日志的详细信息，处理故障。 
如果还未解决，及时联系中兴通讯技术支持
。
#### 检查NTP服务 
维护目的 :检查NFVO系统和EM系统的NTP服务，保证时间准确。
维护指导 :检查NFVO的NTP服务。以root用户登录NFVO虚机的操作系统。执行ntpq -p命令，查询NTP服务。示例如下，当时钟源服务器IP（示例中为10.75.83.85）之前出现“*”号，则说明本地NTP服务器与该服务器同步。[root@uep3xtest ~]# ntpq -p
     remote            refid        st        t      when     poll    reach     delay     offset      jitter
==============================================================================================================
 *10.75.83.85          LOCL         5         1         1       64        1     0.000      0.000      0.004 
检查EM的NTP服务。 说明：该项用于检查EM虚机的NTP服务设置。以root用户登录EM虚机的操作系统。执行ntpq -p命令，查询NTP服务。示例如下，当时钟源服务器IP（示例中为10.75.83.85）之前出现“*”号，则说明本地NTP服务器与该服务器同步。[root@uep3xtest ~]# ntpq -p
     remote            refid        st        t      when     poll    reach     delay     offset      jitter
==============================================================================================================
 *10.75.83.85          LOCL         5         1         1       64        1     0.000      0.000      0.004 
检查单个NF的NTP服务。 说明：该项用于检查EM虚机上某个NF的NTP服务设置。在EM网管配置页面，选择PCF名称→NF节点→CommonS_TMSP_0节点。执行SHOW NTPSTATE和SHOW
NTP SYNSTATE命令，查询NTP状态和NTP同步状态。 
参考标准 :时钟源服务器IP（示例中为10.75.83.85）之前出现“*”号。 
NTP状态为“ACTIVE”，NTP同步状态为“可达”。 
异常处理 :当NTP服务出现异常时，可执行以下操作对NTP服务信息进行设置。
修改EM虚机的NTP设置。 说明：当EM上所有NF的NTP服务异常时，使用该方法。以root用户登录EM虚机的操作系统。备份/etc/ntp.conf文件。编辑ntp.conf文件。执行如下命令设置NTP服务器地址（IP地址请根据现场规划修改）。[root@uep3xtest ~]# echo "server 10.43.40.125 iburst" >> /etc/ntp.conf执行如下命令重启NTP服务。[root@uep3xtest ~]# systemctl restart ntpd.service执行ntpq -p命令，查询同步结果。[root@uep3xtest ~]# ntpq -p
     remote          refid          st        t      when     poll    reach     delay     offset      jitter
==============================================================================================================
 *10.43.40.125          LOCL         5         1         1       64        1     0.000      0.000      0.004如果问题依然存在，联系中兴通讯技术支持。 
修改单个NF的NTP设置。 说明：当EM上某个NF的NTP服务异常时，使用该方法。在EM网管配置页面，选择PCF名称→NF节点→CommonS_TMSP_0节点。执行SET NTP命令，修改NTP配置。其中是否启用选择“是”、主服务器IP设置为NTP服务器的IP地址。如果问题依然存在，联系中兴通讯技术支持。 
#### 检查HTTP链路 
维护目的 :检查HTTP链路状态。
维护指导 :在EM客户端的配置页面，选择PCF名称→NF节点→CommonS_HTTP_LB_0
，在命令输入框内执行[SHOW LINK INFO]命令，查询链路信息，如[图1]所示。
图1  SHOW LINK INFO命令执行结果

参考标准 :命令执行结果中TCP链路状态和HTTP2连接状态均为已激活，表示链路状态正常。
异常处理 :在EM客户端的配置页面，选择PCF名称→NF节点→CommonS_TMSP_0
，执行[SHOW VM]命令，查看是否有虚机异常。
检查网络状态，检查本局和对端网元之间通道是否能互通。 
在EM客户端的配置页面，选择PCF名称→NF节点→CommonS_TMSP_0
，在Rosng配置管理节点中检查协议栈配置，是否有接口、路由配置遗漏。
在EM客户端的配置页面，选择PCF名称→NF节点→CommonS_HTTP_LB_0
，执行[SHOW CLIENTPROFILE]命令检查HTTP客户端配置是否正确，执行[SHOW SERVERPROFILE]命令检查HTTP服务端配置是否正确。
如果进行上述步骤的处理后，依然未能解决问题，联系中兴通讯技术支持
。
### 周例行维护 
#### 检查历史告警 
维护目的 :通过EM客户端查看历史告警，及时排查未解决的历史告警。
维护指导 :在EM客户端中，选择菜单告警→历史告警→告警查询
，打开告警查询页面，如[图1]所示。
图1  历史告警查询

告警查询页面可查询历史告警信息。
参考标准 :显示的历史告警都已处理。 
异常处理 :发现有未处理的历史告警，应及时分析并尽快解决。 
在EM上发现有未处理的历史告警时，单击告警记录列表中的更多→详情
按钮，按照告警处理建议处理。如果仍无法消除告警，及时联系中兴通讯技术支持
。
#### 检查系统自动备份 
维护目的 :检查EM的自动备份是否正常。
维护指导 :在EM客户端，选择菜单系统→数据备份恢复→备份恢复日志
，如[图1]所示。
图1  备份恢复日志

针对结果为失败的任务，单击详情按钮，单击按钮，查看任务执行的具体信息，如[图2]所示。
图2  任务详情

参考标准 :日志中没有异常信息。 
异常处理 :检查磁盘空间是否充足。 
检查网络连接是否正常。 
如果还未解决，及时联系中兴通讯技术支持
。
#### 检查防病毒软件 
维护目的 :EM客户端一般采用Windows操作系统，要求必须安装防病毒软件，定期更新病毒库，并定期进行人工扫描病毒，以防止因病毒侵入而导致系统故障。
维护指导 :检查防病毒软件的实时监控，查看病毒库日期是否是最新日期。 
是→步骤3 
否→步骤2 
更新病毒库，确保病毒库是最新日期。 
在防病毒软件中对全盘进行扫描杀毒。 
参考标准 :防病毒软件启动了自动更新。 
防病毒软件在全盘扫描后，没有发现病毒。 
异常处理 :如果不能在线升级，需要手动下载最新的病毒库文件进行升级。 
如果发现病毒，使用防病毒软件进行杀毒处理。 
如果有系统文件被病毒感染而又不能修复，需要从其它客户端中拷贝一个相同的文件进行替换。如果严重，则考虑重装系统。 
#### 检查虚拟机实例运行状态 
维护目的 :在NFVO客户端上查看VNF和VNFM实例的虚拟机运行信息，通过这些信息判断虚拟机在虚拟化平台上运行是否正常。
维护指导 :登录NFVO客户端。
检查VNFM实例运行状态。 
选择菜单系统→NFVO→接入管理
，打开接入管理页面。
在左侧导航树中，选择VNFM，右侧出现VNFM实例状态，示例如[图1]所示。
图1  VNFM实例状态示例

单击VNFM名称，查看VNFM和各VNF的资源使用情况。 
检查VNF实例状态。 
选择菜单编排→应用→VNF
，页面出现VNF实例状态，如[图2]所示。
图2  VNF实例状态示例

单击VNF名称，查看VNF详细信息。 
选择虚机管理页面，查看虚机状态，示例如[图3]所示。
图3  虚机状态示例

参考标准 :VNFM实例的状态为“正常”。 
VNFM实例详情中，CPU占用率、Memory占用率无长时间使用率很高的情况，Storage占用率不超过90%。 
各VNF性能信息中，CPU占用率、MEM占用率无长时间使用率很高的情况，DISK占用率不超过90%。 
VNF实例的状态为“Active”。 
VNF各虚机状态为“ACTIVE”。 
异常处理 :检查网络连接情况，确保网络连接正常。 
如果无法解决，联系中兴通讯技术支持
。
### 月例行维护 
#### 检查软件版本 
维护目的 :定期检查系统软件的版本情况，确保系统运行在正确的软件版本上。 
维护指导 :在EM网管配置页面，选择PCF名称→NF节点→CommonS_TMSP_0
节点。
执行[SHOW VERSION DETAIL]命令，查看系统当前的基础包、补丁包版本信息。
参考标准 :基础包版本、补丁包版本和预期版本或者现场规划版本一致。 
异常处理 :如果发现异常，需要对基础包版本或补丁包版本进行升级，请及时联系中兴通讯技术支持
。
#### 手工备份配置数据 
维护目的 :定期备份网元的业务配置数据，以便在出现异常或者故障时能够及时恢复数据。 
维护指导 :在EM客户端中，单击菜单配置，展开网元树，选择网元。
在命令输入框内输入[BACKUP]，显示命令参数页面。设置备份相关的参数。
命令示例： 
[BACKUP]:ID=1,NAME="default",FILEPATH="sftp://10.43.197.61:22/root/pcf41",USERNAME="root",PASSWORD="**********",FILENAME="PCF_bakup_all"
 说明： 
备份配置数据的操作步骤及参数说明参见“备份与恢复
”。
单击执行按钮，在操作记录页面中可以看见进度。待备份操作完成后，执行结果显示“成功”。
登录到备份的FTP服务器上下载备份文件，将备份数据在本地做备份。 
参考标准 :已根据定时备份间隔（例如一个月，时间可以修改）完成手工备份。 
异常处理 :检查备份目的服务器的硬盘空间是否充足（剩余空间>总硬盘的10%）。删除备份目的服务器的垃圾文件，确保硬盘空间充足。 
检查网络连接情况，确保网络连接正常。 
如果无法解决，及时联系中兴通讯技术支持
。
#### 检查远程控制工具 
维护目的 :检查远程控制工具（例如vncviewer软件）的使用情况，保证中兴通讯技术支持工程师在远程能及时查看设备的运行情况，提供远程技术支持。 
维护指导 :在安装vncviewer软件的客户端上，双击vncviewer软件，弹出如[图1]所示对话框。
图1  连接对话框

在VNC server中输入需要远程控制服务器的IP地址。
根据不同情况，选择执行如下操作。 
如果...|那么...
---|---
在CGSL操作系统的远程桌面首选项窗口中设置了密码|根据提示输入密码并单击OK按钮，登录远程桌面。
在CGSL操作系统的远程桌面首选项窗口中没有设置密码|单击OK按钮，登录远程桌面。
 说明： 
远程桌面首选项窗口的登录方法参见“[开启远程桌面控制权限]”。
参考标准 :能正常远程控制CGSL操作系统。
异常处理 :如果不能远程控制CGSL操作系统，需要在CGSL操作系统中开启远程桌面控制权限，步骤如下。
使用root用户登录CGSL操作系统。
选择菜单系统→首选项→远程桌面
，打开远程桌面首选项对话框，如[图2]所示。
图2  远程桌面首选项

勾选允许其他人查看您的桌面和允许其他用户控制您的桌面。
（可选）勾选请求用户输入此密码并输入密码，此密码作为vncviewer登录时的密码。
单击关闭按钮，关闭对话框。
### 年例行维护 
#### 测试SC倒换 
维护目的 :部分SC配置为1+1主备，验证任何一个主用SC重启，备用SC能正常接管业务。
 说明： 
PCF名称→NF节点
下的各子节点均支持重启SC的操作。下文以CommonS_TMSP_0节点为例，介绍SC的倒换操作。
维护指导 :在EM客户端的配置页面，选择PCF名称→NF节点→CommonS_TMSP_0
，执行[SHOW SCTYPE]命令，查看配置为1+1主备的SC类型，命令执行结果示例如[图1]所示。
图1  SHOW SCTYPE命令执行结果示例

执行[SHOW SCINFO]命令，查看SC类型对应的逻辑编号，命令执行结果示例如[图2]所示。
图2  SHOW SCINFO命令执行结果示例

执行[RESET SC]命令，复位主用SC。
参考标准 :复位主用SC，备用SC能正常接管业务。 
异常处理 :如果发现异常，及时联系中兴通讯技术支持
。
### 附录：常用维护表格 
#### 日维护记录表 
局名：|日期（年/月/日）：
---|---
值班时间：|交班人：|接班人：
---|---|---
检查当前告警□ 正常 □ 不正常异常现象：|检查当前告警□ 正常 □ 不正常异常现象：|检查当前告警□ 正常 □ 不正常异常现象：
检查CPU使用率□ 正常 □ 不正常异常现象：|检查CPU使用率□ 正常 □ 不正常异常现象：|检查CPU使用率□ 正常 □ 不正常异常现象：
检查内存/磁盘空间使用率□ 正常 □ 不正常异常现象：|检查内存/磁盘空间使用率□ 正常 □ 不正常异常现象：|检查内存/磁盘空间使用率□ 正常 □ 不正常异常现象：
检查日志信息□ 正常 □ 不正常异常现象：|检查日志信息□ 正常 □ 不正常异常现象：|检查日志信息□ 正常 □ 不正常异常现象：
检查NTP服务□ 正常 □ 不正常异常现象：|检查NTP服务□ 正常 □ 不正常异常现象：|检查NTP服务□ 正常 □ 不正常异常现象：
检查HTTP链路□ 正常 □ 不正常异常现象：|检查HTTP链路□ 正常 □ 不正常异常现象：|检查HTTP链路□ 正常 □ 不正常异常现象：
其它检查项目（一）维护结果：|其它检查项目（一）维护结果：|其它检查项目（一）维护结果：
其它检查项目（二）维护结果：|其它检查项目（二）维护结果：|其它检查项目（二）维护结果：
值班备忘：|故障情况及其处理：|故障情况及其处理：
遗留问题：|遗留问题：|遗留问题：
班长核查：|班长核查：|班长核查：
#### 周维护记录表 
局名：|日期（年/月/日）：
---|---
值班时间：|交班人：|接班人：
---|---|---
检查历史告警□  正常          □  不正常异常现象：|检查历史告警□  正常          □  不正常异常现象：|检查历史告警□  正常          □  不正常异常现象：
检查系统自动备份□  正常          □  不正常异常现象：|检查系统自动备份□  正常          □  不正常异常现象：|检查系统自动备份□  正常          □  不正常异常现象：
检查防病毒软件□  正常          □  不正常异常现象：|检查防病毒软件□  正常          □  不正常异常现象：|检查防病毒软件□  正常          □  不正常异常现象：
检查虚拟机实例运行状态□ 正常 □ 不正常异常现象：|检查虚拟机实例运行状态□ 正常 □ 不正常异常现象：|检查虚拟机实例运行状态□ 正常 □ 不正常异常现象：
其它检查项目（一）：维护结果：|其它检查项目（一）：维护结果：|其它检查项目（一）：维护结果：
其它检查项目（二）：维护结果：|其它检查项目（二）：维护结果：|其它检查项目（二）：维护结果：
值班备忘：|故障情况及其处理：|故障情况及其处理：
遗留问题：|遗留问题：|遗留问题：
班长核查：|班长核查：|班长核查：
#### 月维护记录表 
局名：|日期（年/月/日）：
---|---
值班时间：|交班人：|接班人：
---|---|---
检查软件版本□ 正常 □ 不正常异常现象：|检查软件版本□ 正常 □ 不正常异常现象：|检查软件版本□ 正常 □ 不正常异常现象：
手工备份配置数据□  正常          □  不正常异常现象：|手工备份配置数据□  正常          □  不正常异常现象：|手工备份配置数据□  正常          □  不正常异常现象：
检查远程控制工具□ 正常 □ 不正常异常现象：|检查远程控制工具□ 正常 □ 不正常异常现象：|检查远程控制工具□ 正常 □ 不正常异常现象：
其它检查项目（一）维护结果：|其它检查项目（一）维护结果：|其它检查项目（一）维护结果：
其它检查项目（二）维护结果：|其它检查项目（二）维护结果：|其它检查项目（二）维护结果：
值班备忘：|故障情况及其处理：|故障情况及其处理：
遗留问题：|遗留问题：|遗留问题：
班长核查：|班长核查：|班长核查：
#### 年维护记录表 
局名：|日期（年/月/日）：
---|---
值班时间：|交班人：|接班人：
---|---|---
测试SC倒换□  完成          □  未维护异常现象：|测试SC倒换□  完成          □  未维护异常现象：|测试SC倒换□  完成          □  未维护异常现象：
其它检查项目（一）维护结果：|其它检查项目（一）维护结果：|其它检查项目（一）维护结果：
其它检查项目（二）维护结果：|其它检查项目（二）维护结果：|其它检查项目（二）维护结果：
值班备忘：|故障情况及其处理：|故障情况及其处理：
遗留问题：|遗留问题：|遗留问题：
班长核查：|班长核查：|班长核查：
### 危险操作一览表 
操作大类|操作小类|误操作可能引起的后果
---|---|---
网管类操作|严禁在忙时进行数据还原和整表同步|执行该命令后之后导入的数据将会覆盖网元当前数据，可能导致业务失败。
在忙时慎重使用信令跟踪操作|网管类操作|执行该操作会导致网管和设备之间链路拥塞以及网管服务器内存占用过高。网管服务器内存占用过高会导致网管服务器无法正常运行。
## 缩略语 
## 缩略语 
3GPP :3rd Generation Partnership Project第三代合作伙伴计划
### B/S 
Browser/Server浏览器和服务器结构
### CGSL 
Carrier Grade Server Linux电信级服务器Linux
### CPU 
Central Processing Unit中央处理器
EM :Element Management网元管理
FTP :File Transfer Protocol文件传输协议
HTTP :Hypertext Transfer Protocol超文本传输协议
### IE 
Internet Explorer因特网浏览器
### IETF 
Internet Engineering Task Force因特网工程任务组
IP :Internet Protocol因特网协议
### JSON 
Java Script Object NotationJava脚本对象标记
NF :Network Function网络功能
### RFC 
Request For Comments请求注解
SC :Service Component服务组件
### SMPP 
Short Message Peer to Peer Protocol短消息点对点协议
### SMTP 
Simple Mail Transfer Protocol简单邮件传输协议
TCP :Transmission Control Protocol传输控制协议
### WEB 
Web环球网
## 常用操作 
### 登录EM系统 
摘要 :本节介绍登录EM客户端的操作。登录后，在客户端窗口中可以进行相关管理和维护操作。
系统支持通过如下浏览器登录： 
Chrome 60及以后版本 
FireFox 60及以后版本 
步骤 :在浏览器地址栏输入https://服务端IP:28808/em-portal
。
地址填写说明参见[表1]。
项目|说明
---|---
服务端IP|EM客户端通过此地址可以使用浏览器访问EM服务器，如10.43.36.143。
按Enter键，页面自动转到登录页面，如[图1]所示。
图1  登录页面

输入用户名和密码（EM客户端默认用户名为admin，默认密码为Zenap_123），单击登录按钮，打开EM页面。
### 查询版本号 
摘要 :本节介绍如何查询ZXUN RCP的版本号。
步骤 :在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0
。
执行[SHOW VERSION]命令，查询RCP的运行版本。
执行结果如[图1]所示。
图1  SHOW VERSION结果示例

版本号下的输出信息即为当前的运行版本。
### 查询设备形态 
摘要 :ZXUN RCP业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（IaaS形态），也可以运行在POD资源模型（CaaS形态），业务功能逻辑呈现一致，底层的部署方式不同。不同的设备形态，底层资源的部分操作的方式可能不同。
本节介绍查询ZXUN RCP形态的操作。运维人员在后续的设备操作过程中可根据设备的形态执行正确的操作。
步骤 :在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0
。
执行[QUERY EQUIPFORM]命令查询ZXUN RCP的形态。
执行结果示例如[图1]所示。
图1  设备形态查询结果示例

### 查询SC所在虚机 
摘要 :产品维护过程中，可能需要登录SC所在虚机进行操作。本节以Npcf_SMPolicyControl_0服务中的sc-pcf-pcm-mp为例，介绍查询SC所在虚机过程。登录虚机的操作参见“[登录OMU虚机]”和“[登录PP虚机]”
步骤 :在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0
。
执行[SHOW SCTYPE]:NFSNAME="Npcf_SMPolicyControl_0"命令，查询SC的类型。
查询结果如[图1]所示。本例中，Npcf_SMPolicyControl_0对应的SC类型名称为sc-pcf-pcm-mp。
图1  查询SC类型

执行[SHOW SCINFO]命令（NFS实例名称、SC类型名称设置为步骤2中对应的名称），查询SC对应的SC实例名称（VRU名称）。
查询结果如[图2]所示。本例中，sc-pcf-pcm-mp对应的SC实例名称为vru-npcf-smpolicycontrol-mp-0。
图2  查询VRU名称 

执行[SHOW VRU]命令（设置VRU名称为步骤3中查询到的SC实例名称），查询VRU所在虚机。
查询结果如[图3]所示。本例中，vru-npcf-smpolicycontrol-mp-0所在虚机名称为OMU0001。
图3  查询VRU所在虚机

### 重启SC 
摘要 :本节介绍重启SC的操作。
步骤 :在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0
。
执行[SHOW SCTYPE]命令，查询NFS实例名称和SC类型。
执行结果如[图1]所示。
图1  SHOW SCTYPE结果示例

执行[SHOW SCINFO]命令，查询SC类型对应的组内编号。
执行结果如[图2]所示。
图2  SHOW SCINFO结果示例

执行[RESET SC]命令，重启所需的SC。
[RESET SC]命令的参数说明参见[表1]。
参数名称|参数解释|填写说明
---|---|---
NFSNAME|NFS实例名称|指定要重启的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|选择需重启的SC实例的类型，可执行SHOW SCTYPE命令查询。
SCGROUPNUM|SC组号|指定要重启的SC实例所属的SC组的组号，可以通过SHOW SCINFO命令进行查询。
SCINTRAGROUPNUM|SC组内编号|指定要重启的SC实例所属的SC组的组内编号，可以通过SHOW SCINFO命令进行查询。
### 登录OMU虚机 
摘要 :本节介绍OMU虚机的登录方法。 
步骤 :在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0
。
执行[SHOW OAM LINK]命令查询OMU管理IP，如[图1]所示。
图1  OMU管理IP

执行ssh命令，登录OMU虚机。登录用户名为admin，密码Admin_123。 
`ssh admin@OMU管理IP
Password:` 
切换到root用户，密码为ZTE_ossdbg1。 
 
退出OMU虚机。 
执行exit命令，退出root用户。执行exit命令，退出OMU虚机。
`[root@localhost admin] exit  //退出root用户
exit
[admin@localhost ~]$ exit    //退出登录
logout
Connection to 10.238.97.158 closed.` 
### 登录PP虚机 
摘要 :PP虚机包括除OMU虚机外的GSU、CDU虚机。 
IaaS组网下，PP虚机一般无法直接登录，需要在登录OMU虚机后，通过PP虚机管理面IP地址跳转到所在的PP虚机。 
本节介绍PP虚机的登录方法。 
步骤 :查询PP虚机的管理面地址。 
在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0
。
执行[SHOW VRU]命令，查询PP虚机名称。
 
执行[SHOW VM]命令，查询虚机信息。
 
根据查询结果，得到PP虚机管理面IP地址为193.168.116.5。 
登录OMU虚机。详细操作参见[登录OMU虚机]。
在OMU虚机上跳转登录PP虚机，操作如下。 
执行如下命令。登录用户名为admin，密码Admin_123。 
`ssh admin@PP虚机管理面IP地址
Password:` 
切换到root用户，密码为ZTE_ossdbg1。 
 
退出PP虚机（回到OMU虚机），操作如下。 
执行exit命令，退出root用户。
执行exit命令，退出PP虚机。
`[root@localhost admin] exit  //退出root用户
exit
[admin@localhost ~]$ exit    //退出登录
logout
Connection to 193.168.116.5 closed.` 
### 停止虚机 
摘要 :本节介绍如何在VNF实例中停止一个虚机。
网元升级或者硬件升级、修复操作可能导致网元虚机受影响，在进行相应操作前，应停止虚机。 
 小心！ 
在停止虚机前应在相应网元侧关掉虚机自愈功能。 
停止虚机将会导致业务不可用，请谨慎执行。 
步骤 :登录NFVO客户端，默认显示概况页面。
选择菜单编排→应用→VNF
，进入VNF页面。
在VNF列表中，单击一个VNF名称，默认显示虚机管理页面，如[图1]所示。
图1  虚机管理

选择需要停止的虚机，单击操作栏的停止按钮。系统弹出停止对话框，如[图2]所示。
图2  停止虚机确认对话框

选择停止虚机的方式，输入需要停止的虚机名称，勾选提示框，并单击停止按钮。
虚机的停止方式，分为： 
优雅：表示停止虚机操作，需要由OMP决策同意后，才能执行。 
强制：表示停止虚机操作，不需要OMP同意，直接执行停止操作。 
虚机列表下方显示停止虚机操作的进度，待提示虚机操作成功 
，该虚机的状态变为SHUTOFF。
### 启动虚机 
摘要 :本节介绍如何在VNF实例中启动一个虚机。
网元升级、硬件升级、修复操作前，需要停止虚机。网元升级、硬件升级、修复操作后，应及时启动虚机。 
步骤 :登录NFVO客户端，默认显示概况页面。
选择菜单编排→应用→VNF
，进入VNF页面。
在VNF列表中，单击一个VNF名称，默认显示虚机管理页面，如[1679305169837VFUTbe.html#启动虚机-87557DC8__VNF列表-77E84B05]所示。
图1  虚机管理

选择需要启动的虚机（其虚机状态应为SHUTOFF），单击操作栏的启动按钮。系统弹出启动对话框，如[图2]所示。
图2  启动虚机确认对话框

选择启动虚机的方式，并单击确定按钮。
虚机的启动方式，分为： 
优雅：表示启动虚机操作，需要由OMP决策同意后，才能执行。 
强制：表示启动虚机操作，不需要OMP同意，直接执行启动操作。 
虚机列表下方显示停止虚机操作的进度，待提示虚机操作成功 
，该虚机的状态变为ACTIVE。
### 重启虚机 
摘要 :本节介绍如何在VNF实例中重启一个虚机。
步骤 :登录NFVO客户端，默认显示概况页面。
选择菜单编排→应用→VNF
，进入VNF页面。
在VNF列表中，单击一个VNF名称，默认显示虚机管理页面，如[图1]所示。
图1  虚机管理

选择需要重启的虚机，单击操作栏的更多→重启
按钮。系统弹出重启对话框，如[图2]所示。
图2  重启虚机确认对话框

选择重启虚机的方式，输入需要重启的虚机名称，勾选提示框，并单击重启按钮。
虚机的重启方式，分为： 
优雅：表示重启虚机操作需要由OMP决策同意后，才能执行。 
强制：表示重启虚机操作不需要OMP同意，直接执行重启操作。 
## 缩略语 
## 缩略语 
### CaaS 
Container as a Service容器即服务
EM :Element Management网元管理
IP :Internet Protocol因特网协议
### IaaS 
Infrastructure as a Service基础设施即服务
NFVO :Network Functions Virtualization Orchestrator网络功能虚拟化编排器
### OMP 
Operation & maintenance Main Processor操作维护主处理板
OMU :Operation & Management Unit操作管理单元
SC :Service Component服务组件
VM :Virtual Machine虚拟机
VNF :Virtualized Network Function虚拟化网络功能
### VRU 
Virtual Running Unit虚拟运行单元
