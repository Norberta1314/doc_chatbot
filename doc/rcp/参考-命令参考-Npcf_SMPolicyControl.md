专业维护 :专业维护 :

[](None)背景知识 


为了方便对服务进行管理。需要一些专业维护功能。 




[](None)功能说明 


对外提供专业维护方面的命令。包括内部统计查询、服务注册管理、容灾管理、CHR日志管理等命令。 

运维人员可以通过这些维护命令对当前服务进行相应功能操作。 




[](None)子主题： 






## 内部统计 
## 内部统计 


[](None)背景知识 


为了方便对服务运行状态进行监控。需要能够提供对服务及各个组件的统计查询功能。 




[](None)功能说明 


对外提供服务及服务组件内部统计的查询命令。包括系统状态查询、虚机用户数查询、统计查询等命令。 

运维人员可以通过这些命令对当前服务及组件的运行状态进行查询和分析。 




[](None)子主题： 






### 查询系统状态(SHOW_SYS) 
### 查询系统状态(SHOW_SYS) 


[](None)功能说明 

该命令用于查询当前系统状态，查看活跃用户信息，如PCRF中Gx、Rx、Sp等接口业务信息，PCF中SMF、AMF、CHF等网络功能使用情况。 

当需要查询PCRF/PCF中各业务接口的在线用户数时，使用该命令。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|查询结果|参数可选性: 必选参数类型: 字符串参数范围: 0-30720|参数作用：该参数用于输出展示查询结果。输出结果为多行文本，说明当前系统状态，主要包括4G网络中Gx、Rx、Sp等接口业务信息，5G网络中SMF、AMF、CHF等网络功能使用情况。




[](None)命令举例 


`
查询系统状态。
SHOW_SYS: 

(No.1) : SHOW_SYS:
-----------------Npcf_SMPolicyControl_0----------------
查询结果
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------Total Statistics(1 SC):
    Active subscriber number is 0.(License: 1000; License User Capacity Rate: 0%)
    Gx&N7 Session number is 0.(License: 1000; License Session Capacity Rate: 0%)
    Gx&N7 Session number from Data APN access is 0.(License: 1000; License DATA Session Capacity Rate: 0%)
    Gx&N7 Session number from IMS  APN access is 0.(License: 1000; License IMS Session Capacity Rate: 0%)
    Active subscriber number(SP) is 0.
    Active subscriber number(N7N36) is 0.
    Active subscriber number(N15N36) is 0.
    Gx  session number is 0.
    Gxx session number is 0.
    Sd  session number is 0.
    N7  session number is 0.
    S9  session number is 0.
    Sy  session number is 0.
    N28 session number is 0.
    N5  session number is 0.
    Rx  session number is 0.
    Active subscriber group number is 0.
    Sy+ session number is 0.
    UE  session number is 0.
    N15 session number is 0.
    N7 session number from Data APN access is 0.
    N7 session number from IMS  APN access is 0.
    Gx session number from Data APN access is 0.
    Gx session number from IMS  APN access is 0.
    Rx session number from Data APN access is 0.
    Rx session number from IMS  APN access is 0.
    N5 session number from Data APN access is 0.
    N5 session number from IMS  APN access is 0.
    GDB Table Number Stat:
    R_SESSION is 0.
    R_IP is 0.
    R_USER is 0. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------记录数：1

` 


### 查询局CDB统计值(SHOW_CDB_STAT) 
### 查询局CDB统计值(SHOW_CDB_STAT) 


[](None)功能说明 

该命令用于查询归属本局及接管故障PCF的CDB统计值。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFID|局号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于表示PCF局向号：可以是本局，也可以是容灾局。后续的各种用户数指的就是该PCF局分布在当前查询局上的用户数。
DATA_USER|DATA用户数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“DATA用户数”的实际值。
DATA_ATTR|DATA用户局向数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“DATA用户局向数”的实际值。
IMS_SESS|IMS会话数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“IMS会话数”的实际值。
IMS_ATTR|IMS会话局向数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“IMS会话局向数”的实际值。
GX_SESS_TABLE|Gx-Sess表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“Gx-Sess表数”的实际值。
RX_SESS_TABLE|Rx-Sess表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“Rx-Sess表数”的实际值。
SY_SESS_TABLE|Sy-Sess表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“Sy-Sess表数”的实际值。
SD_SESS_TABLE|Sd-Sess表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“Sd-Sess表数”的实际值。
IP_TABLE|IP表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“IP表数”的实际值。
IMSI_TABLE|IMSI表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“IMSI表数”的实际值。
MAC_TABLE|MAC表数|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|该指标用于统计在每个测量周期内，CDB存储的“MAC表数”的实际值。




[](None)命令举例 


`
查询归属本局及接管故障PCF的CDB统计值。
举例：总共4个局（局号11\12\13\14），各1000个IMS会话，1000张gx_session表和1000张IP表。当13和14局发生故障后，11局和12局接管其相关会话，分发数据因会话更新，全部加载回接管局。其中，11局接管13局490个IMS会话，接管14局480个IMS会话。
查询归属本局的系统资源统计上报值：IMS会话：1000；IMS会话局向信息：1000；接管IMS会话：970；接管IMS会话局向信息：970；gx session表：1970；ip表：1970。

本局按局号统计，一条记录：
局号: 11；IMS会话：1000；IMS会话局向信息：1000； gx session表：1000；ip表：1000。
容灾按局号统计，两条记录：
局号: 13；IMS会话：490；IMS会话局向信息：490；gx session表：490；ip表：490。
局号: 14；IMS会话：480；IMS会话局向信息：480；gx session表：480；ip表：480。

SHOW_CDB_STAT:

SHOW_CDB_STAT:
-----------------Npcf_SMPolicyControl_0----------------
局号  DATA用户数  DATA用户局向数  IMS会话数  IMS会话局向数  Gx-Sess表数  Rx-Sess表数  Sy-Sess表数  Sd-Sess表数  IP表数  IMSI表数  MAC表数 
--------------------------------------------------------------------------------------------------------------------------------
11   0          0              1000      1000         1000        0            0           0           1000    0        0  
13   0          0              490       490          490         0            0           0           490     0        0
14   0          0              480       480          480         0            0           0           480     0        0
--------------------------------------------------------------------------------------------------------------------------------
记录数：3

` 


### 查询虚机用户数(SHOW_VM_USER) 
### 查询虚机用户数(SHOW_VM_USER) 


[](None)功能说明 

PCF性能测试，故障定位或者运维等场景时，可以使用该命令查询每个虚机上的用户数，判断用户是否在所有虚机上均衡分布。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VM_NAME|VM_Name|参数可选性: 必选参数类型: 字符串参数范围: 0-100|该参数用于表示查询到的PCF各个虚机的名称。虚机名称是部署PCF时根据运营商规范要求填写的。
USER_SP|SP_User_Num|参数可选性: 必选参数类型: 数字|该参数用于表示Sp签约用户数。PCRF收到PCEF发送的获取签约请求后，通过Sp接口向SPR获取签约信息。
USER_N7N36|N7N36_User_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的N7接口的UDR用户数。PCF收到SMF发送的SM策略请求后，通过N36接口向UDR请求获取策略签约信息。
USER_N15N36|N15N36_User_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的N15接口的UDR用户数。PCF收到AMF发送的AM策略或UE策略请求后，通过N36接口向UDR请求获取策略签约信息。
USER_N7|N7_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的N7会话数，包含N7数据域会话数和N7语音域会话数。N7接口用于SMF和PCF之间的消息交互。
USER_N7_DATA|N7_DATA_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的N7数据域会话数，即PCF与SMF通过数据APN建立的会话数量。
USER_N7_IMS|N7_IMS_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的N7语音域会话数，即PCF与SMF通过IMS APN建立的会话数量。
USER_N15|N15_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的N15会话数。N15接口用于AMF和PCF之间的消息交互。
USER_GX|Gx_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的Gx会话数，包含Gx数据域会话数和Gx语音域会话数。Gx接口用于PCEF和RCP之间的消息交互。
USER_GX_DATA|Gx_DATA_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的Gx数据域会话数，即PCEF和RCP通过数据APN建立的会话数量。
USER_GX_IMS|Gx_IMS_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的Gx语音域会话数，即PCEF和RCP通过IMS APN建立的会话数量。
USER_RX|Rx_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的Rx会话数，包含Rx数据域会话数和Rx语音域会话数。Rx接口用于AF和RCP之间的消息交互。
USER_RX_DATA|Rx_DATA_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的Rx数据域会话数，即AF和RCP通过数据APN建立的会话数量。
USER_RX_IMS|Rx_IMS_Session_Num|参数可选性: 必选参数类型: 数字|该参数用于表示查询到的Rx语音域会话数，即AF和RCP通过IMS APN建立的会话数量。




[](None)命令举例 


`
查询虚机用户数。
SHOW_VM_USER

(No.2) : SHOW_VM_USER:
-----------------PCF_227/Npcf_SMPolicyControl_0----------------
VM_Name                        SP_User_Num N7N36_User_Num N15N36_User_Num N7_Session_Num N7_DATA_Session_Num N7_IMS_Session_Num N15_Session_Num Gx_Session_Num Gx_DATA_Session_Num Gx_IMS_Session_Num Rx_Session_Num Rx_DATA_Session_Num Rx_IMS_Session_Num 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
NFV-R-227-VM-GSUCommonC2M80001 0           0              0               0              0                   0                  0               0              0                   0                  0              0                   0                  
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

` 


### 查询统计(SHOW_STAT_INFO) 
### 查询统计(SHOW_STAT_INFO) 


[](None)功能说明 

该命令用于查询系统内部模块统计值。 

当需要查询系统内部各个模块（如：FM、FS、DATA等）的统计项时，使用该命令。 

该命令使用时，可视查询需求选择是否输入实例号：如果没有输入SC逻辑编号，则查询所有SC的所有实例的模块统计信息；如果SC逻辑编号输入为非0，实例号输入0，则查询所有实例的模块统计信息；如果输入实例号非0，仅查询指定实例的模块统计信息。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE|模块|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于表示需要查询统计信息的内部模块。数据来源：本端规划。配置原则：配置为需要查询统计的模块，包括FM模块、DATA模块以及其他模块（如FS、UA等）。
SUBMODULE|子类型|参数可选性: 任选参数类型: 数字参数范围: 0-255|参数作用：该参数为预留参数，暂时不用填。
LOGICNO|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 0-1000|用于指定需要查询的SC的逻辑号，不填时代表查询所有SC的所有实例的模块统计信息。
INSTNO|进程实例号|参数可选性: 任选参数类型: 数字参数范围: 0-16|该参数用于表示需要查询模块信息的进程实例号，填0或者不填时代表查询所有实例的模块统计信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|统计信息|参数可选性: 必选参数类型: 字符串参数范围: 0-61440|参数作用：该参数用于表示查询到的内部模块统计信息。




[](None)命令举例 


`
查询系统内部模块统计信息，模块名称为“RCP_PMC”，实例号为1。
SHOW_STAT_INFO:MODULE="RCP_PMC",LOGICNO=1,INSTNO=1

(No.1) : SHOW_STAT_INFO:MODULE="RCP_PMC",LOGICNO=1,INSTNO=1
-----------------Npcf_SMPolicyControl_0----------------
统计信息
--------------------------------------------------------------------------------
PMC_STAT_APP_POWON_SUCC                                              1
PMC_STAT_POWON_SUCC                                                  1
PMC_STAT_RCV_REG_CFGCHG_NOTIFY_ACK                                   2
PMC_STAT_SCCU_CALL_BACK_4_CHG_NTF                                    1
PMC_STAT_REG_SCCHG_NOTIFY_SUCCESS                                    1
PMC_STAT_SEND_HTTP_SUBSCRIBE_SUCC                                12762
PMC_STAT_HTTP_SUBSCRIBE_ACK_SUCC                                 12762
PMC_STAT_SCANCONF_INIT_DEFAULT                                       1
PMC_STAT_PCF_STATE_INIT                                              1
PMC_STAT_PCF_STATE_NO_DR                                             1
PMC_STAT_PCF_STATE_WORK                                              1
--------------------------------------------------------------------------------
记录数：1

` 


### 清除统计(CLEAR_STAT_INFO) 
### 清除统计(CLEAR_STAT_INFO) 


[](None)功能说明 

该命令用于清除系统中所有内部模块的统计信息。 

当需要清除内部统计使模块开始重新统计时，使用该命令。 

该命令配置成功后，系统中所有内部模块的统计信息全被清除。 


[](None)注意事项 

由于执行该命令会清除所有内部模块的统计信息，请谨慎使用该命令。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于清除系统内部模块统计信息是否成功。Clear Statis Success! ：该参数表示系统内部模块统计信息清除成功。




[](None)命令举例 


`
清除系统内部所有模块的统计信息。
CLEAR_STAT_INFO: 

(No.1) : CLEAR_STAT_INFO:
-----------------Npcf_SMPolicyControl_0----------------
操作结果              
----------------------
Clear Statis Success! 
----------------------
记录数：1

` 


### 查询DIAMETER业务消息统计(SHOW_DEPSTAT_INFO) 
### 查询DIAMETER业务消息统计(SHOW_DEPSTAT_INFO) 


[](None)功能说明 

当需要查询系统内部Diameter业务子系统中消息收发，关键数据信息时使用该命令。

使用该命令时，根据查询需求选择是否输入SC逻辑编号和需要获取的信息类型可查询到指定SC的特定信息。


[](None)注意事项 




[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|参数作用：该参数用于指定要查询的SC集群内的SC实例的标识。数据来源：本端规划。配置原则：设定范围在1-1000，当输入SC逻辑编号不存在时会提示“SC LogicNo Or InstNo not exist”。
INSTNO|进程实例号|参数可选性: 必选参数类型: 数字参数范围: 1-16|参数作用：该参数用于指定要查询的SC实例上的进程实例的标识。数据来源：本端规划。配置原则：设定范围在1-16，当输入进程实例号不存在时会提示“SC LogicNo Or InstNo not exist”。
INFOTYPE|信息类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于指定要查询的信息类型。数据来源：本端规划。配置原则：包含以下类别。MESSAGE：Diameter业务子系统与承载、上层业务处理交互的消息统计以及Diameter业务子系统本身进行消息处理的统计信息。APPID：统计各个接口消息的数目以及关键错误码。SYS：Diameter业务子系统的系统信息，包括系统上电时间和主要配置、是否是Special SC。CONN：在此SC上的链路信息，包括链路号、链路上处理的消息数目。USYNC：Diameter业务子系统与链路维护模块同步，获取的链路通断情况、协商的能力等内容。ROUTE：在此SC上路由节点信息以及路由节点上处理的消息数目。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INFO|统计信息|参数可选性: 必选参数类型: 字符串参数范围: 0-61440|参数作用：该参数用于指定要查询的信息类型。数据来源：本端规划。配置原则：包含以下类别。MESSAGE：Diameter业务子系统与承载、上层业务处理交互的消息统计以及Diameter业务子系统本身进行消息处理的统计信息。APPID：统计各个接口消息的数目以及关键错误码。SYS：Diameter业务子系统的系统信息，包括系统上电时间和主要配置，是否是Special SC。CONN：在此SC上的链路信息，包括链路号、链路上处理的消息数目。USYNC：Diameter业务子系统与链路维护模块同步，获取的链路通断情况、协商的能力等内容。ROUTE：在此SC上路由节点信息以及路由节点上处理的消息数目。




[](None)命令举例 


`
查询SC逻辑编号1的SC上Diameter业务子系统和SCTP模块，上层业务处理模块消息交互的统计信息。

(No.1) : SHOW_DEPSTAT_INFO:SCLOGICNO=1,INSTNO=1,INFOTYPE="MESSAGE"
-----------------Npcf_SMPolicyControl_0----------------
统计信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------[ Dep Global Statis ]--------------------
  Recv from Svc Req Msg                                   :   228 
  Recv from Svc Ack Msg                                   :    54 
  Service Message Route Keep Success                      :   228 
  Recv from Svc Req Route Failed                          :     0 
  Send to Svc Ack Msg                                     :   218 
  Send to Svc Req Msg                                     :    54 
  Send to Bear Req Msg                                    :   228 
  Send to Bear Ack Msg                                    :    54 
  send protocol error Ans                                 :     0 
  Recv from Bear Req Msg                                  :    54 
  Recv from Bear Ack Msg                                  :   218 
  Recv Relay Req Msg                                      :     0 
  Recv Relay Ack Msg                                      :     0 
  Recv from Bear Send Fail                                :     0 
  Recv from Bear Stream Congestion  Fail                  :     0 
  Recv from Bear Req Route Failed                         :     0 

[TRANS]
  Create Trans Succ Times                                 :   228 
  Create Trans Fail Times                                 :     0 
  Transaction Idle Count                                  :  5000 
  Transaction Used                                        :     0 

[FAILURE]
  Send Msg To Svc Failure Times                           :     0 
  Send Msg To Dap Failure Times                           :     0 
  Get Ssm Commid Fail Times                               :     0 
  Check Loop Route Times                                  :     0 
  Check May Loop Route Times                              :     0 
  DEP Begin Find Link Times                               :     0 
  Trans Timeoute Times                                    :    10 

[REROUTE]
  Send Message Timeout Times                              :    10 
  Link Status Change Failure Times                        :     0 
  Receive Unavailable Error Times                         :     0 
  Receive Loop Error Times                                :     0 
  Receive Busy Error Times                                :     0 
  Message Need Resend Times                               :     0 
  Message ReRoute Success Times                           :     0 
  Message Resend Success Times                            :     0 

*********************** NOTICE ***********************
 DIM_NOTICE_TRANS_NOTICE_PROC                             :     10 times.

[LinkMatch]
  Static Link With DestHost Name Matching Times           :222 
  Static Link With DestRealm Name Matching Times          :6 
  Dynamic Link With DestHost Name Matching Times          :0 
  Dynamic Link With DestRealm Name Matching Times         :0 
  ApplicationId:16777231   DiameterLinkNo:2   DestHost:  spr.hatt.zte.com.cn
  ApplicationId:16777232   DiameterLinkNo:2   DestHost:  spr.hatt.zte.com.cn

 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

` 


### 清除DIAMETER业务统计(CLEAR DEPSTAT) 
### 清除DIAMETER业务统计(CLEAR DEPSTAT) 


[](None)功能说明 

小心：该命令属于高危命令，将清除DEP统计项信息。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 

该命令用于清除DEP业务消息统计缓存，包括接收消息和发送消息总数。 


[](None)注意事项 

执行该命令前需要与中兴通讯技术支持人员确认后才可以实施。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|表明操作结果。如果清除成功显示“Clear Dep Data Success”。




[](None)命令举例 


`
清除业务消息统计缓存。
CLEAR DEPSTAT

(No.34) : CLEAR DEPSTAT
-----------------Npcf_SMPolicyControl_0----------------
操作结果 
-------------------------
Clear Dep Data Success         
-------------------------
记录数：1

` 


### 查询DIAMETER业务相关资源的使用情况(SHOW_DEPDATA_STAT) 
### 查询DIAMETER业务相关资源的使用情况(SHOW_DEPDATA_STAT) 


[](None)功能说明 

该命令用于查询DEP数据区的使用情况。当出现DIAMETER负荷容量告警时，可以执行该命令查询各DEP数据区的使用情况。


[](None)注意事项 

无


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCNO|SC编号|参数可选性: 必选参数类型: 数字|该参数表示运行DEP数据区的SC实例的逻辑编号。
INSTNO|进程实例号|参数可选性: 必选参数类型: 数字|该参数表示运行DEP数据区的进程实例的标识。
RESNAME|数据区名|参数可选性: 必选参数类型: 字符串参数范围: 1-15|该参数表示统计的数据区对应的名称。
SUM|总数|参数可选性: 必选参数类型: 数字|该参数表示在对应实例上此数据区的总个数。
USAGE|占用数|参数可选性: 必选参数类型: 数字|该参数表示在对应实例上此数据区的当前使用个数。
PEAK|占用峰值|参数可选性: 必选参数类型: 数字|该参数表示在对应实例上此数据区上电以来最高的占用值。
PERCENT|占用百分比|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数表示在对应实例上此数据区使用个数占总个数的百分比。
RETCODE|结果|参数可选性: 任选参数类型: 数字参数范围: 0-1|该参数表示DIAMETER业务相关资源的使用情况查询结果。




[](None)命令举例 


`
查询DEP数据区的的使用情况。
SHOW_DEPDATA_STAT; 

(No.1):SHOW_DEPDATA_STAT
-----------------Npcf_SMPolicyControl_0----------------

SC编号  进程实例号  数据区名         总数  占用数  占用峰值  占用百分比
-----------------------------------------------------------------------
1       1           DEP_TRANS        5000  0       0         0
1       1           DEP_ROUTE        4096  1       1         0
1       1           DEP_CONN         1024  10      10        1
1       1           RAWUB(256)       200   0       0         0
1       1           RAWUB(512)       1000  0       0         0
1       1           RAWUB(1024)      1000  0       0         0
1       1           RAWUB(2048)      2000  0       0         0
1       1           RAWUB(4096)      1000  0       0         0
1       1           RAWUB(8192)      200   0       0         0
1       1           RAWUB(16384)     400   0       0         0
1       1           RAWUB(32768)     20    0       0         0
1       1           PARSERUB(64)     8000  3011    3011      38
1       1           PARSERUB(128)    2000  857     857       43
1       1           PARSERUB(256)    2000  0       0         0
1       1           PARSERUB(512)    1000  0       0         0
1       1           PARSERUB(1024)   200   0       0         0
1       1           PARSERUB(2048)   200   0       0         0
1       1           PARSERUB(4096)   100   0       0         0
1       1           PARSERUB(8192)   100   0       0         0
1       1           PARSERUB(16384)  20    0       0         0
1       1           PARSERUB(32768)  10    0       0         0
-----------------------------------------------------------------------
记录数：  21

` 


### 数据区UB信息查询(SHOW_UB_STAT) 
### 数据区UB信息查询(SHOW_UB_STAT) 


[](None)功能说明 

该命令用于按占用数查询UB模块各数据区的使用情况，返回每一种数据区占用最多的SC关于该数据区的使用情况，包括SC编号、数据区名、总数、占用数、占用比。 


[](None)注意事项 

无


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCNO|SC编号|参数可选性: 必选参数类型: 数字|数据区占用数最多的SC编号。
INSTNO|进程实例号|参数可选性: 必选参数类型: 数字参数范围: 0-1000|数据区占用数最多的进程实例号。
RESNAME|数据区名|参数可选性: 必选参数类型: 枚举，参见枚举定义|数据区名称，枚举类型。TYPE_FM_UB_ACTIVITY：功能点数据区。TYPE_FM_UB_EVENT：事件数据区。TYPE_FM_UB_TRAN：事物数据区。TYPE_FM_UB_RAWMSG：原始码流。TYPE_FM_UB_TRANRES：锁资源。TYPE_FM_UB_RESLOCK：锁节点。TYPE_FM_UB_FLOW：流程数据区。TYPE_FM_UB_PROXY：Proxy消息缓存。TYPE_PPM_UB_PROXY：PPM数据区。TYPE_SOAP_UB_PROXY：SOAP数据区。
SUM|总数|参数可选性: 必选参数类型: 数字|数据区总数。
USAGE|占用数|参数可选性: 必选参数类型: 数字|已经被使用的数据区数。
PERCENT|占用百分比|参数可选性: 必选参数类型: 数字|已经被使用的数据区数占数据区总数的百分比。




[](None)命令举例 


`
查询数据区使用情况。
SHOW_UB_STAT

(No.1) : SHOW_UB_STAT:
-----------------Npcf_SMPolicyControl_0----------------
SC编号 进程实例号 数据区名      总数  占用数 占用百分比 
---------------------------------------------
1      2          功能点数据区  20000 0      0          
1      2          事件数据区    1000  0      0          
1      2          事务数据区    2000  0      0          
1      2          原始码流      2000  0      0          
1      2          锁资源        10000 0      0          
1      2          锁节点        50000 0      0          
1      2          流程数据区    1000  0      0          
1      2          Proxy消息缓存 2000  0      0          
1      2          PPM数据区     1000  0      0          
1      2          SOAP数据区    1500  0      0          
---------------------------------------------
记录数：10

` 


### 查询SC群组数(SHOW_SC_GROUPNUM) 
### 查询SC群组数(SHOW_SC_GROUPNUM) 


[](None)功能说明 

此命令的主要功能为查询specialSC群组数。此外当其他SC的群组数与specialSC的群组数不一致时，该SC的查询信息也会在网管上进行显示。 


[](None)注意事项 

无


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LogicNO|SC的LogicNo|参数可选性: 必选参数类型: 数字参数范围: 1-4294967295|SC的逻辑编号。
PROC_INST_NO|进程实例号|参数可选性: 必选参数类型: 数字参数范围: 0-16|进程实例号
SCCU_GROUPNUM|SCCU的群组数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|通过SCCU提供接口查询到的群组数
LCDB_GROUPNUM|LCDB的群组数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|通过LCDB提供接口查询到的群组数
IS_SPECIALSC|是否为specialSC|参数可选性: 必选参数类型: 数字参数范围: 0-1|说明该SC是否为specialSC，1即为是，0即为否




[](None)命令举例 


`
查询SC群组个数。
SHOW_SC_GROUPNUM

(No.1) : SHOW_SC_GROUPNUM:
-----------------Npcf_SMPolicyControl_0----------------
LogicNO    进程实例号  SCCU群组数     LCDB群组数       是否为specialSC
---------------------------------------------------------------
      1     1    7560           7560                1
---------------------------------------------------------------
记录数：1


` 


### 查询分发占比信息(SHOW_DIS_COUNT) 
### 查询分发占比信息(SHOW_DIS_COUNT) 


[](None)功能说明 

该命令用于查询并显示分发表占比信息，分发表包括：Session表、IP表、IMSI表、MAC表。若需要查看具体SC分发表信息，输入其LogicNO并查询；若无输入LogicNO，则默认输出SC容量范围内（0-380）的分发表信息，并按SC的Session表、IP表数量降序排序（Session表优先级最高），两者都相同则按LogicNO升序排序。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LOGIC_NO|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 0-1000|可选输入，用于查询指定SC的分发表信息。
PROC_INST_NO|进程实例号|参数可选性: 任选参数类型: 数字参数范围: 0-16|该参数用于表示需要查询的进程实例号，填0或者不填时代表查询所有实例的模块统计信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSION_CAP|SESSION表容量|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|SESSION表容量。
IP_CAP|IP表容量|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|IP表容量。
IMSI_CAP|IMSI表容量|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|IMSI表容量。
MAC_CAP|MAC表容量|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|MAC表容量。
LOGIC_NO|逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 0-4294836225|逻辑编号。
PROC_INST_NO|进程实例号|参数可选性: 必选参数类型: 数字参数范围: 0-1000|进程实例号。
SESSION_INFO|SESSION表使用占比|参数可选性: 必选参数类型: 字符串参数范围: 0-19|SESSION表使用数量及其占用百分比。
IP_INFO|IP表使用占比|参数可选性: 必选参数类型: 字符串参数范围: 0-19|IP表使用数量及其占用百分比。
IMSI_INFO|IMSI表使用占比|参数可选性: 必选参数类型: 字符串参数范围: 0-19|IMSI表使用数量及其占用百分比。
MAC_INFO|MAC表使用占比|参数可选性: 必选参数类型: 字符串参数范围: 0-19|MAC表使用数量及其占用百分比。




[](None)命令举例 


`
查询分发情况。
SHOW_DIS_COUNT

SHOW_DIS_COUNT:
-----------------Npcf_SMPolicyControl_0----------------
SESSION表容量 IP表容量 IMSI表容量 MAC表容量 
--------------------------------------------
38750000      52500000 26250000   7500000   
--------------------------------------------
记录数：1
逻辑编号 进程实例号 SESSION表使用占比 IP表使用占比 IMSI表使用占比 MAC表使用占比 
--------------------------------------------------------------------------------
1        1          0(0%)             0(0%)        0(0%)          0(0%)         
1        2          0(0%)             0(0%)        0(0%)          0(0%)         
2        1          0(0%)             0(0%)        0(0%)          0(0%)         
2        2          0(0%)             0(0%)        0(0%)          0(0%)         
--------------------------------------------------------------------------------
记录数：4

` 


## 服务注册管理 
## 服务注册管理 


[](None)背景知识 


PCF部署成功之后需要向NRF进行服务能力注册，注册成功后才能正常为网络提供服务。 




[](None)功能说明 


该命令用于触发PCF向NRF进行重注册。PCF只有向NRF注册成功后才能正常为网络提供服务。但有些极端异常情况下，需要PCF具备手动触发重注册的能力，比如NRF宕机或者网络心跳中断造成的NF状态异常等。在这些异常发生时，可以通过该命令手动触发PCF向NRF进行重注册。 




[](None)子主题： 






### NRF注册(NRF_REGISTRATION) 
### NRF注册(NRF_REGISTRATION) 


[](None)功能说明 

该命令用于触发PCF向NRF进行注册。如果在某些异常情况下，造成NRF侧的PCF状态非可用时，可以通过该命令触发PCF向NRF进行重注册。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|PCF向NRF注册的结果.




[](None)命令举例 


`
触发PCF向NRF进行注册。
NRF_REGISTRATION
` 


### NRF去注册(NRF_DEREGISTRATION) 
### NRF去注册(NRF_DEREGISTRATION) 


[](None)功能说明 

该命令用于触发PCF向NRF去注册。当该PCF实例不想对外提供服务能力或者不想被其他NF发现时，可以通过该命令手动触发PCF向NRF进行去注册。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|PCF向NRF去注册的结果。




[](None)命令举例 


`
手动触发PCF向NRF去注册流程。
NRF_DEREGISTRATION
` 


### 查询NRF注册信息(SHOW_NRF_REG_INFO) 
### 查询NRF注册信息(SHOW_NRF_REG_INFO) 


[](None)功能说明 

该命令用于查询PCF向NRF的注册信息。当PCF的服务注册出现故障时，可以使用该命令查询PCF向NRF的注册信息用于故障定位。查询内容包括PCF向NRF的注册的网元类型、网元实例ID、网元服务、服务号段等内容，PCF是否处于向NRF更新注册的过程和PCF是否有向NRF注册不成功的告警等。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INFO|NRF注册信息|参数可选性: 任选参数类型: 字符串参数范围: 0-61440|PCF向NRF的注册信息。




[](None)命令举例 


`
查询PCF向NRF的注册信息。

(No.2) : SHOW_NRF_REG_INFO:
-----------------PCF_139/Npcf_SMPolicyControl_0----------------
NRF注册信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
--------------------------------------------------------------------------------------------------------------------------
------------------------Base Information------------------------
NFType               : RCP
NFInstanceID         : 85c38faa-5ec3-4544-bf31-95db06a0b493
NFSInstanceID        : 65c57cef-a7a8-4463-b65d-993f190f68a1
isInUpdate           : 0
-----------------------------nrf-ctrl-info-----------------------
isReg               : 0
isSendingMsg2NRF    : 0

---------------------------nrf-reg-condition----------------------
Need Reg NRF         : 0
Not dereged By MML   : 1
Is SpecialSC         : 1
Is Alarmed           : 0
NumCfgNum            : 0
DnnNum             : 0
NumberRange Exist    : 0
NF Config Exist      : 1
NF And Service Exist : 1
NFID Exist           : 1
PoweronStateCorrect  : 1

-----------------------------nrf-st-info-------------------------
st_nf           : 1
st_plmn         : 1
st_sns          : 0
st_num          : 0
st_dnn          : 0
st_rxhost       : 1
st_servedarea   : 0
-----------------------------nf-cfg-------------------------------
hostname        : rcp.hatt.zte.com.cn
realm           : hatt.zte.com.cn
groupid         : 
clientprofileid : 0
serverprofileid : 1
priority        : 0
iptype          : 1
schema          : http
ip              : 192.162.139.111
port            : 8080
-----------------------------serv-cfg------------------------------
-------------------------serviceType[npcf-smpolicycontrol]----------------------
st_serv         : 1
servtype        : 0
version         : v1
priority        : 1
fqdn            : pcf.zte.com.cn
clientprofileid : 0
serverprofileid : 1
priority        : 0
iptype          : 1
schema          : http
ip              : 192.162.139.111
port            : 8080
-------------------------serviceType[npcf]----------------------
st_serv         : 1
servtype        : 0
version         : v1
priority        : 1
fqdn            : pcf
clientprofileid : 0
serverprofileid : 1
priority        : 0
iptype          : 1
schema          : http
ip              : 192.162.139.111
port            : 8080
-----------------------------nrf-pattern---------------------------
ALLOWREGNONUM       : 0
NFPROCH             : 0
LMSGNUM             : 10
LOCDISC             : 0
REGLOAD             : 0
-----------------------------httpmap-cfg---------------------------
-------map[type:0][id:0]--------
clientprofileid : 0
serverprofileid : 1
priority        : 0
-------map[type:10][id:0]--------
clientprofileid : 0
serverprofileid : 1
priority        : 0
-----------------------------rxdim-cfg-----------------------------
rxhost     : af.hatt.zte.com.cn
rxrealm    : hatt.zte.com.cn
-----------------------------servedarea-cfg------------------------
count          : 0
-----------------------------nssais-cfg----------------------------
count          : 0
-----------------------------alwddomain-cfg------------------------
count          : 1
--------- alwddomain-cfg[1-0] ---------
type           : 0
domain         : pcf.zte.com.cn
-----------------------------alwdnssai-cfg-------------------------
count          : 1
--------- alwdnssai-cfg[1-0] ---------
type           : 0
sst            : 1
sd             : 111111
-----------------------------alwdplmn-cfg--------------------------
count          : 1
--------- alwdplmn-cfg[1-0] ---------
type           : 0
mcc            : 460
mnc            : 10
-----------------------------plmn-cfg--------------------------
count          : 1
--------- Plmn-cfg[0] ---------
mcc            : 460
mnc            : 10
-----------------------------nrf-end-info--------------------------
--------------lbloadinfontf-cfg----------------
notify switch      : 0
bLoadNotifyTHR     : 40
bLoadFluctTHR      : 5
wCollectPeriod     : 10
bLoad4Nrf          : 2
 
----------------------------------------------------------------------------------------------------------------------
记录数：1



` 


## 用户数据管理 
## 用户数据管理 


[](None)背景知识 


Gx、N7或N15会话在线期间，PCF需要提供一种方式用于工程或测试人员通过EM界面查询用户分发表详细信息，以快速确认及检验会话信息的正确性。 




[](None)功能说明 


该命令用于查询用户分发表详细信息；
当Gx、N7或N15会话上线后，可使用此命令。 




[](None)子主题： 






### 查询分发数据(SHOW_DISTABLE) 
### 查询分发数据(SHOW_DISTABLE) 


[](None)功能说明 

该命令用于查询分发表。 分发表用于业务将消息分发到对应实例。分发表有三种： SESSION,IP,IMSI。分发模块根据消息携带的内容，可选择一种分发表查询，然后业务根据查询到的记录结果，将消息分发到某个业务实例。 

当需要查询某个分发表是否存在，或分发表具体内容时，使用此命令。 

命令执行成功后， 若分发表记录存在，则会显示该条记录的内容。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
KEYTYPE|关键字类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要查询的用户的分发表类型，取自分发表中作为用户标识的关键字类型。类型包括SESSION、IP、IMSI。比如当前用户对应分发表使用IMSI做为关键字，则该参数选择IMSI。
KEY|关键字|参数可选性: 任选参数类型: 字符串参数范围: 0-128|该参数用于表示对应类型的用户关键字，SESSION取自N7、N15或者Gx会话消息体中的session_ID，IP取自N7、N15或者Gx会话消息体中的IP地址，IMSI取自N7或N15会话消息体中supi字段或者Gx会话消息体中的IMSI字段。比如N7会话消息体中supi的值为“imsi-123456789012346”，KEYTYPE选择“IMSI”，则该参数填写123456789012346。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-30720|执行查询分发表命令后系统返回的用户分发表。




[](None)命令举例 


`
以用户的IMSI标识为关键字，查询IMSI标识为123456789012346的用户的分发表信息。
SHOW_DISTABLE:KEYTYPE="IMSI",KEY="123456789012346"
` 


### 查询签约信息(SHOW_PROFILE) 
### 查询签约信息(SHOW_PROFILE) 


[](None)功能说明 

该命令用于查询用户签约详细信息，如用户类型、计费开始日期等。 

当Gx、N7或N15会话上线后，工程或测试人员需要快速确认及检验会话信息的正确性时，可使用该命令。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DATATYPE|数据区类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要查询的用户的签约数据区类型，取自用户签约数据的来源。来源包括用户签约数据区、组签约数据区。
USERTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型，取自N7或N15会话消息体中supi字段或gpsi字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如N7会话消息体中supi的值为“imsi-123456789012345“，则该参数选择IMSI。
USERID|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N7或N15会话消息体中supi字段或gpsi字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如用户标识类型选择“IMSI”，N7会话supi的值为“imsi-123456789012345“，则该参数填写123456789012345。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|用户签约信息|参数可选性: 任选参数类型: 字符串参数范围: 0-1200000|执行查询签约命令后系统返回的用户签约信息。




[](None)命令举例 


`
查询IMSI标识为123456789012346的用户存储在用户签约数据区中的签约数据。
SHOW_PROFILE:DATATYPE="RCP_CM_UC_USER_PROF_DATA",USERTYPE="RCP_QUERY_TYPE_IMSI",USERID="123456789012346"
` 


### 查询用量信息(SHOW_USAGE) 
### 查询用量信息(SHOW_USAGE) 


[](None)功能说明 

该命令用于查询用户用量详细信息，如总用量的值、已使用用量的值等。 

当Gx、N7或N15会话上线后，工程或测试人员需要快速确认及检验会话信息的正确性时，可使用此命令。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DATATYPE|数据区类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要查询的用户的用量数据区类型，取自用户用量数据的来源。来源包括用户用量数据区、组用量数据区和Gx接口会话用量数据区。
USERTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型，取自N7或N15会话消息体中supi字段或gpsi字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如N7会话消息体中supi的值为“imsi-123456789012345“，则该参数选择IMSI。
USERID|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N7或N15会话消息体中supi字段或gpsi字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如用户标识类型选择“IMSI”，N7会话supi的值为“imsi-123456789012345“，则该参数填写123456789012345。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|用量信息|参数可选性: 任选参数类型: 字符串参数范围: 0-1200000|执行查询用户用量命令后系统返回的用户用量信息。




[](None)命令举例 


`
查询IMSI标识为123456789012346的用户存储在用户用量数据区中的用量数据。
SHOW_USAGE:DATATYPE="RCP_CM_USER_UA_DATA",USERTYPE="RCP_QUERY_TYPE_MSISDN",USERID="123456789012346"
` 


### 查询N7/Gx会话(SHOW_DPI_IPCAN_SESS) 
### 查询N7/Gx会话(SHOW_DPI_IPCAN_SESS) 


[](None)功能说明 

该命令用于查询用户的N7/Gx会话信息。当用户接入到网络后，执行该命令可以查询到用户的IP地址、接入类型、DNN、位置信息，以及RCP授权的控制策略信息等等。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERTYPE|用户类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于表示使用哪种用户标识类型来查询用户的N7/Gx会话信息。数据来源：全网规划。配置原则：RCP_QUERY_TYPE_IMSI（IMSI）：根据用户的IMSI号码查询N7/Gx会话。根据SHOW USERKEYPRI里配置的用户标识类型优先级，分析出用户的主用户标识为IMSI时，使用该配置查询N7/Gx会话。RCP_QUERY_TYPE_MSISDN（MSISDN）：根据用户的MSISDN号码查询N7/Gx会话。根据SHOW USERKEYPRI里配置的用户标识类型优先级，分析出用户的主用户标识为MSISDN时，使用该配置查询N7/Gx会话。RCP_QUERY_TYPE_IP（IP）：根据用户的IP地址查询N7/Gx会话。用户上线时，SMF/PGW会为用户分配IPv4或IPv6地址，此时RCP可以根据用户的IP地址来查询N7/Gx会话。RCP_QUERY_TYPE_IMEI（IMEI）：根据用户的IMEI号码查询N7/Gx会话。当用户使用无卡紧急呼叫业务时，用户会话里可能不携带IMSI和MSISDN号码，此时会携带IMEI信息。RCP可以根据用户的IMEI号码来查询N7/Gx会话。RCP_QUERY_TYPE_MAC（MACADDR）：根据用户的MAC地址查询N7会话。当用户从TSN（Time Sensitive Networking，时间敏感网络）接入时，SMF会为用户分配MAC地址，此时RCP可以根据用户的MAC地址来查询N7会话。
USERID|用户标识|参数可选性: 任选参数类型: 字符串参数范围: 1-20|参数作用：该参数用于表示查询指定号码的用户的N7/Gx会话。数据来源：用户会话携带的信息。配置原则：当“用户类型”为IMSI、MSISDN、IMEI时，需要配置该参数，用于表示通过用户的IMSI号码、MSISDN号码或IMEI号码来查询会话信息。
IP|IP|参数可选性: 任选参数类型: 字符串参数范围: 1-64|参数作用：该参数用于表示查询指定IP地址的用户的N7/Gx会话。数据来源：用户会话携带的信息。配置原则：当“用户类型”为IP时，需要配置该参数，用于表示通过SMF/PGW为用户分配的IPv4或IPv6地址来查询会话信息。
REALM|APN|参数可选性: 任选参数类型: 字符串参数范围: 1-99|参数作用：该参数用于表示查询用户的N7/Gx会话使用的APN值。数据来源：用户会话携带的信息。配置原则：当“用户类型”为IP时，可以配置该参数，用于表示通过SMF/PGW为用户分配的IPv4或IPv6地址和APN信息来查询会话。若未配置该参数，则只使用IP地址查询。
MAC|MAC|参数可选性: 任选参数类型: 字符串参数范围: 1-17|参数作用：该参数用于表示查询指定MAC地址的用户的N7会话。数据来源：用户会话携带的信息。配置原则：当“用户类型”为MACADDR时，需要配置该参数，用于表示用户从TSN（Time Sensitive Networking，时间敏感网络）接入时，通过SMF分配的MAC地址来查询会话信息。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|会话信息|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|参数作用：该参数用于表示RCP查询到的用户的N7/Gx会话信息，包括IP地址、接入类型、DNN、位置信息，以及RCP授权的控制策略信息等。




[](None)命令举例 


`
查询IMSI为123456789012345的N7或Gx会话。
SHOW_DPI_IPCAN_SESS:USERTYPE="RCP_QUERY_TYPE_IMSI",USERID="123456789012345"

SHOW_DPI_IPCAN_SESS:USERTYPE="RCP_QUERY_TYPE_IMSI",USERID="123456789012345"
-----------------PCF_30/Npcf_SMPolicyControl_0----------------
会话信息          
--------------------------------------------------------

*********************  SC Logic No:1  ********************

***********  IP-CAN Session Information Begin!  **********

 Radio Access Type:NR(1006) 

 User Location Info Mobile Country Code(MCC):123 

 User Location Info Mobile Network Code(MNC):45 

 User Location Info Tracking Area Code(TAC):1 

 AF Infomation: 

 wBindAFNum = 0 

 bSpCreateByAFInfoFLag = 1 

 bTDFSpMultiInstFlag = 0 

 bSavePDNConnIdFlag = 1 

 bGxRuleNameRepeated = 0 

 IPCAN Disaster Tolerance Capability Flag: No Need Disaster Recovery 

 Priority-Sharing-Indicator Service Number = 0 

*******************  N7 Session Begin!  ******************

 Session Id:fb82eccf16dc5a0f, SessionHashAB = 18123308224678222351 

 Session Charging Capability:UNSUPPORT(0) 

 Emergency Session: FALSE 

 Smf FQDN Name:smf_default 

 Smf Notify URL:http://9.9.14.15:8080/nsmf-pdusession/v1/sessions 

 CC Requested Number:0 

 Pending Transaction Capability of Session: 0 

 IP CAN Type:3GPP_ACCESS(8) 

 Called Station Id(APN):dnn54322 

 CCR Initial Time:2021-09-28 13:48:31.(3841796911) 

 IPS Last Update Time:2021-09-28 13:48:34.(3841796914) 

 Bearer Control Mode:BEARER_CONTROL_MODE_UE_NW 

 Tethering Status Flag = 0 

 Tethering Count = 0 

 Hotspot Share Status Flag = 0 

 CC Requested Event:

 NO_EVENT_TRIGGER 

 Framed IP Adddress:192.168.0.1 

 SGSN Mobile Country Code(MCC):123 

 SGSN Mobile Network Code(MNC):45 

 SGSN RoamAttr:Roaming(3) 

 Subscriber Event:

 Event Trigger:NO EVENT TRIGGER 

 Notified Event Report Indication:

 NO EVENT TRIGGER 

 Requested APN Aggregate Max Bitrate UL:95367431000 

 Requested APN Aggregate Max Bitrate DL:286102296000 

 IP Domain ID Len = 0 

 IP-Domain-ID is default 

 CCR Requested Online:ENABLE_ONLINE(1) 

 CCR Requested Offline:ENABLE_OFFLINE(1) 

 PRA Type : Multiple PRA

 SessRule Num:1

[0] SessRule Node dwIndex:65537

***************  Session Rule Info Begin!  **************

 ruleId:auto_default_fb82eccf16dc5a0f

 bQciDecMethod:0

 5qi:1, hash=0

 arp pri:1

 arp pec:1

 arp pev:1

 bAPNAGGLevelAction:0

 ambr ul:95367431000

 ambr dl:286102296000

 dwRuleId = 0 

 dwRoleId = 0 

***************  Session Rule Info End!  **************

 pduSessionId:1

 pduSessionType:IPV4V6

 ueMac num:0

 Slice Type:1

 Slice ID:310000

 nci:0000000010

 Framed IPv6 Prefix:fe:: 

 IPv6 Address length:8 

 Prefix length:64 

 CC Requested Type:INITIAL_REQUEST(1) 

 wSessAuthDefRand:(595), wSessAuthSpcRand:(595) !

 dwRevalidationTimeOutRule =NTP 0(Local ) 

 dwPeriodQurUsgFreq = 0(seconds) 

 dwAbsRuleReDecTime =UTC 0(Local 0000-00-00 00:00:00)  

 bIPSConfirmStatus = 0

 IPCan-Session(DPI) Data End 

***************  Bearer Information Begin!  **************

 Requested QoS Class Identifier:QCI_1(1) 

 Requested Priority Level:1 

 Requested Pre-emption Capability:PRE-EMPTION_CAPABILITY_DISABLED(1) 

 Requested Pre-emption Vulnerability:PRE-EMPTION_VULNERABILITY_DISABLED(1) 

 Bearer Usage:GENERAL(0) 

 Bearer Operation:ESTABLISHMENT(1) 

 Decision CAC Result:ACCEPT(0) 

 QoS Negotiation:QoS_NEGOTIATION_SUPPORTED 

 QoS Upgrade:QoS_UPGRADE_NOT_SUPPORTED 

****************  Bearer Information End!  ***************

***********  Rule Information By PPM-RG Begin!  **********

************  Rule Information By PPM-RG End!  ***********

********************  N7 Session End!  *******************

************  IP-CAN Session Information End!  ***********
------------------------------------------------
记录数：1

` 


### 释放N7/Gx会话(REL_SESS) 
### 释放N7/Gx会话(REL_SESS) 


[](None)功能说明 

该命令用于在测试场景下，PCF主动对在线的N7或GX会话发起释放。执行该命令后，系统会释放N7、Gx会话及其关联会话。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要释放的会话类型。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要释放的用户类型。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示要释放的用户标识。
SESSIONID|会话ID|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于表示要释放的会话ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|返回结果|参数可选性: 必选参数类型: 字符串参数范围: 1-30720|执行释放N7/Gx会话命令后系统返回的释放会话结果。




[](None)命令举例 


`
释放用户类型为IMSI，用户号码为123456789012345的N7会话。


(No.4) : REL_SESS:SESSIONTYPE="N7Sess",USERKEYTYPE="IMSI",USERKEY="123456789012345"
-----------------Npcf_SMPolicyControl_0----------------
返回结果                  
--------------------------
No records in the system. 
--------------------------
记录数：1
执行成功开始时间:2021-03-10 16:51:54 耗时: 0.134秒


` 


### 查询Sy会话(SHOW_SY_SESS) 
### 查询Sy会话(SHOW_SY_SESS) 


[](None)功能说明 

该命令用于在测试场景下，查询SY会话详细信息。执行该命令后，系统会输出Sy会话的详细信息。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERTYPE|用户类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示用户签约的用户类型。
USERID|用户标识|参数可选性: 任选参数类型: 字符串参数范围: 1-20|该参数用于表示用户签约的用户标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|会话信息|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|执行查询Sy会话命令后系统返回的Sy会话信息。




[](None)命令举例 


`
查询IMSI为123456789123456的SY会话。

(No.1) : SHOW_SY_SESS:USERTYPE="RCP_QUERY_TYPE_IMSI",USERID="123456789123456"
-----------------Npcf_SMPolicyControl_0----------------
会话信息        
----------------
No Sy Session! 
----------------
记录数：1
执行成功开始时间:2021-03-10 17:10:07 耗时: 0.991秒

` 


### 释放Sy会话(REL_SY_SESS) 
### 释放Sy会话(REL_SY_SESS) 


[](None)功能说明 

该命令用于在测试场景中，PCF主动对在线的Sy会话发起释放。执行该命令后，系统会输出Sy会话释放结果信息。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERTYPE|用户类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要释放的用户类型。
USERID|用户标识|参数可选性: 任选参数类型: 字符串参数范围: 1-20|该参数用于表示要释放的用户标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|返回结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10000|执行释放Sy会话命令后系统返回的Sy会话释放结果。




[](None)命令举例 


`
释放用户类型为IMSI，用户号码为123456789012345的SY会话。

(No.5) : REL_SY_SESS:USERTYPE="RCP_QUERY_TYPE_IMSI",USERID="123456789012345"
-----------------Npcf_SMPolicyControl_0----------------
返回结果       
---------------
No Sy Session! 
---------------
记录数：1
执行成功开始时间:2021-03-10 17:04:32 耗时: 1.093秒


` 


### 查询AF会话(SHOW_AF_SESS) 
### 查询AF会话(SHOW_AF_SESS) 


[](None)功能说明 

该命令用于查询AF会话详细信息，如用户IP地址、媒体节点关键字、源主机信息、目标主机信息等。当AF会话上线及更新后，可使用此命令。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERTYPE|用户类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数表示用于查询会话信息的用户类型，类型包括IMSI、MSISDN、IP、IMEI，取自N7、N15、Gx、Rx或者N5会话消息体中的AVP。配置原则：IMSI：根据用户的IMSI号码查询Rx会话。根据SHOW USERKEYPRI里配置的用户标识类型优先级，分析出用户的主用户标识为IMSI时，使用该配置查询Rx会话。MSISDN：根据用户的MSISDN号码查询Rx会话。根据SHOW USERKEYPRI里配置的用户标识类型优先级，分析出用户的主用户标识为MSISDN时，使用该配置查询Rx会话。IP：根据用户的IP地址查询Rx会话。用户上线时，SMF/PGW会为用户分配IPv4或IPv6地址，此时RCP可以根据用户的IP地址来查询Rx会话。IMEI：根据用户的IMEI号码查询Rx会话。当用户使用无卡紧急呼叫业务时，用户会话里可能不携带IMSI和MSISDN号码，此时会携带IMEI信息。RCP可以根据用户的IMEI号码来查询Rx会话。
USERID|用户标识|参数可选性: 任选参数类型: 字符串参数范围: 1-60|该参数表示会话所属的用户标识，取自N7、N15或者Gx会话消息体中用户标识字段。比如N7会话中supi的值为“imsi-123456789012346”，USERTYPE参数选择IMSI，则该参数填写123456789012346。
IP|IP地址|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示会话所属的IP地址，取自N7、N15、Gx、Rx或者N5会话消息体中Ipv4或Ipv6字段。比如N5会话中ueIpv4 的值为 "192.168.10.1"，USERTYPE参数选择IP，则该参数填写192.168.10.1。
IPDOMAIN|IP地址域标识|参数可选性: 任选参数类型: 字符串参数范围: 1-130|该参数表示会话所属的IP地址域标识，取自N7、N15、Gx、Rx或者N5会话消息体中ipDomain字段。比如N5会话中ipDomain的值为"pcf.zte.com.cn"，则该参数填写pcf.zte.com.cn。
REALM|APN|参数可选性: 任选参数类型: 字符串参数范围: 1-99|该参数表示会话所属的APN，取自N7、N15、Gx、Rx或者N5会话消息体中APN字段。比如N5会话中dnn的值为"apn1"，则该参数填写apn1。
MAC|MAC地址|参数可选性: 任选参数类型: 字符串参数范围: 1-17|该参数表示会话所属的MAC地址，取自N5会话消息体中MAC字段。比如N5会话中MAC的值为"00-01-6C-06-A6-29"，则该参数填写00-01-6C-06-A6-29。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|会话信息|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|执行查询AF会话命令后系统返回的AF会话查询结果。




[](None)命令举例 


`
查询用户类型为IMSI，用户号码为123456789012346的AF会话详细信息。 
SHOW_AF_SESS:USERTYPE="RCP_QUERY_TYPE_IMSI",USERID="123456789012346" 
` 


### 释放AF会话(REL_AF_SESS) 
### 释放AF会话(REL_AF_SESS) 


[](None)功能说明 

该命令用于释放Rx或N5会话。当Rx或N5会话上线及更新后，可使用此命令。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于区分释放的会话类型。如释放Rx会话信息请选择RxSess，如释放N5会话信息请选择N5Sess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型，取自Rx会话中的imsi字段或msisdn字段、N5会话消息体中supi字段或gpsi字段。比如N5会话消息体中supi的值为“imsi-123456789012346“，则该参数选择IMSI。
USERKEY|用户标识|参数可选性: 任选参数类型: 字符串参数范围: 1-60|该参数用于表示会话所属的用户号码，取自Rx会话中的imsi字段或msisdn字段、N5会话消息体中supi字段或gpsi字段。比如N5会话消息体中supi的值为“imsi-123456789012346“，则该参数填写123456789012346。
IP|IP地址|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于表示Rx或N5会话的IP，比如N5会话中ueIpv4 的值为 "192.168.10.1"，USERKEYTYPE参数选择IP，则该参数填写192.168.10.1。
SESSIONID|会话ID|参数可选性: 任选参数类型: 字符串参数范围: 1-120|该参数用于表示Rx或N5会话的会话ID，当前版本暂未支持使用此字段。
MAC|MAC地址|参数可选性: 任选参数类型: 字符串参数范围: 1-17|该参数表示会话所属的MAC地址，取自N5会话消息体中MAC字段。比如N5会话中MAC的值为"00-01-6C-06-A6-29"，则该参数填写00-01-6C-06-A6-29。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|返回结果|参数可选性: 任选参数类型: 字符串参数范围: 0-10000|执行释放AF会话命令后系统返回的AF会话释放结果。




[](None)命令举例 


`
释放用户类型为IMSI，用户号码为123456789012346的Rx会话。
REL_AF_SESS:SESSIONTYPE="RxSess",USERKEYTYPE="IMSI",USERKEY="123456789012346" 
` 


### 查询N15会话(SHOW_N15_SESSION) 
### 查询N15会话(SHOW_N15_SESSION) 


[](None)功能说明 

该命令用于查询N15会话详细信息，如用户号码、接入类型、用户位置信息等。当N15会话上线及更新后，可使用此命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: N15Sess|该参数用于区分查询的会话类型，N15会话信息请选择N15Sess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型。可通过命令SHOW USERKEYPRI查询优先级，若第一优先级是IMSI，则该参数选IMSI，反之选MSISDN。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N15会话消息体中的supi或者gpsi字段。若USERKEYTYPE为IMSI，supi字段为“imsi-123456789012346“，则该参数填写123456789012346；若USERKEYTYPE为MSISDN，gpsi字段为“msisdn-8613800000001“，则该参数填写8613800000001




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONINFO|会话信息|参数可选性: 任选参数类型: 字符串参数范围: 0-10000|该参数用于表示N15会话的主要内容。




[](None)命令举例 


`
查询用户类型为MSISDN，用户号码为123456789012346的N15会话详细信息。
SHOW_SESSION:SESSIONTYPE="N15Sess",USERKEYTYPE="MSISDN",USERKEY="123456789012346"

(No.1) : SHOW_SESSION:SESSIONTYPE="N15Sess",USERKEYTYPE="MSISDN",USERKEY="123456789012346"
-----------------Npcf_SMPolicyControl_0----------------
会话信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---------------------------------------------------------------------------------------
------------N15 Session:sessionHashAB: 7683984993129622459 begin------------
user key type         :PCF_USER_TYPE_MSISDN (2)
user key length  : 15
session id       : 1098889527
user key hash    : 7683984993129622459
Access Type:3GPP_ACCESS (1)
rat type:PCF_RAT_TYPE_NR (1)
mnc              : 01
mcc              : 201
tac              : 2001
nci              : 1
dec area flag  : 0
------------N15 Session:sessionHashAB: 7683984993129622459 end------------
记录数：1
执行成功耗时: 0.128 秒

` 


### 释放N15会话(RELEASE_N15_SESSION) 
### 释放N15会话(RELEASE_N15_SESSION) 


[](None)功能说明 

该命令用于PCF主动发起释放已在线的N15会话。执行该命令后，PCF会主动发起会话释放流程，通知AMF释放N15会话（详见3GPP TS 29507-f00 4.2.4.3 Request for termination of the policy association）。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于区分待释放的会话类型。释放N15会话信息请选择N15Sess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型。可通过命令SHOW USERKEYPRI查询优先级，若第一优先级是IMSI，则该参数选IMSI，反之选MSISDN。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N15会话消息体中的supi或者gpsi字段。若USERKEYTYPE为IMSI，supi字段为“imsi-123456789012346“，则该参数填写123456789012346；若USERKEYTYPE为MSISDN，gpsi字段为“msisdn-8613800000001“，则该参数填写8613800000001
RELCAUSE|释放原因|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于表示释放原因。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|返回结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于表示释放会话的结果。




[](None)命令举例 


`
释放用户类型为IMSI，用户号码为123456789012345的N15会话。
RELEASE_N15_SESSION:SESSIONTYPE="N15Sess",USERKEYTYPE="IMSI",USERKEY="123456789012345".
` 


### 查询UE会话(SHOW_UE_SESSION) 
### 查询UE会话(SHOW_UE_SESSION) 


[](None)功能说明 

该命令用于查询UE会话详细信息，如用户号码、接入类型、用户位置信息等。当UE会话上线及更新后，可使用此命令。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: UESess|该参数用于区分查询的会话类型，UE会话信息请选择UESess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型。可通过命令SHOW USERKEYPRI查询优先级，若第一优先级是IMSI，则该参数选IMSI，反之选MSISDN。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自UE会话消息体中的supi或者gpsi字段。若USERKEYTYPE为IMSI，supi字段为“imsi-123456789012346“，则该参数填写123456789012346；若USERKEYTYPE为MSISDN，gpsi字段为“msisdn-8613800000001“，则该参数填写8613800000001




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONINFO|会话信息|参数可选性: 任选参数类型: 字符串参数范围: 0-10000|该参数用于表示UE会话的主要内容。




[](None)命令举例 


`
查询用户类型为MSISDN，用户号码为123456789012346的UE会话详细信息。
SHOW_SESSION:SESSIONTYPE="UESess",USERKEYTYPE="MSISDN",USERKEY="123456789012346"

(No.1) : SHOW_SESSION:SESSIONTYPE="UESess",USERKEYTYPE="MSISDN",USERKEY="123456789012346"
-----------------Npcf_SMPolicyControl_0----------------
会话信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
---------------------------------------------------------------------------------------
------------UE Session:sessionHashAB: 7683984993129622459 begin------------
user key         : 123456789012346
user key type         : PCF_USER_TYPE_MSISDN (2)
user key length  : 15
user key hash    : 7683984993129622459
access type         : 3GPP_ACCESS (1)
rat type         : PCF_RAT_TYPE_NR (1)
mnc              : 45
mcc              : 123
tac              : 2001
nci              : 1
------------UE Session:sessionHashAB: 7683984993129622459 end------------
记录数：1
执行成功耗时: 0.128 秒

` 


### 释放UE会话(RELEASE_UE_SESSION) 
### 释放UE会话(RELEASE_UE_SESSION) 


[](None)功能说明 

该命令用于PCF主动发起释放已在线的UE会话。执行该命令后，PCF会主动发起会话释放流程，通知AMF释放UE会话（详见3GPP TS 29507-f00 4.2.4.3 Request for termination of the policy association）。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于区分待释放的会话类型。释放UE会话信息请选择N15Sess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型。可通过命令SHOW USERKEYPRI查询优先级，若第一优先级是IMSI，则该参数选IMSI，反之选MSISDN。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自UE会话消息体中的supi或者gpsi字段。若USERKEYTYPE为IMSI，supi字段为“imsi-123456789012346“，则该参数填写123456789012346；若USERKEYTYPE为MSISDN，gpsi字段为“msisdn-8613800000001“，则该参数填写8613800000001
RELCAUSE|释放原因|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于表示释放原因。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|返回结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于表示释放会话的结果。




[](None)命令举例 


`
释放用户类型为IMSI，用户号码为123456789012345的UE会话。
RELEASE_UE_SESSION:SESSIONTYPE="UESess",USERKEYTYPE="IMSI",USERKEY="123456789012345"。
` 


### 更新N7/Gx会话(UPDATE_SESSION) 
### 更新N7/Gx会话(UPDATE_SESSION) 


[](None)功能说明 

该命令用于PCF主动对在线的N7或Gx会话发起更新。执行该命令后，PCF会主动发起会话更新流程，通知SMF更新N7或者Gx会话。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于区分待更新的会话类型。如更新N7会话信息请选择N7Sess，如更新Gx会话信息请选择GxSess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型，取自N7会话消息体中SUPI或者GPSI字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如N7会话消息体中SUPI的值为“imsi-123456789012345“，则该参数选择IMSI。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N7或Gx会话消息体中SUPI或者GPSI字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如用户标识类型设置为IMSI，N7会话消息体中SUPI的值为“imsi-123456789012345“，则该参数填写123456789012345。
SESSIONID|会话ID|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于表示N7或Gx会话的会话ID，当前版本暂未支持使用此字段。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|返回结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|执行更新N7/Gx会话命令后系统返回的N7/Gx会话更新结果。




[](None)命令举例 


`
更新用户类型为IMSI，用户号码为123456789012345的N7会话。

(No.3) : UPDATE_SESSION:SESSIONTYPE="N7Sess",USERKEYTYPE="IMSI",USERKEY="123456789012345"
-----------------Npcf_SMPolicyControl_0----------------
会话信息
success!
记录数：1
执行成功耗时: 0.071 秒

` 


### 更新N15会话(UPDATE_N15_SESSION) 
### 更新N15会话(UPDATE_N15_SESSION) 


[](None)功能说明 

该命令用于PCF主动对在线的N15会话发起更新。执行该命令后，PCF会主动发起会话更新流程，通知AMF更新N15会话（详见3GPP TS 29507-f00 4.2.4.2 Policy update notification）。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于区分待更新的会话类型。更新N15会话信息请选择N15Sess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型。可通过命令SHOW USERKEYPRI查询优先级，若第一优先级是IMSI，则该参数选IMSI，反之选MSISDN。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N15会话消息体中的supi或者gpsi字段。若USERKEYTYPE为IMSI，supi字段为“imsi-123456789012346“，则该参数填写123456789012346；若USERKEYTYPE为MSISDN，gpsi字段为“msisdn-8613800000001“，则该参数填写8613800000001




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|返回结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于表示更新会话的结果。




[](None)命令举例 


`
更新用户类型为IMSI，用户号码为123456789012345的N15会话。

(No.3) : UPDATE_N15_SESSION:SESSIONTYPE=""N15Sess"",USERKEYTYPE=""IMSI"",USERKEY=""123456789012345""
-----------------Npcf_SMPolicyControl_0----------------
会话信息                                                      
--------------------------------------------------------------
send n15 session udpate notify success.Start Rcp update flow. 
--------------------------------------------------------------
记录数：1
执行成功耗时: 0.071 秒

` 


### 更新UE会话(UPDATE_UE_SESSION) 
### 更新UE会话(UPDATE_UE_SESSION) 


[](None)功能说明 

该命令用于PCF主动对在线的UE会话发起更新。执行该命令后，PCF会主动发起会话更新流程，通知AMF更新UE会话（详见3GPP TS 29507-f00 4.2.4.2 Policy update notification）。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SESSIONTYPE|会话类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于区分待更新的会话类型。更新UE会话信息请选择UESess。
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型。可通过命令SHOW USERKEYPRI查询优先级，若第一优先级是IMSI，则该参数选IMSI，反之选MSISDN。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自UE会话消息体中的supi或者gpsi字段。若USERKEYTYPE为IMSI，supi字段为“imsi-123456789012346“，则该参数填写123456789012346；若USERKEYTYPE为MSISDN，gpsi字段为“msisdn-8613800000001“，则该参数填写8613800000001




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|返回结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于表示更新会话的结果。




[](None)命令举例 


`
更新用户类型为IMSI，用户号码为123456789012345的UE会话。

(No.3) : UPDATE_UE_SESSION:SESSIONTYPE="UESess",USERKEYTYPE="IMSI",USERKEY="123456789012345"
-----------------Npcf_SMPolicyControl_0----------------
会话信息                                                      
--------------------------------------------------------------
send ue session udpate notify success.Start Rcp update flow. 
--------------------------------------------------------------
记录数：1
执行成功耗时: 0.071 秒


` 


### 静默释放用户(REL_USER_SLIENTLY) 
### 静默释放用户(REL_USER_SLIENTLY) 


[](None)功能说明 

该命令用于在测试场景下，PCF主动对在线的用户发起静默释放。执行该命令后，系统会释放用户。 


[](None)注意事项 

该人机命令释放用户不会触发离线通知消息，仅测试场景使用。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示要释放的用户类型。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示要释放的用户标识。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|返回结果|参数可选性: 必选参数类型: 字符串参数范围: 1-30720|执行释放会话命令后系统返回的释放用户结果。




[](None)命令举例 


`
释放用户类型为IMSI，用户号码为123456789012345的用户。


(No.4) : REL_USER_SLIENTLY:USERKEYTYPE="IMSI",USERKEY="123456789012345"
-----------------Npcf_SMPolicyControl_0----------------
返回结果                  
--------------------------
release user successfully 
--------------------------
记录数：1
执行成功开始时间:2021-03-10 16:51:54 耗时: 0.134秒


` 


### 查询通知(SHOW_SMS_EMAIL) 
### 查询通知(SHOW_SMS_EMAIL) 


[](None)功能说明 

该命令用于查询用户短信签约的具体信息。当用户获取签约后，可使用此命令查看。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERKEYTYPE|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示会话所属的用户号码类型，取自N7或N15会话消息体中supi字段或gpsi字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如N7会话消息体中supi的值为“imsi-123456789012345“，则该参数选择IMSI。
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示会话所属的用户号码，取自N7或N15会话消息体中supi字段或gpsi字段，或者Gx会话消息体中的IMSI字段或MSISDN字段。比如用户标识类型选择“IMSI”，N7会话supi的值为“imsi-123456789012345“，则该参数填写123456789012345。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|短信信息|参数可选性: 任选参数类型: 字符串参数范围: 0-10000|执行查询签约命令后系统返回的用户短信信息。




[](None)命令举例 


`
查询MSISDN标识为2234567890129的用户短信相关数据信息。
SHOW_SMS_EMAIL:USERKEYTYPE="MSISDN",USERKEY="2234567890129"
` 


### 查询拥塞信息(SHOW_CONGESTION_INFO) 
### 查询拥塞信息(SHOW_CONGESTION_INFO) 


[](None)功能说明 

该命令用于查询某一小区的拥塞信息。 

当需要查询PCF保存的某小区的拥塞信息时使用该命令。 

执行该命令后，会显示小区的拥塞信息，包括拥塞类型、拥塞等级、有效期。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LOCATIONTYPE|位置类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于表示位置类型。数据来源：本端规划。配置原则：可选以下两个类型：NCGI表示位置信息为5G网络格式，ECGI表示位置信息为4G网络格式。
MCC|MCC|参数可选性: 必选参数类型: 字符串参数范围: 3-3|参数作用：该参数用于配置小区的MCC地址。数据来源：本端规划。配置原则：只能是数字串，如：086。由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。
MNC|MNC|参数可选性: 必选参数类型: 字符串参数范围: 2-3|参数作用：该参数用于配置小区的MNC地址。数据来源：本端规划。配置原则：只能是数字串，如：39。该参数用于表示用户位置，由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。
CELLID|CELLID|参数可选性: 必选参数类型: 字符串参数范围: 0-10|参数作用：该参数用于配置小区的ID。数据来源：本端规划。配置原则：根据规划的小区的ID填写。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CONGESTION_INFO|拥塞信息|参数可选性: 任选参数类型: 字符串参数范围: 0-100000|该参数用于表示保存至PCF本地的拥塞信息，包括拥塞类型、拥塞等级、有效期等信息。若PCF未保存对应小区的拥塞信息，会提示当前PCF中没有保存的拥塞信息。




[](None)命令举例 


`
查询位置类型为NCGI，MCC为123，MNC为456，小区编号为1的拥塞信息信息。
SHOW_CONGESTION_INFO:LOCATIONTYPE="NCGI",MCC="123",MNC="456",CELLID="1";

(No.1):SHOW_CONGESTION_INFO:LOCATIONTYPE="NCGI",MCC="123",MNC="456",CELLID="1";
-----------------Npcf_SMPolicyControl_0----------------

拥塞信息
------------congestion info begin------------
congType:0,congLevel:4
starttime : 2022-9-19 T 19:45:0
stoptime  : 2022-9-19 T 20:00:0
-------------congestion info end-------------
记录数：  1

` 


### 清除拥塞信息(CLEAR_CONGESTION_INFO) 
### 清除拥塞信息(CLEAR_CONGESTION_INFO) 


[](None)功能说明 

小心：该命令属于高危命令，该操作将删除PCF本地保存的所有拥塞信息。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 

该命令用于PCF主动清除本地存储的拥塞信息。 

当PCF需要在下个周期更新所有拥塞信息时使用该命令。 

执行该命令后，PCF会清除本地存储的拥塞信息，当新用户上线或下个周期时，会重新获取用户所在小区的拥塞信息。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于表示清除拥塞信息的结果。




[](None)命令举例 


`
清除PCF本地存储的所有拥塞信息。
CLEAR_CONGESTION_INFO:
` 


## 策略数据管理 
## 策略数据管理 


[](None)背景知识 


PCF网元的策略数据需要通过GUI配置提交到业务前台，本功能用于查询业务前台加载的策略数据和各类策略数据的记录数量。 

当PCF网元实际下发的策略规则与预期下发的策略规则不一致时，可以使用本组命令查询在PCF网元业务前台加载的策略数据，然后与GUI中配置的策略数据进行比较，从而判断两者是否一致。 

当两者不一致时，说明GUI中配置的策略数据没有成功提交到PCF网元的业务前台，需要查看是否存在规则相关告警。消除规则告警后重新提交策略规则，直到PCF网元业务前台的策略数据与GUI中配置的策略数据达到一致。 




[](None)功能说明 


本功能用于查询PCF网元上已经加载的策略数据以及各类策略数据的记录数。 




[](None)子主题： 






### 查询策略数据(SHOW_GUI_DATA) 
### 查询策略数据(SHOW_GUI_DATA) 


[](None)功能说明 

该命令用于查询已经加载到PCF业务前台的策略数据。 

当策略决策结果与预期存在差异时，需要先确认PCF业务前台的策略数据是否与网管上配置的策略数据一致。使用该命令，可以查看PCF业务前台当前使用的策略数据。 

当记录ID为0值时，表示查询指定策略数据类型的所有记录内容；当记录ID为非0值时，表示查询指定策略数据类型中指定ID的记录内容。 


[](None)注意事项 

该命令需要指定待查询的策略数据类型以及记录ID。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
TBLTYPE|策略数据类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数表示待查询的策略数据类型。该参数可支持以下类型：场景、规则、动作、条件、时段、自定义策略变量、通知内容、普通用量、虚拟用量、金额、费率曲线、返还算法。
RECORDID|记录ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535默认值: 0|该参数表示待查询的策略数据的记录ID。当记录ID为0值时，表示查询所有的指定类型的记录内容。当记录ID为非0值时，表示查询该ID的记录内容。记录ID可以从其他关联的查询内容中获取。例如，在场景记录内容中可以查看到关联的规则ID(RuleId)、动作ID(ActionId)、条件ID(CondId)。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-10000|该参数表示在PCF业务前台加载的，指定策略数据类型和记录ID的查询结果。




[](None)命令举例 


`
查询PCF业务前台，ID为1的规则内容。
SHOW_GUI_DATA:TBLTYPE="RULE",RECORDID=1;

(No.1) : SHOW_GUI_DATA:TBLTYPE="RULE",RECORDID=1
-----------------Npcf_SMPolicyControl_0----------------
操作结果
----------------------------------------------------------------------------------------------
[RuleId:1, RuleName:R_1_100001BJL_001_01] Log Flag:0, RulePri:2, RuleType:DPI Gx Session Dec, ActionType:|PARASET, ActionNum:1.
CondExp:(%1|%2)&~%3, CondExpType:3(0-One cond;1-DNF;2-CNF;3-Other)
  [CondId:2, CondIdx:1] CondServkey(Id:0x1306, Name:RAT) = AVP is 1000(CondAvpIdx=2); 
  [CondId:3, CondIdx:2] CondServkey(Id:0x1306, Name:RAT) = AVP is 1004(CondAvpIdx=3); 
  [CondId:1, CondIdx:0] CondServkey(Id:0x209, Name:APN) in AVP is ims(CondAvpIdx=0); AVP is ims1(CondAvpIdx=1); 
[ActionId:13, ActionName:A_1_100001_BJL_01_128kbps] ActionIdx:12, ActionType:512, ParaNum:3, 
----------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-03-17 13:56:58 耗时: 0.108秒

` 


### 查询规则表容量(SHOW_RULE_TBL_CAP) 
### 查询规则表容量(SHOW_RULE_TBL_CAP) 


[](None)功能说明 

该命令用于查询PCF网元业务前台的策略数据记录数。 

如果需要配置大量策略数据，可以使用该命令，查看当前的业务版本是否有足够的空闲容量。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-10000|该参数表示查询策略数据表容量的结果。table_name：表名称。例如，DM_Role表示场景表。sys_max_cap：表的最大记录数。例如，DM_Role（场景表）的表的最大记录数为5000。used_cap：已经保存的记录数。table_content：表占据的内存，单位BYTE。某个表的策略数据查询结果中，sys_max_cap与used_cap的差表示该表可以继续配置的策略数据记录数。当某个表需要配置的的策略数据数量大于该表可以继续配置的策略数据记录数时，PCF网元将无法加载新增的策略数据。




[](None)命令举例 


`
查询策略数据表容量。
SHOW_RULE_TBL_CAP; 

(No.1) : SHOW_RULE_TBL_CAP:
-----------------Npcf_SMPolicyControl_0----------------
操作结果
-----------------------------------------------------------------------

 show_rule_table_cap:                    
  table_name           sys_max_cap        used_cap    table_content
  DM_Role_Tree             100              0                1904
  DM_Role                 5000              0             8700003
  DM_Rule                10000              0            14060006
  DM_Action              20000              0            12920004
  DM_Para                20000              0             3200004
  DM_Cond                 6000              0              426004
  DM_CondValue           48000              0             7488004
  DM_RuleTime             1000              0               84004
  DM_Note_Cont            2000              0            16952004
  DM_DyUsage              3000              0             6768004
  DM_VirUsage              200              0             1909404
  DM_RollOver              200              0              268804
  DM_Custom               3000              0             4038004
  DM_RateCurve             300              0               43204
  DM_Fee                   200              0               27204
  DM_CellFee              6000              0              144004 
-----------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-03-17 11:32:35 耗时: 0.108秒

` 


## 系统管理 
## 系统管理 


[](None)背景知识 


在运维等场景时，PCF经常因为无法获取到系统历史记录，使得故障定位难度加大。 




[](None)功能说明 


对外提供查询网元当前上电状态、所有PCM SC系统日志和Special PCM SC系统历史记录等命令。 




[](None)子主题： 






### 查询所有PCM SC系统日志(SHOW_SYSINFO_LOG_ALL) 
### 查询所有PCM SC系统日志(SHOW_SYSINFO_LOG_ALL) 


[](None)功能说明 

该命令查询PCF所有PCM SC的系统日志用于故障定位。查询内容包括NRF注册历史记录，曾经作为Special PCM SC的切换记录和系统状态变更记录等。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LOGALL|所有PCM SC系统日志|参数可选性: 任选参数类型: 字符串参数范围: 0-63000|该参数用于表示查询到的所有PCM SC系统日志。




[](None)命令举例 


`
查询所有PCM SC系统日志。
SHOW_SYSINFO_LOG_ALL

(No.1) : SHOW_SYSINFO_LOG_ALL:
-----------------PCF_139/Npcf_SMPolicyControl_0----------------
所有PCM SC系统日志                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
-----------------------------------------------------------------------------------------------------------
vruname :vru-npcf-smpolicycontrol-0
--------PcfRegNrfLog--------
Time                            ReqType   NfStatus       ReqSeqNo       AckTime                         AckSeqNo       Result         RspCode 
[2022-02-19T13:54:45+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:45+08:00]     c09690d7db84   SUCCESS        204
[2022-02-19T13:54:35+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:41+08:00]     c09690d7db84   FAIL           408
[2022-02-19T13:54:25+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:31+08:00]     c09690d7db84   FAIL           408
[2022-02-19T13:54:15+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:21+08:00]     c09690d7db84   FAIL           408
[2022-02-19T13:54:05+08:00]     DeReg                    c09690d7db84   [0000-00-00T00:00:00+08:00]                    NO_RSP         0
[2022-02-19T13:53:55+08:00]     DeReg                    c09690d7db84   [0000-00-00T00:00:00+08:00]                    NO_RSP         0
[2022-02-19T13:52:05+08:00]     Reg       REGISTERED     10             [2022-02-19T13:52:05+08:00]     10             SUCCESS        201
[2022-02-19T13:46:15+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:46:15+08:00]     c09690d7db84   SUCCESS        204
[2022-02-19T13:45:35+08:00]     Reg       REGISTERED     9              [2022-02-19T13:45:35+08:00]     9              SUCCESS        201
[2022-02-19T13:45:15+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:45:15+08:00]     c09690d7db84   SUCCESS        204
--------PcfSpecialScChgLog--------
Time                            Event(1:ChgToNonSpecial  2:ChgToSpecial)
[2022-02-19T13:25:15+08:00]    2
--------PcfSysStatusChgLog--------
Time                            ChangeSource OriSysStatus NewSysStatus RegStatus PowerOnStatus  CfgStatus LinkStatus
[2022-02-19T13:44:19+08:00]     EM CONFIG    WORK         WORK         WORK      WORK           WORK      WORK      
[2022-02-19T13:44:09+08:00]     EM CONFIG    STANDBY      STANDBY      STANDBY   WORK           STANDBY   WORK      
[2022-02-19T13:43:59+08:00]     EM CONFIG    WORK         WORK         WORK      WORK           WORK      WORK      
[2022-02-19T13:43:21+08:00]     EM CONFIG    STANDBY      STANDBY      STANDBY   WORK           STANDBY   WORK      
[2022-02-19T13:42:47+08:00]     POWER ON     WORK         WORK         WORK      WORK           WORK      WORK      
 
vruname :vru-npcf-smpolicycontrol-1
--------PcfRegNrfLog--------
Time                            ReqType   NfStatus       ReqSeqNo       AckTime                         AckSeqNo       Result         RspCode 
--------PcfSpecialScChgLog--------
Time                            Event(1:ChgToNonSpecial  2:ChgToSpecial)
--------PcfSysStatusChgLog--------
Time                            ChangeSource OriSysStatus NewSysStatus RegStatus PowerOnStatus  CfgStatus LinkStatus
[2022-02-19T13:44:20+08:00]     EM CONFIG    WORK         WORK         WORK      WORK           WORK      WORK      
[2022-02-19T13:44:10+08:00]     EM CONFIG    STANDBY      STANDBY      STANDBY   WORK           STANDBY   WORK      
[2022-02-19T13:44:00+08:00]     EM CONFIG    WORK         WORK         WORK      WORK           WORK      WORK      
[2022-02-19T13:43:22+08:00]     EM CONFIG    STANDBY      STANDBY      STANDBY   WORK           STANDBY   WORK
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
--------------------------------------------------------------------------------------------------------
记录数：2

` 


### 查询Special PCM SC系统日志(SHOW_SYSINFO_LOG_SPECIAL) 
### 查询Special PCM SC系统日志(SHOW_SYSINFO_LOG_SPECIAL) 


[](None)功能说明 

该命令查询PCF当前的SPECIAL PCM SC系统日志用于故障定位。查询内容包括当前SPECIAL PCM SC 注册NRF历史记录，当前Special PCM SC切换记录和系统状态变更记录等。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LOGSPECIAL|SPECIAL PCM SC系统日志|参数可选性: 必选参数类型: 字符串参数范围: 0-63000|该参数用于表示查询到的Special PCM SC系统日志。




[](None)命令举例 


`
查询SPECIAL PCM SC系统日志。
SHOW_SYSINFO_LOG_SPECIAL

(No.27) : SHOW_SYSINFO_LOG_SPECIAL:
-----------------PCF_139/Npcf_SMPolicyControl_0----------------
SPECIAL PCM SC系统日志                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----------------------------------------------------------------------------------------------------
vruname :vru-npcf-smpolicycontrol-0
--------PcfRegNrfLog--------
Time                            ReqType   NfStatus       ReqSeqNo       AckTime                         AckSeqNo       Result         RspCode 
[2022-02-19T13:54:45+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:45+08:00]     c09690d7db84   SUCCESS        204
[2022-02-19T13:54:35+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:41+08:00]     c09690d7db84   FAIL           408
[2022-02-19T13:54:25+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:31+08:00]     c09690d7db84   FAIL           408
[2022-02-19T13:54:15+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:54:21+08:00]     c09690d7db84   FAIL           408
[2022-02-19T13:54:05+08:00]     DeReg                    c09690d7db84   [0000-00-00T00:00:00+08:00]                    NO_RSP         0
[2022-02-19T13:53:55+08:00]     DeReg                    c09690d7db84   [0000-00-00T00:00:00+08:00]                    NO_RSP         0
[2022-02-19T13:52:05+08:00]     Reg       REGISTERED     10             [2022-02-19T13:52:05+08:00]     10             SUCCESS        201
[2022-02-19T13:46:15+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:46:15+08:00]     c09690d7db84   SUCCESS        204
[2022-02-19T13:45:35+08:00]     Reg       REGISTERED     9              [2022-02-19T13:45:35+08:00]     9              SUCCESS        201
[2022-02-19T13:45:15+08:00]     DeReg                    c09690d7db84   [2022-02-19T13:45:15+08:00]     c09690d7db84   SUCCESS        204
--------PcfSpecialScChgLog--------
Time                            Event(1:ChgToNonSpecial  2:ChgToSpecial)
--------PcfSysStatusChgLog--------
Time                            ChangeSource OriSysStatus NewSysStatus RegStatus PowerOnStatus  CfgStatus LinkStatus
[2022-02-19T13:44:19+08:00]     EM CONFIG    WORK         WORK         WORK      WORK           WORK      WORK      
[2022-02-19T13:44:09+08:00]     EM CONFIG    STANDBY      STANDBY      STANDBY   WORK           STANDBY   WORK      
[2022-02-19T13:43:59+08:00]     EM CONFIG    WORK         WORK         WORK      WORK           WORK      WORK      
[2022-02-19T13:43:21+08:00]     EM CONFIG    STANDBY      STANDBY      STANDBY   WORK           STANDBY   WORK      
[2022-02-19T13:42:47+08:00]     POWER ON     WORK         WORK         WORK      WORK           WORK      WORK 
--------------------------------------------------------------------------------------------------
记录数：1


` 


### 查询系统上电状态(SHOW_NF_POWERON_STATE) 
### 查询系统上电状态(SHOW_NF_POWERON_STATE) 


[](None)功能说明 

该命令用于查询当前系统上电状态。 

当系统重启之后需要查看上电状态时，使用该命令。 

该命令配置成功后，可以查看到当前系统上电状态。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|系统上电状态|参数可选性: 必选参数类型: 字符串参数范围: 0-1200|该参数用于表示系统当前上电状态。参数选项的含义是：CHECKING CDB!：表示系统上电状态处于检测CDB链路状态。CHECKING NRF!：表示系统上电状态处于向NRF注册状态。CHECKING DIAMETER LINK!：表示系统上电状态处于检测Diameter链路状态。WORKING!：表示系统上电状态处于工作态。ABNORMAL!：表示系统上电状态异常。




[](None)命令举例 


`
查询系统上电状态。
SHOW_NF_POWERON_STATE: 

(No.1) : SHOW_NF_POWERON_STATE:
-----------------Npcf_SMPolicyControl_0----------------
系统上电状态 
-------------
WORKING!     
-------------
记录数：1

` 


### 设置系统上电状态(SET_NF_POWERON_STATE) 
### 设置系统上电状态(SET_NF_POWERON_STATE) 


[](None)功能说明 

该命令用于配置PCF系统内部上电状态。 

当需要根据系统上电状态、业务工作情况强制设置系统上电状态为工作态时，使用该命令。 

该命令配置成功后，系统上电状态处于工作态，系统开始对外提供服务。 


[](None)注意事项 

在业务无法正常上电的情况下，如果不配置，则PCF一直无法对外提供服务。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFPOWERONSTATE|系统上电状态|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示当系统上电状态处于非工作态，并且需要配置上电状态为工作态时，配置该参数。参数选项的含义是：WORK：使得系统上电状态为工作态。该选择场景下，系统上电状态如果非工作态则会强制设为工作态。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|系统上电状态|参数可选性: 必选参数类型: 字符串参数范围: 0-1200|该参数用于配置上电状态为工作态的执行结果。参数选项的含义是：SUCCESS!：表示系统上电状态成功设置为工作态。The system is in this status!：表示系统上电状态已处于工作态，不需要重复设置。




[](None)命令举例 


`
配置系统上电状态为工作态。
SET_NF_POWERON_STATE:NFPOWERONSTATE="WORK" 

(No.1) : SET_NF_POWERON_STATE:NFPOWERONSTATE="WORK"
-----------------Npcf_SMPolicyControl_0----------------
系统上电状态                  
------------------------------
SUCCESS!
------------------------------
记录数：1

` 


## PPM数据管理 
## PPM数据管理 


[](None)背景知识 


PPM系统是中国电信套餐产品生命周期管理的核心系统，负责套餐产品、流量识别规则等相关信息的统一管控、配置及分发。套餐产品规格数据，系统级规则数据由PPM完成配置流程的管控与维护，包括数据的生成、修改、删除。PPM完成数据的配置后，将套餐产品规格数据、系统级规则数据同步给PCF，PCF将相关数据转化为网元内部配置信息。 




[](None)功能说明 


在用户上网过程中，PCF依据系统级规则数据、销售品规格数据生成该用户特有的控制策略。 




[](None)子主题： 






### PPM RG 管理 
### PPM RG 管理 


[](None)背景知识 


PPM系统是中国电信套餐产品生命周期管理的核心系统，负责套餐产品、流量识别规则等相关信息的统一管控、配置及分发。套餐产品规格数据，系统级规则数据由PPM完成配置流程的管控与维护，包括数据的生成、修改、删除。PPM完成数据的配置后，将套餐产品规格数据、系统级规则数据同步给PCF，PCF将相关数据转化为网元内部配置信息。 




[](None)功能说明 


在用户上网过程中，PCF依据系统级规则数据、销售品规格数据生成该用户特有的控制策略。 




[](None)子主题： 






#### 新增PPM信息(ADD PPMRG) 
#### 新增PPM信息(ADD PPMRG) 


[](None)功能说明 

该命令用于新增PPM费率组信息。当需要PCF对不同的套餐下发相应的费率组（对应PCF系统中的预定义规则名）时，使用该命令。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动配置使用，其他情况该表的新增由业务内部触发，如果没有特殊要求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
prodofferid|销售品ID|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐标识。
ratinggroup|费率组|参数可选性: 必选参数类型: 数字|该参数用于配置费率组，对应PCF系统中的预定义规则名。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
prodofferid|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐标识。
ratinggroup|费率组|参数可选性: 任选参数类型: 数字|该参数用于配置费率组，对应PCF系统中的预定义规则名。




[](None)命令举例 


`
增加记录，销售品ID为1，费率组为2。
ADD PPMRG:PRODOFFERID="1",RATINGGROUP=2
` 


#### 删除PPM信息(DEL PPMRG) 
#### 删除PPM信息(DEL PPMRG) 


[](None)功能说明 

该命令用于删除PPM费率组信息。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动配置使用，其他情况该表的删除由业务内部触发，如果没有特殊要求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
prodofferid|销售品ID|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐标识。
ratinggroup|费率组|参数可选性: 任选参数类型: 数字|该参数用于配置费率组，对应PCF系统中的预定义规则名。




[](None)命令举例 


`
删除销售品ID为1，费率组为2的记录。
DEL PPMRG:PRODOFFERID="1",RATINGGROUP=2
` 


#### 查询PPM信息(SHOW PPMRG) 
#### 查询PPM信息(SHOW PPMRG) 


[](None)功能说明 

该命令用于查询PPM费率组信息。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
prodofferid|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐标识。
ratinggroup|费率组|参数可选性: 任选参数类型: 数字|该参数用于配置费率组，对应PCF系统中的预定义规则名。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
prodofferid|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐标识。
ratinggroup|费率组|参数可选性: 任选参数类型: 数字|该参数用于配置费率组，对应PCF系统中的预定义规则名。




[](None)命令举例 


`
查询费率组信息。
SHOW PPMRG
` 


### PPM PCSRATE 管理 
### PPM PCSRATE 管理 


[](None)背景知识 


PPM系统是中国电信套餐产品生命周期管理的核心系统，负责套餐产品、流量识别规则等相关信息的统一管控、配置及分发。套餐产品规格数据，系统级规则数据由PPM完成配置流程的管控与维护，包括数据的生成、修改、删除。PPM完成数据的配置后，将套餐产品规格数据、系统级规则数据同步给PCF，PCF将相关数据转化为网元内部配置信息。 




[](None)功能说明 


在用户上网过程中，PCF依据系统级规则数据、销售品规格数据生成该用户特有的控制策略。 




[](None)子主题： 






#### 新增PCSRATE信息(ADD PCSRATE) 
#### 新增PCSRATE信息(ADD PCSRATE) 


[](None)功能说明 

该命令用于新增策略状态组。当PCF需要根据策略计数器的不同状态对会话带宽进行限速时，使用该命令。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动触发使用；其他情况时，由新增的业务内部自动触发。如果没有特殊要求，请不要修改。 

策略计数器标识需要在PKGPCID配置中存在，否则该配置不生效，可以使用SHOW PKGPCID查看。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
POL_COUNTER_ID|策略计数器标识|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。
POL_COUNTER_STATUS|策略状态|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于标识策略状态，对应PCF系统中从Sy/N28接口获取的PCS。
RATE|速率值|参数可选性: 必选参数类型: 字符串参数范围: 1-18|该参数用于配置会话带宽的速率值。通过速率值（RATE）×速率换算单位（RATE_UNIT）获取到速率单位为bit/s的速率信息，如1Mbps=1(RATE)× 1048576(RATE_UNIT) 。
RATE_UNIT|速率换算单位|参数可选性: 必选参数类型: 数字|该参数用于配置会话带宽的速率换算单位。通过速率值（RATE）×速率换算单位（RATE_UNIT）获取到速率单位为bit/s的速率信息，如1Mbps=1(RATE)× 1048576(RATE_UNIT) 。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
POL_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。
POL_COUNTER_STATUS|策略状态|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略状态，对应PCF系统中从Sy/N28接口获取的PCS。
RATE|速率值|参数可选性: 任选参数类型: 字符串参数范围: 1-18|该参数用于配置会话带宽的速率值。通过速率值（RATE）×速率换算单位（RATE_UNIT）获取到速率单位为bit/s的速率信息，如1Mbps=1(RATE)× 1048576(RATE_UNIT) 。
RATE_UNIT|速率换算单位|参数可选性: 任选参数类型: 数字|该参数用于配置会话带宽的速率换算单位。通过速率值（RATE）×速率换算单位（RATE_UNIT）获取到速率单位为bit/s的速率信息，如1Mbps=1(RATE)× 1048576(RATE_UNIT) 。




[](None)命令举例 


`
增加策略状态组，策略计数器标识为1，策略状态为2，速率值1024，速率换算单位1024。
ADD PCSRATE:POL_COUNTER_ID="1",POL_COUNTER_STATUS="2",RATE="1024",RATE_UNIT=1024
` 


#### 删除PCSRATE信息(DEL PCSRATE) 
#### 删除PCSRATE信息(DEL PCSRATE) 


[](None)功能说明 

该命令用于删除策略状态组。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动使用，其他情况，该表的删除由业务内部触发，如果没有特殊要求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
POL_COUNTER_ID|策略计数器标识|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。
POL_COUNTER_STATUS|策略状态|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略状态，对应PCF系统中从Sy/N28接口获取的PCS。




[](None)命令举例 


`
删除策略计数器标识为1，策略状态为2的策略状态组。
DEL PCSRATE:POL_COUNTER_ID="1",POL_COUNTER_STATUS="2"
` 


#### 查询PCSRATE信息(SHOW PCSRATE) 
#### 查询PCSRATE信息(SHOW PCSRATE) 


[](None)功能说明 

该命令用于查询策略状态组。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
POL_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。
POL_COUNTER_STATUS|策略状态|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略状态，对应PCF系统中从Sy/N28接口获取的PCS。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
POL_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。
POL_COUNTER_STATUS|策略状态|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略状态，对应PCF系统中从Sy/N28接口获取的PCS。
RATE|速率值|参数可选性: 任选参数类型: 字符串参数范围: 1-18|该参数用于配置会话带宽的速率值。通过速率值（RATE）×速率换算单位（RATE_UNIT）获取到速率单位为bit/s的速率信息，如1Mbps=1(RATE)× 1048576(RATE_UNIT) 。
RATE_UNIT|速率换算单位|参数可选性: 任选参数类型: 数字|该参数用于配置会话带宽的速率换算单位。通过速率值（RATE）×速率换算单位（RATE_UNIT）获取到速率单位为bit/s的速率信息，如1Mbps=1(RATE)× 1048576(RATE_UNIT) 。




[](None)命令举例 


`
查询策略状态组信息。
SHOW PCSRATE
` 


### PPM PKGPCID 管理 
### PPM PKGPCID 管理 


[](None)背景知识 


PPM系统是中国电信套餐产品生命周期管理的核心系统，负责套餐产品、流量识别规则等相关信息的统一管控、配置及分发。套餐产品规格数据，系统级规则数据由PPM完成配置流程的管控与维护，包括数据的生成、修改、删除。PPM完成数据的配置后，将套餐产品规格数据、系统级规则数据同步给PCF，PCF将相关数据转化为网元内部配置信息。 




[](None)功能说明 


在用户上网过程中，PCF依据系统级规则数据、销售品规格数据生成该用户特有的控制策略。 




[](None)子主题： 






#### 新增PKGPCID信息(ADD PKGPCID) 
#### 新增PKGPCID信息(ADD PKGPCID) 


[](None)功能说明 

该命令用于新增PKGPCID信息。当PCF需要配置销售品ID（对应PCF系统中的套餐ID）相关信息时，使用该命令。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动配置使用，其他情况该表的新增由业务内部触发，如果没有特殊要求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROD_OFFER_ID|销售品ID|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
POLICY_COUNTER_ID|策略计数器标识|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROD_OFFER_ID|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
PROD_OFFER_NAME|销售品名称|参数可选性: 任选参数类型: 字符串参数范围: 1-250|该参数用于配置销售品名称，对应PCF系统中的套餐名称。
POLICY_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。




[](None)命令举例 


`
增加销售品规格数据，销售品ID为1，销售品名称为test，策略计数器标识为2。
ADD PKGPCID:PROD_OFFER_ID="1",PROD_OFFER_NAME="test",POLICY_COUNTER_ID="2"
` 


#### 删除PKGPCID信息(DEL PKGPCID) 
#### 删除PKGPCID信息(DEL PKGPCID) 


[](None)功能说明 

该命令用于删除PKGPCID信息。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动配置使用，其他情况该表的删除由业务内部触发，如果没有特殊要求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROD_OFFER_ID|销售品ID|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
POLICY_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。




[](None)命令举例 


`
删除销售品ID为1，策略计数器标识为2的销售品规格数据。
DEL PKGPCID:PROD_OFFER_ID="1",POLICY_COUNTER_ID="2"
` 


#### 查询PKGPCID信息(SHOW PKGPCID) 
#### 查询PKGPCID信息(SHOW PKGPCID) 


[](None)功能说明 

该命令用于查询PKGPCID信息。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROD_OFFER_ID|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
POLICY_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROD_OFFER_ID|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
PROD_OFFER_NAME|销售品名称|参数可选性: 任选参数类型: 字符串参数范围: 1-250|该参数用于配置销售品名称，对应PCF系统中的套餐名称。
POLICY_COUNTER_ID|策略计数器标识|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于标识策略计数器，对应PCF系统中从Sy/N28接口获取的PCID。




[](None)命令举例 


`
查询销售品规格数据。
SHOW PKGPCID
` 


### PPM PKGINFO 管理 
### PPM PKGINFO 管理 


[](None)背景知识 


PPM系统是中国电信套餐产品生命周期管理的核心系统，负责套餐产品、流量识别规则等相关信息的统一管控、配置及分发。套餐产品规格数据，系统级规则数据由PPM完成配置流程的管控与维护，包括数据的生成、修改、删除。PPM完成数据的配置后，将套餐产品规格数据、系统级规则数据同步给PCF，PCF将相关数据转化为网元内部配置信息。 




[](None)功能说明 


在用户上网过程中，PCF依据系统级规则数据、销售品规格数据生成该用户特有的控制策略。 




[](None)子主题： 






#### 新增PPMPKGINFO信息(ADD PPMPKGINFO) 
#### 新增PPMPKGINFO信息(ADD PPMPKGINFO) 


[](None)功能说明 

该命令用于新增销售品ID信息。当需要配置销售品ID（对应PCF系统中的套餐ID）相关信息时，使用该命令。该命令执行成功后，PCF可以根据销售品ID下发策略规则。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动配置使用，其他情况该表的新增由业务内部触发，如果没有特殊要求，请不要执行该命令。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PPM_PKG_ID|销售品ID|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
PPM_PKG_NAME|销售品名称|参数可选性: 必选参数类型: 字符串参数范围: 1-250|该参数用于配置销售品名称，对应PCF系统中的套餐名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PPM_PKG_ID|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
PPM_PKG_NAME|销售品名称|参数可选性: 任选参数类型: 字符串参数范围: 1-250|该参数用于配置销售品名称，对应PCF系统中的套餐名称。




[](None)命令举例 


`
增加销售品信息，销售品ID为1，销售品名称为test。
ADD PPMPKGINFO:PPM_PKG_ID="1",PPM_PKG_NAME="test"
` 


#### 删除PPMPKGINFO信息(DEL PPMPKGINFO) 
#### 删除PPMPKGINFO信息(DEL PPMPKGINFO) 


[](None)功能说明 

该命令用于删除销售品ID信息。该命令执行成功后，PCF不会下发该销售品ID对应的策略规则。 


[](None)注意事项 

该命令主要在测试阶段或数据发生异常时，手动配置使用，其他情况该表的删除由业务内部触发，如果没有特殊要求，请不要执行该命令。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PPM_PKG_ID|销售品ID|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。




[](None)命令举例 


`
删除销售品ID为1的销售品信息。
DEL PPMPKGINFO:PPM_PKG_ID="1"
` 


#### 查询PPMPKGINFO信息(SHOW PPMPKGINFO) 
#### 查询PPMPKGINFO信息(SHOW PPMPKGINFO) 


[](None)功能说明 

该命令用于查询销售品ID信息。当需要查询当前的销售品ID信息配置时，执行该命令。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PPM_PKG_ID|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PPM_PKG_ID|销售品ID|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于标识销售品，对应PCF系统中的套餐ID。
PPM_PKG_NAME|销售品名称|参数可选性: 任选参数类型: 字符串参数范围: 1-250|该参数用于配置销售品名称，对应PCF系统中的套餐名称。




[](None)命令举例 


`
查询销售品信息。
SHOW PPMPKGINFO
` 


## 容灾管理 
## 容灾管理 


[](None)背景知识 


容灾功能是指当某个局点故障失效或承载网络中断时异地局点进行容灾业务接管的功能。即对某一PCF来说，当其发生故障时，其他PCF来接管其业务。
如果没有配置容灾功能，当局点发生故障时，可能会导致PCF和其他网元交互失败、导致用户下线，会话策略（例如忙闲切换调整带宽策略）无法及时更新、局点丢失部分用户用量等问题。 

容灾组网时，涉及到的各种信息繁多，也是故障较多的一个点。所以信息的汇总、查询、系统的运行状态等信息的查询就显得格外重要。 




[](None)功能说明 


本功能提供容灾组网时的各种信息的查询和汇总。 




[](None)子主题： 






### 查询容灾局信息(SHOW_DR_NFINFO) 
### 查询容灾局信息(SHOW_DR_NFINFO) 


[](None)功能说明 

该命令用于查询组成容灾关系的各局点的基本信息，便于及时清晰地了解各局点信息和运行情况。查询到的信息主要包括：Pool池个数、容灾模式、容灾角色、局状态、主机名、FQDN等。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|容灾局信息|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|该参数用于表示查询到的局信息，包括：Pool池个数、容灾模式、容灾角色、局状态、主机名、FQDN等。




[](None)命令举例 


`
查询容灾局信息。
SHOW_DR_NFINFO; 

SHOW_DR_NFINFO:
-----------------Npcf_SMPolicyControl_0----------------
容灾局信息

POOL:
        nf_num                          : 2
        Pool                            : [ 13 14 ]
        dr_mode                         : DR-NM
        msg_trans_mode                  : REDIRECT
        update_host                     : NO

        NF NODE Pool:
         ................................................
                nfid                    : 13(SELF)
                dr_role                 : MASTER
                status                  : WORK
                host_name               : rcp.hatt.zte.com.cn
                realm                   : hatt.zte.com.cn
                fqdn                    : pcf13.hatt.zte.com.cn
                tenant_id               : 1
                tenant_name             : tenant_1
                public_tenant_name      : tenant_2
                priority                : 1

                serv_num                : 5
                serv_type: Npcf_SMPolicyControl         priority: 1      version: v1          fqdn: pcf13.pcm.hatt.zte.com.cn         schema: http     tophide: 0
                serv_type: Npcf_AMPolicyControl         priority: 1      version: v1          fqdn: pcf13.pam.hatt.zte.com.cn         schema: http     tophide: 0
                serv_type: Npcf_UEPolicyControl         priority: 1      version: v1          fqdn: pcf13.ue.hatt.zte.com.cn          schema: http     tophide: 0
                serv_type: Npcf_PolicyAuthorization     priority: 1      version: v1          fqdn: pcf13.pau.hatt.zte.com.cn         schema: http     tophide: 0
                serv_type: NPcf                         priority: 1      version: v1          fqdn: pcf13.hatt.zte.com.cn             schema: http     tophide: 0

         ................................................

         ................................................
                nfid                    : 14
                dr_role                 : MASTER
                status                  : WORK
                host_name               : rcp1.hatt.zte.com.cn
                realm                   : hatt.zte.com.cn
                fqdn                    : pcf14.hatt.zte.com.cn
                tenant_id               : 2
                tenant_name             : tenant_2
                public_tenant_name      : tenant_2
                priority                : 1

                serv_num                : 5
                serv_type: Npcf_SMPolicyControl         priority: 1      version: v1          fqdn: pcf14.pcm.hatt.zte.com.cn         schema: http     tophide: 0
                serv_type: Npcf_AMPolicyControl         priority: 1      version: v1          fqdn: pcf14.pam.hatt.zte.com.cn         schema: http     tophide: 0
                serv_type: Npcf_UEPolicyControl         priority: 1      version: v1          fqdn: pcf14.ue.hatt.zte.com.cn          schema: http     tophide: 0
                serv_type: Npcf_PolicyAuthorization     priority: 1      version: v1          fqdn: pcf14.pau.hatt.zte.com.cn         schema: http     tophide: 0
                serv_type: NPcf                         priority: 1      version: v1          fqdn: pcf14.hatt.zte.com.cn             schema: http     tophide: 0

         ................................................

` 


### 查询用户归属信息(SHOW_DR_USER) 
### 查询用户归属信息(SHOW_DR_USER) 


[](None)功能说明 

该命令用于查询用户所属的PCF局信息，以便于了解用户信息和问题定位。查询到的信息包括以下几种：用户类型（数据用户、语音用户）、用户归属局（用户初始上线所属的PCF局）、用户当前局（用户当前所属的PCF局）、消息处理模式（重定向、代理转发、本地处理）。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERKEY|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示用户标识的值，通常是用户的MSISDN或者IMSI。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
USERTYPE|用户类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-100|该参数用于表示用户类型。数据：用户为数据用户。语音：用户为语音用户。
ORIGIN_NFID|用户归属局|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于表示用户在哪个PCF局初始上线。0：没有实际意义，一般表示该用户处于离线状态。非0值：用户在该PCF局初始上线。
CURRENT_NFID|用户当前局|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于表示该用户当前处于哪个PCF局。0：没有实际意义，一般表示该用户处于离线状态。非0值：用户当前在该PCF局。
MSG_MODE|用户消息处理模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-100|该参数用于表示该用户的后续请求消息的处理方式，即后续请求消息发送到当前查询局时的处理方式。本地处理：在当前查询局处理。重定向：PCF请求对端把该请求消息重新发送到“用户当前局”处理。代理转发：PCF自己把该请求消息转发到“用户当前局”处理。
SESSIONHASH|会话标识|参数可选性: 任选参数类型: 字符串参数范围: 0-20|该参数用于标识语音的不同会话。




[](None)命令举例 


`
查询用户值为“123456789012345”的用户的归属局信息。
SHOW_DR_USER:USERKEY="123456789012345"; 

SHOW_DR_USER:USERKEY="123456789012345"
-----------------Npcf_SMPolicyControl_0----------------
用户类型  用户归属局 用户当前局 用户消息处理模式 会话标识  
--------------------------------------------
数据      1          2          重定向           
--------------------------------------------
记录数：1

` 


### 查询局用户信息(SHOW_DR_SYS) 
### 查询局用户信息(SHOW_DR_SYS) 


[](None)功能说明 

该命令用于查询组成容灾关系的各局点上的用户在当前查询局上的分布信息，便于了解当前查询局上的用户分布情况和问题定位。查询到的信息主要包括：本局用户信息、其他容灾局在本局上的用户信息。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NFID|PCF局向号|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示PCF局向号：可以是本局，也可以是容灾局。后续的各种用户数指的就是该PCF局分布在当前查询局上的用户数。
DATAUSERNUM|数据用户|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示PCF容灾局在当前局的数据用户数。
IMSSESSNUM|IMS会话|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示PCF容灾局在当前局的IMS会话数。




[](None)命令举例 


`
查询当前PCF局上的用户信息：

1局和2局组成容灾局。
1局有10000个用户（都是数据用户）分布在当前查询局上。
2局有1588个用户（1000个数据用户，588个IMS用户）分布在当前查询局上。

SHOW_DR_SYS:; 

SHOW_DR_SYS:
-----------------Npcf_SMPolicyControl_0----------------
PCF局向号  数据用户 IMS会话 
----------------------------------
1         10000    0       
2         1000     588       
----------------------------------
记录数：2

` 


### 查询容灾群组信息(SHOW_DR_GROUP) 
### 查询容灾群组信息(SHOW_DR_GROUP) 


[](None)功能说明 

该命令用于查询容灾局的各容灾群组当前所属的局向号，便于了解容灾群组的归属信息和问题定位。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|群组信息|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|该参数用于表示查询到容灾群组分布结果。




[](None)命令举例 


`
查询容灾群组信息：

13局和14局组成容灾局。
归属于13局的0-23号容灾群组仍然归属13局。
由于14局发生了容灾，原归属于14局的0-23号容灾群组暂归属13局。

SHOW_DR_GROUP:; 

SHOW_DR_GROUP:
-----------------Npcf_SMPolicyControl_0----------------
群组信息

                NFID_13 :
                GROUP_OF_NF:
                [
                             0: NF_13             1: NF_13             2: NF_13             3: NF_13    
                             4: NF_13             5: NF_13             6: NF_13             7: NF_13    
                             8: NF_13             9: NF_13            10: NF_13            11: NF_13    
                            12: NF_13            13: NF_13            14: NF_13            15: NF_13    
                            16: NF_13            17: NF_13            18: NF_13            19: NF_13    
                            20: NF_13            21: NF_13            22: NF_13            23: NF_13    
                ]


                NFID_14 :
                GROUP_OF_NF:
                [
                             0: NF_13             1: NF_13             2: NF_13             3: NF_13    
                             4: NF_13             5: NF_13             6: NF_13             7: NF_13    
                             8: NF_13             9: NF_13            10: NF_13            11: NF_13    
                            12: NF_13            13: NF_13            14: NF_13            15: NF_13    
                            16: NF_13            17: NF_13            18: NF_13            19: NF_13    
                            20: NF_13            21: NF_13            22: NF_13            23: NF_13    
                ]

` 


### 查询容灾接管进度(SHOW_DR_PROGRESS) 
### 查询容灾接管进度(SHOW_DR_PROGRESS) 


[](None)功能说明 

该命令用于查询当前局接管PCF其他局用户时的接管进度。主要包括：被接管的PCF局向号、接管进度、接管的用户数。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MESSAGE|接管进度|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|该参数用于表示群组的接管进度。




[](None)命令举例 


`
查询当前PCF局接管其他局用户的进度。
SHOW_DR_PROGRESS:; 

SHOW_DR_PROGRESS:
-----------------Npcf_SMPolicyControl_0----------------
接管进度

-------------------------------------------------------------------------
  PCF_13    Loading progress is 10, All user number is 0.
-------------------------------------------------------------------------

` 


### 强制加载/卸载容灾分片(FORCE_DR_GROUP) 
### 强制加载/卸载容灾分片(FORCE_DR_GROUP) 


[](None)功能说明 

小心：该命令属于高危命令，该操作将改变局的容灾群组所属的局向，操作不当将导致容灾关系混乱。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 

该命令用于强制加载/卸载某局的容灾群组到本局，作为问题处理的一个非常规手段。 

当分析出容灾群组错乱，需要人工干预时，使用该命令。 

加载/卸载容灾群组成功后，可以把对应PCF局上的容灾群组加载到本局/从本局上卸载掉。 


[](None)注意事项 

该命令属于高危命令，请小心使用。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
OPERATETYPE|操作类型|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: LOAD|该参数用于表示本次是强制加载/卸载容灾群组。各参数选项的含义是：加载：表示强制加载某PCF局的容灾群组到当前局上。卸载：表示从当前局上强制卸载某PCF局的容灾群组。
NEID|局向号|参数可选性: 必选参数类型: 数字参数范围: 1-65534|该参数用于表示PCF局向号。
DRGROUP|容灾分片|参数可选性: 必选参数类型: 数字参数范围: 0-23|该参数用于表示PCF局向号上的容灾群组分片。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-1200000|该参数表示命令执行情况，是否执行成功。




[](None)命令举例 


`
强制加载PCF 100局上的18号容灾群组分片到当前局上。
FORCE_DR_GROUP:OPERATETYPE="LOAD",NEID=100,DRGROUP=18; 
` 


## EMS+日志管理 
## EMS+日志管理 


[](None)背景知识 


EMS+给5GC提供业务日志功能，同时EMS+也提供业务统计功能，以及日志查询功能。PCF通过CHR模块上报业务日志给EMS+，方便系统运行异常时运维人员通过EMS+进行问题的分析和定位。 




[](None)功能说明 


本功能提供EMS+链路状态查询及切换功能。 

查询EMS+链接信息：该命令用于查询CHR与EMS+之间的链路状态。当系统上报日志给EMS+失败或者EMS+上查询PCF日志缺失时，可以使用此命令查询链路状态是否正常。 

手动切换EMS+链路：该命令用于手动切换EMS+服务器。当通过[SHOW_EMSPLS_LINK](../mml/1137515.html)命令查询出EMS+链路状态异常时，可以通过该命令手动切换链路到备用EMS+




[](None)子主题： 






### 查询EMS+链接信息(SHOW_EMSPLS_LINK) 
### 查询EMS+链接信息(SHOW_EMSPLS_LINK) 


[](None)功能说明 

该命令用于查询服务端主备EMS+的IP地址、端口和EMS+服务器的状态，以及各SC与EMS+连接的链路状态、局向等信息。当5GC网络中部署了EMS+服务器时，PCF需要将CHR日志上传EMS+。当操作维护人员需要了解主备EMS+服务器信息，以及PCF的某个SC与EMS+之间的链路信息时，可以执行本命令。


[](None)注意事项 

当需要查询所有SC实例的链路状态和局向信息时，SC逻辑编号不填或者填0。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LOGIC_NO|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 0-1000|用于指定需要查询的SC的实例号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MASTER_IPADDR|主用IP地址|参数可选性: 必选参数类型: 字符串参数范围: 0-39|主用EMS+服务器的IP地址。
MASTER_PORT|主用端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|主用EMS+服务器的发送端口。
MASTER_STATUS|主用服务器状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-8|主用EMS+服务器的状态：WORK: 工作态UNWORK: 故障态
SLAVE_IPADDR|备用IP地址|参数可选性: 任选参数类型: 字符串参数范围: 0-39|备用EMS+服务器的IP地址。（不存在备用EMS+服务器则不显示）
SLAVE_PORT|备用端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|备用EMS+服务器的发送端口。（不存在备用EMS+服务器则不显示）
SLAVE_STATUS|备用服务器状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-8|备用EMS+服务器的状态：（不存在备用EMS+服务器则不显示）WORK: 工作态UNWORK: 故障态
LOGIC_NO|逻辑号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|用于标识当前SC的实例号。
VRU_NAME|VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 0-32|用于标识当前VRU实例的名称。
LINK_STATUS|链路状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-10|用于标识当前链路的状态。各个状态含义如下：NULL：无效状态INIT：初始状态ACTIVE：激活状态UNACTIVE：去激活状态
LINK_BNO|链路局向|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-10|用于标识当前链路对应EMS+局主备信息，当返回CHR_LINK_MASTER时标识当前链路连接的主EMS+，返回CHR_LINK_SLAVE时标识当前链路连接的是备用EMS+。




[](None)命令举例 


`
查询EMS+链路信息。
SHOW_EMSPLS_LINK

(No.1) : SHOW_EMSPLS_LINK:
---------------------------------Npcf_SMPolicyControl_0----------------
主用IP地址    主用端口 主用服务器状态   备用IP地址    备用端口  备用服务器状态 
-------------------------------------------------------------------------------
10.228.13.124 15000     WORK            10.228.13.122 16000    UNWORK            
-------------------------------------------------------------------------------
记录数：1
逻辑号 VRU名称                    链路状态 链路局向 
----------------------------------------------------
1      vru-npcf-smpolicycontrol-0 ACTIVE   MASTER   
----------------------------------------------------
记录数：1

` 


### 手动切换EMS+链路节点(EMSPLS_LINK_SWITCH) 
### 手动切换EMS+链路节点(EMSPLS_LINK_SWITCH) 


[](None)功能说明 

该命令用于手动切换CHR模块连接的主备EMS+服务器。当系统识别与当前EMS+连接中断时会会自动切换到备用EMS+服务器，同时也提供了手动主动切换连接服务器的方法。当运维人员通过[SHOW_EMSPLS_LINK](../mml/1137515.html)命令查询出EMS+链路状态异常时，可以通过该命令手动切换链路到备用EMS+服务器。


[](None)注意事项 

当需要切换全部链路到主用EMS+时，链路局向参数需要为MASTER。当需要切换全部链路到备用EMS+时，链路局向参数需要为SLAVE。
详细的切换结果可以通过 [SHOW_EMSPLS_LINK](../mml/1137515.html) 查询链路局向信息是否变化，链路状态是否恢复正常。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LINK_BNO|链路局向|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-10|用于标识当前需要切换到的EMS+局主备信息，填CHR_LINK_MASTER代表需要切换到主EMS+，填CHR_LINK_SLAVE时代表需要切换到备EMS+。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|显示切换结果信息。




[](None)命令举例 


`
切换当前链路到备用EMS+服务器。
EMSPLS_LINK_SWITCH

(No.2) : EMSPLS_LINK_SWITCH:LINK_BNO="MASTER"
-----------------Npcf_SMPolicyControl_0----------------
操作结果                  
--------------------------
start to switch ems+ link! 
--------------------------
记录数：1

` 


## 服务集信息 
## 服务集信息 


[](None)背景知识 


PCF网元包含很多服务，同时随着版本的演进也会添加和减少服务。运维人员可以通过该命令查询当前版本支持的所有服务信息。 




[](None)功能说明 


本功能提供查询当前PCF版本支持的服务信息。 

当运维人员需要了解PCF该版本支持的详细服务信息时可通过此命令查询。 




[](None)子主题： 






### 查询服务集信息(SHOW_SERVLIST) 
### 查询服务集信息(SHOW_SERVLIST) 


[](None)功能说明 

该命令用于查询PCF版本支持的服务信息。当运维人员需要了解PCF该版本支持的详细服务信息时可通过此命令查询。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
serv_name|服务名称|参数可选性: 必选参数类型: 字符串参数范围: 0-48|用于标识支持的服务名称。
serv_size|服务规格|参数可选性: 必选参数类型: 字符串参数范围: 0-16|用于标识当前场景支持的服务规格。目前支持规格包括：NFS_SIZE_S：商用小规格NFS_SIZE_M：商用中规格NFS_SIZE_L：商用大规格
vru_name|主VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 0-32|用于标识主服务PCM的主VRU名称。
special_sc|主SC逻辑号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|用于标识主服务PCM的主VRU的主SC实例号信息。




[](None)命令举例 


`
SHOW_SERVLIST

(No.3) :SHOW_SERVLIST:
-----------------Npcf_SMPolicyControl_0----------------
服务名称                 服务规格   
------------------------------------
Npcf_SMPolicyControl     NFS_SIZE_S 
Npcf_AMPolicyControl     NFS_SIZE_S 
Npcf_PolicyAuthorization NFS_SIZE_S 
Npcf_SystemManagement    NFS_SIZE_S 
Npcf_SIGLB               NFS_SIZE_S 
Npcf_LOG                 NFS_SIZE_S 
Npcf_LogStoreUnit        NFS_SIZE_S 
------------------------------------
记录数：7
主VRU名称                  主SC逻辑号 
--------------------------------------
vru-npcf-smpolicycontrol-0 1          
--------------------------------------
记录数：1

` 


## UB数据管理 
## UB数据管理 


[](None)背景知识 


系统UB数据区是系统运行中管理的一些临时缓存信息，一般随着流程发起而创建，流程终止而释放。 

为了方便对系统的UB数据进行管理。系统提供了针对UB数据区的专业维护功能。 




[](None)功能说明 


该节点提供UB数据维护的命令，包括手动检查UB数据区等命令。 

当系统运行过程中UB数据区出现异常，例如数据区挂死等，运维人员可以通过命令通过[SCAN_TM_UB](../mml/1137133.html)命令对当前服务及组件的UB数据区进行检查和回收。




[](None)子主题： 






### TM事务数据区检查回收(SCAN_TM_UB) 
### TM事务数据区检查回收(SCAN_TM_UB) 


[](None)功能说明 

该命令是一种保护手段。通过执行该命令可以触发事务数据区的检查，并对挂死的事务数据区进行回收。 

该命令执行后会扫描当前在用的所有事务数据区，并对已经失效的事务数据区进行回收。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESULT|操作结果|参数可选性: 任选参数类型: 字符串参数范围: 0-100|执行命令是否成功的结果。




[](None)命令举例 


`
对当前事务UB数据区进行检查和回收。
SCAN_TM_UB:

(No.6) : SCAN_TM_UB:
-----------------Npcf_SMPolicyControl_0----------------
操作结果 
---------
Success! 
Success! 
---------
记录数：2

` 


操作维护 :操作维护 :

[](None)背景知识 


平台提供的调试命令集合。 




[](None)功能说明 


该节点下面包括系统调测配置。 




[](None)子主题： 






系统调测 :系统调测 :

[](None)背景知识 


对系统进行调试和信息收集，以判断运行状况。 




[](None)功能说明 


对系统进行调试和信息收集，包括调测信息收集等功能。 




[](None)子主题： 






调测信息收集 :调测信息收集 :

[](None)背景知识 


在系统调试过程中，需要采集系统的运行信息，可提供给运维人员进行分析，达到监测系统是否正常的目的。 




[](None)功能说明 


本配置可以显示系统当前支持的所有模块，可针对模块名进行信息采集，也可以采集系统所有模块的信息，同时具备清除模块信息的功能。 




[](None)子主题： 






#### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 
#### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 


[](None)功能说明 

该命令用于查询其归属的NFS内含有调测信息的模块列表。当运维人员需要收集或者清除指定模块的调试信息时，可以执行该命令查询含有调测信息的模块名称。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名|参数可选性: 必选参数类型: 字符串参数范围: 1-47|该参数用于表示支持统计信息的模块名称。
MODULE_INST|模块实例数|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示支持统计信息的模块实例数。




[](None)命令举例 


`
查询某个NFS中含有调试统计信息的模块列表。
 SHOW DEBUG MODULELIST

------CommonS_TMSP_0--------
模块名         模块实例数
ROSNG_ADAPT    1
ROSNG_ARCH     1
记录数：2

执行成功耗时: 0.259 秒

` 


#### 清理模块内部统计信息(CLEAR DEBUG INFO) 
#### 清理模块内部统计信息(CLEAR DEBUG INFO) 


[](None)功能说明 

该命令用于清理其归属NFS内模块的调测信息。当需要获取新的调测信息前，先执行该命令。 


[](None)注意事项 

获取新的调测信息前可以先执行该命令，该命令返回的“失败数量”为非0则需要联系中兴通讯技术人员支持；为0则可获取新的调测信息。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名称|参数可选性: 任选参数类型: 字符串参数范围: 1-47|该参数用于表示需要清除调测信息的模块名称。该参数选项的含义是：默认为空：表示清除NFS内所有的调测信息。非空：表示清除指定模块的调测信息，可由SHOW DEBUG MODULELIST命令获取模块名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NUMBER|模块实例数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理的模块实例总数量。
SUCCESS_NUMBER|成功数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理成功的模块实例数量。
FAILED_NUMBER|失败数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理失败的模块实例数量。




[](None)命令举例 


`
清理名称为ROSNG_ADAPT的模块的调测信息。

CLEAR DEBUG INFO:MODULE_NAME="ROSNG_ADAPT"
` 


