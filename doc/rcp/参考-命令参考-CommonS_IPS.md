# 服务全局配置 
# 服务全局配置 


[](None)背景知识 


在多网元/NF共用IPS的情况下，服务全局配置中的某些配置内容是全局共享的，包括协议配置、DPDK配置、组播配置等。 




[](None)功能说明 


该配置中包含对IPS网元所有配置的修改、查询以及调试。 




[](None)子主题： 






## IPS配置 
## IPS配置 


[](None)背景知识 


IPS配置下所有的配置只在IPS服务下有效。 




[](None)功能说明 


该配置中包含IPS网元对系统资源使用，以及报文转发规则的查询和配置。 




[](None)子主题： 






### 外部互转配置 
### 外部互转配置 


[](None)背景知识 


多网元共用IPS（接口处理服务）情况下，当网元间的交互消息需要转发给外部路由器或交换机等设备的时候，可以通过该配置进行控制。 




[](None)功能说明 


禁用外部互转的场景下，网元间消息通过共用的IPS直接转发交互；
开启外部互转的场景下，网元间消息可以先根据路由配置转发给外部交换设备，再回给IPS转给目的网元。 




[](None)子主题： 






#### 修改外部互转开关配置(SET OUTEREXCHANGESWITCH) 
#### 修改外部互转开关配置(SET OUTEREXCHANGESWITCH) 


[](None)功能说明 

该命令用于启用或禁用外部互转开关。当需要将网元间交互的消息导入外部交换设备，开启外部互转开关。命令执行成功后，配合路由配置，网元间交互消息可以转发给外部交换设备，再回给IPS转给目的网元。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
OUTEREXCHANGE|外部互转|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: DISABLE|该参数表示外部互转功能开关。开启此开关后，可将网元间交互的消息导入外部交换设备。




[](None)命令举例 


`
使能外部互转开关配置。
SET OUTEREXCHANGESWITCH:OUTEREXCHANGE="ENABLE"
` 


#### 查询外部互转开关配置(SHOW OUTEREXCHANGESWITCH) 
#### 查询外部互转开关配置(SHOW OUTEREXCHANGESWITCH) 


[](None)功能说明 

该命令用于查询外部互转开关的设置。当需要查询当前的外部互转开关的状态时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
OUTEREXCHANGE|外部互转|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: DISABLE|该参数表示外部互转功能开关。开启此开关后，可将网元间交互的消息导入外部交换设备。




[](None)命令举例 


`
查询外部互转开关的配置。
SHOW OUTEREXCHANGESWITCH

(No.4) : SHOW OUTEREXCHANGESWITCH:
-----------------CommonS_IPS_0----------------
外部互转
禁用
记录数：1

执行成功耗时: 1.438 秒

` 


### 集中重组配置 
### 集中重组配置 


[](None)背景知识 


当网元内部署多个IPS情况下，对端交换机或者路由器等设备将分片报文投递到不同的IPS上，此时需要开启集中重组功能，将这些分片报文集中到其中一个IPS上进行报文重组。 




[](None)功能说明 


禁用集中重组功能时，分片在当前IPS进行重组；开启集中重组功能时，所有分片通过Raw通道发往指定IPS上进行重组。 

当网元内部署多个IPS，可以开启集中重组功能，对端交换机或者路由器设备发送到不同IPS上的分片会重组成功。 




[](None)子主题： 






#### 修改集中重组开关配置(SET IPSCENTRALREASM) 
#### 修改集中重组开关配置(SET IPSCENTRALREASM) 


[](None)功能说明 

该命令用于设置集中重组功能开关。当需要开启集中重组功能时，执行该命令。命令执行成功后，分片消息在系统中会进入集中重组流程完成重组。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CENTRALREASM|集中重组|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数为集中重组使能开关。启用：开启集中重组功能。禁用：禁用集中重组功能。




[](None)命令举例 


`
使能集中重组开关配置。
SET IPSCENTRALREASM:CENTRALREASM="ENABLE"
` 


#### 查询集中重组开关配置(SHOW IPSCENTRALREASM) 
#### 查询集中重组开关配置(SHOW IPSCENTRALREASM) 


[](None)功能说明 

该命令用于查询集中重组功能开关的配置。当需要查询当前的集中重组配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CENTRALREASM|集中重组|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数为集中重组使能开关。启用：开启集中重组功能。禁用：禁用集中重组功能。




[](None)命令举例 


`
查询集中重组开关配置记录。
SHOW IPSCENTRALREASM:

(No.1) : SHOW IPSCENTRALREASM:
-----------------CommonS_IPS_0----------------
集中重组
禁用(DISABLE)
记录数：1
执行成功耗时: 0.038 秒

` 


### 外发重组配置 
### 外发重组配置 


[](None)背景知识 


当网元内部署多个IPS情况下，网元内部业务会将分片报文投递至IPS上，此时需要开启外发重组功能，将这些分片报文重组起来再进行外发处理。 




[](None)功能说明 


禁用外发重组功能时，业务分片报文会被丢弃；开启外发重组功能时，业务分片报文会被重组。 

当网元内部署多个IPS，可以开启外发重组功能，网元内部业务发送分片报文也会被重组进行外发处理。 




[](None)子主题： 






#### 修改外发重组开关配置(SET OUTREASMSWITCH) 
#### 修改外发重组开关配置(SET OUTREASMSWITCH) 


[](None)功能说明 

该命令用于设置外发重组功能开关。当需要开启外发重组功能时，执行该命令。命令执行成功后，网元外发的分片消息在系统中会进入重组流程完成重组。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
OUTREASM|外发重组|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: DISABLE|该参数为外发重组使能开关。启用：开启外发重组功能。禁用：禁用外发重组功能。




[](None)命令举例 


`
使能外发重组开关配置。
SET OUTREASMSWITCH:OUTREASM="ENABLE"

(No.1) : SET OUTREASMSWITCH:OUTREASM="ENABLE"
执行成功耗时: 0.038 秒

` 


#### 查询外发重组开关配置(SHOW OUTREASMSWITCH) 
#### 查询外发重组开关配置(SHOW OUTREASMSWITCH) 


[](None)功能说明 

该命令用于查询外发重组功能开关的配置。当需要查询当前的外发重组配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
OUTREASM|外发重组|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: DISABLE|该参数为外发重组使能开关。启用：开启外发重组功能。禁用：禁用外发重组功能。




[](None)命令举例 


`
查询外发重组开关配置记录。
SHOW OUTREASMSWITCH:

(No.1) : SHOW OUTREASMSWITCH:
-----------------NFS Common Configuration----------------
外发重组
禁用(DISABLE)
记录数：1
执行成功耗时: 0.038 秒

` 


### 线程死循环检测配置 
### 线程死循环检测配置 


[](None)背景知识 


线程出现死循环时，往往因为无法第一时间抓取有效信息而给问题解决增加难度。死循环检测可以在第一时间感知线程异常，并且还原第一现场信息。 




[](None)功能说明 


该功能用于记录线程出现死循环的时候记录调用栈信息、线程名、死循环函数等信息 

开启线程死循环检测时，系统监控每一个处理线程，当线程死循环时，记录下第一现场信息。 

默认开启线程死循环检测，不建议关闭。如果禁用此配置，线程出现死循环时，系统不会输出调用栈等信息，无法还原第一现场信息。 




[](None)子主题： 






#### 修改线程死循环检测配置(SET THRDEADLOOPCHECK) 
#### 修改线程死循环检测配置(SET THRDEADLOOPCHECK) 


[](None)功能说明 

该命令用于设置线程死循环检测配置。当需要检测线程运行过程中是否会出现死循环以及出现死循环后是否需要复位SC（Service Component，组件），使用该命令。使能开关成功后，线程出现死循环后就会重启SC。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DEADLOOPCHECK|死循环检测|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数用于启用或禁用死循环检测功能。
RESETNFS|重启SC|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数用于设置是否重启SC。




[](None)命令举例 


`
开启线程死循环检测开关，并设置检测到线程死循环后重启NFS。
SET THRDEADLOOPCHECK:DEADLOOPCHECK="ENABLE",RESETNFS="ENABLE"
` 


#### 查询线程死循环检测配置(SHOW THRDEADLOOPCHECK) 
#### 查询线程死循环检测配置(SHOW THRDEADLOOPCHECK) 


[](None)功能说明 

该命令用于查询线程死循环检测配置。当需要查询当前的线程死循环检测配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DEADLOOPCHECK|死循环检测|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数用于启用或禁用死循环检测功能。
RESETNFS|重启SC|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数用于设置是否重启SC。




[](None)命令举例 


`
查询线程死循环检测的配置。
SHOW THRDEADLOOPCHECK

(No.6) : SHOW THRDEADLOOPCHECK:
-----------------CommonS_IPS_0----------------
死循环检测 重启SC
启用      启用
记录数：1

执行成功耗时: 1.253 秒

` 


### ACL告警配置 
### ACL告警配置 


[](None)背景知识 


IPS上有多张IPv4/IPv6 ACL（Access Control List，访问控制列表）规则表，每张表的容量值决定能写入的最多ACL条目数。当表中ACL条目写满之后，再写入ACL规则就会失败，所以当ACL表中规则超过一定数目需要上报告警，提醒系统中ACL规则已经快写满。 




[](None)功能说明 


配置ACL规则表的告警阈值和告警恢复阈值。当写入表中ACL条目数与表容量比值等于或大于告警阈值时，上报容量不足告警。当写入表中ACL条目数与表容量比值等于或小于恢复阈值时，恢复容量不足告警。 




[](None)子主题： 






#### 设置ACL告警阈值(SET IPSACLRESOURCEALARM) 
#### 设置ACL告警阈值(SET IPSACLRESOURCEALARM) 


[](None)功能说明 

该命令用于设置ACL表容量告警阈值和告警恢复阈值。当需要设置ACL表容量告警阈值和告警恢复阈值时，执行该命令。命令执行成功后，ACL表容量高于告警阈值，会上报告警，ACL容量低于告警恢复阈值，已经上报的告警会恢复。 


[](None)注意事项 


 
ACL表容量告警阈值设置范围：10~95。 

 
ACL表容量告警恢复阈值设置范围：5~90。 

 
告警阈值必须大于告警恢复阈值。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ACLALARMTHRESHOLD|ACL告警阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-95默认值: 90|该参数用于表示ACL告警阈值，即ACL条目数占表容量百分比。
ACLALARMRTHRESHOLD|ACL告警恢复阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 5-90默认值: 85|该参数用于表示ACL告警恢复阈值。




[](None)命令举例 


`
设置ACL告警阈值和告警恢复阈值。
SET IPSACLRESOURCEALARM:ACLALARMTHRESHOLD=85,ACLALARMRTHRESHOLD=80
` 


#### 查询ACL告警阈值(SHOW IPSACLRESOURCEALARM) 
#### 查询ACL告警阈值(SHOW IPSACLRESOURCEALARM) 


[](None)功能说明 

该命令用于查询ACL表容量告警阈值和告警恢复阈值。当需要查询当前ACL表容量告警配置时，执行该命令。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ACLALARMTHRESHOLD|ACL告警阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 10-95默认值: 90|该参数用于表示ACL告警阈值，即ACL条目数占表容量百分比。
ACLALARMRTHRESHOLD|ACL告警恢复阈值(%)|参数可选性: 任选参数类型: 数字参数范围: 5-90默认值: 85|该参数用于表示ACL告警恢复阈值。




[](None)命令举例 


`
查询ACL告警阈值和告警恢复阈值。
SHOW IPSACLRESOURCEALARM:

(No.1) : SHOW IPSACLRESOURCEALARM:
-----------------NFS Common Configuration----------------
ACL告警阈值 ACL告警恢复阈值
90          85
记录数：1
执行成功耗时: 0.112 秒

` 


### 报文描述符告警配置 
### 报文描述符告警配置 


[](None)背景知识 


报文使用率告警功能用于周期性地检测网元报文使用率。若触发报文使用率告警，则可分析网元当前的资源情况，避免引发更为严重的故障。 




[](None)功能说明 


设置报文描述符使用率告警门限值和连续告警次数门限值。 




[](None)子主题： 






#### 设置报文使用率告警门限(SET DESUSAGECFG) 
#### 设置报文使用率告警门限(SET DESUSAGECFG) 


[](None)功能说明 

该命令用于设置报文使用率告警门限。当需要自定义报文使用率告警门限时，使用该命令。设定成功后，在高于自定义的门限值时，会上报告警。


[](None)注意事项 

建议使用默认值。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DesAlarmL1Rate|报文使用率一级告警门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|报文描述符使用率一级告警门限。当一级告警门限为0时，则表示关闭报文使用率的告警功能。
DesAlarmL2Rate|报文使用率二级告警门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|报文描述符使用率二级告警门限。当二级告警门限为0时，则表示关闭报文使用率的分级告警功能。
DesAlarmCount|报文使用率连续告警次数门限|参数可选性: 任选参数类型: 数字参数范围: 10-10000默认值: 30|该参数用于表示报文使用率连续告警次数门限，当报文使用率连续告警的次数高于门限值，则上报告警。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DesAlarmL1Rate|报文使用率一级告警门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|报文描述符使用率一级告警门限。当一级告警门限为0时，则表示关闭报文使用率的告警功能。
DesAlarmL2Rate|报文使用率二级告警门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|报文描述符使用率二级告警门限。当二级告警门限为0时，则表示关闭报文使用率的分级告警功能。
DesAlarmCount|报文使用率连续告警次数门限|参数可选性: 任选参数类型: 数字参数范围: 10-10000默认值: 30|该参数用于表示报文使用率连续告警次数门限，当报文使用率连续告警的次数高于门限值，则上报告警。




[](None)命令举例 


`
设置报文描述符使用率告警门限，报文使用率一级告警门限为90%，报文使用率二级告警门限为0，报文使用率连续告警次数门限为30。
SET DESUSAGECFG:DESALARML1RATE=90,DESALARML2RATE=0,DESALARMCOUNT=30
` 


#### 查询报文使用率告警门限(SHOW DESUSAGECFG) 
#### 查询报文使用率告警门限(SHOW DESUSAGECFG) 


[](None)功能说明 

该命令用于查询报文使用率告警门限。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DesAlarmL1Rate|报文使用率一级告警门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|报文描述符使用率一级告警门限。当一级告警门限为0时，则表示关闭报文使用率的告警功能。
DesAlarmL2Rate|报文使用率二级告警门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|报文描述符使用率二级告警门限。当二级告警门限为0时，则表示关闭报文使用率的分级告警功能。
DesAlarmCount|报文使用率连续告警次数门限|参数可选性: 任选参数类型: 数字参数范围: 10-10000默认值: 30|该参数用于表示报文使用率连续告警次数门限，当报文使用率连续告警的次数高于门限值，则上报告警。




[](None)命令举例 


`
查询报文描述符使用率告警门限。
SHOW DESUSAGECFG:

-----------------CommonS_IPS_0----------------

操作维护  报文使用率一级告警门限(%)  报文使用率二级告警门限(%)  报文使用率连续告警次数门限
------------------------------------------------------------------------------------------
修改      90                         0                          30
------------------------------------------------------------------------------------------

` 


### CPU使用率告警配置 
### CPU使用率告警配置 


[](None)背景知识 


CPU使用率告警功能用于周期性地检测网元的CPU使用率情况。若触发CPU使用率告警，则可分析网元当前的资源情况，避免引发更为严重的故障。 




[](None)功能说明 


设置媒体面CPU使用率告警开关、上报告警和恢复告警门限值、以及告警时间。 




[](None)子主题： 






#### 设置CPU使用率告警门限(SET CPUUSERATECFG) 
#### 设置CPU使用率告警门限(SET CPUUSERATECFG) 


[](None)功能说明 

该命令用于设置媒体面CPU使用率告警门限。当需要启用媒体面CPU利用率告警功能时，使用该命令。命令执行成功后，当CPU利用率高于告警上报门限且持续告警时间的时长时，会上报告警；当CPU利用率低于告警恢复门限且持续告警时间的时长时，已经上报的告警会恢复。


[](None)注意事项 


 
告警门限设置范围：80~100。 

 
告警恢复门限设置范围：60~79。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CpuUseRateControl|CPU使用率告警开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|该参数用于表示CPU使用率告警开关。ON：启用媒体面CPU利用率告警功能。OFF：禁用媒体面CPU利用率告警功能。
CpuUseRateAlarm|CPU使用率告警上报门限|参数可选性: 任选参数类型: 数字参数范围: 80-100默认值: 80|该参数用于表示CPU使用率告警上报门限。
CpuUseRateRestore|CPU使用率告警恢复门限|参数可选性: 任选参数类型: 数字参数范围: 60-79默认值: 70|该参数用于表示CPU使用率告警恢复门限。
CpuUseRateTime|CPU使用率告警时间|参数可选性: 任选参数类型: 数字参数范围: 1-120默认值: 15|该参数用于表示CPU使用率告警时间。CPU利用率高于告警门限并持续保持该时长，才会上报告警。同时CPU利用率低于告警恢复门限并保持该时长，才会恢复告警。




[](None)命令举例 


`
设置媒体面CPU使用率告警门限，CPU使用率告警开关为ON，告警上报门限为80%，告警恢复门限为70%，告警时间为15分钟。
SET CPUUSERATECFG:CPUUSERATECONTROL="ON",CPUUSERATEALARM=80,CPUUSERATERESTORE=70,CPUUSERATETIME=15
` 


#### 查询CPU使用率告警门限(SHOW CPUUSERATECFG) 
#### 查询CPU使用率告警门限(SHOW CPUUSERATECFG) 


[](None)功能说明 

该命令用于查询媒体面CPU使用率告警门限。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CpuUseRateControl|CPU使用率告警开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|该参数用于表示CPU使用率告警开关。ON：启用媒体面CPU利用率告警功能。OFF：禁用媒体面CPU利用率告警功能。
CpuUseRateAlarm|CPU使用率告警上报门限|参数可选性: 任选参数类型: 数字参数范围: 80-100默认值: 80|该参数用于表示CPU使用率告警上报门限。
CpuUseRateRestore|CPU使用率告警恢复门限|参数可选性: 任选参数类型: 数字参数范围: 60-79默认值: 70|该参数用于表示CPU使用率告警恢复门限。
CpuUseRateTime|CPU使用率告警时间|参数可选性: 任选参数类型: 数字参数范围: 1-120默认值: 15|该参数用于表示CPU使用率告警时间。CPU利用率高于告警门限并持续保持该时长，才会上报告警。同时CPU利用率低于告警恢复门限并保持该时长，才会恢复告警。




[](None)命令举例 


`
查询媒体面CPU使用率告警门限。
SHOW CPUUSERATECFG:

-----------------CommonS_IPS_0----------------
CPU使用率告警开关  CPU使用率告警上报门限(%) CPU使用率告警恢复门限(%) CPU使用率告警时间(分钟)
---------------------------------------------------------------------------------------------------------------------------------
ON(ON)                  80                              70                                      15
---------------------------------------------------------------------------------------------------------------------------------

` 


### MBUF告警配置 
### MBUF告警配置 


[](None)背景知识 


MBUF是系统运行的重要资源。如果MBUF占用率过高，会导致系统的运行异常，所以需要对MBUF的使用率进行监控。当MBUF使用率长时间达到一定门限时，则上报告警。 




[](None)功能说明 


MBUF告警开启时，系统定时扫描每一个MBUF池，当连续一定次数达到使用门限时，则上报告警；当使用率低于门限时，则恢复告警。 




[](None)子主题： 






#### 设置MBUF使用率告警门限(SET MBUFUSAGECFG) 
#### 设置MBUF使用率告警门限(SET MBUFUSAGECFG) 


[](None)功能说明 

该命令用于设置MBUF使用率告警门限。当需要观察MBUF使用情况时，使用该命令。当MBUF使用率高于告警门限，且告警次数达到连续告警次数门限，则会上报告警。


[](None)注意事项 


 
告警门限范围：80~100，默认值90。 

 
连续告警次数：1~10000，默认值30。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MbufAlarmControl|MBUF使用率告警开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OFF|该参数用于开启或关闭MBUF使用率告警开关。
MbufAlarmRate|MBUF使用率告警门限|参数可选性: 任选参数类型: 数字参数范围: 80-100默认值: 90|该参数用于设置MBUF使用率的告警门限。
MbufAlarmCount|MBUF使用率连续告警次数门限|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 30|该参数用于设置MBUF使用率的连续告警次数门限。当达到告警次数门限时，上报告警。




[](None)命令举例 


`
设置MBUF使用率告警门限，MBUF使用率告警开关为OFF，MBUF使用率告警门限为90%，MBUF使用率连续告警次数门限为30。
SET MBUFUSAGECFG:MbufAlarmControl=OFF,MbufAlarmRate=90,MbufAlarmCount=30
` 


#### 查询MBUF使用率告警门限(SHOW MBUFUSAGECFG) 
#### 查询MBUF使用率告警门限(SHOW MBUFUSAGECFG) 


[](None)功能说明 

该命令用于查询MBUF使用率告警门限。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MbufAlarmControl|MBUF使用率告警开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: OFF|该参数用于开启或关闭MBUF使用率告警开关。
MbufAlarmRate|MBUF使用率告警门限|参数可选性: 任选参数类型: 数字参数范围: 80-100默认值: 90|该参数用于设置MBUF使用率的告警门限。
MbufAlarmCount|MBUF使用率连续告警次数门限|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 30|该参数用于设置MBUF使用率的连续告警次数门限。当达到告警次数门限时，上报告警。




[](None)命令举例 


`
查询MBUF使用率告警门限。
SHOW MBUFUSAGECFG:

(No.1) : SHOW MBUFUSAGECFG:
-----------------CommonS_IPS_0----------------
操作维护       MBUF使用率告警开关 MBUF使用率告警门限(%) MBUF使用率连续告警次数门限 
-----------------------------------------------------------------------------------
修改           OFF                90                    30                         
-----------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-03-22 18:35:11 耗时: 3.186秒

` 


### GRE KEEPALIVE包快回配置 
### GRE KEEPALIVE包快回配置 


[](None)背景知识 


ROSNG容器在OMU虚机上为集中部署模式，如果主备ROSNG均处于故障的情况下，对端发送的协议报文无法获得响应。 




[](None)功能说明 


该配置用于开启GRE KEEPALIVE包快回功能，功能开启时，由IPS响应对端发送的GRE KEEPALIVE包，否则由ROSNG响应对端发送的GRE KEEPALIVE包。 




[](None)子主题： 






#### 修改GRE KEEPALIVE包快回配置(SET GREKEEPALIVEREPLY) 
#### 修改GRE KEEPALIVE包快回配置(SET GREKEEPALIVEREPLY) 


[](None)功能说明 

该命令用于设置GRE KEEPALIVE包快回开关，默认关闭 KEEPALIVE包快回。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
KEEPALIVEFASTREPLY|KEEPALIVE 包快回|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于配置是否开启接口gre keepalive包快回，默认关闭。




[](None)命令举例 


`
设置接口Gre Keepalive包快回开关打开。
SET GREKEEPALIVEREPLY:KEEPALIVEFASTREPLY="ENABLE"
` 


#### 查询GRE KEEPALIVE包快回配置(SHOW GREKEEPALIVEREPLY) 
#### 查询GRE KEEPALIVE包快回配置(SHOW GREKEEPALIVEREPLY) 


[](None)功能说明 

该命令用于查询GRE KEEPALIVE包快回配置。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
KEEPALIVEFASTREPLY|KEEPALIVE 包快回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于配置是否开启接口gre keepalive包快回，默认关闭。




[](None)命令举例 


`
查询Gre Keepalive 包快回配置。
SHOW GREKEEPALIVEREPLY;

(No.5) : SHOW GREKEEPALIVEREPLY:
-----------------CommonS_IPS_0----------------
操作维护      KEEPALIVE 包快回  
-------------------------------------------------------
修改           ENABLE             
-------------------------------------------------------
记录数：1
执行成功耗时: 0.139 秒

` 


### PING包快回配置 
### PING包快回配置 


[](None)背景知识 


ROSNG容器在OMU虚机上为集中部署模式，如果主备ROSNG均处于故障的情况下，对端发送的协议报文无法获得响应。 




[](None)功能说明 


该配置用于开启PING包快回功能，功能开启时，由IPS响应对端发送的PING包，否则由ROSNG响应对端发送的PING包。 




[](None)子主题： 






#### 修改ping包快回配置(SET FASTPINGREPLY) 
#### 修改ping包快回配置(SET FASTPINGREPLY) 


[](None)功能说明 

该命令用于设置接口 ipv4 ping包快回开关和ipv6 ping包快回开关，默认同时开启ipv4和ipv6 ping包快回。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
IPV4PINGFASTREPLY|接口Ipv4 ping包快回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于配置是否开启接口ipv4 ping包快回，默认开启。
IPV6PINGFASTREPLY|接口Ipv6 ping包快回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于配置是否开启接口ipv6 ping包快回，默认开启。




[](None)命令举例 


`
设置接口IPV4 ping包快回开关打开，接口IPV6 ping包快回开关打开。
SET FASTPINGREPLY:IPV4PINGFASTREPLY="ENABLE",IPV6PINGFASTREPLY="ENABLE"
` 


#### 查询ping包快回配置(SHOW FASTPINGREPLY) 
#### 查询ping包快回配置(SHOW FASTPINGREPLY) 


[](None)功能说明 

该命令用于查询ping包快回配置。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
IPV4PINGFASTREPLY|接口Ipv4 ping包快回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于配置是否开启接口ipv4 ping包快回，默认开启。
IPV6PINGFASTREPLY|接口Ipv6 ping包快回|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于配置是否开启接口ipv6 ping包快回，默认开启。




[](None)命令举例 


`
查询ping包快回配置。
SHOW FASTPINGREPLY;

(No.5) : SHOW FASTPINGREPLY:
-----------------CommonS_IPS_0----------------
操作维护       接口Ipv4 ping包快回 接口Ipv6 ping包快回 
-------------------------------------------------------
修改           ENABLE              ENABLE              
-------------------------------------------------------
记录数：1
执行成功耗时: 0.139 秒

` 


### IPS互转流量告警配置 
### IPS互转流量告警配置 


[](None)背景知识 


在某些情况下，消息会在IPS之间进行互转。比如，业务报文查出向路由，出接口不在本IPS；开启集中重组之后，入向分片报文，不在本IPS重组。如果转发流量过大，则会占用过多raw通道的带宽，影响系统性能。增加此配置，可用于改变互转告警的阈值和上报时间，适应不同的流量监测需求。 




[](None)功能说明 


该功能用于改变互转流量告警的阈值和上报时间，适应不同场景的告警参数配置。当需要监测IPS服务的互转流量时，通过该配置命令可以修改合适的告警阈值，否则使用默认值作为参数。设置时，告警上报阈值不可小于告警恢复的阈值。 




[](None)子主题： 






#### 修改互转流量告警配置(SET EXCHANGEALARMCFG) 
#### 修改互转流量告警配置(SET EXCHANGEALARMCFG) 


[](None)功能说明 

该命令用于设置IPS互转流量告警的相关参数。IPS互转流量是指在某些场景下一个IPS的报文需要转发至另一个IPS进行处理，如，出向查路由的出接口为非本IPS接口；开启集中重组，入向分片报文需要在另一个IPS重组等。 
当需要修改IPS互转流量告警的阈值和上报时间以适应不同的流量监测需求时，执行该命令。 


[](None)注意事项 


 
使用该命令时须保证容器运行状态正常。 

 
告警上报阈值的设置值不小于告警恢复阈值。 

 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CONTRLSWITCH|告警控制开关|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数表示IPS互转流量告警控制开关。打开该控制开关时，表示启用IPS互转流量告警功能。
ALARMREPORTTHR|告警上报阈值|参数可选性: 任选参数类型: 数字参数范围: 1-100000默认值: 1000|该参数表示IPS互转流量告警上报阈值。当IPS互转流量超过该阈值时，上报告警。
ALARMRESTORETHR|告警恢复阈值|参数可选性: 任选参数类型: 数字参数范围: 1-100000默认值: 800|该参数表示IPS互转流量告警恢复阈值。当IPS互转流量低于该阈值一段时间后，恢复告警。
ALARMREPORTTIME|告警上报时间|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数表示IPS互转流量监测周期。监测时间越短，告警上报越灵敏。




[](None)命令举例 


`
设置IPS互转流量告警：告警控制开关为打开，告警上报阈值为1000，告警恢复阈值为800，告警上报时间为10。
SET EXCHANGEALARMCFG:CONTRLSWITCH="ENABLE",ALARMREPORTTHR=1000,ALARMRESTORETHR=800,ALARMREPORTTIME=10
` 


#### 查询互转流量告警配置(SHOW EXCHANGEALARMCFG) 
#### 查询互转流量告警配置(SHOW EXCHANGEALARMCFG) 


[](None)功能说明 

该命令用于查询IPS互转流量告警的相关参数设置，包括互转告警阈值、互转告警恢复阈值、告警计算周期等。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
CONTRLSWITCH|告警控制开关|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数表示IPS互转流量告警控制开关。打开该控制开关时，表示启用IPS互转流量告警功能。
ALARMREPORTTHR|告警上报阈值|参数可选性: 任选参数类型: 数字参数范围: 1-100000默认值: 1000|该参数表示IPS互转流量告警上报阈值。当IPS互转流量超过该阈值时，上报告警。
ALARMRESTORETHR|告警恢复阈值|参数可选性: 任选参数类型: 数字参数范围: 1-100000默认值: 800|该参数表示IPS互转流量告警恢复阈值。当IPS互转流量低于该阈值一段时间后，恢复告警。
ALARMREPORTTIME|告警上报时间|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数表示IPS互转流量监测周期。监测时间越短，告警上报越灵敏。




[](None)命令举例 


`
查询IPS互转流量告警的配置。
SHOW EXCHANGEALARMCFG:

(No.1) : SHOW EXCHANGEALARMCFG:
-----------------CommonS_IPS_0----------------
操作维护       告警控制开关 告警上报阈值(Mbps) 告警恢复阈值(Mbps) 告警上报时间(s) 
----------------------------------------------------------------------------------
修改           启用         1000               800                10              
----------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-04-16 14:16:46 耗时: 0.597 秒

` 


### BFD延时配置 
### BFD延时配置 


[](None)背景知识 


在某些情况下，当配置了echo模式的BFD的IPS容器上电时，可能存在进程中BFD协议栈模块先于其他模块上电的场景,这将导致BFD无法正常工作，上电初期出现短暂的震荡，因此需要设置BFD 的上电时延，保证整个容器上电流程的初期BFD功能不开启，超过该时延后在工作。 




[](None)功能说明 


该配置用于获取或者设置IPS容器上电时，BFD功能相对于进程上电的延迟时间。 




[](None)子主题： 






#### 修改BFD延时配置(SET BFDDELAYTIMECFG) 
#### 修改BFD延时配置(SET BFDDELAYTIMECFG) 


[](None)功能说明 

该命令用于设置BFD模块在虚机上电过程中的启动时延参数，当出现BFD在容器上电过程中震荡时候，需要设置适当的值，从而避免在虚机上电未完成的过程中，BFD模块过早工作导致的震荡。


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BFDCONTRLSWITCH|BFD控制开关|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数表示用户面BFD功能启用控制开关。启用：表示打开用户面的BFD功能，实现IPS收发BFD包、及上送BFD包到ROSNG协议栈处理功能。关闭：表示关闭用户面的BFD功能，IPS用户面不处理BFD报文。
BFDDELAYTTIME|BFD延时配置|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 4|该参数表示设备上电后，容器上电延时启用BFD功能的时间。




[](None)命令举例 


`
设置BFD上电延时功能，并配置延时时长为10s。
SET BFDDELAYTIMECFG:BFDCONTRLSWITCH="ENABLE",BFDDELAYTTIME=10
` 


#### 查询BFD延时配置(SHOW BFDDELAYTIMECFG) 
#### 查询BFD延时配置(SHOW BFDDELAYTIMECFG) 


[](None)功能说明 

该命令用于查询BFD的时延参数。当需要查询进程上电时候配置的BFD时延参数时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BFDCONTRLSWITCH|BFD控制开关|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数表示用户面BFD功能启用控制开关。启用：表示打开用户面的BFD功能，实现IPS收发BFD包、及上送BFD包到ROSNG协议栈处理功能。关闭：表示关闭用户面的BFD功能，IPS用户面不处理BFD报文。
BFDDELAYTTIME|BFD延时配置|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 4|该参数表示设备上电后，容器上电延时启用BFD功能的时间。




[](None)命令举例 


`
查询BFD上电延时配置。
SHOW BFDDELAYTIMECFG: 

(No.1) : SHOW BFDDELAYTIMECFG
-----------------ips_98/CommonS_IPS_0----------------
操作维护       BFD控制开关 BFD延时配置(s) 
------------------------------------------
修改           启用        10             
------------------------------------------
记录数：1

执行成功开始时间:2022-05-16 09:07:39 耗时: 1.399秒

` 


### 端口PPS基准值配置 
### 端口PPS基准值配置 


[](None)背景知识 


当IPS容器启用了基于流量KPI的弹性缩扩容策略时，由于不同的网元业务流量不同，需要在保持KPI全局统一的前提下，适应不同的业务流量需求。 




[](None)功能说明 


该配置用于查询或者设置IPS容器端口流量的基准值，便于网元根据不同业务控制基于流量KPI的弹性缩扩容策略。默认不配置时，不启用基于流量KPI的弹性缩扩容策略，即SCCU不会根据端口实时流量与基准流量比值弹性扩容或缩容IPS容器；如果设定了端口流量的基准值，即启用了基于端口流量KPI的弹性缩扩容策略，SCCU会根据端口实时流量与基准流量的比值自动扩容或缩容IPS容器。 




[](None)子主题： 






#### 设置端口流量PPS基准值(SET PORTPPSBASELINE) 
#### 设置端口流量PPS基准值(SET PORTPPSBASELINE) 


[](None)功能说明 

该命令用于修改端口流量PPS基准值（PPS，Packets Per Second，数据包每秒）。当需要设置启用基于流量KPI的弹性缩扩容策略时，使用该命令设置端口流量PPS基准值。该命令配置成功后，MANO和SCCU会根据当前端口实时流量（端口流量为所有接口出入流量每秒数据包个数的平均值，单位PPS，具体可参考注意事项）与基准流量（单位KPPS）的比率决定是否触发容器的弹性缩扩容。


[](None)注意事项 

请确认规划是否开启基于端口流量KPI的弹性缩容，该值设置不当容易触发容器弹性缩扩容。默认不开启基于端口流量KPI的弹性缩容，即端口流量PPS值为0。 

如果确认要开启基于端口流量KPI的弹性缩扩容，请根据性能统计（“C55851004 收到好帧数(包) ”和“C55851032 发送好帧数(包)”这两个计数器一个粒度中的平均值）或 router 配置 show interface 中所有接口出入流量平均值(120s input/output rate pps)来估算 PortPpsBaseline 的合适值。一般的根据KPI弹性缩扩容的默认配置，端口流量实时值与基准值比值大于60%会弹出容器，比值小于20%且满足其它KPI策略（如容器CPU Ratio等）会缩掉容器。 

注意端口流量PPS基准值单位是KPPS，端口实时流量单位是PPS，估算时注意1 KPPS=1000 PPS。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PortPpsBaseline|端口流量PPS基准值|参数可选性: 必选参数类型: 数字默认值: 0|该参数设定端口流量PPS的基准值。该值默认为 0，表示不开启自动弹性缩扩容。




[](None)命令举例 


`
设置端口流量PPS基准值为500KPPS。
SET PORTPPSBASELINE:PORTPPSBASELINE=500
` 


#### 查询端口流量PPS基准值(SHOW PORTPPSBASELINE) 
#### 查询端口流量PPS基准值(SHOW PORTPPSBASELINE) 


[](None)功能说明 

该命令用于查看当前端口流量PPS基准值。当需要查询当前端口流量PPS基准值配置，如查询是否开启基于流量KPI的弹性缩容策略或容器异常弹出时查询端口流量PPS值设置是否合适时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PortPpsBaseline|端口流量PPS基准值|参数可选性: 任选参数类型: 数字默认值: 0|该参数显示端口流量PPS的基准值。




[](None)命令举例 


`
查看端口流量PPS基准值。
SHOW PORTPPSBASELINE

(No.1) : SHOW PORTPPSBASELINE:
-----------------CommonS_IPS_0----------------

操作维护       端口流量PPS基准值(KPPS) 
---------------------------------------
修改           0                       
---------------------------------------
记录数：1

执行成功开始时间:2021-10-22 14:04:16 耗时: 0.83 秒

` 


### IPSUDPCHECKSUM校验配置 
### IPSUDPCHECKSUM校验配置 


[](None)背景知识 


报文由于硬件或者网络原因，报文中的字段可能被改写，在接收侧可根据需要对报文进行Checksum校验，防止出现字段被改写情况对系统产生影响。 




[](None)功能说明 


该配置用于查询或者设置经过IPS的UDP报文的Checksum校验规则。默认不配置时，不启用经过IPS的UDP报文的Checksum校验，即该配置不会影响原有的UDP报文转发流程；如果设置了经过IPS的UDP报文的Checksum校验规则，则会根据设置的规则进行校验并执行相应动作。 




[](None)子主题： 






#### 修改IPS UDP Checksum配置(SET IPSUDPCHECKSUMCONFIG) 
#### 修改IPS UDP Checksum配置(SET IPSUDPCHECKSUMCONFIG) 


[](None)功能说明 

该命令用于设置经过IPS的UDP报文的Checksum过滤规则。 


[](None)注意事项 

该命令可开启对UDP报文的Checksum计算，当计算Checksum时会消耗CPU资源，降低系统性能。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SERVICETYPE|业务类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示或者设置UDP checksum 配置的服务类型。
VERIFYCHECKSUM|校验CHECKSUM|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示或者设置UDP checksum 配置的开关。
CHECKRESULTACTION|校验结果动作|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示或者设置UDP checksum 配置的校验结果动作。




[](None)命令举例 


`
该命令用于设置入向为SMF网元，经过IPS的UDP报文类型为PFCP的校验规则为开启状态，如果报文的Checksum错误，则校验结果动作为统计+告警；如果报文的Checksum正确，则不进行任何操作。
SET IPSUDPCHECKSUMCONFIG:SERVICETYPE="SMF_PFCP",VERIFYCHECKSUM="ENABLE",CHECKRESULTACTION="STATISTIC_ALARM"

(No.2) : SET IPSUDPCHECKSUMCONFIG:SERVICETYPE="SMF_PFCP",VERIFYCHECKSUM="ENABLE",CHECKRESULTACTION="STATISTIC_ALARM"
-----------------CommonS_IPS_0----------------
执行成功开始时间:2021-07-29 19:23:40 耗时: 0.133 秒

` 


#### 查询IPS UDP Checksum配置(SHOW IPSUDPCHECKSUMCONFIG) 
#### 查询IPS UDP Checksum配置(SHOW IPSUDPCHECKSUMCONFIG) 


[](None)功能说明 

该命令用于显示经过IPS的UDP报文的Checksum过滤规则。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SERVICETYPE|业务类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于显示或者设置UDP checksum 配置的服务类型。
VERIFYCHECKSUM|校验CHECKSUM|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于显示或者设置UDP checksum 配置的开关。
CHECKRESULTACTION|校验结果动作|参数可选性: 任选参数类型: 枚举，参见枚举定义|该参数用于显示或者设置UDP checksum 配置的校验结果动作。




[](None)命令举例 


`
该命令用于查询所有经过IPS的UDP报文类型和对应的校验结果动作的校验规则。
SHOW IPSUDPCHECKSUMCONFIG

(No.1) : 
-----------------CommonS_IPS_0----------------
操作维护       业务类型     校验CHECKSUM 校验结果动作 
------------------------------------------------------
修改           SMF PFCP     关闭         统计         
修改           SMF GTP      关闭         统计         
修改           UPF PFCP     关闭         统计         
修改           UPF GTP      关闭         统计         
修改           SMF RADIUS   关闭         统计         
修改           DNAAA SERVER 关闭         统计         
修改           DNAAA CLIENT 关闭         统计         
修改           AMF GTP      开启         统计+丢包    
------------------------------------------------------
记录数：8
执行成功开始时间:2021-07-29 19:21:46 耗时: 0.616 秒

` 


### IPS限速控制模式配置 
### IPS限速控制模式配置 


[](None)背景知识 


IPS（Interface Process Service，接口处理服务）向业务SCCU（Service Component Control Unit，服务组件控制单元）转发报文时，由于IPS性能远超SCCU，且IPS可通过扩容增加数量，所以当IPS转发报文的速度超过SCCU处理能力瓶颈时，将导致系统运行异常。因此，当IPS转发流量达到一定门限时，需要对IPS的转发做限速处理。 




[](None)功能说明 


该配置用于设置或查询IPS转发流量限速控制模式。 


 
基于窗口的限速控制模式：IPS向业务SCCU转发报文时窗口数量减少，通过控制SCCU给IPS发送确认报文的速率来决定IPS窗口数量的增加。当窗口数量减少到0时，限制IPS向业务SCCU转发报文，直到窗口数量大于0。 

 
基于令牌的限速控制模式：IPS向业务SCCU转发报文时获取令牌，令牌数量减少；IPS定时生成令牌（定时时间间隔为当前转发报文的时间戳与上次生成令牌时间戳的差值），令牌数量增加。当令牌数量减少到0时，限制IPS向业务SCCU转发报文，直到令牌数量大于0。 

 

默认配置为基于窗口的限速控制模式。 




[](None)子主题： 






#### 设置IPU转发流量限速控制模式配置(SET IPSRATELIMITMODE) 
#### 设置IPU转发流量限速控制模式配置(SET IPSRATELIMITMODE) 


[](None)功能说明 

该命令用于设置IPU转发流量限速控制模式。当IPU向业务SCCU转发报文的速度超过SCCU处理能力瓶颈时，需要根据业务和两种限速控制模式的特点，执行该命令选择合适的限速模式。 


 
若业务需要实时主动控制IPU转发流量时，可采用基于窗口的限速控制模式，通过控制SCCU给IPU发送确认报文的速率来决定IPU窗口数量增加的速率（即控制IPU可用窗口的数量），控制IPU转发报文到业务SCCU的能力。 

 
若业务不需要实时控制IPU转发流量时，可采用基于令牌的限速控制模式，使用IPU默认的限速机制，令牌耗尽时限制IPU向业务SCCU转发报文。 

 


[](None)注意事项 

基于窗口的限速模式，转发流量门限值当前为业务提供的固定值。 

基于令牌的限速模式，IPU转发流量的门限值由承诺的令牌数量决定。配置承诺令牌数量的命令由业务提供，比如，归属CommonS_SIG服务组件的业务提供了基于SCTP协议的修改SCTP全局配置命令（${SET SCTPGLOBAL}），归属CommonS_HTTP_LB服务组件的业务提供了基于TCP协议的新增全局参数配置（${ADD GLOBALPARAMETER}）和修改全局参数配置（${SET GLOBALPARAMETER}）。具体使用请咨询对应业务服务组件。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RATELIMITMODE|IPU转发流量过负荷限速控制模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: WINDOW_RATELIMIT|该参数用于设置IPS转发流量限速控制模式。基于窗口的限速控制模式：IPS向业务SCCU转发报文时窗口数量减少，通过控制SCCU给IPS发送确认报文的速率来决定IPS窗口数量的增加。当窗口数量减少到0时，限制IPS向业务SCCU转发报文，直到窗口数量大于0。基于令牌的限速控制模式：IPS向业务SCCU转发报文时获取令牌，令牌数量减少；IPS定时生成令牌（定时时间间隔为当前转发报文的时间戳与上次生成令牌时间戳的差值），令牌数量增加。当令牌数量减少到0时，限制IPS向业务SCCU转发报文，直到令牌数量大于0。




[](None)命令举例 


`
设置IPU转发流量限速控制模式。
SET IPSRATELIMITMODE:RATELIMITMODE="TOKEN_RATELIMIT"
` 


#### 查询IPU转发流量限速控制模式配置(SHOW IPSRATELIMITMODE) 
#### 查询IPU转发流量限速控制模式配置(SHOW IPSRATELIMITMODE) 


[](None)功能说明 

该命令用于查询IPU转发流量限速控制模式，包含基于窗口的限速控制模式和基于令牌的限速控制模式。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RATELIMITMODE|IPU转发流量过负荷限速控制模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: WINDOW_RATELIMIT|该参数用于设置IPS转发流量限速控制模式。基于窗口的限速控制模式：IPS向业务SCCU转发报文时窗口数量减少，通过控制SCCU给IPS发送确认报文的速率来决定IPS窗口数量的增加。当窗口数量减少到0时，限制IPS向业务SCCU转发报文，直到窗口数量大于0。基于令牌的限速控制模式：IPS向业务SCCU转发报文时获取令牌，令牌数量减少；IPS定时生成令牌（定时时间间隔为当前转发报文的时间戳与上次生成令牌时间戳的差值），令牌数量增加。当令牌数量减少到0时，限制IPS向业务SCCU转发报文，直到令牌数量大于0。




[](None)命令举例 


`
查询IPU转发流量限速控制模式。
SHOW IPSRATELIMITMODE:

(No.1) : SHOW IPSRATELIMITMODE:
-----------------CommonS_IPU_0----------------

操作维护       IPU转发流量过负荷限速控制模式 
---------------------------------------------
修改           基于窗口的限速控制模式        
---------------------------------------------
记录数：1

执行成功开始时间:2021-10-22 10:12:26 耗时: 0.964 秒

` 


### 跨域转发配置 
### 跨域转发配置 


[](None)背景知识 


双域升级是一种较少呼损的平滑升级方式，升级过程中将整个网元切分为左、右两个域，右域升级新版本、左域保持老版本，双域同时承担业务。双域间网络隔离，跨域消息的转发需要经过IPS。跨域转发配置用于在双域升级前对IPS进行接口地址的配置，用于双域间IPS消息互转。 




[](None)功能说明 


该配置用于双域升级前对IPS进行接口地址配置。在双域升级过程中，IPS基于配置的接口地址、VRF等信息，进行左右域SC之间的建链，实现报文在左右域之间的互转。当需要手工配置跨域转发配置，由于双域间网络隔离，如果不正确配置，跨域的业务报文将无法通过IPS进行互转。 




[](None)子主题： 






#### 新增跨域配置(ADD DUALDOMAINFORWARDENDPOINT) 
#### 新增跨域配置(ADD DUALDOMAINFORWARDENDPOINT) 


[](None)功能说明 

该配置用于双域升级前，新增IPS跨域转发配置。当不使用第一个IPS接口，或者不同IPS的第一个接口地址不在同一网络，则需要手工执行该命令，由操作维护人员保证所有IPS的接口地址在同一网络。命令执行成功后，对应IPS SC使用该配置进行跨域消息的转发。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INTERFACE|接口名|参数可选性: 必选参数类型: 字符串参数范围: 1-63|该参数表示用于转发双域互转消息的IPS接口的名称。
IPVERSION|IP类型|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: IPV4|该参数表示用于转发双域互转消息的IPS接口的IP地址类型。
LOCALVRF|VRF|参数可选性: 必选参数类型: 数字参数范围: 0-4095默认值: 0|该参数表示用于转发双域互转消息的IPS接口地址所属的VRF。
IP|IP地址|参数可选性: 必选参数类型: 字符串|该参数表示用于转发双域互转消息的IPS接口的IP地址。
PORT|端口号|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 10000|该参数表示用于转发双域互转消息的端口号。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INTERFACE|接口名|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数表示用于转发双域互转消息的IPS接口的名称。
IPVERSION|IP类型|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: IPV4|该参数表示用于转发双域互转消息的IPS接口的IP地址类型。
LOCALVRF|VRF|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|该参数表示用于转发双域互转消息的IPS接口地址所属的VRF。
IP|IP地址|参数可选性: 任选参数类型: 字符串|该参数表示用于转发双域互转消息的IPS接口的IP地址。
PORT|端口号|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 10000|该参数表示用于转发双域互转消息的端口号。




[](None)命令举例 


`
增加跨域转发配置，接口名称为"xgei-1/0/1/1"，协议类型为"IPV4"，VRF为0，IP地址为"1.1.1.1"。
ADD DUALDOMAINFORWARDENDPOINT:INTERFACE="xgei-1/0/1/1",IPVERSION="IPV4",LOCALVRF=0,IP="1.1.1.1"
` 


#### 删除跨域配置(DEL DUALDOMAINFORWARDENDPOINT) 
#### 删除跨域配置(DEL DUALDOMAINFORWARDENDPOINT) 


[](None)功能说明 

该配置用于删除IPS跨域转发配置。当配置错误，或者双域升级完成之后不再需要该配置时，执行该删除命令。配置删除后，对应的IPS不再进行双域互转消息的收发。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INTERFACE|接口名|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数表示用于转发双域互转消息的IPS接口的名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INTERFACE|接口名|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数表示用于转发双域互转消息的IPS接口的名称。
IPVERSION|IP类型|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: IPV4|该参数表示用于转发双域互转消息的IPS接口的IP地址类型。
LOCALVRF|VRF|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|该参数表示用于转发双域互转消息的IPS接口地址所属的VRF。
IP|IP地址|参数可选性: 任选参数类型: 字符串|该参数表示用于转发双域互转消息的IPS接口的IP地址。
PORT|端口号|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 10000|该参数表示用于转发双域互转消息的端口号。




[](None)命令举例 


`
删除接口名称为"xgei-1/0/1/1"的跨域转发配置。
DEL DUALDOMAINFORWARDENDPOINT:INTERFACE="xgei-1/0/1/1"
` 


#### 查询跨域配置(SHOW DUALDOMAINFORWARDENDPOINT) 
#### 查询跨域配置(SHOW DUALDOMAINFORWARDENDPOINT) 


[](None)功能说明 

该配置用于查询IPS跨域转发配置。当需要检查当前的IPS跨域转发配置时，执行该命令，用于显示所有的跨域转发的配置信息。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INTERFACE|接口名|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数表示用于转发双域互转消息的IPS接口的名称。
IPVERSION|IP类型|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: IPV4|该参数表示用于转发双域互转消息的IPS接口的IP地址类型。
LOCALVRF|VRF|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|该参数表示用于转发双域互转消息的IPS接口地址所属的VRF。
IP|IP地址|参数可选性: 任选参数类型: 字符串|该参数表示用于转发双域互转消息的IPS接口的IP地址。
PORT|端口号|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 10000|该参数表示用于转发双域互转消息的端口号。




[](None)命令举例 


`
查询跨域转发配置。
SHOW DUALDOMAINFORWARDENDPOINT:

(No.2) : SHOW DUALDOMAINFORWARDENDPOINT:
-----------------smf72/CommonS_IPS_0----------------
操作维护       接口名       IP类型 VRF IP地址  端口号 
------------------------------------------------------
复制 删除      xgei-1/0/1/1 IPV4   0   1.1.1.1 10000  
------------------------------------------------------
记录数：1

执行成功开始时间:2021-12-20 17:03:57 耗时: 0.866秒

` 


### 跨域自动配置开关 
### 跨域自动配置开关 


[](None)背景知识 


IPS双域升级功能提供了两种跨域的配置方式。 

运维人员手动在EM界面配置IPS接口地址等信息。 

 
升级前由IPS自动读取接口信息，生成对应跨域转发配置。 

 




[](None)功能说明 


该配置用于控制是否开启“跨域转发配置”的自动配置。若运维人员期望IPS自动读取接口信息，生成跨域转发配置，则需要开启该自动配置开关；若期望手工设置跨域转发的接口信息，禁用IPS自动生成配置，则需要关闭该自动配置开关。 




[](None)子主题： 






#### 修改跨域互转自动配置(SET DUALDOMAINFORWARDAUTOCONFIG) 
#### 修改跨域互转自动配置(SET DUALDOMAINFORWARDAUTOCONFIG) 


[](None)功能说明 

该命令用于设置跨域自动配置的开关。若运维人员期望IPS自动选择第一个接口地址作为互转的接口，生成跨域转发配置，则需要开启该自动配置开关；若不使用第一个IPS接口，或者不同IPS的第一个接口地址不在同一网络，则需要使用手动配置，由操作维护人员保证所有IPS的接口地址在同一网络，此时需要关闭该自动配置开关。 


[](None)注意事项 

无


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
AUTOCONFIG|自动配置|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数表示IPS跨域自动配置开关。打开该控制开关时，表示启用IPS开启双域自动配置功能。




[](None)命令举例 


`
设置跨域自动配置开关为ENABLE。
SET DUALDOMAINFORWARDAUTOCONFIG:AUTOCONFIG="ENABLE"
` 


#### 查询跨域互转自动配置(SHOW DUALDOMAINFORWARDAUTOCONFIG) 
#### 查询跨域互转自动配置(SHOW DUALDOMAINFORWARDAUTOCONFIG) 


[](None)功能说明 

该命令用于查询双域互转自动配置的开关。当需要查询当前的跨域自动配置时，执行该命令。 


[](None)注意事项 

无


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
AUTOCONFIG|自动配置|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: ENABLE|该参数表示IPS跨域自动配置开关。打开该控制开关时，表示启用IPS开启双域自动配置功能。




[](None)命令举例 


`
查询跨域自动配置开关。
SHOW DUALDOMAINFORWARDAUTOCONFIG:

(No.2) : SHOW DUALDOMAINFORWARDAUTOCONFIG
-----------------smf72/CommonS_IPS_0----------------
操作维护       自动配置 
------------------------
修改           启用     
------------------------
记录数：1

执行成功开始时间:2021-12-21 17:10:53 耗时: 1.236秒


` 


### IPS孤岛检测配置 
### IPS孤岛检测配置 


[](None)背景知识 


IPS（Interface Process Service，接口处理服务）容器孤岛时，IPS容器的业务网络平面和管理网络平面均不通，此时SCCU（Service Component Control Unit，服务组件控制单元）无法检测和控制IPS的状态，但是IPS可能依然具备正常接收外部设备消息的能力，即对外部设备而言，IPS状态正常，但是对内部容器而言，IPS状态异常。 




[](None)功能说明 


该配置用于设置或查询IPS孤岛检测功能。功能开启时，若IPS处于孤岛状态，IPS会重启，外部设备可感知IPS异常。 




[](None)子主题： 






#### 设置IPS孤岛检测配置(SET IPSISLANDDETECTION) 
#### 设置IPS孤岛检测配置(SET IPSISLANDDETECTION) 


[](None)功能说明 

该命令用于配置IPS孤岛检测功能开关和孤岛检测时长。当IPS处于孤岛状态时，SCCU无法控制IPS状态，用户可通过开启该功能让IPS自检孤岛时自动重启。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DETECTIONSWITCH|IPS孤岛检测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置是否开启IPS孤岛检测功能。若设置为DISABLE，当IPS孤岛后，IPS容器不重启。若设置为ENABLE，当IPS自检到孤岛后，IPS容器重启。
TIMEOUT|IPS孤岛检测超时|参数可选性: 任选参数类型: 数字参数范围: 6-300默认值: 30|该参数用于设置IPS孤岛检测超时时长。当“IPS孤岛检测开关”参数设置为ENABLE时，需要设置该参数，控制孤岛状态持续时间超过检测时长时重启IPS容器。




[](None)命令举例 


`
设置IPS孤岛检测功能开启，检测时长30秒。
SET IPSISLANDDETECTION:DETECTIONSWITCH="ENABLE",TIMEOUT=30
` 


#### 查询IPS孤岛检测配置(SHOW IPSISLANDDETECTION) 
#### 查询IPS孤岛检测配置(SHOW IPSISLANDDETECTION) 


[](None)功能说明 

该命令用于查看IPS孤岛检测功能配置，包含功能开启状态和孤岛检测时长。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
DETECTIONSWITCH|IPS孤岛检测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置是否开启IPS孤岛检测功能。若设置为DISABLE，当IPS孤岛后，IPS容器不重启。若设置为ENABLE，当IPS自检到孤岛后，IPS容器重启。
TIMEOUT|IPS孤岛检测超时|参数可选性: 任选参数类型: 数字参数范围: 6-300默认值: 30|该参数用于设置IPS孤岛检测超时时长。当“IPS孤岛检测开关”参数设置为ENABLE时，需要设置该参数，控制孤岛状态持续时间超过检测时长时重启IPS容器。




[](None)命令举例 


`
查询IPS孤岛检测功能开启状态和孤岛检测时长。
SHOW IPSISLANDDETECTION:

(No.1) : SHOW IPSISLANDDETECTION:
-----------------CommonS_IPU_0----------------

操作维护       IPS孤岛检测开关     IPS孤岛检测时长(second)
---------------------------------------------
修改           启用                30
---------------------------------------------
记录数：1

执行成功开始时间:2021-10-22 10:12:26 耗时: 0.964 秒

` 


### SC性能统计管理 
### SC性能统计管理 


[](None)背景知识 


当命令显示SC性能([SHOW POD](../mml/unknownCmdCode.html))不能满足查询SC性能统计的需要时，按SC测量对象名信息配置是SC性能统计的可选配置。




[](None)功能说明 


当SC性能统计([SHOW POD](../mml/unknownCmdCode.html))不能满足某类服务组件的需要时，可以使用该配置定制，通过设置SC名称与别名的对应关系，在创建测试任务时可以选择创建的记录，进而可以查询到SC的基本性能，包括内存和CPU使用率等实时信息。




[](None)子主题： 






## IPS全局配置管理 
## IPS全局配置管理 


[](None)背景知识 


IPS新增功能或热补丁时，为增加版本兼容性，需要使用开关对功能的启用或者流程进行控制。此节点下命令为全局开关参数相关配置命令或查询命令。预留的开关在新增开发时与其完成关联，可通过配置命令在线修改配置参数。 




[](None)功能说明 


此节点下，包含全局参数有关配置、查询命令。 

此功能为全局参数预留了250个配置开关，当有新增功能需要使用开关控制时，需要分配一个配置开关索引，并以此与新增的功能关联。当需要修改开关控制流程或功能启用时，根据索引配置该组命令。 




[](None)子主题： 






### 全局参数配置 
### 全局参数配置 


[](None)背景知识 


某种场景下，需要对某个功能的参数进行修改。此配置命令用于修改对应的参数值。已分配使用的开关请使用SHOW GLOBAL PARAM查询。 




[](None)功能说明 


此配置用于修改对应ID的配置值，实现对新增功能、热补丁启用、或流程控制。 

配置参数通过ID与功能关联，修改ID对应的配置，可修改其参数值。如果不配置或者删除配置，则对应功能的参数使用默认值。 

已使用的参数值详细信息请参考SHOW GLOBAL PARAM的返回结果。 




[](None)子主题： 






#### 新增全局参数配置(ADD IPSGLOBALPARAM) 
#### 新增全局参数配置(ADD IPSGLOBALPARAM) 


[](None)功能说明 

该命令用于增加全局参数配置。 

当需要增加全局参数配置时，使用该配置命令增加配置，用于覆盖默认值。 

第一次修改参数值，需要使用ADD IPSGLOBALPARAM命令新增，后续修改VALUE，须使用SET IPSGLOBALPARAM命令。 

配置增加成功后，对应ID的全局参数值修改为配置值。 

参数范围、默认值、详细说明等可通过SHOW GLOBAL PARAM动态命令查询。例如，
参数1：TCP报文查询转发表失败时发送RST报文开关（0-关闭；1-打开。默认：0-关闭）。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 必选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。
VALUE|参数值|参数可选性: 必选参数类型: 数字|参数作用：该参数表示全局参数的值。数据来源：本端规划，可通过SHOW GLOBAL PARAM动态命令查询。配置原则：根据本端规划、功能启用与否等修改参数值。参数值范围需要在SHOW GLOBAL PARAM动态命令查询结果定义的范围内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 任选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。
VALUE|参数值|参数可选性: 任选参数类型: 数字|参数作用：该参数表示全局参数的值。数据来源：本端规划，可通过SHOW GLOBAL PARAM动态命令查询。配置原则：根据本端规划、功能启用与否等修改参数值。参数值范围需要在SHOW GLOBAL PARAM动态命令查询结果定义的范围内。




[](None)命令举例 


`
新增ID为1的全局参数值为0。
ADD IPSGLOBALPARAM:ID=1,VALUE=0
` 


#### 修改全局参数配置(SET IPSGLOBALPARAM) 
#### 修改全局参数配置(SET IPSGLOBALPARAM) 


[](None)功能说明 

该命令用于修改全局参数配置。 

当需要修改全局参数值时，使用该配置命令修改已有配置，生效的值会覆盖默认值。 

配置修改成功后，对应ID的全局参数值修改为配置值。参数范围、默认值、详细说明等可通过SHOW GLOBAL PARAM动态命令查询。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 必选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。
VALUE|参数值|参数可选性: 任选参数类型: 数字|参数作用：该参数表示全局参数的值。数据来源：本端规划，可通过SHOW GLOBAL PARAM动态命令查询。配置原则：根据本端规划、功能启用与否等修改参数值。参数值范围需要在SHOW GLOBAL PARAM动态命令查询结果定义的范围内。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 任选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。
VALUE|参数值|参数可选性: 任选参数类型: 数字|参数作用：该参数表示全局参数的值。数据来源：本端规划，可通过SHOW GLOBAL PARAM动态命令查询。配置原则：根据本端规划、功能启用与否等修改参数值。参数值范围需要在SHOW GLOBAL PARAM动态命令查询结果定义的范围内。




[](None)命令举例 


`
修改ID为1的全局参数值为1。
SET IPSGLOBALPARAM:ID=1,VALUE=1
` 


#### 删除全局参数配置(DEL IPSGLOBALPARAM) 
#### 删除全局参数配置(DEL IPSGLOBALPARAM) 


[](None)功能说明 

该命令用于删除全局参数配置。 

当需要删除全局参数值时，使用该配置命令修改已有配置。 

删除配置成功后，对应ID的全局参数恢复为默认值。对应功能的参数范围、默认值、详细说明等可通过SHOW GLOBAL PARAM动态命令查询。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 必选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 任选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。
VALUE|参数值|参数可选性: 任选参数类型: 数字|参数作用：该参数表示全局参数的值。数据来源：本端规划，可通过SHOW GLOBAL PARAM动态命令查询。配置原则：根据本端规划、功能启用与否等修改参数值。参数值范围需要在SHOW GLOBAL PARAM动态命令查询结果定义的范围内。




[](None)命令举例 


`
删除ID为1的全局参数配置。
DEL IPSGLOBALPARAM:ID=1
` 


#### 查询全局参数配置(SHOW IPSGLOBALPARAM) 
#### 查询全局参数配置(SHOW IPSGLOBALPARAM) 


[](None)功能说明 

该命令用于查询全局参数配置。 

未配置参数不在此显示，请使用SHOW GLOBAL PARAM动态命令查询。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 任选参数类型: 数字参数范围: 1-250|参数作用：该参数表示全局参数的索引编号，每个ID唯一确定配置参数。数据来源：本端规划，通过SHOW GLOBAL PARAM动态命令查询获取。配置原则：根据本端规划、功能启用与否选择。
VALUE|参数值|参数可选性: 任选参数类型: 数字|参数作用：该参数表示全局参数的值。数据来源：本端规划，可通过SHOW GLOBAL PARAM动态命令查询。配置原则：根据本端规划、功能启用与否等修改参数值。参数值范围需要在SHOW GLOBAL PARAM动态命令查询结果定义的范围内。




[](None)命令举例 


`
查询全局参数配置。
SHOW IPSGLOBALPARAM

(No.1) : SHOW IPSGLOBALPARAM
-----------------ips_111/CommonS_IPS_0----------------
操作维护       编号 参数值 
---------------------------
复制 修改 删除 1    1    
---------------------------
记录数：1

执行成功开始时间:2022-09-05 19:06:05 耗时: 2.386秒

` 


### 全局配置查询 
### 全局配置查询 


[](None)背景知识 


某些场景下，需要查询全部或者某个参数的生效值、最大值、最小值等。此命令用于查询对应ID的参数值。 




[](None)功能说明 


此命令为全局参数的动态查询命令，用于查询对应ID的配置值，包括默认值、可配置的最大值、最小值等。 

通过全局参数配置命令修改对应ID的配置。 




[](None)子主题： 






#### 查询全局参数(SHOW GLOBAL PARAM) 
#### 查询全局参数(SHOW GLOBAL PARAM) 


[](None)功能说明 

该命令用于查询全局参数信息。 

当需要查询全局参数的取值范围、默认值、当前取值及参数描述时，可使用该命令。 

入参表示参数对应的ID，0表示显示全部使用的全局参数信息，非0表示显示对应ID的全局参数信息。 

参数修改须使用IPSGLOBALPARAM配置命令，同时保证修改的参数值在规定范围之内。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|全局参数ID|参数可选性: 必选参数类型: 数字参数范围: 0-250默认值: 0|参数作用：该参数用于表示全局参数ID。数据来源：本端规划。配置原则：根据实际需要填写。0：表示显示当前所有的全局参数。N：表示显示编号为N的全局参数。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|编号|参数可选性: 必选参数类型: 数字参数范围: 0-250|该参数表示全局参数ID，ID唯一确定全局参数。
Value|参数值|参数可选性: 必选参数类型: 数字|该参数表示全局参数当前生效值。
DefaultValue|默认值|参数可选性: 必选参数类型: 数字|该参数表示全局参数默认值。当IPSGLOBALPARAM配置命令未配置，或配置删除后，默认值生效。
MaxValue|最大值|参数可选性: 必选参数类型: 数字|该参数表示全局参数可配置最大值。IPSGLOBALPARAM配置命令增加或修改全局参数值时，不能超过此最大值。
MinValue|最小值|参数可选性: 必选参数类型: 数字|该参数表示全局参数可配置最小值。IPSGLOBALPARAM配置命令增加或修改全局参数值时，不能小于此最小值。
Desc|参数描述|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数表示全局参数描述信息。




[](None)命令举例 


`
查询ID为1的全局参数信息。
SHOW GLOBAL PARAM:ID=1
(No.1) : SHOW GLOBAL PARAM:ID=1

-----------------ips_111/CommonS_IPS_0----------------
编号 参数值 默认值 最大值 最小值 参数描述       
------------------------------------------------
1    1    0        1      0      全局参数描述 
------------------------------------------------
记录数：1

执行成功开始时间:2022-09-05 19:17:47 耗时: 1.667秒

` 


## IPPD配置 
## IPPD配置 


[](None)背景知识 


IPS支持IPPD功能是指IPS支持网络QoS和带宽检测。
PD，是Path Detect的缩写，即通路检测，用来反映当前网络的好坏状况。IPPD，是PD的另一种叫法，名称显示了PD基于底层IP协议。 

QoS（Quality of Service）服务质量，是网络的一种安全机制， 是用来解决网络延迟和阻塞等问题的一种技术。QOS指标包括了时延，时延变化（抖动），丢包，乱序这四个最重要指标。 




[](None)功能说明 


IPPD用于检测两个跨地区的NF（或本端设备与对端设备，包括交换机）之间的IP网络QoS质量，以性能统计上报并支持QoS抖动等告警。 




[](None)子主题： 






### 新增IPPD配置(ADD IPPD) 
### 新增IPPD配置(ADD IPPD) 


[](None)功能说明 

该命令用于新增IPPD通路，需要配置通路的名称，建立通路的地址类型，通路的本端地址和远端地址，通路所在的私网ID可以显示配置，也可以使用默认值0。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PATHNAME|IPPD路径名称|参数可选性: 必选参数类型: 字符串参数范围: 1-63|该参数用于配置IPPD名称，用于标识一条检测路径。
IPVERSION|用于建立IPPD路径的地址类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-2默认值: IPV4|该参数表示用于建立IPPD的地址类型，包括如下取值：IPV4：默认值，通路两端使用IPV4地址类型。IPV6：通路两端使用IPV6地址类型。
SRCIP|用于建立IPPD路径的源IP地址|参数可选性: 必选参数类型: 字符串|该参数用于配置建立IPPD的源IP地址，此地址为IPV4或IPV6地址，需要根据参数IPVERSION来确定。
DESTIP|用于建立IPPD路径的目的IP地址|参数可选性: 必选参数类型: 字符串|该参数用于配置建立IPPD的目的IP地址，此地址为IPV4或IPV6地址，需要根据参数IPVERSION来确定。
LOCALVRF|用于指定该IPPD路径所在的私网实例id|参数可选性: 必选参数类型: 数字参数范围: 0-4095默认值: 0|该参数用于指定该IPPD通路所在的私网实例id，需要查看该通路远端地址对应的出向路由获取到出接口的VRFID，保证通路LOCALVRF和出接口的VRFID一致，否则路由不可达。
INTERVAL|用于建立IPPD路径的发包间隔|参数可选性: 任选参数类型: 数字参数范围: 2-250默认值: 50|该参数用于配置IPPD报文的发包间隔，单位20ms。
TIMEOUT|用于建立IPPD路径的超时时长|参数可选性: 任选参数类型: 数字参数范围: 1-50默认值: 25|该参数用于配置IPPD报文的超时时长，单位20ms。
UNREACHALARMCYCLE|承载网中断告警周期|参数可选性: 任选参数类型: 数字参数范围: 1-9000默认值: 50|该参数用于配置承载网中断告警周期，单位20ms。
WORSEALARMTHRESHOLD|承载网质量变差告警丢包率门限(%)|参数可选性: 任选参数类型: 数字参数范围: 1-99默认值: 2|该参数用于配置承载网质量变差告警阈值（百分比），当承载网的丢包率达到告警阈值时，会上报承载网质量变差告警。
INTERFACE|链路指定出接口|参数可选性: 任选参数类型: 字符串参数范围: 1-20|该参数用于配置链路指定出接口，表示IPPD检测报文从哪个接口出网元。
UNREACHPROCESS|链路不可用的处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ALARM_ONLY|该参数用于配置链路不可用的处理。有以下两种处理方式：ALARM_ONLY，：只上报告警。ALARM_AND_FAIL_REPORT：同时上报告警和故障。




[](None)命令举例 


`
增加IPPD通路，通路名称为path1，地质类型为IPV4，本端ipv4地址为194.168.20.100，远端ipv4地址为194.168.20.200，通路所在VRFID为0，发包时长和超时时长使用默认值，指定出接口xgei-1/0/1/1。
ADD IPPD:PATHNAME="path1",IPVERSION="IPV4",SRCIP=194.168.20.100,DESTIP=194.168.20.200,LOCALVRF=0,INTERVAL=50,TIMEOUT=25,INTERFACE="xgei-1/0/1/1"
` 


### 修改IPPD配置(SET IPPD) 
### 修改IPPD配置(SET IPPD) 


[](None)功能说明 

该命令用于修改IPPD通路配置，包括发包间隔和超时时长。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PATHNAME|IPPD路径名称|参数可选性: 必选参数类型: 字符串参数范围: 1-63|该参数用于配置IPPD名称，用于标识一条检测路径。
INTERVAL|用于建立IPPD路径的发包间隔|参数可选性: 任选参数类型: 数字参数范围: 2-250默认值: 50|该参数用于配置IPPD报文的发包间隔，单位20ms。
TIMEOUT|用于建立IPPD路径的超时时长|参数可选性: 任选参数类型: 数字参数范围: 1-50默认值: 25|该参数用于配置IPPD报文的超时时长，单位20ms。
UNREACHALARMCYCLE|承载网中断告警周期|参数可选性: 任选参数类型: 数字参数范围: 1-9000默认值: 50|该参数用于配置承载网中断告警周期，单位20ms。
UNREACHPROCESS|链路不可用的处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ALARM_ONLY|该参数用于配置链路不可用的处理。有以下两种处理方式：ALARM_ONLY，：只上报告警。ALARM_AND_FAIL_REPORT：同时上报告警和故障。




[](None)命令举例 


`
修改IPPD通路配置，通路名称为path1，修改检测报文发送间隔为2，超时时长为1。
SET IPPD:PATHNAME="path1",INTERVAL=2,TIMEOUT=1
` 


### 删除IPPD配置(DEL IPPD) 
### 删除IPPD配置(DEL IPPD) 


[](None)功能说明 

该命令用于删除IPPD通路配置，通过通路名称删除某一条通路的配置信息。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PATHNAME|IPPD路径名称|参数可选性: 必选参数类型: 字符串参数范围: 1-63|该参数用于配置IPPD名称，用于标识一条检测路径。




[](None)命令举例 


`
删除IPPD通路配置，通路名称为path1。
DEL IPPD:PATHNAME="path1"
` 


### 查询IPPD配置(SHOW IPPD) 
### 查询IPPD配置(SHOW IPPD) 


[](None)功能说明 

该命令用于查询IPPD通路配置，可以指定查询某一条通路的信息，也可以查询所有配置的通路信息。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PATHNAME|IPPD路径名称|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数用于配置IPPD名称，用于标识一条检测路径。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PATHNAME|IPPD路径名称|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数用于配置IPPD名称，用于标识一条检测路径。
PATHID|IPPD路径ID|参数可选性: 任选参数类型: 数字参数范围: 1-128|该参数用于标识IPPD路径ID，是配置表IPPDPathCfg的唯一索引，在配置中不体现。
IPVERSION|用于建立IPPD路径的地址类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-2默认值: IPV4|该参数表示用于建立IPPD的地址类型，包括如下取值：IPV4：默认值，通路两端使用IPV4地址类型。IPV6：通路两端使用IPV6地址类型。
SRCIP|用于建立IPPD路径的源IP地址|参数可选性: 任选参数类型: 字符串|该参数用于配置建立IPPD的源IP地址，此地址为IPV4或IPV6地址，需要根据参数IPVERSION来确定。
DESTIP|用于建立IPPD路径的目的IP地址|参数可选性: 任选参数类型: 字符串|该参数用于配置建立IPPD的目的IP地址，此地址为IPV4或IPV6地址，需要根据参数IPVERSION来确定。
LOCALVRF|用于指定该IPPD路径所在的私网实例id|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|该参数用于指定该IPPD通路所在的私网实例id，需要查看该通路远端地址对应的出向路由获取到出接口的VRFID，保证通路LOCALVRF和出接口的VRFID一致，否则路由不可达。
INTERVAL|用于建立IPPD路径的发包间隔|参数可选性: 任选参数类型: 数字参数范围: 2-250默认值: 50|该参数用于配置IPPD报文的发包间隔，单位20ms。
TIMEOUT|用于建立IPPD路径的超时时长|参数可选性: 任选参数类型: 数字参数范围: 1-50默认值: 25|该参数用于配置IPPD报文的超时时长，单位20ms。
UNREACHALARMCYCLE|承载网中断告警周期|参数可选性: 任选参数类型: 数字参数范围: 1-9000默认值: 50|该参数用于配置承载网中断告警周期，单位20ms。
WORSEALARMTHRESHOLD|承载网质量变差告警丢包率门限(%)|参数可选性: 任选参数类型: 数字参数范围: 1-99默认值: 2|该参数用于配置承载网质量变差告警阈值（百分比），当承载网的丢包率达到告警阈值时，会上报承载网质量变差告警。
INTERFACE|链路指定出接口|参数可选性: 任选参数类型: 字符串参数范围: 1-20|该参数用于配置链路指定出接口，表示IPPD检测报文从哪个接口出网元。
UNREACHPROCESS|链路不可用的处理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ALARM_ONLY|该参数用于配置链路不可用的处理。有以下两种处理方式：ALARM_ONLY，：只上报告警。ALARM_AND_FAIL_REPORT：同时上报告警和故障。




[](None)命令举例 


`
查询IPPD通路配置，不指定参数，查询配置的所有通路信息；指定参数通路名称path1，查询该通路配置信息。
SHOW IPPD:PATHNAME="path1"

` 


## Ipv4 Qos Dscp To Vlan Priority 配置 
## Ipv4 Qos Dscp To Vlan Priority 配置 


[](None)背景知识 


运营商可以根据网络规划在不同网络中使用不同的QoS优先级字段，例如在VLAN网络中使用802.1p报文优先级，IPv4网络中使用DSCP。当报文经过不同网络时，为了保持报文的优先级不受影响，需要在连接不同网络的设备上配置这些优先级字段的映射关系。 




[](None)功能说明 


本节点的命令针对运营商的网络规划在不同的网络中使用不同的Qos优先级进行映射规则配置，保证报文优先级在不同网络中（如三层网络和二层网络）中保持一致。 

如果不配置IPv4 Qos规则映射，当运营商在IP层设置高DSCP优先级后，网元在VLAN网络发送报文时将丢失DSCP优先级，在网络遇到阻塞时，高DSCP优先级的报文将不再保证被优先发送。 




[](None)子主题： 






### 新增 ipv4 qos dscp 映射 vlan priority 配置(ADD QOSMAPIPV4) 
### 新增 ipv4 qos dscp 映射 vlan priority 配置(ADD QOSMAPIPV4) 


[](None)功能说明 

该命令用于新增IPv4 DSCP到VLAN  Priority的QoS映射规则。 

运营商可以根据网络规划在不同网络中使用不同的QoS优先级字段，例如在VLAN网络中使用802.1p报文优先级，IPv4网络中使用DSCP。当报文经过不同网络时，为了保持报文的优先级，需要在连接不同网络的设备上配置这些优先级字段的映射关系。 

该命令执行成功后，网元在VLAN网络中发送二层报文时，根据新的映射规则获取VLAN  Priority并封装在VLAN Tag中。 


[](None)注意事项 

应保证DSCPSTART不大于DSCPEND后才能执行该命令，否则命令执行失败。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的VLAN ID。数据来源：全网规划。配置原则：VLAN  ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
DSCPSTART|dscp 起始值|参数可选性: 必选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP起始值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
DSCPEND|dscp 结束值|参数可选性: 必选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP结束值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
VLANPRIORITY|vlan 帧中优先级|参数可选性: 必选参数类型: 数字参数范围: 0-7默认值: 0|参数作用：该参数用于配置映射规则的VLAN  Priority。数据来源：全网规划。配置原则：VLAN  Priority属于Vlan Tag的一个字段，占用3bit，表示数据帧的优先级。取值范围为0～7，数值越大优先级越高。当网络阻塞时，交换机优先发送优先级高的数据帧。




[](None)命令举例 


`
增加一条QoS映射规则：VLAN ID为1500，DSCP段起始值 2，DSCP段结束值4，映射的VLAN优先级为3。
ADD QOSMAPIPV4:VLANID=1500,DSCPSTART=2,DSCPEND=4,VLANPRIORITY=3;
` 


### 修改 ipv4 qos dscp 映射 vlan priority 配置(SET QOSMAPIPV4) 
### 修改 ipv4 qos dscp 映射 vlan priority 配置(SET QOSMAPIPV4) 


[](None)功能说明 

该命令用于修改IPv4 DSCP到VLAN  Priority的QoS映射规则。 

当运营商重新规划在不同网络中使用不同的QoS优先级字段，需要修改IPv4 DSCP到VLAN  Priority的QoS映射规则时，使用该命令。 

该命令执行成功后，网元在VLAN网络中发送二层报文时，根据新的映射规则获取VLAN  Priority并封装在VLAN Tag中。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 必选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的VLAN ID。数据来源：全网规划。配置原则：VLAN  ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
DSCPSTART|dscp 起始值|参数可选性: 必选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP起始值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
DSCPEND|dscp 结束值|参数可选性: 必选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP结束值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
VLANPRIORITY|vlan 帧中优先级|参数可选性: 必选参数类型: 数字参数范围: 0-7默认值: 0|参数作用：该参数用于配置映射规则的VLAN  Priority。数据来源：全网规划。配置原则：VLAN  Priority属于Vlan Tag的一个字段，占用3bit，表示数据帧的优先级。取值范围为0～7，数值越大优先级越高。当网络阻塞时，交换机优先发送优先级高的数据帧。




[](None)命令举例 


`
修改QoS映射规则： VLAN ID为 1500，DSCP段起始值2，DSCP段结束值4， 映射的VLAN优先级修改为5。
SET QOSMAPIPV4:VLANID=1500,DSCPSTART=2,DSCPEND=4,VLANPRIORITY=5;
` 


### 删除 ipv4 qos dscp 映射 vlan priority 配置(DEL QOSMAPIPV4) 
### 删除 ipv4 qos dscp 映射 vlan priority 配置(DEL QOSMAPIPV4) 


[](None)功能说明 

该命令用于删除IPv4 DSCP到VLAN  Priority的QoS映射规则。 

当运营商重新规划在不同网络中使用不同的QoS优先级字段，需要删除IPv4 DSCP到VLAN  Priority的QoS映射规则时，使用该命令。 

该命令执行成功后，网元在VLAN网络中发送二层报文时，将使用默认的VLAN  Priority并封装在VLAN Tag中 


[](None)注意事项 

应确认该条DSCP到VLAN  Priority的QoS映射规则不再需要后，才能执行本命令。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 必选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的VLAN ID。数据来源：全网规划。配置原则：VLAN  ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
DSCPSTART|dscp 起始值|参数可选性: 必选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP起始值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
DSCPEND|dscp 结束值|参数可选性: 必选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP结束值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。




[](None)命令举例 


`
删除已有的QoS映射规则： VLAN ID为1500， DSCP段起始值2， DSCP段结束值4。
DEL QOSMAPIPV4:VLANID=1500,DSCPSTART=2,DSCPEND=4;
` 


### 查询 ipv4 qos dscp 映射 vlan priority 配置(SHOW QOSMAPIPV4) 
### 查询 ipv4 qos dscp 映射 vlan priority 配置(SHOW QOSMAPIPV4) 


[](None)功能说明 

该命令用于查询IPv4 DSCP到VLAN  Priority的QoS映射规则。命令执行成功后，返回指定VLAN ID的所有映射规则。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的VLAN ID。数据来源：全网规划。配置原则：VLAN  ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的VLAN ID。数据来源：全网规划。配置原则：VLAN  ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
DSCPSTART|dscp 起始值|参数可选性: 任选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP起始值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
DSCPEND|dscp 结束值|参数可选性: 任选参数类型: 数字参数范围: 0-63默认值: 0|参数作用：该参数用于配置映射规则的DSCP结束值。数据来源：全网规划。配置原则：DSCP属于IP Header的一个字段，占用6bit，用于IPv4 QoS的Differentiated Services模型下定义IP数据包分类。
VLANPRIORITY|vlan 帧中优先级|参数可选性: 任选参数类型: 数字参数范围: 0-7默认值: 0|参数作用：该参数用于配置映射规则的VLAN  Priority。数据来源：全网规划。配置原则：VLAN  Priority属于Vlan Tag的一个字段，占用3bit，表示数据帧的优先级。取值范围为0～7，数值越大优先级越高。当网络阻塞时，交换机优先发送优先级高的数据帧。




[](None)命令举例 


`
查询指定VLAN ID的QoS映射规则： VLAN ID为1500 。
SHOW QOSMAPIPV4:VLANID=1500;

(No.3) : SHOW QOSMAPIPV4:VLANID=1500:
-----------------CommonS_IPS_0----------------
操作维护       以太帧中 vlanid dscp 起始值 dscp 结束值 vlan 帧中优先级 
-----------------------------------------------------------------------
复制 修改 删除 1500            2           4           3               
-----------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-02-18 09:54:51 耗时: 0.59 秒

` 


## Ipv6 Qos Tc To Vlan Priority 配置 
## Ipv6 Qos Tc To Vlan Priority 配置 


[](None)背景知识 


运营商可以根据网络规划在不同网络中使用不同的QoS优先级字段，例如在VLAN网络中使用802.1p报文优先级，IPv6网络中使用Traffic Class。当报文经过不同网络时，为了保持报文的优先级不受影响，需要在连接不同网络的设备上配置这些优先级字段的映射关系。 




[](None)功能说明 


本节点的命令针对运营商的网络规划在不同的网络中使用不同的Qos优先级进行映射规则配置，保证报文优先级在不同网络中（如三层网络和二层网络）中保持一致。 

如果不配置IPv6 Qos规则映射，当运营商在IP层设置高Traffic Class优先级后，网元在VLAN网络发送报文时将丢失Traffic Class优先级，在网络遇到阻塞时，高Traffic Class优先级的报文将不再保证被优先发送。 




[](None)子主题： 






### 新增 ipv6 qos tc 映射 vlan priority 配置(ADD QOSMAPIPV6) 
### 新增 ipv6 qos tc 映射 vlan priority 配置(ADD QOSMAPIPV6) 


[](None)功能说明 

该命令用于新增IPv6 Traffic Class到VLAN  Priority的QoS映射规则。 

运营商可以根据网络规划在不同网络中使用不同的QoS优先级字段，例如在VLAN网络中使用802.1p报文优先级，IPv6网络中使用Traffic Class。当报文经过不同网络时，为了保持报文的优先级，需要在连接不同网络的设备上配置这些优先级字段的映射关系。 

该命令执行成功后，网元在VLAN网络中发送二层报文时，根据新的映射规则获取VLAN  Priority并封装在VLAN Tag中。 


[](None)注意事项 

应保证TCSTART不大于TCND后才能执行该命令，否则命令执行失败。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的 VLAN ID。数据来源：全网规划。配置原则：VLAN ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属的VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
TCSTART|tc 起始值|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的 Traffic Class 起始值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
TCEND|tc 结束值|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的Traffic Class结束值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
VLANPRIORITY|vlan 帧中优先级|参数可选性: 必选参数类型: 数字参数范围: 0-7默认值: 0|参数作用：该参数用于配置映射规则的 VLAN  Priority。数据来源：全网规划。配置原则：VLAN  Priority属于Vlan Tag的一个字段，占用3bit，表示数据帧的优先级。取值范围为0～7，数值越大优先级越高。当网络阻塞时，交换机优先发送优先级高的数据帧。




[](None)命令举例 


`
增加一条QoS映射规则：VLAN ID为1500，Traffic Class段起始值2，Traffic Class段结束值4，映射的VLAN优先级为3。
ADD QOSMAPIPV6:VLANID=1500,TCSTART=2,TCEND=4,VLANPRIORITY=3;
` 


### 修改 ipv6 qos tc 映射 vlan priority 配置(SET QOSMAPIPV6) 
### 修改 ipv6 qos tc 映射 vlan priority 配置(SET QOSMAPIPV6) 


[](None)功能说明 

该命令用于修改IPv6 Traffic Class到VLAN  Priority的QoS映射规则。 

当运营商重新规划在不同网络中使用不同的QoS优先级字段，需要修改IPv6 Traffic Class到VLAN  Priority的QoS映射规则时，使用该命令。 

该命令执行成功后，网元在VLAN网络中发送二层报文时，根据新的映射规则获取VLAN  Priority并封装在VLAN Tag中。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 必选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的 VLAN ID。数据来源：全网规划。配置原则：VLAN ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属的VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
TCSTART|tc 起始值|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的 Traffic Class 起始值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
TCEND|tc 结束值|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的Traffic Class结束值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
VLANPRIORITY|vlan 帧中优先级|参数可选性: 必选参数类型: 数字参数范围: 0-7默认值: 0|参数作用：该参数用于配置映射规则的 VLAN  Priority。数据来源：全网规划。配置原则：VLAN  Priority属于Vlan Tag的一个字段，占用3bit，表示数据帧的优先级。取值范围为0～7，数值越大优先级越高。当网络阻塞时，交换机优先发送优先级高的数据帧。




[](None)命令举例 


`
修改QoS映射规则：VLAN ID为1500，Traffic Class段起始值2，Traffic Class段结束值4，映射的VLAN优先级修改为5。
SET QOSMAPIPV6:VLANID=1500,TCSTART=2,TCEND=4,VLANPRIORITY=5;
` 


### 删除 ipv6 qos tc 映射 vlan priority 配置(DEL QOSMAPIPV6) 
### 删除 ipv6 qos tc 映射 vlan priority 配置(DEL QOSMAPIPV6) 


[](None)功能说明 

该命令用于删除IPv6 Traffic Class到VLAN  Priority的QoS映射规则。 

当运营商重新规划在不同网络中使用不同的QoS优先级字段，需要删除IPv6 Traffic Class到VLAN  Priority的QoS映射规则时，使用该命令。 

该命令执行成功后，网元在VLAN网络中发送二层报文时，将使用默认的VLAN  Priority并封装在VLAN Tag中 


[](None)注意事项 

应确认该条TC到VLAN  Priority的QoS映射规则不再需要后，才能执行本命令。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 必选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的 VLAN ID。数据来源：全网规划。配置原则：VLAN ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属的VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
TCSTART|tc 起始值|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的 Traffic Class 起始值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
TCEND|tc 结束值|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的Traffic Class结束值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。




[](None)命令举例 


`
删除已有的QoS映射规则：VLAN ID为1500，Traffic Class段起始值2，Traffic Class段结束值4。
DEL QOSMAPIPV6:VLANID=1500,TCSTART=2,TCEND=4;
` 


### 查询 ipv6 qos tc 映射 vlan priority 配置(SHOW QOSMAPIPV6) 
### 查询 ipv6 qos tc 映射 vlan priority 配置(SHOW QOSMAPIPV6) 


[](None)功能说明 

该命令用于查询IPv6 Traffic Class到VLAN  Priority的QoS映射规则。命令执行成功后，返回指定VLAN ID的所有映射规则。 


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的 VLAN ID。数据来源：全网规划。配置原则：VLAN ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属的VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANID|以太帧中 vlanid|参数可选性: 任选参数类型: 数字参数范围: 0-4095默认值: 0|参数作用：该参数用于配置映射规则的 VLAN ID。数据来源：全网规划。配置原则：VLAN ID属于Vlan Tag的一个字段，占用12bit，表示该数据帧所属的VLAN的编号。取值范围为0～4095，其中0和4095为协议保留取值。
TCSTART|tc 起始值|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的 Traffic Class 起始值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
TCEND|tc 结束值|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 0|参数作用：该参数用于配置映射规则的Traffic Class结束值。数据来源：全网规划。配置原则：Traffic Class属于IPv6 Header的一个字段，占用8bit，用于IPv6 QoS定义IP数据包流量类别。
VLANPRIORITY|vlan 帧中优先级|参数可选性: 任选参数类型: 数字参数范围: 0-7默认值: 0|参数作用：该参数用于配置映射规则的 VLAN  Priority。数据来源：全网规划。配置原则：VLAN  Priority属于Vlan Tag的一个字段，占用3bit，表示数据帧的优先级。取值范围为0～7，数值越大优先级越高。当网络阻塞时，交换机优先发送优先级高的数据帧。




[](None)命令举例 


`
查询指定VLAN ID的QoS映射规则：VLAN ID为1500。
SHOW QOSMAPIPV6:VLANID=1500;

(No.3) :SHOW QOSMAPIPV6:VLANID=1500:
-----------------CommonS_IPS_0----------------
操作维护       以太帧中 vlanid tc 起始值 tc 结束值 vlan 帧中优先级 
-----------------------------------------------------------------------
复制 修改 删除 1500            2        4        3               
-----------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-02-18 09:54:51 耗时: 0.59 秒

` 


## 协议配置 
## 协议配置 


[](None)背景知识 


系统支持多种协议的收发，需要支持对IPS的协议相关功能进行配置。 




[](None)功能说明 


 本节点中的命令针对IPS进行与协议相关的限速等配置。 




[](None)子主题： 






### 协议限速配置 
### 协议限速配置 


[](None)背景知识 


系统支持多种协议的收发。为防止某个时间内协议消息流量过大冲击系统，占用过多系统CPU，需要对协议消息进行限速。限速策略可分为一级限速和二级限速。一级限速指每种协议消息各自不同的限速策略，二级限速指所有协议消息总量的限速。 




[](None)功能说明 


 本配置针对ARP、ND、ICMP等协议类报文做限速配置。  

如果不配置协议限速，当协议报文大量冲击系统时，可能会导致系统崩溃。各种协议类报文的限速值有默认值，可根据实际需要修改。  




[](None)子主题： 






#### 修改协议报文限速值(SET PROTOCOLMSGMETER) 
#### 修改协议报文限速值(SET PROTOCOLMSGMETER) 


[](None)功能说明 

该命令用于修改协议报文限速值。当需要设置协议报文限速值的时候，使用该命令。该命令配置成功后，会根据限速值对收到的协议报文进行限速。如果协议消息的收包速率超过限速值，会进行限速。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROTOCOL_TYPE_ID|协议报文类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1250-1260默认值: PROT_TOTAL|该参数用于表示限速的协议报文类型。
METER_VALUE|协议报文限速值|参数可选性: 必选参数类型: 数字参数范围: 100-10000默认值: 500|该参数用于表示协议报文的限速值。




[](None)命令举例 


`
修改ARP协议报文的限速值为100 pps。
SET PROTOCOLMSGMETER:PROTOCOL_TYPE_ID="PROT_ARP",METER_VALUE=100
` 


#### 查询协议报文限速值(SHOW PROTOCOLMSGMETER) 
#### 查询协议报文限速值(SHOW PROTOCOLMSGMETER) 


[](None)功能说明 

该命令用于查看协议报文的限速值。当需要查询当前的协议报文限速配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROTOCOL_TYPE_ID|协议报文类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1250-1260默认值: PROT_TOTAL|该参数用于表示限速的协议报文类型。
METER_VALUE|协议报文限速值|参数可选性: 任选参数类型: 数字参数范围: 100-10000默认值: 500|该参数用于表示协议报文的限速值。




[](None)命令举例 


`
查看协议报文的限速值。
SHOW PROTOCOLMSGMETER

(No.5) : SHOW PROTOCOLMSGMETER:
-----------------CommonS_IPS_0----------------
协议报文类型      协议报文限速值(pps)
NOARP 协议报文    500
ARP 协议报文      500
OSPF 协议报文     300
BGP 协议报文      300
BFD 协议报文      100
ICMP 协议报文     100
LDP 协议报文     300
UDP 协议报文     100
其它协议报文     300
所有协议报文    1000
IPSEC 协议报文     300

记录数：11

执行成功耗时: 0.266 秒

` 


## 资源告警配置 
## 资源告警配置 


[](None)背景知识 


资源告警是指：系统正常运行所使用的资源超过配置的阈值，所上报的告警。资源告警配置包括：资源种类、告警阈值、告警恢复阈值、告警恢复惩罚系数、告警扫描周期。 




[](None)功能说明 


本节点针对资源告警参数进行配置。 




[](None)子主题： 






### 修改资源告警配置(SET RESOURCEALARMCFG) 
### 修改资源告警配置(SET RESOURCEALARMCFG) 


[](None)功能说明 

该命令用于修改资源告警配置。当需要修改资源告警配置的时候，使用该命令。该命令配置成功后，会对不同的资源种类采用不同的告警策略。


[](None)注意事项 

配置该命令时RECOVER_THRESHOLD参数必须小于ALARM_THRESHOLD。当该命令设置成功时，系统会根据设置参数定时扫描资源使用率，当资源使用率达到告警阈值时，即上报告警。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESOURCE_TYPE_ID|资源类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-22|该参数用于表示告警资源类型。
ALARM_THRESHOLD|告警上报阈值|参数可选性: 必选参数类型: 数字参数范围: 50-100默认值: 80|该参数用于表示告警阈值。
RECOVER_THRESHOLD|告警恢复阈值|参数可选性: 必选参数类型: 数字参数范围: 50-100默认值: 70|该参数用于表示告警恢复阈值。
ALARM_RECOVER_INDEX|告警恢复惩罚系数|参数可选性: 必选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于表示告警恢复惩罚系数。
ALARM_SCAN_CYCLE|资源扫描周期|参数可选性: 必选参数类型: 数字参数范围: 5-20默认值: 10|该参数用于表示告警扫描周期。




[](None)命令举例 


`
修改NoArpNd智能限速哈希表的资源告警配置，告警阈：80%，告警恢复阈值：75%，告警恢复惩罚系数：5，告警扫描周期：15s。
SET RESOURCEALARMCFG:RESOURCE_TYPE_ID="NOARPND_LIMIT_HASH",ALARM_THRESHOLD=80,RECOVER_THRESHOLD=75,ALARM_RECOVER_INDEX=5,ALARM_SCAN_CYCLE=15
` 


### 查询资源告警配置(SHOW RESOURCEALARMCFG) 
### 查询资源告警配置(SHOW RESOURCEALARMCFG) 


[](None)功能说明 

该命令用于查看资源告警配置。当需要查询某种特定资源种类的告警配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RESOURCE_TYPE_ID|资源类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-22|该参数用于表示告警资源类型。
ALARM_THRESHOLD|告警上报阈值|参数可选性: 任选参数类型: 数字参数范围: 50-100默认值: 80|该参数用于表示告警阈值。
RECOVER_THRESHOLD|告警恢复阈值|参数可选性: 任选参数类型: 数字参数范围: 50-100默认值: 70|该参数用于表示告警恢复阈值。
ALARM_RECOVER_INDEX|告警恢复惩罚系数|参数可选性: 任选参数类型: 数字参数范围: 1-10默认值: 3|该参数用于表示告警恢复惩罚系数。
ALARM_SCAN_CYCLE|资源扫描周期|参数可选性: 任选参数类型: 数字参数范围: 5-20默认值: 10|该参数用于表示告警扫描周期。




[](None)命令举例 


`
SHOW RESOURCEALARMCFG

SHOW RESOURCEALARMCFG
-----------------CCSP_IAAS_ST/CommonS_IPS_0----------------
操作维护       资源类型                 告警上报阈值(%) 告警恢复阈值(%) 告警恢复惩罚系数 资源扫描周期(s) 
---------------------------------------------------------------------------------------------------------
修改           IPV4分片Hash表           80              70              3                10              
修改           IPV6分片Hash表           80              70              3                10              
修改           COMM Hash表              80              70              3                10              
修改           NoArpND限速Hash表        80              70              3                10              
修改           IPS UB内存               80              70              3                10              
修改           ARCH UB内存              80              70              3                10              
修改           ARP Hash表               80              70              3                10              
修改           ND Hash表                80              70              3                10              
修改           PortAcl Hash表           80              70              3                10              
修改           SkipTrie Hash表          80              70              3                10              
修改           Trie8 Node表             80              70              3                10              
修改           Trie4 Node表             80              70              3                10              
修改           Ipv4 Route表             80              70              3                10              
修改           Ipv6 Route表             80              70              3                10              
修改           Ipv4 Ldsh表              80              70              3                10              
修改           Ipv6 Ldsh表              80              70              3                10              
修改           SkipTrie Ipv4Pool Hash表 80              70              3                10              
修改           SkipTrie Ipv6Pool Hash表 80              70              3                10              
修改           Trie8 Node Ipv4Pool表    80              70              3                10              
修改           Trie8 Node Ipv6Pool表    80              70              3                10              
修改           Trie4 Node Ipv4Pool表    80              70              3                10              
修改           Trie4 Node Ipv6Pool表    80              70              3                10              
---------------------------------------------------------------------------------------------------------
记录数：22

执行成功开始时间:2023-01-29 16:43:47 耗时: 1.826秒

查看资源告警配置。
` 


## BFD回环报文转发模式配置 
## BFD回环报文转发模式配置 


[](None)背景知识 


BFD回环报文是指对端设配配置单臂BFD后，发送到本端的BFD报文，本端需要对其进行转发至对端。本端系统支持两种转发模式：直接转发模式，直接交换BFD报文帧的源MAC和目的MAC信息后发出;查路由转发，对本端收到的单臂BFD报文进行解析，通过查找路由寻找下一跳后，再查下一跳MAC地址的方式实现对报文MAC地址的封装并发出报文。该报文回环的两种配置模式，便于本端用户控制单臂BFD报文处理流程，扩展BFD使用场景。 




[](None)功能说明 


本节点针对BFD回环报文转发模式进行配置，支持直接转发和查路由转发，默认为直接转发。默认直接转发，即关闭查路由转发配置后，本端将接收并转发接收的全部单臂BFD报文。开启查路由转发功能，需要提前在本端设备上配置到对端的路由，而后本端将根据路由转发查中的单臂BFD报文。 




[](None)子主题： 






### 修改BFD回环报文处理模式配置(SET BFDECHOMODECFG) 
### 修改BFD回环报文处理模式配置(SET BFDECHOMODECFG) 


[](None)功能说明 

该命令用于设置单臂BFD回环报文的转发模式。直接转发模式，直接交换BFD报文帧的源MAC和目的MAC信息后发出;查路由转发，对本端收到的单臂BFD报文进行解析，通过查找路由寻找下一跳后，再查下一跳MAC地址的方式实现对报文MAC地址的封装并发出报文。开启路由查找转发模式，需要使用路由配置的命令配置到对端的路由，否则BFD将转发失败。


[](None)注意事项 

配置该命令时,启用查路由回环功能时候，必须确保本端有到对端的路由，否则报文将被丢弃，而非回环。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BFD_ECHO_LOOP_MODE|BFD回环报文查路由转发模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于配置是否开启BFD回环报文查路由转发模式，默认为禁用查路由回环。




[](None)命令举例 


`
启用BFD回环报文查路由回环转发。
SET BFDECHOMODECFG:BFD_ECHO_LOOP_MODE="ENABLE"
` 


### 查询BFD回环报文处理模式配置(SHOW BFDECHOMODECFG) 
### 查询BFD回环报文处理模式配置(SHOW BFDECHOMODECFG) 


[](None)功能说明 

该命令用于查看BFD模块回环报文的处理模式，即是否启用路由回环功能。默认为禁用查路由回环。当需要查询当前的配置时，可以执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BFD_ECHO_LOOP_MODE|BFD回环报文查路由转发模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于配置是否开启BFD回环报文查路由转发模式，默认为禁用查路由回环。




[](None)命令举例 


`
查看BFD回环报文的转发模式，默认为禁用查路由回环。
SHOW BFDECHOMODECFG

(No.1) : SHOW BFDECHOMODECFG
-----------------ips_98/CommonS_IPS_0----------------
操作维护       BFD回环报文查路由转发模式 
-----------------------------------------
修改           禁用查路由回环            
-----------------------------------------
记录数：1

执行成功开始时间:2022-06-07 11:50:07 耗时: 1.113秒

` 


## 资源检测配置 
## 资源检测配置 


[](None)背景知识 


系统中各节点的重要资源占用率如果太高或者耗尽，系统可能无法正常运行，因此需要监控系统的重要资源，定时检测各类资源是否存在吊死。如果资源存在吊死，则上报通知。 




[](None)功能说明 


配置报文描述符回收检测及Mbuf吊死检测的开关，吊死时长，吊死阈值等。 




[](None)子主题： 






### 描述符回收配置 
### 描述符回收配置 


[](None)背景知识 


报文描述符是报文处理携带的信息所使用的一个区域，是IPS上最重要的资源之一，系统定时检测报文描述符是否存在吊死，当吊死数量达到一定阈值，将对报文描述符进行回收。 




[](None)功能说明 


该组命令用于配置报文描述符告警参数。 




[](None)子主题： 






#### 设置报文描述符回收配置(SET DESRECLAIMCFG) 
#### 设置报文描述符回收配置(SET DESRECLAIMCFG) 


[](None)功能说明 

设置报文描述符回收配置


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SwitchTimeFactor|报文回收开关及生命周期倍数因子|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 2|报文回收开关及生命周期倍数因子
DescLifetime|报文回收生命周期|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 900|报文回收生命周期
ScanDescNum|报文回收每轮扫描个数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 100|报文回收每轮扫描个数
ScanAccuFactor|报文回收扫描累计因子|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 20|报文回收扫描累计因子
NonRecvThreshold|报文回收非接收线程的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 80|报文回收非接收线程的报文使用率门限
RecvThreshold|报文回收接收线程的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 80|报文回收接收线程的报文使用率门限
EndlessControl|报文吊死上报通知开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|报文吊死上报通知开关
EndlessAlarmTime|报文吊死上报通知时长|参数可选性: 任选参数类型: 数字参数范围: 1-240默认值: 15|报文吊死上报通知时长




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SwitchTimeFactor|报文回收开关及生命周期倍数因子|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 2|报文回收开关及生命周期倍数因子
DescLifetime|报文回收生命周期|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 900|报文回收生命周期
ScanDescNum|报文回收每轮扫描个数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 100|报文回收每轮扫描个数
ScanAccuFactor|报文回收扫描累计因子|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 20|报文回收扫描累计因子
NonRecvThreshold|报文回收非接收线程的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 80|报文回收非接收线程的报文使用率门限
RecvThreshold|报文回收接收线程的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 80|报文回收接收线程的报文使用率门限
EndlessControl|报文吊死上报通知开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|报文吊死上报通知开关
EndlessAlarmTime|报文吊死上报通知时长|参数可选性: 任选参数类型: 数字参数范围: 1-240默认值: 15|报文吊死上报通知时长




[](None)命令举例 


`
设置报文描述符回收配置。 
SET DESRECLAIMCFG:SWITCHTIMEFACTOR=2,DESCLIFETIME=900,SCANDESCNUM=100,SCANACCUFACTOR=20,NONRECVTHRESHOLD=80,RECVTHRESHOLD=80,ENDLESSCONTROL="ON",ENDLESSALARMTIME=15
` 


#### 查询报文描述符回收配置(SHOW DESRECLAIMCFG) 
#### 查询报文描述符回收配置(SHOW DESRECLAIMCFG) 


[](None)功能说明 

查询报文描述符回收配置


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SwitchTimeFactor|报文回收开关及生命周期倍数因子|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 2|报文回收开关及生命周期倍数因子
DescLifetime|报文回收生命周期|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 900|报文回收生命周期
ScanDescNum|报文回收每轮扫描个数|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 100|报文回收每轮扫描个数
ScanAccuFactor|报文回收扫描累计因子|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 20|报文回收扫描累计因子
NonRecvThreshold|报文回收非接收线程的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 80|报文回收非接收线程的报文使用率门限
RecvThreshold|报文回收接收线程的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 80|报文回收接收线程的报文使用率门限
EndlessControl|报文吊死上报通知开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|报文吊死上报通知开关
EndlessAlarmTime|报文吊死上报通知时长|参数可选性: 任选参数类型: 数字参数范围: 1-240默认值: 15|报文吊死上报通知时长




[](None)命令举例 


`
查询报文描述符回收配置。
SHOW DESRECLAIMCFG:
` 


### mbuf检测配置 
### mbuf检测配置 


[](None)背景知识 


MBUF是IPS上最重要的资源，如果MBUF占用率过高，会导致系统的运行异常，所以需要对MBUF的使用状态进行监控。 

系统定时检测MBUF是否存在吊死，如果存在吊死或者吊死数量超过一定的阈值，则上报通知。 




[](None)功能说明 


该功能用于配置MBUF吊死检测开关，吊死检测时长等相关参数。 

MBUF吊死检测开启时，系统定时扫描每一个MBUF池，当存在mbuf吊死或吊死的Mbuf超过一定阈值时，则上报通知。 




[](None)子主题： 






#### 设置mbuf吊死检测配置(SET MBUFDETECTCFG) 
#### 设置mbuf吊死检测配置(SET MBUFDETECTCFG) 


[](None)功能说明 

设置mbuf吊死检测配置


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SwitchTimeFactor|MBUF吊死检测开关|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|MBUF吊死检测开关
MbufLifetime|MBUF吊死检测生命周期|参数可选性: 任选参数类型: 数字参数范围: 1-255默认值: 15|MBUF吊死检测生命周期
ScanMbufNum|MBUF吊死检测每轮扫描个数|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 200|MBUF吊死检测每轮扫描个数
ScanAccuFactor|MBUF吊死检测扫描累计因子|参数可选性: 任选参数类型: 数字参数范围: 1-255默认值: 20|MBUF吊死检测扫描累计因子
NonDriverThreshold|MBUF吊死检测非驱动池的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|MBUF吊死检测非驱动池的报文使用率门限
DriverThreshold|MBUF吊死检测驱动池的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|MBUF吊死检测驱动池的报文使用率门限
EndlessControl|MBUF吊死上报通知开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|MBUF吊死上报通知开关
EndlessAlarmTime|MBUF吊死上报通知时长|参数可选性: 任选参数类型: 数字参数范围: 1-240默认值: 15|MBUF吊死上报通知时长




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SwitchTimeFactor|MBUF吊死检测开关|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|MBUF吊死检测开关
MbufLifetime|MBUF吊死检测生命周期|参数可选性: 任选参数类型: 数字参数范围: 1-255默认值: 15|MBUF吊死检测生命周期
ScanMbufNum|MBUF吊死检测每轮扫描个数|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 200|MBUF吊死检测每轮扫描个数
ScanAccuFactor|MBUF吊死检测扫描累计因子|参数可选性: 任选参数类型: 数字参数范围: 1-255默认值: 20|MBUF吊死检测扫描累计因子
NonDriverThreshold|MBUF吊死检测非驱动池的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|MBUF吊死检测非驱动池的报文使用率门限
DriverThreshold|MBUF吊死检测驱动池的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|MBUF吊死检测驱动池的报文使用率门限
EndlessControl|MBUF吊死上报通知开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|MBUF吊死上报通知开关
EndlessAlarmTime|MBUF吊死上报通知时长|参数可选性: 任选参数类型: 数字参数范围: 1-240默认值: 15|MBUF吊死上报通知时长




[](None)命令举例 


`
设置Mbuf吊死检测配置。 
SET MBUFDETECTCFG:SWITCHTIMEFACTOR=0,MBUFLIFETIME=15,SCANMBUFNUM=200,SCANACCUFACTOR=20,NONDRIVERTHRESHOLD=90,DRIVERTHRESHOLD=90,ENDLESSCONTROL="ON",ENDLESSALARMTIME=15
` 


#### 查询mbuf吊死检测配置(SHOW MBUFDETECTCFG) 
#### 查询mbuf吊死检测配置(SHOW MBUFDETECTCFG) 


[](None)功能说明 

查询mbuf吊死检测配置


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SwitchTimeFactor|MBUF吊死检测开关|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|MBUF吊死检测开关
MbufLifetime|MBUF吊死检测生命周期|参数可选性: 任选参数类型: 数字参数范围: 1-255默认值: 15|MBUF吊死检测生命周期
ScanMbufNum|MBUF吊死检测每轮扫描个数|参数可选性: 任选参数类型: 数字参数范围: 1-10000默认值: 200|MBUF吊死检测每轮扫描个数
ScanAccuFactor|MBUF吊死检测扫描累计因子|参数可选性: 任选参数类型: 数字参数范围: 1-255默认值: 20|MBUF吊死检测扫描累计因子
NonDriverThreshold|MBUF吊死检测非驱动池的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|MBUF吊死检测非驱动池的报文使用率门限
DriverThreshold|MBUF吊死检测驱动池的报文使用率门限|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|MBUF吊死检测驱动池的报文使用率门限
EndlessControl|MBUF吊死上报通知开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ON|MBUF吊死上报通知开关
EndlessAlarmTime|MBUF吊死上报通知时长|参数可选性: 任选参数类型: 数字参数范围: 1-240默认值: 15|MBUF吊死上报通知时长




[](None)命令举例 


`
查询mbuf吊死检测配置。
SHOW MBUFDETECTCFG:
` 


## DPDK公共配置 
## DPDK公共配置 


[](None)背景知识 


DPDK（Data Plane Development Kit，数据平面开发套件）是一个Linux基金会的开源项目。开发DPDK的主要目的是在数据平面应用中为快速的数据包处理提供一个简单而完善的架构。 




[](None)功能说明 


本节点针对DPDK公共参数进行配置，主要用于统一管理和配置DPDK的公共参数。 




[](None)子主题： 






### 修改DPDK公共配置(SET DPDKCOMMCFG) 
### 修改DPDK公共配置(SET DPDKCOMMCFG) 


[](None)功能说明 

该命令用于修改DPDK公共配置。 


[](None)注意事项 

该命令为高危命令！该命令用于修改DPDK公共配置。修改参数接口链路断链是否重启NFS（LinkDownRestartVM）的取值，会导致NFS重启。执行本命令后，需要重启相应NFS生效。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SupportQinQ|支持QinQ组网|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置是否支持QinQ，该参数修改需要重启容器生效。DISABLE：不支持QinQ。ENABLE：支持QinQ。
MultiQueue|多队列数|参数可选性: 任选参数类型: 数字参数范围: 1-64默认值: 1|该参数用于设置支持的多队列数，该参数修改需要重启容器生效。取值范围1-64。
LinkDownRestartVM|接口链路断链是否重启虚机|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置接口链路断链是否重启NFS。该参数修改立即生效，不需要重启容器。DISABLE：接口链路断链不重启NFS。ENABLE：接口链路断链重启NFS。
LinkDownToleranceNum|接口链路断链容忍次数|参数可选性: 任选参数类型: 数字参数范围: 0-30默认值: 5|该参数用于设置接口链路断链容忍次数。该参数修改立即生效，不需要重启容器。取值范围0-30。
ScaleRadio|内存缩放比例因子|参数可选性: 任选参数类型: 数字参数范围: 50-250默认值: 100|该参数用于表示内存缩放比例因子，该参数修改需要重启容器生效。取值范围50-250。
DeadLoopCheckSwitch|死循环检测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置死循环检测开关。该参数修改立即生效，不需要重启容器。DISABLE：关闭死循环检测。ENABLE：开启死循环检测。
DeadLoopNeedRestart|死循环检测重启开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置检测死循环是否重启容器。该参数修改立即生效，不需要重启容器。DISABLE：检测到死循环后不重启容器。ENABLE：检测到死循环后重启容器。
MULTICASTFORSERVICE|内部业务平面端口组播|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置是否开启内部业务平面的端口组播功能。该参数修改立即生效，不需要重启容器。DISABLE：关闭内部业务平面的端口组播功能。ENABLE：开启内部业务平面的端口组播功能。
MULTICASTFOREIO|外发平面端口组播|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置是否开启外发平面的端口组播功能。外发平面指系统与外部设备对接的网络平面。该参数修改立即生效，不需要重启容器。DISABLE：关闭外发平面的端口组播功能。ENABLE：开启外发平面的端口组播功能。
EIOBONDMINIUPMEMBER|EIO  bondport组内的最小可用成员端口数|参数可选性: 任选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于设置EIO  bondport组内的最小可用成员端口数。该参数修改立即生效，不需要重启容器。取值范围1-32。
RAWBONDMINIUPMEMBER|RAW  bondport组内的最小可用成员端口数|参数可选性: 任选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于设置RAW  bondport组内的最小可用成员端口数。该参数修改不需要重启容器，立即生效。取值范围1-32。
RAWPKTMTU|RAW平面报文MTU|参数可选性: 任选参数类型: 数字参数范围: 1500-9000默认值: 1500|该参数用于设置RAW平面报文MTU（Maximum Transfer Unit，最大传输单元），该参数修改需要重启NFS生效。取值范围1500-9000。
EIOPKTMTU|外发平面报文MTU|参数可选性: 任选参数类型: 数字参数范围: 1500-9000默认值: 1500|该参数用于设置外发口平面报文MTU，该参数修改需要重启NFS生效。取值范围1500-9000。
MacSpoofSwitch|mac地址防欺骗攻击开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置是否开启mac地址防欺诈功能。该参数修改立即生效，不需要重启容器。DISABLE：关闭mac地址防欺诈功能。ENABLE：开启mac地址防欺诈功能。




[](None)命令举例 


`
设置DPDK公共配置，不支持QinQ组网，多队列数为1，接口链路断链不重启NFS，接口链路断链容忍10次，内存缩放比例因子100，开启死循环检测，开启检测到死循环后重启，开启内部业务平面端口组播，开启外发平面端口组播，设定外发口bondport组内的最小可用成员端口数为1，设定RAW的bondport组内的最小可用成员端口数为1，设定RAW平面报文MTU值为1500，设定外发平面报文MTU值为1500,mac地址防欺骗攻击功能关闭。
SET DPDKCOMMCFG:SUPPORTQINQ="DISABLE",MULTIQUEUE=1,LINKDOWNRESTARTVM="DISABLE",LINKDOWNTOLERANCENUM=10,SCALERADIO=100,DEADLOOPCHECKSWITCH="ENABLE",DEADLOOPNEEDRESTART="ENABLE",MULTICASTFORSERVICE="ENABLE",MULTICASTFOREIO="ENABLE",EIOBONDMINIUPMEMBER=1,RAWBONDMINIUPMEMBER=1,RAWPKTMTU=1500,EIOPKTMTU=1500,MACSPOOFSWITCH="DISABLE"
` 


### 查询DPDK公共配置(SHOW DPDKCOMMCFG) 
### 查询DPDK公共配置(SHOW DPDKCOMMCFG) 


[](None)功能说明 

该命令用于查询DPDK公共配置。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SupportQinQ|支持QinQ组网|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置是否支持QinQ，该参数修改需要重启容器生效。DISABLE：不支持QinQ。ENABLE：支持QinQ。
MultiQueue|多队列数|参数可选性: 任选参数类型: 数字参数范围: 1-64默认值: 1|该参数用于设置支持的多队列数，该参数修改需要重启容器生效。取值范围1-64。
LinkDownRestartVM|接口链路断链是否重启虚机|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置接口链路断链是否重启NFS。该参数修改立即生效，不需要重启容器。DISABLE：接口链路断链不重启NFS。ENABLE：接口链路断链重启NFS。
LinkDownToleranceNum|接口链路断链容忍次数|参数可选性: 任选参数类型: 数字参数范围: 0-30默认值: 5|该参数用于设置接口链路断链容忍次数。该参数修改立即生效，不需要重启容器。取值范围0-30。
ScaleRadio|内存缩放比例因子|参数可选性: 任选参数类型: 数字参数范围: 50-250默认值: 100|该参数用于表示内存缩放比例因子，该参数修改需要重启容器生效。取值范围50-250。
DeadLoopCheckSwitch|死循环检测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置死循环检测开关。该参数修改立即生效，不需要重启容器。DISABLE：关闭死循环检测。ENABLE：开启死循环检测。
DeadLoopNeedRestart|死循环检测重启开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置检测死循环是否重启容器。该参数修改立即生效，不需要重启容器。DISABLE：检测到死循环后不重启容器。ENABLE：检测到死循环后重启容器。
MULTICASTFORSERVICE|内部业务平面端口组播|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置是否开启内部业务平面的端口组播功能。该参数修改立即生效，不需要重启容器。DISABLE：关闭内部业务平面的端口组播功能。ENABLE：开启内部业务平面的端口组播功能。
MULTICASTFOREIO|外发平面端口组播|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置是否开启外发平面的端口组播功能。外发平面指系统与外部设备对接的网络平面。该参数修改立即生效，不需要重启容器。DISABLE：关闭外发平面的端口组播功能。ENABLE：开启外发平面的端口组播功能。
EIOBONDMINIUPMEMBER|EIO  bondport组内的最小可用成员端口数|参数可选性: 任选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于设置EIO  bondport组内的最小可用成员端口数。该参数修改立即生效，不需要重启容器。取值范围1-32。
RAWBONDMINIUPMEMBER|RAW  bondport组内的最小可用成员端口数|参数可选性: 任选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于设置RAW  bondport组内的最小可用成员端口数。该参数修改不需要重启容器，立即生效。取值范围1-32。
RAWPKTMTU|RAW平面报文MTU|参数可选性: 任选参数类型: 数字参数范围: 1500-9000默认值: 1500|该参数用于设置RAW平面报文MTU（Maximum Transfer Unit，最大传输单元），该参数修改需要重启NFS生效。取值范围1500-9000。
EIOPKTMTU|外发平面报文MTU|参数可选性: 任选参数类型: 数字参数范围: 1500-9000默认值: 1500|该参数用于设置外发口平面报文MTU，该参数修改需要重启NFS生效。取值范围1500-9000。
MacSpoofSwitch|mac地址防欺骗攻击开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置是否开启mac地址防欺诈功能。该参数修改立即生效，不需要重启容器。DISABLE：关闭mac地址防欺诈功能。ENABLE：开启mac地址防欺诈功能。




[](None)命令举例 


`
查询DPDK公共配置。
SHOW DPDKCOMMCFG
` 


## DPDK特定配置 
## DPDK特定配置 


[](None)背景知识 


DPDK（Data Plane Development Kit，数据平面开发套件）是一个Linux基金会的开源项目。开发DPDK的主要目的是在数据平面应用中为快速的数据包处理提供一个简单而完善的架构。 




[](None)功能说明 


本节点针对DPDK特定参数进行配置，主要用于统一管理和配置DPDK的特定参数。 




[](None)子主题： 






### 修改DPDK特定配置(SET DPDKSPECIALCFG) 
### 修改DPDK特定配置(SET DPDKSPECIALCFG) 


[](None)功能说明 

该命令用于设置DPDK特定配置。


[](None)注意事项 

该命令为高危命令！该命令用于修改DPDK特定配置。该命令执行后，会修改内存池的MBUF数量。执行本命令后，需要重启容器生效。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BenchmarkMbufNum|内存池mbuf数量|参数可选性: 任选参数类型: 数字参数范围: 30000-500000默认值: 50000|该参数用于表示内存池mbuf数量，需要重启容器生效。




[](None)命令举例 


`
设置DPDK特定配置，内存池mbuf数量50000。
SET DPDKSPECIALCFG:BENCHMARKMBUFNUM=50000
` 


### 查询DPDK特定配置(SHOW DPDKSPECIALCFG) 
### 查询DPDK特定配置(SHOW DPDKSPECIALCFG) 


[](None)功能说明 

该命令用于查询DPDK特定配置。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BenchmarkMbufNum|内存池mbuf数量|参数可选性: 任选参数类型: 数字参数范围: 30000-500000默认值: 50000|该参数用于表示内存池mbuf数量，需要重启容器生效。




[](None)命令举例 


`
查询DPDK特定配置。

SHOW DPDKSPECIALCFG:

` 


## 组播配置 
## 组播配置 


[](None)背景知识 


特定情况下，需要配置组播地址，网卡才能收到网络报文 




[](None)功能说明 


该节点下面包括组播IPv4配置和组播IPv6配置。 




[](None)子主题： 






### 组播IPv4配置 
### 组播IPv4配置 


[](None)背景知识 


Intel 10G网卡在redhat平台使用时，需要配置组播IPV4地址。如果不配置组播IPV4地址，那么网络上的组播地址在网卡驱动上就不会被识别，进而不会进行转发。 




[](None)功能说明 


该配置用于配置组播IPV4地址，地址范围： 224.0.0.0 - 239.255.255.255。 




[](None)子主题： 






#### 新增IPV4组播地址(ADD MULTICASTIPV4ADDR) 
#### 新增IPV4组播地址(ADD MULTICASTIPV4ADDR) 


[](None)功能说明 

该命令用于新增IPV4组播地址配置。当需要增加IPV4组播地址配置，使用该命令。命令执行成功后，驱动网卡可以识别该组播地址，进行该地址消息的收发。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MULTICASTIPV4ADDR|IPV4组播地址|参数可选性: 必选参数类型: 字符串|该参数表示组播IPV4地址。IPV4组播地址范围：224.0.0.0-239.255.255.255。




[](None)命令举例 


`
增加IPV4组播地址配置，组播地址为224.0.0.5。
ADD MULTICASTIPV4ADDR:MULTICASTIPV4ADDR=224.0.0.5
` 


#### 查询IPV4组播地址(SHOW MULTICASTIPV4ADDR) 
#### 查询IPV4组播地址(SHOW MULTICASTIPV4ADDR) 


[](None)功能说明 

该命令用于查询IPV4组播地址配置。当需要查询当前的IPV4组播地址配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MULTICASTIPV4ADDR|IPV4组播地址|参数可选性: 任选参数类型: 字符串|该参数表示组播IPV4地址。IPV4组播地址范围：224.0.0.0-239.255.255.255。




[](None)命令举例 


`
查询IPV4组播地址配置。
SHOW MULTICASTIPV4ADDR

(No.2) : SHOW MULTICASTIPV4ADDR:
-----------------CommonS_IPS_0----------------
IPV4组播地址 
239.255.255.255    
记录数：1

执行成功耗时: 0.249 秒

` 


#### 删除IPV4组播地址(DEL MULTICASTIPV4ADDR) 
#### 删除IPV4组播地址(DEL MULTICASTIPV4ADDR) 


[](None)功能说明 

该命令用于删除IPV4组播地址的配置。


[](None)注意事项 

删除地址后，该地址组播消息无法接收处理，会造成对应组播协议路由不通。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MULTICASTIPV4ADDR|IPV4组播地址|参数可选性: 必选参数类型: 字符串|该参数表示组播IPV4地址。IPV4组播地址范围：224.0.0.0-239.255.255.255。




[](None)命令举例 


`
删除IPV4组播地址配置，组播地址为224.0.0.5。
DEL MULTICASTIPV4ADDR:MULTICASTIPV4ADDR=224.0.0.5
` 


### 组播IPv6配置 
### 组播IPv6配置 


[](None)背景知识 


Intel 10G网卡在redhat平台使用时，需要配置组播IPV6地址。如果不配置组播IPV6地址，那么网络上的组播地址在网卡驱动上就不会被识别，进而不会进行转发。 




[](None)功能说明 


该配置用于配置组播IPV6地址，地址范围：FF::/8。 




[](None)子主题： 






#### 新增IPV6组播地址(ADD MULTICASTIPV6ADDR) 
#### 新增IPV6组播地址(ADD MULTICASTIPV6ADDR) 


[](None)功能说明 

该命令用于新增IPV6组播地址配置。当需要增加IPV6组播地址配置，使用该命令。命令执行成功后，驱动网卡能识别该组播地址，进行该地址消息的收发。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MULTICASTIPV6ADDR|IPV6组播地址|参数可选性: 必选参数类型: 字符串|该参数表示组播IPV6地址。IPV6组播地址范围: FFxx::/8。




[](None)命令举例 


`
增加IPV6组播地址配置，组播地址为FF02::1。
ADD MULTICASTIPV6ADDR:MULTICASTIPV6ADDR=FF02::1
` 


#### 查询IPV6组播地址(SHOW MULTICASTIPV6ADDR) 
#### 查询IPV6组播地址(SHOW MULTICASTIPV6ADDR) 


[](None)功能说明 

该命令用于查询IPV6组播地址的配置。当需要查询当前的IPV6组播地址的配置时，执行该命令。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MULTICASTIPV6ADDR|IPV6组播地址|参数可选性: 任选参数类型: 字符串|该参数表示组播IPV6地址。IPV6组播地址范围: FFxx::/8。




[](None)命令举例 


`
查询IPV6组播地址配置。
SHOW MULTICASTIPV6ADDR

(No.3) : SHOW MULTICASTIPV6ADDR:
-----------------CommonS_IPS_0----------------
IPV6组播地址
FF02::01   

记录数：1
执行成功耗时: 0.249 秒

` 


#### 删除IPV6组播地址(DEL MULTICASTIPV6ADDR) 
#### 删除IPV6组播地址(DEL MULTICASTIPV6ADDR) 


[](None)功能说明 

该命令用于删除IPV6组播地址的配置。


[](None)注意事项 

删除地址后，该地址组播消息无法接收处理，会造成对应组播协议路由不通。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MULTICASTIPV6ADDR|IPV6组播地址|参数可选性: 必选参数类型: 字符串|该参数表示组播IPV6地址。IPV6组播地址范围: FFxx::/8。




[](None)命令举例 


`
删除IPV6组播地址为FF02::1的配置。
DEL MULTICASTIPV6ADDR:MULTICASTIPV6ADDR=FF02::1
` 


## NAT配置 
## NAT配置 


[](None)背景知识 


NAT（Network Address Translation，网络地址转换）功能可以把内部网络的私有地址转换为互联网的公有地址，使得内部网络上的节点可以访问互联网。 

本配置对网元内部没有分配公网地址，但需要访问互联网的服务提供。如果不使用该配置，则内部没有分配公网地址的服务无法访问互联网。 




[](None)功能说明 


NAT配置包含NAT开关配置、NAT端口号范围配置、SNAT（Source Network Address Translation，源网络地址转换）配置和FULLNAT（Full Network Address Translation，全网络地址转换）配置。 


 
NAT功能默认为关，使用NAT功能需要打开NAT配置开关，NAT端口号范围可根据需要进行修改。 

 
NAT端口号范围配置用于修改NAT转换时端口号的映射范围。 

 
SNAT配置用于修改储存SNAT哈希表的老化时长和告警上报门限。 

 
FULLNAT配置用于修改储存FULLNAT哈希表的老化时长和告警上报门限。 

 




[](None)子主题： 






### NAT开关配置 
### NAT开关配置 


[](None)背景知识 


NAT（Network Address Translation，网络地址转换）功能可以把内部网络的私有地址转换为互联网的公有地址，使得内部网络上的节点可以访问互联网。 

本配置对网元内部没有分配公网地址，但需要访问互联网的服务提供。如果不使用该配置，则内部没有分配公网地址的服务无法访问互联网。 

网元内部需要使用NAT功能或者关闭NAT功能，可使用本配置进行配置。 




[](None)功能说明 


该配置用于打开或者关闭NAT功能。NAT功能开启会消耗内存，所以NAT功能默认关闭，需要使用NAT功能时，才配置NAT开关为打开状态。NAT功能状态为关闭时，NAT功能不可用，使用NAT功能的服务无法开展业务。 




[](None)子主题： 






#### 修改NAT开关配置(SET NAT SWITCH) 
#### 修改NAT开关配置(SET NAT SWITCH) 


[](None)功能说明 

该命令用于修改NAT（Network Address Translation，网络地址转换）功能开关。 

当业务需要打开或者关闭NAT功能时，使用该命令。 


[](None)注意事项 

NAT功能开启会消耗内存，所以NAT功能默认关闭。需要使用NAT功能时，才配置NAT功能开关为打开状态。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NATSWITCH|NAT开关|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: DISABLE|NAT功能的状态，包括：启用：开启NAT功能，提供NAT服务给网元。禁用：关闭NAT功能，关闭NAT服务给网元。




[](None)命令举例 


`
打开NAT功能开关。
SET NAT SWITCH:NATSWITCH="ENABLE"

(No.1) : SET NAT SWITCH:NATSWITCH="ENABLE"
-----------------CommonS_IPS_0----------------
执行成功开始时间:2021-10-22 14:09:22 耗时: 0.137 秒

` 


#### 查询NAT开关配置(SHOW NAT SWITCH) 
#### 查询NAT开关配置(SHOW NAT SWITCH) 


[](None)功能说明 

该命令用于查询NAT（Network Address Translation，网络地址转换）功能的开关配置。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NATSWITCH|NAT开关|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: DISABLE|NAT功能的状态，包括：启用：开启NAT功能，提供NAT服务给网元。禁用：关闭NAT功能，关闭NAT服务给网元。




[](None)命令举例 


`
查询NAT功能的开关配置。
SHOW NAT SWITCH

(No.2) : SHOW NAT SWITCH:
-----------------CommonS_IPS_0----------------
操作维护       NAT开关 
-----------------------
修改           禁用    
-----------------------
记录数：1
执行成功开始时间:2021-06-19 14:57:14 耗时: 0.633 秒

` 


### NAT端口号范围配置 
### NAT端口号范围配置 


[](None)背景知识 


NAT（Network Address Translation，网络地址转换）功能可以把内部网络的私有地址转换为互联网的公有地址，使得内部网络上的节点可以访问互联网。 

本配置对网元内部没有分配公网地址，但需要访问互联网的服务提供。如果不使用该配置，则内部没有分配公网地址的服务无法访问互联网。 

NAT功能在转换私有地址为公有地址时，由于转换后的公有地址都相同，不能标识原先的业务，所以还需要端口号来标识，不同的端口号用于标识不同的业务。业务和端口号的映射的关系为唯一对应，由于端口号范围有限制，所以相同公有地址下承载的业务也存在限制，NAT端口号范围配置就是为了限制端口号的范围。 




[](None)功能说明 


该配置用于修改NAT端口号范围。默认情况一个公有地址下可以映射出10000个端口号，即一个公有地址下可以承载10000个业务。当此默认配置不满足要求时，可用此配置修改NAT端口号范围，但端口号最大不超过65535。 




[](None)子主题： 






#### 修改NAT端口号范围(SET NAT PORT) 
#### 修改NAT端口号范围(SET NAT PORT) 


[](None)功能说明 

该命令用于设置NAT（Network Address Translation，网络地址转换）的端口号基准和端口号范围。 

当NAT端口号的默认配置不满足要求时，使用该命令修改NAT端口号基准和端口号范围。 

命令执行成功后，后续NAT端口号就按照新的NAT端口号范围映射。 


[](None)注意事项 

端口号最大不超过65535，即最多存在65535个映射的端口。 

此命令为危险命令，修改默认值后，需要重启IPS的SC，否则会导致后续使用NAT功能的业务不通。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NATPORTBASE|NAT端口号基准|参数可选性: 必选参数类型: 数字参数范围: 1000-63535默认值: 1000|NAT端口号的基准值。NAT端口会以该参数为基准加上“每个SC的NAT端口号范围”进行映射。该参数默认为1000，没有特殊需求，不需要修改。
NATPORTRANGEPERSC|每个SC的NAT端口号范围|参数可选性: 必选参数类型: 数字参数范围: 2000-64535默认值: 10000|每个SC的NAT端口号的范围。NAT端口会以“NAT端口号基准”加上该参数的值进行映射。端口号范围默认为0到10000，最多可以映射出10000个端口号。没有特殊需求，不需要修改。




[](None)命令举例 


`
设置NAT端口号，NAT端口号基准为2000，每个SC的NAT端口号范围为10000。

SET NAT PORT:NATPORTBASE=2000,NATPORTRANGEPERSC=10000


(No.1) : SET NAT PORT:NATPORTBASE=2000,NATPORTRANGEPERSC=10000
-----------------CommonS_IPS_0----------------
执行成功开始时间:2021-10-22 14:03:18 耗时: 0.141 秒

` 


#### 查询NAT端口号范围(SHOW NAT PORT) 
#### 查询NAT端口号范围(SHOW NAT PORT) 


[](None)功能说明 

该命令用于查询NAT端口号基准和端口号范围。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NATPORTBASE|NAT端口号基准|参数可选性: 任选参数类型: 数字参数范围: 1000-63535默认值: 1000|NAT端口号的基准值。NAT端口会以该参数为基准加上“每个SC的NAT端口号范围”进行映射。该参数默认为1000，没有特殊需求，不需要修改。
NATPORTRANGEPERSC|每个SC的NAT端口号范围|参数可选性: 任选参数类型: 数字参数范围: 2000-64535默认值: 10000|每个SC的NAT端口号的范围。NAT端口会以“NAT端口号基准”加上该参数的值进行映射。端口号范围默认为0到10000，最多可以映射出10000个端口号。没有特殊需求，不需要修改。




[](None)命令举例 


`
查询NAT端口号基准和端口号范围。
SHOW NAT PORT

(No.3) : SHOW NAT PORT:
-----------------CommonS_IPS_0----------------
操作维护       NAT端口号基准 每个SC的NAT端口号范围 
-------------------------------------------
修改           1000          10000         
-------------------------------------------
记录数：1
执行成功开始时间:2021-06-19 15:06:15 耗时: 0.692 秒

` 


### SNAT配置 
### SNAT配置 


[](None)背景知识 


NAT（Network Address Translation，网络地址转换）功能可以把内部网络的私有地址转换为互联网的公有地址，使得内部网络上的节点可以访问互联网。 

本配置对网元内部没有分配公网地址，但需要访问互联网的服务提供。如果不使用该配置，则内部没有分配公网地址的服务无法访问互联网。 

NAT技术有多中实现方式，SNAT（Source Network Address Translation，源网络地址转换）是其中一种。 

哈希表是根据关键码值直接进行访问的数据结构，可通过哈希表保存SNAT转换的信息。 




[](None)功能说明 


该配置用于修改储存SNAT（Source Network Address Translation，源网络地址转换）哈希表老化时长和告警上报门限。 


 
若哈希表中的条目长时间不使用，可释放以节省系统内存。此配置可设置哈希表条目不使用的时长，超过该时长则释放系统内存。 

 
若哈希表中的条目超过哈希表容量门限时，则上报告警。 

 




[](None)子主题： 






#### 修改SNAT配置(SET SNATPARA) 
#### 修改SNAT配置(SET SNATPARA) 


[](None)功能说明 

该命令用于设置SNAT（Source Network Address Translation，源网络地址转换）哈希表的老化时长和告警门限。 

当老化时长或者告警门限太小或者太大时而导致哈希表被删除太快或者太慢，或者告警频繁上报时，使用该命令修改老化间隔时间或者告警门限在合理范围内。 

老化间隔时间或告警门限配置完成后，SNAT哈希表会根据配置的老化时长删除哈希表中的条目，当哈希条目超过配置的告警上报门限后会上报SNAT表容量超过门限告警。 


[](None)注意事项 

修改老化时长可能会导致哈希表被删除太快或者太慢，影响业务流程；修改告警门限可能导致告警频繁上报。如没有特殊需求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ALARMTHRESHOLD|告警门限（%）|参数可选性: 必选参数类型: 数字参数范围: 1-99默认值: 90|SNAT哈希表的告警上报门限。当哈希条目超过该参数设置的门限后会上报SNAT表容量超过门限告警。该参数默认配置为哈希表最大容量的百分之90，没有特殊需求，不需要修改。
AGINGTIME|老化时长（秒）|参数可选性: 必选参数类型: 数字参数范围: 180-3600默认值: 240|SNAT哈希表的哈希条目老化时长。SNAT哈希表会根据该参数删除哈希表中的条目。该参数默认配置为240秒，没有特殊需求，不需要修改。




[](None)命令举例 


`
修改SNAT哈希表，告警门限为50，老化时长为200。
SET SNATPARA:ALARMTHRESHOLD=50,AGINGTIME=200

(No.2) : SET SNATPARA:ALARMTHRESHOLD=50,AGINGTIME=200
-----------------CommonS_IPS_0----------------
执行成功开始时间:2021-06-21 11:25:01 耗时: 0.191 秒

` 


#### 查询SNAT配置(SHOW SNATPARA) 
#### 查询SNAT配置(SHOW SNATPARA) 


[](None)功能说明 

该命令用于查看SNAT（Source Network Address Translation，源网络地址转换）哈希表的老化时长和告警上报门限。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ALARMTHRESHOLD|告警门限（%）|参数可选性: 任选参数类型: 数字参数范围: 1-99默认值: 90|SNAT哈希表的告警上报门限。当哈希条目超过该参数设置的门限后会上报SNAT表容量超过门限告警。该参数默认配置为哈希表最大容量的百分之90，没有特殊需求，不需要修改。
AGINGTIME|老化时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 180-3600默认值: 240|SNAT哈希表的哈希条目老化时长。SNAT哈希表会根据该参数删除哈希表中的条目。该参数默认配置为240秒，没有特殊需求，不需要修改。




[](None)命令举例 


`
查看SNAT哈希表的告警门限和老化时长。
SHOW SNATPARA

(No.1) : SHOW SNATPARA:
-----------------CommonS_IPS_0----------------
操作维护  告警门限（%） 老化时长（秒） 
------------------------------------------------------------------
修改            90            240            
------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-21 11:24:24 耗时: 0.603 秒

` 


### FULLNAT配置 
### FULLNAT配置 


[](None)背景知识 


NAT（Network Address Translation，网络地址转换）功能可以把内部网络的私有地址转换为互联网的公有地址，使得内部网络上的节点可以访问互联网。 

本配置对网元内部没有分配公网地址，但需要访问互联网的服务提供。如果不使用该配置，则内部没有分配公网地址的服务无法访问互联网。 

NAT技术有多中实现方式，FULLNAT（FULL Network Address Translation，全网络地址转换）是其中一种。 

哈希表是根据关键码值直接进行访问的数据结构，可通过哈希表保存FULLNAT转换的信息。 




[](None)功能说明 


该配置用于修改储存FULLNAT（FULL Network Address Translation，全网络地址转换）哈希表老化时长和告警上报门限。 


 
若哈希表中的条目长时间不使用，可释放以节省系统内存。此配置可设置哈希表条目不使用的时长，超过该时长则释放系统内存。 

 
若哈希表中的条目超过哈希表容量门限时，则上报告警。 

 




[](None)子主题： 






#### 修改FULLNAT配置(SET FULLNATPARA) 
#### 修改FULLNAT配置(SET FULLNATPARA) 


[](None)功能说明 

该命令用于设置FULLNAT（FULL Network Address Translation，全网络地址转换）哈希表的老化时长和告警门限。 

当老化时长或者告警门限太小或者太大时而导致哈希表被删除太快或者太慢，或者告警频繁上报时，使用该命令修改老化间隔时间或者告警门限在合理范围内。 

老化间隔时间或告警门限配置完成后，FULLNAT哈希表会根据配置的老化时长删除哈希表中的条目，当哈希条目超过配置的告警上报门限后会上报FULLNAT表容量超过门限告警。 


[](None)注意事项 

修改老化时长可能会导致哈希表被删除太快或者太慢，影响业务流程；修改告警门限可能导致告警频繁上报。如没有特殊需求，请不要修改。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ALARMTHRESHOLD|告警门限（%）|参数可选性: 必选参数类型: 数字参数范围: 1-99默认值: 90|FULLNAT哈希表的告警上报门限。当哈希条目超过该参数设置的门限后会上报FULLNAT表容量超过门限告警。该参数默认配置为哈希表最大容量的百分之90，没有特殊需求，不需要修改。
AGINGTIME|老化时长（秒）|参数可选性: 必选参数类型: 数字参数范围: 180-3600默认值: 240|FULLNAT哈希表的哈希条目老化时长。FULLNAT哈希表会根据该参数删除哈希表中的条目。该参数默认配置为240秒，没有特殊需求，不需要修改。




[](None)命令举例 


`
修改FULLNAT哈希表，告警门限为50，老化时长为200。
SET FULLNATPARA:ALARMTHRESHOLD=50,AGINGTIME=200

(No.2) : SET FULLNATPARA:ALARMTHRESHOLD=50,AGINGTIME=200
-----------------CommonS_IPS_0----------------
执行成功开始时间:2021-06-21 11:25:01 耗时: 0.191 秒

` 


#### 查询FULLNAT配置(SHOW FULLNATPARA) 
#### 查询FULLNAT配置(SHOW FULLNATPARA) 


[](None)功能说明 

该命令用于查看FULLNAT（FULL Network Address Translation，源网络地址转换）哈希表的老化时长和告警上报门限。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ALARMTHRESHOLD|告警门限（%）|参数可选性: 任选参数类型: 数字参数范围: 1-99默认值: 90|FULLNAT哈希表的告警上报门限。当哈希条目超过该参数设置的门限后会上报FULLNAT表容量超过门限告警。该参数默认配置为哈希表最大容量的百分之90，没有特殊需求，不需要修改。
AGINGTIME|老化时长（秒）|参数可选性: 任选参数类型: 数字参数范围: 180-3600默认值: 240|FULLNAT哈希表的哈希条目老化时长。FULLNAT哈希表会根据该参数删除哈希表中的条目。该参数默认配置为240秒，没有特殊需求，不需要修改。




[](None)命令举例 


`
查看FULLNAT哈希表的告警门限和老化时长。
SHOW FULLNATPARA

(No.1) : SHOW FULLNATPARA:
-----------------CommonS_IPS_0----------------
操作维护  告警门限（%） 老化时长（秒） 
------------------------------------------------------------------
修改            90            240            
------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-06-21 11:24:24 耗时: 0.603 秒

` 


## IPS动态命令 
## IPS动态命令 


[](None)背景知识 


对IPS进行动态调试，输出帮助信息到文件或EM界面上。 




[](None)功能说明 


该节点下的命令包括查询IPS CPU利用率、查询IPS ACL规则条目数、启动DPDK抓包、停止DPDK抓包、显示DPDK抓包状态等动态命令。 




[](None)子主题： 






### Tcpdump动态命令 
### Tcpdump动态命令 


[](None)背景知识 


IPS网元集成的抓包命令，输出结果信息到文件或者EM界面上。 




[](None)功能说明 


该节点下的命令包括开启Tcpdump、关闭Tcpdump、清除Tcpdump结果、显示Tcpdump结果等动态命令。 




[](None)子主题： 






#### 启动Tcpdump抓包(TCPDUMP ON) 
#### 启动Tcpdump抓包(TCPDUMP ON) 


[](None)功能说明 

该命令用于IPS上Tcpdump统计抓包。在IPS发生丢包需要定位问题时使用，抓出的报文可以打印至shell命令行中，也可以写入到文件中。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SWITCH|过滤点|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-7|该参数用于抓包的过滤点。常用过滤点的含义如下：网元外发口收包点、网元外发口发包点、网元内部口收包点、网元内部口发包点、网元协议报文外发点、网元协议报文上送点。
VLANFLAG|是否带VLAN标志|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示报文二层头中是否带VLAN。
OTHERSWITCH|其他过滤点|参数可选性: 任选参数类型: 数字参数范围: 7-1000|该参数用于表示除常用过滤点之外的其他过滤点。
PKTTYPE|报文类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-11|该参数用于表示被过滤报文的类型。
WRITEFILE|写文件标志位|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示是否将报文码流写入文件，文件存储在IPS容器内/home/vrouter_fwd_packet/tcpdump.txt目录下。
WRITEFILENUM|报文写文件个数|参数可选性: 任选参数类型: 数字参数范围: 0-100000|该参数用于表示最大的写入tcpdump.txt的文件报文个数，参数为0时默认写1000个报文。
SRCIP|源IP地址|参数可选性: 任选参数类型: 字符串|该参数用于表示源IP地址。
DSTIP|目的IP地址|参数可选性: 任选参数类型: 字符串|该参数用于表示目的IP地址。
SRCPORT|源端口号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示源端口号。
DSTPORT|目的端口号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示目的端口号。
OTHER|其他条件|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于表示其他的过滤参数。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果：成功、错误和超时。
PathString|文件存放路径|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于表示文件存放路径。




[](None)命令举例 


`
启动Tcpdump抓包。 

TCPDUMP ON:SWITCH="OutInterfaceRcv",VLANFLAG="No",PKTTYPE="IPv4",WRITEFILE="On",WRITEFILENUM=500,SRCIP="123.123.123.123",DSTIP="124.124.124.124",SRCPORT=5000,DSTPORT=5000

-----------------CommonS_IPS_0----------------
操作结果
-------------------
成功
-------------------
执行成功耗时: 3.168 秒

` 


#### 停止Tcpdump抓包(TCPDUMP OFF) 
#### 停止Tcpdump抓包(TCPDUMP OFF) 


[](None)功能说明 

该命令用于关闭IPS上的Tcpdump抓包功能。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
停止Tcpdump抓包

TCPDUMP OFF:
-----------------CommonS_IPS_0----------------
Operate Result
-------------------
Success
-------------------

执行成功耗时: 3.138 秒

` 


#### 清除Tcpdump结果(TCPDUMP CLEAR) 
#### 清除Tcpdump结果(TCPDUMP CLEAR) 


[](None)功能说明 

该命令用于清除IPS上Tcpdump的抓包结果。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
清除Tcpdump结果

TCPDUMP CLEAR:
-----------------CommonS_IPS_0----------------
Operate Result
-------------------
Success
-------------------

执行成功耗时: 3.151 秒

` 


#### 显示Tcpdump结果(TCPDUMP STAT) 
#### 显示Tcpdump结果(TCPDUMP STAT) 


[](None)功能说明 

该命令用于显示IPS上Tcpdump抓包结果。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
InstNo|实例号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示实例号。
SWITCH|过滤点|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示过滤点。
PktsNum|过滤报文数量|参数可选性: 必选参数类型: 数字|该参数用于表示过滤报文数量。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于操作结果。




[](None)命令举例 


`
显示Tcpdump结果

TCPDUMP STAT:

-----------------CommonS_IPS_0----------------
Instance No   Filter Point   Tcpdump Num
2             1              50
2             2              0
2             3              0
2             4              0
2             5              0
2             6              0
1             1              50
1             2              0
1             3              0
1             4              0
1             5              0
1             6              0
记录数：12
Operate Result
-------------------
Success
-------------------
执行成功耗时: 3.137 秒

` 


#### 显示Tcpdump开关(TCPDUMP SHOW SWITCH) 
#### 显示Tcpdump开关(TCPDUMP SHOW SWITCH) 


[](None)功能说明 

该命令用于显示IPS上Tcpdump打开的抓包点。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
InstNo|实例号|参数可选性: 必选参数类型: 数字|该参数用于表示实例号。
Switch|过滤点|参数可选性: 必选参数类型: 数字|该参数用于表示过滤点。




[](None)命令举例 


`
查询Tcpdump开关信息。
(No.1) : TCPDUMP SHOW SWITCH:
-----------------CommonS_IPS_0----------------
Instance No Filter Point
2                       1
2                       2
记录数：2

Operate Result
Success

执行成功耗时: 3.216 秒

` 


### 染色动态命令 
### 染色动态命令 


[](None)背景知识 


DSCP（Differentiated Services Code Point，差分服务代码点）：IETF发布的QoS分类标准。它在每个数据包IP头部的服务类别TOS标识字节中，通过编码值来区分优先级。 

IP染色是定位网络链路质量的一种手段。发送端对报文做特定的标记称之为染色。 

SC发送报文时，可以根据规则设置IP报文头中DSCP字段的值，并统计染色报文的数量。SC接收报文时，也可以根据IP头中DSCP字段的值统计染色报文数量。通过对比染色报文数量，可以确认报文丢失的节点，从而可以进行网络报文故障的定位。 




[](None)功能说明 


该节点下面包括设置IPS上IP染色规则、停止IPS指定规则染色、显示IPS上指定规则的染色统计结果、清除IPS指定染色规则结果、显示当前配置规则、删除染色规则等动态命令。 

对NFS实例进行染色相关操作： 


 
开启染色(START IP COLORING)：在特定SC上新增一条染色规则，并开启这条规则进行染色。 

 
停止染色(STOP IP COLORING)：在SC上停止某条特定染色规则（支持停止所有染色规则）。 

 
清除染色结果(CLEAR IP COLORING STATISTIC)：在SC上清除某条特定规则的染色结果（支持清除所有规则的染色结果）。 

 
显示染色结果(SHOW IP COLORING STATISTIC)：显示SC上某条特定规则的染色结果（支持显示所有规则的染色结果）。 

 
显示染色规则(SHOW IP COLORING RULE)：显示SC上某条特定染色规则（支持显示所有染色规则）。 

 
删除染色规则(DELETE IP COLORING RULE)：在SC上删除某条特定染色规则（支持删除所有染色规则）。 

 




[](None)子主题： 






#### 启动染色(START IP COLORING) 
#### 启动染色(START IP COLORING) 


[](None)功能说明 

该命令用于在SC上新增一条染色规则并开启该规则对IP报文进行染色（包括接收和发送的报文，由参数决定）。当需要对网络丢包问题进行定位时，执行该命令。命令执行成功后，SC发送报文时，可以根据报文过滤规则设置IP头中DSCP字段的值，并进行统计。SC接收报文时，也可以根据IP头中DSCP字段的值进行统计。从而确认报文丢在哪里，用于故障定位。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RULEID|染色规则号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于表示染色规则的ID。
IPVERSION|IP版本号|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示报文IP头中IP地址的版本。IPV4：表示报文IP头中的IP地址为IPv4地址。IPV6：表示报文IP头中的IP地址为IPv6地址。
PROTOCOL|IP协议号|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-5|该参数用于表示报文IP头中的协议号，包括：UDP协议TCP协议SCTP协议IPV4 ICMP协议其他协议号
OTHERPROTOCOL|其他协议号|参数可选性: 任选参数类型: 数字|该参数用于表示不在“IP协议号”参数的枚举值中的其他IP协议号。仅当“IP协议号”参数配置为“其他协议号”时，可以配置本参数。
SRCIP|源IP地址|参数可选性: 必选参数类型: 字符串|该参数用于表示报文IP头中的源IP地址。
DSTIP|目的IP地址|参数可选性: 必选参数类型: 字符串|该参数用于表示报文IP头中的目的IP地址。
SRCPORT|源端口号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示报文IP头中的源端口号。
DSTPORT|目的端口号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示报文IP头中的目的端口号。
FRAGFLAG|分片标记|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于表示IP头中的分片标记。NotCare：表示SC不关心报文是否分片，都会对报文进行染色。Frag：表示SC仅对分片的报文进行染色。NotFrag：表示SC仅对不分片的报文进行染色。
LOCALVRF|VRF值|参数可选性: 必选参数类型: 数字参数范围: 0-4095|该参数用于表示开启染色功能的网络对应的VRF值。
DSCP|DSCP值|参数可选性: 必选参数类型: 数字参数范围: 0-63|该参数用于表示报文DSCP（Differentiated Services Code Point，差分服务代码点）的取值，这个值由使用者自己决定。接收报文时，SC根据报文中的DSCP值来统计报文数量。发送报文时，SC将报文中的DSCP值染成规则里设定的DSCP值。
MODE|收发点|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于指定在报文的接收点还是发送点对报文进行染色。0表示接收点，SC只会对报文进行统计。1表示发送点，即SC对报文进行统计，也会更改报文的DSCP值进行染色。
LOCATION|染色位置|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于表示染色位置。填写all，表示在当前服务的所有的SC（Service component，服务组件）上对发送或者接收的报文进行染色。填写数字N，表示在ScLogicNo为N的SC（Service component，服务组件）上对发送或者接收的报文进行染色。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果，包括：操作成功规则ID错误IP版本号错误VRF错误染色收发点错误染色位置错误bpf解析失败响应超时源目的地址相同Ip地址与Ip版本不匹配分片类型与端口号不匹配IP协议号无效SC未回响应




[](None)命令举例 


`
新增一条染色规则并开启该规则进行IP报文染色；参数包括，规则ID：1，IP版本：ipv4，协议号：UDP，源地址：100.20.11.11，目的地址：192.0.20.1，源端口：51002，目的端口：51003，分片标记：不分片，VRF值：0，DSCP值：20，收发点：收，染色位置：所有SC。
START IP COLORING:RULEID=1,IPVERSION="ipv4",PROTOCOL="UDP",SRCIP="100.20.11.11",DSTIP="192.0.20.1",SRCPORT=51002,DSTPORT=51003,FRAGFLAG="NotFrag",LOCALVRF=0,DSCP=20,MODE="rcv",LOCATION="all"
` 


#### 停止染色(STOP IP COLORING) 
#### 停止染色(STOP IP COLORING) 


[](None)功能说明 

该命令用于停止根据指定规则对SC接收或者发送的IP报文进行染色。当需要关闭特定规则的染色功能时，执行该命令。命令执行成功后，SC接收报文时，不再对报文进行统计；SC发送报文时，对于匹配该规则的报文不再设置IP头中DSCP字段的值，也不进行统计。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RULEID|染色规则号|参数可选性: 必选参数类型: 字符串参数范围: 1-8|该参数用于表示规则ID。可以使用SHOW IP COLORING RULE来查询染色规则信息。填写all，停止所有染色规则。填写数字N，表示停止规则号为N的染色规则。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果，包括：操作成功规则ID错误响应超时SC未回响应




[](None)命令举例 


`
停止染色功能，染色规则号为1。
STOP IP COLORING:RULEID=1
` 


#### 显示染色结果(SHOW IP COLORING STATISTIC) 
#### 显示染色结果(SHOW IP COLORING STATISTIC) 


[](None)功能说明 

该命令用于显示SC根据指定的染色规则对IP报文染色的统计信息。当需要查询SC根据特定规则对IP报文染色的统计信息时，使用该命令。命令执行成功后，会显示染色统计信息及对应规则的相关信息，如规则号、IP地址等。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RULEID|染色规则号|参数可选性: 必选参数类型: 字符串参数范围: 1-8|该参数用于表示规则ID。填写all，表示显示当前所有染色规则的染色结果。填写数字N，表示显示规则号为N的染色规则的染色结果。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RuleID|染色规则号|参数可选性: 必选参数类型: 数字|该参数用于表示染色规则的ID。
IPVersion|IP版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示报文IP头中IP地址的版本。IPV4：表示报文IP头中的IP地址为IPv4地址。IPV6：表示报文IP头中的IP地址为IPv6地址。
Protocol|IP协议号|参数可选性: 必选参数类型: 数字|该参数用于表示报文IP头中的协议号。
SrcIP|源IP地址|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示报文IP头中的源IP地址。
DstIP|目的IP地址|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示报文IP头中的目的IP地址。
SrcPort|源端口号|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示报文IP头中的源端口号。
DstPort|目的端口号|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示报文IP头中的目的端口号。
FragFlag|分片标记|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示IP头中的分片标记。NotCare：表示SC不关心报文是否分片，都会对报文进行染色。Frag：表示SC仅对分片的报文进行染色。NotFrag：表示SC仅对不分片的报文进行染色。
LocalVrf|VRF值|参数可选性: 必选参数类型: 数字|该参数用于表示开启染色功能的网络对应的VRF值。
Dscp|DSCP值|参数可选性: 必选参数类型: 数字|该参数用于表示报文DSCP（Differentiated Services Code Point，差分服务代码点）的取值，这个值由使用者自己决定。接收报文时，SC根据报文中的DSCP值来统计报文数量。发送报文时，SC将报文中的DSCP值染成规则里设定的DSCP值。
Mode|收发点|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于指定在报文的接收点还是发送点对报文进行染色。0表示接收点，SC只会对报文进行统计。1表示发送点，即SC对报文进行统计，也会更改报文的DSCP值进行染色。
InstNo|实例号|参数可选性: 必选参数类型: 数字|该参数用于表示染色位置。填写all，表示在当前服务的所有的SC（Service component，服务组件）上对发送或者接收的报文进行染色。填写数字N，表示在ScLogicNo为N的SC（Service component，服务组件）上对发送或者接收的报文进行染色。
PktsNum|染色报文数量|参数可选性: 必选参数类型: 数字|该参数用于表示染色报文个数。




[](None)命令举例 


`
显示染色结果，染色规则号为2，染色位置为所有SC。
SHOW IP COLORING STATISTIC:RULEID=2

(No.1) : SHOW IP COLORING STATISTIC:RULEID=2
染色规则号 IP版本号 IP协议号 源IP地址     目的IP地址 源端口号 目的端口号 分片标记 VRF值 DSCP值 收发点 实例号 染色报文数量 
-----------------------------------------------------------------------------------------------------------------------------------
1          IPV4     17       100.20.11.11 192.0.20.1 51002    51003      NotFrag  0     20     Rcv    1      0            
1          IPV4     17       100.20.11.11 192.0.20.1 51002    51003      NotFrag  0     20     Rcv    2      0            
-----------------------------------------------------------------------------------------------------------------------------------


` 


#### 清除染色结果(CLEAR IP COLORING STATISTIC) 
#### 清除染色结果(CLEAR IP COLORING STATISTIC) 


[](None)功能说明 

该命令用于清除SC根据指定的染色规则对IP报文染色的统计信息。当需要清除特定规则的染色统计信息时，使用该命令。该命令执行成功后，会清除SC上的特定规则的统计信息。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RULEID|染色规则号|参数可选性: 必选参数类型: 字符串参数范围: 1-8|该参数用于表示规则ID，可以使用SHOW IP COLORING RULE来查询染色规则信息。填写all，表示清除当前所有染色规则的染色结果。填写数字N，表示清除规则号为N的染色规则的染色结果。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果，包括：操作成功规则ID错误响应超时SC未回响应




[](None)命令举例 


`
清除SC上的染色结果，染色规则号为2。
CLEAR IP COLORING STATISTIC:RULEID=2
` 


#### 显示染色规则(SHOW IP COLORING RULE) 
#### 显示染色规则(SHOW IP COLORING RULE) 


[](None)功能说明 

该命令用于显示SC上的染色规则。当需要查看染色规则时，使用该命令。命令执行成功时，显示SC上的所有染色规则。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RuleID|染色规则号|参数可选性: 必选参数类型: 数字|该参数用于表示染色规则的ID。
IPVersion|IP版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示报文IP头中IP地址的版本。IPV4：表示报文IP头中的IP地址为IPv4地址。IPV6：表示报文IP头中的IP地址为IPv6地址。
Protocol|IP协议号|参数可选性: 必选参数类型: 数字|该参数用于表示报文IP头中的协议号。
SrcIP|源IP地址|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示报文IP头中的源IP地址。
DstIP|目的IP地址|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示报文IP头中的目的IP地址。
SrcPort|源端口号|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示报文IP头中的源端口号。
DstPort|目的端口号|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示报文IP头中的目的端口号。
FragFlag|分片标记|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示IP头中的分片标记。NotCare：表示SC不关心报文是否分片，都会对报文进行染色。Frag：表示SC仅对分片的报文进行染色。NotFrag：表示SC仅对不分片的报文进行染色。
LocalVrf|VRF值|参数可选性: 必选参数类型: 数字|该参数用于表示开启染色功能的网络对应的VRF值。
Dscp|DSCP值|参数可选性: 必选参数类型: 数字|该参数用于表示报文DSCP（Differentiated Services Code Point，差分服务代码点）的取值，这个值由使用者自己决定。接收报文时，SC根据报文中的DSCP值来统计报文数量。发送报文时，SC将报文中的DSCP值染成规则里设定的DSCP值。
Mode|收发点|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于指定在报文的接收点还是发送点对报文进行染色。0表示接收点，SC只会对报文进行统计。1表示发送点，即SC对报文进行统计，也会更改报文的DSCP值进行染色。
RuleStatus|染色规则状态|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于表示染色规则状态。open表示SC会对报文进行染色。stop表示SC不会对报文进行染色。
InstNo|实例号|参数可选性: 必选参数类型: 字符串参数范围: 0-512|该参数用于表示染色位置。填写all，表示在当前服务的所有的SC（Service component，服务组件）上对发送或者接收的报文进行染色。填写数字N，表示在ScLogicNo为N的SC（Service component，服务组件）上对发送或者接收的报文进行染色。




[](None)命令举例 


`
显示SC上所有染色规则。
SHOW IP COLORING RULE

(No.1) : SHOW IP COLORING RULE:
-----------------CommonS_IPS_0----------------
染色规则号 IP版本号 IP协议号 源IP地址     目的IP地址 源端口号 目的端口号 分片标记 VRF值 DSCP值 收发点 染色规则状态 实例号 
-----------------------------------------------------------------------------------------------------------------------------------
1          IPV4     17       100.20.11.11 192.0.20.1 51002    51003      NotFrag  0     20     Rcv    Open         1,2    
2          IPV6     17       2000:10::45  c000::a01  45011    45011      NotFrag  0     40     Rcv    Stop         1,2    
-----------------------------------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-03-19 09:59:04 耗时: 3.626 秒

` 


#### 删除染色规则(DELETE IP COLORING RULE) 
#### 删除染色规则(DELETE IP COLORING RULE) 


[](None)功能说明 

该命令用于删除SC上的染色规则。当需要清除特定规则时，使用该命令。该命令执行成功后，SC上将不能再根据该染色规则对IP报文进行染色。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
RULEID|染色规则号|参数可选性: 必选参数类型: 字符串参数范围: 1-8|该参数用于表示规则ID，可以使用SHOW IP COLORING RULE来查询染色规则信息。填写all，表示删除当前所有的染色规则。填写数字N，表示删除规则号为N的染色规则。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果，包括：操作成功规则ID错误响应超时SC未回响应




[](None)命令举例 


`
删除SC上的染色规则号为2的规则。
DELETE IP COLORING RULE:RULEID=2
` 


### PFCP统计动态命令 
### PFCP统计动态命令 


[](None)背景知识 


统计经过IPS N4口的各种类型报文数量。 




[](None)功能说明 


该节点下面包括开启、停止、显示、清除PFCP统计等动态命令。 




[](None)子主题： 






#### 开启pfcp消息统计(START PFCP STAT) 
#### 开启pfcp消息统计(START PFCP STAT) 


[](None)功能说明 

该命令用于开启N4接口PFCP会话消息分类统计，统计点包括EIO口收发以及RAW口收发消息。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果（成功、失败或者超时），超时或失败时表示该动态命令未正确执行。




[](None)命令举例 


`
START PFCP STAT:

START PFCP STAT:
-----------------CommonS_IPS_0----------------
Operate Result
-------------------
Success
-------------------

执行成功耗时: 3.138 秒

` 


#### 停止pfcp消息统计(STOP PFCP STAT) 
#### 停止pfcp消息统计(STOP PFCP STAT) 


[](None)功能说明 

该命令用于停止N4接口PFCP会话消息统计，统计点包括EIO口收发以及RAW口收发消息。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果（成功、失败或者超时），超时或失败时表示该动态命令未正确执行。




[](None)命令举例 


`
STOP PFCP STAT:

STOP PFCP STAT:
-----------------CommonS_IPS_0----------------
Operate Result
-------------------
Success
-------------------

执行成功耗时: 3.138 秒

` 


#### 查询pfcp消息统计(SHOW PFCP STAT) 
#### 查询pfcp消息统计(SHOW PFCP STAT) 


[](None)功能说明 

该命令用于显示N4接口PFCP会话消息的统计结果。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCLogicNo|SC逻辑号|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于表示IPS的SC逻辑号。
Item|统计项|参数可选性: 必选参数类型: 字符串参数范围: 0-63|该参数用于表示统计项名称（根据PFCP消息类型、统计点分别进行统计）。
Num|统计数量|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于表示对应统计项的消息数量。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果（成功、失败或者超时），超时或失败时表示该动态命令未正确执行。




[](None)命令举例 


`
SHOW PFCP STAT:

SHOW PFCP STAT:
-----------------CommonS_IPS_0----------------
SC逻辑号 统计项 统计数量
2 CSS_EIO_RCV_PFCP_ASSOCIATION_SETUP_REQUEST 86
1 CSS_EIO_RCV_PFCP_ASSOCIATION_SETUP_REQUEST 86
记录数：2

操作结果
操作成功

执行成功耗时: 0.134 秒

` 


#### 清除pfcp消息统计(CLEAR PFCP STAT) 
#### 清除pfcp消息统计(CLEAR PFCP STAT) 


[](None)功能说明 

该命令用于清除N4接口PFCP会话消息已有统计。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果（成功、失败或者超时），超时或失败时表示该动态命令未正确执行。




[](None)命令举例 


`
CLEAR PFCP STAT:

CLEAR PFCP STAT:
-----------------CommonS_IPS_0----------------
Operate Result
-------------------
Success
-------------------

执行成功耗时: 3.138 秒

` 


### 故障诊断 
### 故障诊断 


[](None)背景知识 


IPS网元针对配置进行自检，将诊断结果输出EM界面上。 




[](None)功能说明 


该节点下面包括开启诊断，显示诊断信息等动态命令。 




[](None)子主题： 






#### ACL诊断 
#### ACL诊断 


[](None)背景知识 


IPS网元针对ACL配置进行自检，将诊断结果输出EM界面上。 




[](None)功能说明 


该节点下面包括开启ACL诊断，显示ACL诊断信息等动态命令。 




[](None)子主题： 






##### 启动Acl 诊断(ACL DIAGNOSE ON) 
##### 启动Acl 诊断(ACL DIAGNOSE ON) 


[](None)功能说明 

该命令用于IPS上经过ACL模块的流量进行故障诊断。当预先配置ACL后，在IPS发生丢包需要定位问题时使用，最终给出对应五元组的业务流量出现丢包的原因。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VLANFLAG|是否带VLAN标志|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示报文二层头中是否带VLAN。
IPVERSION|IP报文的版本号|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 4-6|该参数用于表示报文三层头中的IP版本号。
VPNID|VPN的ID号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于表示本端报文出接口的VPNID。
PROTOCOL|报文类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-132|该参数用于表示被过滤报文的类型。
SRCIP|源IP地址|参数可选性: 任选参数类型: 字符串|该参数用于表示源IP地址。
DSTIP|目的IP地址|参数可选性: 任选参数类型: 字符串|该参数用于表示目的IP地址。
SRCPORT|源端口号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示源端口号。
DSTPORT|目的端口号|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示目的端口号。
OTHER|其他条件|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于表示其他的过滤参数。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果：成功、错误和超时。




[](None)命令举例 


`
启动Acl诊断。 

(No.1) : ACL DIAGNOSE ON:VLANFLAG="No",IPVERSION="IPV4",VPNID=0,PROTOCOL="Not Concern",SRCIP="123.123.123.123",DSTIP="124.124.124.124",SRCPORT=5000,DSTPORT=5000
-----------------CCSP_IAAS_ST/CommonS_IPS_0----------------
操作结果 
---------
操作成功 
---------
记录数：1

执行成功开始时间:2023-01-30 09:21:33 耗时: 0.662秒


` 


##### 显示Acl诊断结果(ACL DIAGNOSE STAT) 
##### 显示Acl诊断结果(ACL DIAGNOSE STAT) 


[](None)功能说明 

该命令用于关闭Acl诊断功能，并显示诊断结果。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
InstNo|实例号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示实例号。
DiagResult|诊断结果|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示诊断结果。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于操作结果。




[](None)命令举例 


`
显示Acl诊断结果

ACL DIAGNOSE STAT
-----------------CCSP_IAAS_ST/CommonS_IPS_0----------------
实例号 诊断结果                                                     
--------------------------------------------------------------------
                                                                    
IPS1   AclItem:N,RawRcvPkt:N, EioSndPtk:N, EioRcvPkt:N,RawSndPkt:N  
                                                                    
IPS2   AclItem:N,RawRcvPkt:N, EioSndPtk:N, EioRcvPkt:N,RawSndPkt:N  
                                                                    
                                                                    
                                                                    
                                                                    
--------------------------------------------------------------------
记录数：2
操作结果 
---------
操作成功 
---------
记录数：1

执行成功开始时间:2023-01-29 16:18:23 耗时: 0.265秒


` 


### NAT动态命令 
### NAT动态命令 


[](None)背景知识 


NAT（Network Address Translation，网络地址转换）功能把内部网络的私有地址转化成互联网的公有地址过程中，会在系统中保存转换信息（包含条目信息和状态信息），通过NAT动态命令可以查看转换信息的内容。 




[](None)功能说明 


该节点下包含NAT信息表中保存的条目信息和状态信息。 


 
条目信息：保存NAT信息表中的源IP地址、目的IP地址、源端口、目的端口及映射出来的源IP地址、目的IP地址、源端口、目的端口等信息。 

 
状态信息：保存NAT信息表中的表容量、哈希数目、增加数目、老化次数、查找次数、更新次数等信息。 

 




[](None)子主题： 






#### 显示SNAT哈希状态(SHOW SNAT STAT) 
#### 显示SNAT哈希状态(SHOW SNAT STAT) 


[](None)功能说明 

该命令用于查询SNAT（Source Network Address Translation，源网络地址转换）哈希表操作次数的变化。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表所属的实例。
HASHNUM|哈希数目|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希数目。
HASHCLASHNUM|冲突数目|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希冲突数目。
HASHFULLNUM|满次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希满次数。
HASHIDELNUM|老化次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希老化次数。
HASHADDNUM|增加次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希增加次数。
HASHADDEXISTNUM|增加已存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希增加已存在次数。
HASHADDSUCCNUM|增加成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希增加成功次数。
HASHDELNUM|删除次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希删除次数。
HASHDELNOEXISTNUM|删除不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希删除不存在次数。
HASHDELSUCCNUM|删除成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希删除成功次数。
HASHFINDNUM|查找次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希查找次数。
HASHFINDNOEXISTNUM|查找不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希查找不存在次数。
HASHFINDSUCCNUM|查找成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希查找成功次数。
HASHUPDATENUM|更新次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希更新次数。
HASHUPDATENOEXISTNUM|更新不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希更新不存在次数。
HASHUPDATESUCCNUM|更新成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示SNAT哈希表的哈希更新成功次数。




[](None)命令举例 


`
查询SNAT哈希表的信息。
SHOW SNAT STAT

(No.1) : SHOW SNAT STAT:
-----------------CommonS_IPS_0----------------
实例号 哈希数目 冲突数目 满次数 老化次数 增加次数 增加已存在次数 增加成功次数 删除次数 删除不存在次数 删除成功次数 查找次数 查找不存在次数 查找成功次数 更新次数 更新不存在次数 更新成功次数 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1      1        0        0      37       38       0              38           37       0              37           111      17             94           50       2              48           
2      1        0        0      44       45       0              45           44       0              44           202      28             174          45       0              45           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:05:48 耗时: 5.323秒

` 


#### 显示SNAT条目(SHOW SNAT TUPLE) 
#### 显示SNAT条目(SHOW SNAT TUPLE) 


[](None)功能说明 

该命令用于查询SNAT（Source Network Address Translation，源网络地址转换）哈希表的条目。可根据源地址、目的地址、源端口号、目的端口号、虚拟路由转发标识来查看特定的哈希表内容。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SRCIP|源地址|参数可选性: 任选参数类型: 字符串|该参数用于根据源IP地址查询SNAT哈希表条目。
DSTIP|目的地址|参数可选性: 任选参数类型: 字符串|该参数用于根据目的IP地址查询SNAT哈希表条目。
SRCPORT|源端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据源端口查询SNAT哈希表条目。
DSTPORT|目的端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据目的端口查询SNAT哈希表条目。
VRFID|虚拟路由转发标识|参数可选性: 任选参数类型: 数字参数范围: 0-128|该参数用于根据虚拟路由转发标识查询SNAT哈希表条目。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该参数用于显示SNAT哈希表条目所在的实例。
SRCIP|源地址|参数可选性: 必选参数类型: 字符串|该参数用于显示SNAT哈希表条目的源IP地址。
DSTIP|目的地址|参数可选性: 必选参数类型: 字符串|该参数用于显示SNAT哈希表条目的目的IP地址。
SRCPORT|源端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示SNAT哈希表条目的源端口。
DSTPORT|目的端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示SNAT哈希表条目的目的端口。
VRFID|虚拟路由转发标识|参数可选性: 必选参数类型: 数字参数范围: 0-128|该参数用于显示SNAT哈希表条目的VRFID（Virtual Routing Forwarding Identification，虚拟路由转发标识）。
VIP|虚地址|参数可选性: 必选参数类型: 字符串|该参数用于显示SNAT哈希表条目的虚拟IP地址。
NATPORT|虚端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示SNAT哈希表条目的NAT端口。




[](None)命令举例 


`
查询SNAT哈希表的条目。
SHOW SNAT TUPLE

(No.2) : SHOW SNAT TUPLE:
-----------------CommonS_IPS_0----------------
实例号 源地址       目的地址  源端口 目的端口 虚拟路由转发标识 虚拟地址  NAT端口 
------------------------------------------------------------------------------
1      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 65535  
2      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 65535  
------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:06:07 耗时: 4.405秒

` 


#### 显示RESNAT哈希状态(SHOW RESNAT STAT) 
#### 显示RESNAT哈希状态(SHOW RESNAT STAT) 


[](None)功能说明 

该命令用于查询RESNAT（Reverse Source Network Address Translation，逆向源网络地址转换）哈希表操作次数的变化。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表所属的实例。
HASHNUM|哈希数目|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希数目。
HASHCLASHNUM|冲突数目|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希冲突数目。
HASHFULLNUM|满次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希满次数。
HASHIDELNUM|老化次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希老化次数。
HASHADDNUM|增加次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希增加次数。
HASHADDEXISTNUM|增加已存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希增加已存在次数。
HASHADDSUCCNUM|增加成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希增加成功次数。
HASHDELNUM|删除次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希删除次数。
HASHDELNOEXISTNUM|删除不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希删除不存在次数。
HASHDELSUCCNUM|删除成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希删除成功次数。
HASHFINDNUM|查找次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希查找次数。
HASHFINDNOEXISTNUM|查找不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希查找不存在次数。
HASHFINDSUCCNUM|查找成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希查找成功次数。
HASHUPDATENUM|更新次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希更新次数。
HASHUPDATENOEXISTNUM|更新不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希更新不存在次数。
HASHUPDATESUCCNUM|更新成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示RESNAT哈希表的哈希更新成功次数。




[](None)命令举例 


`
查询RESNAT哈希表的信息。
SHOW RESNAT STAT

(No.1) : SHOW RESNAT STAT:
-----------------CommonS_IPS_0----------------
实例号 哈希数目 冲突数目 满次数 老化次数 增加次数 增加已存在次数 增加成功次数 删除次数 删除不存在次数 删除成功次数 查找次数 查找不存在次数 查找成功次数 更新次数 更新不存在次数 更新成功次数 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1      1        0        0      37       38       0              38           37       0              37           111      17             94           50       2              48           
2      1        0        0      44       45       0              45           44       0              44           202      28             174          45       0              45           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:05:48 耗时: 5.323秒

` 


#### 显示RESNAT条目(SHOW RESNAT TUPLE) 
#### 显示RESNAT条目(SHOW RESNAT TUPLE) 


[](None)功能说明 

该命令用于查询RESNAT（Reverse Source Network Address Translation，逆向源网络地址转换）哈希表的条目。可根据源地址、目的地址、源端口号、目的端口号、虚拟路由转发标识来查看特定的哈希表内容。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SRCIP|源地址|参数可选性: 任选参数类型: 字符串|该参数用于根据源IP地址查询RESNAT哈希表条目。
DSTIP|目的地址|参数可选性: 任选参数类型: 字符串|该参数用于根据目的IP地址查询RESNAT哈希表条目。
SRCPORT|源端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据源端口查询RESNAT哈希表条目。
DSTPORT|目的端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据目的端口查询RESNAT哈希表条目。
VRFID|虚拟路由转发标识|参数可选性: 任选参数类型: 数字参数范围: 0-128|该参数用于根据虚拟路由转发标识查询RESNAT哈希表条目。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该参数用于显示RESNAT哈希表条目所在的实例。
SRCIP|源地址|参数可选性: 必选参数类型: 字符串|该参数用于显示RESNAT哈希表条目的源IP地址。
DSTIP|目的地址|参数可选性: 必选参数类型: 字符串|该参数用于显示RESNAT哈希表条目的目的IP地址。
SRCPORT|源端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示RESNAT哈希表条目的源端口。
DSTPORT|目的端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示RESNAT哈希表条目的目的端口。
VRFID|虚拟路由转发标识|参数可选性: 必选参数类型: 数字参数范围: 0-128|该参数用于显示RESNAT哈希表条目的VRF。
VIP|虚地址|参数可选性: 必选参数类型: 字符串|该参数用于显示RESNAT哈希表条目的虚拟IP地址。
NATPORT|虚端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示RESNAT哈希表条目的NAT（Network Address Translation，网络地址转换）端口。




[](None)命令举例 


`
查询RESNAT哈希表的条目。
SHOW RESNAT TUPLE

(No.2) : SHOW RESNAT TUPLE:
-----------------CommonS_IPS_0----------------
实例号 源地址       目的地址  源端口 目的端口 虚拟路由转发标识 虚拟地址  NAT端口 
------------------------------------------------------------------------------
1      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 65535  
2      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 65535  
------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:06:07 耗时: 4.405秒

` 


#### 显示FULLNAT哈希状态(SHOW FULLNAT STAT) 
#### 显示FULLNAT哈希状态(SHOW FULLNAT STAT) 


[](None)功能说明 

该命令用于查询FULLNAT（FULL Network Address Translation，全网络地址转换）哈希表操作次数的变化。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表所属的实例。
HASHNUM|哈希数目|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希数目。
HASHCLASHNUM|冲突数目|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希冲突数目。
HASHFULLNUM|满次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希满次数。
HASHIDELNUM|老化次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希老化次数。
HASHADDNUM|增加次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希增加次数。
HASHADDEXISTNUM|增加已存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希增加已存在次数。
HASHADDSUCCNUM|增加成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希增加成功次数。
HASHDELNUM|删除次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希删除次数。
HASHDELNOEXISTNUM|删除不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希删除不存在次数。
HASHDELSUCCNUM|删除成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希删除成功次数。
HASHFINDNUM|查找次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希查找次数。
HASHFINDNOEXISTNUM|查找不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希查找不存在次数。
HASHFINDSUCCNUM|查找成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希查找成功次数。
HASHUPDATENUM|更新次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希更新次数。
HASHUPDATENOEXISTNUM|更新不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希更新不存在次数。
HASHUPDATESUCCNUM|更新成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示FULLNAT哈希表的哈希更新成功次数。




[](None)命令举例 


`
查询FULLNAT哈希表的信息。
SHOW FULLNAT STAT

(No.1) : SHOW FULLNAT STAT:
-----------------CommonS_IPS_0----------------
实例号 哈希数目 冲突数目 满次数 老化次数 增加次数 增加已存在次数 增加成功次数 删除次数 删除不存在次数 删除成功次数 查找次数 查找不存在次数 查找成功次数 更新次数 更新不存在次数 更新成功次数 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1      1        0        0      37       38       0              38           37       0              37           111      17             94           50       2              48           
2      1        0        0      44       45       0              45           44       0              44           202      28             174          45       0              45           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:05:48 耗时: 5.323秒

` 


#### 显示FULLNAT条目(SHOW FULLNAT TUPLE) 
#### 显示FULLNAT条目(SHOW FULLNAT TUPLE) 


[](None)功能说明 

该命令用于查询FULLNAT（FULL Network Address Translation，全网络地址转换）哈希表的条目。可根据源地址、目的地址、源端口号、目的端口号、虚拟路由转发标识来查看特定的哈希表内容。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SRCIP|源地址|参数可选性: 任选参数类型: 字符串|该参数用于根据源IP地址查询FULLNAT哈希表条目。
DSTIP|目的地址|参数可选性: 任选参数类型: 字符串|该参数用于根据目的IP地址查询FULLNAT哈希表条目。
SRCPORT|源端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据源端口查询FULLNAT哈希表条目。
DSTPORT|目的端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据目的端口查询FULLNAT哈希表条目。
VRFID|虚拟路由转发标识|参数可选性: 任选参数类型: 数字参数范围: 0-128|该参数用于根据虚拟路由转发标识查询FULLNAT哈希表条目。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该参数用于显示FULLNAT哈希表条目所在的实例。
SRCIP|源地址|参数可选性: 必选参数类型: 字符串|该参数用于显示FULLNAT哈希表条目的源IP地址。
DSTIP|目的地址|参数可选性: 必选参数类型: 字符串|该参数用于显示FULLNAT哈希表条目的目的IP地址。
SRCPORT|源端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示FULLNAT哈希表条目的源端口。
DSTPORT|目的端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示FULLNAT哈希表条目的目的端口。
VRFID|虚拟路由转发标识|参数可选性: 必选参数类型: 数字参数范围: 0-128|该参数用于显示FULLNAT哈希表条目的VRF。
VIP|虚地址|参数可选性: 必选参数类型: 字符串|该参数用于显示FULLNAT哈希表条目的虚拟IP地址。
GSUIP|业务地址|参数可选性: 必选参数类型: 字符串|该参数用于显示FULLNAT哈希表条目的GSU节点IP地址。
NATPORT|虚端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示FULLNAT哈希表条目的NAT（Network Address Translation，网络地址转换）端口。




[](None)命令举例 


`
查询FULLNAT哈希表的条目。
SHOW FULLNAT TUPLE

(No.2) : SHOW FULLNAT TUPLE:
-----------------CommonS_IPS_0----------------
实例号 源地址       目的地址  源端口 目的端口 虚拟路由转发标识 虚拟地址 业务地址     NAT端口 
--------------------------------------------------------------------------------------------
1      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 192.168.14.99 65535  
2      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 192.168.14.99 65535  
--------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:06:07 耗时: 4.405秒

` 


#### 显示REFULLNAT哈希状态(SHOW REFULLNAT STAT) 
#### 显示REFULLNAT哈希状态(SHOW REFULLNAT STAT) 


[](None)功能说明 

该命令用于查询REFULLNAT（Reverse FULL Network Address Translation，逆向全网络地址转换）哈希表操作次数的变化。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表所属的实例。
HASHNUM|哈希数目|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希数目。
HASHCLASHNUM|冲突数目|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希冲突数目。
HASHFULLNUM|满次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希满次数。
HASHIDELNUM|老化次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希老化次数。
HASHADDNUM|增加次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希增加次数。
HASHADDEXISTNUM|增加已存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希增加已存在次数。
HASHADDSUCCNUM|增加成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希增加成功次数。
HASHDELNUM|删除次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希删除次数。
HASHDELNOEXISTNUM|删除不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希删除不存在次数。
HASHDELSUCCNUM|删除成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希删除成功次数。
HASHFINDNUM|查找次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希查找次数。
HASHFINDNOEXISTNUM|查找不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希查找不存在次数。
HASHFINDSUCCNUM|查找成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希查找成功次数。
HASHUPDATENUM|更新次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希更新次数。
HASHUPDATENOEXISTNUM|更新不存在次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希更新不存在次数。
HASHUPDATESUCCNUM|更新成功次数|参数可选性: 必选参数类型: 数字|该命令用于显示REFULLNAT哈希表的哈希更新成功次数。




[](None)命令举例 


`
查询REFULLNAT哈希表的信息。
SHOW REFULLNAT STAT

(No.1) : SHOW REFULLNAT STAT:
-----------------CommonS_IPS_0----------------
实例号 哈希数目 冲突数目 满次数 老化次数 增加次数 增加已存在次数 增加成功次数 删除次数 删除不存在次数 删除成功次数 查找次数 查找不存在次数 查找成功次数 更新次数 更新不存在次数 更新成功次数 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1      1        0        0      37       38       0              38           37       0              37           111      17             94           50       2              48           
2      1        0        0      44       45       0              45           44       0              44           202      28             174          45       0              45           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:05:48 耗时: 5.323秒

` 


#### 显示REFULLNAT条目(SHOW REFULLNAT TUPLE) 
#### 显示REFULLNAT条目(SHOW REFULLNAT TUPLE) 


[](None)功能说明 

该命令用于查询REFULLNAT（Reverse FULL Network Address Translation，逆向全网络地址转换）哈希表的条目。可根据源地址、目的地址、源端口号、目的端口号、虚拟路由转发标识来查看特定的哈希表内容。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SRCIP|源地址|参数可选性: 任选参数类型: 字符串|该参数用于根据源IP地址查询REFULLNAT哈希表条目。
DSTIP|目的地址|参数可选性: 任选参数类型: 字符串|该参数用于根据目的IP地址查询REFULLNAT哈希表条目。
SRCPORT|源端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据源端口查询REFULLNAT哈希表条目。
DSTPORT|目的端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535|该参数用于根据目的端口查询REFULLNAT哈希表条目。
VRFID|虚拟路由转发标识|参数可选性: 任选参数类型: 数字参数范围: 0-128|该参数用于根据虚拟路由转发标识查询REFULLNAT哈希表条目。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
INSTNO|实例号|参数可选性: 必选参数类型: 数字|该参数用于显示REFULLNAT哈希表条目所在的实例。
SRCIP|源地址|参数可选性: 必选参数类型: 字符串|该参数用于显示REFULLNAT哈希表条目的源IP地址。
DSTIP|目的地址|参数可选性: 必选参数类型: 字符串|该参数用于显示REFULLNAT哈希表条目的目的IP地址。
SRCPORT|源端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示REFULLNAT哈希表条目的源端口。
DSTPORT|目的端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示REFULLNAT哈希表条目的目的端口。
VRFID|虚拟路由转发标识|参数可选性: 必选参数类型: 数字参数范围: 0-128|该参数用于显示REFULLNAT哈希表条目的VRF。
GSUIP|业务地址|参数可选性: 必选参数类型: 字符串|该参数用于显示REFULLNAT哈希表条目的虚拟IP地址。
VIP|虚地址|参数可选性: 必选参数类型: 字符串|该参数用于显示REFULLNAT哈希表条目的GSU节点IP地址。
NATPORT|虚端口|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示REFULLNAT哈希表条目的NAT（Network Address Translation，网络地址转换）端口。




[](None)命令举例 


`
查询REFULLNAT哈希表的条目。
SHOW REFULLNAT TUPLE

(No.2) : SHOW REFULLNAT TUPLE:
-----------------CommonS_IPS_0----------------
实例号 源地址       目的地址  源端口 目的端口 虚拟路由转发标识 虚拟地址 业务地址     NAT端口 
--------------------------------------------------------------------------------------------
1      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 192.168.14.99 65535  
2      172.61.57.88 8.8.50.86 8971   8080     0                8.8.8.8 192.168.14.99 65535  
--------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-07-07 11:06:07 耗时: 4.405秒

` 


### TRACE动态命令 
### TRACE动态命令 


[](None)背景知识 


跟踪所有经过IPS的报文，并把符合过滤条件的报文在EM上显示。 




[](None)功能说明 


该节点下面包括跟踪开启，跟踪显示动态命令。 




[](None)子主题： 






#### 跟踪开启(TRACE ON) 
#### 跟踪开启(TRACE ON) 


[](None)功能说明 

该命令用于开启IPS Trace功能。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
FILTERSTRING|过滤字符串|参数可选性: 必选参数类型: 字符串参数范围: 0-127|该参数用于指定Trace的过滤规则。




[](None)命令举例 


`
TRACE ON

(No.1) : TRACE ON:FILTERSTRING="src host 1.1.1.1 or dst host 2.2.2.2 or src port 1000 and port 2000 "
-----------------ips_ist_111/CommonS_IPS_0----------------

执行成功开始时间:2022-12-14 11:17:22 耗时: 0.264秒

` 


#### 跟踪显示(TRACE SHOW) 
#### 跟踪显示(TRACE SHOW) 


[](None)功能说明 

该命令用于显示IPS Trace信息。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VRUNAME|虚拟运行单元名称|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于显示虚拟运行单元名称。
SRCMAC|源MAC|参数可选性: 必选参数类型: 字符串参数范围: 0-17|该参数用于显示报文源MAC地址。
DSTMAC|目的MAC|参数可选性: 必选参数类型: 字符串参数范围: 0-17|该参数用于显示报文目的MAC地址。
SRCIP|源地址|参数可选性: 必选参数类型: 字符串|该参数用于显示报文源IP地址信息。
DSTIP|目的地址|参数可选性: 必选参数类型: 字符串|该参数用于显示报文目的IP地址信息。
SRCPORT|源端口号|参数可选性: 必选参数类型: 数字|该参数用于显示报文源端口信息。
DSTPORT|目的端口号|参数可选性: 必选参数类型: 数字|该参数用于显示报文目的端口信息。
PROTOCOL|协议|参数可选性: 必选参数类型: 数字|该参数用于显示报文协议信息。
VRFID|虚拟路由标识|参数可选性: 必选参数类型: 数字|该参数用于显示报文虚拟路由标识信息。
PACKETDIRECTION|报文方向|参数可选性: 必选参数类型: 字符串参数范围: 0-79|该参数用于显示报文方向信息。
CONSUMETIME|消耗时间|参数可选性: 必选参数类型: 数字|该参数用于显示报文消耗时间信息。
RESULT|结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示结果信息，结果不包含EIO_SEND（外口发送）或者RAW_SEND（内口发送）则为错误。




[](None)命令举例 


`
TRACE SHOW

(No.1) : TRACE SHOW
-----------------ips_ist_111/CommonS_IPS_0----------------
虚拟运行单元名称 源地址       目的地址     源端口号 目的端口号 协议 虚拟路由标识 报文方向                              消耗时间 结果 
-------------------------------------------------------------------------------------------------------------------------------------
vru-ips-0        172.111.0.11 192.0.10.1   45011    45011      17   0            CSS_TRACE_EIO_RCV > CSS_RAW_PKT_SEND4 0        成功 
vru-ips-1        192.0.10.1   172.111.0.11 45011    45011      17   0            CSS_TRACE_RAW_RCV > CSS_EIO_PKT_SEND4 0        成功 
-------------------------------------------------------------------------------------------------------------------------------------
记录数：2

执行成功开始时间:2022-12-14 11:24:50 耗时: 0.28秒

` 


### 查询媒体面线程CPU利用率统计(SHOW IPS MEDIA CPU STATISTIC) 
### 查询媒体面线程CPU利用率统计(SHOW IPS MEDIA CPU STATISTIC) 


[](None)功能说明 

该命令用于查询IPS媒体面线程CPU利用率。系统正常运行过程中，需要查看IPS媒体面线程的负荷情况时，使用该命令。命令执行成功后，可以查看指定IPS的媒体面线程CPU使用率。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SC_LOGICNO|SC逻辑号|参数可选性: 任选参数类型: 数字参数范围: 1-32|该参数用于标识SC的编号，每个SC上有多个媒体面线程。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ID|CPU对象ID|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示CPU对象的ID，SC上的每个媒体面线程对应一个CPU对象。
DESC|CPU对象描述|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示CPU对象的描述。
USAGE|CPU利用率（%）|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数用于表示CPU利用率。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果，包括：操作成功SC无效响应超时




[](None)命令举例 


`
查询IPS媒体面线程CPU利用率。
SHOW IPS MEDIA CPU STATISTIC:SC_LOGICNO=1

(No.1) : SHOW IPS MEDIA CPU STATISTIC:SC_LOGICNO=1
-----------------CommonS_IPS_0----------------
CPU对象ID  CPU对象信息   CPU利用率（%）
0          IPS1-Thread0  0
1          IPS1-Thread1  1
2          IPS1-Thread2  1

操作结果

操作成功(Succ)

记录数：1
执行成功耗时: 1.229 秒

` 


### 查询IPS虚机CPU利用率(SHOW IPS VM CPU USAGE) 
### 查询IPS虚机CPU利用率(SHOW IPS VM CPU USAGE) 


[](None)功能说明 

该命令用于查询IPS虚机CPU的利用率信息。 


[](None)注意事项 

无。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC逻辑号|参数可选性: 任选参数类型: 数字参数范围: 1-128默认值: 0|该参数用于查询指定SC的CPU利用率。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
VruName|虚拟运行单元名称|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于显示虚拟运行单元名称。
VmName|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于显示虚机名称。
CpuNO|CPU核号|参数可选性: 必选参数类型: 数字|该参数用于显示CPU核号。
CpuUsage|CPU利用率|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于显示CPU利用率。
CpuAttribute|CPU属性|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于显示CPU属性。




[](None)命令举例 


`
SHOW IPS VM CPU USAGE

(No.1) : SHOW IPS VM CPU USAGE:
-----------------smf98/CommonS_IPS_0----------------
虚拟运行单元名称 虚机名称 CPU核号 CPU利用率 CPU属性       
----------------------------------------------------------
vru-ips-01       IPU001   0       7%        shared_cpu    
vru-ips-01       IPU001   1       0%        exclusive_cpu 
vru-ips-01       IPU001   2       1%        exclusive_cpu 
vru-ips-01       IPU001   3       1%        exclusive_cpu 
vru-ips-02       IPU002   0       7%        shared_cpu    
vru-ips-02       IPU002   1       0%        exclusive_cpu 
vru-ips-02       IPU002   2       0%        exclusive_cpu 
vru-ips-02       IPU002   3       1%        exclusive_cpu 
----------------------------------------------------------
记录数：8
执行成功开始时间:2022-03-17 09:43:35 耗时: 1.406秒

` 


### 查询规则表容量(SHOW IPSACLCOUNT) 
### 查询规则表容量(SHOW IPSACLCOUNT) 


[](None)功能说明 

该命令用于查询ACL规则条目数。系统正常运行中，需要查询ACL规则的总数时，使用该命令，命令执行成功后，系统返回ACL条目数。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
IpsName|归属IPSSC|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示归属IPS服务的组件名称。
TableName|表名|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示表名称。
AclCount|规则条目数|参数可选性: 必选参数类型: 数字参数范围: 0-32000|该参数用于表示表中当前的ACL规则条目数。
TableCapacity|表容量|参数可选性: 必选参数类型: 数字参数范围: 0-32000默认值: 32000|该参数用于表示表中可以存储的ACL规则条目数。




[](None)命令举例 


`
查询ACL规则条目数。

(No.1) : SHOW IPSACLCOUNT
-----------------CommonS_IPS_0----------------

归属IPSSC  表名                       规则条目数   表容量
IPSSC_01   R_ACL_IPV4TBL_23_00_0002   0           2048


记录数：1
执行成功耗时: 0.342 秒

` 


### 查询IPPD链路状态(SHOW IPPD STATUS) 
### 查询IPPD链路状态(SHOW IPPD STATUS) 


[](None)功能说明 

该命令用于显示IPPD路径状态，包括路径名称，该链路关联的vru名称、对应100s的QoS指标。


[](None)注意事项 

查询IPPD路径的状态，不带参数查询所有配置链路的状态，也可以指定查询某一条IPPD路径状态。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PathName|IPPD路径名称|参数可选性: 任选参数类型: 字符串参数范围: 1-63|该参数用于标识IPPD路径名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PathName|IPPD路径名称|参数可选性: 必选参数类型: 字符串参数范围: 1-63|该参数用于标识IPPD路径名称，一条IPPD路径的唯一标识。
Location|VRU位置信息|参数可选性: 必选参数类型: 字符串参数范围: 1-63|该参数用于表示对应的IPPD路径关联的VRU名称。即该IPPD路径运行的VRU位置。
SendPktSum|100s内发送报文个数|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内发送IPPD报文个数。
LossPktSum|丢弃报文个数|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内丢弃IPPD报文个数。
DisorderPktSum|乱序报文个数|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内乱序IPPD报文个数。
AvgLossRate|平均丢包率(0.01%)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内IPPD报文的平均丢包率。
MaxLatency|最大时延(ms)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内最大时延。
MinLatency|最小时延(ms)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内最小时延。
AvgLatency|平均时延(ms)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内平均时延。
MaxJitter|最大抖动(ms)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内最大时延抖动。
MinJitter|最小抖动(ms)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内最小时延抖动。
AvgJitter|平均抖动(ms)|参数可选性: 必选参数类型: 数字|该参数用于表示当前IPPD路径在100s内平均时延抖动。




[](None)命令举例 


`
如下显示查询所有IPPD路径状态：
SHOW IPPD STATUS:
(No.1) : SHOW IPPD STATUS:
-----------------CommonS_IPS_0----------------
IPPD路径名称 VRU位置信息         100s内发送报文个数 丢弃报文个数 乱序报文个数 平均丢包率(0.01%) 最大时延(ms) 最小时延(ms) 平均时延(ms) 最大抖动(ms) 最小抖动(ms) 平均抖动(ms)
ippd_test2  vru_ips_forward_00  2500               4            2           16               12          0            0           12           0            0
ippd_test1  vru_ips_forward_01  2500               1            0           4                12          0            0           12           0            0
记录数：2

执行成功耗时: 0.077 秒
` 


### 启动DPDK抓包(START DPDK TCPDUMP) 
### 启动DPDK抓包(START DPDK TCPDUMP) 


[](None)功能说明 

该命令用于对被DPDK接管的网卡进行抓包。实现此功能后，可实现类似于linux系统中tcpdump的抓包，抓包的过滤规则完全兼容tcpdump。


[](None)注意事项 

执行该命令会导致收发线程或者媒体面线程cpu利用率升高。如果在超大话务下执行该命令可能会导致正常业务丢包。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC编号|参数可选性: 任选参数类型: 数字|该参数用于表示SC逻辑编号。
INTERFACEID|接口ID|参数可选性: 必选参数类型: 数字参数范围: 1-31|该参数用于表示接口ID，该接口为对应ROSNG上看到的接口ID。例如：对接口xgei-2/0/1/1，此处填1；对接口xgei-2/0/1/3，此处填3；对于子接口需要填写对应父接口的ID；对内部媒体面接口，填24，如果内部媒体面是左右域，则24代表左域，25代表右域。
FLOWFILTER|过滤规则|参数可选性: 必选参数类型: 字符串参数范围: 1-255|该参数用于表示报文过滤规则。
PKTNUM|抓包最大个数|参数可选性: 任选参数类型: 数字参数范围: 1-60000|该参数用于表示抓包最大个数。如果有该接口对应多个端口（例如bond），或者该接口开了多队列，当其中某个端口的某个队列接收或者发送方向抓包个数达到抓包最大个数的时候，则主动停止抓包。如果不填写，则缺省值为1024。
TIMEOUT|抓包最长时间|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于表示抓包最长时间。单位为秒。当时间到达后，如果该接口抓包还未停止，则会主动停止抓包。如果不填写，则缺省值为60秒。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ScLogicNo|SC编号|参数可选性: 必选参数类型: 数字|该参数用于表示SC逻辑编号。
InterfaceId|接口ID|参数可选性: 必选参数类型: 数字参数范围: 1-31|该参数用于表示接口ID，该接口为对应ROSNG上看到的接口ID。
PktLocation|抓包保存位置|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于表示抓包在SFTP服务器上的存放位置。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
该命令用于启动DPDK抓包，对应的SC编号为1，接口ID为1，过滤规则为host 10.174.0.1 || udp[12:4] == 0x00000001 || udp[12:4] == 0x000078f1，抓包最大个数为1000，抓包最长时间为200。
START DPDK TCPDUMP:SCLOGICNO=1,INTERFACEID=1,FLOWFILTER="host 10.174.0.1 || udp[12:4] == 0x00000001 || udp[12:4] == 0x000078f1",PKTNUM=1000,TIMEOUT=200

(No.1) : START DPDK TCPDUMP:SCLOGICNO=1,INTERFACEID=1,FLOWFILTER="host 10.174.0.1 || udp[12:4] == 0x00000001 || udp[12:4] == 0x000078f1",PKTNUM=1000,TIMEOUT=200
-----------------CommonS_IPS_0----------------
SCLogicNo InterfaceID PktLocation
1               1
/Nfdata/DomainS-SMF-15/dpdk_tcpdump/vru-ips-0/1
记录数：1

Result
Success

执行成功耗时: 0.192 秒

` 


### 停止DPDK抓包(STOP DPDK TCPDUMP) 
### 停止DPDK抓包(STOP DPDK TCPDUMP) 


[](None)功能说明 

该命令用于停止被DPDK接管的网卡抓包。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC编号|参数可选性: 任选参数类型: 数字|该参数用于表示SC逻辑编号。
INTERFACEID|接口ID|参数可选性: 任选参数类型: 数字参数范围: 1-31|该参数用于表示接口ID，该接口为对应ROSNG上看到的接口ID。例如：对接口xgei-2/0/1/1，此处填1；对接口xgei-2/0/1/3，此处填3；对于子接口需要填写对应父接口的ID；对内部媒体面接口，填24，如果内部媒体面是左右域，则24代表左域，25代表右域。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
停止被DPDK接管的网卡抓包，对应的SC编号为1，接口ID为1。
STOP DPDK TCPDUMP:SCLOGICNO=1,INTERFACEID=1

(No.1) : STOP DPDK TCPDUMP:SCLOGICNO=1,INTERFACEID=1
-----------------CommonS_IPS_0----------------
Result
Success

执行成功耗时: 0.228 秒

` 


### 显示DPDK抓包状态(SHOW DPDK TCPDUMP STATUS) 
### 显示DPDK抓包状态(SHOW DPDK TCPDUMP STATUS) 


[](None)功能说明 

该命令用于显示被DPDK接管的网卡的当前抓包状态。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC编号|参数可选性: 任选参数类型: 数字|该参数用于表示SC逻辑编号。
INTERFACEID|接口ID|参数可选性: 任选参数类型: 数字参数范围: 1-31|该参数用于表示接口ID，该接口为对应ROSNG上看到的接口ID。例如：对接口xgei-2/0/1/1，此处填1；对接口xgei-2/0/1/3，此处填3；对于子接口需要填写对应父接口的ID；对内部媒体面接口，填24，如果内部媒体面是左右域，则24代表左域，25代表右域。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
ScLogicNo|SC编号|参数可选性: 必选参数类型: 数字|该参数用于表示SC逻辑编号。
InterfaceId|接口ID|参数可选性: 必选参数类型: 数字参数范围: 1-31|该参数用于表示接口ID，该接口为对应ROSNG上看到的接口ID。
DumpStatus|抓包状态|参数可选性: 必选参数类型: 数字|该参数用于表示当前抓包状态。0表示不在抓包；1表示正在抓包；2表示正在停止抓包。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
显示被DPDK接管的网卡的当前抓包状态，其中SC编号为1，接口ID为1。
SHOW DPDK TCPDUMP STATUS:SCLOGICNO=1,INTERFACEID=1

(No.1) : SHOW DPDK TCPDUMP STATUS:SCLOGICNO=1,INTERFACEID=1
---------------------------------
SC编号     接口ID     抓包状态 
-------------------------------------
1          1          0           
-------------------------------------
记录数：1

Result
Success

执行成功耗时: 0.192 秒

` 


### 查询Eio DPDK绑定端口信息(SHOW EIODPDKBONDPORTINFO) 
### 查询Eio DPDK绑定端口信息(SHOW EIODPDKBONDPORTINFO) 


[](None)功能说明 

该命令用于查询Eio DPDK绑定的端口信息。系统正常运行中，需要查询DPDK绑定的端口信息时，执行该命令，返回所有服务组件上绑定的端口信息。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
Location|归属VRU|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数表示端口归属的服务单元。
BondGroupSerialNo|绑定组序号|参数可选性: 必选参数类型: 数字参数范围: 0-32|该参数表示绑定组的序号，每个绑定组一个唯一序号，顺序编号。
BondGroupPortNum|绑定组端口数|参数可选性: 必选参数类型: 数字参数范围: 0-32|该参数表示绑定组包含端口个数。
MappedToRosngInterface|ROSNG端口|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数表示ROSNG端口名称。
BackupMode|备份模式|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数表示端口备份模式，包括单一、主备和负荷分担。
MemberPortNumber|成员端口号|参数可选性: 必选参数类型: 数字参数范围: 0-32|该参数表示某一端口在绑定组里的物理编号。
PortStatus|端口状态|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数表示端口状态，up或者down。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于描述操作结果。




[](None)命令举例 


`
查询Eio DPDK绑定的端口信息。
SHOW EIODPDKBONDPORTINFO:

(No.1) : SHOW EIODPDKBONDPORTINFO
-----------------CommonS_IPS_0----------------
归属VRU                绑定组序号 绑定组端口数        ROSNG端口      备份模式    成员端口号   端口状态
vru_ips_forward_1      1         1                  xgei-1/0/2/1   single      1           up  
vru_ips_forward_1      2         1                  xgei-1/0/2/2   single      2           up 
vru_ips_forward_0      1         1                  xgei-1/0/1/1   single      1           up
vru_ips_forward_0      2         1                  xgei-1/0/1/2   single      2           up

操作结果
操作成功

记录数：1

执行成功耗时：0.933秒

` 


### 查询IPS SC信息(SHOW SC) 
### 查询IPS SC信息(SHOW SC) 


[](None)功能说明 

该命令用于查询归属IPS服务的组件信息，包括组件名称、逻辑编号和操作结果。


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
IpsName|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示归属IPS服务的组件名称。
LogicNo|逻辑号|参数可选性: 必选参数类型: 数字参数范围: 0-256|该参数用于表示SC逻辑编号。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数表示操作结果（成功、失败或者超时）。




[](None)命令举例 


`
查询IPS SC信息。

(No.1) : SHOW SC
-----------------CommonS_IPS_0----------------

SC类型  逻辑号
sc-ips  1

Result
Success(Succ)
记录数：1
执行成功耗时: 0.342 秒

` 


### 查询接口信息(SHOW INTERFACE BRIEF) 
### 查询接口信息(SHOW INTERFACE BRIEF) 


[](None)功能说明 

该命令用于查询SC子接口的简要信息。 


[](None)注意事项 

无。


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
NfsName|NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 0-63|该参数用于标识归属的NFS（Network Function Service，网络功能服务）。
Sctype|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-63|该参数用于标识对应的SC（Service Component，服务组件）类型。
ScLogicNo|SC逻辑号|参数可选性: 必选参数类型: 数字|该参数用于标识SC逻辑号。
InterfaceName|接口名称|参数可选性: 必选参数类型: 字符串参数范围: 0-63|该参数表示接口名称。
Status|状态|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于表示接口状态。
VrfId|vrf编号|参数可选性: 必选参数类型: 数字参数范围: 0-4095|该参数用于表示接口对应的VRF ID。
VlanId|vlan编号|参数可选性: 必选参数类型: 字符串参数范围: 0-15|该参数用于表示接口对应的VLAN ID。




[](None)命令举例 


`
查询SC子接口的简要信息。
SHOW INTERFACE BRIEF

(No.1) : SHOW INTERFACE BRIEF:
-----------------CommonS_IPS_0----------------
NFS名称     SC类型 SC逻辑号 接口名称     状态 vrf编号 vlan编号 
---------------------------------------------------------------
CommonS_IPS sc-ips 1        xgei-1/0/2/1 down 0       N/A      
CommonS_IPS sc-ips 1        xgei-1/0/2/2 down 0       N/A      
CommonS_IPS sc-ips 2        xgei-1/0/1/1 down 0       N/A          
---------------------------------------------------------------
记录数：3
执行成功 开始时间:2021-04-28 10:50:15 耗时: 0.573 秒

` 


### 查询BFD会话断链前UP报文的收发情况(SHOW BFD INFO BEFORE DOWN) 
### 查询BFD会话断链前UP报文的收发情况(SHOW BFD INFO BEFORE DOWN) 


[](None)功能说明 

该命令用于查询IPS媒体面BFD会话断链前3s的报文收发的时间戳、LD（BFD链路本端ID）和RD（BFD链路对端ID）信息。当配置的BFD发送闪断时，通过用”BFD本端链路ID“作为参数，可以查找相应会话在断链前3s的该条BFD报文的收发包的详细时间戳。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LD|BFD本端链路ID|参数可选性: 必选参数类型: 数字|该参数用于标识BFD本端链路ID。可以在"ZXRONG"配置界面，通过“show bfd nei ip brief”命令查询。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BfdPktInfo|BFD报文内容|参数可选性: 必选参数类型: 字符串参数范围: 0-28671|该参数用于表示采集到的BFD报文断链前的报文内容和收发时间信息。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
查询BFD会话断链前用户面报文的收发情况。
SHOW BFD INFO BEFORE DOWN:LD=2050

(No.2) : SHOW BFD INFO BEFORE DOWN:LD=2050
-----------------CommonS_IPS_0----------------
BfdPktInfo
Recv Pkt:
[Time : 000000], LD : 02050, RD : 00000
[Time : 000299], LD : 02050, RD : 00000
[Time : 000599], LD : 02050, RD : 00000
[Time : 000899], LD : 02050, RD : 00000
[Time : 001199], LD : 02050, RD : 00000
[Time : 001498], LD : 02050, RD : 00000
[Time : 001798], LD : 02050, RD : 00000
[Time : 002099], LD : 02050, RD : 00000
[Time : 002399], LD : 02050, RD : 00000
[Time : 002699], LD : 02050, RD : 00000
[Time : 002998], LD : 02050, RD : 00000
[Time : 003298], LD : 02050, RD : 00000
[Time : 003598], LD : 02050, RD : 00000
[Time : 003898], LD : 02050, RD : 00000
[Time : 004199], LD : 02050, RD : 00000
[Time : 004498], LD : 02050, RD : 00000
[Stop : 06898], LD : 02050, RD : 00000
Snd Pkt:
[Time : 00000], LD : 02050, RD : 00000
[Time : 00300], LD : 02050, RD : 00000
[Time : 00599], LD : 02050, RD : 00000
[Time : 00899], LD : 02050, RD : 00000
[Time : 01199], LD : 02050, RD : 00000
[Time : 01499], LD : 02050, RD : 00000
[Time : 01799], LD : 02050, RD : 00000
[Time : 02099], LD : 02050, RD : 00000
[Time : 02399], LD : 02050, RD : 00000
[Time : 02699], LD : 02050, RD : 00000
[Time : 02999], LD : 02050, RD : 00000
[Time : 03298], LD : 02050, RD : 00000
[Time : 03598], LD : 02050, RD : 00000
[Time : 03898], LD : 02050, RD : 00000
[Time : 04199], LD : 02050, RD : 00000
[Time : 04499], LD : 02050, RD : 00000
[Stop : 04499], LD : 02050, RD : 00000
Recv Pkt:
[Time : 000000], LD : 02050, RD : 00000
[Time : 000240], LD : 02050, RD : 00000
[Time : 000480], LD : 02050, RD : 00000
[Time : 000720], LD : 02050, RD : 00000
[Time : 000960], LD : 02050, RD : 00000
[Time : 001199], LD : 02050, RD : 00000
[Time : 001439], LD : 02050, RD : 00000
[Time : 001679], LD : 02050, RD : 00000
[Time : 001920], LD : 02050, RD : 00000
[Time : 002160], LD : 02050, RD : 00000
[Time : 002400], LD : 02050, RD : 00000
[Time : 002639], LD : 02050, RD : 00000
[Time : 002879], LD : 02050, RD : 00000
[Time : 003119], LD : 02050, RD : 00000
[Time : 003359], LD : 02050, RD : 00000
[Time : 003599], LD : 02050, RD : 00000
[Stop : 05999], LD : 02050, RD : 00000
Snd Pkt:
[Time : 00000], LD : 02050, RD : 00000
[Time : 00239], LD : 02050, RD : 00000
[Time : 00479], LD : 02050, RD : 00000
[Time : 00719], LD : 02050, RD : 00000
[Time : 00959], LD : 02050, RD : 00000
[Time : 01199], LD : 02050, RD : 00000
[Time : 01439], LD : 02050, RD : 00000
[Time : 01678], LD : 02050, RD : 00000
[Time : 01918], LD : 02050, RD : 00000
[Time : 02159], LD : 02050, RD : 00000
[Time : 02399], LD : 02050, RD : 00000
[Time : 02639], LD : 02050, RD : 00000
[Time : 02879], LD : 02050, RD : 00000
[Time : 03118], LD : 02050, RD : 00000
[Time : 03358], LD : 02050, RD : 00000
[Time : 03598], LD : 02050, RD : 00000
[Stop : 03599], LD : 02050, RD : 00000
Recv Pkt:
[Time : 000000], LD : 02050, RD : 00000
[Time : 000285], LD : 02050, RD : 00000
[Time : 000570], LD : 02050, RD : 00000
[Time : 000855], LD : 02050, RD : 00000
[Time : 001139], LD : 02050, RD : 00000
[Time : 001424], LD : 02050, RD : 00000
[Time : 001709], LD : 02050, RD : 00000
[Time : 001995], LD : 02050, RD : 00000
[Time : 002280], LD : 02050, RD : 00000
[Time : 002564], LD : 02050, RD : 00000
[Time : 002849], LD : 02050, RD : 00000
[Time : 003134], LD : 02050, RD : 00000
[Time : 003419], LD : 02050, RD : 00000
[Time : 003704], LD : 02050, RD : 00000
[Time : 003990], LD : 02050, RD : 00000
[Time : 004274], LD : 02050, RD : 00000
[Stop : 06674], LD : 02050, RD : 00000
Snd Pkt:
[Time : 00000], LD : 02050, RD : 00000
[Time : 00284], LD : 02050, RD : 00000
[Time : 00569], LD : 02050, RD : 00000
[Time : 00854], LD : 02050, RD : 00000
[Time : 01139], LD : 02050, RD : 00000
[Time : 01424], LD : 02050, RD : 00000
[Time : 01708], LD : 02050, RD : 00000
[Time : 01994], LD : 02050, RD : 00000
[Time : 02279], LD : 02050, RD : 00000
[Time : 02564], LD : 02050, RD : 00000
[Time : 02848], LD : 02050, RD : 00000
[Time : 03133], LD : 02050, RD : 00000
[Time : 03418], LD : 02050, RD : 00000
[Time : 03703], LD : 02050, RD : 00000
[Time : 03989], LD : 02050, RD : 00000
[Time : 04273], LD : 02050, RD : 00000
[Stop : 04394], LD : 02050, RD : 00000
Recv Pkt:
[Time : 000000], LD : 02050, RD : 00000
[Time : 000281], LD : 02050, RD : 00000
[Time : 000564], LD : 02050, RD : 00000
[Time : 000846], LD : 02050, RD : 00000
[Time : 001127], LD : 02050, RD : 00000
[Time : 001409], LD : 02050, RD : 00000
[Time : 001691], LD : 02050, RD : 00000
[Time : 001973], LD : 02050, RD : 00000
[Time : 002256], LD : 02050, RD : 00000
[Time : 002537], LD : 02050, RD : 00000
[Time : 002819], LD : 02050, RD : 00000
[Time : 003101], LD : 02050, RD : 00000
[Time : 003383], LD : 02050, RD : 00000
[Time : 003665], LD : 02050, RD : 00000
[Time : 003946], LD : 02050, RD : 00000
[Time : 004229], LD : 02050, RD : 00000
[Stop : 06629], LD : 02050, RD : 00000
Snd Pkt:
[Time : 00000], LD : 02050, RD : 00000
[Time : 00281], LD : 02050, RD : 00000
[Time : 00563], LD : 02050, RD : 00000
[Time : 00845], LD : 02050, RD : 00000
[Time : 01127], LD : 02050, RD : 00000
[Time : 01409], LD : 02050, RD : 00000
[Time : 01690], LD : 02050, RD : 00000
[Time : 01973], LD : 02050, RD : 00000
[Time : 02255], LD : 02050, RD : 00000
[Time : 02537], LD : 02050, RD : 00000
[Time : 02819], LD : 02050, RD : 00000
[Time : 03100], LD : 02050, RD : 00000
[Time : 03382], LD : 02050, RD : 00000
[Time : 03664], LD : 02050, RD : 00000
[Time : 03947], LD : 02050, RD : 00000
[Time : 04228], LD : 02050, RD : 00000
[Stop : 04373], LD : 02050, RD : 00000
Recv Pkt:
[Time : 000000], LD : 02050, RD : 00000
[Time : 000233], LD : 02050, RD : 00000
[Time : 000467], LD : 02050, RD : 00000
[Time : 000701], LD : 02050, RD : 00000
[Time : 000935], LD : 02050, RD : 00000
[Time : 001169], LD : 02050, RD : 00000
[Time : 001402], LD : 02050, RD : 00000
[Time : 001636], LD : 02050, RD : 00000
[Time : 001870], LD : 02050, RD : 00000
[Time : 002105], LD : 02050, RD : 00000
[Time : 002339], LD : 02050, RD : 00000
[Time : 002572], LD : 02050, RD : 00000
[Time : 002806], LD : 02050, RD : 00000
[Time : 003040], LD : 02050, RD : 00000
[Time : 003275], LD : 02050, RD : 00000
[Time : 003509], LD : 02050, RD : 00000
[Stop : 05909], LD : 02050, RD : 00000
Snd Pkt:
[Time : 00000], LD : 02050, RD : 00000
[Time : 00233], LD : 02050, RD : 00000
[Time : 00467], LD : 02050, RD : 00000
[Time : 00701], LD : 02050, RD : 00000
[Time : 00935], LD : 02050, RD : 00000
[Time : 01169], LD : 02050, RD : 00000
[Time : 01403], LD : 02050, RD : 00000
[Time : 01637], LD : 02050, RD : 00000
[Time : 01871], LD : 02050, RD : 00000
[Time : 02105], LD : 02050, RD : 00000
[Time : 02339], LD : 02050, RD : 00000
[Time : 02573], LD : 02050, RD : 00000
[Time : 02806], LD : 02050, RD : 00000
[Time : 03040], LD : 02050, RD : 00000
[Time : 03275], LD : 02050, RD : 00000
[Time : 03509], LD : 02050, RD : 00000
[Stop : 03570], LD : 02050, RD : 00000
Recv Pkt:
[Time : 000000], LD : 02050, RD : 00000
[Time : 000231], LD : 02050, RD : 00000
[Time : 000462], LD : 02050, RD : 00000
[Time : 000692], LD : 02050, RD : 00000
[Time : 000923], LD : 02050, RD : 00000
[Time : 001154], LD : 02050, RD : 00000
[Time : 001385], LD : 02050, RD : 00000
[Time : 001616], LD : 02050, RD : 00000
[Time : 001847], LD : 02050, RD : 00000
[Time : 002078], LD : 02050, RD : 00000
[Time : 002309], LD : 02050, RD : 00000
[Time : 002540], LD : 02050, RD : 00000
[Time : 002771], LD : 02050, RD : 00000
[Time : 003002], LD : 02050, RD : 00000
[Time : 003233], LD : 02050, RD : 00000
[Time : 003463], LD : 02050, RD : 00000
[Stop : 05863], LD : 02050, RD : 00000
Snd Pkt:
[Time : 00000], LD : 02050, RD : 00000
[Time : 00231], LD : 02050, RD : 00000
[Time : 00462], LD : 02050, RD : 00000
[Time : 00693], LD : 02050, RD : 00000
[Time : 00924], LD : 02050, RD : 00000
[Time : 01154], LD : 02050, RD : 00000
[Time : 01385], LD : 02050, RD : 00000
[Time : 01616], LD : 02050, RD : 00000
[Time : 01847], LD : 02050, RD : 00000
[Time : 02079], LD : 02050, RD : 00000
[Time : 02310], LD : 02050, RD : 00000
[Time : 02540], LD : 02050, RD : 00000
[Time : 02771], LD : 02050, RD : 00000
[Time : 03002], LD : 02050, RD : 00000
[Time : 03233], LD : 02050, RD : 00000
[Time : 03464], LD : 02050, RD : 00000
[Stop : 03554], LD : 02050, RD : 00000

执行成功

执行时间: 6.183秒

` 


### 查询指定LD的BFD会话的完整交互信息(SHOW BFD TRACK INFO) 
### 查询指定LD的BFD会话的完整交互信息(SHOW BFD TRACK INFO) 


[](None)功能说明 

该命令用于查询IPS媒体面BFD会话的报文收包和发包的报文信息和时间戳。当系统中配置的BFD发生UP状态震荡（反复建链、断链）时，该命令按照“BFD本端链路ID”为参数，查找相应会话在采集开始后的3s的报文收发包信息。


[](None)注意事项 

无。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
LD|BFD本端链路ID|参数可选性: 必选参数类型: 数字|该参数用于标识BFD本端链路ID。可以在"ZXRONG"配置界面，通过“show bfd nei ip brief”命令查询。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
BfdPktInfo|BFD报文摘要|参数可选性: 必选参数类型: 字符串参数范围: 0-28671|该参数用于表示查询到的BFD报文的摘要信息，包含了触发采集后的3s内的BFD报文的收发内容和时间。
Result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示操作结果。




[](None)命令举例 


`
查询BFD本端链路ID为2050的BFD会话的完整交互信息。
SHOW BFD TRACK INFO:LD=2050

(No.1) : SHOW BFD TRACK INFO:LD=2050
-----------------CommonS_IPS_0----------------
Bfd Packet Info
[Time :     66] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :     66] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :    300] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :    300] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :    533] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :    534] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :    767] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :    768] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   1002] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   1002] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   1236] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   1236] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   1470] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   1470] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   1704] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   1704] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   1937] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   1937] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   2171] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   2171] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   2405] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   2406] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   2639] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   2640] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 
[Time :   2874] [Send:] [LD :  2050 , RD :     0  BfdType : Up  P : 0, F : 0] 
[Time :   2874] [Recv:] [LD :     0 , RD :  2050  BfdType : Up  P : 0, F : 0] 

Result
Success

执行成功耗时: 6.125 秒

` 


# 操作维护 
# 操作维护 


[](None)背景知识 


平台提供的调试命令集合。 




[](None)功能说明 


该节点下面包括系统调测配置。 




[](None)子主题： 






## 系统调测 
## 系统调测 


[](None)背景知识 


对系统进行调试和信息收集，以判断运行状况。 




[](None)功能说明 


对系统进行调试和信息收集，包括调测信息收集等功能。 




[](None)子主题： 






### 调测信息收集 
### 调测信息收集 


[](None)背景知识 


在系统调试过程中，需要采集系统的运行信息，可提供给运维人员进行分析，达到监测系统是否正常的目的。 




[](None)功能说明 


 本配置可以显示系统当前支持的所有模块，可针对模块名进行信息采集，也可以采集系统所有模块的信息，同时具备清除模块信息的功能。  




[](None)子主题： 






#### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 
#### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 


[](None)功能说明 

该命令用于查询其归属的NFS内含有调测信息的模块列表。当运维人员需要收集或者清除指定模块的调试信息时，可以执行该命令查询含有调测信息的模块名称。 


[](None)注意事项 

无。 


[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名|参数可选性: 必选参数类型: 字符串参数范围: 1-47|该参数用于表示支持统计信息的模块名称。
MODULE_INST|模块实例数|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示支持统计信息的模块实例数。




[](None)命令举例 


`
查询某个NFS中含有调试统计信息的模块列表。
 SHOW DEBUG MODULELIST

------CommonS_TMSP_0--------
模块名         模块实例数
ROSNG_ADAPT    1
ROSNG_ARCH     1
记录数：2

执行成功耗时: 0.259 秒

` 


#### 收集模块内部统计信息(COLLECT DEBUG INFO) 
#### 收集模块内部统计信息(COLLECT DEBUG INFO) 


[](None)功能说明 

该命令用于收集其归属NFS内模块的调测信息。当需要查看指定模块的调测信息用于判断系统的运行情况时，需要使用该命令。运维人员通过该命令触发内部信息收集，随后系统将调测信息打包存放到指定的路径上。在收集完成后，运维人员可以从命令执行结果中的SFTP URL获取调测信息。 


[](None)注意事项 

该命令适用于业务性能数据一键采集场景，只能由中兴通讯技术支持人员执行。


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名称|参数可选性: 任选参数类型: 字符串参数范围: 1-47|该参数用于表示收集调测信息的模块名称。各参数选项的含义是：默认为空：表示收集NFS内所有支持该功能的模块的调测信息。非空：表示收集该模块的调测信息，可由SHOW DEBUG MODULELIST命令获取可收集调测信息的模块名称。
CLEAR|立即清理|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于设置调测信息采集完成后，是否立即清理采集的调测信息。各参数选项的含义是：YES：清理。在自动循环采集场景，为确保每次采集信息更准确，可以选择该选项。NO：不清理。在普通单次采集场景，可以选择该选项。
BATCH_SIZE|批次大小|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 10|该参数用于设置同时进行调测信息采集的客户端个数。例如注册了50个一键采集的客户端，设置批次大小为10，则该50个客户端会被分成5批进行采集。本参数默认为10。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
PROCESS|完成百分比|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于表示命令执行完成百分比。
PROCESSINFO|进度信息|参数可选性: 任选参数类型: 字符串参数范围: 0-47|该参数用于表示命令执行进度信息。
MODULE_NUMBER|模块实例数量|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于表示采集的模块实例总数量。
SUCCESS_NUMBER|成功数量|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于表示采集成功的模块数量。
FAILED_NUMBER|失败数量|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于表示采集失败的模块数量，该参数不影响命令执行完成比和命令执行进度信息。
URL|收集文件路径|参数可选性: 任选参数类型: 字符串参数范围: 0-1024|该参数用于表示保存采集文件的路径，运维人员可以从该路径获取调测信息文件。




[](None)命令举例 


`
收集名称为ROSNG_ADAPT的模块的调测信息。 COLLECT DEBUG INFO:MODULE_NAME="ROSNG_ADAPT"
` 


#### 清理模块内部统计信息(CLEAR DEBUG INFO) 
#### 清理模块内部统计信息(CLEAR DEBUG INFO) 


[](None)功能说明 

该命令用于清理其归属NFS内模块的调测信息。当需要获取新的调测信息前，先执行该命令。 


[](None)注意事项 

获取新的调测信息前可以先执行该命令，该命令返回的“失败数量”为非0则需要联系中兴通讯技术人员支持；为0则可获取新的调测信息。 


[](None)输入参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名称|参数可选性: 任选参数类型: 字符串参数范围: 1-47|该参数用于表示需要清除调测信息的模块名称。该参数选项的含义是：默认为空：表示清除NFS内所有的调测信息。非空：表示清除指定模块的调测信息，可由SHOW DEBUG MODULELIST命令获取模块名称。




[](None)输出参数说明 


[](None)标识|名称|类型|说明
---|---|---|---
MODULE_NUMBER|模块实例数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理的模块实例总数量。
SUCCESS_NUMBER|成功数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理成功的模块实例数量。
FAILED_NUMBER|失败数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理失败的模块实例数量。




[](None)命令举例 


`
清理名称为ROSNG_ADAPT的模块的调测信息。

CLEAR DEBUG INFO:MODULE_NAME="ROSNG_ADAPT"
` 


