# 系统复位 
# 系统复位 
背景知识 
当系统运行异常或出现系统故障时，为了使系统恢复正常运行状态，需要对系统进行整局重启（复位），即对VNF（Virtualized Network Function，虚拟化网络功能）实例进行重启。 
功能说明 
该组命令包括[RESET SYSTEM]命令，用于重启整个系统。
子主题： 
## 重启整个系统(RESET SYSTEM) 
## 重启整个系统(RESET SYSTEM) 
功能说明 
小心：该命令会重启整个系统，会导致一段时间内系统无法正常运行。因此执行该操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于重启（复位）整个系统，即对VNF实例（整局）进行重启操作。 
当系统运行异常或出现系统故障时，为了使系统恢复正常运行状态，可以使用此命令。 
操作完成后，系统的全部虚机会进行重启。该过程耗时较长，请耐心等待系统重启。可通过[SHOW VM]命令查看虚机重启是否成功。
注意事项 
对于IAAS环境，部分虚机可能会在OMU虚机重启后通过MANO进行重启。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功，系统即将重启！系统即将重启，部分虚机将通过MANO重启！正在执行相同的命令，请稍后再试！超时！其他！获取虚机失败！重启虚机失败！MANO重启节点失败！
命令举例 
`
重启整个系统。
RESET SYSTEM
` 
# 高可用管理 
# 高可用管理 
背景知识 
全局相关的数据配置，包括心跳配置、资源阈值等配置。 
功能说明 
该节点下的命令用于配置系统心跳信息及资源的使用率告警阈值。 
子主题： 
## 主备选举配置 
## 主备选举配置 
背景知识 
系统对于主备配置的节点使用选举来确定节点的主备状态。  
功能说明 
本命令用于设置主备选举相关参数。 
子主题： 
### 修改主备选举相关配置(SET ELECTION) 
### 修改主备选举相关配置(SET ELECTION) 
功能说明 
该命令用于修改主备选举相关参数。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
mgt_elect_timeout|MGT容器主备心跳超时时长|参数可选性: 任选参数类型: 数字参数范围: 150-65535默认值: 5000|该参数用于设置MGT容器主备心跳超时时长，单位毫秒。
mgt_elect_timer_len|MGT容器主备心跳定时器时长|参数可选性: 任选参数类型: 数字参数范围: 50-1000默认值: 200|该参数用于设置MGT容器主备心跳定时器时长，单位毫秒。
mgt_elect_fliter|MGT容器主备处理的过滤时长|参数可选性: 任选参数类型: 数字参数范围: 0-10000默认值: 1000|该参数用于设置MGT容器主备处理的过滤时长，单位毫秒。
elect_timeout|主备心跳超时时长|参数可选性: 任选参数类型: 数字参数范围: 150-65535默认值: 6000|该参数用于设置主备心跳超时时长，单位毫秒。
elect_timer_len|主备心跳定时器时长|参数可选性: 任选参数类型: 数字参数范围: 50-1000默认值: 200|该参数用于设置主备心跳定时器时长，单位毫秒。
elect_fliter|主备处理的过滤时长|参数可选性: 任选参数类型: 数字参数范围: 0-10000默认值: 1000|该参数用于设置主备处理的过滤时长，单位毫秒。
命令举例 
`
修改主备选举参数。
SET ELECTION:MGT_ELECT_TIMEOUT=5000,MGT_ELECT_TIMER_LEN=200,MGT_ELECT_FLITER=1000,ELECT_TIMEOUT=6000,ELECT_TIMER_LEN=200,ELECT_FLITER=1000
` 
### 显示主备选举相关配置(SHOW ELECTION) 
### 显示主备选举相关配置(SHOW ELECTION) 
功能说明 
该命令用于查询主备选举相关参数。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
mgt_elect_timeout|MGT容器主备心跳超时时长|参数可选性: 任选参数类型: 数字参数范围: 150-65535默认值: 5000|该参数用于显示MGT容器主备心跳超时时长，单位毫秒。
mgt_elect_timer_len|MGT容器主备心跳定时器时长|参数可选性: 任选参数类型: 数字参数范围: 50-1000默认值: 200|该参数用于显示MGT容器主备心跳定时器时长，单位毫秒。
mgt_elect_fliter|MGT容器主备处理的过滤时长|参数可选性: 任选参数类型: 数字参数范围: 0-10000默认值: 1000|该参数用于显示MGT容器主备处理的过滤时长，单位毫秒。
elect_timeout|主备心跳超时时长|参数可选性: 任选参数类型: 数字参数范围: 150-65535默认值: 6000|该参数用于显示主备心跳超时时长，单位毫秒。
elect_timer_len|主备心跳定时器时长|参数可选性: 任选参数类型: 数字参数范围: 50-1000默认值: 200|该参数用于显示主备心跳定时器时长，单位毫秒。
elect_fliter|主备处理的过滤时长|参数可选性: 任选参数类型: 数字参数范围: 0-10000默认值: 1000|该参数用于显示主备处理的过滤时长，单位毫秒。
命令举例 
`
显示主备选举的相关参数。
SHOW ELECTION
(No.1) : SHOW ELECTION:
MGT容器主备心跳超时时长(ms) MGT容器主备心跳定时器时长(ms) MGT容器主备处理的过滤时长(ms) 主备心跳超时时长(ms) 主备心跳定时器时长(ms) 主备处理的过滤时长(ms)
5000                           200                          1000                        6000                  200                1000
记录数：1
执行成功耗时: 0.122 秒
` 
## 仲裁配置 
## 仲裁配置 
背景知识 
系统使用仲裁来防止主备选举中因为链路问题导致双主。  
功能说明 
本命令用于设置主备选举仲裁相关参数。 
子主题： 
### 修改仲裁相关配置(SET QUORUM) 
### 修改仲裁相关配置(SET QUORUM) 
功能说明 
该命令用于修改主备选举的仲裁配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
quorum_switch|仲裁开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于启用或禁用主备选举仲裁。
命令举例 
`
禁用仲裁。
SET QUORUM:QUORUM_SWITCH="DISABLE"
` 
### 显示仲裁相关配置(SHOW QUORUM) 
### 显示仲裁相关配置(SHOW QUORUM) 
功能说明 
该命令用于查询主备选举的仲裁配置。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
quorum_switch|仲裁开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于显示主备选举仲裁启用状态。
命令举例 
`
显示仲裁信息。
SHOW QUORUM
(No.1) : SHOW QUORUM:
仲裁开关
启用
记录数：1
执行成功耗时: 0.122 秒
` 
## 控制面SC心跳配置 
## 控制面SC心跳配置 
背景知识 
SC的控制面心跳检测配置是TMSP的全局系统级配置。 
功能说明 
SC的心跳检测配置是TMSP的系统级配置针对不同网络环境下的一种微调手动，针对比较差的网络，可以调长心跳检测规避链路心跳不稳引起的问题。 
子主题： 
### 修改控制面SC心跳检测参数(MODIFY CPSCHEARTBEAT) 
### 修改控制面SC心跳检测参数(MODIFY CPSCHEARTBEAT) 
功能说明 
该命令用于修改控制面SC心跳全局配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
bswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于表示心跳检测使能开关。启用：开启控制面SC心跳检测功能。禁用：关闭控制面SC心跳检测功能。
dwinterval|检测周期|参数可选性: 任选参数类型: 数字参数范围: 100-1000默认值: 500|该参数用于表示心跳检测周期，是心跳报文发送的时间间隔。
dwthreshold|门限次数|参数可选性: 任选参数类型: 数字参数范围: 3-300默认值: 10|该参数用于表示心跳断的门限，心跳报文连续丢失达到门限次数表示心跳断，心跳断将导致该服务组件上的资源不可用。
命令举例 
`
修改控制面心跳检测功能开启，检测周期500ms，超时门限次数为10。
MODIFY CPSCHEARTBEAT:BSWITCH="enable",DWINTERVAL=500,DWTHRESHOLD=10
` 
### 查询控制面SC心跳检测参数(SHOW CPSCHEARTBEAT) 
### 查询控制面SC心跳检测参数(SHOW CPSCHEARTBEAT) 
功能说明 
该命令用于查询控制面SC心跳全局配置。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
bswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于表示心跳检测使能开关。启用：开启控制面SC心跳检测功能。禁用：关闭控制面SC心跳检测功能。
dwinterval|检测周期|参数可选性: 任选参数类型: 数字参数范围: 100-1000默认值: 500|该参数用于表示心跳检测周期，是心跳报文发送的时间间隔。
dwthreshold|门限次数|参数可选性: 任选参数类型: 数字参数范围: 3-300默认值: 10|该参数用于表示心跳断的门限，心跳报文连续丢失达到门限次数表示心跳断，心跳断将导致该服务组件上的资源不可用。
命令举例 
`
查询控制面心跳检测配置。
SHOW CPSCHEARTBEAT
(No.1) : SHOW CPSCHEARTBEAT:
使能开关 检测周期(ms) 门限次数
启用     500          10
记录数：1
执行成功耗时: 0.22 秒
` 
## 业务面SC心跳配置 
## 业务面SC心跳配置 
背景知识 
SC的业务面心跳检测配置是TMSP的全局系统级配置。 
功能说明 
SC的心跳检测配置是TMSP的系统级配置针对不同网络环境下的一种微调手动，针对比较差的网络，可以调长心跳检测规避链路心跳不稳引起的问题。 
子主题： 
### 修改业务面SC心跳检测参数(MODIFY SPSCHEARTBEAT) 
### 修改业务面SC心跳检测参数(MODIFY SPSCHEARTBEAT) 
功能说明 
该命令用于修改业务面SC心跳全局配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
bswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于表示心跳检测使能开关。启用：开启业务面SC心跳检测功能。禁用：关闭业务面SC心跳检测功能。
dwinterval|检测周期|参数可选性: 任选参数类型: 数字参数范围: 100-1000默认值: 1000|该参数用于表示心跳检测周期，是心跳报文发送的时间间隔。
dwthreshold|门限次数|参数可选性: 任选参数类型: 数字参数范围: 3-300默认值: 10|该参数用于表示心跳断的门限，心跳报文连续丢失达到门限次数表示心跳断，心跳断将导致该服务组件上的资源不可用。
命令举例 
`
修改业务面心跳检测功能开启，检测周期500ms，超时门限次数为10.
MODIFY SPSCHEARTBEAT:BSWITCH="enable",DWINTERVAL=500,DWTHRESHOLD=10
` 
### 查询业务面SC心跳检测参数(SHOW SPSCHEARTBEAT) 
### 查询业务面SC心跳检测参数(SHOW SPSCHEARTBEAT) 
功能说明 
该命令用于查询业务面SC心跳全局配置。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
bswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于表示心跳检测使能开关。启用：开启业务面SC心跳检测功能。禁用：关闭业务面SC心跳检测功能。
dwinterval|检测周期|参数可选性: 任选参数类型: 数字参数范围: 100-1000默认值: 1000|该参数用于表示心跳检测周期，是心跳报文发送的时间间隔。
dwthreshold|门限次数|参数可选性: 任选参数类型: 数字参数范围: 3-300默认值: 10|该参数用于表示心跳断的门限，心跳报文连续丢失达到门限次数表示心跳断，心跳断将导致该服务组件上的资源不可用。
命令举例 
`
查询业务面心跳检测配置。
SHOW SPSCHEARTBEAT
(No.1) : SHOW SPSCHEARTBEAT:
使能开关 检测周期(ms) 门限次数
启用     1000         10
记录数：1
执行成功耗时: 0.22 秒
` 
## Bond成员口检测开关配置 
## Bond成员口检测开关配置 
背景知识 
默认情况下SCCU会对主备容器的Bond成员端口up数量进行检测，并将Bond成员端口up数目较多的容器倒换为主用。针对某些测试场景需要，在主备容器的Bond成员端口都有部分down的时候，需要通过配置开关来决策是否需要将Bond成员端口up数目较多的容器倒换为主用。 
功能说明 
该配置用于决策主备容器的Bond成员端口部分down时，是否需要将端口up数目较多的容器倒换为主用。如果不配置此命令，默认情况下会对主备容器的Bond成员端口up数量进行检测，并将端口up数目较多的容器倒换为主用。某些特殊测试场景要求在主备容器的Bond成员端口有部分down的时候不主备倒换，针对这种场景，可以使用本命令增加配置检测。 
子主题： 
### 新增成员口检测开关(ADD SPCHECKPARA) 
### 新增成员口检测开关(ADD SPCHECKPARA) 
功能说明 
该命令用于增加容器Bond成员端口检测开关配置。 
默认情况下SCCU会对主备容器的Bond成员端口up数量进行检测，并将端口up数目较多的容器倒换为主用。某些特殊测试场景要求在主备容器的Bond成员端口有部分down的时候不主备倒换，针对这种场景，可以使用本命令增加配置检测。 
执行成功后，主备容器业务面端口都是部分down的时候，根据配置参数决策是否需要将端口up数目较多的容器倒换为主用。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于设置需要配置Bond端口检测功能的服务类型名称。可以用SHOW NFS查询已存在的服务类型名称。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于设置需要配置Bond成员端口检测功能的服务实例号。可以用SHOW NFS查询已存在的服务实例号。
sctype|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置需要配置Bond成员端口检测功能的SC类型。可以用SHOW SCTYPE查询已存在的SC类型。
bondslavecheck|Bond成员口检测开关配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置Bond成员口检测配置状态。有启用和禁用两种状态。启用：表示打开Bond成员口检测；在主备容器的Bond成员端口有部分down的时候，端口up数目较多的容器会倒换为主用。禁用：表示关闭Bond成员口检测；在主备容器的Bond成员端口有部分down的时候，主备容器保持当前状态不变。
命令举例 
`
给服务类型名称为CommonS_IPS，服务实例号为0，sc类型为sc-ips的NFS增加Bond成员口检测配置功能，默认为打开状态。
ADD SPCHECKPARA:SERVICETYPENAME="CommonS_IPS",SERVICEINSTANCE=0,SCTYPE="sc-ips"
` 
### 修改成员口检测开关(SET SPCHECKPARA) 
### 修改成员口检测开关(SET SPCHECKPARA) 
功能说明 
该命令用于修改容器Bond成员端口检测开关配置。 
当使用[ADD SPCHECKPARA]命令增加了配置之后，如果后续测试时，需要改变当主备容器的Bond成员端口部分down时是否需要主备倒换的决策，则使用本命令进行调整。
执行成功后，当主备容器有Bond成员端口部分down时，根据配置参数决策主备容器是否需要主备倒换。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于设置需要配置Bond端口检测功能的服务类型名称。可以用SHOW NFS查询已存在的服务类型名称。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于设置需要配置Bond成员端口检测功能的服务实例号。可以用SHOW NFS查询已存在的服务实例号。
sctype|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置需要配置Bond成员端口检测功能的SC类型。可以用SHOW SCTYPE查询已存在的SC类型。
bondslavecheck|Bond成员口检测开关配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置Bond成员口检测配置状态。有启用和禁用两种状态。启用：表示打开Bond成员口检测；在主备容器的Bond成员端口有部分down的时候，端口up数目较多的容器会倒换为主用。禁用：表示关闭Bond成员口检测；在主备容器的Bond成员端口有部分down的时候，主备容器保持当前状态不变。
命令举例 
`
设置服务类型名称为CommonS_IPS，实例号为0，sc类型为sc-ips的NFS的Bond成员口检测功能为打开状态。
SET SPCHECKPARA:SERVICETYPENAME="CommonS_IPS",SERVICEINSTANCE="0",SCTYPE="sc-ips",BONDSLAVECHECK="ENABLE"
` 
### 删除成员口检测开关(DELETE SPCHECKPARA) 
### 删除成员口检测开关(DELETE SPCHECKPARA) 
功能说明 
该命令用于删除容器Bond成员端口检测开关配置。 
一般情况下不需要执行。 本命令执行结果等同于使用[SET SPCHECKPARA]打开开关。
执行成功后，如果主备容器的Bond成员端口部分down,将端口up数目较多的容器倒换为主用。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于设置需要配置Bond端口检测功能的服务类型名称。可以用SHOW NFS查询已存在的服务类型名称。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于设置需要配置Bond成员端口检测功能的服务实例号。可以用SHOW NFS查询已存在的服务实例号。
sctype|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置需要配置Bond成员端口检测功能的SC类型。可以用SHOW SCTYPE查询已存在的SC类型。
命令举例 
`
删除服务类型名称为CommonS_IPS，实例号为0，sc类型为sc-ips的NFS的Bond成员口检测配置功能。
DELETE SPCHECKPARA:SERVICETYPENAME="CommonS_IPS",SERVICEINSTANCE=0,SCTYPE="sc-ips"
` 
### 查询成员口检测开关(SHOW SPCHECKPARA) 
### 查询成员口检测开关(SHOW SPCHECKPARA) 
功能说明 
该命令用于查询容器Bond成员端口检测开关配置。当需要查询当前的容器Bond成员端口检测开关配置时，执行该命令。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于设置需要配置Bond端口检测功能的服务类型名称。可以用SHOW NFS查询已存在的服务类型名称。
serviceinstance|服务实例号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于设置需要配置Bond端口检测功能的服务实例号。可以用SHOW NFS查询已存在的服务实例号。
sctype|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于设置需要配置Bond端口检测功能的SC类型。可以用SHOW SCTYPE查询已存在的SC类型。
bondslavecheck|Bond成员口检测开关配置|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置Bond成员口检测配置状态。有启用和禁用两种状态。启用：表示打开Bond成员口检测；在主备容器的Bond成员端口有部分down的时候，端口up数目较多的容器会倒换为主用。禁用：表示关闭Bond成员口检测；在主备容器的Bond成员端口有部分down的时候，主备容器保持当前状态不变。
命令举例 
`
查询服务类型名称为CommonS_IPS，实例号为0，sc类型为sc-ips的NFS的Bond成员口检测开关状态。
SHOW SPCHECKPARA:SERVICETYPENAME=CommonS_IPS,SERVICEINSTANCE=0，SCTYPE=sc-ips
(No.7) : SHOW SPCHECKPARA:SERVICETYPENAME=CommonS_IPS,SERVICEINSTANCE=0，SCTYPE=sc-ips
操作维护       服务类型名称 服务实例号 SC类型 Bond成员口检测开关配置 
---------------------------------------------------------------------
复制 修改      CommonS_IPS  0          sc-ips 启用                   
---------------------------------------------------------------------
记录数：1
` 
## 集群状态一致性校验增强开关配置 
## 集群状态一致性校验增强开关配置 
背景知识 
集群状态一致性校验增强开关配置是TMSP的全局系统级配置。 
功能说明 
集群状态一致性校验增强开关配置是TMSP的系统级配置针对性能测试场景，减少主备倒换时备转主进入工作态的时间。 
子主题： 
### 修改集群一致性校验增强开关(SET CLUSTERSWITCH) 
### 修改集群一致性校验增强开关(SET CLUSTERSWITCH) 
功能说明 
该命令用于修改集群一致性校验增强开关。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
consistcheck|一致性校验增强开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置一致性校验增强开关状态。有启用和禁用两种状态。启用：表示打开一致性校验增强开关。禁用：表示关闭一致性校验增强开关。
命令举例 
`
设置集群一致性校验增强开关状态为关闭。
SET CLUSTERSWITCH:CONSISTCHECK=DISABLE
` 
### 查询集群一致性校验增强开关(SHOW CLUSTERSWITCH) 
### 查询集群一致性校验增强开关(SHOW CLUSTERSWITCH) 
功能说明 
该命令用于查询集群一致性校验增强开关。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
consistcheck|一致性校验增强开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于查询一致性校验增强开关状态。有启用和禁用两种状态。
命令举例 
`
查询集群一致性校验增强开关状态。
SHOW CLUSTERSWITCH
(No.1) : SHOW CLUSTERSWITCH:
一致性校验增强开关
启用
记录数：1
执行成功 开始时间:2020-06-02 10:15:26 耗时: 0.135 秒
` 
## 自愈全局配置 
## 自愈全局配置 
背景知识 
系统在运行过程中，由于硬件、云平台、人为等原因，导致部分虚机/容器有可能处于异常状态(包括被删除、挂起、休眠、错误等）。针对这种状态异常的虚机/容器，系统提供了及时恢复的能力，称为系统自愈。 
当前系统中需要自愈的有虚机和容器，自愈的目的是使虚机的状态和VIM上的虚机状态一致，且虚机上运行的容器状态正常。因此系统处于异常状态时会触发容器重建、虚机重建、虚机重启、虚机删除等操作。 
功能说明 
系统周期检查虚机状态和容器状态，当系统检测到系统中的容器、虚机状态不一致时，会先触发状态不一致通知，之后触发自愈过程。 
自愈功能开关默认开启，管理员可自行关闭，在进行某些操作（如版本升级）前，需要关闭此开关，并在操作完成后重新打开。 
子主题： 
### 修改自愈全局配置(SET AUTOHEALINGGLB) 
### 修改自愈全局配置(SET AUTOHEALINGGLB) 
功能说明 
该命令用于修改自愈全局配置，包括禁用或者启用自愈功能总开关、设置系统的升级状态以及修改检查周期和自愈等待时间。 
自愈功能总开关默认开启，当需要关闭自愈功能或者在自愈功能关闭的情况下因为SC实例或者虚机状态出现异常而需要通过自愈功能来恢复时，可以使用该命令修改开关的状态。 
修改自愈全局配置前后，可以通过[SHOW AUTOHEALINGGLB]命令查询自愈全局配置。
注意事项 
 
系统升级过程中，需要关闭自愈功能。系统会自动修改该值，不建议维护人员修改。 
 
当自愈检查周期或者自愈等待时间不符合需求时，可以使用该命令进行修改（一般无需修改）。 
 
当自愈功能开启后，系统会定期对所有虚机和容器进行检测，当检测到虚机或者容器异常时，自愈会使虚机的状态和VIM上的虚机状态恢复一致，且虚机上运行的容器状态恢复正常。因此系统处于自愈过程中，会触发容器重建、虚机重建、虚机重启、虚机删除等操作。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
healingswitch|自愈功能总开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置全局自愈使能开关。各参数选项的含义是：禁用：关闭自愈功能。启用：开启自愈功能。自愈功能总开关默认启用。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOUPGRADING|该参数用于设置系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，自愈功能才是生效的。升级状态：当系统在进行升级相关操作时，该参数自动配置为升级状态，此时自愈功能配置不生效，即自愈功能关闭。
period|检查周期|参数可选性: 任选参数类型: 数字参数范围: 10-600默认值: 60|该参数用于设置自愈检查周期，定期检查虚机和容器的运行状态。检查周期默认设置为60秒。
waittime|自愈等待时间|参数可选性: 任选参数类型: 数字参数范围: 300-3600默认值: 540|该参数用于设置自愈等待时间，用于控制在虚机和容器处于特定异常状态持续时间达到等待时间后才触发自愈功能。默认自愈等待时间为540s，即异常状态持续540s后，进行自愈操作。
powerontime|等待SC上电时间|参数可选性: 任选参数类型: 数字参数范围: 60-600默认值: 300|该参数用于设置等待SC上电时间。容器部署成功后，等待SC上电的时间，如果在设定时间内，SC状态没有变为正常，那么认为本次自愈操作失败。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOUPGRADING|该参数用于设置系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，自愈功能才是生效的。升级状态：当系统在进行升级相关操作时，该参数自动配置为升级状态，此时自愈功能配置不生效，即自愈功能关闭。
命令举例 
`
设置全局自愈功能开启，升级状态为非升级状态，检查周期为60s，自愈等待时间为540s，等待SC上电时间300s。
SET AUTOHEALINGGLB:HEALINGSWITCH="ENABLE",UPGRADESTATUS="NOUPGRADING",PERIOD=60,WAITTIME=540, POWERONTIME=300
` 
### 查询自愈全局配置(SHOW AUTOHEALINGGLB) 
### 查询自愈全局配置(SHOW AUTOHEALINGGLB) 
功能说明 
该命令用于查询自愈全局配置，包括检查自愈功能总开关、升级状态以及检查周期和自愈等待时间信息。 
修改自愈全局配置前后，可以使用该命令检查修改是否生效。 
若查询发现当前配置不符合需求，可以使用[SET AUTOHEALINGGLB]修改配置。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
healingswitch|自愈功能总开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置全局自愈使能开关。各参数选项的含义是：禁用：关闭自愈功能。启用：开启自愈功能。自愈功能总开关默认启用。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOUPGRADING|该参数用于设置系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，自愈功能才是生效的。升级状态：当系统在进行升级相关操作时，该参数自动配置为升级状态，此时自愈功能配置不生效，即自愈功能关闭。
period|检查周期|参数可选性: 任选参数类型: 数字参数范围: 10-600默认值: 60|该参数用于设置自愈检查周期，定期检查虚机和容器的运行状态。检查周期默认设置为60秒。
waittime|自愈等待时间|参数可选性: 任选参数类型: 数字参数范围: 300-3600默认值: 540|该参数用于设置自愈等待时间，用于控制在虚机和容器处于特定异常状态持续时间达到等待时间后才触发自愈功能。默认自愈等待时间为540s，即异常状态持续540s后，进行自愈操作。
powerontime|等待SC上电时间|参数可选性: 任选参数类型: 数字参数范围: 60-600默认值: 300|该参数用于设置等待SC上电时间。容器部署成功后，等待SC上电的时间，如果在设定时间内，SC状态没有变为正常，那么认为本次自愈操作失败。
命令举例 
`
查询全局自愈配置。
SHOW AUTOHEALINGGLB
(No.4) : SHOW AUTOHEALINGGLB:
自愈功能总开关 升级状态   检查周期(s) 自愈等待时间(s) 等待SC上电时间(s)
---------------------------------------------------------------------
启用           非升级状态 60          540           300  
---------------------------------------------------------------------
记录数：1
执行成功 耗时: 0.243 秒
` 
## 自愈级别配置 
## 自愈级别配置 
背景知识 
自愈级别配置基本配置。为了控制自愈的影响，提供了容器重建、虚机重建、虚机重启等不同级别的自愈策略。每个级别的自愈策略可以设置是否启用、自愈操作超时时间以及超时次数，灵活控制不同级别的自愈过程。 
功能说明 
系统提供容器重建、虚机重建、虚机重启等不同级别的自愈策略。优先级从高到低：VRU（虚拟运行单元）重建最高，虚机重启次之，虚机重建最低。 
在自愈级别开关启用情况下，按优先级从高到低顺序执行。单个级别自愈策略执行成功则认为自愈成功。自愈超时按失败处理。每个级别重试一定次数后仍然失败则执行更低级别的自愈策略。 
子主题： 
### 修改自愈级别配置(SET AUTOHEALINGLV) 
### 修改自愈级别配置(SET AUTOHEALINGLV) 
功能说明 
该命令用于修改自愈级别配置，当自愈级别配置不符合需求时，可以使用该命令修改自愈级别相关配置。 
当有容器或者虚机处于异常状态，并且触发自愈功能时，系统会根据自愈级别配置进行自愈操作。 
举例：默认配置场景下，系统会对异常的容器进行重建自愈（VRU重建），如果在TIMEOUT设置的600s内操作成功，则结束自愈。如果超过600s没有收到操作结果，也结束自愈。如果自愈失败并且操作时间没有超过TIMEOUT，会根据RETRYCOUNT进行一次重试操作。无论重试结果是成功还是失败，本轮自愈结束。 
修改自愈级别配置前后，可以通过[SHOW AUTOHEALINGLV]命令查询自愈级别配置信息。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
level|自愈级别|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
healingswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|参数作用：该参数用于设置自愈级别策略使能开关。数据来源：本端规划。配置原则：禁用：关闭当前选择级别的自愈策略。启用：开启当前选择级别的自愈策略。VRU重建级别默认开启，其他级别默认关闭。
timeout|自愈超时|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 600|参数作用：该参数用于设置自愈流程处理超时时间。自愈超时则认为自愈失败。数据来源：本端规划。配置原则：默认值为600s。该默认值一般不建议用户修改。
retrycount|重试次数|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 1|参数作用：该参数用于设置自愈失败后的重试自愈的次数。自愈失败后重试的目的是增加自愈成功的机率。如果多次重试后仍然失败，则执行更低级别的自愈策略。数据来源：本端规划。配置原则：默认重试次数为1。该默认值一般不建议用户修改。
命令举例 
`
设置自愈级别为VRU重建，使能开关开启，自愈超时时间为600s，失败后重试次数为1次。
SET AUTOHEALINGLV:LEVEL="VRUREBUILD",HEALINGSWITCH="ENABLE",TIMEOUT=600,RETRYCOUNT=1
` 
### 查询自愈级别配置(SHOW AUTOHEALINGLV) 
### 查询自愈级别配置(SHOW AUTOHEALINGLV) 
功能说明 
该命令用于查询自愈级别配置，修改自愈级别配置前后，可以使用该命令检查修改是否生效。 
若查询发现当前配置不符合需求，可以使用[SET AUTOHEALINGLV]修改配置。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
level|自愈级别|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
level|自愈级别|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
healingswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|参数作用：该参数用于设置自愈级别策略使能开关。数据来源：本端规划。配置原则：禁用：关闭当前选择级别的自愈策略。启用：开启当前选择级别的自愈策略。VRU重建级别默认开启，其他级别默认关闭。
timeout|自愈超时|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 600|参数作用：该参数用于设置自愈流程处理超时时间。自愈超时则认为自愈失败。数据来源：本端规划。配置原则：默认值为600s。该默认值一般不建议用户修改。
retrycount|重试次数|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 1|参数作用：该参数用于设置自愈失败后的重试自愈的次数。自愈失败后重试的目的是增加自愈成功的机率。如果多次重试后仍然失败，则执行更低级别的自愈策略。数据来源：本端规划。配置原则：默认重试次数为1。该默认值一般不建议用户修改。
命令举例 
`
查询自愈级别配置。
SHOW AUTOHEALINGLV
(No.2) : SHOW AUTOHEALINGLV
自愈级别 使能开关 自愈超时(s) 重试次数 
---------------------------------------
VRU重建  启用     600         1        
虚机重启 禁用     600         1        
虚机重建 禁用     600         1     
---------------------------------------
记录数：3
执行成功 耗时: 0.523 秒
` 
## 一致性检查配置 
## 一致性检查配置 
背景知识 
系统从部署到正常运行，会涉及许多人工或自动更新SC实例数的操作。为了避免在这些过程中SC组内当前实例数出现数据异常，系统提供一致性检查功能。 
功能说明 
一致性检查功能开启后，系统会定期对数据库中全部服务下的SC的组内当前实例数进行检查，如果SC组内当前实例数与实际数量不符则对其进行修正。并且当SC组内当前实例数小于SC组内最小实例数时，系统会对其进行自动弹性扩容，从而保证系统下的SC能够以不低于最低资源需求的实例数运行，进而增强系统的健壮性。 
该组命令用于修改以及查询一致性检查配置。 
 
SET CONSISTENCECHECK命令用于修改一致性检查配置，包括打开或者关闭检查开关、设置系统的升级状态以及修改检查周期等。 
 
SHOW CONSISTENCECHECK命令用于查询一致性检查配置信息。 
 
如果没有特殊需求，一致性检查功能默认开启。 
子主题： 
### 修改一致性检查配置(SET CONSISTENCECHECK) 
### 修改一致性检查配置(SET CONSISTENCECHECK) 
功能说明 
该命令用于修改一致性检查配置，包括打开或者关闭检查开关、设置系统的升级状态以及修改检查周期等。 
一致性检验功能默认开启，当需要关闭一致性检查功能或者在一致性检查功能关闭的情况下因为SC当前实例数出现数据异常而需要开启一致性检查功能时，可以使用该命令修改检查开关的状态。 
系统在升级过程中，需要关闭一致性检查功能。运维人员可以在系统升级前后修改系统的升级状态。 
当一致性检查的周期不符合需求时，可以使用该命令修改检查周期（一般无需修改）。 
一致性检查功能开启后，系统会定期对全部服务下的SC的组内当前实例数进行检查，如果SC组内当前实例数与实际数量不符则对其进行修正。并且当SC组内当前实例数小于SC组内最小实例数时，系统会对其进行自动弹性扩容，从而保证系统下的SC能够以不低于最低资源需求的实例数运行，进而增强系统的健壮性。SC组内当前实例数和SC组内最小实例数可以通过[SHOW SCGROUP]命令进行查询。
修改一致性检查配置前后，可以通过[SHOW CONSISTENCECHECK]命令查询一致性检查配置信息。
注意事项 
如果没有特殊需求，建议开启一致性检查功能。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
checkswitch|检查开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于设置一致性检查的检查开关，即是否启用一致性检查功能。各参数选项的含义是：禁用：关闭一致性检查功能。启用：开启一致性检查功能。一致性检查的检查开关默认为启用。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOUPGRADING|该参数用于设置系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，一致性检查配置才是生效的。升级状态：当系统在进行升级相关操作时，该参数需配置为升级状态，此时一致性检查配置不生效，即关闭一致性检查功能。
period|检查周期（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 180|该参数用于设置一致性检查的检查周期，即系统会定期对全部服务下的SC的组内当前实例数进行检查。
命令举例 
`
修改一致性检查配置的检查开关为启用，升级状态为非升级状态，检查周期为180秒。
SET CONSISTENCECHECK:CHECKSWITCH="ENABLE",UPGRADESTATUS="NOUPGRADING",PERIOD=180
` 
### 查询一致性检查配置(SHOW CONSISTENCECHECK) 
### 查询一致性检查配置(SHOW CONSISTENCECHECK) 
功能说明 
该命令用于查询一致性检查配置，包括检查开关、升级状态以及检查周期等信息。 
当有SC组内当前实例数出现数据异常时，可以使用该命令查询一致性检查功能是否已开启。 
修改一致性检查配置前后，可以使用该命令检查修改是否生效。 
若查询发现当前配置不符合需求，可以使用[SET CONSISTENCECHECK]修改配置。
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
checkswitch|检查开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|该参数用于显示一致性检查的检查开关，即是否启用一致性检查功能。各参数选项的含义是：禁用：关闭一致性检查功能。启用：开启一致性检查功能。一致性检查的检查开关默认为启用。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOUPGRADING|该参数用于显示系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，一致性检查配置才是生效的。升级状态：当系统在进行升级相关操作时，该参数需配置为升级状态，此时一致性检查配置不生效，即关闭一致性检查功能。
period|检查周期（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 180|该参数用于显示一致性检查的检查周期，即系统会定期对全部服务下的SC的组内当前实例数进行检查。
命令举例 
`
查询一致性检查配置。
SHOW CONSISTENCECHECK
(No.1) : SHOW CONSISTENCECHECK:
检查开关 升级状态   检查周期（秒） 
---------------------------------
启用     非升级状态 180         
---------------------------------
记录数：1
` 
## 大面积断链配置 
## 大面积断链配置 
背景知识 
大面积断链配置是TMSP的全局系统级配置，设置是否对OMU和其他虚机之间的控制面通讯状态进行判断，以及相关参数。 
功能说明 
该配置能够在OMU和其他虚机之间的控制面通讯发生大面积断链时，降低断链对业务的影响。 
子主题： 
### 修改大面积断链配置(SET MASSIVELINKDOWN) 
### 修改大面积断链配置(SET MASSIVELINKDOWN) 
功能说明 
该命令用于修改大面积断链配置，包括判断OMU与其他虚机之间是否大面积断链的功能开关，开启开关后判断OMU与其他虚机之间大面积断链的比例及系统恢复的延时时长等相关参数。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
func_switch|功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置是否启用判断OMU与其他虚机之间的连接大面积断链的功能开关。0：禁用判断OMU与其他虚机之间的连接大面积断链的功能开关1：启用OMU与其他虚机之间的连接大面积断链的功能开关。
judge_percent|判定比例|参数可选性: 任选参数类型: 数字参数范围: 30-100默认值: 51|该参数用于设置大面积断链的判定比例。当OMU与其他虚机之间的连接断链的比例超过该参数配置的数值时，判定OMU与其他虚机大面积断链。该参数在功能开关配置为1时生效。
delay_timelen|恢复延时时长|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 300|该参数用于设置大面积断链的恢复延时时长，单位秒。当系统判断OMU与其他虚机之间的连接从大面积断链中恢复时，延时该参数配置的时长后，将系统恢复，防止系统震荡。
min_node_num|最少统计节点数|参数可选性: 任选参数类型: 数字参数范围: 5-1024默认值: 5|该参数用于设置大面积断链的最少统计节点数。表示当系统中的虚机数量小于该参数配置的数值时，本命令功能不生效。
命令举例 
`
修改大面积断链功能配置，将功能开关配置为1，即开启判断OMU与其他虚机之间是否大面积断链的开关。
SET MASSIVELINKDOWN:FUNC_SWITCH=ENALBE
` 
### 查询大面积断链配置(SHOW MASSIVELINKDOWN) 
### 查询大面积断链配置(SHOW MASSIVELINKDOWN) 
功能说明 
该命令用于查询大面积断链配置的相关参数。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
func_switch|功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置是否启用判断OMU与其他虚机之间的连接大面积断链的功能开关。0：禁用判断OMU与其他虚机之间的连接大面积断链的功能开关1：启用OMU与其他虚机之间的连接大面积断链的功能开关。
judge_percent|判定比例|参数可选性: 任选参数类型: 数字参数范围: 30-100默认值: 51|该参数用于设置大面积断链的判定比例。当OMU与其他虚机之间的连接断链的比例超过该参数配置的数值时，判定OMU与其他虚机大面积断链。该参数在功能开关配置为1时生效。
delay_timelen|恢复延时时长|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 300|该参数用于设置大面积断链的恢复延时时长，单位秒。当系统判断OMU与其他虚机之间的连接从大面积断链中恢复时，延时该参数配置的时长后，将系统恢复，防止系统震荡。
min_node_num|最少统计节点数|参数可选性: 任选参数类型: 数字参数范围: 5-1024默认值: 5|该参数用于设置大面积断链的最少统计节点数。表示当系统中的虚机数量小于该参数配置的数值时，本命令功能不生效。
命令举例 
`
显示大面积断链功能配置参数。
SHOW MASSIVELINKDOWN
(No.1) : SHOW MASSIVELINKDOWN:
-----------------微服务治理----------------
操作维护       功能开关 判定比例(%) 恢复延时时长(s) 最少统计节点数 
-------------------------------------------------------------------
修改           0        51          300             5              
-------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-11-27 08:45:43 耗时: 0.59 秒
` 
## 升级全局配置 
## 升级全局配置 
背景知识 
升级全局配置是TMSP的升级配置，目前镜像升级功能中，MANO只支持一次性将所有虚机镜像版本升级到指定镜像版本，如果中间出错导致升级失败，则可能导致瘫局。如果使用分批升级，则可能会将失败的概率降低。在镜像升级流程中，为了控制每批重建虚机的数量。 
功能说明 
在镜像升级流程中，设置每批升级虚机的数量。 
子主题： 
### 修改升级全局配置(SET UPGRADEGLB) 
### 修改升级全局配置(SET UPGRADEGLB) 
功能说明 
该命令用于修改升级全局配置，即镜像升级时，每批升级虚机的最大数量。 
修改后，可通过[SHOW UPGRADEGLB]命令进行查看设置是否生效。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
imageupgradevms|镜像升级每批虚机数|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 10|参数作用：该参数用于配置镜像升级时，每批升级虚机的最大数量。数据来源：本端规划。配置原则：默认10个，表示镜像升级时，每批发送给VNFM进行升级的虚机数目。
命令举例 
`
修改升级全局配置，镜像升级每批升级的虚机数为10。
SET UPGRADEGLB:IMAGEUPGRADEVMS=10
` 
### 查询升级全局配置(SHOW UPGRADEGLB) 
### 查询升级全局配置(SHOW UPGRADEGLB) 
功能说明 
该命令用于查询升级全局配置，即镜像升级时，每批升级虚机的最大数量。 
如果查询后发现不满足升级要求，可通过[SET UPGRADEGLB]命令进行修改。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
imageupgradevms|镜像升级每批虚机数|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 10|参数作用：该参数用于配置镜像升级时，每批升级虚机的最大数量。数据来源：本端规划。配置原则：默认10个，表示镜像升级时，每批发送给VNFM进行升级的虚机数目。
命令举例 
`
查询升级全局配置。
SHOW UPGRADEGLB
(No.4) : SHOW UPGRADEGLB:
镜像升级每批虚机数  
------------------
10        
------------------
记录数：1
执行成功开始时间:2021-02-27 16:37:42 耗时: 0.168 秒
` 
# 弹性和负荷管理 
# 弹性和负荷管理 
背景知识 
弹性是虚拟化的一个重要特性。当业务量大的时候弹出(Scale Out)服务组件SC，以满足业务需求，业务量小的时候弹缩服务组件SC，从而节约资源。 
功能说明 
如果虚机有资源可以满足弹出SC的条件时，直接在现有虚机上弹出SC。如果虚机上没有资源可以满足弹出SC的条件，则弹出一个虚机，在新弹出的虚机上弹出SC。 
如果弹缩(Scale In)服务组件后，虚机上没有剩余的其他服务组件SC了，则空闲的虚机也一并弹缩，从而释放虚机资源。 
子主题： 
## 全局弹性基础配置 
## 全局弹性基础配置 
背景知识 
SC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。 
业务通常用KPI（Key Performance Indicator，关键性能指标）来描述业务负荷的高低。KPI类型主要包括上下文占用率、数据库占用率、业务负载占用率、吞吐率以及租户容量比等。 
在没有自动弹性功能之前，运维人员必须定期监控系统运行状态以及业务各类型KPI的数值。当业务负荷过高，需要手动对SC进行弹性扩容操作，从而避免业务功能受到影响；当业务负荷过低，需要手动对SC进行弹性缩容操作，从而避免资源浪费。 
考虑到手动弹性操作需要耗费大量人力以及维护成本，因此系统提供自动弹性功能。 
自动弹性模式开启后，系统会在每个采样间隔时间内对业务上报的KPI进行采样，并在每个监控周期内对采样到的KPI计算平均值，然后根据对应类型的弹性策略判断是否生成弹性任务，进而实现对SC进行自动弹性扩容或缩容的功能。 
全局弹性基础配置，即对自动弹性功能的机制和流程相关的参数进行配置，并且该配置适用于系统内全部支持自动弹性功能的SC，可以通过[SHOW SCTYPE]命令查看SC的自动可弹缩性。对于没有配置SC弹性基础配置的SC，默认生效全局弹性基础配置。
功能说明 
该组命令提供了对全局弹性基础配置的修改（[SET SCALEGLBBASECFG]）与查询（[SHOW SCALEGLBBASECFG]）等功能。
全局弹性基础配置支持对弹性模式进行配置，包括手动模式和自动模式。 
将弹性模式配置为自动模式是系统开启自动弹性功能的前提。全局以及SC的弹性基础/策略配置仅针对自动弹性功能生效，不影响手动弹性功能。若系统不需要开启自动弹性功能，将弹性模式配置为手动模式即可。 
若系统正在进行升级相关操作，需要将升级状态修改为升级状态，此时自动弹性功能将关闭。 
全局弹性基础配置支持对弹性策略来源进行配置，包括本地和MANO。其中，本地弹性策略即通过EM（全局弹性策略配置与SC弹性策略配置）进行配置与查询。 
全局弹性基础配置还支持对采样间隔、监控周期、弹性缩容冷却时间、弹性超时以及时间策略外弹性开关等参数进行配置。如果没有特殊需求，使用默认配置即可。 
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
开启自动弹性功能前需通过[SHOW SCALEGLBBASECFG]命令检查全局弹性基础配置是否符合预期。
子主题： 
### 修改全局弹性基础配置(SET SCALEGLBBASECFG) 
### 修改全局弹性基础配置(SET SCALEGLBBASECFG) 
功能说明 
小心：该命令属于高危命令，当弹性模式设置为自动时，可能会触发系统自动弹性扩容或缩容操作。开启自动弹性功能时必须同时开启自愈和一致性检查功能。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于修改全局弹性基础配置，即对自动弹性功能的机制和流程相关的参数进行配置。 
该配置适用于系统内全部支持自动弹性功能的SC，可以通过[SHOW SCTYPE]命令查看SC的自动可弹缩性。对于没有配置SC弹性基础配置的SC，默认生效全局弹性基础配置。
当需要开启或关闭系统的自动弹性功能时，可以使用该命令修改弹性模式。 
若当前自动弹性功能的相关全局基础配置与预期不符时，可以使用该命令进行重新配置。 
命令执行成功后，可以通过[SHOW SCALEGLBBASECFG]命令查看配置结果。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
注意事项 
开启自动弹性功能之前，运维人员务必检查与自动弹性功能相关的全部配置（包括全局弹性基础配置、SC弹性基础配置、全局弹性策略配置、SC弹性策略配置以及MANO弹性策略配置等）是否配置正确。 
开启自动弹性功能时必须同时开启自愈和一致性检查功能。 
只有当全局弹性基础配置的弹性模式配置为自动时，SC弹性基础配置的自动弹性开关（如有配置）才会生效，否则系统不会进行自动弹性操作。 
如果没有特殊需求，全局弹性基础配置使用默认配置即可。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
mode|弹性模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: manual|该参数用于设置弹性模式。各参数选项的含义是：手动：自动弹性模式不生效，系统不能进行自动弹性扩容或缩容等操作，运维人员只能手动执行弹性扩容或缩容等操作。自动：自动弹性模式生效，系统能够根据弹性配置进行自动弹性扩容或缩容等操作。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: noupgrading|该参数用于设置系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，自动弹性模式才是生效的。升级状态：当系统在进行升级相关操作时，该参数需配置为升级状态，此时自动弹性模式不生效。
sources|弹性策略来源|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: local|该参数用于设置弹性策略来源。各参数选项的含义是：本地：运维人员可以在EM上对弹性策略进行配置。MANO：运维人员可以在MANO上对弹性策略进行配置。
sampling_interval|采样间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-600默认值: 5|该参数用于设置弹性数据的采样间隔，即系统每隔多久对业务上报的KPI进行一次采样。
monitoring_cycle|监控周期（秒）|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 60|该参数用于设置弹性数据的监控周期，即系统每隔多久对采样和上报的业务KPI进行一次监控。在每个监控周期内，系统会对其采样上报的业务KPI计算平均值，并以此来判断是否生成自动弹性任务。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于设置弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
timeout|弹性超时（分）|参数可选性: 任选参数类型: 数字参数范围: 10-120默认值: 60|该参数用于设置自动弹性操作的超时时间，超时后系统会上报通知提示运维人员自动弹性操作超时。
timescale_switch|时间策略外弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于设置时间策略外的自动弹性开关。该开关仅适用于运维人员配置了时间策略的情况。若运维人员配置了时间策略，系统能够根据该配置在具体时间段内进行自动弹性操作。各参数选项的含义是：启用：若当前时间不在时间策略配置的时间段内，系统能够继续进行自动弹性操作。禁用：若当前时间不在时间策略配置的时间段内，系统不会进行自动弹性操作。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
mode|弹性模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: manual|该参数用于显示弹性模式。各参数选项的含义是：手动：自动弹性模式不生效，系统不能进行自动弹性扩容或缩容等操作，运维人员只能手动执行弹性扩容或缩容等操作。自动：自动弹性模式生效，系统能够根据弹性配置进行自动弹性扩容或缩容等操作。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: noupgrading|该参数用于显示系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，自动弹性模式才是生效的。升级状态：当系统在进行升级相关操作时，该参数需配置为升级状态，此时自动弹性模式不生效。
sources|弹性策略来源|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: local|该参数用于显示弹性策略来源。各参数选项的含义是：本地：运维人员可以在EM上对弹性策略进行配置。MANO：运维人员可以在MANO上对弹性策略进行配置。
sampling_interval|采样间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-600默认值: 5|该参数用于显示弹性数据的采样间隔，即系统每隔多久对业务上报的KPI进行一次采样。
monitoring_cycle|监控周期（秒）|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 60|该参数用于显示弹性数据的监控周期，即系统每隔多久对采样和上报的业务KPI进行一次监控。在每个监控周期内，系统会对其采样上报的业务KPI计算平均值，并以此来判断是否生成自动弹性任务。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于显示弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
timeout|弹性超时（分）|参数可选性: 任选参数类型: 数字参数范围: 10-120默认值: 60|该参数用于显示自动弹性操作的超时时间，超时后系统会上报通知提示运维人员自动弹性操作超时。
timescale_switch|时间策略外弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示时间策略外的自动弹性开关。该开关仅适用于运维人员配置了时间策略的情况。若运维人员配置了时间策略，系统能够根据该配置在具体时间段内进行自动弹性操作。各参数选项的含义是：启用：若当前时间不在时间策略配置的时间段内，系统能够继续进行自动弹性操作。禁用：若当前时间不在时间策略配置的时间段内，系统不会进行自动弹性操作。
命令举例 
`
修改全局弹性基础配置。弹性模式为自动，升级状态为非升级状态，弹性策略来源为本地，采样间隔为5秒钟，监控周期为60秒钟，弹性缩容冷却时间为10分钟，弹性超时为10分钟，时间策略外弹性开关为启用。
SET SCALEGLBBASECFG:MODE="automatic",UPGRADESTATUS="noupgrading",SOURCES="local",SAMPLING_INTERVAL=5,MONITORING_CYCLE=60,IN_COOLDOWN_TIME=10,TIMEOUT=10,TIMESCALE_SWITCH="enable"
` 
### 查询全局弹性基础配置(SHOW SCALEGLBBASECFG) 
### 查询全局弹性基础配置(SHOW SCALEGLBBASECFG) 
功能说明 
该命令用于查询全局弹性基础配置，包括弹性模式、升级状态、弹性策略来源、采样间隔、监控周期、弹性缩容冷却时间、弹性超时以及时间策略外弹性开关等配置信息。 
该配置适用于系统内全部支持自动弹性功能的SC，可以通过[SHOW SCTYPE]命令查看SC的自动可弹缩性。对于没有配置SC弹性基础配置的SC，默认生效全局弹性基础配置。
当需要开启自动弹性模式前、修改全局弹性基础配置前后以及自动弹性功能出现异常时，可以使用该命令查看全局弹性基础配置是否符合预期。 
执行该命令后，若发现全局弹性基础配置不符合预期，可以通过[SET SCALEGLBBASECFG]命令进行修改。
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
mode|弹性模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: manual|该参数用于显示弹性模式。各参数选项的含义是：手动：自动弹性模式不生效，系统不能进行自动弹性扩容或缩容等操作，运维人员只能手动执行弹性扩容或缩容等操作。自动：自动弹性模式生效，系统能够根据弹性配置进行自动弹性扩容或缩容等操作。
upgradestatus|升级状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: noupgrading|该参数用于显示系统的升级状态。各参数选项的含义是：非升级状态：系统默认状态，即系统没有进行升级相关操作。该参数只有配置为非升级状态时，自动弹性模式才是生效的。升级状态：当系统在进行升级相关操作时，该参数需配置为升级状态，此时自动弹性模式不生效。
sources|弹性策略来源|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: local|该参数用于显示弹性策略来源。各参数选项的含义是：本地：运维人员可以在EM上对弹性策略进行配置。MANO：运维人员可以在MANO上对弹性策略进行配置。
sampling_interval|采样间隔（秒）|参数可选性: 任选参数类型: 数字参数范围: 1-600默认值: 5|该参数用于显示弹性数据的采样间隔，即系统每隔多久对业务上报的KPI进行一次采样。
monitoring_cycle|监控周期（秒）|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 60|该参数用于显示弹性数据的监控周期，即系统每隔多久对采样和上报的业务KPI进行一次监控。在每个监控周期内，系统会对其采样上报的业务KPI计算平均值，并以此来判断是否生成自动弹性任务。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于显示弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
timeout|弹性超时（分）|参数可选性: 任选参数类型: 数字参数范围: 10-120默认值: 60|该参数用于显示自动弹性操作的超时时间，超时后系统会上报通知提示运维人员自动弹性操作超时。
timescale_switch|时间策略外弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示时间策略外的自动弹性开关。该开关仅适用于运维人员配置了时间策略的情况。若运维人员配置了时间策略，系统能够根据该配置在具体时间段内进行自动弹性操作。各参数选项的含义是：启用：若当前时间不在时间策略配置的时间段内，系统能够继续进行自动弹性操作。禁用：若当前时间不在时间策略配置的时间段内，系统不会进行自动弹性操作。
命令举例 
`
查询全局弹性基础配置。
SHOW SCALEGLBBASECFG
(No.1) : SHOW SCALEGLBBASECFG:
弹性模式 升级状态   弹性策略来源 采样间隔（秒） 监控周期（秒） 弹性缩容冷却时间（分） 弹性超时（分） 时间策略外弹性开关 
------------------------------------------------------------------------------------------------------------------
自动     非升级状态 本地         5             60            10                    10           启用               
------------------------------------------------------------------------------------------------------------------
记录数：1
` 
## 全局弹性策略配置 
## 全局弹性策略配置 
背景知识 
SC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。 
业务通常用KPI（Key Performance Indicator，关键性能指标）来描述业务负荷的高低。KPI类型主要包括上下文占用率、数据库占用率、业务负载占用率、吞吐率以及租户容量比等。 
在没有自动弹性功能之前，运维人员必须定期监控系统运行状态以及业务各类型KPI的数值。当业务负荷过高，需要手动对SC进行弹性扩容操作，从而避免业务功能受到影响；当业务负荷过低，需要手动对SC进行弹性缩容操作，从而避免资源浪费。 
考虑到手动弹性操作需要耗费大量人力以及维护成本，因此系统提供自动弹性功能。 
自动弹性模式开启后，系统会在每个采样间隔时间内对业务上报的KPI进行采样，并在每个监控周期内对采样到的KPI计算平均值，然后根据对应类型的弹性策略判断是否生成弹性任务，进而实现对SC进行自动弹性扩容或缩容的功能。 
全局弹性策略配置，即系统判断业务KPI是否满足自动弹性条件以及实际弹性操作相关的配置，并且该配置适用于系统内全部支持自动弹性功能的SC，可以通过[SHOW SCTYPE]命令查看SC的自动可弹缩性。对于没有配置弹性策略配置的SC，默认生效全局弹性策略配置。
功能说明 
该组命令提供了对全局弹性策略配置的修改（[SET SCALEPOLICYGLB]）与查询（[SHOW SCALEPOLICYGLB]）等功能。
使用全局弹性策略配置前，需先检查是否已开启自动弹性功能，并且弹性策略来源（全局弹性基础配置）配置为本地。 
通常情况，全局弹性策略配置有五种类型，并且每种类型的全局弹性策略均适用于系统对SC进行的组内或组间的自动弹性扩容或缩容操作。 
自动弹性功能开启后，系统会根据业务上报的KPI对应的弹性策略来判断是否对SC进行自动弹性扩容或缩容操作以及具体如何操作。 
对弹性扩容阈值或弹性缩容阈值进行配置决定了SC满足弹性扩或弹性缩容的条件。 
对弹性步长类型、弹性扩容步长以及弹性缩容步长进行配置决定了实际的弹性操作。 
全局弹性策略可以针对不同类型的弹性策略分别进行配置，如果没有特殊需求，使用默认配置即可。 
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
开启自动弹性功能前需通过[SHOW SCALEPOLICYGLB]命令检查全局弹性策略配置是否符合预期。
子主题： 
### 修改全局弹性策略配置(SET SCALEPOLICYGLB) 
### 修改全局弹性策略配置(SET SCALEPOLICYGLB) 
功能说明 
该命令用于修改全局弹性策略配置，即对系统判断业务KPI是否满足自动弹性条件以及实际弹性操作相关的参数进行配置。 
该配置适用于系统内全部支持自动弹性功能的SC，可以通过[SHOW SCTYPE]命令查看SC的自动可弹缩性。对于没有配置SC弹性策略配置的SC，默认生效全局弹性策略配置。
自动弹性功能开启后，系统会根据业务上报的KPI对应的弹性策略来判断是否对SC进行自动弹性扩容或缩容操作以及具体如何操作。 
若当前的全局弹性策略配置与预期不符时，可以使用该命令进行重新配置。 
命令执行成功后，可以通过[SHOW SCALEPOLICYGLB]命令查看配置结果。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
注意事项 
开启自动弹性功能之前，运维人员务必检查全局弹性策略是否配置正确。 
如果没有特殊需求，全局弹性策略配置使用默认配置即可。 
全局弹性策略配置中的弹性步长类型默认为VM数量，对于CAAS场景，需先手动将弹性步长类型修改为SC数量。 
若全局弹性策略配置没有生效，请先检查是否已开启自动弹性功能，并且弹性策略来源（全局弹性基础配置）配置为本地。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
policy_type|弹性策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于指定弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于设置弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于设置弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于设置弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于设置弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于设置弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
policy_type|弹性策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于显示弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于显示弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于显示弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于显示弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
命令举例 
`
修改业务负载占用率的全局弹性策略配置。弹性扩容阈值为60%，弹性缩容阈值为20%，弹性步长类型为VM数量，弹性扩容步长为2个，弹性缩容步长为1个。
SET SCALEPOLICYGLB:POLICY_TYPE="CPU_RATIO",SCALEOUT_THRESHOLD=60,SCALEIN_THRESHOLD=20,STEP_TYPE="VMNUM",SCALEOUT_STEP=2,SCALEIN_STEP=1
` 
### 查询全局弹性策略配置(SHOW SCALEPOLICYGLB) 
### 查询全局弹性策略配置(SHOW SCALEPOLICYGLB) 
功能说明 
该命令用于查询全局弹性策略配置，包括弹性策略类型、弹性扩容阈值、弹性缩容阈值、弹性步长类型、弹性扩容步长以及弹性缩容步长等配置信息。 
该配置适用于系统内全部支持自动弹性功能的SC，可以通过[SHOW SCTYPE]命令查看SC的自动可弹缩性。对于没有配置SC弹性策略配置的SC，默认生效全局弹性策略配置。
自动弹性功能开启后，系统会根据业务上报的KPI对应的弹性策略来判断是否对SC进行自动弹性扩容或缩容操作以及具体如何操作。 
当需要开启自动弹性功能前、修改全局弹性策略配置前后以及自动弹性功能出现异常时，可以使用该命令查看全局弹性策略配置是否符合预期。 
通常情况，全局弹性策略配置有五种类型，并且每种类型的全局弹性策略均适用于系统对SC进行的组内或组间的自动弹性扩容或缩容操作。 
执行该命令后，若发现全局弹性策略配置不符合预期，可以通过[SET SCALEPOLICYGLB]命令进行修改。
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
policy_type|弹性策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于显示弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于显示弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于显示弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于显示弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
命令举例 
`
查询全局弹性策略配置。
SHOW SCALEPOLICYGLB
(No.1) : SHOW SCALEPOLICYGLB:
弹性策略类型   弹性扩容阈值（%） 弹性缩容阈值（%） 弹性步长类型 弹性扩容步长 弹性缩容步长 
--------------------------------------------------------------------------------------
上下文占用率   60               20               VM数量       1           1            
数据库占用率   60               20               VM数量       1           1            
业务负载占用率 60               20               VM数量       1           1            
吞吐率         60               20               VM数量       1           1            
租户容量比     60               20               VM数量       1           1            
--------------------------------------------------------------------------------------
记录数：5
` 
## SC弹性基础配置 
## SC弹性基础配置 
背景知识 
为了满足不同业务对自动弹性功能的差异化需求，系统提供针对不同SC类型的弹性基础配置。 
该配置为可选配置，对于没有配置SC弹性基础配置的SC，默认生效全局弹性基础配置。 
功能说明 
该组命令提供了对SC弹性基础配置的新增、修改、删除以及查询等功能。 
 
当弹性模式（全局弹性基础配置）为自动时，对于配置了SC弹性基础配置的SC类型，此配置优先于全局弹性基础配置生效；对于没有配置SC弹性基础配置的SC类型，默认生效全局弹性基础配置。 
 
当弹性模式（全局弹性基础配置）为手动时，SC弹性基础配置默认不生效。 
 
当需要关闭指定类型的SC的自动弹性功能或者需要修改指定类型的SC的弹性缩容冷却时间时，可以使用[ADD SCALEBASECFGBYSC]命令新增SC的弹性基础配置。
若指定类型的SC的弹性基础配置与预期不符时，可以使用[SET SCALEBASECFGBYSC]命令修改SC的弹性基础配置。
当不再需要对指定类型的SC进行弹性基础配置时，可以使用[DEL SCALEBASECFGBYSC]命令删除SC的弹性基础配置。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
开启自动弹性功能前需通过[SHOW SCALEBASECFGBYSC]命令检查SC弹性基础配置是否符合预期。
子主题： 
### 新增SC弹性基础配置(ADD SCALEBASECFGBYSC) 
### 新增SC弹性基础配置(ADD SCALEBASECFGBYSC) 
功能说明 
该命令用于新增SC弹性基础配置，即新增对指定类型的SC的自动弹性开关和弹性缩容冷却时间的配置。 
 
当弹性模式（全局弹性基础配置）为自动时，对于配置了SC弹性基础配置的SC类型，此配置优先于全局弹性基础配置生效；对于没有配置SC弹性基础配置的SC类型，默认生效全局弹性基础配置。 
 
当弹性模式（全局弹性基础配置）为手动时，SC弹性基础配置默认不生效。 
 
当全局自动弹性模式开启、需要关闭指定类型的SC的自动弹性功能时，可以使用该命令新增SC的自动弹性开关配置。 
当全局自动弹性模式开启、需要修改指定类型的SC的弹性缩容冷却时间时，可以使用该命令新增SC的弹性缩容冷却时间配置。 
命令执行成功后，可以通过[SHOW SCALEBASECFGBYSC]命令查看配置结果。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
注意事项 
开启自动弹性功能之前，运维人员务必检查SC弹性基础配置是否配置正确。 
若SC弹性基础配置没有生效，请先检查是否已开启全局自动弹性模式。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
scaleswitch|自动弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于设置SC的自动弹性开关。各参数选项的含义是：启用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能启用，系统能够对该SC进行自动弹性扩容或缩容等操作。禁用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能禁用，系统不能对该SC进行自动弹性扩容或缩容等操作。当弹性模式（全局弹性基础配置）为手动时，该配置不生效。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于设置弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
scaleswitch|自动弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示SC的自动弹性开关。各参数选项的含义是：启用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能启用，系统能够对该SC进行自动弹性扩容或缩容等操作。禁用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能禁用，系统不能对该SC进行自动弹性扩容或缩容等操作。当弹性模式（全局弹性基础配置）为手动时，该配置不生效。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于显示弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
命令举例 
`
新增SC类型为sc-ips的SC弹性基础配置。自动弹性开关为启用，弹性缩容冷却时间为15分钟。
ADD SCALEBASECFGBYSC:SERVICE_COMPONENT="sc-ips",SCALESWITCH="enable",IN_COOLDOWN_TIME=15
` 
### 修改SC弹性基础配置(SET SCALEBASECFGBYSC) 
### 修改SC弹性基础配置(SET SCALEBASECFGBYSC) 
功能说明 
该命令用于修改SC弹性基础配置，即对指定类型的SC的自动弹性开关和弹性缩容冷却时间进行配置。 
 
当弹性模式（全局弹性基础配置）为自动时，对于配置了SC弹性基础配置的SC类型，此配置优先于全局弹性基础配置生效；对于没有配置SC弹性基础配置的SC类型，默认生效全局弹性基础配置。 
 
当弹性模式（全局弹性基础配置）为手动时，SC弹性基础配置默认不生效。 
 
当需要开启或关闭指定类型的SC的自动弹性功能时，可以使用该命令修改自动弹性开关。 
若指定类型的SC的弹性缩容冷却时间与预期不符时，可以使用该命令进行重新配置。 
命令执行成功后，可以通过[SHOW SCALEBASECFGBYSC]命令查看配置结果。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
注意事项 
开启自动弹性功能之前，运维人员务必检查SC弹性基础配置是否配置正确。 
若SC弹性基础配置没有生效，请先检查是否已开启全局自动弹性模式。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
scaleswitch|自动弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于设置SC的自动弹性开关。各参数选项的含义是：启用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能启用，系统能够对该SC进行自动弹性扩容或缩容等操作。禁用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能禁用，系统不能对该SC进行自动弹性扩容或缩容等操作。当弹性模式（全局弹性基础配置）为手动时，该配置不生效。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于设置弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
scaleswitch|自动弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示SC的自动弹性开关。各参数选项的含义是：启用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能启用，系统能够对该SC进行自动弹性扩容或缩容等操作。禁用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能禁用，系统不能对该SC进行自动弹性扩容或缩容等操作。当弹性模式（全局弹性基础配置）为手动时，该配置不生效。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于显示弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
命令举例 
`
修改SC类型为sc-ips的SC弹性基础配置。自动弹性开关为启用，弹性缩容冷却时间为15分钟。
SET SCALEBASECFGBYSC:SERVICE_COMPONENT="sc-ips",SCALESWITCH="enable",IN_COOLDOWN_TIME=15
` 
### 删除SC弹性基础配置(DEL SCALEBASECFGBYSC) 
### 删除SC弹性基础配置(DEL SCALEBASECFGBYSC) 
功能说明 
该命令用于删除SC弹性基础配置，即删除对指定类型的SC的自动弹性开关和弹性缩容冷却时间的配置。 
当不再需要对指定类型的SC进行弹性基础配置时，可以使用该命令删除SC的弹性基础配置。 
命令执行成功后，可以通过[SHOW SCALEBASECFGBYSC]命令查看配置是否已删除。
对于删除了SC弹性基础配置的SC类型，默认生效全局弹性基础配置。 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
命令举例 
`
删除SC类型为sc-ips的SC弹性基础配置。
DEL SCALEBASECFGBYSC:SERVICE_COMPONENT="sc-ips"
` 
### 查询SC弹性基础配置(SHOW SCALEBASECFGBYSC) 
### 查询SC弹性基础配置(SHOW SCALEBASECFGBYSC) 
功能说明 
该命令用于查询SC弹性基础配置，包括SC类型、自动弹性开关以及弹性缩容冷却时间等配置信息。 
该配置适用于特定的SC类型。当弹性模式（全局弹性基础配置）为自动时，运维人员可以针对不同的SC类型进行弹性基础配置。 
当需要开启SC的自动弹性功能前、修改SC的弹性基础配置前后以及SC的自动弹性功能出现异常时，可以使用该命令查看SC弹性基础配置是否符合预期。 
具体查询方式： 
 
当不指定SC类型时，该命令查询所有已配置的SC类型的弹性基础配置。 
 
当指定SC类型时，该命令查询特定SC类型的弹性基础配置。 
 
执行该命令后，若发现SC弹性基础配置不符合预期，可以通过[SET SCALEBASECFGBYSC]命令进行修改。
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
scaleswitch|自动弹性开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示SC的自动弹性开关。各参数选项的含义是：启用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能启用，系统能够对该SC进行自动弹性扩容或缩容等操作。禁用：当弹性模式（全局弹性基础配置）为自动时，SC的自动弹性功能禁用，系统不能对该SC进行自动弹性扩容或缩容等操作。当弹性模式（全局弹性基础配置）为手动时，该配置不生效。
in_cooldown_time|弹性缩容冷却时间（分）|参数可选性: 任选参数类型: 数字参数范围: 1-60默认值: 10|该参数用于显示弹性缩容的冷却时间，即只针对自动弹性扩容操作后的此段时间内不允许进行自动弹性缩容操作。配置该参数的目的是为了预留一定的时间来体现业务KPI的真实变化，并防止出现SC乒乓弹缩（即SC弹性扩容之后立即弹性缩容）的现象。
命令举例 
`
查询SC类型为sc-ips的SC弹性基础配置。
SHOW SCALEBASECFGBYSC:SERVICE_COMPONENT="sc-ips"
(No.1) : SHOW SCALEBASECFGBYSC:SERVICE_COMPONENT="sc-ips"
SC类型 自动弹性开关 弹性缩容冷却时间（分）
----------------------------------------
sc-ips 启用         15
----------------------------------------  
记录数：1
` 
## SC弹性策略配置 
## SC弹性策略配置 
背景知识 
为了满足不同业务对自动弹性功能的差异化需求，系统提供针对不同SC类型的弹性策略配置。 
该配置为可选配置，对于没有配置SC弹性策略配置的SC，默认生效全局弹性策略配置。 
功能说明 
该组命令提供了对SC弹性策略配置的新增、修改、删除以及查询等功能。 
 
对于配置了SC弹性策略配置的SC类型，若激活标记为启用，则此配置优先于全局弹性策略配置生效；若激活标记为禁用，则该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。 
 
对于没有配置SC弹性策略配置的SC类型，默认生效全局弹性策略配置。 
 
当需要禁用指定类型的SC的指定类型的弹性策略，或者需要针对某个类型的SC进行弹性策略配置时，可以使用[ADD SCALEPOLICYBYSC]命令新增SC的弹性策略配置。
若指定类型的SC的弹性策略配置与预期不符时，可以使用[SET SCALEPOLICYBYSC]命令修改SC的弹性策略配置。
当不再需要对指定类型的SC进行弹性策略配置时，可以使用[DEL SCALEPOLICYBYSC]命令删除SC的弹性策略配置。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
开启自动弹性功能前需通过[SHOW SCALEPOLICYBYSC]命令检查SC弹性策略配置是否符合预期。
子主题： 
### 新增SC弹性策略配置(ADD SCALEPOLICYBYSC) 
### 新增SC弹性策略配置(ADD SCALEPOLICYBYSC) 
功能说明 
该命令用于新增SC弹性策略配置，即根据需求新增对指定SC类型的弹性策略的配置。 
SC的自动弹性功能开启后，系统会根据业务上报的KPI对应的弹性策略来判断是否对SC进行自动弹性扩容或缩容操作以及具体如何操作。 
 
对于配置了SC弹性策略配置的SC类型，若激活标记为启用，则此配置优先于全局弹性策略配置生效；若激活标记为禁用，则该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。 
 
对于没有配置SC弹性策略配置的SC类型，默认生效全局弹性策略配置。 
 
当需要禁用指定类型的SC的指定类型的弹性策略，或者需要针对某个类型的SC进行弹性策略配置时，可以使用该命令。 
命令执行成功后，可以通过[SHOW SCALEPOLICYBYSC]命令查看配置结果。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
注意事项 
开启自动弹性功能之前，运维人员务必检查SC弹性策略是否配置正确。 
若SC弹性策略配置没有生效，请先检查是否已开启SC自动弹性功能，并且弹性策略来源（全局弹性基础配置）配置为本地。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
policy_type|弹性策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于指定弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
policy_scope|弹性策略范围|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCOPE_WITHIN_SCGROUP|该参数用于指定弹性策略的作用范围。各参数选项的含义是：组内：当业务上报的SC组内的KPI满足自动弹性条件时，系统会对SC组内的SC实例进行自动弹性操作。组间：当业务上报的SC组间的KPI满足自动弹性条件时，系统会对SC组整组进行自动弹性操作。对于全局弹性策略配置来说，同一类型的弹性策略适用于组内和组间两种弹性策略范围。但是对于同一类型的SC的弹性策略配置来说，同一类型的弹性策略只适用于组内或组间一种弹性策略范围，需要在使用ADD SCALEPOLICYBYSC命令新增SC弹性策略配置时指定弹性策略范围。若需要修改SC的弹性策略范围，需要先使用DEL SCALEPOLICYBYSC命令删除该弹性策略配置再重新增加。
active_flag|激活标记|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于设置弹性策略的激活标记。各参数选项的含义是：启用：该弹性策略为启用状态，对于该SC类型，该弹性策略配置优先于相同类型的全局弹性策略配置生效。禁用：该弹性策略为禁用状态，对于该SC类型，该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。若没有配置SC的弹性策略，则默认全局弹性策略生效。并且只有在没有配置SC的弹性策略的情况下，同一类型的SC、同一类型的全局弹性策略在组内和组间范围均生效。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于设置弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于设置弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于设置弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于设置弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于设置弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
命令举例 
`
新增SC弹性策略配置。SC类型为sc-ips，弹性策略类型为业务负载占用率，弹性策略范围为组内，激活标记为启用，弹性扩容阈值为60%，弹性缩容阈值为20%，弹性步长类型为VM数量，弹性扩容步长为2，弹性缩容步长为1。
ADD SCALEPOLICYBYSC:SERVICE_COMPONENT="sc-ips",POLICY_TYPE="CPU_RATIO",POLICY_SCOPE="SCOPE_WITHIN_SCGROUP",ACTIVE_FLAG="enable",SCALEOUT_THRESHOLD=60,SCALEIN_THRESHOLD=20,STEP_TYPE="VMNUM",SCALEOUT_STEP=2,SCALEIN_STEP=1
` 
### 修改SC弹性策略配置(SET SCALEPOLICYBYSC) 
### 修改SC弹性策略配置(SET SCALEPOLICYBYSC) 
功能说明 
该命令用于修改SC弹性策略配置，即根据需求针对不同的SC类型，对不同类型的弹性策略进行配置、启用以及禁用。 
SC的自动弹性功能开启后，系统会根据业务上报的KPI对应的弹性策略来判断是否对SC进行自动弹性扩容或缩容操作以及具体如何操作。 
 
对于配置了SC弹性策略配置的SC类型，若激活标记为启用，则此配置优先于全局弹性策略配置生效；若激活标记为禁用，则该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。 
 
对于没有配置SC弹性策略配置的SC类型，默认生效全局弹性策略配置。 
 
当需要启用或禁用指定类型的SC的指定类型的弹性策略，或者需要针对某个类型的SC进行弹性策略配置时，可以使用该命令。 
命令执行成功后，可以通过[SHOW SCALEPOLICYBYSC]命令查看配置结果。
系统在每个监控周期内会读取弹性相关的全部配置，新的配置数据会在下一个监控周期生效。 
注意事项 
开启自动弹性功能之前，运维人员务必检查SC弹性策略是否配置正确。 
若SC弹性策略配置没有生效，请先检查是否已开启SC自动弹性功能，并且弹性策略来源（全局弹性基础配置）配置为本地。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
policy_type|弹性策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于指定弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
policy_scope|弹性策略范围|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCOPE_WITHIN_SCGROUP|该参数用于指定弹性策略的作用范围。各参数选项的含义是：组内：当业务上报的SC组内的KPI满足自动弹性条件时，系统会对SC组内的SC实例进行自动弹性操作。组间：当业务上报的SC组间的KPI满足自动弹性条件时，系统会对SC组整组进行自动弹性操作。对于全局弹性策略配置来说，同一类型的弹性策略适用于组内和组间两种弹性策略范围。但是对于同一类型的SC的弹性策略配置来说，同一类型的弹性策略只适用于组内或组间一种弹性策略范围，需要在使用ADD SCALEPOLICYBYSC命令新增SC弹性策略配置时指定弹性策略范围。若需要修改SC的弹性策略范围，需要先使用DEL SCALEPOLICYBYSC命令删除该弹性策略配置再重新增加。
active_flag|激活标记|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于设置弹性策略的激活标记。各参数选项的含义是：启用：该弹性策略为启用状态，对于该SC类型，该弹性策略配置优先于相同类型的全局弹性策略配置生效。禁用：该弹性策略为禁用状态，对于该SC类型，该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。若没有配置SC的弹性策略，则默认全局弹性策略生效。并且只有在没有配置SC的弹性策略的情况下，同一类型的SC、同一类型的全局弹性策略在组内和组间范围均生效。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于设置弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于设置弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于设置弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于设置弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于设置弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
policy_type|弹性策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于显示弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
policy_scope|弹性策略范围|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCOPE_WITHIN_SCGROUP|该参数用于显示弹性策略的作用范围。各参数选项的含义是：组内：当业务上报的SC组内的KPI满足自动弹性条件时，系统会对SC组内的SC实例进行自动弹性操作。组间：当业务上报的SC组间的KPI满足自动弹性条件时，系统会对SC组整组进行自动弹性操作。对于全局弹性策略配置来说，同一类型的弹性策略适用于组内和组间两种弹性策略范围。但是对于同一类型的SC的弹性策略配置来说，同一类型的弹性策略只适用于组内或组间一种弹性策略范围，需要在使用ADD SCALEPOLICYBYSC命令新增SC弹性策略配置时指定弹性策略范围。若需要修改SC的弹性策略范围，需要先使用DEL SCALEPOLICYBYSC命令删除该弹性策略配置再重新增加。
active_flag|激活标记|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示弹性策略的激活标记。各参数选项的含义是：启用：该弹性策略为启用状态，对于该SC类型，该弹性策略配置优先于相同类型的全局弹性策略配置生效。禁用：该弹性策略为禁用状态，对于该SC类型，该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。若没有配置SC的弹性策略，则默认全局弹性策略生效。并且只有在没有配置SC的弹性策略的情况下，同一类型的SC、同一类型的全局弹性策略在组内和组间范围均生效。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于显示弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于显示弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于显示弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
命令举例 
`
修改SC弹性策略配置。SC类型为sc-ips，弹性策略类型为业务负载占用率，弹性策略范围为组内，激活标记为禁用。
SET SCALEPOLICYBYSC:SERVICE_COMPONENT="sc-ips",POLICY_TYPE="CPU_RATIO",POLICY_SCOPE="SCOPE_WITHIN_SCGROUP",ACTIVE_FLAG="disable"
` 
### 删除SC弹性策略配置(DEL SCALEPOLICYBYSC) 
### 删除SC弹性策略配置(DEL SCALEPOLICYBYSC) 
功能说明 
该命令用于删除SC弹性策略配置，即根据需求删除对指定SC类型的弹性策略的配置。 
当不再需要对指定类型的SC进行弹性策略配置时，可以使用该命令删除SC的弹性策略配置。 
命令执行成功后，可以通过[SHOW SCALEPOLICYBYSC]命令查看配置是否已删除。
对于删除了SC弹性策略配置的SC类型，默认生效全局弹性策略配置。 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
policy_type|弹性策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于指定弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
policy_scope|弹性策略范围|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCOPE_WITHIN_SCGROUP|该参数用于指定弹性策略的作用范围。各参数选项的含义是：组内：当业务上报的SC组内的KPI满足自动弹性条件时，系统会对SC组内的SC实例进行自动弹性操作。组间：当业务上报的SC组间的KPI满足自动弹性条件时，系统会对SC组整组进行自动弹性操作。对于全局弹性策略配置来说，同一类型的弹性策略适用于组内和组间两种弹性策略范围。但是对于同一类型的SC的弹性策略配置来说，同一类型的弹性策略只适用于组内或组间一种弹性策略范围，需要在使用ADD SCALEPOLICYBYSC命令新增SC弹性策略配置时指定弹性策略范围。若需要修改SC的弹性策略范围，需要先使用DEL SCALEPOLICYBYSC命令删除该弹性策略配置再重新增加。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
命令举例 
`
删除SC弹性策略配置。SC类型为sc-ips，弹性策略类型为业务负载占用率，弹性策略范围为组内。
DEL SCALEPOLICYBYSC:SERVICE_COMPONENT="sc-ips",POLICY_TYPE="CPU_RATIO",POLICY_SCOPE="SCOPE_WITHIN_SCGROUP"
` 
### 查询SC弹性策略配置(SHOW SCALEPOLICYBYSC) 
### 查询SC弹性策略配置(SHOW SCALEPOLICYBYSC) 
功能说明 
该命令用于查询SC弹性策略配置，包括SC类型、弹性策略类型、弹性策略范围、激活标记、弹性扩容阈值、弹性缩容阈值、弹性步长类型、弹性扩容步长以及弹性缩容步长等配置信息。 
该配置适用于特定的SC类型，运维人员可以根据需求针对不同的SC类型，对不同类型的弹性策略进行配置、启用以及禁用。 
SC的自动弹性功能开启后，系统会根据业务上报的KPI对应的弹性策略来判断是否对SC进行自动弹性扩容或缩容操作以及具体如何操作。 
当需要开启SC的自动弹性功能前、修改SC的弹性策略配置前后以及SC的自动弹性功能出现异常时，可以使用该命令查看SC弹性策略配置是否符合预期。 
具体查询方式： 
 
当不指定SC类型和弹性策略类型时，该命令查询所有已配置的SC弹性策略配置。 
 
当指定SC类型、不指定弹性策略类型时，该命令查询所有该SC类型的SC弹性策略配置。 
 
当不指定SC类型、指定弹性策略类型时，该命令查询所有该弹性策略类型的SC弹性策略配置。 
 
当指定SC类型和弹性策略类型时，该命令查询该SC类型、该弹性策略类型的唯一SC弹性策略配置。 
 
执行该命令后，若发现SC弹性策略配置不符合预期，可以通过[SET SCALEPOLICYBYSC]命令进行修改。
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于指定SC的类型，可以通过SHOW SCTYPE命令进行查询。
policy_type|弹性策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于指定弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
service_component|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示SC的类型。
policy_type|弹性策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: CPU_RATIO|该参数用于显示弹性策略类型。业务上报不同类型的KPI对应不同类型的弹性策略，主要包括以下几种：上下文占用率数据库占用率业务负载占用率吞吐率租户容量比其中，业务负载占用率是各类型的SC通用的弹性策略类型。
policy_scope|弹性策略范围|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SCOPE_WITHIN_SCGROUP|该参数用于显示弹性策略的作用范围。各参数选项的含义是：组内：当业务上报的SC组内的KPI满足自动弹性条件时，系统会对SC组内的SC实例进行自动弹性操作。组间：当业务上报的SC组间的KPI满足自动弹性条件时，系统会对SC组整组进行自动弹性操作。对于全局弹性策略配置来说，同一类型的弹性策略适用于组内和组间两种弹性策略范围。但是对于同一类型的SC的弹性策略配置来说，同一类型的弹性策略只适用于组内或组间一种弹性策略范围，需要在使用ADD SCALEPOLICYBYSC命令新增SC弹性策略配置时指定弹性策略范围。若需要修改SC的弹性策略范围，需要先使用DEL SCALEPOLICYBYSC命令删除该弹性策略配置再重新增加。
active_flag|激活标记|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: disable|该参数用于显示弹性策略的激活标记。各参数选项的含义是：启用：该弹性策略为启用状态，对于该SC类型，该弹性策略配置优先于相同类型的全局弹性策略配置生效。禁用：该弹性策略为禁用状态，对于该SC类型，该策略类型的SC以及全局弹性策略配置均不生效，即系统不会根据业务上报的此类型KPI判断是否进行自动弹性操作。若没有配置SC的弹性策略，则默认全局弹性策略生效。并且只有在没有配置SC的弹性策略的情况下，同一类型的SC、同一类型的全局弹性策略在组内和组间范围均生效。
scaleout_threshold|弹性扩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 60|该参数用于显示弹性策略的弹性扩容阈值。SC开启自动弹性功能后，当其上报的KPI超过对应弹性策略的弹性扩容阈值时，系统会对该类型的SC进行自动弹性扩容操作。若同一种类型的SC有多种类型的KPI上报，只要其中一种KPI满足自动弹性扩容条件，系统就会对该类型的SC进行自动弹性扩容操作。对于部署策略为Co-Deploy的多种类型的SC，只要其中一种SC满足自动弹性扩容条件，系统就会对关联的全部类型的SC进行自动弹性扩容操作。
scalein_threshold|弹性缩容阈值（%）|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 20|该参数用于显示弹性策略的弹性缩容阈值。SC开启自动弹性功能后，当其上报的KPI低于对应弹性策略的弹性缩容阈值时，系统会对该类型的SC进行自动弹性缩容操作。若同一种类型的SC有多种类型的KPI上报，必须全部KPI满足自动弹性缩容条件，系统才会对该类型的SC进行自动弹性缩容操作。对于部署策略为Co-Deploy的多种类型的SC，必须全部SC满足自动弹性缩容条件，系统才会对关联的全部类型的SC进行自动弹性缩容操作。
step_type|弹性步长类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VMNUM|该参数用于显示弹性策略的弹性步长类型，即当系统进行自动弹性扩容或缩容操作时，一次性操作的SC数量的计算方式。各参数选项的含义是：VM数量：弹性扩容/缩容步长表示一次性扩容或缩容的虚机数量，只适用于IAAS场景。百分比：弹性扩容/缩容步长表示一次性扩容或缩容当前SC数量的百分比值，适用于所有场景。SC数量：弹性扩容/缩容步长表示一次性扩容或缩容的SC数量，只适用于CAAS场景。
scaleout_step|弹性扩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性扩容步长，即系统在进行自动弹性扩容操作时，一次性扩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI满足自动弹性扩容条件，则实际的弹性扩容步长取对应弹性策略中弹性扩容步长的最大值。对于部署策略为Co-Deploy的多种类型的SC，若其中有多种SC满足自动弹性扩容条件，则实际的弹性扩容步长取对应SC的弹性扩容步长的最大值。
scalein_step|弹性缩容步长|参数可选性: 任选参数类型: 数字参数范围: 1-100默认值: 1|该参数用于显示弹性策略的弹性缩容步长，即系统在进行自动弹性缩容操作时，一次性缩容的对应弹性步长类型的数值。若同一种类型的SC有多种类型的KPI上报，则实际的弹性缩容步长取对应弹性策略中弹性缩容步长的最小值。对于部署策略为Co-Deploy的多种类型的SC，则实际的弹性缩容步长取对应SC的弹性缩容步长的最小值。
命令举例 
`
查询所有的SC弹性策略配置。
SHOW SCALEPOLICYBYSC
(No.1) : SHOW SCALEPOLICYBYSC:
SC类型 弹性策略类型   弹性策略范围 激活标记 弹性扩容阈值（%） 弹性缩容阈值（%） 弹性步长类型 弹性扩容步长 弹性缩容步长 
-----------------------------------------------------------------------------------------------------------------
sc-ips 业务负载占用率 组内        启用     60               20               VM数量       2           1            
-----------------------------------------------------------------------------------------------------------------
记录数：1
` 
## 负荷采集配置 
## 负荷采集配置 
背景知识 
负荷采集是指在各网元运行时，搜集和汇总网元负荷信息的功能。 
功能说明 
本配置提供按服务组件类型设置负荷信息采集配置的功能，包括激活标记、采样周期和评价样本数量的配置等。 
子主题： 
### 增加负荷采集配置(ADD LOADSAMPLE) 
### 增加负荷采集配置(ADD LOADSAMPLE) 
功能说明 
该命令增加负荷采集配置，用于按服务组件类型配置负荷信息收集参数。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
active_flag|激活标记|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|激活标识，该参数有如下选项：启用：表示启用负荷采集功能。禁用：表示停用超负荷采集功能。
sample_cycle|采集周期|参数可选性: 必选参数类型: 数字参数范围: 1-30默认值: 5|该参数表示采集负荷控制信息的周期。
judge_num|评价样本数量|参数可选性: 必选参数类型: 数字参数范围: 1-12默认值: 10|该参数表示评价样本数量，即从当前时刻向前取该数量的负荷信息样本。对这些样本的负荷值取平均，即为对样本进行评价。
命令举例 
`
增加负荷采集配置，SC类型名称为"sc-a", 激活标记为启用，采集周期为5秒，评价样本数量为10。
ADD LOADSAMPLE:SCTYPE_NAME="sc-a",ACTIVE_FLAG="ENABLE",SAMPLE_CYCLE=5,JUDGE_NUM=10
` 
### 修改负荷采集配置(SET LOADSAMPLE) 
### 修改负荷采集配置(SET LOADSAMPLE) 
功能说明 
该命令修改负荷采集配置，用于按服务组件类型修改负荷信息收集参数。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
active_flag|激活标记|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|激活标识，该参数有如下选项：启用：表示启用负荷采集功能。禁用：表示停用超负荷采集功能。
sample_cycle|采集周期|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 5|该参数表示采集负荷控制信息的周期。
judge_num|评价样本数量|参数可选性: 任选参数类型: 数字参数范围: 1-12默认值: 10|该参数表示评价样本数量，即从当前时刻向前取该数量的负荷信息样本。对这些样本的负荷值取平均，即为对样本进行评价。
命令举例 
`
修改负荷采集配置，SC类型名称为"sc-a", 激活标记为启用，采集周期为5秒，评价样本数量为10。
SET LOADSAMPLE:SCTYPE_NAME="sc-a",ACTIVE_FLAG="ENABLE",SAMPLE_CYCLE=5,JUDGE_NUM=10
` 
### 查询负荷采集配置(SHOW LOADSAMPLE) 
### 查询负荷采集配置(SHOW LOADSAMPLE) 
功能说明 
该命令用于查询负荷采集配置，可以查询特定服务组件类型的负荷采集配置，也可以显示全部负荷采集配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
active_flag|激活标记|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: ENABLE|激活标识，该参数有如下选项：启用：表示启用负荷采集功能。禁用：表示停用超负荷采集功能。
sample_cycle|采集周期|参数可选性: 任选参数类型: 数字参数范围: 1-30默认值: 5|该参数表示采集负荷控制信息的周期。
judge_num|评价样本数量|参数可选性: 任选参数类型: 数字参数范围: 1-12默认值: 10|该参数表示评价样本数量，即从当前时刻向前取该数量的负荷信息样本。对这些样本的负荷值取平均，即为对样本进行评价。
命令举例 
`
显示SC类型名称"sc-a"的负荷采集配置。
SHOW LOADSAMPLE:SCTYPE_NAME="sc-a"
(No.4) : SHOW LOADSAMPLE:
服务组件类型    激活标记 采集周期(秒) 评价样本数量
sc-a             启用       5            10
记录数：2
执行成功耗时: 0.18 秒
` 
### 删除负荷采集配置(DEL LOADSAMPLE) 
### 删除负荷采集配置(DEL LOADSAMPLE) 
功能说明 
该命令用于按照服务组件类型删除负荷采集配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
命令举例 
`
删除SC类型名称"sc-a"的负荷采集配置。
DEL LOADSAMPLE:SCTYPE_NAME="sc-a"
` 
## 负荷控制策略配置 
## 负荷控制策略配置 
背景知识 
负荷控制策略配置是各网元运行时，业务根据采集的负荷信息对各个方向的流量进行控制，保护业务的运行安全。 
功能说明 
负荷控制策略配置可以按服务组件类型对各个网元设置不同的负荷控制策略类型、各负荷等级的阈值、各方向控制开关以及告警选项的配置。 
子主题： 
### 增加负荷控制策略配置(ADD LOADCTRL) 
### 增加负荷控制策略配置(ADD LOADCTRL) 
功能说明 
该命令增加负荷控制策略配置，根据服务组件的类型，对不同的策略进行阈值等策略参数的设置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
policy_type|策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-8|负荷控制策略类型包含：上下文占用率数据库占用率业务负载占用率吞吐率
threshold_1|1级阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 85|1级阈值，取值范围为0-100，缺省值为85。该阈值是指下限阈值，即超过该阈值会执行某些动作。
threshold_2|2级阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 75|2级阈值，取值范围为0-100，缺省值为75。该阈值是指下限阈值，即超过该阈值且小于1级阈值时会执行某些动作。
threshold_3|3级阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 70|3级阈值，取值范围为0-100，缺省值为70。该阈值是指下限阈值，即超过该阈值且小于2级阈值时会执行某些动作。
threshold_4|4级阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 65|4级阈值，取值范围为0-100，缺省值为65。该阈值是指下限阈值，即超过该阈值且小于3级阈值时会执行某些动作。
up_in_ctrl_level|上行入向控制策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|上行入向控制策略，是指对于使用该命令的网元来说，对上行的入向数据进行控制。选项如下：不控制：不对上行入向数据进行控制。从1级开始控制：超过1级阈值后，对上行入向数据进行控制。从2级开始控制：超过2级阈值后，对上行入向数据进行控制。从3级开始控制：超过3级阈值后，对上行入向数据进行控制。从4级开始控制：超过4级阈值后，对上行入向数据进行控制。
up_out_ctrl_level|上行出向控制策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|上行出向控制策略，是指对于使用该命令的网元来说，对上行的出向数据进行控制。选项如下：不控制：不对上行出向数据进行控制。从1级开始控制：超过1级阈值后，对上行出向数据进行控制。从2级开始控制：超过2级阈值后，对上行出向数据进行控制。从3级开始控制：超过3级阈值后，对上行出向数据进行控制。从4级开始控制：超过4级阈值后，对上行出向数据进行控制。
down_in_ctrl_level|下行入向控制策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|下行入向控制策略，是指对于使用该命令的网元来说，对下行的入向数据进行控制。选项如下：不控制：不对下行入向数据进行控制。从1级开始控制：超过1级阈值后，对下行入向数据进行控制。从2级开始控制：超过2级阈值后，对下行入向数据进行控制。从3级开始控制：超过3级阈值后，对下行入向数据进行控制。从4级开始控制：超过4级阈值后，对下行入向数据进行控制。
down_out_ctrl_level|下行出向控制策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|下行出向控制策略，是指对于使用该命令的网元来说，对下行的出向数据进行控制。选项如下：不控制：不对下行出向数据进行控制。从1级开始控制：超过1级阈值后，对下行出向数据进行控制。从2级开始控制：超过2级阈值后，对下行出向数据进行控制。从3级开始控制：超过3级阈值后，对下行出向数据进行控制。从4级开始控制：超过4级阈值后，对下行出向数据进行控制。
alarm_1|1级阈值告警策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|1级阈值告警策略，表示超过1级阈值后是否采取上报告警或通知的策略，包括如下选项：无：阈值超过1级阈值后不进行告警或通知上报。告警：阈值超过1级阈值后上报告警。通知 ：阈值超过1级阈值后上报通知。
alarm_2|2级阈值告警策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|2级阈值告警策略，表示超过2级阈值且小于1级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过2级阈值后不进行告警或通知上报。告警：超过2级阈值后上报告警。通知 ：超过2级阈值后上报通知。
alarm_3|3级阈值告警策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|3级阈值告警策略，表示超过3级阈值且小于2级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过3级阈值后不进行告警或通知上报。告警：超过3级阈值后上报告警。通知 ：超过3级阈值后上报通知。
alarm_4|4级阈值告警策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|4级阈值告警策略，表示超过4级阈值且小于3级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过4级阈值后不进行告警或通知上报。告警：超过4级阈值后上报告警。通知 ：超过4级阈值后上报通知。
命令举例 
`
增加负荷控制策略配置，SC类型名称为sc-a，策略类型是SERVICE_LOAD_RATIO；1级阈值为85，2级阈值为75，3级阈值为70，4级阈值为65，上行入向控制策略为不控制，上行出向控制策略为不控制，下行入向控制策略为不控制，下行出向控制策略为不控制，1级阈值告警策略为无，2级阈值告警策略为无，3级阈值告警策略为无，4级阈值告警策略为无。
ADD LOADCTRL:SCTYPE_NAME="sc-a",POLICY_TYPE="SERVICE_LOAD_RATIO",THRESHOLD_1=85,THRESHOLD_2=75,THRESHOLD_3=70,THRESHOLD_4=65,UP_IN_CTRL_LEVEL="NOT_CTRL",UP_OUT_CTRL_LEVEL="NOT_CTRL",DOWN_IN_CTRL_LEVEL="NOT_CTRL",DOWN_OUT_CTRL_LEVEL="NOT_CTRL",ALARM_1="NONE",ALARM_2="NONE",ALARM_3="NONE",ALARM_4="NONE"
` 
### 修改负荷控制策略配置(SET LOADCTRL) 
### 修改负荷控制策略配置(SET LOADCTRL) 
功能说明 
该命令修改负荷控制策略配置，根据服务组件类型和策略类型，修改具体的策略配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
policy_type|策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-8|负荷控制策略类型包含：上下文占用率数据库占用率业务负载占用率吞吐率
threshold_1|1级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 85|1级阈值，取值范围为0-100，缺省值为85。该阈值是指下限阈值，即超过该阈值会执行某些动作。
threshold_2|2级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 75|2级阈值，取值范围为0-100，缺省值为75。该阈值是指下限阈值，即超过该阈值且小于1级阈值时会执行某些动作。
threshold_3|3级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 70|3级阈值，取值范围为0-100，缺省值为70。该阈值是指下限阈值，即超过该阈值且小于2级阈值时会执行某些动作。
threshold_4|4级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 65|4级阈值，取值范围为0-100，缺省值为65。该阈值是指下限阈值，即超过该阈值且小于3级阈值时会执行某些动作。
up_in_ctrl_level|上行入向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|上行入向控制策略，是指对于使用该命令的网元来说，对上行的入向数据进行控制。选项如下：不控制：不对上行入向数据进行控制。从1级开始控制：超过1级阈值后，对上行入向数据进行控制。从2级开始控制：超过2级阈值后，对上行入向数据进行控制。从3级开始控制：超过3级阈值后，对上行入向数据进行控制。从4级开始控制：超过4级阈值后，对上行入向数据进行控制。
up_out_ctrl_level|上行出向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|上行出向控制策略，是指对于使用该命令的网元来说，对上行的出向数据进行控制。选项如下：不控制：不对上行出向数据进行控制。从1级开始控制：超过1级阈值后，对上行出向数据进行控制。从2级开始控制：超过2级阈值后，对上行出向数据进行控制。从3级开始控制：超过3级阈值后，对上行出向数据进行控制。从4级开始控制：超过4级阈值后，对上行出向数据进行控制。
down_in_ctrl_level|下行入向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|下行入向控制策略，是指对于使用该命令的网元来说，对下行的入向数据进行控制。选项如下：不控制：不对下行入向数据进行控制。从1级开始控制：超过1级阈值后，对下行入向数据进行控制。从2级开始控制：超过2级阈值后，对下行入向数据进行控制。从3级开始控制：超过3级阈值后，对下行入向数据进行控制。从4级开始控制：超过4级阈值后，对下行入向数据进行控制。
down_out_ctrl_level|下行出向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|下行出向控制策略，是指对于使用该命令的网元来说，对下行的出向数据进行控制。选项如下：不控制：不对下行出向数据进行控制。从1级开始控制：超过1级阈值后，对下行出向数据进行控制。从2级开始控制：超过2级阈值后，对下行出向数据进行控制。从3级开始控制：超过3级阈值后，对下行出向数据进行控制。从4级开始控制：超过4级阈值后，对下行出向数据进行控制。
alarm_1|1级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|1级阈值告警策略，表示超过1级阈值后是否采取上报告警或通知的策略，包括如下选项：无：阈值超过1级阈值后不进行告警或通知上报。告警：阈值超过1级阈值后上报告警。通知 ：阈值超过1级阈值后上报通知。
alarm_2|2级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|2级阈值告警策略，表示超过2级阈值且小于1级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过2级阈值后不进行告警或通知上报。告警：超过2级阈值后上报告警。通知 ：超过2级阈值后上报通知。
alarm_3|3级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|3级阈值告警策略，表示超过3级阈值且小于2级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过3级阈值后不进行告警或通知上报。告警：超过3级阈值后上报告警。通知 ：超过3级阈值后上报通知。
alarm_4|4级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|4级阈值告警策略，表示超过4级阈值且小于3级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过4级阈值后不进行告警或通知上报。告警：超过4级阈值后上报告警。通知 ：超过4级阈值后上报通知。
命令举例 
`
修改负荷控制策略配置，SC类型名称为sc-a，策略类型是SERVICE_LOAD_RATIO；1级阈值为85，2级阈值为75，3级阈值为70，4级阈值为65，上行入向控制策略为不控制，上行出向控制策略为不控制，下行入向控制策略为不控制，下行出向控制策略为不控制，1级阈值告警策略为无，2级阈值告警策略为无，3级阈值告警策略为无，4级阈值告警策略为无。
SET LOADCTRL:SCTYPE_NAME="sc-a",POLICY_TYPE="SERVICE_LOAD_RATIO",THRESHOLD_1=85,THRESHOLD_2=75,THRESHOLD_3=70,THRESHOLD_4=65,UP_IN_CTRL_LEVEL="NOT_CTRL",UP_OUT_CTRL_LEVEL="NOT_CTRL",DOWN_IN_CTRL_LEVEL="NOT_CTRL",DOWN_OUT_CTRL_LEVEL="NOT_CTRL",ALARM_1="NONE",ALARM_2="NONE",ALARM_3="NONE",ALARM_4="NONE"
` 
### 查询负荷控制策略配置(SHOW LOADCTRL) 
### 查询负荷控制策略配置(SHOW LOADCTRL) 
功能说明 
该命令用于查询负荷控制策略配置，可以查询特定服务组件类型或策略类型的负荷控制策略配置，也可以查询所以的负荷控制策略配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
policy_type|策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-8|负荷控制策略类型包含：上下文占用率数据库占用率业务负载占用率吞吐率
输出参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
policy_type|策略类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-8|负荷控制策略类型包含：上下文占用率数据库占用率业务负载占用率吞吐率
threshold_1|1级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 85|1级阈值，取值范围为0-100，缺省值为85。该阈值是指下限阈值，即超过该阈值会执行某些动作。
threshold_2|2级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 75|2级阈值，取值范围为0-100，缺省值为75。该阈值是指下限阈值，即超过该阈值且小于1级阈值时会执行某些动作。
threshold_3|3级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 70|3级阈值，取值范围为0-100，缺省值为70。该阈值是指下限阈值，即超过该阈值且小于2级阈值时会执行某些动作。
threshold_4|4级阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 65|4级阈值，取值范围为0-100，缺省值为65。该阈值是指下限阈值，即超过该阈值且小于3级阈值时会执行某些动作。
up_in_ctrl_level|上行入向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|上行入向控制策略，是指对于使用该命令的网元来说，对上行的入向数据进行控制。选项如下：不控制：不对上行入向数据进行控制。从1级开始控制：超过1级阈值后，对上行入向数据进行控制。从2级开始控制：超过2级阈值后，对上行入向数据进行控制。从3级开始控制：超过3级阈值后，对上行入向数据进行控制。从4级开始控制：超过4级阈值后，对上行入向数据进行控制。
up_out_ctrl_level|上行出向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|上行出向控制策略，是指对于使用该命令的网元来说，对上行的出向数据进行控制。选项如下：不控制：不对上行出向数据进行控制。从1级开始控制：超过1级阈值后，对上行出向数据进行控制。从2级开始控制：超过2级阈值后，对上行出向数据进行控制。从3级开始控制：超过3级阈值后，对上行出向数据进行控制。从4级开始控制：超过4级阈值后，对上行出向数据进行控制。
down_in_ctrl_level|下行入向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|下行入向控制策略，是指对于使用该命令的网元来说，对下行的入向数据进行控制。选项如下：不控制：不对下行入向数据进行控制。从1级开始控制：超过1级阈值后，对下行入向数据进行控制。从2级开始控制：超过2级阈值后，对下行入向数据进行控制。从3级开始控制：超过3级阈值后，对下行入向数据进行控制。从4级开始控制：超过4级阈值后，对下行入向数据进行控制。
down_out_ctrl_level|下行出向控制策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: START_LV2|下行出向控制策略，是指对于使用该命令的网元来说，对下行的出向数据进行控制。选项如下：不控制：不对下行出向数据进行控制。从1级开始控制：超过1级阈值后，对下行出向数据进行控制。从2级开始控制：超过2级阈值后，对下行出向数据进行控制。从3级开始控制：超过3级阈值后，对下行出向数据进行控制。从4级开始控制：超过4级阈值后，对下行出向数据进行控制。
alarm_1|1级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|1级阈值告警策略，表示超过1级阈值后是否采取上报告警或通知的策略，包括如下选项：无：超过1级阈值后不进行告警或通知上报。告警：超过1级阈值后上报告警。通知 ：超过1级阈值后上报通知。
alarm_2|2级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|2级阈值告警策略，表示超过2级阈值且小于1级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过2级阈值后不进行告警或通知上报。告警：超过2级阈值后上报告警。通知 ：超过2级阈值后上报通知。
alarm_3|3级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|3级阈值告警策略，表示超过3级阈值且小于2级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过3级阈值后不进行告警或通知上报。告警：超过3级阈值后上报告警。通知 ：超过3级阈值后上报通知。
alarm_4|4级阈值告警策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: NONE|4级阈值告警策略，表示超过4级阈值且小于3级阈值时是否采取上报告警或通知的策略，包括如下选项：无：超过4级阈值后不进行告警或通知上报。告警：超过4级阈值后上报告警。通知： 超过4级阈值后上报通知。
命令举例 
`
显示负荷控制策略配置，SC类型名称为sc-a，策略类型是SERVICE_LOAD_RATIO。
SHOW LOADCTRL:SCTYPE_NAME="sc-a",POLICY_TYPE="SERVICE_LOAD_RATIO"
(No.8) : SHOW LOADCTRL:SCTYPE_NAME="sc-a",POLICY_TYPE="SERVICE_LOAD_RATIO"
服务组件类型 策略类型      1级阈值 2级阈值 3级阈值 4级阈值 上行入向控制策略 上行出向控制策略 下行入向控制策略 下行出向控制策略 1级阈值告警策略 2级阈值告警策略 3级阈值告警策略 4级阈值告警策略
sc-a       业务负载占用率   85      75     70      65       不控制        不控制          不控制               不控制           无            无             无          无
记录数：1
执行成功耗时: 0.191 秒
` 
### 删除负荷控制策略配置(DEL LOADCTRL) 
### 删除负荷控制策略配置(DEL LOADCTRL) 
功能说明 
该命令用于删除负荷控制策略配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
sctype_name|服务组件类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64默认值: DEFAULT_CONFIG|该参数表示SC类型名称。该参数可以通过SHOW SCTYPE命令进行查询。DEFAULT_CONFIG为默认配置，表示当没有指定SC类型时，该配置适用于所有SC类型。
policy_type|策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-8|负荷控制策略类型包含：上下文占用率数据库占用率业务负载占用率吞吐率
命令举例 
`
删除负荷控制策略配置，SC类型名称为sc-a，策略类型是SERVICE_LOAD_RATIO。
DEL LOADCTRL:SCTYPE_NAME="sc-a",POLICY_TYPE="SERVICE_LOAD_RATIO"
` 
# 版本管理 
# 版本管理 
背景知识 
通过版本管理，可以加载、生效版本包及热补丁包，查看网元版本包、网元补丁包，查看版本包的版本信息、状态、激活时间等信息，以及进行网元版本包备份，版本包下载、激活等流程。 
功能说明 
该节点下的命令用于配置和查询TMSP微服务平台中与版本包、补丁包及镜像相关的内容，包括如下分类： 
 
版本包管理 
 
补丁包管理 
 
镜像管理 
 
安全补丁管理 
 
子主题： 
## 版本包管理 
## 版本包管理 
背景知识 
版本包管理负责整个系统的软件版本的管理，包括各软件版本信息的查询、获取和软件版本的加载、生效、删除等操作。 
功能说明 
版本包管理主要用于完成版本包的加载、生效、删除以及版本信息的查询等相关功能。 
版本包管理中需要注意： 
 
当前正在运行的版本信息指通过ACTIVATE PKG命令激活的版本，或在MANO上进行实例化操作和升级操作使用的版本。 
 
当前系统增加的版本包，是通过两种方式添加的：包括通过ADD PKG命令添加，以及升级工具中添加的版本包。 
 
执行ACTIVATE PKG命令激活版本之前，需先执行SHOW PKG命令查看已添加的版本包，获取版本包的序列号信息。 
 
执行ACTIVATE PKG命令进行激活操作之后可以通过SHOW PKG命令检查激活操作是否成功。 
 
执行DEL PKG命令删除版本包之前，请执行SHOW PKG命令查看版本包状态，确认此版本包处于去激活状态。 
 
子主题： 
### 加载版本包(ADD PKG) 
### 加载版本包(ADD PKG) 
功能说明 
该命令用于?版本服务器上的版本包加载到OMU（Operation & Management Unit，操作管理单元）虚机的特定目录。 
当需要新增NF/NFS/NFSPATCH类型版本包时，使用该命令。 
该命令执行完成后，可以通过[SHOW PKG]命令查询对应版本包是否存在，来确认加载操作是否成功。 
注意事项 
 
加载前，需要把待加载版本包上传到版本服务器上。  
 
该命令是否执行完成，需要在操作记录页面中查看。 
 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PKGNAME|版本包名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于配置待加载的版本包名称。
PKGPATH|版本包的FTP路径|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于配置待加载的版本包所在的版本服务器的存放路径。支持两种方式从版本服务器上下载，包括FTP和SFTP，为满足安全下载要求建议使用SFTP方式。存放路径必须设置为具体文件的存放路径。例如：sftp://192.168.254.254:22/root/vnfp32/version。
USER|用户名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于配置登录版本服务器使用的用户名。此参数是在版本服务器端配置的。
PASSWORD|密码|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于配置登录版本服务器使用的密码。此参数是在版本服务器端配置的。
命令举例 
`
IAAS环境中：
添加版本包，版本包名称为"CommonS_IPS.zip"，版本包的FTP路径为"sftp://[1025:0:4:1::6001]:22/home/admin"，登录FTP服务器的用户名"admin"，登录FTP服务器的密码"***"。
ADD PKG:PKGNAME="CommonS_IPS.zip",PKGPATH="sftp://[1025:0:4:1::6001]:22/home/admin",USER="admin",PASSWORD="***"
CAAS环境中：
添加版本包，版本包名称为"CommonS_IPS"，版本包的FTP路径为"sftp://[1025:0:4:1::6001]:22/home/admin/CommonS_IPS"，登录FTP服务器的用户名"admin"，登录FTP服务器的密码"***"。
ADD PKG:PKGNAME="CommonS_IPS",PKGPATH="sftp://[1025:0:4:1::6001]:22/home/admin/CommonS_IPS",USER="admin",PASSWORD="***"
` 
### 激活版本包(ACTIVATE PKG) 
### 激活版本包(ACTIVATE PKG) 
功能说明 
该命令用于激活版本包。 
当需要更换当前NF（Network Function，网络功能）的运行版本时，使用该命令。 
通过ADD PKG命令加载版本包后，对于VNF版本包或是NFS版本包，可以通过本命令激活版本包，更新NF的运行版本。 
 
通过ADD PKG命令加载版本包后，对于NFS补丁包（业务容器镜像版本包），可以通过本命令激活版本包，更新NF中容器的运行版本，IAAS环境中，也可以只激活，即只更新数据库中记录，不实际生效版本，再通过ENABLE VERSION命令更新某类容器的运行版本，或通过REDEPLOY VRU命令更新某个容器的运行版本。 
 
IAAS环境中，执行激活操作之后可以通过[SHOW VRU]/[SHOW VERSION DETAIL]命令确认激活操作是否成功。
CAAS环境中，执行激活操作之后可以通过[SHOW WORKLOAD]命令确认激活操作是否成功。
注意事项 
“是否立即生效”只对IAAS环境中NFS补丁包升级时有效。 
“升级模式”对NFS补丁包无效。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VNFINSTNAME|VNF实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要更新运行版本的VNF（Virtualized Network Function，虚拟化网络功能）的实例名称。可以通过SHOW VNF查看VNF实例名称。
NFSINSTANCESEQNUM|NFS实例号|参数可选性: 任选参数类型: 字符串参数范围: 0-5|该参数用于配置需要更新运行版本的NFS（Network Function Service，网络功能服务）的实例号，可通过SHOW NFS命令查看。
PKGSEQUENCE|版本包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置待激活的版本包序列号，可通过SHOW PKG命令查看具体版本包流水号。
ENABLE|是否立即生效（仅针对NFS补丁包）|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于配置待激活的NFS补丁包是否立即生效（仅在IAAS环境中有效），默认为非立即生效。对于VNF包与NFS包，该参数无效。该参数选项的含义：是：立即生效，执行完激活命令后，NF中某些容器运行NFS补丁包中版本。否：不立即生效，执行完激活命令后，数据库中记录激活的版本信息，NF中容器不会使用刚激活的版本，需要通过其他命令触发生效才能使用。针对NFS补丁包，该参数的配置原则是：如果期望激活版本包立即生效，则选择“是”，激活版本包后，通过命令SHOW PKG查看“是否激活”字段为“TRUE”，通过命令SHOW VRU查看容器“是否已生效”字段，“是”表示已生效。如果期望激活版本包不立即生效，则选择“否”，激活版本包后通过命令SHOW PKG查看“是否激活”字段为“TRUE”，通过命令SHOW VRU查看容器“是否已生效”字段，“否”表示未生效。
UPGRADEMODE|升级模式（仅针对VNF/NFS版本包）|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: CONFIGANDVERSION|该参数用于配置待激活的版本包的升级模式，默认为“升级配置和版本”。该参数对NFS补丁包升级无效。各参数选项的含义是：升级配置和版本：用户需要更新NF中配置信息与运行版本时，可以选择此选项。只升级版本：用户只需要更新NF中运行版本，不需要更新模型包等配置信息时可以选择此选项。只升级配置：用户只需要更新NF中配置信息，不需要更新运行版本时可以选择此选项。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ACT_PKG_RES|操作结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令的操作结果。结果包括：激活成功。正在执行相同的命令，请稍后再试激活超时版本包不存在实例名称或实例号错误激活失败重启虚机失败版本包已激活激活信息错误版本无需激活升级中无法激活NFS实例未部署，不能被激活
命令举例 
`
激活版本包，VNF实例名称为“AMF21”，版本包序列号为“qw1”，是否立即生效为“NO”，升级模式为“CONFIGANDVERSION”。
ACTIVATE PKG:ACTIVATE PKG:VNFINSTNAME="AMF21",PKGSEQUENCE ="qw1",ENABLE="NO",UPGRADEMODE="CONFIGANDVERSION"
` 
### 去激活NFS补丁(DEACTIVATE PKG) 
### 去激活NFS补丁(DEACTIVATE PKG) 
功能说明 
该命令用于去激活已经激活的NFS（Network Function Service，网络功能服务）补丁包。 
当升级后的NFS补丁包内版本有问题或不需要某NFS补丁包版本，需要回退到基础版本（打NFS补丁包前的运行版本）时，使用该命令。 
对NFS补丁包，可以通过本命令去激活并立即生效版本包，更新NF中容器的运行版本，IAAS环境中，也可以只去激活，再通过[ENABLE VERSION]命令更新某类容器的运行版本，或通过[REDEPLOY VRU]命令更新某个容器的运行版本。
执行去激活操作之后，通过[SHOW PKG]命令检查待去激活版本记录中“是否激活”字段为FALSE，表示去激活操作成功。
注意事项 
本命令只针对NFS补丁包有效。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSINSTANCESEQNUM|NFS实例号|参数可选性: 任选参数类型: 字符串参数范围: 0-5|该参数用于配置待去激活的NFS补丁包所属的NFS（Network Function Service，网络功能服务）实例号，可通过SHOW NFS命令查看。当需要去激活指定NFS实例的NFS补丁包时，可以配置此参数。
PKGSEQUENCE|版本包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置待去激活的NFS补丁包序列号，可通过SHOW PKG命令查看具体版本包的序列号。
ENABLE|是否立即生效|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: YES|该参数用于配置待去激活的NFS补丁包是否立即生效（仅在IAAS环境中有效），默认为立即生效。该参数选项的含义：是：立即生效，执行完去激活命令后，运行NFS补丁包中版本的容器，运行版本更新为此NFS基础版本。可通过命令SHOW PKG查看“是否激活”字段为“FALSE”，通过命令SHOW VRU查看容器“是否已生效”字段，“是”表示已生效。否：不立即生效，执行完去激活命令后，数据库中更新去激活的版本信息，可通过命令SHOW PKG查看“是否激活”字段为“FALSE”，通过命令SHOW VRU查看容器“是否已生效”字段，“否”表示未生效。NF中容器如果需要更新运行版本，可以通过一下两种方式生效版本：通过REDEPLOY VRU命令生效指定的容器；通过ENABLE VERSION命令生效版本。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DEACT_PKG_RES|操作结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令的操作结果。结果包括：去激活成功。去激活正在进行。正在执行相同的命令，请稍后再试超时版本包不存在实例标识不存在去激活失败重启虚机失败版本包未激活态解码失败版本包类型不支持NFS实例未部署，不能被去激活！
命令举例 
`
去激活版本包，版本包序列号为"2020-7-20-2-9-28-656-0"，是否立即生效为“YES”，
DEACTIVATE PKG:PKGSEQUENCE="2020-7-20-2-9-28-656-0",ENABLE="YES"
` 
### 生效版本(ENABLE VERSION) 
### 生效版本(ENABLE VERSION) 
功能说明 
该命令用于生效版本包。生效版本包就是使NF（Network Function，网络功能）中容器运行数据库中已激活但容器并未运行的新版本生效。 
当使用[ACTIVATE PKG]命令激活NFS补丁包（业务容器镜像版本包）或使用[DEACTIVATE PKG]命令去激活NFS补丁包，但NFS补丁包未立即生效时，可以使用该命令使NFS补丁包生效。
生效版本成功后，可以通过[SHOW VRU]命令查看“是否已生效”，该字段为“是”，表明新版本已生效。
注意事项 
本命令只针对NFS补丁包有效。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于指定生效版本的NFS实例的名称，可以通过SHOW NFS命令查询已存在的NFS实例名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE_VER_RES|操作结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令的操作结果。结果包括：生效成功，通过SHOW VRU命令查询确认。正在执行相同的命令，请稍后再试生效超时解码失败NFS实例名称不存在生效失败
命令举例 
`
生效版本包，“NFS类型”为"CommonS_SIG"，“ NFS实例号”为"0"。
ENABLE VERSION:NFSTYPE="CommonS_SIG",NFSINSTANCESEQNUM="0"
` 
### 删除版本包(DEL PKG) 
### 删除版本包(DEL PKG) 
功能说明 
该命令用于删除指定版本包，只有处于去激活状态的版本包才可以被删除。 
当需要删除OMU虚机上不用的指定版本包时，使用该命令。 
删除版本包成功后，可以通过[SHOW PKG]命令查看待删除的版本包已不存在。
注意事项 
执行命令之前，请执行[SHOW PKG]命令查看版本包状态，确认此版本包处于去激活状态，不能删除处于激活状态的版本包。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PKGSEQUENCE|版本包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置待删除的版本包序列号，可通过SHOW PKG命令查看具体的版本包序列号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DELRESULT|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示命令的操作结果。结果包括：成功正在执行相同的命令，请稍后再试！等待删除超时版本包不存在版本包已激活或版本所在路径使用中，不可删除删除失败版本升级中，不可删除
命令举例 
`
删除版本包，版本包序列号为“2020-5-23-16-57-43-345-1”。
DEL PKG:PKGSEQUENCE="2020-5-23-16-57-43-345-1"
` 
### 删除未使用的版本包(DEL USELESSPKG) 
### 删除未使用的版本包(DEL USELESSPKG) 
功能说明 
该命令用于删除已加载但未被激活的所有版本包，处于激活状态正在使用的版本包不能删除。 
当需要清理系统中不用的版本包时，使用该命令。 
删除成功后，可以通过[SHOW PKG]命令查看未使用版本包已经删除。
注意事项 
执行该命令前，请执行[SHOW PKG]命令查看版本包状态：
 
如果版本文件的“是否激活”字段为“FALSE”，表示此版本文件处于去激活状态，可以删除。 
 
如果版本文件的“是否激活”字段为“TRUE”，表示此版本文件已激活，正在使用，不能被删除。 
 
NF包中只要有一个文件的“是否激活”字段为“TRUE”，则这个NF包及包内文件都不会被删除。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DEL_USELESSPKG_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令的操作结果。结果包括：删除成功没有可删除版本正在执行相同的命令，请稍后再试超时版本包不存在版本包状态为激活状态，不能删除删除失败
命令举例 
`
删除已加载但未被实例关联的所有版本包。
DEL USELESSPKG
` 
### 查看运行版本(SHOW VERSION) 
### 查看运行版本(SHOW VERSION) 
功能说明 
该命令用于查询当前NF（Network Function，网络功能）正在运行的版本信息。在日常维护和版本升级，需要了解当前NF运行的版本信息时，使用该命令。当命令执行成功后，能够查询到VNF（Virtualized Network Function，虚拟化网络功能）实例名称、当前NF的版本号、版本包名称以及激活时间。 
注意事项 
该命令查询到的版本信息是当前正在运行的版本信息，并非加载版本包中的版本信息。 
 
当前正在运行的版本信息指通过ACTIVATE PKG命令激活的版本，或在MANO上进行实例化操作和升级操作使用的版本。 
 
当前系统加载的版本包，是通过两种方式添加的：包括通过ADD PKG命令添加，以及升级工具中添加的版本包。可以通过SHOW PKG查询已添加的版本包。 
 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VNFINSTNAME|VNF实例名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示VNF的名称，VNF名称是由操作员在MANO上对NF进行实例化操作时根据运营商规划定义的。例如：AMF_99_B120。
VERSIONNO|版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF的版本号。
PKGNAME|版本包名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF正在运行的版本包名称。
VERSIONACTIVATETIME|激活时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF的版本包激活时间。
命令举例 
`
查询当前NF的版本信息。
SHOW VERSION
(No.5) : SHOW VERSION
VNF实例名称      版本号                 版本包名称  激活时间           
-----------------------------------------------------------------------
wy-ddm-test-ipv4 V7.20.12.B1_2020_07_17 NF_ZIP_MAKE 2020-7-16 22:59:12 
-----------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-07-21 10:05:39 耗时: 0.221 秒
` 
### 查看运行版本详细信息(SHOW VERSION DETAIL) 
### 查看运行版本详细信息(SHOW VERSION DETAIL) 
功能说明 
该命令用于查询当前NF（Network Function，网络功能）正在运行的详细版本信息，在日常维护和版本升级，需要了解当前NF运行的详细版本信息时，使用该命令。当命令执行成功后，可以查询到当前NF及该NF中所有运行的NFS（Network Function Service，网络功能服务）的运行实例名称、版本包类型、版本号、版本包名称和版本包激活时间。 
[SHOW VERSION]命令只能查询到NF中运行的版本信息，而该命令可以查询本NF以及本NF所包括的所有NFS中运行的版本信息。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
RUNFSINSTNAME|运行实例名称|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于显示当前的NF以及该NF下运行的NFS名称。
PKGTYPE|版本包类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF的版本包类型，版本包类型包括VNF、NFS、NFSPatch。
VERSIONNO|版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF以及该NF下的NFS正在运行的版本号，当版本类型为NFSPatch时，该参数显示的是补丁包的版本号。
PKGNAME|版本包名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF以及该NF下的NFS正在运行的版本包名称。
VERSIONACTIVATETIME|激活时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF以及该NF下的NFS正在运行的版本包的激活时间。
命令举例 
`
显示版本的详细信息。
SHOW VERSION DETAIL
(No.2) : SHOW VERSION DETAIL:
运行实例名称   版本包类型 版本号                 版本包名称                   激活时间          
------------------------------------------------------------------------------------------------
pyx-m0111      VNF        V7.19.12.B3            NF_TMSP_V6_TEST              2021-1-15 9:34:13 
CommonS_TMSP_0 NFS        V7.21.10.B2_2021_01_11 CommonS_TMSP_V7.21.10.B2.set 2021-1-15 9:34:23 
CommonS_IPS_0  NFS        V7.20.13.B2_2020_11_11 CommonS_IPS_V7.20.13.B2.set  2021-1-15 9:34:23 
CommonS_OAM_0  NFS        V4.20.13.B1            CommonS_OAM_V4.20.13.B1.set  2021-1-15 9:34:23 
CommonS_SIG_0  NFS        V7.CI_2020_08_08       CommonS_SIG.set              2021-1-15 9:34:23 
------------------------------------------------------------------------------------------------
记录数：5
执行成功开始时间:2021-01-20 10:13:21 耗时: 0.773 秒
` 
### 查看版本包信息(SHOW PKG) 
### 查看版本包信息(SHOW PKG) 
功能说明 
该命令用于查询网管系统中已有的版本包信息，包括当前添加的NF（Network Function，网络功能）版本包信息、本NF包括的NFS（Network Function Service，网络功能服务）的版本包信息以及NFS补丁包（业务容器镜像版本包）信息。版本包信息包括版本包名称、版本包类型、版本号等信息。 
在通过[ADD PKG]命令加载版本包后，可以通过该命令查询对应版本包是否存在，来确认加载操作是否成功。在通过[ACTIVATE PKG]命令激活版本包、通过[DEACTIVATE PKG]命令去激活版本包操作后，可以通过该命令查询对应版本包是否已激活或者去激活，来确认操作是否成功。
注意事项 
该命令查询到的是网管系统已有的版本包信息，包括通过[ADD PKG]命令添加的版本包，升级工具中添加的版本包，以及在MANO上进行实例化操作时上传的版本包。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
PKGNAME|版本包名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前已添加的版本包名称，此处版本包指业务软件包，不包括镜像补丁包、热补丁包等。
PKGTYPE|版本包类型|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已添加的版本包类型，版本包类型包括VNF、NFS、NFSPatch。
VERSIONNO|版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已添加版本包的版本号，当版本类型为NFSPatch时，该参数显示的是补丁包的版本号。
VERSIONSIZE|版本包大小(Byte)|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已添加版本包的大小，单位为Byte。
VERSIONBUILDTIME|版本包构建时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已添加的版本包的构建时间，即该版本包的制作时间。
VERSIONADDTETIME|版本包添加时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已添加的版本包的添加时间，即该版本包上传到当前服务器的时间。
VERSIONACTIVEIND|是否激活|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示当前添加的版本包是否激活。包括两种状态：TRUE：该版本包已激活。FALSE：该版本包未激活。
PKGSEQUENCE|版本包序列号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前添加的版本包序列号，当通过ACTIVATE PKG命令激活版本包、DEACTIVATE PKG命令去激活版本包及DEL PKG命令删除版本包时，需要使用版本包序列号。
命令举例 
`
查询当前已添加的版本包信息。
SHOW PKG
(No.1) : SHOW PKG
版本包名称                              版本包类型 版本号                 版本包大小(Byte) 版本包构建时间      版本包添加时间    是否激活 版本包序列号            
------------------------------------------------------------------------------------------------------------------------------------------------------------------
NF_ZIP_MAKE                             VNF        V7.20.12.B3_2020_08_26 954584758        2019-08-06 23:15:23 2020-8-26 7:34:55 TRUE     2020-8-26-7-34-55-317-0 
CommonS_TMSP_V7.20.12.B3_2020_08_26.set NFS        V7.20.12.B3_2020_08_26 459178175        2020-08-26  6:17:38 2020-8-26 7:34:55 TRUE     2020-8-26-7-34-55-317-1 
CommonS_IPS_V7.20.12.B3_2020_08_26.set  NFS        V7.20.12.B3_2020_08_26 161665215        2020-08-26  5:00:32 2020-8-26 7:34:55 TRUE     2020-8-26-7-34-55-327-2 
CommonS_OAM_V4.20.12.B2.set             NFS        V4.20.12.B2            257945601        2020-08-01 22:46:31 2020-8-26 7:34:55 TRUE     2020-8-26-7-34-55-327-3 
CommonS_SIG_V7.CI_2020_08_26.set        NFS        V7.CI_2020_08_26       175007935        2020-08-26 07:09:49 2020-8-26 7:34:55 TRUE     2020-8-26-7-34-55-327-4 
------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：5
执行成功开始时间:2020-08-26 09:58:15 耗时: 0.248 秒
` 
### 分发版本包(DISPATCH PKG) 
### 分发版本包(DISPATCH PKG) 
功能说明 
该命令用于版本加载时?版本分发到各业务虚机。 
注意事项 
该命令仅支持VNF包版本分发。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PKGSEQUENCE|版本包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置待分发的版本包序列号，可通过SHOW PKG命令查看具体的版本包序列号。
命令举例 
`
分发版本包，版本包序列号为“2020-5-23-16-57-43-345-1”。
DISPATCH PKG:PKGSEQUENCE="2020-5-23-16-57-43-345-1"
` 
## 热补丁包管理 
## 热补丁包管理 
背景知识 
热补丁包管理提供了一种不会使设备当前正在运行的业务中断，即在不重启设备的情况下，对设备当前软件版本的缺陷进行修复的功能。一方面，软件热补丁技术提供了一种及时修正运行中系统错误的方便手段。另一方面，通过软件热补丁技术添加系统功能，可以减少整个系统版本升级次数，满足运营商不中断业务便可进行无缝升级的需求。 
功能说明 
补丁包管理主要用于完成热补丁的添加、激活、去激活、删除、验证以及查询等相关功能。 
 
通过ADD HOTPATCH命令添加热补丁文件。 
 
通过ACTIVATE HOTPATCH命令激活已添加的热补丁文件。 
 
通过DEACTIVATE HOTPATCH命令去激活热补丁文件。 
 
通过DEL HOTPATCH命令删除去激活的热补丁文件。 
 
通过VALIDATE HOTPATCH命令指定验证热补丁文件。 
 
通过SHOW HOTPATCH DETAIL命令显示热补丁版本详细信息。 
 
通过SHOW HOTPATCH RUNNING STATE命令显示已激活的热补丁版本文件运行状态。 
 
通过SHOW HOTPATCH命令查询热补丁包信息。 
 
通过DEL USELESSHOTPATCH命令自动删除去激活的热补丁包。 
 
子主题： 
### 添加热补丁(ADD HOTPATCH) 
### 添加热补丁(ADD HOTPATCH) 
功能说明 
该命令用于添加指定SFTP路径的服务器上的热补丁包加载到OMU（Operation & Management Unit，操作管理单元）虚机的特定目录。 
当需要新增HOTPACH热补丁包时，使用该命令。 
该命令执行完成后，可以通过[SHOW HOTPATCH]命令查询对应热补丁包是否存在，来确认加载操作是否成功。 
加载热补丁操作不会使设备当前正在运行的业务中断，即可以在不重启设备的情况下，对设备当前软件版本的缺陷进行修复。 
注意事项 
 
加载前，需要把待加载热补丁包上传到指定的服务器上。  
 
该命令是否执行完成，需要在操作记录页面中查看操作结果。 
 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
FTPUSER|FTP用户名|参数可选性: 必选参数类型: 字符串参数范围: 1-32|通过此SFTP用户名访问SFTP服务器。
FTPPASSWORD|FTP密码|参数可选性: 必选参数类型: 字符串参数范围: 1-128|输入和SFTP用户名对应的SFTP密码。
PATCHURL|补丁路径|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数为需加载的热补丁版本包所在的SFTP服务器的存放路径。支持两种方式从版本服务器上下载，包括FTP和SFTP，为满足安全下载要求建议使用SFTP方式。存放路径必须设置为具体文件的存放路径。例如：sftp://192.168.254.254:22/datadisk0/hotpach。
ENABLE|是否立即生效|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该加载的的热补丁版本包是否立即生效，选择立即生效则加载热补丁包后把各个补丁文件进行激活。默认为非立即生效，即只添加热补丁版本包（不激活热补丁包）。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ADD_HP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|命令操作结果，包括如下：添加成功下载失败未知错误非法参数操作超时添加补丁失败操作冲突主板添加成功，备板同步失败版本文件异常，校验失败删除补丁失败动态数据管理超时软件故障URL格式错误同一进程下已有相同版本号文件消息异常磁盘空间不足热补丁包描述文件异常包解压异常包格式异常补丁包同名无NFS类型补丁入库失败
命令举例 
`
添加热补丁包，热补丁包名称为"patch_test.zip"，热补丁包的FTP路径（包含热补丁包名）不包括SFTP用户名和SFTP密码，以sftp://开始。为："sftp://10.43.144.183:22/datadisk0/test/patch_test.zip"，登录SFTP服务器，SFTP用户和密码填写正确。
ADD HOTPATCH:FTPUSER="root",FTPPASSWORD="****",PATCHURL="sftp://10.43.144.183:22/datadisk0/test/patch_test.zip",ENABLE="YES"
` 
### 激活热补丁(ACTIVATE HOTPATCH) 
### 激活热补丁(ACTIVATE HOTPATCH) 
功能说明 
该命令用于激活已添加的热补丁包。通过[ADD HOTPATCH]命令加载热补丁包后，可以通过本命令激活热补丁包。
执行激活操作之后可以通过[SHOW HOTPATCH RUNNING STATE]命令确认激活后的热补丁是否生效。
注意事项 
如验证热补丁有效性，激活后而不实际生效热补丁包，可通过[VALIDATE HOTPATCH]命令操作指定验证热补丁。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PKGSEQUENCE|热补丁包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置待激活的热补丁包序列号，例如："2020-10-23-8-48-29-850-2"。可通过SHOW HOTPATCH命令查看热补丁包的序列号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ACT_HP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|命令操作结果，包括如下：激活成功补丁文件不存在查询服务注册信息失败无法获取通讯信息未找到相关激活实例全部失败部分成功操作冲突激活超时新函数在so文件中没有定义动态数据管理超时加载补丁文件失败被替换函数不存在符合表中无补丁函数打开补丁文件失败下载补丁文件失败补丁进程未找到补丁进程CRC错误
命令举例 
`
待激活热补丁包序号为"2020-10-23-8-48-29-850-2"的热补丁包。
ACTIVATE HOTPATCH:PKGSEQUENCE="2020-10-23-8-48-29-850-2"
` 
### 去激活热补丁(DEACTIVATE HOTPATCH) 
### 去激活热补丁(DEACTIVATE HOTPATCH) 
功能说明 
该命令用于去激活已激活的热补丁包。 
对于已通过[ACTIVATE HOTPATCH]命令加载的热补丁包，如果不再需要生效该热补丁包，可以通过本命令去激活。查看热补丁包是否已经激活过，可通过[SHOW HOTPATCH]命令查看热补丁包的状态。
执行去激活操作之后可以通过[SHOW HOTPATCH RUNNING STATE]命令查看去激活的热补丁是否不在运行列表中。
注意事项 
如验证热补丁去激活的有效性，可通过[VALIDATE HOTPATCH]命令操作指定验证去激活热补丁。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PKGSEQUENCE|热补丁包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置去激活热补丁包的序列号，例如："2020-10-23-8-48-29-850-2"。可通过SHOW HOTPATCH命令查看热补丁包的序列号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DEACT_HP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|命令操作结果，包括如下：去激活成功去激活超时操作冲突补丁包不存在
命令举例 
`
去激活热补丁包序号为"2020-10-23-8-48-29-850-2"的热补丁包。
DEACTIVATE HOTPATCH:PKGSEQUENCE="2020-10-23-8-48-29-850-2"
` 
### 删除热补丁(DEL HOTPATCH) 
### 删除热补丁(DEL HOTPATCH) 
功能说明 
该命令用于删除已去激活状态的热补丁包。当不再使用或者需要更新热补丁时， 可以执行该命令删除已添加的热补丁。 
通过[SHOW HOTPATCH]命令查看热补丁包状态。如待删除的热补丁包为未激活状态，可通过该命令删除热补丁包。
执行删除操作之后，再次通过[SHOW HOTPATCH]命令确认操作的热补丁是否已删除。
注意事项 
在删除热补丁包文件前，需要先将该热补丁包去激活。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PKGSEQUENCE|热补丁包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|待删除的热补丁包序列号，例如："2020-10-23-8-48-29-850-2"。可通过SHOW HOTPATCH命令查看热补丁包的序列号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DEL_HP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|命令操作结果，包括如下：删除成功补丁未去激活补丁不存在
命令举例 
`
删除热补丁包序号为"2020-10-23-8-48-29-850-2"的热补丁包。
DEL HOTPATCH:PKGSEQUENCE="2020-10-23-8-48-29-850-2"
` 
### 指定验证热补丁(VALIDATE HOTPATCH) 
### 指定验证热补丁(VALIDATE HOTPATCH) 
功能说明 
该命令用于指定验证激活或者去激活热补丁的有效性。在激活或者去激活补丁文件前，如果需要验证这个补丁文件是否可以有效激活或者去激活，可以执行该命令。 
执行后查看操作结果，如果操作成功，则说明补丁可有效激活或者去激活；如果操作失败，请联系中兴通讯检查制作补丁文件的正确性。 
注意事项 
该命令仅验证热补丁文件是否可激活或者去激活，不记录该热补丁信息，也不实际生效该补丁。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁版本关联的服务类型，例如：CommonS_IPS。该参数的取值可以通过SHOW HOTPATCH DETAIL命令查询获取。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁版本关联的SC（Service Component，服务组件）类型，例如：SCCU_PUB_IPS。该参数的取值可以通过SHOW HOTPATCH DETAIL命令查询获取。
SCINST|SC实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于指定验证的SC（Service Component，服务组件）实例名称，例如：vru_ips_0。
PATCHVER|补丁版本号|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于配置热补丁版本号。该参数的取值可以通过SHOW HOTPATCH DETAIL命令查询获取。
PATCHFILE|补丁文件名|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于配置热补丁版本文件名。该参数的取值可以通过SHOW HOTPATCH DETAIL命令查询获取。
ACTION|验证动作|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于配置根据操作意图选择验证动作，包括激活和去激活。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VAL_HP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|命令操作结果，包括如下：指定验证成功补丁文件不存在查询SCR失败获取平台COMMID失败指定验证全部失败指定验证部分成功DDMAPP超时
命令举例 
`
指定验证热补丁，服务类型CommonS_IPS，SC类型SC_PUB_IPS，SC实例vru_ips_forward_0，的补丁版本号为“1”的名称为"patch_test.pch"的补丁文件。（仅验证补丁文件）
VALIDATE HOTPATCH:SERVICETYPE="CommonS_IPS",SCTYPE="SC_PUB_IPS",SCINST="vru_ips_forward_0",PATCHVER="1",PATCHFILE="patch_test.pch",ACTION="ACTIVATE"
` 
### 查询热补丁版本文件信息(SHOW HOTPATCH DETAIL) 
### 查询热补丁版本文件信息(SHOW HOTPATCH DETAIL) 
功能说明 
该命令用于查询已添加的热补丁包中热补丁文件的信息。当需要获取当前版本中已添加的热补丁详细信息，可以执行该命令。通过查询可以获知某种NFS（Network Function Service，网络功能服务）或SC（Service Component，服务组件）下的热补丁版本信息，包括热补丁版本关联的服务类型、SC类型、热补丁的版本号、热补丁的文件名、热补丁版本号、构建时间、版本状态、激活时间、操作结果等信息。 
注意事项 
查询热补丁所关联的热补丁包信息，可通过[SHOW HOTPATCH]命令操作并查看结果。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁关联的NFS服务类型。设置该参数则表示查询该NFS下的热补丁版本信息，若不设置此参数则表示查询所有NFS下的热补丁版本信息。该参数的取值可以通过SHOW SERVICEINFO命令查询获取，取值为查询结果中的服务类型名称（Service Type Name）。
SCTYPE|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁关联的SC（Service Component，服务组件），即该NF下的服务组件。如果同时输入“服务类型（ Service Type）”和“SC类型（SC Type）”，则查询该NF下所属的SC的热补丁版本信息。该参数的取值可以通过SHOW SCTYPE命令查询获取。还可以通过SHOW SCINFO查看一个SC的详细信息。
PKGSEQUENCE|热补丁包序列号|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁版本包序列号，例如：2020-10-23-8-48-29-850-1 该参数的取值可以通过SHOW HOTPATCH命令查询获取。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示热补丁版本关联的NFS，例如：CommonS_IPS。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示热补丁版本关联的SC类型，例如：SCCU_PUB_IPS。
PATCHVER|补丁版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示热补丁版本号。
PATCHFILE|补丁文件名|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于显示热补丁版本文件名。
DEPVER|依赖版本号|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于显示该热补丁版本所针对的NF（Network Function，网络功能）的依赖版本号。
BUILDTIME|构建时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示热补丁版本的构建时间，即补丁制作的生成时间。该时间为热补丁版本的一个内部参数，操作员无需关注。
STATUS|版本状态|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于显示热补丁的状态，包括激活和未激活两种状态。可通过ACTIVATE HOTPATCH命令来激活处于未激活状态的热补丁。可以通过DEACTIVATE HOTPATCH命令来去激活处于激活状态的热补丁。
ACTIVETIME|激活时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示热补丁版本的激活时间，即补丁进行激活操作时间。该时间为热补丁版本的激活操作记录。
SEQUENCE|补丁文件序列号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示该热补丁包中的补丁文件的序列号。
SHOW_VERSION_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令操作结果。具体结果包括：查询成功没有补丁文件
命令举例 
`
查询添加的所有热补丁包中热补丁文件信息。
SHOW HOTPATCH DETAIL:
(No.1) : SHOW HOTPATCH DETAIL:
服务类型      SC类型    补丁版本号  补丁文件名      构建时间             版本状态  激活时间           补丁文件序号
CommonS_SIG  sc-sig-mp 6          hotnew6.pch     2020-10-22 10:32:08  Active   2020-10-23 8:48:57 2020-10-23-8-48-29-850-1 
记录数：1
操作结果
查询成功
执行成功耗时: 0.285 秒
` 
### 查询热补丁运行状态(SHOW HOTPATCH RUNNING STATE) 
### 查询热补丁运行状态(SHOW HOTPATCH RUNNING STATE) 
功能说明 
该命令用于查询当前版本中已激活的热补丁文件运行状态。当激活操作热补丁包后，可以通过执行该命令查询热补丁文件的运行状态，以确认已激活过的热补丁文件在SC容器中是否生效。通过查询可以获得包括热补丁关联的NFS（Network Function Service，网络功能服务）、SC（Service Component，服务组件）类型、SC名称、补丁版本号、补丁进程名、操作结果等信息。 
注意事项 
查询热补丁所关联的热补丁包和补丁文件信息，可通过[SHOW HOTPATCH]与[SHOW HOTPATCH DETAIL]命令操作并查看结果。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁关联的NFS。该参数的取值可以通过SHOW SERVICEINFO命令查询获取，取值为查询结果中的服务类型名称（Service Type Name）。
SCTYPE|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁关联的SC（Service Component，服务组件）类型，即该网元NF下服务组件的类型。该参数的取值可以通过SHOW SCTYPE命令查询获取。还可以通过SHOW SCINFO查看一个SC的详细信息。
SCINST|SC实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置热补丁关联的SC实例名称一个SC类型下面可能会有多个SC实例，通过SHOW SCINFO查询SC实例名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示热补丁关联的NFS。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示热补丁关联的SC（Service Component，服务组件）类型，即该网元NF下服务组件的类型。
SCINST|SC实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示热补丁关联的SC实例名称。
PATCHVER|补丁版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示运行热补丁的版本号。
PATCHFILE|补丁文件名|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于显示运行热补丁的文件名。
PATCHPROC|补丁进程名|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于显示激活生效且运行热补丁的进程名。
SHOW_RUNNING_RES|操作结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令操作结果。具体结果包括：查询成功没有运行的补丁文件查询服务注册信息失败该结果表示服务组件注册失败。无法获取通讯信息发起查询命令后，系统查询响应超时。该结果表示未获取到查询相关热补丁信息。动态数据管理超时该结果表示DDM模块响应超时。
命令举例 
`
查询服务类型CommonS_SIG，SC类型sc-sig下所有SC实例上运行的热补丁版本状态。
SHOW HOTPATCH RUNNING STATE:SERVICETYPE="CommonS_SIG",SCTYPE="sc-sig"
(No.3) : SHOW HOTPATCH RUNNING STATE:SERVICETYPE="CommonS_SIG",SCTYPE="sc-sig"
服务类型      SC类型  SC实例名称   补丁版本号    补丁文件名       补丁进程名
CommonS_SIG   sc-sig  vru-sig-0    1             patch_sig.pch    SIG_SC_X86_64_V01.01.10.exe 
CommonS_SIG   sc-sig  vru-sig-0    2             patch_sig1.pch   SIG_SC_X86_64_V01.01.10.exe    
操作结果
记录数：2
执行成功耗时: 0.495 秒
` 
### 查看热补丁包(SHOW HOTPATCH) 
### 查看热补丁包(SHOW HOTPATCH) 
功能说明 
该命令用于查询当前已添加的的热补丁包信息。当需要获取当前版本中添加的热补丁包信息时，可以执行该命令。通过查询可以获得包括版本包名称、版本包号、版本包大小、版本包添加时间、创建时间以及版本包序列号。 
注意事项 
查询热补丁包中的热补丁文件详细信息，可通过[SHOW HOTPATCH DETAIL]命令操作并查看结果。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
PKGNAME|热补丁包名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示补丁包名称，例如：ips_sig_all。
VERSIONNO|热补丁包版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前热补丁包版本号。
VERSIONSIZE|热补丁包大小(Byte)|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前热补丁包的大小。
VERSIONBUILDTIME|热补丁包构建时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前热补丁包的构建时间。
VERSIONADDTIME|热补丁包添加时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前热补丁包的添加时间。
STATUS|版本状态|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于显示当前热补丁包的状态信息。补丁已激活，状态为Active；补丁未激活，状态为：Inactive。
PKGSEQUENCE|热补丁包序列号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前热补丁包的序列号。
SHOW_PKG_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令操作结果。具体结果包括：查询成功没有补丁包
命令举例 
`
查询当前热补丁包信息。
SHOW HOTPATCH
(No.5) : SHOW HOTPATCH
热补丁包名称  热补丁包版本号 热补丁包大小(Byte) 热补丁包构建时间      热补丁包添加时间      版本状态  热补丁包序列号           
------------------------------------------------------------------------------------------------------------------------
 ips_sig_all  123           7124              2020-10-22 11:49:29  2020-10-23 08:48:29  Active   2020-10-23-8-48-29-850-0 
------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-10-21 10:05:39 耗时: 0.221 秒
` 
### 删除未使用的热补丁包(DEL USELESSHOTPATCH) 
### 删除未使用的热补丁包(DEL USELESSHOTPATCH) 
功能说明 
该命令用于删除已加载但未被激活使用的所有热补丁版本包。如热补丁包和热补丁文件过多，需要人工清理不使用的热补丁时，可以执行该命令。 
可删除通过[ADD HOTPATCH]命令添加但未激活状态的热补丁包。
可删除通过[DEACTIVATE HOTPATCH]命令去激活的热补丁版本包。
注意事项 
若热补丁版本包和热补丁文件状态为激活状态，则说明热补丁正在使用中，不能删除。 
 删除未使用热补丁包，有可能导致无法激活相关热补丁！ 
 
该命令之前执行SHOW HOTPATCH命令查看热补丁包的状态，确认此热补丁包是未激活状态，再使用该命令清除。 
 
查询补丁文件的状态，可通过SHOW HOTPATCH DETAIL命令操作确认热补丁文件为未激活状态后，才使用该命令清除。 
 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DEL_USELESSHOTPATCH_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示命令的操作结果。结果包括：正在执行相同的命令，请稍后再试！删除成功没有可删除的补丁包
命令举例 
`
删除已加载但未被激活的所有热补丁版本包。
DEL USELESSHOTPATCH
` 
## 镜像管理 
## 镜像管理 
背景知识 
OS镜像提供了应用软件的操作系统环境，一个系统是否安全、稳定直接影响到了系统的稳定性，一般情况下以下几种场景需要进行系统镜像升级： 
 
安全加固，漏洞修复。 
 
较早的版本容易存在一些安全隐患，当有安全问题时需要及时修复，避免对客户带来损失。 
 
升级业务版本：业务版本需要运行在新版本镜像中。 
 
应用软件版本的升级导致其对操作系统的基础软件包依赖增加。例如老版本的镜像不支持某应用软件的运行，当新版本的应用需要使用该软件时需要升级老版本的镜像。 
 
在MANO上对VNF进行实例化操作前，需要事先获取基础包、镜像包以及业务软件包。 
镜像补丁管理提供了系统运行虚机的镜像信息、镜像补丁查询，以及删除镜像补丁的功能。 
功能说明 
 
镜像版本是虚拟机镜像，用来创建虚拟机。在虚拟机镜像有问题或者新增特性时，需要单独升级。 
 
普通版本指的是软件版本，在虚拟机内运行。 
 
镜像补丁是指对运行的虚拟机操作系统打补丁。 
 
另外支持的热补丁是对运行的业务版本打补丁。 
 
子主题： 
### 删除已加载的镜像补丁(DEL OSPATCH) 
### 删除已加载的镜像补丁(DEL OSPATCH) 
功能说明 
小心：该命令属于危险命令。镜像补丁文件被删除后，若当前系统已升级，则不能回退被删除的镜像补丁文件，可能导致整系统升级后回退失败。 
该命令用于删除已加载、未激活的镜像补丁。 
注意事项 
使用该命令删除镜像补丁前，要确认该镜像补丁已经从虚机上卸载。通过[UNINSTALL OSPATCH]命令执行卸载镜像补丁操作时，若返回操作成功，表明已成功卸载。
通过[SHOW OSPATCH]命令查询系统中已经加载的镜像补丁信息，如果该镜像补丁没有对应的激活时间，则表明该镜像补丁可以删除。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
ID|镜像补丁ID|参数可选性: 必选参数类型: 字符串参数范围: 1-8|该参数用于配置待删除的已加载的镜像补丁ID，该参数的取值可以通过SHOW OSPATCH命令查询获取。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示删除操作的结果，结果包括：操作成功。操作失败！应答超时！补丁使用中！补丁ID不存在！
命令举例 
`
这个示例展示删除已加载的镜像补丁。
DEL OSPATCH:ID="trityqwK"
(No.1) : DEL OSPATCH:ID="trityqwK"
操作结果
------------
操作成功
100%
------------
记录数：1
执行成功  开始时间:2021-12-06 14:18:10 耗时: 0.29秒
` 
### 卸载虚机上的镜像补丁(UNINSTALL OSPATCH) 
### 卸载虚机上的镜像补丁(UNINSTALL OSPATCH) 
功能说明 
小心：该命令属于危险命令。使用该命令将影响虚机的正常运行，被操作的虚机有可能会重启，导致业务呼损。请确保已经进行业务迁移。 
该命令用于卸载虚机上的镜像补丁。 
当维护人员需要对单个虚机的镜像补丁进行卸载时，可以使用该命令进行操作。 
可以通过[SHOW OSVERSION]获取要卸载的虚机名称，镜像版本号和补丁版本号。
注意事项 
卸载镜像补丁时，只能由高版本到低版本依次卸载！跨版本卸载镜像补丁会失败。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|输入待卸载镜像补丁的虚机名称，可通过SHOW VM命令查看虚机详细信息。
IMAGEVERSION|镜像版本号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|输入待卸载的镜像版本号，可通过SHOW OSPATCH命令查看。
PATCHVERSION|补丁版本号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|输入待卸载的镜像补丁版本号，可通过SHOW OSPATCH命令查看。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示卸载镜像补丁操作的结果，结果包括：操作成功。操作失败。等VMM响应超时。虚机不存在。补丁不存在。正在处理中，请通过SHOW OSVERSION命令查询操作结果。操作的虚机未激活。镜像补丁不是最新，不允许卸载！
命令举例 
`
卸载虚机上的镜像补丁，其中虚机名称为GSU0001，镜像版本号为CGS-Linux-CORE.V5.04.F16，镜像补丁版本号为6。
UNINSTALL OSPATCH:VMNAME="GSU0001",IMAGEVERSION="CGS-Linux-CORE.V5.04.F16",PATCHVERSION="6"
` 
### 查询镜像版本(SHOW OSVERSION) 
### 查询镜像版本(SHOW OSVERSION) 
功能说明 
该命令用于显示系统运行虚机的镜像信息，包括系统当前运行的虚机名称、镜像文件名称、镜像版本以及镜像补丁列表。 
当维护人员需要查询该系统各虚机上使用的镜像信息和镜像补丁信息时，可以使用该命令。 
注意事项 
镜像版本是虚拟机镜像，用来创建虚拟机。在虚拟机镜像有问题或者新增特性时，需要单独升级。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机内部名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示当前NF运行的虚机内部名称。内部名称由三部分组成，以XGW_SMF_73-VM-STUC80001为例进行说明。第一部分为前缀，示例：XGW_SMF_73。第二部分为虚机类型，示例：-VM-STUC8。第三部分为编号，示例：0001。
IMAGENAME|镜像文件名称|参数可选性: 任选参数类型: 字符串参数范围: 0-256|该参数用于显示当前NF运行虚机的镜像文件名称。
IMAGEVER|镜像版本|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF运行虚机的镜像版本。
PATCHLIST|镜像补丁列表|参数可选性: 任选参数类型: 字符串参数范围: 0-2080|该参数用于显示当前NF运行虚机的镜像补丁列表。
命令举例 
`
这个示例显示了系统中的所有VM实例的镜像信息。
SHOW OSVERSION
No.1) : SHOW OSVERSION
虚机内部名称                  镜像文件名称                                   镜像版本                   镜像补丁列表 
---------------------------------------------------------------------------------------------------------------------
dbs_TMSP-VM-OMUC40002         CGS-Linux-CORE.V5.04.F16P5_20200606-x86_64.img CGS-Linux-CORE.V5.04.F16P5              
dbs_TMSP-VM-OMUC40001         CGS-Linux-CORE.V5.04.F16P5_20200606-x86_64.img CGS-Linux-CORE.V5.04.F16P5              
dbs_TMSP-VM-GSUCommonC2M60001 CGS-Linux-CORE.V5.04.F16P5_20200606-x86_64.img CGS-Linux-CORE.V5.04.F16P5              
dbs_TMSP-VM-OMUC20003         CGS-Linux-CORE.V5.04.F16P5_20200606-x86_64.img CGS-Linux-CORE.V5.04.F16P5              
dbs_TMSP-VM-IPUC40001         CGS-Linux-CORE.V5.04.F16P5_20200606-x86_64.img CGS-Linux-CORE.V5.04.F16P5              
dbs_TMSP-VM-IPUC40002         CGS-Linux-CORE.V5.04.F16P5_20200606-x86_64.img CGS-Linux-CORE.V5.04.F16P5              
---------------------------------------------------------------------------------------------------------------------
记录数：6
执行成功开始时间:2020-07-03 09:59:06 耗时: 0.429 秒
` 
### 查询已加载的镜像信息(SHOW OSPATCH) 
### 查询已加载的镜像信息(SHOW OSPATCH) 
功能说明 
该命令用于显示已加载的镜像信息，包括镜像ID、镜像文件名称、镜像版本号、镜像补丁版本号以及激活时间等信息。 
当需要查询系统已加载的镜像信息和镜像补丁信息时，使用此命令。 
注意事项 
镜像补丁是对运行的虚拟机操作系统打补丁。 
热补丁是对运行的业务版本打补丁。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ID|镜像ID|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示当前已加载的镜像ID，例如：trityqwK。
IMAGEFILENAME|镜像文件名称|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于显示当前已加载的镜像文件名称。
IMAGEVERSION|镜像版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前已加载的镜像版本号。
PATCHVERSION|镜像补丁版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前已加载的镜像补丁版本号。
ACTIVETIME|激活时间|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已加载的镜像补丁激活时间。若未显示激活时间，则表示该镜像未激活。
命令举例 
`
这个示例显示了当前已加载的镜像信息。
SHOW OSPATCH
(No.1) : SHOW OSPATCH:
镜像ID   镜像文件名称                                   镜像版本号                 镜像补丁版本号 激活时间 
-----------------------------------------------------------------------------------------------------------
mAhXx3lx CGS-Linux-CORE.V5.04.F16P6_20200725-x86_64.img CGS-Linux-CORE.V5.04.F16P6                         
-----------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-08-26 11:03:05 耗时: 0.185 秒
` 
## 版本选项配置 
## 版本选项配置 
背景知识 
版本加载并发数，指加载版本文件时，可以同时运行的线程个数，例如可以同时运行1个线程/2个线程/4个线程。说明：同时运行2个线程，表示同一时间内，有2个版本文件在下载。 
为满足用户对版本管理的精确控制需求，目前支持配置版本加载时的加载并发数。 
功能说明 
该功能用于配置或查询版本管理相关配置项，目前支持配置/查询版本加载并发数。 
在升级任务的添加版本操作前，维护人员可根据管理节点OMU（Operation & Management Unit，操作管理单元）上的CPU负荷情况设置版本加载并发数。 
子主题： 
### 设置版本选项配置(SET VMMOPTIONCFG) 
### 设置版本选项配置(SET VMMOPTIONCFG) 
功能说明 
该命令用于设置版本选项配置。 
升级任务包含版本添加与版本升级操作，其中版本添加耗时较长。为缩短业务升级时长，维护人员可根据管理节点OMU（Operation & Management Unit，操作管理单元）上的CPU负荷，在升级前配置网元版本加载并发数，提前创建升级任务，进行版本加载，后续在升级时间点执行升级操作，减少升级对业务影响时间。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
addpkgconcurrency|版本加载并发数|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-4默认值: TWO_THREADS|该参数用于设置版本加载并发数。取值如下：单线程：最低速度，OMU CPU负荷高（CPU负荷大于50%）时设置为该值。2线程：正常场景下OMU CPU负荷（CPU负荷小于50%且大于20%）时设置为该值。4线程：OMU CPU负荷低时（小于20%）时设置为该值。可通过SHOW VMDETAIL来查询OMU的CPU使用率。
命令举例 
`
设置版本选项配置，版本加载并发数为单线程。
SET VMMOPTIONCFG:ADDPKGCONCURRENCY="SINGLE_THREAD"
` 
### 查询版本选项配置(SHOW VMMOPTIONCFG) 
### 查询版本选项配置(SHOW VMMOPTIONCFG) 
功能说明 
该命令用于查询版本选项配置。 
在版本升级时，需要提前加载版本，可以通过该命令查询系统中配置的版本加载并发数，根据OMU CPU负荷决定是否需要修改版本加载并发数。 
可通过[SHOW VMDETAIL]命令来查询OMU的CPU使用率。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
addpkgconcurrency|版本加载并发数|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-4默认值: TWO_THREADS|该参数用于查询版本加载并发数。
命令举例 
`
查询版本加载并发数为单线程的版本选项配置。
SHOW VMMOPTIONCFG
(No.1) : SHOW VMMOPTIONCFG:
版本加载并发数
单线程
记录数：1
执行成功耗时: 0.122 秒
` 
## 安全补丁管理 
## 安全补丁管理 
背景知识 
安全补丁管理提供了查询系统运行虚机的安全加固补丁信息，以及查询系统中已加载的安全加固补丁的功能。 
功能说明 
该组命令包含如下功能： 
 
查询系统中已加载的安全加固补丁信息，包括补丁名称，大小版本号以及是否激活等信息。 
 
查询系统中运行的虚机的安全加固信息。 
 
子主题： 
### 查询已加载的安全加固包(SHOW SECURITYPATCHES) 
### 查询已加载的安全加固包(SHOW SECURITYPATCHES) 
功能说明 
该命令用于显示已加载的安全加固补丁包信息，包括安全加固补丁名称、加固补丁大版本号、加固补丁小版本号，以及是否激活等信息。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
FILENAME|补丁名称|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于显示当前已加载的安全加固补丁名称。
MAJORVERSION|大版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前已加载的安全加固补丁的大版本号，取自补丁描述文件。
MINORVERSION|小版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前已加载的安全加固补丁的小版本号，取自安全加固补丁文件名称。
ACTIVE|是否激活|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示当前已加载的安全加固补丁是否激活。
命令举例 
`
查询当前已加载的安全加固补丁包信息。
SHOW SECURITYPATCHES
(No.1) : SHOW SECURITYPATCHES:
补丁名称                                     大版本号   小版本号      是否激活 
-----------------------------------------------------------------------------------
patch_securityenhance_1_20210929_1225.tar    20211210       1225         是
patch_securityenhance_1_20210801_1001.tar    20210116       1001         否
-----------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-12-26 11:03:05 耗时: 0.185 秒
` 
### 查询虚机的加固版本信息(SHOW VM SECURITYPATCHVERSION) 
### 查询虚机的加固版本信息(SHOW VM SECURITYPATCHVERSION) 
功能说明 
该命令用于显示系统运行虚机的安全加固补丁信息，包括系统当前运行的虚机名称、安全加固补丁的大版本号以及安全加固补丁的小版本号等信息。 
注意事项 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机内部名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示当前NF运行的虚机内部名称。内部名称由三部分组成，以XGW_SMF_73-VM-STUC80001为例进行说明。第一部分为前缀，示例：XGW_SMF_73。第二部分为虚机类型，示例：-VM-STUC8。第三部分为编号，示例：0001。
MAJORVERSION|大版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF运行虚机的安全加固补丁的大版本号，取自补丁描述文件。
MINORVERSION|小版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF运行虚机的安全加固补丁的小版本号，取自安全加固补丁文件名称。
命令举例 
`
查询系统中的所有已部署VM实例的安全加固补丁信息。
SHOW VM SECURITYPATCHVERSION
（No.1) : SHOW VM SECURITYPATCHVERSION
虚机内部名称                  大版本号      小版本号                  
-------------------------------------------------------
dbs_TMSP-VM-OMUC40002          2022.1        0110 
dbs_TMSP-VM-OMUC40001          2022.1        0110
dbs_TMSP-VM-GSUCommonC2M60001  2021.12       1225
dbs_TMSP-VM-OMUC20003                    
dbs_TMSP-VM-IPUC40001          N/A            N/A            
-------------------------------------------------------
记录数：5
执行成功开始时间:2020-07-03 09:59:06 耗时: 0.429 秒
` 
# VNF管理 
# VNF管理 
背景知识 
VNF（Virtualized Network Function，虚拟化网络功能）是ETSI规范的部署对象单元。一个VNF实例（局）对应一个公司自定义的产品类型，如xGW-C、uMAC。 
VRU（Virtual Running Unit，虚拟运行单元）是业务逻辑执行的最小软件单元，以非root用户启动VRU，符合最小权限的安全要求。 
CGSL中合入开源补丁，会提升CGSL的安全性，但是安全补丁会造成OS中的资源消耗，会出现性能损耗，在某些业务场景是不能接受的，所以CGSL在提供影响性能的安全补丁的时候，都提供了关闭这些补丁的开关。 
由于gbase数据库有大量的文件读写，使用NBFS（云盘保护）导致写盘速度变慢，不能满足要求，需要支持动态关闭NBFS功能。 
SELinux(Security-Enhanced Linux)是一种基于域-类型(domain-type)模型的强制访问控制(MAC)安全系统。容器在SELinux系统下运行时，进程只能访问任务中所需要的文件，从而提升访问控制能力，提高系统安全性。 
虚拟机数据盘/datadisk0大小有限且需要存储版本信息、日志等信息，当虚拟机的数据盘大小不足以支持虚拟机存储其他用户数据时，需要对虚拟机数据盘进行扩容。扩容后，也可进行缩容操作。 
AUDIT模块是内核中的一个模块，用于记录内核的运行情况，包括系统调用、文件修改和程序的运行等。开启AUDIT服务后，运维人员可根据AUDIT的日志记录[/var/log/audit/audit.log]判断系统是否有安全漏洞，如系统是否有异常登录记录等。 
OMU虚机的CPU资源被占满之后，会导致整个系统瘫痪。设置MML命令动态地调整CPU0核是否被OMU虚机容器占用可避免此问题。 
VNF的设备形态包括IaaS，BM CaaS和VM CaaS， 运营商可以通过命令查询当前设备形态。 
功能说明 
VNF管理下的命令主用包含与VNF（系统）相关的操作，主用包括： 
 
查询、设置VNF相关参数以及导出现网服务信息文件。 
 
查询、设置系统是否以root用户启动VRUs。 
 
查询、设置系统性能配置模式。 
 
查询、设置系统是否开启NBFS功能。 
 
查询、设置系统的容器是否在SELinux系统下运行。 
 
查询虚拟机数据盘的扩容情况、通过挂载数据盘的方式对虚拟机的数据盘进行扩容以及对扩容后的虚拟机进行缩容操作，即删除额外挂载的数据盘。 
 
查询、设置系统是否开启AUDIT服务。 
 
设置、查询OMU虚机是否开始CPU0核隔离。 
 
查询VNF设备形态。 
 
查询、设置网络参数。 
 
子主题： 
## 设置VNF(SET VNF) 
## 设置VNF(SET VNF) 
功能说明 
小心：VNF的参数配置错误将导致该系统不能正常工作。因此执行该操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于配置VNF参数。 
当需要设置系统能否接入新业务及是否需要卸载旧业务时，可以使用此命令设置VNF的管理状态。 
一般地，VNF实例化后显示名称默认为其部署实例名称，位置名称默认为空，因此如有需求可以使用此命令进行重新配置。 
修改前后，可通过执行命令[SHOW VNF]查询相关参数修改前后的值。
注意事项 
当VNF管理状态为锁定或关闭中状态时，不可以使用[RESET VM]命令复位虚机。
修改VNF的显示名称成功后，需刷新EM页面。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
ADMINSTATE|管理状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于设置VNF的管理状态，分为未锁定状态和锁定状态。各参数选项的含义是：UNLOCKED（未锁定）：系统默认状态，该状态下已接入业务可以正常工作，可以接入新业务。LOCKED（锁定）：配置为此状态的系统无法正常使用，禁止接入新业务，已接入业务需进行卸载。该状态下不允许进行虚机复位操作。
LOCATIONNAME|位置名称|参数可选性: 任选参数类型: 字符串参数范围: 1-160|该参数用于设置VNF的位置名称，要求填写的格式为：大区-省份-城市。不设置则默认为空。
DISPLAYNAME|显示名称|参数可选性: 任选参数类型: 字符串参数范围: 1-160|该参数用于设置VNF的显示名称，即VNF在EM界面对外呈现的名称，默认为VNF部署实例名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！VNF不存在！参数设置失败！当前管理状态已是锁定或关闭中！当前管理状态已是未锁定！没有输入任何一个要设置的参数的值！
命令举例 
`
设置VNF的管理状态为锁定、位置名称为"XX-XX-XX"、显示名称为"vnf_0"。
SET VNF:ADMINSTATE="LOCKED",LOCATIONNAME="XX-XX-XX",DISPLAYNAME="vnf_0"
` 
## 查询VNF(SHOW VNF) 
## 查询VNF(SHOW VNF) 
功能说明 
该命令用于查询VNF信息，包括VNF部署实例名称、实例标识、产品类型、显示名称、管理状态、位置名称以及部署形态等。 
当需要查询产品相关信息或者修改VNF管理状态、位置名称、显示名称等参数时，使用此命令。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VNFINSTNAME|VNF部署实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于表示查询到的VNF部署实例名称。
NFINSTID|VNF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于表示查询到的VNF实例标识。
NETYPE|产品类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于表示查询到的VNF的产品类型，如AMF、USPP等。
DISPLAYNAME|显示名称|参数可选性: 必选参数类型: 字符串参数范围: 1-160|该参数用于表示查询到的VNF的显示名称，即VNF在EM界面对外呈现的名称，默认为VNF部署实例名称。
ADMINSTATE|管理状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于表示查询到的VNF的管理状态，分为未锁定、关闭中和锁定状态。各参数选项的含义是：未锁定：系统默认状态，该状态下已接入业务可以正常工作，可以接入新业务。关闭中：将VNF的管理状态设置为锁定后，管理状态会先转变为关闭中（中间态），此过程禁止接入新业务，正常卸载已接入业务，5分钟之后再转变为锁定。锁定：配置为此状态的系统无法正常使用，禁止接入新业务，已接入业务需进行强制卸载。当VNF管理状态为锁定或关闭中状态时，不可以使用RESET VM命令复位虚机。
LOCATIONNAME|位置名称|参数可选性: 必选参数类型: 字符串参数范围: 0-160|该参数用于表示查询到的VNF的位置信息，默认为空。
NFFORM|部署形态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示查询到的VNF的部署形态，包括虚拟和物理。
命令举例 
`
查询VNF信息。
SHOW VNF
(No.1) : SHOW VNF:
VNF部署实例名称 VNF实例标识                          产品类型 显示名称 管理状态 位置名称 部署形态
-------------------------------------------------------------------------------------------------
wjk_tmsp_test  213217b4-cd6d-11ea-a37d-0242ac110008 AMF              未锁定           虚拟
-------------------------------------------------------------------------------------------------
记录数：1
` 
## 导出VNF服务信息(EXPORT VNF SERVICES) 
## 导出VNF服务信息(EXPORT VNF SERVICES) 
功能说明 
该命令用于导出网元的服务信息文件，即导出从现网获取到的NFS版本包文件。 
当需要获取网元服务信息，例如需要使用网元服务信息进行仿真升级工作，从而确保升级的可靠性时，可以执行该命令。 
命令执行成功后，网管界面会提供URL供维护人员下载当前的NFS版本包文件。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！获取版本包信息失败！获取SFTP信息失败！SFTP信息上传至主IP地址失败！SFTP信息上传至备地址失败！
命令举例 
`
导出现网NFS版本包文件。
EXPORT VNF SERVICES
` 
## 查询是否以root用户启动VRUs(SHOW RUNASROOT) 
## 查询是否以root用户启动VRUs(SHOW RUNASROOT) 
功能说明 
该命令用于查询是否以root用户启动VRUs。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于查询是否以root用户启动VRUs。是：以root用户启动VRUs。否：以非root用户启动VRUs。
命令举例 
`
查询是否以root用户启动VRUs。
SHOW RUNASROOT
(No.1) : SHOW RUNASROOT:
是否启用         
---------
是                 
---------
记录数：1
` 
## 设置是否以root用户启动VRUs(SET RUNASROOT) 
## 设置是否以root用户启动VRUs(SET RUNASROOT) 
功能说明 
该命令用于设置是否以root用户启动VRUs。 
当需要修改以root用户或非root用户启动VRUs时，使用该命令。 
该命令的配置结果可以通过[SHOW RUNASROOT]命令进行查询。
注意事项 
该命令仅支持P7及以上镜像版本。查看虚机镜像版本方法：SSH连接虚机之后，在root目录下执行指令cat /V6-cgsl-release。 
该命令正在执行中时，为防止命令冲突导致执行失败，请勿执行命令[SET SELINUX]。
包含TMSP的版本升级中请勿执行该命令。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-127默认值: YES|该参数用于设置是否以root用户启动VRUs。是：设置以root用户启动VRUs。否：设置以非root用户启动VRUs。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数表示命令的执行结果。数据修改成功，请重启系统！数据修改成功，即将重启系统，请稍后查询启动结果！正在执行相同的命令，请稍后再试！配置未变化，操作已忽略！等待VMM应答超时！其他！配置未变化，操作已忽略！
命令举例 
`
设置以root用户启动VRUs。
SET RUNASROOT:ENABLE="YES"
` 
## 查询系统性能配置模式(SHOW PERFORMANCE PARAMETER) 
## 查询系统性能配置模式(SHOW PERFORMANCE PARAMETER) 
功能说明 
该命令用于查询系统性能配置模式，包括默认模式、普通模式和增强模式。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MODE|配置模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DEFAULT_MODE|该参数用于设置系统性能配置模式。CGSL中合入开源补丁，会提升CGSL的安全性，但是安全补丁会造成OS中的资源消耗，会出现性能损耗，在某些业务场景是不能接受的，所以CGSL在提供影响性能的安全补丁的时候，都提供了关闭这些补丁的开关。默认模式：非OMU虚拟机上关闭安全补丁。普通模式：所有虚拟机都不关闭安全补丁。增强模式：所有虚拟机都关闭安全补丁。
命令举例 
`
查询系统性能配置模式。
SHOW PERFORMANCE PARAMETER
(No.1) : SHOW PERFORMANCE PARAMETER:
配置模式 
---------
默认模式 
---------
记录数：1
` 
## 设置系统性能配置模式(SET PERFORMANCE PARAMETER) 
## 设置系统性能配置模式(SET PERFORMANCE PARAMETER) 
功能说明 
该命令用于设置系统性能配置模式，包括默认模式、普通模式和增强模式。 
该命令的配置结果可以通过[SHOW PERFORMANCE PARAMETER]命令进行查询。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
MODE|配置模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: DEFAULT_MODE|该参数用于设置系统性能配置模式。CGSL中合入开源补丁，会提升CGSL的安全性，但是安全补丁会造成OS中的资源消耗，会出现性能损耗，在某些业务场景是不能接受的，所以CGSL在提供影响性能的安全补丁的时候，都提供了关闭这些补丁的开关。默认模式：非OMU虚拟机上关闭安全补丁。普通模式：所有虚拟机都不关闭安全补丁。增强模式：所有虚拟机都关闭安全补丁。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数表示命令的执行结果。操作成功。正在执行相同的命令，请稍后再试！超时！VMM返回失败！配置没有发生变化！该命令只支持IAAS环境！
命令举例 
`
设置系统性能配置模式为默认模式。
SET PERFORMANCE PARAMETER:MODE="DEFAULT_MODE"
` 
## 设置NBFS(SET NBFS) 
## 设置NBFS(SET NBFS) 
功能说明 
该命令用于设置磁盘是否开启NBFS（Non-Blocking File System，非阻塞文件系统）保护以保障数据的读写速度，包括全部启用NBFS、全部禁用NBFS和仅DISK0启用NBFS三种模式。 
当根据业务需求修改参数后，需要重启改配虚机类型的虚拟机才可生效；或者多次配置不同的虚机机类型，整局重启一次后才可生效。 
修改后，可通过执行命令[SHOW NBFS]查询相关参数的设置。
注意事项 
 
VNFD（Virtual  Network Function Description，虚拟化网络功能描述符）更新虚机，通过SCALE UP修改虚机使用的template id后，仅对CPU/MEM进行更新。磁盘相关信息（磁盘个数，磁盘的NBFS属性）仍使用实例化时info中的template id所对应的配置。 
 
VNFD添加磁盘，新增的磁盘其NBFS属性与该虚机引用的template中最后一块磁盘的属性相同。 
 
系统盘不支持该配置。 
 
本地盘设置无效。 
 
该配置仅支持虚机镜像P8及以上版本。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMTYPE|虚拟机类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于设置NF中虚拟机的类型，可通过SHOW VM命令查看。
MODE|配置模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于指定配置模式，即是否开启NBFS保护:ALL_ENABLE_NBFS（全部启用NBFS）：所有挂载的数据盘都启动NBFS保护。ALL_DISABLE_NBFS（全部禁用NBFS）：所有挂载的数据盘都取消NBFS保护。DISK0_ENABLE_NBFS（仅DISK0启用NBFS）：仅/datadisk0启用NBFS保护，其他数据盘取消NBFS保护。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示操作结果：操作成功。配置没有发生变化！正在执行相同的命令，请稍后再试！超时！其他！不支持此操作！输入的虚拟机类型不存在！
命令举例 
`
设置NBFS的虚机类型为“GSU”、配置模式为全部启用NBFS。
SET NBFS:VMTYPE="GSU",MODE="ALL_ENABLE_NBFS"
` 
## 查询NBFS配置(SHOW NBFS) 
## 查询NBFS配置(SHOW NBFS) 
功能说明 
该命令用于查询虚拟机的NBFS配置，即网元中所有的虚拟机类型是否开启NBFS保护。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMTYPE|虚拟机类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的虚拟机类型。
MODE|配置模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于表示查询到的虚拟机类型的NBFS配置模式，即是否开启NBFS保护。全部启用NBFS：所有挂载的数据盘都启动NBFS保护。全部禁用NBFS：所有挂载的数据盘都取消NBFS保护。仅DISK0启用NBFS：仅/datadisk0启用NBFS保护，其他数据盘取消NBFS保护。
命令举例 
`
查询虚拟机的NBFS配置模式。
SHOW NBFS
(No.3) : SHOW NBFS:
虚拟机类型 配置模式 
--------------------------
GSU       仅DISK0启用NBFS 
IPU       全部禁用NBFS 
OMU       全部启用NBFS 
--------------------------
记录数：3
` 
## 设置SELinux(SET SELINUX) 
## 设置SELinux(SET SELINUX) 
功能说明 
该命令用于设置容器是否在SELinux系统下运行。 
本命令要求镜像版本必须为p9或以上版本。 
SELinux(Security-Enhanced Linux)是一种基于域-类型(domain-type)模型的强制访问控制(MAC)安全系统。容器在SELinux系统下运行时，进程只能访问任务中所需要的文件，从而提高系统安全性。 
该命令的配置结果可以通过[SHOW SELINUX]命令进行查询。
注意事项 
该命令仅支持P9及以上镜像版本。查看虚机镜像版本方法：SSH连接虚机之后，在root目录下执行指令cat /V6-cgsl-release。 
该命令正在执行中时，为防止命令冲突导致执行失败，请勿执行命令[SET RUNASROOT]。
包含TMSP的版本升级中请勿执行该命令。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-127默认值: YES|该参数用于设置容器是否在SELinux系统下运行。是：容器在SELinux系统下运行，进程只能访问任务中所需要的文件，从而提高系统安全性。否：容器不在SELinux系统下运行。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数表示命令的执行结果。数据修改成功，请重启系统！正在执行相同的命令，请稍后再试！配置未变化，操作已忽略！等待VMM应答超时！其他！VMM操作失败！OMU虚机状态错误！不支持此操作！
命令举例 
`
设置启用SELinux功能。
SET SELINUX:ENABLE="YES"
` 
## 查询是否启动SELinux功能(SHOW SELINUX) 
## 查询是否启动SELinux功能(SHOW SELINUX) 
功能说明 
该命令用于查询容器是否配置为在SELinux系统下运行。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于显示SELinux功能是否启用。是：容器在SELinux系统下运行，进程只能访问任务中所需要的文件，从而提高系统安全性。否：容器不在SELinux系统下运行。
命令举例 
`
查询是否启用SELinux功能。
SHOW SELINUX
(No.1) : SHOW SELINUX:
是否启用         
---------
是                 
---------
记录数：1
` 
## 扩容数据盘(EXTEND DISK) 
## 扩容数据盘(EXTEND DISK) 
功能说明 
由于虚拟机数据盘/datadisk0大小有限且需要存储版本、日志和其他信息，因此当需要为虚拟机数据盘进行扩容时，可以通过该命令为虚拟机额外挂载一个数据盘。 
扩容后，可通过执行命令[SHOW EXTEND DISK]查询扩容的数据盘。
注意事项 
 
扩容命令执行成功后，需要重启虚拟机，扩容才能生效。 
 
进行虚机数据盘扩容时，待扩容的虚机名称为SHOW VM命令中呈现的虚机名称。 
 
每个虚拟机只支持挂载一个数据盘进行扩容，挂载的数据盘名称信息需要通过ssh方式登录虚拟机，并使用fdisk -l命令获取。 
 
该命令仅支持P9及以上镜像版本。查看虚机镜像版本方法：SSH连接虚机之后，在root目录下执行指令cat /V6-cgsl-release。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚拟机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于设置需要进行扩容的虚拟机的名称，可通过SHOW VM命令查看。
DISK|磁盘名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于指定为虚拟机扩容的数据盘名称。获取数据盘名称需要通过ssh方式登录虚拟机，并使用fdisk -l命令获取。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示操作结果：操作成功。虚机已配置！正在执行相同的命令，请稍后再试！超时！前台不支持！该命令只支持IAAS环境！输入的虚拟机名称不存在！其他！
命令举例 
`
为"GSU0001"的虚机扩充名称为"/dev/vdd"的数据盘。
EXTEND DISK:VMNAME="GSU0001",DISK="/dev/vdd"
` 
## 查询扩容数据盘(SHOW EXTEND DISK) 
## 查询扩容数据盘(SHOW EXTEND DISK) 
功能说明 
该命令用于查询虚拟机的数据盘扩容信息，即网元中有哪些虚拟机进行了扩容以及扩容的数据盘信息。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚拟机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的已扩容的虚拟机名称。
DISK|磁盘名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示虚拟机扩容后挂载的数据盘名称。
命令举例 
`
查询虚拟机的数据盘扩容信息。
SHOW EXTEND DISK
(No.3)：SHOW EXTEND DISK:
虚拟机名称 磁盘名称 
---------------------
GSU40001   /dev/vda 
IPU40002   /dev/vdb 
IPU40003   /dev/vdc
---------------------
记录数：3
` 
## 缩容数据盘(SHRINK DISK) 
## 缩容数据盘(SHRINK DISK) 
功能说明 
虚拟机数据盘通过命令[EXTEND DISK]命令进行数据盘扩容（即为虚拟机额外挂载一个数据盘）后，可通过执行本命令回退到扩容前的状态（即删除额外挂载的数据盘）。
执行回退操作（即对虚拟机数据盘进行缩容操作）后，可通过执行命令[SHOW EXTEND DISK]查询缩容后的数据盘状态。
注意事项 
 
缩容命令执行成功后，会自动重启虚拟机。 
 
进行虚机数据盘缩容操作前，可通过SHOW EXTEND DISK命令查看待缩容的虚拟机名称和数据盘信息。 
 
该命令仅支持P9及以上镜像版本。查看虚机镜像版本方法：SSH连接虚机之后，在root目录下执行指令cat /V6-cgsl-release。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚拟机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于设置需要进行缩容的虚拟机的名称，该名称可通过SHOW EXTEND DISK命令查看。
DISK|磁盘名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于指定需要删除的虚拟机数据盘名称，该名称可通过SHOW EXTEND DISK命令查看。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！输入的磁盘名称不存在！该命令只支持IAAS环境！输入的虚拟机名称不存在或尚未进行扩容数据盘操作！其他！不能操作当前虚拟机，需要主备倒换！无数据盘扩容记录！
命令举例 
`
对名称为"OMU0001"的虚机进行缩容操作，缩容的数据盘名称为"/dev/vdd"。
SHRINK DISK:VMNAME="OMU0001",DISK="/dev/vdd"
` 
## 修改AUDIT配置(SET AUDIT) 
## 修改AUDIT配置(SET AUDIT) 
功能说明 
AUDIT，即内核审计服务。AUDIT模块是内核中的一个模块，用于记录内核的运行情况，包括系统调用、文件修改和程序的运行等。 
该命令用于开启或者关闭AUDIT服务。当需要追踪内核运行记录时，开启AUDIT服务。开启AUDIT服务后，运维人员可根据AUDIT的日志记录[/var/log/audit/audit.log]判断系统是否有安全漏洞，如系统是否有异常登录记录等。 
修改后，可通过执行命令[SHOW AUDIT]查询相关参数的设置。
注意事项 
 
虚机镜像补丁P9[CGS-Linux-CORE.V5.04.F16P9]发布后，AUDIT服务是默认关闭的，网元根据需要通过该命令决定是否开启或者关闭AUDIT服务。 
 
该命令仅支持OMU虚机开启或者关闭AUDIT服务。 
 
该命令仅支持P9及以上镜像版本。查看虚机镜像版本方法：SSH连接虚机之后，在root目录下执行指令cat /V6-cgsl-release。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
MODE|配置开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于配置AUDIT服务开关，即是否开启AUDIT服务。ENABLE_AUDIT：开启AUDIT。DISABLE_AUDIT：关闭AUDIT。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示操作结果：操作成功。配置没有发生变化！正在执行相同的命令，请稍后再试！超时！不支持此操作！该命令只支持IAAS环境！其他！
命令举例 
`
开启AUDIT服务。
SET AUDIT:MODE="ENABLE_AUDIT"
` 
## 查询AUDIT配置(SHOW AUDIT) 
## 查询AUDIT配置(SHOW AUDIT) 
功能说明 
该命令用于查询OMU虚拟机的AUDIT服务开关状态。当需要查看OMU虚机的AUDIT服务为开启还是关闭状态时，可以执行该命令。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MODE|配置开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: 2|该参数用于表示查询到的OMU虚拟机的AUDIT服务的开关状态。开启AUDIT：表示开启AUDIT服务。关闭AUDIT：表示关闭AUDIT服务。用户未配置：表示用户未通过命令SET AUDIT进行过AUDIT配置。
命令举例 
`
查询虚拟机的AUDIT服务开关状态。
SHOW AUDIT
(No.1) : SHOW AUDIT:
配置开关
----------
开启AUDIT
----------
记录数：1
` 
## 设置CPU0核隔离(SET EXCLUDED CPU0) 
## 设置CPU0核隔离(SET EXCLUDED CPU0) 
功能说明 
该命令用于设置OMU上容器部署时是否需要排除OMU虚拟机的0核。 
该命令执行成功后，OMU虚拟机会根据用户配置模式决定是否启用0核隔离。通过[SHOW EXCLUDED CPU0]命令可以查看配置详情。
注意事项 
该配置仅对OMU虚拟机生效。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
MODE|配置开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于设置是否开启OMU虚拟机CPU0核隔离。DISABLE_EXCLUDE_CPU0：关闭CPU0核隔离，即OMU虚拟机在容器部署计算资源时0核可能会被占用。ENABLE_EXCLUDE_CPU0：开启CPU0核隔离，即OMU虚拟机在容器部署计算资源时0核不会被占用。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示操作结果：操作成功。配置没有发生变化！正在执行相同的命令，请稍后再试！超时！不支持此操作！该命令只支持IAAS环境！其他！
命令举例 
`
开启CPU0核隔离。
SET EXCLUDED CPU0:MODE="ENABLE_EXCLUDE_CPU0"
` 
## 查询CPU0核隔离(SHOW EXCLUDED CPU0) 
## 查询CPU0核隔离(SHOW EXCLUDED CPU0) 
功能说明 
该命令用于查询OMU虚拟机是否开启CPU0核隔离，即OMU虚拟机的0核在部署容器时是否会被占用。 
注意事项 
该命令仅呈现用户配置的模式，不支持显示实际运行的模式。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MODE|配置开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于查询是否OMU虚拟机开启CPU0核隔离。开启CPU0核隔离，即OMU虚拟机的0核在容器部署时不会被占用。关闭CPU0核隔离，即OMU虚拟机的0核在容器部署时可能会被占用。用户未配置：表示用户未通过命令SET EXCLUDED CPU0进行过CPU0核隔离配置。
命令举例 
`
查询CPU0核隔离开关状态。
SHOW EXCLUDED CPU0
(No.1) : SHOW EXCLUDED CPU0:
配置开关
----------
开启CPU0隔离
----------
记录数：1
` 
## 设置网络参数(SET NETWORK PARAMETER) 
## 设置网络参数(SET NETWORK PARAMETER) 
功能说明 
Bond是将多块网卡虚拟成为一块网卡的技术，通过Bond技术让多块网卡具有相同的IP地址，并对外呈现出一个单独的以太网接口设备。Linux Bond有两种典型的模式：主备和负载均衡。该命令用于设置Linux Bond主备模式下primary_reselect参数，该参数用于设置网口绑定模式主次选择策略。 
当需要修改Linux Bond主备模式的primary_reselect参数时，使用该命令。 
执行该命令前后，可以通过[SHOW NETWORK PARAMETER]命令查询修改前后的配置信息。
注意事项 
无 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
BOND_PRIMARY_RESELECT|网口绑定模式主次选择策略|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于设置Linux Bond主备模式的primary_reselect参数，该参数有如下三种绑定模式主次选择策略可供设置。当网口恢复时主动切回：首选设备总是转变为活动设备。当网口性能更优时切回：首选设备的速率和双工参数要优于当前的活动设备时，首选设备转变为活动设备。当网口故障时切回：仅在当前活动设备失效时，首选设备转变为活动设备。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功正在执行相同的命令，请稍后再试！操作失败，前台不支持。操作超时！操作失败，其他失败。操作失败，配置没有发生变化！
命令举例 
`
修改网口绑定模式主次选择策略为当网口恢复时主动切回。
SET NETWORK PARAMETER:BOND_PRIMARY_RESELECT="RESELECT_BACK_BETTER"
操作结果 
---------
操作成功 
---------
记录数：1
` 
## 查询网络参数(SHOW NETWORK PARAMETER) 
## 查询网络参数(SHOW NETWORK PARAMETER) 
功能说明 
Bond是将多块网卡虚拟成为一块网卡的技术，通过Bond技术让多块网卡具有相同的IP地址，并对外呈现出一个单独的以太网接口设备。Linux Bond有两种典型的模式：主备和负载均衡。该命令用于查询Linux Bond主备模式下primary_reselect参数信息。 
当需要对网络参数配置信息进行修改时，可以使用该命令查询当前以及修改之后的配置信息。 
注意事项 
该命令仅呈现用户配置的模式，不支持显示实际运行的模式。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
BOND_PRIMARY_RESELECT|网口绑定模式主次选择策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于设置设置Linux Bond主备模式的primary_reselect参数，该参数有如下三种绑定模式主次选择策略。当网口恢复时主动切回：首选设备总是转变为活动设备。当网口性能更优时切回：首选设备的速率和双工参数要优于当前的活动设备。当网口故障时切回:仅在当前活动设备失效时，首选设备转变为活动设备。
命令举例 
`
查询网口绑定模式主次选择策略的配置信息。
SHOW NETWORK PARAMETER 
(No.1) : SHOW NETWORK PARAMETER
操作维护       网口绑定模式主次选择策略 
----------------------------------------
修改           当网口性能更优时切回     
----------------------------------------
记录数：1
` 
## 查询设备形态(QUERY EQUIPFORM) 
## 查询设备形态(QUERY EQUIPFORM) 
功能说明 
该命令用于查询VNF设备形态，方便操作人员获取相关信息。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
EQUIPFORM|设备形态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于表示查询到的VNF设备形态，包括如下结果。IaaS裸机CaaS虚机CaaS
命令举例 
`
查询VNF设备形态。
QUERY EQUIPFORM
(No.1) : QUERY EQUIPFORM:
设备形态
----------
IaaS
----------
记录数：1
` 
# NF管理 
# NF管理 
背景知识 
NF（Network Function，网络功能）是5G标准定义的网络功能，通常是协议规范规定的网元类型，如PGW-C、SGW-C。 
VNF（Virtualized Network Function，虚拟化网络功能）是ETSI规范的部署对象单元。一个VNF实例（局）对应一个公司自定义的产品类型，如xGW-C、uMAC。 
通常，一个产品（VNF实例）由一个或多个网元（NF）组成。 
功能说明 
为了满足业务的需求，NF管理命令提供了对部署完成的网元类型进行相关参数的查询与配置、以及新增或删除网元类型等操作。 
当业务需要修改已部署网元类型的类型别名以及NFID Node，或者增加一种新的网元类型或者删除无用的网元类型时，使用该组命令。 
在对NF进行设置、增加、删除等操作前后可以通过[SHOW NF]命令进行查询。
操作不当可能会导致业务网元不能正常工作或提供服务。 
子主题： 
## 增加NF(ADD NF) 
## 增加NF(ADD NF) 
功能说明 
该命令用于增加一个网元类型。 
当实例化未部署某种网元类型时，可以通过此命令增加一种新的网元类型，并且可以指定其类型别名以及NFID Node。 
若不指定NF类型别名，则默认与NF类型相同。 
若不指定NFID Node，则默认与VNF实例标识相同。VNF实例标识可以通过[SHOW VNF]命令进行查询。
增加NF成功后，该部署实例能提供此类型网元的功能和服务，可以通过[SHOW NF]命令进行查询。
注意事项 
已配置的NF类型总长度有限制，超过限制将无法增加并提示“已经配置了过多的NF类型”。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于指定要增加的网元类型。
ALIASNFTYPE|NF类型别名|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于指定要增加的网元类型的类型别名。NF类型别名禁止填写中文字符。
NFIDNODE|NFID Node|参数可选性: 任选参数类型: 字符串参数范围: 12-12|该参数用于指定要增加的网元类型的NF ID的Node取值，即NF ID的后十二位。NFID Node必须是16进制数字。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！输入的NF类型已存在！NF不存在！输入的NFID Node已存在！输入的NFID Node长度超出限制！输入的NF类型别名长度超出限制！保存NF失败！
命令举例 
`
增加一个类型为"SGW-C"的NF，类型别名为"SGW-C"，NFID Node为"0e3b3ddcb0d5"。
ADD NF:NFTYPE="SGW-C",ALIASNFTYPE="SGW-C",NFIDNODE="0e3b3ddcb0d5"
` 
## 设置NF(SET NF) 
## 设置NF(SET NF) 
功能说明 
小心：网元类型的参数配置错误将导致该类型的业务网元不能正常工作或提供服务。因此执行该操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于设置已有网元类型的类型别名以及NFID Node或NFID等。 
当需要根据运营商的规定对网元类型的名称进行调整时，可以使用该命令修改已配置的网元类型的类型别名。 
当需要根据业务的需求对部署完成后的网元类型的标识进行调整时，可以使用该命令修改已配置的网元类型的NFID或其Node取值。 
修改前后，可通过执行命令[SHOW NF]查询相关参数修改前后的值。
注意事项 
网元类型的NFID和NFID Node不能同时配置，并且NFID只在特殊场景才能配置，正常情况下如有需要仅配置NFID Node即可。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于指定要设置的网元类型，可以通过SHOW NF命令进行查询。
ALIASNFTYPE|NF类型别名|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于设置网元类型的类型别名。NF类型别名禁止填写中文字符。
NFIDNODE|NFID Node|参数可选性: 任意单选参数类型: 字符串参数范围: 12-12|该参数用于设置网元类型的NF ID的Node取值，即NF ID的后十二位。NFID Node必须是16进制数字。
NFID|NFID|参数可选性: 任意单选参数类型: 字符串参数范围: 36-36|该参数用于设置网元类型的NF ID。NFID必须是36位UUID格式。NFID只在特殊场景才能配置，正常情况下不要进行配置。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！NF不存在！输入的NF类型别名长度超出限制！设置NF类型别名失败！输入的NFID Node已存在！输入的NFID Node长度超出限制！设置NFID Node失败！没有输入任何一个要设置的参数的值！
命令举例 
`
设置类型为"PWG-C"的NF的类型别名为"pwg-c"以及NFID Node为"0e3b3ddcb0d5"。
SET NF:NFTYPE="PWG-C",ALIASNFTYPE="pwg-c",NFIDNODE="0e3b3ddcb0d5"
` 
## 删除NF(DEL NF) 
## 删除NF(DEL NF) 
功能说明 
小心：删除正常或在用的网元类型将导致该类型的业务网元不能正常工作或提供服务。因此执行该操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于删除指定的网元类型。 
当不需要某种网元类型或增加了错误的网元类型时，使用该命令。 
删除NF成功后，该NF将无法正常提供业务，可以通过[SHOW NF]命令查询该NF是否已被删除。
注意事项 
至少要保留一种网元类型。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于指定要删除的网元类型。已存在的网元类型可以通过SHOW NF命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！NF不存在！最后一个NF不能删除！删除NF失败！
命令举例 
`
删除类型为"SGW-C"的NF。
DEL NF:NFTYPE="SGW-C"
` 
## 查询NF(SHOW NF) 
## 查询NF(SHOW NF) 
功能说明 
该命令用于查询所有已配置的网元类型信息，包括NF ID、NF类型、NF类型别名以及部署形态等。 
如果没有配置网元类型，则查询结果为空。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFID|NF ID|参数可选性: 必选参数类型: 字符串参数范围: 0-36|该参数用于表示查询到的网元类型的NF ID，即每一种网元类型的标识，例如4727954f-c6e0-4c82-8514-c5e79358a97e。其中后12位为NF ID的Node取值。
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示查询到的网元类型。通常是协议规范规定的网元类型，例如PGW-C、SGW-C。
ALIASNFTYPE|NF类型别名|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示查询到的网元类型的类型别名。
NFFORM|部署形态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示查询到的网元类型的部署形态，包括虚拟和物理。
命令举例 
`
查询所有已配置的网元类型信息。
SHOW NF
(No.1) : SHOW NF:
NF ID                                NF类型      NF类型别名 部署形态
--------------------------------------------------------------------
4727954f-c6e0-4c82-8514-c5e79358a97e AMF_99_B120 AMF       虚拟
--------------------------------------------------------------------
记录数：1
` 
# NFS管理 
# NFS管理 
背景知识 
NFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务，一个NF（Network Function，网络功能）由多个NFS组成。不同的NFS完成不同的特定功能服务。 
SC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。同一种类型的全部SC实例构成一个SC集群。 
通常，一个服务由多种服务组件组成。具体的SC类型及作用由业务根据需求自行定义。 
一个NFS实例能够正常工作并对外提供完整服务的前提就是其下所有类型的SC都能正常工作并对外提供服务。当某个SC集群出现故障无法正常工作时，就意味着该NFS实例无法对外提供完整的服务。 
通常，网元在实例化的过程可以选择部署或预先增加业务所需的NFS实例。预先增加的NFS实例不会直接部署（或激活），而是增加相应的信息记录，后续可对该预先增加的NFS实例进行激活。若已完成实例化操作，可以在EM上通过命令新增一个NFS实例以及对未部署的NFS实例进行激活操作，从而完成NFS实例的部署。 
对于NFS管理、SC管理以及SC组管理等命令来说，通常要指定具体的NFS实例进行操作，即要指定NFS实例的名称。 
NFS实例的名称支持指定内部名称和外部名称两种： 
 
内部名称：NFS实例没有特殊配置的、默认的名称，一般为用"_"连接服务类型和实例号的形式，例如"CommonS_TMSP_0"、"Nupf_PacketForward_0"等。 
 
外部名称（显示名称）：NFS实例在EM界面对外呈现的名称，可以根据业务需求在实例化部署时配置或通过执行命令SET NFS DISPLAYNAME进行修改。 
 
功能说明 
NFS管理命令用于根据业务需求对NFS实例的相关参数进行查询和配置、完成NFS部署相关以及故障处理等功能。 
对NFS实例相关参数进行查询等操作： 
 
查询NFS(SHOW NFS)：查询NFS实例的信息，包括NFS的实例名称、类型、类型标识、实例号、实例标识、部署状态、版本、归属域以及规格等。在对NFS实例进行其他操作前后可以使用该命令进行查询操作后的结果。 
 
查询NFS状态(SHOW NFSSTATUS)：查询NFS实例的状态，即该NFS实例是否能够正常工作并对外提供完整的服务。 
 
当需要配置NFS实例的显示名称时可以执行命令[SET NFS DISPLAYNAME]进行修改。
一个NFS实例只有成功部署才能正常工作。要完成一个NFS实例的部署，需先执行命令[ADD NFS]，再执行命令[ACTIVATE NFS]；要彻底删除一个NFS实例的记录，需先执行命令[DEACTIVATE NFS]，再执行命令[DEL NFS]。与NFS实例部署相关的操作：
 
增加NFS(ADD NFS)：新增一个NFS实例的记录，该NFS实例仍为未部署状态。 
 
激活NFS(ACTIVATE NFS)：激活一个NFS实例，该NFS实例成为已部署状态。 
 
去激活NFS(DEACTIVATE NFS)：去激活一个NFS实例，该NFS实例成为未部署状态。 
 
删除NFS(DEL NFS)：彻底删除一个NFS实例的记录。 
 
修改NFS(MODIFY NFS)：修改一个NFS实例下的SC的部署规格以及关联的虚机资源。 
 
NFS呈现配置(SET NFSPRESENTATION)：设置网管命令树不同形态呈现形式的开关状态。 
 
查询NFS呈现配置(SHOW NFSPRESENTATION)：查询网管命令树不同形态呈现形式的开关状态。 
 
当NFS实例出现严重故障或异常导致服务不可用时可以执行命令[RESET NFS]进行重启。
拨测开关配置以及拨测用户配置等命令详情请参见相关主题。 
子主题： 
## 拨测开关配置 
## 拨测开关配置 
背景知识 
拨测开关配置是针对拨测阶段的开关配置。 
功能说明 
拨测开关配置是针对不同NFS配置其拨测开关状态，打开则进入拨测流程，否则不能进入拨测流程。 
子主题： 
### 新增拨测开关(ADD DIALTESTSWITCH) 
### 新增拨测开关(ADD DIALTESTSWITCH) 
功能说明 
该命令用于增加NFS（Network Function Service，网络功能服务）的拨测开关，是针对拨测阶段的开关配置。 
打开开关可以进行拨号测试，测试一部分用户是否能正常打电话。  
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于设置服务类型名称。服务类型名称为字符串类型，范围是[1,32]。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于设置服务实例号。服务实例号为整数型，范围是[0,255]。
dialtestswitch|拨测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置拨测开关状态。有启用和禁用两种状态。启用：表示进入拨测流程。禁用：表示不能进入拨测流程。
命令举例 
`
给Service type name为A、实例号为0的NFS增加一个拨测开关，并设置为打开状态.
ADD DIALTESTSWITCH:SERVICETYPENAME=A,SERVICEINSTANCE=0,DIALTESTSWITCH=ENABLE
` 
### 修改拨测开关(SET DIALTESTSWITCH) 
### 修改拨测开关(SET DIALTESTSWITCH) 
功能说明 
该命令用于修改NFS（Network Function Service，网络功能服务）的拨测开关，是针对拨测阶段的开关配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于设置服务类型名称。服务类型名称为字符串类型，范围是[1,32]。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于设置服务实例号。服务实例号为整数型，范围是[0,255]。
dialtestswitch|拨测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置拨测开关状态。有启用和禁用两种状态。启用：表示进入拨测流程。禁用：表示不能进入拨测流程。
命令举例 
`
设置Service type name为A，实例号为0的NFS的拨测开关状态为打开。
SET DIALTESTSWITCH:SERVICETYPENAME=A,SERVICEINSTANCE=0,DIALTESTSWITCH=ENABLE
` 
### 删除拨测开关(DELETE DIALTESTSWITCH) 
### 删除拨测开关(DELETE DIALTESTSWITCH) 
功能说明 
该命令用于删除NFS（Network Function Service，网络功能服务）的拨测开关，是针对拨测阶段的开关配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于设置服务类型名称。服务类型名称为字符串类型，范围是[1,32]。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于设置服务实例号。服务实例号为整数型，范围是[0,255]。
命令举例 
`
删除Service type name为A，实例号为0的NFS的拨测开关。
DELETE DIALTESTSWITCH:SERVICETYPENAME=A,SERVICEINSTANCE=0
` 
### 查询拨测开关(SHOW DIALTESTSWITCH) 
### 查询拨测开关(SHOW DIALTESTSWITCH) 
功能说明 
该命令用于查询NFS（Network Function Service，网络功能服务）的拨测开关，是针对拨测阶段的开关配置。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数表示服务类型名称。
serviceinstance|服务实例号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数表示服务实例号。
dialtestswitch|拨测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数表示拨测开关状态。
命令举例 
`
查询Service type name为A，实例号为0的NFS的拨测开关状态。
SHOW DIALTESTSWITCH:SERVICETYPENAME=A,SERVICEINSTANCE=0
(No.1) : SHOW DIALTESTSWITCH:SERVICETYPENAME=A,SERVICEINSTANCE=0
服务类型名称 服务实例号 拨测开关  
A            1         启用       
记录数：1
执行成功耗时: 0.22 秒
` 
## 拨测用户配置 
## 拨测用户配置 
背景知识 
拨测用户配置是针对版本升级时，对某个版本进行拨号测试阶段的呼叫用户配置。 
功能说明 
拨测用户配置是配置拨测阶段的用户信息，可以配置服务类型ID、服务实例号、用户ID类型等信息。 
子主题： 
### 新增拨测用户(ADD DIALTESTUSER) 
### 新增拨测用户(ADD DIALTESTUSER) 
功能说明 
该命令用于新增NFS的拨测用户。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于表示NFS服务类型名称，通过TMSP节点下SHOW SERVICEINFO命令获取。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于表示NFS服务实例号，通过TMSP节点下SHOW SERVICEINFO命令获取。
type|标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示用户ID类型：IMSIISDN
value|标识起始|参数可选性: 必选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为起始值，与value_end参数一起表示用户ID范围。
value_end|标识结束|参数可选性: 必选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为结束值。
ver|指向版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示拨测使用的升级前后的版本类型：TARGETCUR
命令举例 
`
新增一个拨测用户，服务类型名称为A，服务实例号为0，标识类型为IMSI，标识内容起始值为460000012345678，结束值为460000012345678，指向版本为TARGET。
ADD DIALTESTUSER:SERVICETYPENAME=A,SERVICEINSTANCE=0,TYPE="IMSI",VALUE="460000012345678",VALUE_END="460000012345678",VER="TARGET"
` 
### 修改拨测用户(SET DIALTESTUSER) 
### 修改拨测用户(SET DIALTESTUSER) 
功能说明 
该命令用于修改NFS的拨测用户。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于表示NFS服务类型名称，通过TMSP节点下SHOW SERVICEINFO命令获取。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于表示NFS服务实例号，通过TMSP节点下SHOW SERVICEINFO命令获取。
type|标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示用户ID类型：IMSIISDN
value|标识起始|参数可选性: 必选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为起始值，与value_end参数一起表示用户ID范围。
value_end|标识结束|参数可选性: 必选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为结束值。
ver|指向版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示拨测使用的升级前后的版本类型：TARGETCUR
命令举例 
`
修改一条拨测用户信息，服务类型名称为A，服务实例号为0，标识类型为IMSI，标识内容起始值为460000012345678，结束值为460000012345678，指向版本为TARGET。
SET DIALTESTUSER:SERVICETYPENAME=A,SERVICEINSTANCE=0,TYPE="IMSI",VALUE="460000012345678",VALUE_END="460000012345678",VER="TARGET"
` 
### 删除拨测用户(DELETE DIALTESTUSER) 
### 删除拨测用户(DELETE DIALTESTUSER) 
功能说明 
该命令用于删除NFS的拨测用户。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于表示NFS服务类型名称，通过TMSP节点下SHOW SERVICEINFO命令获取。
serviceinstance|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于表示NFS服务实例号，通过TMSP节点下SHOW SERVICEINFO命令获取。
type|标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示用户ID类型：IMSIISDN
value|标识起始|参数可选性: 必选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为起始值，与value_end参数一起表示用户ID范围。
命令举例 
`
删除服务类型名称为A、服务实例号为0、标识类型为IMSI、标识内容起始值为460000012345678的NFS的拨测用户。
DELETE DIALTESTUSER:SERVICETYPENAME=A,SERVICEINSTANCE=0,TYPE=IMSI，VALUE="460000012345678"
` 
### 查询拨测用户(SHOW DIALTESTUSER) 
### 查询拨测用户(SHOW DIALTESTUSER) 
功能说明 
该命令用于查询NFS的拨测用户。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
servicetypename|服务类型名称|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数用于表示NFS服务类型名称，通过TMSP节点下SHOW SERVICEINFO命令获取。
serviceinstance|服务实例号|参数可选性: 任选参数类型: 数字参数范围: 0-255|该参数用于表示NFS服务实例号，通过TMSP节点下SHOW SERVICEINFO命令获取。
type|标识类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示用户ID类型：IMSIISDN
value|标识起始|参数可选性: 任选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为起始值，与value_end参数一起表示用户ID范围。
value_end|标识结束|参数可选性: 任选参数类型: 字符串参数范围: 1-15|该参数用于表示用户ID内容，即IMSI号码或者ISDN号码。该参数为结束值。
ver|指向版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示拨测使用的升级前后的版本类型：TARGETCUR
命令举例 
`
查询服务类型名称为A、服务实例号为0的NFS拨测用户信息。
SHOW DIALTESTUSER:SERVICETYPENAME=A,SERVICEINSTANCE=0
(No.1) : SHOW DIALTESTUSER:SERVICETYPENAME=A,SERVICEINSTANCE=1
服务类型名称 服务实例号 标识类型  标识内容  指向版本
A          1         IMSI      000000   TARGET
记录数：1
执行成功耗时: 0.22 秒
` 
## 增加NFS(ADD NFS) 
## 增加NFS(ADD NFS) 
功能说明 
该命令用于增加一个指定类型和规格的NFS实例。 
当网元未部署某类型NFS或当前部署的NFS实例无法满足业务需求时，使用该命令。 
增加NFS成功后，会增加一条该类型和规格的NFS实例的记录，该NFS实例仍是未部署状态，可以通过执行[SHOW NFS]命令查询该NFS实例的信息。
注意事项 
增加NFS时，所指定的版本包序列号必须对应存在且激活的该NFS类型的NFS版本包或包含该NFS类型的VNF版本包，可以通过[SHOW PKG]命令查询版本包信息。
同一类型的NFS最多只能有64个实例，超过此值将无法再继续增加。 
执行[ADD NFS]命令后需执行[ACTIVATE NFS]命令激活该NFS实例，使其完成部署。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSTYPE|NFS类型|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数用于指定要增加的NFS实例的类型，该类型的NFS版本包或包含该类型的VNF版本包必须存在且激活，可以通过SHOW PKG命令查询版本包信息。
NFSSIZE|NFS规格|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要增加的NFS实例的规格，主要包括"NFS_SIZE_S"、"NFS_SIZE_M"、"NFS_SIZE_L"等。业务可以根据对性能的要求选择不同的NFS规格。
PKGSEQUENCE|NFS版本包序列号|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要增加的NFS实例的版本包序列号，每个版本包对应的序列号是唯一的，可以通过SHOW PKG命令查询版本包序列号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！NFS版本包错误！NFS的描述文件不存在！找不到要增加的NFS对应的版本包！输入的NFS规格错误！其他！输入的NFS类型的实例数达上限，无法再增加！输入的NFS类型或版本包序列号有误！
命令举例 
`
增加一个类型为"CommonS_IPS"的NFS实例。该NFS的规格为"NFS_SIZE_M"，版本包序列号为"2021-1-21-2-44-43-379-2"。
ADD NFS:NFSTYPE="CommonS_IPS",NFSSIZE="NFS_SIZE_M",PKGSEQUENCE="2021-1-21-2-44-43-379-2"
` 
## 激活NFS(ACTIVATE NFS) 
## 激活NFS(ACTIVATE NFS) 
功能说明 
该命令用于激活指定的NFS实例。 
当业务需要某个未部署的NFS实例正常工作并对外提供服务时，使用该命令激活NFS。 
激活NFS成功后，该NFS实例变为已部署状态，该NFS实例下的所有类型的SC都会进行弹性扩容，从而正常工作。可以通过[SHOW NFS]命令查询激活成功后的NFS实例的信息。
注意事项 
该命令只能对未部署的NFS实例进行激活操作，可以通过[SHOW NFS]命令查询NFS实例的部署状态。
执行命令需要一定时间，可在结果中查看进度。 
命令执行成功后需等待VRU启动，可以通过[SHOW VRU]命令查看VRU状态。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要激活的NFS实例的名称，可以通过SHOW NFS命令进行查询。
命令举例 
`
激活实例名称为"Nsmf_PDUSession_0"的NFS实例。
ACTIVATE NFS:NFSNAME="Nsmf_PDUSession_0"
` 
## 去激活NFS(DEACTIVATE NFS) 
## 去激活NFS(DEACTIVATE NFS) 
功能说明 
小心：该命令属于高危命令，该操作将去激活NFS实例，导致该NFS实例无法正常工作或对外提供服务,并且会删除该NFS的模型注册及相关配置数据。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于去激活指定的NFS实例。 
当业务的负荷较低需要节省资源时，使用该命令。 
去激活NFS成功后，不会删除该NFS实例的记录，该NFS实例会变为未部署状态，该NFS实例下的所有SC全部会进行弹性缩容，并且无法正常工作或对外提供服务，同时释放其占用的部署资源。可以通过[SHOW NFS]命令查询NFS实例的部署状态等信息。
注意事项 
业务NFS去激活后会删除该NFS的模型注册及相关配置数据，操作需谨慎。 
"CommonS_TMSP"、"CommonS_OAM"等类型的公共服务不支持此操作。 
该命令不能用于去激活灰度（在线）升级中的NFS实例。 
该命令只能对已部署的NFS实例进行去激活操作，可以通过[SHOW NFS]命令查询NFS实例的部署状态。
执行命令需要一定时间，可在结果中查看进度。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要去激活的NFS实例的名称，可以通过SHOW NFS命令进行查询。
命令举例 
`
去激活实例名称为"Nsmf_PDUSession_0"的NFS实例。
DEACTIVATE NFS:NFSNAME="Nsmf_PDUSession_0"
` 
## 删除NFS(DEL NFS) 
## 删除NFS(DEL NFS) 
功能说明 
小心：该命令属于高危命令，该操作将彻底删除NFS实例。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于删除指定的NFS实例。 
当不再需要某个NFS实例对外提供服务时，使用该命令。 
删除NFS成功后，会彻底删除该NFS实例的记录，即通过执行[SHOW NFS]命令将无法再查询到该NFS实例的信息。
注意事项 
"CommonS_TMSP"、"CommonS_OAM"等类型的NFS实例（公共服务）不能被删除。 
该命令只能对未部署的NFS实例进行删除操作，因此如果要删除一个已部署的NFS实例，需先执行[DEACTIVATE NFS]命令去激活该NFS实例，再执行[DEL NFS]命令将其删除。可以通过[SHOW NFS]命令查询NFS实例的部署状态。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要删除的NFS实例的名称，可以通过SHOW NFS命令查询已存在的NFS实例名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！输入的NFS实例名称不存在！NFS已部署！指定的NFS实例的SC不存在！删除SC失败！SC组不存在！删除SC组失败！删除NFS归属域失败！删除NFS失败！
命令举例 
`
删除实例名称为"Nsmf_PDUSession_0"的NFS实例。
DEL NFS:NFSNAME="Nsmf_PDUSession_0"
` 
## 重启NFS(RESET NFS) 
## 重启NFS(RESET NFS) 
功能说明 
小心：该命令属于高危命令，该操作将对指定NFS实例进行重启（复位），该操作将导致业务中断并且服务不可用。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于重启（复位）指定的NFS实例。 
当服务出现严重故障或异常导致服务不可用等场景时，使用该命令。 
重启NFS的实质是重启该NFS下的全部SC实例，重启成功后服务会恢复正常，可以通过执行命令[SHOW NFSSTATUS]查询NFS的状态。
注意事项 
重启NFS的过程将导致该服务不可用，操作需谨慎。若仅部分SC实例出现故障，可以执行命令[RESET SC]重启SC。
重启公共服务可能会导致其他命令执行失败并严重超时，因此如果正在执行其他命令时，不要进行重启NFS操作。 
重启公共服务成功后需等待VRU启动，可以通过[SHOW VRU]命令查看VRU状态。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要重启的NFS实例的名称，可以通过SHOW NFS命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！操作超时，所有SC重启超时！其他！获取SC信息失败！解码失败！与SC通讯异常！所有SC重启失败！操作超时，部分SC重启超时！重启NFS失败！重启NFS超时！输入的NFS实例名称不存在！指定的NFS实例的SC不存在！VRU不存在！超时无响应！该NFS不支持此命令！其他错误！该NFS不支持此操作！
命令举例 
`
重启实例名称为"CommonS_TMSP_0"的NFS实例。
RESET NFS:NFSNAME="CommonS_TMSP_0"
` 
## 查询NFS(SHOW NFS) 
## 查询NFS(SHOW NFS) 
功能说明 
该命令用于查询当前网元所有NFS实例的信息，包括NFS的实例名称、类型、类型标识、实例号、实例标识、部署状态、版本、归属域以及规格等。 
当需要查询某个NFS实例的相关信息时，或者对某个NFS实例进行某种操作前后，使用此命令。 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
DISPLAYMODE|显示模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SHOWDEPLOYED|该参数用于指定NFS实例信息的显示模式。各参数选项的含义是：SHOWDEPLOYED（显示已部署）：EM仅显示已部署的NFS实例信息。SHOWUNDEPLOYED（显示未部署）：EM仅显示未部署的NFS实例信息。SHOWALL（显示全部）：EM显示包括已部署和未部署的全部NFS实例信息。若不指定显示模式，EM默认显示已部署的NFS实例信息。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于表示查询到的NFS实例的名称。
NFSTYPE|类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的NFS实例的类型。
NFSTYPEID|类型标识|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于表示查询到的NFS实例的类型标识。每一种NFS类型都对应唯一的类型标识，用于计算逻辑标识（CommID）。CommID标识一个服务端点的逻辑地址，用于进程间通讯。
NFSINSTANCESEQNUM|实例号|参数可选性: 必选参数类型: 数字参数范围: 0-63|该参数用于表示查询到的NFS实例的实例号。NFS类型支持多实例，相同类型的NFS实例分别对应不同的实例号。同一类型最多只能有64个实例，即实例号从0开始递增排序，最大为63。
NFSINSTANCEID|实例标识|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的NFS实例的实例标识，即每个NFS实例的通用唯一识别码（UUID）。
DEPLOYMENTSTATE|部署状态|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的NFS实例的部署状态。各参数选项的含义是：True：已部署状态，即该NFS实例能够正常工作并对外提供服务。False：未部署状态，即只记录了该NFS部署的相关信息，但该NFS实例无法正常工作或对外提供服务。
NFSVERSION|版本|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的NFS实例的版本信息。
NFSDOMAIN|归属域|参数可选性: 必选参数类型: 字符串参数范围: 0-1|该参数用于表示查询到的NFS实例的归属域。一般情况NFS实例的归属域均为A，部分部署或升级场景中的NFS实例的归属域为B。
NFSSIZE|规格|参数可选性: 必选参数类型: 字符串参数范围: 0-48|该参数用于表示查询到的NFS实例的规格，主要包括"NFS_SIZE_S"、"NFS_SIZE_M"、"NFS_SIZE_L"等。业务可以根据对性能的要求定义以及选择不同的NFS规格。
命令举例 
`
查询当前网元所有已部署NFS实例的信息。
SHOW NFS:DISPLAYMODE="SHOWDEPLOYED"
(No.1) : SHOW NFS:DISPLAYMODE="SHOWDEPLOYED"
实例名称          类型            类型标识 实例号 实例标识                              部署状态 版本                   归属域 规格
----------------------------------------------------------------------------------------------------------------------------------------
CommonS_OAM_0     CommonS_OAM     2       0      58aee8db-9e72-4581-b493-3f04384c2cfa True     V4.20.13.B7            A     NFS_SIZE_S
CommonS_IPS_0     CommonS_IPS     4       0      d77e10ed-e0f0-4a7b-baad-42a2134d07f2 True     V7.21.10.B2_2021_01_26 A     NFS_SIZE_S
CommonS_TMSP_0    CommonS_TMSP    1       0      fad50044-b9bd-4bc4-8a22-7098f95d041b True     V7.21.10.B2_2021_01_26 A     NFS_SIZE_S
CommonS_SIG_0     CommonS_SIG     6       0      d1e3d337-1f93-4a37-822f-abc7e1143357 True     V7.CI_2021_01_26       A     NFS_SIZE_S
CommonS_HTTP_LB_0 CommonS_HTTP_LB 7       0      f3bdc9b0-dcce-43ab-b298-195f0e14a647 True     V2021_01_26            A     NFS_SIZE_S
----------------------------------------------------------------------------------------------------------------------------------------
记录数：5
` 
## 查询NFS状态(SHOW NFSSTATUS) 
## 查询NFS状态(SHOW NFSSTATUS) 
功能说明 
该命令用于查询当前网元所有NFS实例的状态，即NFS实例是否能够正常工作并对外提供完整的服务。 
当需要查询当前网元各个NFS实例是否能够正常工作、对外提供完整的服务时，使用此命令。 
一般情况，每个NFS实例都由多种类型的SC组成，每种类型的SC组成一个SC集群，不同的SC集群能够完成不同的功能。 
因此，只有NFS实例下的全部已部署SC集群的服务状态都为正常，该NFS实例才能对外提供完整的服务，状态才为正常。若NFS实例下存在某个SC集群的服务状态为故障，则该NFS实例不能对外提供完整的服务，状态则为故障。 
若NFS实例下的某个SC集群的服务状态为未部署，则该NFS实例的状态仍为正常。若NFS实例下全部SC集群的服务状态均为未部署，则该NFS实例的状态为故障。 
若NFS实例未部署，则该NFS实例的状态为未部署，可以通过[SHOW NFS]命令查询NFS实例的部署状态。
当NFS实例的状态为故障时，可以通过[SHOW SCSTATUS]命令查询该NFS实例下的SC集群的服务状态。
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
DISPLAYMODE|显示模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SHOWDEPLOYED|该参数用于指定NFS实例状态的显示模式。各参数选项的含义是：SHOWDEPLOYED（显示已部署）：EM仅显示已部署的NFS实例的状态。SHOWUNDEPLOYED（显示未部署）：EM仅显示未部署的NFS实例的状态。SHOWALL（显示全部）：EM显示包括已部署和未部署的全部NFS实例的状态。若不指定显示模式，EM默认显示已部署的NFS实例的状态。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于表示查询到的NFS实例的名称。
NFSSTATE|NFS状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于表示查询到的NFS实例的状态。各参数选项的含义是：故障：若NFS实例下存在某个SC集群的服务状态为故障，或全部SC集群的服务状态均为未部署，则该NFS实例的状态为故障。正常：若NFS实例下的全部已部署SC集群的服务状态都为正常，则该NFS实例的状态为正常。未部署：若NFS实例未部署，则该NFS实例的状态为未部署。SC集群的服务状态可以通过SHOW SCSTATUS命令进行查询。
命令举例 
`
查询当前网元所有已部署NFS实例的状态。
SHOW NFSSTATUS:DISPLAYMODE="SHOWDEPLOYED"
(No.1) : SHOW NFSSTATUS:DISPLAYMODE="SHOWDEPLOYED"
NFS实例名称    NFS状态 
-----------------------
CommonS_OAM_0  正常       
CommonS_IPS_0  正常       
CommonS_TMSP_0 正常       
CommonS_SIG_0  正常     
-----------------------
记录数：4
` 
## 设置NFS显示名称(SET NFS DISPLAYNAME) 
## 设置NFS显示名称(SET NFS DISPLAYNAME) 
功能说明 
该命令用于设置NFS实例的显示名称。 
NFS实例的名称如果没有特殊配置则默认为NFS的内部名称。内部名称一般采用"_"连接服务类型和实例号的形式，例如"CommonS_TMSP_0"、"Nupf_PacketForward_0"等。 
当需要更好地显示一个服务的功能、作用或需要对NFS实例的显示名称进行特殊命名时，可以使用该命令。 
修改前后，可通过执行[SHOW NFS]命令查询NFS实例的名称。
注意事项 
执行此命令前需确保NFS呈现配置里的呈现服务别名为启用，呈现服务别名可通过执行[SHOW NFSPRESENTATION]命令进行查询。若呈现服务别名为禁用，则无法执行此命令，可通过执行[SET NFSPRESENTATION]命令将呈现服务别名设置为启用后再执行此命令。
不同NFS实例的显示名称不能相同，即显示名称具有唯一性。 
显示名称不能设置为其他NFS实例的内部名称。 
修改NFS实例的显示名称成功后，需刷新EM页面。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSTYPE|NFS类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要设置的NFS实例的类型，可以通过SHOW NFS命令进行查询。
NFSINSTANCESEQNUM|NFS实例号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于指定要设置的NFS实例的实例号，可以通过SHOW NFS命令进行查询。
DISPLAYNAME|显示名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于设置NFS实例的显示名称，即NFS实例在EM界面对外呈现的名称，也称作外部名称，可以根据需要进行设置。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！指定的NFS实例不存在！要设置的显示名称与其他NFS实例的显示名称重复！显示名称不能设置为其他NFS实例的内部名称！NFS呈现配置里的呈现服务别名为禁用！
命令举例 
`
设置类型为"CommonS_TMSP"且实例号为0的NFS实例的显示名称为"微服务治理"。
SET NFS DISPLAYNAME:NFSTYPE="CommonS_TMSP",NFSINSTANCESEQNUM=0,DISPLAYNAME="微服务治理"
` 
## 修改NFS(MODIFY NFS) 
## 修改NFS(MODIFY NFS) 
功能说明 
小心：该命令属于高危命令，用于修改指定的NFS实例的规格。该操作将删除NFS实例并根据版本中的NFS描述文件重新部署NFS实例。该操作将导致业务中断并且服务不可用，并且需要确保有足够的资源。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于修改指定的NFS实例的规格。 
当一个NFS实例下的SC的部署规格和关联的虚机资源已无法满足业务对性能的需求时，使用该命令。 
该命令支持批量修改NFS规格，即可以输入多个需要并发处理的NFS的实例名称以及目标规格。 
可以通过[SHOW NFS]和[SHOW SCTYPE]等命令查询修改后的NFS实例以及SC类型的信息。
注意事项 
"CommonS_TMSP"、"CommonS_OAM"等类型的NFS实例（公共服务）不能修改规格。 
执行命令需要一定时间，可在结果中查看进度。在此期间，不要执行其他弹缩相关的命令。 
命令执行成功后需要等待SC实例完成部署。 
如果有多个需要并发处理的NFS，其实例名称和目标规格需要一一对应。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要修改规格的NFS实例的名称，可以通过SHOW NFS命令查询已存在的NFS实例。
NFSSIZE|NFS目标规格|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于指定NFS目标规格，即修改后的NFS实例的规格。NFS规格主要包括"NFS_SIZE_S"、"NFS_SIZE_M"、"NFS_SIZE_L"等。业务可以根据对性能的要求选择不同的NFS规格。可以通过SHOW NFS命令查询修改前后的NFS实例的规格。
DEPLOYMODE|SC实例部署方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: MODIFYNFS_DEPLOY_MODE_DEFAULT|该参数用于指定修改服务实例的规格时，服务内的SC实例数的调整方式。各参数选项的含义是：按照缺省实例数部署：表示将SC实例数调整为版本中预置的实例数。按照当前实例数部署：表示SC实例数在修改前后保持不变（部署步长保持不变的情况下）。
EXTRANFSNAME|其他NFS的实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-2000|该参数用于指定其他需要并发处理的NFS实例的名称，可以通过SHOW NFS命令查询已存在的NFS实例。支持输入多个NFS实例名称，中间用"/"分隔，如"CommonS_IPS_0/CommonS_SIG_0"。
EXTRANFSSIZE|其他NFS的目标规格|参数可选性: 任选参数类型: 字符串参数范围: 0-640|该参数用于指定其他需要并发处理的NFS实例的目标规格，可以通过SHOW NFS命令查询修改前后的NFS实例的规格。支持输入多个NFS目标规格，中间用"/"分隔，如"NFS_SIZE_M/NFS_SIZE_M"。
命令举例 
`
修改实例名称为"Nsmf_PDUSession_0"的NFS实例的规格为"NFS_SIZE_M"，并按照缺省实例数部署。同时修改实例名称为"CommonS_IPS_0"的NFS实例的规格为"NFS_SIZE_M"，修改实例名称为"CommonS_SIG_0"的NFS实例的规格为"NFS_SIZE_M"。
MODIFY NFS:NFSNAME="Nsmf_PDUSession_0",NFSSIZE="NFS_SIZE_M",DEPLOYMODE="MODIFYNFS_DEPLOY_MODE_DEFAULT",EXTRANFSNAME="CommonS_IPS_0/CommonS_SIG_0",EXTRANFSSIZE="NFS_SIZE_M/NFS_SIZE_M"
` 
## NFS呈现配置(SET NFSPRESENTATION) 
## NFS呈现配置(SET NFSPRESENTATION) 
功能说明 
该命令用于设置网管命令树不同形态呈现形式的开关。 
当需要根据业务需求对相关参数值进行调整时，可以使用该命令。 
修改前后，可通过执行命令[SHOW NFSPRESENTATION]查询相关参数修改前的值以及修改后的值。
注意事项 
该命令会重新配置服务呈现名称，使用前请确认。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSGROUP|命令树服务分组|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|APP向LTM请求同步命令树信息（该命令树是指EM所使用的微服务命令树结构），LTM向APP同步命令树信息时，检查“命令树服务分组”是否启用。启用：LTM向APP回复的同步应答中含有命令树的信息。禁用：LTM向APP回复的同步应答中不含有命令树的信息。
NFSDISPLAYNAME|呈现服务别名|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|APP向LTM请求同步NFS信息，LTM向APP回复同步应答时，检查“呈现服务别名”是否启用。启用：LTM向APP回复外部名称（显示名称），即NFS实例在EM界面对外呈现的名称，可以根据业务需求在实例化部署时配置或通过执行命令SET NFS DISPLAYNAME进行修改。禁用：LTM向APP回复内部名称，即NFS实例没有特殊配置的、默认的名称，一般为用"_"连接服务类型和实例号的形式，例如"CommonS_TMSP_0"、"Nupf_PacketForward_0"等。
命令举例 
`
设置网管命令树开关状态，将NFSGROUP关闭，NFSDISPLAYNAME打开。
SET NFSPRESENTATION:NFSGROUP="Disable",NFSDISPLAYNAME="Enable"
` 
## 查询NFS呈现配置(SHOW NFSPRESENTATION) 
## 查询NFS呈现配置(SHOW NFSPRESENTATION) 
功能说明 
该命令用于查询网管命令树不同形态呈现方式的开关，即查询命令树服务分组以及呈现服务别名这两个开关是否开启。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFSGROUP|命令树服务分组|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|APP向LTM请求同步命令树信息（该命令树是指EM所使用的微服务命令树结构），LTM向APP同步命令树信息时，检查“命令树服务分组”是否启用。启用：LTM向APP回复的同步应答中含有命令树的信息。禁用：LTM向APP回复的同步应答中不含有命令树的信息。
NFSDISPLAYNAME|呈现服务别名|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|APP向LTM请求同步NFS信息，LTM向APP回复同步应答时，检查“呈现服务别名”是否启用。启用：LTM向APP回复外部名称（显示名称），即NFS实例在EM界面对外呈现的名称，可以根据业务需求在实例化部署时配置或通过执行命令SET NFS DISPLAYNAME进行修改。禁用：LTM向APP回复内部名称，即NFS实例没有特殊配置的、默认的名称，一般为用"_"连接服务类型和实例号的形式，例如"CommonS_TMSP_0"、"Nupf_PacketForward_0"等。
命令举例 
`
查询网管命令树不同形态呈现方式的开关状态。
SHOW NFSPRESENTATION
(No.1) : SHOW NFSPRESENTATION
命令树服务分组 呈现服务别名 
---------------------------
启用          禁用
---------------------------
记录数：1
` 
# SC管理 
# SC管理 
背景知识 
NFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务，一个NF（Network Function，网络功能）由多个NFS组成。不同的NFS完成不同的特定功能服务。 
SC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。 
通常，一个服务由多种服务组件组成。具体的SC类型及作用由业务根据需求自行定义。同一种类型的全部SC实例构成一个SC集群。 
每一个SC集群包含一个或者多个SC组，组内的SC进行N+M主备备份，即最多有N个SC为主用SC，最多有M个SC为备用SC。当主用SC中有SC出现故障无法正常工作时，备用SC可以接管故障SC的工作。 
SC组的备份模式主要包括： 
 
N+M模式：所有SC组的备份模式理论上都可以看作是此模式。 
 
1+1模式：当N=M=1时的备份模式。 
 
N:N模式：当M=0时的备份模式，也称为负荷分担模式。 
 
部署单元成功部署并正常运行是SC实例能够正常工作的前提。一般，部署单元即VRU（Virtual Running Unit，虚拟运行单元）或POD（CAAS环境）。 
一个SC集群至少有一个SC实例能够正常工作，则该SC集群的服务状态为正常。 
功能说明 
SC管理命令用于根据业务需求对SC实例的相关参数进行查询、配置，弹性扩容或缩容以及故障处理等功能。 
对SC实例相关参数进行查询等操作： 
 
查询SC类型(SHOW SCTYPE)：查询SC类型的信息，包括所属的NFS实例的名称、类型、规格、最大/最小/当前实例数、自动可弹缩性、弹性步长、亲和标签、补丁版本号以及最小组数等。 
 
查询SC信息(SHOW SCINFO)：查询SC实例的信息，包括SC类型、逻辑编号、组号、组内编号、主备状态、运行状态以及实例名称等。 
 
查询SC状态(SHOW SCSTATUS)：查询SC集群的状态，包括SC的类型、目标实例数、成功部署比例、正常运行比例以及服务状态等。 
 
查询SC负荷(SHOW SCLOAD)：查询SC实例或SC集群的负荷信息，包括负荷类型以及负荷等级等。 
 
对SC实例相关参数进行配置以及弹性扩容或缩容等操作： 
 
设置SC(SET SC)：设置SC类型的亲和标签以及最小SC组数等。 
 
增加SC实例(INC SC)：对SC实例进行组内的弹性扩容。 
 
减少SC实例(DEC SC)：对SC实例进行组内的弹性缩容。 
 
对SC实例进行故障处理等操作： 
 
重启SC(RESET SC)：适用于SC实例或SC集群出现故障或异常等场景。 
 
倒换SC(SWP SC)：适用于N+M备份模式（不包括负荷分担模式）下特定SC实例出现故障或异常等场景。 
 
闭塞SC(BLOCK SC)：适用于业务测试、N+M备份模式（包括负荷分担模式）下特定SC实例出现故障或异常等场景。 
 
解闭塞SC(UNBLOCK SC)：与闭塞SC命令配套操作。 
 
子主题： 
## 重启SC(RESET SC) 
## 重启SC(RESET SC) 
功能说明 
小心：该命令属于高危命令，该操作将对SC实例进行重启（复位），操作不当将导致业务损失。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于重启（复位）指定的某个或某些SC实例。 
当SC实例出现故障或异常等场景时，使用该命令。 
 
当指定SC组号和SC组内编号时，该命令重启指定的某一个SC实例。 
 
当指定SC组号不指定SC组内编号时，该命令重启指定的某一组SC实例。 
 
当不指定SC组号和SC组内编号时，该命令重启指定SC类型的全部SC实例（即SC集群）。 
 
重启SC成功后，出现故障或异常的SC实例会恢复正常，可以通过执行命令[SHOW SCINFO]查询SC实例的信息。
注意事项 
对于业务NFS下的SC实例，请确保在执行该操作前已执行命令[BLOCK SC]以迁移业务，从而避免业务损失。
重启SC（尤其是公共服务下的SC）可能会导致其他命令执行失败并严重超时，因此如果正在执行其他命令时，不要进行重启SC操作。 
重启公共服务下的SC成功后需等待SC实例完成部署。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要重启的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要重启的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|该参数用于指定要重启的SC实例所属的SC组的组号，可以通过SHOW SCINFO命令进行查询。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 任选参数类型: 数字参数范围: 0-1023|该参数用于指定要重启的SC实例所属的SC组的组内编号，可以通过SHOW SCINFO命令进行查询。
命令举例 
`
重启实例名称为"CommonS_TMSP_0"的NFS下、类型为"sc-tmsp-mgt"、组号为1、组内编号为0的SC实例。
RESET SC:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mgt",SCGROUPNUM=1,SCINTRAGROUPNUM=0
` 
## 倒换SC(SWP SC) 
## 倒换SC(SWP SC) 
功能说明 
该命令用于倒换指定的SC实例。 
当SC实例出现故障或异常等场景时，使用该命令。 
 
当指定备用SC组内编号时，该命令倒换指定的主用和备用SC实例。 
 
当不指定备用SC组内编号时，该命令任意选择备用SC实例和主用SC实例进行倒换。 
 
倒换SC成功后，业务会从原来的主用SC实例迁移到原来的备用SC实例，原来的备用SC实例将转为主用进而接替原来的主用SC实例正常工作，原来的主用SC实例转为备用。可以通过执行命令[SHOW SCINFO]查询SC实例的信息。
注意事项 
频繁的强制倒换操作会造成不可预知的后果，比如会发生重启。通常情况，强制倒换只有在服务组件控制单元出现故障时才会使用，操作需谨慎。 
倒换操作只能在同一个SC组内完成，指定倒换的SC组必须是主备备份模式且组内备用SC个数不能为0，并且指定倒换的SC实例必须为主用SC。 
倒换公共服务下的SC实例操作发起后，需等待SC实例完成倒换操作。稍后可通过[SHOW SCINFO]命令查询SC实例的信息。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要倒换的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要倒换的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要倒换的SC实例所属的SC组的组号，可以通过SHOW SCINFO命令进行查询。该参数默认值为1，即默认倒换组号为1的SC组的SC实例。如果存在多个SC组，运维人员可指定组号进行倒换操作。
ACTIVESCINTRAGROUPNUM|主用SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于指定要倒换的主用SC实例所属的SC组的组内编号，即该组内编号对应的SC的主备状态必须为主，可以通过SHOW SCINFO命令进行查询。
STANDBYSCINTRAGROUPNUM|备用SC组内编号|参数可选性: 任选参数类型: 数字参数范围: 0-1023|该参数用于指定要倒换的备用SC实例所属的SC组的组内编号，即该组内编号对应的SC的主备状态必须为备，可以通过SHOW SCINFO命令进行查询。
OPMODE|操作方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: GRACEFULLY|该参数用于指定倒换的操作方式。各参数选项的含义是：GRACEFULLY（优雅）：优雅倒换会等到倒换流程完全结束才允许进行下一次倒换操作。操作前会询问是否允许业务迁移，若允许业务迁移则执行倒换操作，若不允许则返回失败。FORCEDLY（强制）：强制倒换无论倒换流程是否完全结束或者是否允许业务迁移都直接强制执行倒换操作。操作方式默认为优雅。通常情况，强制倒换只有在服务组件控制单元出现故障时才会使用。倒换公共服务等无需业务迁移的SC实例不区分操作方式。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。倒换操作已发起，请稍后查询主备状态。正在执行相同的命令，请稍后再试！其他！SC不存在或者非主用！备用SC不在线！处于倒换保护期内！处于迁移保护期内！解码失败！消息发送失败！非合一模式的SC不支持倒换！输入的SC不是主用！超时！SC类型内部转换失败！当前主用SC禁止倒换！当前备用SC禁止倒换！前一次请求未完成！备用SC预倒换失败！备用SC转主用失败！主用SC转备用失败！SC组为非主备备份模式！备用SC不在位！当前SC实例非主用！当前SC实例非工作态！主备通信异常！输入的主用SC组内编号不存在！输入的备用SC组内编号不存在！主用SC组内编号对应的SC不是工作态！备用SC组内编号对应的SC不是工作态！主用SC组内编号对应的SC不是主用态！备用SC组内编号对应的SC不是备用态！没有备用的SC可倒换！当前SC不支持倒换！输入的SC类型不存在！倒换失败！主用和备用SC组内编号对应的SC不属于同一个SC组！备用SC组内编号对应的SC当前禁止倒换！输入的NFS实例名称不存在！该NFS不支持此操作！该NFS不支持此命令！超时无响应！其他错误！输入的SC组号不存在！SC组未部署！NFS未部署！该SC不支持此操作！
命令举例 
`
优雅倒换实例名称为"CommonS_TMSP_0"的NFS下、类型为"sc-tmsp-smc"、组号为1、主用SC组内编号为0、备用SC组内编号为1的SC实例。
SWP SC:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-smc",SCGROUPNUM=1,ACTIVESCINTRAGROUPNUM=0,STANDBYSCINTRAGROUPNUM=1,OPMODE="GRACEFULLY"
` 
## 闭塞SC(BLOCK SC) 
## 闭塞SC(BLOCK SC) 
功能说明 
该命令用于闭塞指定的SC实例。 
当对业务进行测试或故障定位时，使用该命令。 
闭塞SC成功后，该SC实例的业务会迁移到其他SC实例，该SC实例将成为闭塞状态。 
业务测试或故障定位结束后可以通过执行命令[UNBLOCK SC]解闭塞SC实例。可以通过执行命令[SHOW SCINFO]查询SC实例的信息。
注意事项 
只能对业务的SC实例执行闭塞操作，公共服务的SC实例不支持此操作。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要闭塞的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要闭塞的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要闭塞的SC实例所属的SC组的组号，可以通过SHOW SCINFO命令进行查询。该参数默认值为1，即默认闭塞组号为1的SC组的SC实例。如果存在多个SC组，运维人员可指定组号进行闭塞操作。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于指定要闭塞的SC实例所属的SC组的组内编号，可以通过SHOW SCINFO命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！其他！SC不存在！该SC不支持此操作！闭塞SC失败！该SC已经闭塞！正在迁移或关键SC不允许闭塞！解码失败！消息发送失败！群迁移失败！超时！SC类型内部转换失败！输入的NFS实例名称不存在！该NFS不支持此操作！该NFS不支持此命令！超时无响应！其他错误！输入的SC组号不存在！SC组未部署！NFS未部署！输入的SC类型不存在！
命令举例 
`
闭塞实例名称为"CommonS_IPS_0"的NFS下、类型为"sc-ips"、组号为1、组内编号为0的SC实例。
BLOCK SC:NFSNAME="CommonS_IPS_0",SCTYPE="sc-ips",SCGROUPNUM=1,SCINTRAGROUPNUM=0
` 
## 解闭塞SC(UNBLOCK SC) 
## 解闭塞SC(UNBLOCK SC) 
功能说明 
该命令用于解闭塞指定的SC实例。 
当对业务进行测试或故障定位结束后，使用该命令。 
解闭塞SC成功后，该SC实例将从闭塞状态转为正常工作状态。可以通过执行命令[SHOW SCINFO]查询SC实例的信息。
注意事项 
只能对业务的SC实例执行闭塞操作，公共服务的SC实例不支持此操作。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要解闭塞的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要解闭塞的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要解闭塞的SC实例所属的SC组的组号，可以通过SHOW SCINFO命令进行查询。该参数默认值为1，即默认解闭塞组号为1的SC组的SC实例。如果存在多个SC组，运维人员可指定组号进行解闭塞操作。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于指定要解闭塞的SC实例所属的SC组的组内编号，可以通过SHOW SCINFO命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！其他！SC不存在！解闭塞SC失败！该SC没有闭塞！解码失败！消息发送失败！该SC不支持此操作！超时！SC类型内部转换失败！输入的NFS实例名称不存在！该NFS不支持此操作！该NFS不支持此命令！超时无响应！其他错误！输入的SC组号不存在！SC组未部署！NFS未部署！输入的SC类型不存在！
命令举例 
`
解闭塞实例名称为"CommonS_IPS_0"的NFS下、类型为"sc-ips"、组号为1、组内编号为0的SC实例。
UNBLOCK SC:NFSNAME="CommonS_IPS_0",SCTYPE="sc-ips",SCGROUPNUM=1,SCINTRAGROUPNUM=0
` 
## 查询SC信息(SHOW SCINFO) 
## 查询SC信息(SHOW SCINFO) 
功能说明 
该命令用于查询指定NFS实例下、指定SC类型的SC实例的信息，包括SC类型、逻辑编号、组号、组内编号、主备状态、运行状态以及实例名称等。 
具体查询方式： 
 
当指定SC组号时，该命令查询指定NFS实例下、指定SC类型的某一组的SC实例的信息。 
 
当不指定SC组号时，该命令查询指定NFS实例下、指定SC类型的所有SC实例的信息。 
 
注意事项 
目前，某些特殊的SC类型以及场景不支持查询，如有问题请联系中兴通讯技术支持人员。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要查询的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要查询的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|该参数用于指定要查询的SC实例所属的SC组的组号，可以通过SHOW SCGROUP命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的SC实例的类型。
SCLOGICNO|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于表示查询到的SC实例的逻辑编号，即记录每个类型的SC集群内的SC实例的唯一标识。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于表示查询到的SC实例所属的SC组的组号。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于表示查询到的SC实例所属的SC组的组内编号。
SCBACKMODE|SC主/备|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: INVALID|该参数用于表示查询到的SC实例的主备状态。各参数选项的含义是：N/A：SC为非主备备份模式。主：SC为主用状态。备：SC为备用状态。
SCSTATUS|SC状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4默认值: INVALID|该参数用于表示查询到的SC实例的运行状态。各参数选项的含义是：N/A：未查询到SC实例的有效状态。工作态：SC实例为正常工作状态。宕机：SC实例为故障或异常状态。闭塞：SC实例为闭塞状态，即业务的SC实例在执行BLOCK SC命令后的状态。
VRUNAME|SC实例名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的SC实例的名称。SC的实例名称由其对应的部署单元（VRU或POD）的名称来表示。
命令举例 
`
查询实例名称为"CommonS_TMSP_0"的NFS下、类型为"sc-tmsp-mgt"、组号为1的SC实例的信息。
SHOW SCINFO:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mgt",SCGROUPNUM=1
(No.1) : SHOW SCINFO:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mgt",SCGROUPNUM=1
SC类型      SC逻辑编号 SC组号 SC组内编号 SC主/备 SC状态 SC实例名称     
----------------------------------------------------------------------
sc-tmsp-mgt 0         1      0         主      工作态  vru-tmsp-mgt-0 
sc-tmsp-mgt 1         1      1         备      工作态  vru-tmsp-mgt-1 
----------------------------------------------------------------------
记录数：2
` 
## 查询SC类型(SHOW SCTYPE) 
## 查询SC类型(SHOW SCTYPE) 
功能说明 
该命令用于查询SC类型的信息，包括所属的NFS实例的名称、类型、规格、最大/最小/当前实例数、自动可弹缩性、弹性步长、亲和标签、补丁版本号、最小组数以及部署策略等。 
具体查询方式： 
 
当不指定NFS实例名称和SC类型时，该命令查询当前网元所有NFS实例下的所有SC类型的信息。 
 
当指定NFS实例名称、不指定SC类型时，该命令查询指定NFS实例下的所有SC类型的信息。 
 
当指定SC类型（是否指定NFS实例名称均可）时，该命令查询指定SC类型的信息。 
 
注意事项 
该命令只能查询已部署的NFS实例下的SC类型的信息。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-200|该参数用于指定要查询的SC类型所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于指定要查询的SC类型。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于表示查询到的SC类型所属的NFS实例的名称。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的SC类型。
SCSIZE|SC规格|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示查询到的SC类型的规格，主要包括"SIZE_S"、"SIZE_M"、"SIZE_L"等。业务可以根据对性能的要求选择不同的SC规格。
SCMAXNUM|SC最大实例数|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于表示查询到的SC类型能够部署的SC实例的最大个数。
SCMINNUM|SC最小实例数|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于表示查询到的SC类型能够部署的SC实例的最小个数。
SCCURNUM|SC当前实例数|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于表示查询到的SC类型当前部署的SC实例的个数。
SCALABLE|自动可弹缩性|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示查询到的SC类型的自动可弹缩性，即该SC类型是否支持根据弹性指标进行自动弹性扩容或缩容。各参数选项的含义是：是：支持自动弹性扩容或缩容。否：不支持自动弹性扩容或缩容。该参数取值不会影响SC的手动弹性扩容或缩容，即运维人员可以根据业务需求通过执行INC SC或DEC SC等命令对SC进行弹性扩容或缩容操作。
SCALESTEP|弹性步长|参数可选性: 必选参数类型: 数字参数范围: 0-1002|该参数用于表示查询到的SC类型的弹性步长，也称作部署步长。该参数指的是一个部署单位（通常指一个虚机）能部署的某类型的SC实例的个数。业务在进行实例化、弹性扩容或缩容时所部署、增加或减少的SC实例数必须是部署步长的整数倍。
AFFINITYLABEL|亲和标签|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的SC类型的亲和标签，亲和标签表示一种针对不同SC类型之间的部署策略。如果不同类型的SC有相同的亲和标签，那么这些类型的SC可以部署在相同的虚机上。如果不同类型的SC有不同的亲和标签（或者亲和标签为空），那么这些类型的SC无法部署在相同的虚机上。
PATCHVERSION|补丁版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于表示查询到的SC类型的补丁版本号。
SCGROUPMIN|最小SC组数|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于表示查询到的SC类型的最小组数，即该SC类型至少需要部署的SC组的个数。
DEPLOYPOLICY|部署策略|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示查询到的SC类型的部署策略，主用包括NORMAL、UNION、PER_VM以及CO-DEPLOY等。各参数选项的含义是：NORMAL：正常部署。UNION：同一服务下的多种SC类型部署在同一虚机上。PER_VM：每个虚机（或指定的虚机类型）上都需要部署。CO-DEPLOY：不同服务下的多种SC类型部署在同一虚机上。若SC类型的部署策略为PER_VM，则该命令不支持查询此类型的最大、最小以及当前实例数（显示为N/A），可以通过SHOW SCINFO命令查询该类型的SC信息。目前，CAAS环境下SC类型的部署策略只支持NORMAL。
命令举例 
`
查询SC类型为sc-tmsp-mgt的信息。
SHOW SCTYPE:SCTYPE="sc-tmsp-mgt"
(No.1) : SHOW SCTYPE:SCTYPE="sc-tmsp-mgt"
NFS实例名称    SC类型         SC规格 SC最大实例数 SC最小实例数 SC当前实例数 自动可弹缩性 弹性步长 亲和标签 补丁版本号 最小SC组数 部署策略
------------------------------------------------------------------------------------------------------------------------------------
CommonS_TMSP_0 sc-tmsp-mgt   SIZE_S 2           2            2           否           1                          1          NORMAL
------------------------------------------------------------------------------------------------------------------------------------
记录数：1
` 
## 增加SC实例(INC SC) 
## 增加SC实例(INC SC) 
功能说明 
小心：该命令属于高危命令，该操作将导致SC实例的弹性扩容，请确保有足够的资源。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于增加指定SC类型的指定SC组内的SC实例。 
当某个SC类型的某一SC组内的SC实例数无法满足业务需求时，可以执行此命令，对其进行组内的弹性扩容。 
该命令支持批量增加SC实例，即可以并发处理不同SC组内的弹性扩容。 
增加SC实例成功后，可以通过[SHOW SCGROUP]命令查询SC组的组内当前实例数，还可以通过[SHOW SCINFO]命令查询SC实例的信息。
注意事项 
弹性扩容增加的SC实例数必须是部署步长的整数倍，部署步长可以通过[SHOW SCTYPE]命令查询。
弹性扩容后SC组的组内实例数不能大于组内最大实例数，即SC组内最大主用个数和最大备用个数之和，这两个参数值可以通过[SHOW SCGROUP]命令查询。
执行命令需要一定时间，可在结果中查看进度。在此期间，不要执行其他的弹缩相关命令。 
命令执行成功后需要等待SC实例完成部署。 
如果需要并发增加多个SC组内的SC实例，每组的参数需要一一对应。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要增加的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要增加的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要增加的SC实例所属的SC组的组号，可以通过SHOW SCGROUP命令进行查询。该参数默认值为1，即默认增加组号为1的SC组内的SC实例。如果存在多个SC组，运维人员可指定组号进行增加SC实例。
SCNUM|SC实例数|参数可选性: 必选参数类型: 数字参数范围: 1-100|该参数用于指定要增加的SC实例的个数。SC实例数必须是部署步长的整数倍，部署步长可以通过SHOW SCTYPE命令查询。
EXTRANFSNAME|其他NFS的实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-2000|该参数用于指定其他需要并发处理的NFS实例名称，可以通过SHOW NFS命令进行查询。支持输入多个NFS实例名称，中间用"/"分隔，如"CommonS_IPS_0/CommonS_SIG_0"。
EXTRASCTYPE|其他NFS的SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-640|该参数用于指定其他需要并发处理的SC类型，可以通过SHOW SCTYPE命令进行查询。支持输入多个SC类型，中间用"/"分隔，如"sc-ips/sc-sig"。
EXTRASCGROUPNUM|其他NFS的SC组号|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于指定其他需要并发处理的SC组号，可以通过SHOW SCGROUP命令进行查询。支持输入多个SC组号，中间用"/"分隔，如"1/1"。
EXTRASCNUM|其他NFS的SC实例数|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数用于指定其他需要并发处理的SC实例数。SC实例数必须是部署步长的整数倍，部署步长可以通过SHOW SCTYPE命令查询。支持输入多个SC实例数，中间用"/"分隔，如"2/4"。
命令举例 
`
增加实例名称为"Nupf_PacketForward_0"的NFS下、类型为"sc-upf-pf"、组号为1的SC组内的1个SC实例。同时，增加实例名称为"CommonS_IPS_0"的NFS下、类型为"sc-ips"、组号为1的SC组内的2个SC实例，增加实例名称为"CommonS_SIG_0"的NFS下、类型为"sc-sig"、组号为1的SC组内的4个SC实例。
INC SC:NFSNAME="Nupf_PacketForward_0",SCTYPE="sc-upf-pf",SCGROUPNUM=1,SCNUM=1,EXTRANFSNAME="CommonS_IPS_0/CommonS_SIG_0",EXTRASCTYPE="sc-ips/sc-sig",EXTRASCGROUPNUM="1/1",EXTRASCNUM="2/4"
` 
## 减少SC实例(DEC SC) 
## 减少SC实例(DEC SC) 
功能说明 
小心：该命令属于高危命令，该操作将导致SC实例的弹性缩容，请提前做好业务迁移，以免造成业务损失。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于减少指定SC类型的指定SC组内的SC实例。 
当业务的负荷较低需要节省资源时，可以执行此命令，对其进行组内的弹性缩容。 
减少SC实例成功后，可以通过[SHOW SCGROUP]命令查询SC组的组内当前实例数，还可以通过[SHOW SCINFO]命令查询SC实例的信息。
注意事项 
弹性缩容减少的SC实例数必须是部署步长的整数倍，部署步长可以通过[SHOW SCTYPE]命令查询。
弹性缩容后SC组的组内实例数不能小于组内最小实例数，SC组内最小实例数可以通过[SHOW SCGROUP]命令查询。
执行命令需要一定时间，可在结果中查看进度。在此期间，不要执行其他的弹缩相关命令。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要减少的SC实例所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要减少的SC实例的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要减少的SC实例所属的SC组的组号，可以通过SHOW SCGROUP命令进行查询。该参数默认值为1，即默认减少组号为1的SC组内的SC实例。如果存在多个SC组，运维人员可指定组号进行减少SC实例。
SCNUM|SC实例数|参数可选性: 必选参数类型: 数字参数范围: 1-100|该参数用于指定要减少的SC实例的个数。SC实例数必须是部署步长的整数倍，部署步长可以通过SHOW SCTYPE命令查询。
命令举例 
`
减少实例名称为"Nupf_PacketForward_0"的NFS下、类型为"sc-upf-pf"、组号为1的SC组内的1个SC实例。
DEC SC:NFSNAME="Nupf_PacketForward_0",SCTYPE="sc-upf-pf",SCGROUPNUM=1,SCNUM=1
` 
## 设置SC(SET SC) 
## 设置SC(SET SC) 
功能说明 
小心：该命令属于高危命令，设置SC的亲和标签会删除并重新部署SC实例，操作不当将导致SC实例部署失败。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于设置指定类型的SC的亲和标签以及最小SC组数等。 
当需要将多种类型的SC部署到同一虚机上或重新调整多种类型的SC在虚机上的分布等场景时，可以使用该命令修改指定类型的SC的亲和标签。该操作会先删除该类型的全部SC实例，然后再根据修改后的亲和标签选择虚机重新部署SC实例。 
当需要根据负荷或资源的多少对已部署的SC组个数的最小值进行调整或去激活SC组操作受到限制时，可以使用该命令修改指定类型的SC的最小组数。 
修改前后，可通过执行命令[SHOW SCTYPE]查询相关参数修改前后的值。
注意事项 
修改亲和标签前需要确认业务需求，并且亲和标签不支持删除或清空，操作需谨慎。 
若指定的SC类型关联的虚机类型为OMU、AMU、MPU、OMP-OMU、OMM等，则不允许设置亲和标签。 
修改亲和标签操作成功后需等待VRU启动，在此期间不要执行其他的弹缩相关命令，可以通过[SHOW VRU]命令查看VRU状态。
最小SC组数不能大于该SC类型当前已部署的SC组数，可以通过[SHOW SCGROUP]命令查询SC组的信息。
如果指定的SC类型的部署策略为"Union"并且该类型为从SC类型，则不允许通过命令修改此类型的相关参数，并且只能通过修改其主SC类型进行联动修改。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要设置的SC类型所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要设置的SC类型，可以通过SHOW SCTYPE命令进行查询。
AFFINITYLABEL|亲和标签|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于设置SC类型的亲和标签，亲和标签表示一种针对不同SC类型之间的部署策略。如果不同类型的SC有相同的亲和标签，那么这些类型的SC可以部署在相同的虚机上。如果不同类型的SC有不同的亲和标签（或者亲和标签为空），那么这些类型的SC无法部署在相同的虚机上。
SCGROUPMIN|最小SC组数|参数可选性: 任选参数类型: 数字参数范围: 0-1000|该参数用于设置SC类型的最小组数，即该SC类型至少需要部署的SC组的个数。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在设置亲和标签，请稍后查询VRU状态。正在执行相同的命令，请稍后再试！输入的NFS实例名称不存在！输入的SC类型不存在！没有输入任何一个要设置的参数的值！最小SC组数不能大于该SC类型当前已部署的SC组数！其他！亲和标签没有更改！LTM向VRUS请求资源失败！设置亲和标签时删除原有SC实例失败！设置亲和标签时重新部署SC实例失败！超时！任务冲突！输入的SC类型关联的虚机类型不允许设置亲和标签！该SC不支持此操作！
命令举例 
`
设置实例名称为"Nupf_PacketForward_0"的NFS下、类型为"sc-upf-pf"的SC的亲和标签为"aaa"、最小SC组数为1。
SET SC:NFSNAME="Nupf_PacketForward_0",SCTYPE="sc-upf-pf",AFFINITYLABEL="aaa",SCGROUPMIN=1
` 
## 查询SC状态(SHOW SCSTATUS) 
## 查询SC状态(SHOW SCSTATUS) 
功能说明 
该命令用于查询指定NFS实例下各种类型的SC集群的状态，包括SC的类型、目标实例数、成功部署比例、正常运行比例以及服务状态等。 
当某个NFS实例的状态为故障或需要查询某个NFS实例下各SC集群是否能够正常工作并对外提供服务，使用此命令。 
一般情况，每个SC集群都由多个该类型的SC实例组成，这些SC实例共同完成相同的功能。 
因此，只要SC集群至少有一个SC实例的状态正常，则该SC集群就能正常工作并对外提供服务，其服务状态为正常。若SC集群的所有SC实例的状态均为故障，则该SC集群不能正常工作或对外提供服务，其服务状态为故障。 
SC服务状态与成功部署比例、正常运行比例的关系： 
 
某一个SC实例对应的部署单元（VRU或POD）成功部署且正常运行不表示该SC实例的状态一定为正常；某一个SC实例的状态为正常表示该SC实例对应的部署单元（VRU或POD）一定要成功部署且正常运行。 
 
某SC集群的服务状态为正常不表示该SC集群的成功部署比例以及正常运行比例一定为100；某SC集群的成功部署比例以及正常运行比例为0表示该SC集群的服务状态一定为故障。 
 
若SC集群的目标实例数为0，即实际未部署该类型的SC集群，则该SC集群的成功部署比例以及正常运行比例为0，服务状态为未部署。 
注意事项 
该命令只能查询已部署的NFS实例下的SC集群的状态。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要查询的SC集群所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的SC集群的类型。
SCTARGETNUM|SC目标实例数|参数可选性: 必选参数类型: 数字参数范围: 0-1002|该参数用于表示查询到的SC集群的目标实例数，即该SC集群需要部署的该类型的SC实例的个数。一般情况下，SC集群的当前实例数应该等于目标实例数。
DEPLOYEDRATIO|成功部署比例(%)|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数用于表示查询到的SC集群的成功部署比例，即该SC集群成功部署的SC实例个数与其目标实例数的百分比。一般情况下，该参数的值为100。若SC集群的目标实例数为0，则该参数的值为0。
RUNNINGRATIO|正常运行比例(%)|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数用于表示查询到的SC集群的正常运行比例，即该SC集群正常运行的SC实例个数与其目标实例数的百分比。一般情况下，该参数的值为100。若SC集群的目标实例数为0，则该参数的值为0。
SERVICESTATE|SC服务状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于表示查询到的SC集群的服务状态。各参数选项的含义是：故障：若该SC集群的所有SC实例均故障、无法正常工作或对外提供服务，则该SC集群的服务状态为故障。正常：若该SC集群至少有一个SC实例能够正常工作并对外提供服务，则该SC集群的服务状态为正常。未部署：若该SC集群的目标实例数为0，即实际未部署该类型的SC集群，则该SC集群的服务状态为未部署。SC的集群状态也可以通过SHOW SERVICEINFO命令进行查询。
命令举例 
`
查询实例名称为"CommonS_TMSP_0"的NFS下、所有SC集群的状态。
SHOW SCSTATUS:NFSNAME="CommonS_TMSP_0"
(No.1) : SHOW SCSTATUS:NFSNAME="CommonS_TMSP_0"
SC类型        SC目标实例数 成功部署比例(%) 正常运行比例(%) SC服务状态 
--------------------------------------------------------------------
sc-tmsp-amu   1           100             100            正常       
sc-tmsp-etcd  1           100             100            正常       
sc-tmsp-rosng 2           100             100            正常       
sc-tmsp-agt   7           100             100            正常      
sc-tmsp-mp    2           100             100            正常       
sc-tmsp-smc   2           100             100            正常       
sc-tmsp-mgt   2           100             100            正常       
--------------------------------------------------------------------
记录数：7
` 
## 查询SC负荷(SHOW SCLOAD) 
## 查询SC负荷(SHOW SCLOAD) 
功能说明 
该命令用于查询指定SC实例或SC集群的负荷信息，包括负荷类型以及负荷等级等。 
具体查询方式： 
 
当指定SC组内编号时，该命令查询指定SC实例的负荷信息。 
 
当不指定SC组内编号时，SC组号可以指定1-1000以内的任意值，该命令查询指定SC集群的负荷信息。 
 
注意事项 
执行此命令前需确认业务是否支持此功能。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要查询的SC实例或SC集群所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要查询的SC实例或SC集群的类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定要查询的SC实例所属的SC组的组号，可以通过SHOW SCINFO命令进行查询。当不指定SC组内编号时，SC组号可以指定1-1000以内的任意值，查询指定SC集群的负荷信息。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 任选参数类型: 数字参数范围: 0-1023|该参数用于指定要查询的SC实例所属的SC组的组内编号，可以通过SHOW SCINFO命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
LOADTYPE|负荷类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-8|该参数用于表示查询到的SC实例或SC集群的负荷类型，主要包括上下文占用率、数据库占用率、业务负载占用率以及吞吐率等几种。
LOADLEVEL|负荷等级|参数可选性: 必选参数类型: 数字参数范围: 0-4|该参数用于表示查询到的SC实例或SC集群的负荷等级。负荷等级可由相应的等级阈值计算得出。负荷等级共有四个等级，分别为1（最高）、2、3、4（最低）。负荷等级越高，表示业务对应负荷类型的负荷越高。当业务负荷为空时，其负荷等级为0。
命令举例 
`
查询实例名称为"CommonS_HTTP_LB_0"的NFS下、类型为"sc-http-lb"、组号为1、组内编号为0的SC实例的负荷信息。
SHOW SCLOAD:NFSNAME="CommonS_HTTP_LB_0",SCTYPE="sc-http-lb",SCGROUPNUM=1,SCINTRAGROUPNUM=0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
(No.1) : SHOW SCLOAD:NFSNAME="CommonS_HTTP_LB_0",SCTYPE="sc-http-lb",SCGROUPNUM=1,SCINTRAGROUPNUM=0
负荷类型       负荷等级 
------------------------
业务负载占用率 1        
------------------------
记录数：1
` 
# SC组管理 
# SC组管理 
背景知识 
NFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务，一个NF（Network Function，网络功能）由多个NFS组成。不同的NFS完成不同的特定功能服务。 
SC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。一个NFS由多种SC组成。具体的SC类型及作用由业务根据需求自行定义。同一种类型的全部SC实例构成一个SC集群。 
为实现SC的负荷分担，在NFS下建立某SC类型的SC组，即一种SC类型可能包含一个或多个SC组，每个SC组内包含多个SC实例。 
组内的SC进行N+M主备备份，即最多有N个SC为主用SC，最多有M个SC为备用SC。当主用SC中有SC出现故障无法正常工作时，备用SC可以接管故障SC的工作。 
SC组的备份模式主要包括： 
 
N+M模式：所有SC组的备份模式理论上都可以看作是此模式。 
 
1+1模式：当N=M=1时的备份模式。 
 
N:N模式：当M=0时的备份模式，也称为负荷分担模式。 
 
业务根据需求配置SC组的备份模式。 
功能说明 
SC组管理命令用于根据业务需求对SC组的相关参数进行查询、配置以及完成整组弹性扩容或缩容等功能。 
SC组管理主要包括查询、设置、激活、去激活SC组等操作： 
 
查询SC组(SHOW SCGROUP)：查询SC组信息，包括SC类型、组号、组内最大主用/备用个数、组内当前/最小实例数以及虚机组等。在对SC组进行其他操作前后可以使用该命令进行查询。 
 
设置SC组(SET SCGROUP)：设置SC组的相关参数，包括组内最大主用/备用个数、组内最小实例数以及虚机组等。 
 
激活SC组(ACTIVATE SCGROUP)：激活SC组，即整个SC组进行弹性扩容从而成为已部署状态。 
 
去激活SC组(DEACTIVATE SCGROUP)：去激活SC组，即整个SC组进行弹性缩容从而成为未部署状态。 
 
子主题： 
## 查询SC组(SHOW SCGROUP) 
## 查询SC组(SHOW SCGROUP) 
功能说明 
该命令用于查询指定NFS下的SC组信息，包括SC类型、组号、组内最大主用/备用个数、组内当前/目标/最小实例数以及虚机组等。 
具体查询方式： 
 
当不指定SC类型和SC组号时，该命令查询指定NFS下所有SC类型并且满足所选显示模式的SC组。 
 
当指定SC类型不指定SC组号时，该命令查询指定NFS下特定SC类型并且满足所选显示模式的SC组。 
 
当指定SC类型和SC组号时，该命令查询特定的某一SC组，此时所选显示模式不生效。 
 
注意事项 
使用该命令查询SC组时若指定SC组号，则必须同时指定SC类型，并且参数“显示模式”不生效，可任意选择一种模式。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要查询的SC组所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于指定要查询的SC组的SC类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|该参数用于指定要查询的SC组的组号，可以通过SHOW SCGROUP命令进行查询。
DISPLAYMODE|显示模式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: SHOWDEPLOYED|该参数用于指定SC组信息的显示模式。各参数选项的含义是：SHOWDEPLOYED（显示已部署）：EM仅显示已部署的SC组信息。如果不存在已部署的SC组，选择此选项查询后，EM会提示未查询到信息。SHOWUNDEPLOYED（显示未部署）：EM仅显示未部署的SC组信息。如果不存在未部署的SC组，选择此选项查询后，EM会提示未查询到信息。SHOWALL（显示全部）：EM显示包括已部署和未部署的全部SC组信息。如果已指定SC类型和SC组号，那么该组的部署状态已确定，不受此参数限制，可以选择任意一种选项进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于表示查询到的SC组的SC类型。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于表示查询到的SC组的组号。
SCGROUPN|SC组内最大主用个数|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于表示查询到的SC组的组内最大主用个数，即一个SC组内能同时作为主用SC正常工作的最大个数。
SCGROUPM|SC组内最大备用个数|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于表示查询到的SC组的组内最大备用个数，即一个SC组内能同时作为备用SC正常工作的最大个数。
SCGROUPCURRENT|SC组内当前实例数|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于表示查询到的SC组的组内当前的SC实例数，即查询时该SC组内正常工作的主用SC和备用SC的总个数。
SCGROUPTARGET|SC组内目标实例数|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于表示查询到的SC组的组内期望的SC实例数，即正常情况下SC组内当前实例数应该等于SC组内目标实例数。
SCPERGROUPMIN|SC组内最小实例数|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于表示查询到的SC组的组内最小实例数。SC组内当前实例数以及执行缩容命令后组内的实例数不能小于此值。
SERVERGROUP|虚机组|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的SC组的虚机组名称。配置了指定虚机组名称的SC只能部署到该虚机组内的虚机上。虚机的虚机组名称可以通过SHOW VM命令查询。
命令举例 
`
查询NFS实例名称为"CommonS_TMSP_0"的NFS下的所有SC组信息。
SHOW SCGROUP:NFSNAME="CommonS_TMSP_0",DISPLAYMODE="SHOWALL"
(No.1) : SHOW SCGROUP:NFSNAME="CommonS_TMSP_0",DISPLAYMODE="SHOWALL"
SC类型        SC组号 SC组内最大主用个数 SC组内最大备用个数 SC组内当前实例数 SC组内目标实例数 SC组内最小实例数 虚机组 
----------------------------------------------------------------------------------------------------------------
sc-tmsp-mgt   1      1                 1                 2               2               2                       
sc-tmsp-smc   1      1                 1                 2               2               2                       
sc-tmsp-mp    1      1                 1                 2               2               2                       
sc-tmsp-rosng 1      1                 1                 2               2               2                       
sc-tmsp-etcd  1      50                0                 1               1               1                       
sc-tmsp-amu   1      50                0                 1               1               1                      
----------------------------------------------------------------------------------------------------------------
记录数：6
` 
## 设置SC组(SET SCGROUP) 
## 设置SC组(SET SCGROUP) 
功能说明 
小心：设置虚机组功能仅限某些特殊业务及场景使用，一般不建议使用，操作不当可能会导致SC选择不到正确的虚机而部署失败。因此执行该操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于设置SC组的相关参数，包括组内最大主用/备用个数、组内最小实例数以及虚机组等。 
当需要根据业务需求对相关参数值进行调整时、或需要执行弹性扩容或缩容相关命令前，可以使用该命令。 
修改前后，可通过执行命令[SHOW SCGROUP]查询相关参数修改前的值以及修改后的值。
注意事项 
配置前： 
 
可先通过执行命令SHOW SCGROUP查询相关参数的当前值，确定是否需要进行修改。 
 
SC组内最大主用/备用个数为上限值而非当前值，修改不会直接触发SC的弹性扩容或缩容。 
 
SC组内最小实例数只有在修改后大于SC组内当前实例数时才会触发一致性检查，进而触发SC的弹性扩容，此时要确保有足够的资源。其他情况不会直接触发SC的弹性扩容或缩容。 
 
如果执行弹性扩容或缩容命令受到相关参数限制时，可以先执行该命令再进行弹性扩容或缩容操作。 
 
配置虚机组前需要确认业务需求，否则不要进行配置。并且该配置不会影响已部署的SC，即已配置好虚机组的SC不能通过此命令重新选择不同虚机组的虚机进行部署。 
 
如果指定的SC类型的部署策略为"Union"并且该类型为从SC类型，则不允许通过命令修改此类型SC组的相关参数，并且只能通过修改其主SC类型的SC组进行联动修改。 
 
配置时： 
 
当SC组的备份模式为空或1+1时，不允许设置SC组内最大主用、备用个数。 
 
当SC组的备份模式为N:N时，SC组内最大备用个数只允许设置为0。 
 
当SC组的备份模式为N+M且SC组内最大备用个数为0时，默认是负荷分担模式。 
 
SC组内最大主用、备用个数之和不允许超过SC组内最大实例数上限（一般为1000）。 
 
SC组内最小实例数不允许超过SC组内最大实例数（即SC组内最大主用、备用个数之和）。 
 
SC组内最大主用、备用个数以及最小实例数必须是弹性步长的整数倍。弹性步长可通过SHOW SCTYPE命令查询。 
 
配置后可通过执行命令[SHOW SCGROUP]查询相关参数是否配置成功。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要设置的SC组所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要设置的SC组的SC类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要设置的SC组的组号，可以通过SHOW SCGROUP命令进行查询。
SCGROUPN|SC组内最大主用个数|参数可选性: 任选参数类型: 数字参数范围: 1-1000|该参数用于设置SC组的组内最大主用个数，即一个SC组内能同时作为主用SC正常工作的最大个数。
SCGROUPM|SC组内最大备用个数|参数可选性: 任选参数类型: 数字参数范围: 0-1000|该参数用于设置SC组的组内最大备用个数，即一个SC组内能同时作为备用SC正常工作的最大个数。
SCPERGROUPMIN|SC组内最小实例数|参数可选性: 任选参数类型: 数字参数范围: 0-1000|该参数用于设置SC组的组内最小实例数，SC组内当前实例数以及执行缩容命令后组内的实例数不能小于此值。可以通过SHOW SCGROUP命令查询当前的SC组内最小实例数。
SERVERGROUP|虚机组|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于设置SC组的虚机组名称。配置了指定虚机组名称的SC只能部署到该虚机组内的虚机上。虚机的虚机组名称可以通过SHOW VM命令查询。该参数不要随意修改，仅限某些特殊业务及场景使用。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！输入的NFS实例名称不存在！输入的SC类型不存在！输入的SC组号不存在！SC组的备份模式为空，不允许设置SC组内最大主用、备用个数！SC组的备份模式为1+1，不允许设置SC组内最大主用、备用个数！SC组的备份模式为N:N，SC组内最大备用个数只能设置为0！设置后的SC组内最大主用、备用个数之和超过SC组内最大实例数的上限！设置后的SC组内最大主用、备用个数之和小于SC组内当前实例数！设置后的SC组内最小实例数大于SC组内最大实例数！没有输入任何一个要设置的参数的值！SC组内最大主用、备用个数以及最小实例数必须是弹性步长的整数倍！该SC不支持此操作！该SC类型有多个SC组并且SC组的备份模式为1+1，不允许设置SC组内最大主用、备用个数及最小实例数！
命令举例 
`
设置NFS实例名称为"Nupf_PacketForward_0"、SC类型为"sc-upf-pf"、SC组号为1的SC组的各项参数值，将SC组内最大主用/备用个数设置为2，SC组内最小实例数设置为1，虚机组设置为“aaa”。
SET SCGROUP:NFSNAME="Nupf_PacketForward_0",SCTYPE="sc-upf-pf",SCGROUPNUM=1,SCGROUPN=2,SCGROUPM=2,SCPERGROUPMIN=1,SERVERGROUP="aaa"
` 
## 激活SC组(ACTIVATE SCGROUP) 
## 激活SC组(ACTIVATE SCGROUP) 
功能说明 
小心：该命令属于高危命令，该操作将导致SC组的弹性扩容，请确保有足够的资源。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于激活指定的SC组。 
当部署的某个SC类型的SC组数无法满足业务需求时，可以执行此命令，对其进行整组的弹性扩容。 
激活SC组成功后，该SC组成为已部署状态，能够正常工作以满足业务的需求。可以通过[SHOW SCGROUP]命令查询并显示已部署的SC组的信息。后续可以根据业务需求进行SC组内的弹性扩容或缩容操作。
该命令支持批量激活SC组，即可以并发处理不同SC组的激活。额外组数最大不超过50组。 
注意事项 
该命令只能对已存在记录且未部署的SC组进行激活操作，可以通过[SHOW SCGROUP]命令查询并显示未部署的SC组的信息。
该命令支持批量激活SC组，一次最多可以激活的组数为51。 
执行命令需要一定时间，可在结果中查看进度。在此期间，不要执行其他弹性扩容或缩容的相关命令。 
命令执行成功后需要等待SC实例完成部署。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要激活的SC组所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要激活的SC组的SC类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要激活的SC组的组号，可以通过SHOW SCGROUP命令进行查询。该参数默认值为1，即默认激活组号为1的组。如果存在多个SC组，运维人员可指定组号进行激活。
EXTRANFSNAME|其他NFS的实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-4000|该参数用于指定其他需要并发激活的SC组所属的NFS实例名称，可以通过SHOW NFS命令进行查询。支持输入多个NFS实例名称，中间用"/"分隔，如"CommonS_IPS_0/CommonS_SIG_0"。
EXTRASCTYPE|其他NFS的SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-4000|该参数用于指定其他需要并发激活的SC组的SC类型，可以通过SHOW SCTYPE命令进行查询。支持输入多个SC类型，中间用"/"分隔，如"sc-ips/sc-sig"。
EXTRASCGROUPNUM|其他NFS的SC组号|参数可选性: 任选参数类型: 字符串参数范围: 1-400|该参数用于指定其他需要并发激活的SC组的组号，可以通过SHOW SCGROUP命令进行查询。支持输入多个SC组号，中间用"/"分隔，如"1/1"。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于呈现该命令的操作结果，包括如下结果。操作成功操作失败部分操作失败
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于呈现操作失败的SCGROUP对应的NFS实例名称。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于呈现操作失败的SCGROUP对应的SC类型。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 字符串参数范围: 1-1000|该参数用于呈现操作失败的SCGROUP对应的SC组号。
FAILREASON|失败原因|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-10|该参数用于呈现操作失败的SCGROUP的失败原因，包括如下类型。输入的NFS实例名称不存在输入的SC类型不存在任务冲突弹性扩容失败NFS未部署部分成功输入的SC组号不存在其他不支持Union的从SC类型
命令举例 
`
激活实例名称为"CommonS_IPS_0"的NFS下、SC类型为"sc-ips"、组号为1、2和3的SC组。
ACTIVATE SCGROUP:NFSNAME="CommonS_IPS_0",SCTYPE="sc-ips",SCGROUPNUM=1,EXTRANFSNAME="CommonS_IPS_0/CommonS_IPS_0",EXTRASCTYPE="sc-ips/sc-ips",EXTRASCGROUPNUM="2/3"
` 
## 去激活SC组(DEACTIVATE SCGROUP) 
## 去激活SC组(DEACTIVATE SCGROUP) 
功能说明 
小心：该命令属于高危命令，该操作将导致SC组的弹性缩容，请提前做好业务迁移，以免造成业务损失。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于去激活指定的SC组。 
当业务的负荷较低需要节省资源时，可以执行此命令，对其进行整组的弹性缩容。 
去激活SC组成功后，不会彻底删除SC组的记录，该SC组成为未部署状态，组内当前实例数为0，该SC组无法正常工作并且已释放占用的资源。可以通过[SHOW SCGROUP]命令查询并显示未部署的SC组的信息。
该命令支持批量去激活SC组，即可以并发处理不同SC组的去激活。额外组数最大不超过50组。 
注意事项 
该命令只能对已部署的SC组进行去激活操作，可以通过[SHOW SCGROUP]命令查询并显示已部署的SC组的信息。并且执行命令后该SC已部署的SC组数不能小于最小SC组数，否则无法执行去激活操作。最小SC组数可以通过[SHOW SCTYPE]命令进行查询，通过[SET SC]命令进行修改。
该命令支持批量去激活SC组，一次最多可以去激活的组数为51。 
执行命令需要一定时间，可在结果中查看进度。在此期间，不要执行其他弹性扩容或缩容的相关命令。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定要去激活的SC组所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要去激活的SC组的SC类型，可以通过SHOW SCTYPE命令进行查询。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|该参数用于指定要去激活的SC组的组号，可以通过SHOW SCGROUP命令进行查询。该参数默认值为1，即默认去激活组号为1的组。如果存在多个SC组，运维人员可指定组号进行去激活。
EXTRANFSNAME|其他NFS的实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-4000|该参数用于指定其他需要并发去激活的SC组所属的NFS实例名称，可以通过SHOW NFS命令进行查询。支持输入多个NFS实例名称，中间用"/"分隔，如"CommonS_IPS_0/CommonS_SIG_0"。
EXTRASCTYPE|其他NFS的SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-4000|该参数用于指定其他需要并发去激活的SC组的SC类型，可以通过SHOW SCTYPE命令进行查询。支持输入多个SC类型，中间用"/"分隔，如"sc-ips/sc-sig"。
EXTRASCGROUPNUM|其他NFS的SC组号|参数可选性: 任选参数类型: 字符串参数范围: 1-400|该参数用于指定其他需要并发去激活的SC组的组号，可以通过SHOW SCGROUP命令进行查询。支持输入多个SC组号，中间用"/"分隔，如"1/1"。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于呈现该命令的操作结果，包括如下结果。操作成功操作失败部分操作失败
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于呈现操作失败的SCGROUP对应的NFS实例名称。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于呈现操作失败的SCGROUP对应的SC类型。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 字符串参数范围: 1-1000|该参数用于呈现操作失败的SCGROUP对应的SC组号。
FAILREASON|失败原因|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-10|该参数用于呈现操作失败的SCGROUP的失败原因，包括如下类型。输入的NFS实例名称不存在输入的SC类型不存在任务冲突弹性缩容失败NFS未部署部分成功输入的SC组号不存在其他已部署的SC组数不能小于最小SC组数不支持Union的从SC类型
命令举例 
`
去激活实例名称为"CommonS_IPS_0"的NFS下、SC类型为"sc-ips"、组号为1、2和3的SC组。
DEACTIVATE SCGROUP:NFSNAME="CommonS_IPS_0",SCTYPE="sc-ips",SCGROUPNUM=1,EXTRANFSNAME="CommonS_IPS_0/CommonS_IPS_0",EXTRASCTYPE="sc-ips/sc-ips",EXTRASCGROUPNUM="2/3"
` 
# SC注册中心管理 
# SC注册中心管理 
背景知识 
为了能给客户展示SC注册的服务信息、服务策略能力等信息，需要将SC服务注册管理中心中SC的服务注册信息、服务策略能力信息，升级信息通过动态命令的方式展示出来。 
功能说明 
该配置用于显示SC在SC服务注册管理中注册的服务信息、服务策略能力等信息。 
子主题： 
## 查询服务注册信息(SHOW SERVICEINFO) 
## 查询服务注册信息(SHOW SERVICEINFO) 
功能说明 
该命令用于显示SC在SC服务注册管理中注册的服务信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|SC（Service Component）服务注册管理中注册的服务类型名称，例如：Namf_Communication。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务类型名称，例如：Namf_Communication。
SERVICETYPEID|服务类型ID|参数可选性: 必选参数类型: 数字参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务类型ID。
SERVICEINSTANCE|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务类型实例号。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的SC类型名称。
SCTYPEID|SC类型ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535|SC（Service Component）服务注册管理中注册的SC类型ID。
SCVERSION|SC版本号|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的SC版本号。
COMMID|CommID|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|SC（Service Component）服务注册管理中注册的CommID（common id）。
LINKSTATUS|服务链路状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务链路状态。
SERVICESTATUS|集群状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4294967295|SC（Service Component）服务注册管理中注册的所有SC的集群状态。
命令举例 
`
显示所有SC在SC服务注册管理中注册的服务信息。
SHOW SERVICEINFO
(No.12) : SHOW SERVICEINFO:
服务类型       服务类型ID 服务实例号    SC类型             SC类型ID SC版本号   CommID    服务链路状态 集群状态  
CommonS_HTTP_LB     7          0     sc_nfs_upgrade_agent    47    ScVersion1 117489641   无效    初始化
CommonS_HTTP_LB     7          0     sc_http_ddm             17    ScVersion1 117458921   无效    初始化
记录数：2
执行成功耗时: 0.224 秒
` 
## 查询服务能力信息(SHOW SERVICEABILITYINFO) 
## 查询服务能力信息(SHOW SERVICEABILITYINFO) 
功能说明 
该命令用于显示SC在SC服务注册管理中心中注册的服务策略能力信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|SC（Service Component）服务注册管理中注册的服务类型名称。
SERVICEABILITY|服务能力|参数可选性: 任选参数类型: 字符串参数范围: 1-64|SC（Service Component）服务注册管理中注册的服务策略能力。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICEABILITY|服务能力|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务策略能力。
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务类型名称。
SERVICETYPEID|服务类型ID|参数可选性: 必选参数类型: 数字参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务类型ID。
SERVICEINSTANCE|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务类型实例号。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务的SC类型名称。
SCTYPEID|SC类型ID|参数可选性: 必选参数类型: 数字参数范围: 0-65535|SC（Service Component）服务注册管理中注册的服务的SC类型名称。
COMMID|CommID|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|SC（Service Component）服务注册管理中注册的服务的CommID（common id）名称。
JNO|Job编号|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|SC（Service Component）服务注册管理中注册的Job编号。
TABLENAME|策略表名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务策略表名。
FORWARDPOLICY|策略类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务策略类型。
FORWARDCHANNELTYPE|策略通道类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务策略通道类型。
命令举例 
`
显示所有SC在SC服务注册管理中注册的服务策略能力信息。
SHOW SERVICEABILITYINFO
服务能力    服务类型          服务类型ID 服务实例号 SC类型              SC类型ID    CommID    Job编号 策略表名         策略类型 策略通道类型
nfs_update  Namf_Location      40         0         sc_nfs_upgrade_agent 50       671140841 546817  R_SC_28_00_0032 无效     TIPC
nfs_update  Namf_Communication 37         0         sc_nfs_upgrade_agent 47       620806121 546817  R_SC_25_00_002f 无效     TIPC
nfs_update  Namf_MT            38         0         sc_nfs_upgrade_agent 49       637585385 546817  R_SC_26_00_0031 无效     TIPC
记录数：3
` 
## 查询服务订阅能力信息(SHOW SERVICESUBABILITY) 
## 查询服务订阅能力信息(SHOW SERVICESUBABILITY) 
功能说明 
该命令用于查询SC（Service Component）在SC服务注册管理中注册的服务信息、服务策略能力等信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|SC（Service Component）服务注册管理中注册的服务类型名称，例如：Namf_Communication。该参数可以使用SHOW SERVICEINFO命令获取。
SERVICEINSTANCE|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务类型实例号。该参数可以使用SHOW SERVICEINFO命令获取。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|SC（Service Component）服务注册管理中注册的服务的SC类型名称。该参数可以使用SHOW SERVICEINFO命令获取。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SERVICETYPE|服务类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务类型名称，例如：Namf_Communication。该参数可以使用SHOW SERVICEINFO命令获取。
SERVICEINSTANCE|服务实例号|参数可选性: 必选参数类型: 数字参数范围: 0-255|SC（Service Component）服务注册管理中注册的服务类型实例号。该参数可以使用SHOW SERVICEINFO命令获取。
SERVICEABILITY|服务能力|参数可选性: 必选参数类型: 字符串参数范围: 0-32|SC（Service Component）服务注册管理中注册的服务策略能力。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|SC（Service Component）服务注册管理中注册的服务的SC类型名称。该参数可以使用SHOW SERVICEINFO命令获取。
命令举例 
`
查询服务类型名称为Nsmf_NupfManage、服务实例号为0、 SC类型名称为SC_SMF_UM的SC在SC服务注册管理中订阅的服务策略能力信息。
SHOW SERVICESUBABILITY:SERVICETYPENAME="Nsmf_NupfManage",SERVICEINSTANCE=0,SCTYPENAME="SC_SMF_UM"
服务类型         服务实例号           服务能力            SC类型
Nsmf_NupfManage    0                 sm_actl_group      SC_SMF_UM
记录数：1
执行成功 开始时间:2020-06-02 10:15:26 耗时: 0.135 秒
` 
# VM管理 
# VM管理 
背景知识 
VM（Virtual machine，虚机）是指通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统。 
在实际业务场景中，TMSP平台需要提供对运行在平台上的虚拟机进行自愈配置、重新启动、关闭虚机、开启虚机、隔离虚机、解隔离虚机、回收虚机、查询虚拟机相关信息等操作功能，进而对虚拟机进行管理。 
功能说明 
该配置下的命令用于管理TMSP平台上的虚拟机。 
 
进行弹性伸缩操作时，需要关闭虚机检测自愈功能，即使虚机自愈检测功能失效，参考命令SET AUTOHEALINGGLB和SET AUTOHEALINGLV。 
 
进行虚机重启时需确认虚机部署状态是已部署状态，使用命令SHOW VM可查看虚机部署状态。 
 
进行虚机启动时需确认虚机部署状态不是未部署状态，使用命令SHOW VM可查看虚机部署状态。 
 
进行关闭、隔离、回收虚机时，需要确认虚机是否为仲裁虚机，在确实需要操作仲裁虚机时需要提前使用命令MODIFY QUORUM VM将仲裁修改到其他虚机上。 
 
实际环境运行时虚机可能发生故障需要定位，此时需要进行虚机隔离操作，需确认虚机处于已部署状态。故障定位结束后通过解隔离操作解除虚机隔离状态，恢复正常。 
 
子主题： 
## VM心跳配置 
## VM心跳配置 
背景知识 
系统使用心跳机制维护虚机的状态。  
功能说明 
本命令用于设置虚机心跳相关参数。 
子主题： 
### 修改VM心跳相关配置(SET VMHEARTBEAT) 
### 修改VM心跳相关配置(SET VMHEARTBEAT) 
功能说明 
该命令用于修改虚机心跳相关参数。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
timeout|虚机心跳超时时长|参数可选性: 任选参数类型: 数字参数范围: 4-254默认值: 30|该参数用于设置虚机的心跳超时时长，单位秒。
命令举例 
`
修改虚机的心跳超时时长为5秒。
SET VMHEARTBEAT:TIMEOUT=5
` 
### 显示VM心跳相关配置(SHOW VMHEARTBEAT) 
### 显示VM心跳相关配置(SHOW VMHEARTBEAT) 
功能说明 
该命令用于查询虚机心跳相关参数。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
timeout|虚机心跳超时时长|参数可选性: 任选参数类型: 数字参数范围: 4-254默认值: 30|该参数用于显示虚机的心跳超时时长，单位秒。
命令举例 
`
显示虚机的心跳超时时长。
SHOW VMHEARTBEAT
(No.1) : SHOW VMHEARTBEAT:
虚机心跳超时时长(s)
12
记录数：1
执行成功耗时: 0.122 秒
` 
## VM自愈使能配置 
## VM自愈使能配置 
背景知识 
针对VM类型来配置自愈开关是否启用、自愈检查周期、自愈等待时间和自愈失败策略。 
功能说明 
该配置用于设置指定类型虚机的自愈配置。 
当全局自愈配置不能满足某种虚机的需要时，可以使用该配置定制该虚机类型的自愈配置。 
虚机类型可以通过[SHOW VMTYPE]命令查询。
NF实例可以通过[SHOW NF]命令查询。
子主题： 
### 新增指定VM类型的自愈配置(ADD VMAUTOHEALING) 
### 新增指定VM类型的自愈配置(ADD VMAUTOHEALING) 
功能说明 
该命令用于新增指定虚机类型的自愈配置。 
当业务需要在全局自愈配置的基础上针对某种虚机类型进行自愈配置时，使用该命令。 
可以通过[SHOW VMTYPE]命令查询虚机类型。
注意事项 
当对某种类型虚机进行自愈配置后，后续对该类型虚机进行自愈时以该配置为准，[SET AUTOHEALINGGLB]命令配置的自愈策略对此类型的虚机不生效。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 必选参数类型: 字符串参数范围: 1-16|该参数用于指定虚机类型。可以通过SHOW VMTYPE命令查询网元的虚机类型。
healingswitch|指定VM类型的自愈功能开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置指定的VM类型的自愈功能开关。各参数选项的含义是：禁用：关闭指定虚机类型的自愈功能。启用：开启指定虚机类型的自愈功能。指定VM类型的自愈功能开关默认为禁用。
waittime|自愈等待时间|参数可选性: 必选参数类型: 数字参数范围: 300-3600默认值: 540|该参数用于设置指定VM类型的自愈等待时间，控制在虚机和容器处于特定异常状态持续时间达到等待时间后才触发自愈功能。默认自愈等待时间为540s，即异常状态持续540s后，进行自愈操作。
powerontime|等待SC上电时间|参数可选性: 必选参数类型: 数字参数范围: 60-600默认值: 300|该参数用于设置等待SC上电时间。容器部署成功后，等待SC上电的时间，如果在设定时间内，SC状态没有变为正常，那么认为本次自愈操作失败。
命令举例 
`
新增GSU虚机的自愈策略：自愈功能开启，自愈等待时间为540s，等待SC上电时间300s。
ADD VMAUTOHEALING:VMTYPE="GSU",HEALINGSWITCH="ENABLE",WAITTIME=540,POWERONTIME=300
` 
### 修改指定VM类型的自愈配置(SET VMAUTOHEALING) 
### 修改指定VM类型的自愈配置(SET VMAUTOHEALING) 
功能说明 
该命令用于修改指定虚机类型的自愈配置。 
当维护人员对已经添加的指定虚机类型自愈配置进行修改时，可以使用该命令，修改指定VM类型的自愈功能开关和自愈等待时间。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 必选参数类型: 字符串参数范围: 1-16|该参数用于指定虚机类型。可以通过SHOW VMTYPE命令查询网元的虚机类型。
healingswitch|指定VM类型的自愈功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置指定的VM类型的自愈功能开关。各参数选项的含义是：禁用：关闭指定虚机类型的自愈功能。启用：开启指定虚机类型的自愈功能。指定VM类型的自愈功能开关默认为禁用。
waittime|自愈等待时间|参数可选性: 任选参数类型: 数字参数范围: 300-3600默认值: 540|该参数用于设置指定VM类型的自愈等待时间，控制在虚机和容器处于特定异常状态持续时间达到等待时间后才触发自愈功能。默认自愈等待时间为540s，即异常状态持续540s后，进行自愈操作。
powerontime|等待SC上电时间|参数可选性: 任选参数类型: 数字参数范围: 60-600默认值: 300|该参数用于设置等待SC上电时间。容器部署成功后，等待SC上电的时间，如果在设定时间内，SC状态没有变为正常，那么认为本次自愈操作失败。
命令举例 
`
修改GSU虚机的自愈策略：自愈功能开启，自愈等待时间为540s，等待SC上电时间300s。
SET VMAUTOHEALING:VMTYPE="GSU",HEALINGSWITCH="ENABLE",WAITTIME=540,POWERONTIME=300
` 
### 删除指定VM类型的自愈配置(DEL VMAUTOHEALING) 
### 删除指定VM类型的自愈配置(DEL VMAUTOHEALING) 
功能说明 
该命令用于删除指定虚机类型的自愈配置。 
当业务不需要针对某种类型虚机进行自愈配置时，使用该命令进行删除。 
注意事项 
删除配置后，该虚机类型将会按照[SET AUTOHEALINGGLB]命令配置的全局自愈配置进行自愈操作。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 必选参数类型: 字符串参数范围: 1-16|该参数用于指定虚机类型。可以通过SHOW VMTYPE命令查询网元的虚机类型。
命令举例 
`
删除GSU虚机的自愈策略。
DEL VMAUTOHEALING:VMTYPE="GSU"
` 
### 查询指定VM类型的自愈配置(SHOW VMAUTOHEALING) 
### 查询指定VM类型的自愈配置(SHOW VMAUTOHEALING) 
功能说明 
该命令用于查询指定虚机类型的自愈配置。 
当维护人员需要查询指定虚机类型的自愈配置，或者查看某种虚机类型的自愈配置参数时，可以使用该命令。 
若查询发现当前配置不符合需求，可以使用[SET VMAUTOHEALING]命令修改配置，或使用[DEL VMAUTOHEALING]命令删除配置。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 任选参数类型: 字符串参数范围: 1-16|该参数用于指定虚机类型。可以通过SHOW VMTYPE命令查询网元的虚机类型。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 任选参数类型: 字符串参数范围: 1-16|该参数用于指定虚机类型。可以通过SHOW VMTYPE命令查询网元的虚机类型。
healingswitch|指定VM类型的自愈功能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置指定的VM类型的自愈功能开关。各参数选项的含义是：禁用：关闭指定虚机类型的自愈功能。启用：开启指定虚机类型的自愈功能。指定VM类型的自愈功能开关默认为禁用。
waittime|自愈等待时间|参数可选性: 任选参数类型: 数字参数范围: 300-3600默认值: 540|该参数用于设置指定VM类型的自愈等待时间，控制在虚机和容器处于特定异常状态持续时间达到等待时间后才触发自愈功能。默认自愈等待时间为540s，即异常状态持续540s后，进行自愈操作。
powerontime|等待SC上电时间|参数可选性: 任选参数类型: 数字参数范围: 60-600默认值: 300|该参数用于设置等待SC上电时间。容器部署成功后，等待SC上电的时间，如果在设定时间内，SC状态没有变为正常，那么认为本次自愈操作失败。
命令举例 
`
查询GSU虚机的自愈策略。
SHOW VMAUTOHEALING:VMTYPE="GSU"
(No.1) : SHOW VMAUTOHEALING:VMTYPE="GSU"
虚机类型 指定VM类型的自愈功能开关 自愈等待时间(s)  等待SC上电时间(s)
-----------------------------------------------------------------
GSU      启用                     540            300
-----------------------------------------------------------------
记录数：1
执行成功 耗时: 0.207 秒
` 
## VM自愈级别配置 
## VM自愈级别配置 
背景知识 
针对VM类型来配置每个级别的自愈策略是否启用、自愈操作超时时间以及超时次数，灵活控制不同级别的自愈过程。 
功能说明 
当全局自愈级别配置不能满足某种虚机类型的需要时，可以使用该配置定制该虚机类型的自愈策略。 
不同的VM类型对虚机自愈的方式有不同的要求。 
 
当固定的某类容器出现异常，可以选择容器重建方式。 
 
当虚机软件层面出现问题，可以选择虚机重启. 
 
虚机硬件层面异常则可以选择虚机重建方式。 
 
子主题： 
### 新增指定VM类型的自愈级别配置(ADD VMAUTOHEALINGLV) 
### 新增指定VM类型的自愈级别配置(ADD VMAUTOHEALINGLV) 
功能说明 
该命令用于新增指定虚机类型的自愈级别配置。 
当业务需要在全局自愈级别配置的基础上针对某种虚机类型进行自愈级别配置，使用该命令。 
可以通过[SHOW VMAUTOHEALINGLV]命令查询配置信息。
注意事项 
当添加特定虚机类型的自愈级别后，该类型的虚机在自愈时，将按照该命令配置的内容进行自愈流程处理，[SET AUTOHEALINGLV]命令配置的自愈级别对此类型的虚机不生效。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 必选参数类型: 字符串参数范围: 1-16|参数作用：该参数用于指定虚机类型。数据来源：本端规划。配置原则：可以通过SHOW VMTYPE命令查询网元的虚机类型。
level|自愈级别|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
healingswitch|使能开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|参数作用：该参数用于设置自愈级别策略使能开关。数据来源：本端规划。配置原则：禁用：关闭当前选择级别的自愈策略。启用：开启当前选择级别的自愈策略。VRU重建级别默认开启，其他级别默认关闭。
timeout|自愈超时|参数可选性: 必选参数类型: 数字参数范围: 30-3600默认值: 600|参数作用：该参数用于设置自愈流程处理超时时间。自愈超时则认为自愈失败。数据来源：本端规划。配置原则：默认值为600s。该默认值一般不建议用户修改。
retrycount|重试次数|参数可选性: 必选参数类型: 数字参数范围: 0-255默认值: 1|参数作用：该参数用于设置自愈失败后的重试自愈的次数。自愈失败后重试的目的是增加自愈成功的机率。如果多次重试后仍然失败，则执行更低级别的自愈策略。数据来源：本端规划。配置原则：默认重试次数为1。该默认值一般不建议用户修改。
命令举例 
`
新增针对GSU虚机的级别为VRU重建的自愈策略，自愈功能开启，自愈执行超时为600s，自愈失败重试次数为1。
ADD VMAUTOHEALINGLV:VMTYPE="GSU",LEVEL="VRUREBUILD",HEALINGSWITCH="ENABLE",TIMEOUT=600,RETRYCOUNT=1
` 
### 修改指定VM类型的自愈级别配置(SET VMAUTOHEALINGLV) 
### 修改指定VM类型的自愈级别配置(SET VMAUTOHEALINGLV) 
功能说明 
该命令用于修改指定虚机类型的自愈级别配置。 
当维护人员对已经添加的指定虚机类型自愈级别配置想要进行修改时，可以使用该命令修改。 
可以通过[SHOW VMAUTOHEALINGLV]命令查询配置信息。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 必选参数类型: 字符串参数范围: 1-16|参数作用：该参数用于指定虚机类型。数据来源：本端规划。配置原则：可以通过SHOW VMTYPE命令查询网元的虚机类型。
level|自愈级别|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
healingswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|参数作用：该参数用于设置自愈级别策略使能开关。数据来源：本端规划。配置原则：禁用：关闭当前选择级别的自愈策略。启用：开启当前选择级别的自愈策略。VRU重建级别默认开启，其他级别默认关闭。
timeout|自愈超时|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 600|参数作用：该参数用于设置自愈流程处理超时时间。自愈超时则认为自愈失败。数据来源：本端规划。配置原则：默认值为600s。该默认值一般不建议用户修改。
retrycount|重试次数|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 1|参数作用：该参数用于设置自愈失败后的重试自愈的次数。自愈失败后重试的目的是增加自愈成功的机率。如果多次重试后仍然失败，则执行更低级别的自愈策略。数据来源：本端规划。配置原则：默认重试次数为1。该默认值一般不建议用户修改。
命令举例 
`
修改针对GSU虚机的级别为VRU重建的自愈策略，自愈功能开启，自愈执行超时为600s，自愈失败重试次数为2。
SET VMAUTOHEALINGLV:VMTYPE="GSU",LEVEL="VRUREBUILD",HEALINGSWITCH="ENABLE",TIMEOUT=600,RETRYCOUNT=2
` 
### 删除指定VM类型的自愈级别配置(DEL VMAUTOHEALINGLV) 
### 删除指定VM类型的自愈级别配置(DEL VMAUTOHEALINGLV) 
功能说明 
该命令用于删除指定虚机类型的自愈级别配置。 
当业务不需要针对某种类型虚机进行自愈级别配置时，使用该命令进行删除。 
注意事项 
删除配置后，该虚机类型将会按照[SET AUTOHEALINGLV]命令配置的全局自愈级别进行自愈操作。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 必选参数类型: 字符串参数范围: 1-16|参数作用：该参数用于指定虚机类型。数据来源：本端规划。配置原则：可以通过SHOW VMTYPE命令查询网元的虚机类型。
level|自愈级别|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
命令举例 
`
删除针对GSU虚机的VRU重建级别的自愈级别配置。
DEL VMAUTOHEALINGLV:VMTYPE="GSU",LEVEL="VRUREBUILD"
` 
### 查询指定VM类型的自愈级别配置(SHOW VMAUTOHEALINGLV) 
### 查询指定VM类型的自愈级别配置(SHOW VMAUTOHEALINGLV) 
功能说明 
该命令用于查询指定虚机类型的自愈级别配置。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 任选参数类型: 字符串参数范围: 1-16|参数作用：该参数用于指定虚机类型。数据来源：本端规划。配置原则：可以通过SHOW VMTYPE命令查询网元的虚机类型。
level|自愈级别|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
vmtype|虚机类型|参数可选性: 任选参数类型: 字符串参数范围: 1-16|参数作用：该参数用于指定虚机类型。数据来源：本端规划。配置原则：可以通过SHOW VMTYPE命令查询网元的虚机类型。
level|自愈级别|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: VRUREBUILD|参数作用：该参数用于标识自愈策略级别。自愈策略包含如下级别：数据来源：本端规划。配置原则：VRU（虚拟运行单元）重建：重新创建一个容器来替代原故障容器。虚机重启：重启虚机来恢复。虚机重建：删除当前虚机并创建一个相同虚机来恢复。自愈级别默认配置为VRU重建。虚机重启和虚机重建级别默认禁用。自愈级别都开启的情况下，优先级从高到低依次排序为：VRU重建，虚机重启，虚机重建。
healingswitch|使能开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|参数作用：该参数用于设置自愈级别策略使能开关。数据来源：本端规划。配置原则：禁用：关闭当前选择级别的自愈策略。启用：开启当前选择级别的自愈策略。VRU重建级别默认开启，其他级别默认关闭。
timeout|自愈超时|参数可选性: 任选参数类型: 数字参数范围: 30-3600默认值: 600|参数作用：该参数用于设置自愈流程处理超时时间。自愈超时则认为自愈失败。数据来源：本端规划。配置原则：默认值为600s。该默认值一般不建议用户修改。
retrycount|重试次数|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 1|参数作用：该参数用于设置自愈失败后的重试自愈的次数。自愈失败后重试的目的是增加自愈成功的机率。如果多次重试后仍然失败，则执行更低级别的自愈策略。数据来源：本端规划。配置原则：默认重试次数为1。该默认值一般不建议用户修改。
命令举例 
`
查询针对GSU虚机的VRU重建级别的自愈级别配置。
SHOW VMAUTOHEALINGLV:VMTYPE="GSU",LEVEL="VRUREBUILD"
((No.1) : SHOW VMAUTOHEALINGLV:VMTYPE="GSU",LEVEL="VRUREBUILD"
虚机类型 自愈级别 使能开关 自愈超时(s) 重试次数 
------------------------------------------------
GSU      VRU重建  启用     600         1        
------------------------------------------------
记录数：1
执行成功 耗时: 0.19 秒
` 
## VM性能统计管理 
## VM性能统计管理 
背景知识 
当命令显示虚机性能([SHOW VM])不能满足查询虚机性能统计的需要时，按虚机测量对象名信息配置是虚机性能统计的可选配置。
功能说明 
当虚机性能统计([SHOW VM])不能满足某类服务组件的需要时，可以使用该配置定制，通过设置虚机名称与别名的对应关系，在创建测试任务时可以选择创建的记录，进而可以查询到虚机的基本性能，包括内存、磁盘和CPU使用率等实时信息。
子主题： 
### 新增虚机名称配置(ADD PMVM) 
### 新增虚机名称配置(ADD PMVM) 
功能说明 
该命令用于新增虚机测量对象名与虚机测量对象名别名的对应关系记录。 
注意事项 
虚机测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMMEASINSTANCENAME|虚机测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示查询的虚机测量对象的名称。可以通过SHOW VM命令查询虚机测量对象名。
VMALIAS|虚机测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机测量对象别名。设置别名是为了便于记忆。
命令举例 
`
新增一条按虚机测量对象名及虚机测量对象别名的检索策略，虚机测量对象名为OMU_1，虚机测量对象别名为OMU_1。
ADD PMVM:VMMEASINSTANCENAME="OMU_1",VMALIAS="OMU_1"
` 
### 修改虚机名称配置(SET PMVM) 
### 修改虚机名称配置(SET PMVM) 
功能说明 
该命令用于修改虚机测量对象名与虚机测量对象名别名的对应关系记录。 
注意事项 
虚机测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMMEASINSTANCENAME|虚机测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示查询的虚机测量对象的名称。可以通过SHOW VM命令查询虚机测量对象名。
VMALIAS|虚机测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机测量对象别名。设置别名是为了便于记忆。
命令举例 
`
修改一条按虚机测量对象名及虚机测量对象别名的检索策略，修改虚机测量对象名为OMU_1，虚机测量对象别名为OMU_1。
SET PMVM:VMMEASINSTANCENAME="OMU_1",VMALIAS="OMU_1"
` 
### 删除虚机名称配置(DEL PMVM) 
### 删除虚机名称配置(DEL PMVM) 
功能说明 
该命令用于删除虚机测量对象名与虚机测量对象名别名的对应关系记录。 
注意事项 
虚机测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMMEASINSTANCENAME|虚机测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示查询的虚机测量对象的名称。可以通过SHOW VM命令查询虚机测量对象名。
命令举例 
`
删除一条按虚机测量对象名的检索策略，虚机测量对象名为OMU_1。
DEL PMVM:VMMEASINSTANCENAME="OMU_1"
` 
### 查询虚机名称配置(SHOW PMVM) 
### 查询虚机名称配置(SHOW PMVM) 
功能说明 
该命令用于查询虚机测量对象名与虚机测量对象名别名的对应关系记录。 
注意事项 
虚机测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMMEASINSTANCENAME|虚机测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示查询的虚机测量对象的名称。可以通过SHOW VM命令查询虚机测量对象名。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMMEASINSTANCENAME|虚机测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示查询的虚机测量对象的名称。可以通过SHOW VM命令查询虚机测量对象名。
VMALIAS|虚机测量对象别名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机测量对象别名。设置别名是为了便于记忆。
命令举例 
`
查询一条按虚机测量对象名的检索策略，虚机测量对象名为OMU_1。
SHOW PMVM:VMMEASINSTANCENAME="OMU_1"
(No.1) : SHOW PMVM:VMMEASINSTANCENAME="OMU_1" 
虚机测量对象名  虚机测量对象别名
OMU_1          OMU_1
记录数：1
执行成功 开始时间:2020-05-19 18:46:16 耗时: 0.421 秒
` 
## VM分类性能统计管理 
## VM分类性能统计管理 
背景知识 
当通过虚机规格创建测量任务来查询该规格的虚机性能时，如果不希望在创建测量任务的过程中呈现虚机规格真实名称，可配置虚机规格测量对象别名，并使用该别名创建虚机规格测量任务。 
功能说明 
当不希望在虚机规格性能统计任务的创建过程中显示虚机规格真实名称，可以使用该配置，通过设置虚机规格名称与别名的对应关系。在创建性能测量任务时，已配置别名的规格将不会再显示规格的真实名称。 
子主题： 
### 新增虚机规格配置(ADD PMVMSPEC) 
### 新增虚机规格配置(ADD PMVMSPEC) 
功能说明 
该命令用于增加虚机规格测量对象名与别名的对应关系。增加后，在创建虚机规格的测量任务时，显示虚机规格别名。 
注意事项 
虚机规格测量对象名在虚机规格中要实际存在。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMSPEC|虚机规格测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数表示需要创建测量任务的虚机规格名称。
VMSPECALIAS|虚机规格测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数表示与虚机规格测量对象名对应的别名。设置成功后，在创建虚机规格测量任务时，显示别名。
命令举例 
`
新增一条按虚机类型测量对象名及虚机类型测量对象别名的检索策略，虚机类型测量对象名为OMU-C4，虚机类型测量对象别名为OMUC4。
ADD PMVMSPEC:VMSPEC="OMU-C4",VMSPECALIAS="OMUC4"
` 
### 修改虚机规格配置(SET PMVMSPEC) 
### 修改虚机规格配置(SET PMVMSPEC) 
功能说明 
该命令用于修改虚机规格测量对象名与别名的对应关系记录。 
注意事项 
虚机规格测量对象名在虚机规格中要实际存在。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMSPEC|虚机规格测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数表示需要创建测量任务的虚机规格名称。
VMSPECALIAS|虚机规格测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数表示与虚机规格测量对象名对应的别名。设置成功后，在创建虚机规格测量任务时，显示别名。
命令举例 
`
修改一条按虚机类型测量对象名及虚机类型测量对象别名的检索策略，修改虚机类型测量对象名为OMU-C4，虚机类型测量对象别名为OMUC4。
SET PMVMSPEC:VMSPEC="OMU-C4",VMSPECALIAS="OMUC4"
` 
### 删除虚机规格配置(DEL PMVMSPEC) 
### 删除虚机规格配置(DEL PMVMSPEC) 
功能说明 
该命令用于删除虚机规格测量对象名与别名的对应关系记录。 
注意事项 
虚机规格测量对象名在虚机规格中要实际存在。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMSPEC|虚机规格测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-32|该参数表示需要创建测量任务的虚机规格名称。
命令举例 
`
删除一条按虚机类型测量对象名的检索策略，虚机类型测量对象名为OMU-C4。
DEL PMVMSPEC:VMSPEC="OMU-C4"
` 
### 查询虚机规格配置(SHOW PMVMSPEC) 
### 查询虚机规格配置(SHOW PMVMSPEC) 
功能说明 
该命令用于查询虚机规格测量对象名与别名的对应关系记录。 
注意事项 
虚机规格测量对象名在虚机规格中要实际存在。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMSPEC|虚机规格测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数表示需要创建测量任务的虚机规格名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMSPEC|虚机规格测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数表示创建测量任务的虚机规格名称。
VMSPECALIAS|虚机规格测量对象别名|参数可选性: 任选参数类型: 字符串参数范围: 1-32|该参数表示与虚机规格测量对象名对应的别名。设置成功后，在创建虚机规格测量任务时，显示别名。
命令举例 
`
查询一条按虚机规格测量对象名的检索策略，虚机规格测量对象名为OMU-C4。
SHOW PMVMSPEC:VMSPEC="OMU-C4"
(No.1) : SHOW PMVMSPEC:VMSPEC="OMU-C4"
虚机规格测量对象名  虚机规格测量对象别名
OMU-C4             OMUC4
记录数：1
执行成功 开始时间:2022-08-19 18:46:16 耗时: 0.421 秒
` 
## VM vCPU核性能统计管理 
## VM vCPU核性能统计管理 
背景知识 
当命令显示虚机性能([SHOW VM])不能满足查询虚机核性能统计的需要时，按虚机CPU核测量对象信息配置是虚机性能统计的可选配置。
功能说明 
当虚机性能统计([SHOW VM])不能满足某类服务组件的需要时，可以使用该配置定制，通过设置虚机核测量对象名称与别名的对应关系，在创建测试任务时可以选择创建的记录，进而可以查询到虚机核相关的基本性能，包括CPU核使用率等实时信息。
子主题： 
### 新增虚机CPU核名称配置(ADD PMVMCPUCORE) 
### 新增虚机CPU核名称配置(ADD PMVMCPUCORE) 
功能说明 
该命令用于增加虚机CPU核测量对象名称与其别名对应关系记录。 
注意事项 
虚机CPU核测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMCPUINSTANCENAME|虚机CPU核测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机CPU核测量对象的名称。
VMCPUCOREALIAS|虚机CPU核测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机CPU核测量对象别名。设置别名是便于记忆。
命令举例 
`
增加一条按虚机CPU核测量对象名及虚机CPU核测量对象别名的检索策略，设置虚机CPU核测量对象名为OMU_1_CPU1，虚机CPU核测量对象别名为OMU_1_CPU1。
ADD PMVMCPUCORE:VMCPUINSTANCENAME="OMU_1_CPU1",VMCPUCOREALIAS="OMU_1_CPU1"
` 
### 修改虚机CPU核名称配置(SET PMVMCPUCORE) 
### 修改虚机CPU核名称配置(SET PMVMCPUCORE) 
功能说明 
该命令用于修改虚机CPU核测量对象名称与其别名对应关系记录。 
注意事项 
虚机CPU核测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMCPUINSTANCENAME|虚机CPU核测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机CPU核测量对象的名称。
VMCPUCOREALIAS|虚机CPU核测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机CPU核测量对象别名。设置别名是便于记忆。
命令举例 
`
修改一条按虚机CPU核测量对象名及虚机CPU核测量对象别名的检索策略，设置虚机CPU核测量对象名为OMU_1_CPU1，虚机CPU核测量对象别名为OMU_1_CPU1。
SET PMVMCPUCORE:VMCPUINSTANCENAME="OMU_1_CPU1",VMCPUCOREALIAS="OMU_1_CPU1"
` 
### 删除虚机CPU核名称配置(DEL PMVMCPUCORE) 
### 删除虚机CPU核名称配置(DEL PMVMCPUCORE) 
功能说明 
该命令用于删除虚机CPU核测量对象名称与其别名对应关系记录。 
注意事项 
虚机CPU核测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMCPUINSTANCENAME|虚机CPU核测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机CPU核测量对象的名称。
命令举例 
`
删除一条按虚机CPU核测量对象名的检索策略，设置虚机CPU核测量对象名为OMU_1_CPU1。
DEL PMVMCPUCORE:VMCPUINSTANCENAME="OMU_1_CPU1"
` 
### 查询虚机CPU核名称配置(SHOW PMVMCPUCORE) 
### 查询虚机CPU核名称配置(SHOW PMVMCPUCORE) 
功能说明 
该命令用于查询虚机CPU核测量对象名称与其别名对应关系记录。 
注意事项 
虚机CPU核测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMCPUINSTANCENAME|虚机CPU核测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机CPU核测量对象的名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMCPUINSTANCENAME|虚机CPU核测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机CPU核测量对象的名称。
VMCPUCOREALIAS|虚机CPU核测量对象别名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机CPU核测量对象别名。设置别名是便于记忆。
命令举例 
`
查询一条按虚机CPU核测量对象名的检索策略，虚机CPU核测量对象名为OMU_1_CPU1。
SHOW PMVMCPUCORE:VMCPUINSTANCENAME="OMU_1_CPU1"
(No.1) : SHOW PMVMCPUCORE:VMCPUINSTANCENAME="OMU_1_CPU1"
虚机CPU核测量对象名 虚机CPU核测量对象别名
OMU_1_CPU1         OMU_1_CPU1
记录数：1
执行成功 耗时: 0.083 秒
` 
## VM硬盘分区性能统计管理 
## VM硬盘分区性能统计管理 
背景知识 
当命令显示虚机性能([SHOW VM])不能满足查询虚机硬盘分区性能统计的需要时，按虚机硬盘分区测量对象信息配置是虚机性能统计的可选配置。
功能说明 
当虚机性能统计([SHOW VM])不能满足某类服务组件的需要时，可以使用该配置定制，通过设置虚机硬盘分区测量对象名称与别名的对应关系，在创建测试任务时可以选择创建的记录，进而可以查询到虚机的分区相关基本性能，包括磁盘空间和使用率等实时信息。
子主题： 
### 新增虚机硬盘分区名称配置(ADD PMVMDISKPARTITION) 
### 新增虚机硬盘分区名称配置(ADD PMVMDISKPARTITION) 
功能说明 
该命令用于增加虚机硬盘分区测量对象名称与其别名对应关系记录。 
注意事项 
虚机硬盘分区测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMPARTINSTANCENAME|虚机硬盘分区测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机硬盘分区测量对象的名称。
VMPARTINSTANCEALIAS|虚机硬盘分区测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机硬盘分区测量对象别名。设置别名是便于记忆。
命令举例 
`
增加一条按虚机硬盘分区测量对象名及虚机硬盘分区测量对象别名的检索策略，虚机硬盘分区测量对象名为OMU_1_Disk_/var/lib/docker，虚机硬盘分区测量对象别名为OMU_1_Disk_/var/lib/docker。
ADD PMVMDISKPARTITION:VMPARTINSTANCENAME="OMU_1_Disk_/var/lib/docker",VMPARTINSTANCEALIAS="OMU_1_Disk_/var/lib/docker"
` 
### 修改虚机硬盘分区名称配置(SET PMVMDISKPARTITION) 
### 修改虚机硬盘分区名称配置(SET PMVMDISKPARTITION) 
功能说明 
该命令用于修改虚机硬盘分区测量对象名称与其别名对应关系记录。 
注意事项 
虚机硬盘分区测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMPARTINSTANCENAME|虚机硬盘分区测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机硬盘分区测量对象的名称。
VMPARTINSTANCEALIAS|虚机硬盘分区测量对象别名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机硬盘分区测量对象别名。设置别名是便于记忆。
命令举例 
`
修改一条按虚机硬盘分区测量对象名及虚机硬盘分区测量对象别名的检索策略，虚机硬盘分区测量对象名为OMU_1_Disk_/var/lib/docker，虚机硬盘分区测量对象别名为OMU_1_Disk_/var/lib/docker。
SET PMVMDISKPARTITION:VMPARTINSTANCENAME="OMU_1_Disk_/var/lib/docker",VMPARTINSTANCEALIAS="OMU_1_Disk_/var/lib/docker"
` 
### 删除虚机硬盘分区名称配置(DEL PMVMDISKPARTITION) 
### 删除虚机硬盘分区名称配置(DEL PMVMDISKPARTITION) 
功能说明 
该命令用于删除虚机硬盘分区测量对象名称与其别名对应关系记录。 
注意事项 
虚机硬盘分区测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMPARTINSTANCENAME|虚机硬盘分区测量对象名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机硬盘分区测量对象的名称。
命令举例 
`
删除一条按虚机硬盘分区测量对象名的检索策略，虚机硬盘分区测量对象名为OMU_1_Disk_/var/lib/docker。
DEL PMVMDISKPARTITION:VMPARTINSTANCENAME="OMU_1_Disk_/var/lib/docker"
` 
### 查询虚机硬盘分区名称配置(SHOW PMVMDISKPARTITION) 
### 查询虚机硬盘分区名称配置(SHOW PMVMDISKPARTITION) 
功能说明 
该命令用于查询虚机硬盘分区测量对象名称与其别名对应关系记录。 
注意事项 
虚机硬盘分区测量对象名在虚机中要实际存在，否则，无意义。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMPARTINSTANCENAME|虚机硬盘分区测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机硬盘分区测量对象的名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMPARTINSTANCENAME|虚机硬盘分区测量对象名|参数可选性: 任选参数类型: 字符串参数范围: 1-128|该参数表示查询的虚机硬盘分区测量对象的名称。
VMPARTINSTANCEALIAS|虚机硬盘分区测量对象别名|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要查询的虚机硬盘分区测量对象别名。设置别名是便于记忆。
命令举例 
`
查询一条按虚机硬盘分区测量对象名的检索策略，虚机硬盘分区测量对象名为OMU_1_Disk_/var/lib/docker。
SHOW PMVMDISKPARTITION:VMPARTINSTANCENAME="OMU_1_Disk_/var/lib/docker"
(No.1) : SHOW PMVMDISKPARTITION:VMPARTINSTANCENAME="OMU_1_Disk_/var/lib/docker"
虚机硬盘分区测量对象名                虚机硬盘分区测量对象别名
OMU_1_Disk_/var/lib/docker           OMU_1_Disk_/var/lib/docker
记录数：1
执行成功 耗时: 0.082 秒
` 
## 虚机内存剩余容量阈值 
## 虚机内存剩余容量阈值 
背景知识 
系统定时检测虚机的内存的剩余容量，在低于配置的阈值时进行告警。  
功能说明 
本命令用于设置虚机的内存剩余容量告警阈值。 
子主题： 
### 新增VM内存剩余容量告警阈值(ADD VMMEMTHRESHOLD) 
### 新增VM内存剩余容量告警阈值(ADD VMMEMTHRESHOLD) 
功能说明 
该命令用于新增虚机内存剩余容量告警阈值。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要增加内存剩余容量告警阈值的虚机名称或类型，支持以下几种方式：1、虚机名称，例如：GSU0001。2、虚机类型+规格，中间没有空格，例如：IPUC4。3、虚机类型，例如：IPU。4、DEFAULT_CONFIG，表示对所有虚机生效。按照1、2、3、4的优先级顺序生效，1最高。虚机名称、类型、规格可以使用“SHOW VM”或“SHOW VMTYPE”查询获得，并且大小写需要和查询结果保持一致。
threshold|剩余容量一级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 500|该参数设置虚机内存剩余容量的一级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold2|剩余容量二级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 800|该参数设置虚机内存剩余容量的二级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold3|剩余容量三级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 1024|该参数设置虚机内存剩余容量的三级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold4|剩余容量四级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 0|该参数设置虚机内存剩余容量的四级告警阈值。该参数设置为0表示不进行本级别的监控告警。
命令举例 
`
新增名称为OMU_1的虚机的内存剩余容量告警阈值。
ADD VMMEMTHRESHOLD:VM_NAME="OMU_1",THRESHOLD=500,THRESHOLD2=800,THRESHOLD3=1024,THRESHOLD4=0
` 
### 修改VM内存剩余容量告警阈值(SET VMMEMTHRESHOLD) 
### 修改VM内存剩余容量告警阈值(SET VMMEMTHRESHOLD) 
功能说明 
该命令用于修改虚机内存剩余容量告警阈值。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要增加内存剩余容量告警阈值的虚机名称或类型，支持以下几种方式：1、虚机名称，例如：GSU0001。2、虚机类型+规格，中间没有空格，例如：IPUC4。3、虚机类型，例如：IPU。4、DEFAULT_CONFIG，表示对所有虚机生效。按照1、2、3、4的优先级顺序生效，1最高。虚机名称、类型、规格可以使用“SHOW VM”或“SHOW VMTYPE”查询获得，并且大小写需要和查询结果保持一致。
threshold|剩余容量一级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 500|该参数设置虚机内存剩余容量的一级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold2|剩余容量二级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 800|该参数设置虚机内存剩余容量的二级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold3|剩余容量三级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 1024|该参数设置虚机内存剩余容量的三级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold4|剩余容量四级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-65536默认值: 0|该参数设置虚机内存剩余容量的四级告警阈值。该参数设置为0表示不进行本级别的监控告警。
命令举例 
`
修改所有虚机的内存剩余容量告警阈值。
SET VMMEMTHRESHOLD:VM_NAME="DEFAULT_CONFIG",THRESHOLD=500,THRESHOLD2=800,THRESHOLD3=1024,THRESHOLD4=0
` 
### 删除VM内存剩余容量告警阈值(DEL VMMEMTHRESHOLD) 
### 删除VM内存剩余容量告警阈值(DEL VMMEMTHRESHOLD) 
功能说明 
该命令用于删除虚机内存剩余容量告警阈值。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要增加内存剩余容量告警阈值的虚机名称或类型，支持以下几种方式：1、虚机名称，例如：GSU0001。2、虚机类型+规格，中间没有空格，例如：IPUC4。3、虚机类型，例如：IPU。4、DEFAULT_CONFIG，表示对所有虚机生效。按照1、2、3、4的优先级顺序生效，1最高。虚机名称、类型、规格可以使用“SHOW VM”或“SHOW VMTYPE”查询获得，并且大小写需要和查询结果保持一致。
命令举例 
`
删除虚机名称为OMU_0的阈值配置。
DEL VMMEMTHRESHOLD:VM_NAME="OMU_0"
` 
### 查询VM内存剩余容量告警阈值(SHOW VMMEMTHRESHOLD) 
### 查询VM内存剩余容量告警阈值(SHOW VMMEMTHRESHOLD) 
功能说明 
该命令用于查询虚机内存剩余容量告警阈值。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要增加内存剩余容量告警阈值的虚机名称或类型，支持以下几种方式：1、虚机名称，例如：GSU0001。2、虚机类型+规格，中间没有空格，例如：IPUC4。3、虚机类型，例如：IPU。4、DEFAULT_CONFIG，表示对所有虚机生效。按照1、2、3、4的优先级顺序生效，1最高。虚机名称、类型、规格可以使用“SHOW VM”或“SHOW VMTYPE”查询获得，并且大小写需要和查询结果保持一致。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要增加资源使用率告警阈值的虚机名称。该参数设置为DEFAULT_CONFIG表示对所有虚机的资源使用率告警阈值进行设置。
threshold|剩余容量一级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-65536默认值: 500|该参数设置虚机内存剩余容量的一级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold2|剩余容量二级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-65536默认值: 800|该参数设置虚机内存剩余容量的二级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold3|剩余容量三级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-65536默认值: 1024|该参数设置虚机内存剩余容量的三级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold4|剩余容量四级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-65536默认值: 0|该参数设置虚机内存剩余容量的四级告警阈值。该参数设置为0表示不进行本级别的监控告警。
命令举例 
`
查询虚机的内存剩余容量告警阈值。
SHOW VMMEMTHRESHOLD
(No.1) : SHOW VMMEMTHRESHOLD:
虚机名称         剩余容量一级告警阈值(MB)      剩余容量二级告警阈值(MB)     剩余容量三级告警阈值(MB)     剩余容量四级告警阈值(MB)
DEFAULT_CONFIG   500                         800                         1024                        0
记录数：1
执行成功 开始时间:2020-05-21 16:56:58 耗时: 1.16 秒
` 
## VM使用率告警阈值 
## VM使用率告警阈值 
背景知识 
系统定时检测虚机的CPU、内存、硬盘的使用率，在超过配置的阈值时进行告警。 
功能说明 
该配置用于设置虚机的CPU、内存、硬盘的使用率告警阈值。 
子主题： 
### 新增VM使用率告警阈值(ADD VMTHRESHOLD) 
### 新增VM使用率告警阈值(ADD VMTHRESHOLD) 
功能说明 
该命令用于新增虚机资源使用率告警阈值。 
命令执行成功后，当配置的虚机上CPU、内存、磁盘使用率超过配置的告警阈值后，系统会上报相应的告警。 
注意事项 
 
配置阈值时，请确认阈值的合理性。 
 
阈值配置为0时，不上报告警。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要增加资源使用率告警阈值的虚机名称或类型，支持以下几种方式：虚机名称，例如：GSU0001。虚机类型+规格，中间没有空格，例如：IPUC4。虚机类型，例如：IPU。DEFAULT_CONFIG，表示对所有虚机生效。按列表的优先级顺序生效，虚机名称优先级最高。虚机名称、类型、规格可以使用SHOW VM或SHOW VMTYPE命令查询获取，并且大小写需要和查询结果保持一致。
res_type|资源类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-3|该参数表示虚机需要设置告警阈值的资源类型，选项如下：CPU：表示需要对虚机的CPU使用率设置告警阈值。内存：表示需要对虚机的内存使用率设置告警阈值。硬盘：表示需要对虚机的硬盘使用率设置告警阈值。
threshold|一级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 90|该参数设置虚机资源使用率的一级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold2|二级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的二级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold3|三级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的三级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold4|四级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的四级告警阈值。该参数设置为0表示不进行本级别的监控告警。
命令举例 
`
新增虚机类型为OMU的内存使用率告警阈值， 一级告警阈值为80，二级告警阈值为60， 三级告警阈值为40， 四级告警阈值关闭。
ADD VMTHRESHOLD:VM_NAME="OMU",RES_TYPE="MEMORY",THRESHOLD=80,THRESHOLD2=60,THRESHOLD3=40,THRESHOLD4=0
` 
### 修改VM使用率告警阈值(SET VMTHRESHOLD) 
### 修改VM使用率告警阈值(SET VMTHRESHOLD) 
功能说明 
该命令用于修改虚机资源使用率告警阈值。 
命令执行成功后，当配置的虚机上CPU、内存、磁盘使用率超过配置的告警阈值后，系统会上报相应的告警。 
注意事项 
 
配置阈值时，请确认阈值的合理性。 
 
阈值配置为0时，不上报告警。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要增加资源使用率告警阈值的虚机名称或类型，支持以下几种方式：虚机名称，例如：GSU0001。虚机类型+规格，中间没有空格，例如：IPUC4。虚机类型，例如：IPU。DEFAULT_CONFIG，表示对所有虚机生效。按列表的优先级顺序生效，虚机名称优先级最高。虚机名称、类型、规格可以使用SHOW VM或SHOW VMTYPE命令查询获取，并且大小写需要和查询结果保持一致。
res_type|资源类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-3|该参数表示虚机需要设置告警阈值的资源类型，选项如下：CPU：表示需要对虚机的CPU使用率设置告警阈值。内存：表示需要对虚机的内存使用率设置告警阈值。硬盘：表示需要对虚机的硬盘使用率设置告警阈值。
threshold|一级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 90|该参数设置虚机资源使用率的一级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold2|二级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的二级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold3|三级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的三级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold4|四级告警阈值|参数可选性: 必选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的四级告警阈值。该参数设置为0表示不进行本级别的监控告警。
命令举例 
`
修改虚机类型为OMU的内存使用率告警阈值，一级告警阈值为80，二级告警阈值为60， 三级告警阈值为40， 四级告警阈值关闭。
SET VMTHRESHOLD:VM_NAME="OMU",RES_TYPE="MEMORY",THRESHOLD=80,THRESHOLD2=60,THRESHOLD3=40,THRESHOLD4=0
` 
### 删除VM使用率告警阈值(DEL VMTHRESHOLD) 
### 删除VM使用率告警阈值(DEL VMTHRESHOLD) 
功能说明 
该命令用于删除虚机资源使用率告警阈值。 
命令执行成功后，系统不会上报虚机CPU、内存、磁盘使用率超过阈值的告警。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数表示需要增加资源使用率告警阈值的虚机名称或类型，支持以下几种方式：虚机名称，例如：GSU0001。虚机类型+规格，中间没有空格，例如：IPUC4。虚机类型，例如：IPU。DEFAULT_CONFIG，表示对所有虚机生效。按列表的优先级顺序生效，虚机名称优先级最高。虚机名称、类型、规格可以使用SHOW VM或SHOW VMTYPE命令查询获取，并且大小写需要和查询结果保持一致。
res_type|资源类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-3|该参数表示虚机需要设置告警阈值的资源类型，选项如下：CPU：表示需要对虚机的CPU使用率设置告警阈值。内存：表示需要对虚机的内存使用率设置告警阈值。硬盘：表示需要对虚机的硬盘使用率设置告警阈值。
命令举例 
`
删除虚机类型为OMU的内存使用率告警阈值。
DEL VMTHRESHOLD:VM_NAME="OMU",RES_TYPE="MEMORY"
` 
### 查询VM使用率告警阈值(SHOW VMTHRESHOLD) 
### 查询VM使用率告警阈值(SHOW VMTHRESHOLD) 
功能说明 
该命令用于查询虚机资源使用率告警阈值的配置情况。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要增加资源使用率告警阈值的虚机名称或类型，支持以下几种方式：虚机名称，例如：GSU0001。虚机类型+规格，中间没有空格，例如：IPUC4。虚机类型，例如：IPU。DEFAULT_CONFIG，表示对所有虚机生效。按列表的优先级顺序生效，虚机名称优先级最高。虚机名称、类型、规格可以使用SHOW VM或SHOW VMTYPE命令查询获取，并且大小写需要和查询结果保持一致。
res_type|资源类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-3|该参数表示虚机需要设置告警阈值的资源类型，选项如下：CPU：表示需要对虚机的CPU使用率设置告警阈值。内存：表示需要对虚机的内存使用率设置告警阈值。硬盘：表示需要对虚机的硬盘使用率设置告警阈值。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
vm_name|虚机名称或类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数表示需要增加资源使用率告警阈值的虚机名称或类型，支持以下几种方式：虚机名称，例如：GSU0001。虚机类型+规格，中间没有空格，例如：IPUC4。虚机类型，例如：IPU。DEFAULT_CONFIG，表示对所有虚机生效。按列表的优先级顺序生效，虚机名称优先级最高。虚机名称、类型、规格可以使用SHOW VM或SHOW VMTYPE命令查询获取，并且大小写需要和查询结果保持一致。
res_type|资源类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-3|该参数表示虚机需要设置告警阈值的资源类型，选项如下：CPU：表示需要对虚机的CPU使用率设置告警阈值。内存：表示需要对虚机的内存使用率设置告警阈值。硬盘：表示需要对虚机的硬盘使用率设置告警阈值。
threshold|一级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 90|该参数设置虚机资源使用率的一级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold2|二级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的二级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold3|三级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的三级告警阈值。该参数设置为0表示不进行本级别的监控告警。
threshold4|四级告警阈值|参数可选性: 任选参数类型: 数字参数范围: 0-100默认值: 0|该参数设置虚机资源使用率的四级告警阈值。该参数设置为0表示不进行本级别的监控告警。
命令举例 
`
查询虚机类型为OMU的内存使用率告警阈值。
SHOW VMTHRESHOLD:VM_NAME="OMU",RES_TYPE="MEMORY"
(No.4) : SHOW VMTHRESHOLD:VM_NAME="OMU",RES_TYPE="MEMORY"
操作维护       虚机名称或类型 资源类型 一级告警阈值(%) 二级告警阈值(%) 三级告警阈值(%) 四级告警阈值(%) 
-------------------------------------------------------------------------------------------------------
复制 修改 删除 OMU            内存     90              80              70              0               
-------------------------------------------------------------------------------------------------------
记录数：1
执行成功 开始时间:2020-05-21 16:56:58 耗时: 1.16 秒
` 
## VM仲裁服务管理 
## VM仲裁服务管理 
背景知识 
TMSP平台需要对提供仲裁服务的虚机进行查询、个数修改、修改服务所在虚机。 
仲裁：当两个数据中心之间的链路故障或其中一个数据中心故障时，两个数据中心之间无法实时同步，此时只能由其中一个数据中心继续提供服务。为了保证数据一致性，双活系统通过仲裁机制决定哪端数据中心继续提供业务。仲裁机制的功能由仲裁服务所在虚机提供。 
仲裁虚机的作用：主备模块的主备决策，保证业务功能主备一致，避免出现脑裂（双主）引起业务异常。 
功能说明 
VM仲裁服务管理用于查询当前提供仲裁服务的虚机信息，出于资源限制或现有仲裁节点可能无法工作，可用本命令减少或增加仲裁节点虚机个数.或者更改提供仲裁服务所在的虚机。 
VM仲裁服务管理命令主要包括查询、修改操作： 
 
查询仲裁虚机信息(SHOW QUORUM VM)：查询仲裁所在虚机信息，包括虚机名称、虚机部署状态、运行状态、管理ip以及虚机类型等。在对当前仲裁虚机进行其他操作前后可以使用该命令进行查询。 
 
修改仲裁虚机(MODIFY QUORUM VM)：修改仲裁服务所在虚机，将虚机A上的仲裁服务修改到虚机B上。 
 
修改仲裁个数(MODIFY QUORUM NUM)：修改带有仲裁服务的虚机个数，增加或减少带有仲裁服务的虚机个数。 
 
子主题： 
### 查询仲裁服务所在虚机的信息(SHOW QUORUM VM) 
### 查询仲裁服务所在虚机的信息(SHOW QUORUM VM) 
功能说明 
该命令用于显示当前设置为仲裁节点的虚机信息，包括该虚机的虚机名称、虚机部署状态、虚机运行状态、虚机管理面IP以及虚机类型等信息。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示仲裁节点虚机名称。
DEPLOYSTATE|部署状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-19|该参数用于显示被设置为仲裁节点的虚机的部署状态。部署状态有：已部署部署中未部署待缩容缩容中待弹出弹出中待重启重启中待自愈重启重启自愈中待自愈重建重建自愈中待关机关闭中已关机待启动启动中隔离中已隔离已预占待预占预占中待取消预占正在取消预占
RUNSTATE|运行状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示仲裁节点虚机运行状态。运行状态有：运行中错误
MGTIP|管理IP|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示仲裁节点虚机管理IP地址。
VMTYPE|类型|参数可选性: 任选参数类型: 字符串参数范围: 0-8|该参数用于显示仲裁节点虚机类型。
命令举例 
`
查询仲裁节点的虚机信息
SHOW QUORUM VM
(No.1) : SHOW QUORUM VM:
虚机名称     部署状态    运行状态   管理IP     类型
------------------------------------------------------
AMUC20003    已部署      运行中  128.14.41.1  AMU
------------------------------------------------------
记录数：4
执行成功   开始时间:2020-08-25 17:24:33 耗时: 0.202 秒
` 
### 修改仲裁服务节点数目(MODIFY QUORUM NUM) 
### 修改仲裁服务节点数目(MODIFY QUORUM NUM) 
功能说明 
该命令用于修改设置为仲裁节点的虚机数目。至少要有一个虚机开启仲裁服务. 当资源限制时，使用本命令减少仲裁虚机；若当前仲裁虚机无法继续提供仲裁服务，可用本命令增加仲裁节点虚机. 
注意事项 
请在VRU_TMSP_MGT主备运行正常的情况下修改。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
QUORUMNUM|仲裁服务节点数目|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-9|该参数用于设置仲裁服务虚机个数。目前只支持1/3/5/7/9。不可填写为其他数值。可用SHOW QUORUM VM 命令查询当前已设置为仲裁的虚机信息。除omu外的其他虚机都可以设置为仲裁。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
QUORUMNUM|仲裁服务节点数目|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-9|该参数用于显示修改后的仲裁服务虚机个数。
命令举例 
`
修改仲裁节点的虚机个数为3。
MODIFY QUORUM NUM:QUORUMNUM=3
(No.1) : MODIFY QUORUM NUM:QUORUMNUM=3
------------------------------------------
执行成功    开始时间:2021-01-14 07:06:04 耗时: 0.216 秒
` 
### 修改提供仲裁服务的虚机(MODIFY QUORUM VM) 
### 修改提供仲裁服务的虚机(MODIFY QUORUM VM) 
功能说明 
该命令用于调整仲裁服务所在虚机。当原提供仲裁服务的虚机可能无法继续工作时，需要将仲裁服务调整到另一虚机上。命令成功后该虚机可提供仲裁服务。 
注意事项 
请在VRU_TMSP_MGT主备运行正常的情况下修改。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SOURCEVMNAME|源虚机名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于设置待取消仲裁服务的虚机名称。该虚机名对应虚机需已设置仲裁服务(参考SHOW QUORUM VM命令查看仲裁服务虚机名称)。
DESTVMNAME|目的虚机名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于设置将要设置仲裁服务的虚机名称。该虚机类型不能为OMU。其他虚机都可以设置为仲裁。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SOURCEVMNAME|源虚机名|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示已取消仲裁服务的虚机名称。
DESTVMNAME|目的虚机名|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示已设置仲裁服务的虚机名称。
命令举例 
`
修改仲裁服务所在虚机，源虚机名为IPU_6_0_0，目的虚机名为IPU_6_0_1。
MODIFY QUORUM VM:SOURCEVMNAME=IPU_6_0_0,DESTVMNAME=IPU_6_0_1
(No.1) : MODIFY QUORUM VM:SOURCEVMNAME=IPU_6_0_0,DESTVMNAME=IPU_6_0_1
------------------------------------------
执行成功    开始时间:2021-01-14 07:06:04 耗时: 0.216 秒
` 
## VM资产采集管理 
## VM资产采集管理 
背景知识 
VM资产采集功能是对网元内的各个虚机的资产信息进行采集，采集内容包括：IT资产、资产账号、资产运行状态、安全基线核查信息。 
TMSP平台提供查询资产采集策略管理功能和设置资产采集策略功能。资产采集策略包含定时采集开关、采集时间、每批采集虚机数。 
功能说明 
VM资产采集管理提供查询VM资产管理策略和设置VM资产管理策略的方法： 
 
查询VM资产管理策略(SHOW VMASSETMANPOLICY)：查询系统资产信息采集功能配置，包括：定时采集开关、定时采集时间、每批采集虚机数。 
 
设置VM资产管理策略(SET VMASSETMANPOLICY)：设置系统资产信息采集功能配置，包括：定时采集开关、定时采集时间、每批采集虚机数。 
 
子主题： 
### 查询VM资产管理策略(SHOW VMASSETMANPOLICY) 
### 查询VM资产管理策略(SHOW VMASSETMANPOLICY) 
功能说明 
该命令用于显示系统资产信息采集功能配置情况，包括定时采集开关、定时采集时间、每批采集虚机数。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
COLLECTIONSWITCH|定时采集开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: 0|该参数用于显示当前系统是否开启资产信息定时采集功能。关闭：表示关闭资产信息定时采集。开启：表示开启资产信息定时采集。
COLLECTIONTIME|采集时间|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前系统资产信息定时采集时间，当定时采集开关设置为开启时，到达该时间会自动采集各个虚机的资产信息。
COLLECTIONVMSBATCH|每批采集虚机数|参数可选性: 必选参数类型: 数字参数范围: 1-32默认值: 8|资产采集为分批采集，该参数用于显示当前系统设置的资产信息采集时，每批采集的虚机数量。举例：一个网元有20个虚机，如果该参数设置为5，那么每次采集5个虚机的资产信息，直到所有虚机采集完成。
命令举例 
`
查询VM资产管理策略。
SHOW VMASSETMANPOLICY
(No.1) : SHOW VMASSETMANPOLICY:
定时采集开关     采集时间    每批采集虚机数   
------------------------------------------------------
开启             03:23      8
------------------------------------------------------
记录数：1
执行成功   开始时间:2022-05-6 17:24:33 耗时: 0.202 秒
` 
### 设置VM资产管理策略(SET VMASSETMANPOLICY) 
### 设置VM资产管理策略(SET VMASSETMANPOLICY) 
功能说明 
该命令用于设置系统资产信息采集功能配置，该配置信息包括：定时采集开关、定时采集时间、每批采集虚机数。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
COLLECTIONSWITCH|定时采集开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: 0|该参数用于设置当前系统是否开启资产信息定时采集功能。关闭：表示关闭资产信息定时采集。开启：表示开启资产信息定时采集。
COLLECTIONTIME|采集时间|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于设置当前系统资产信息定时采集时间，当定时采集开关设置为开启时，到达该时间会自动采集各个虚机的资产信息。
COLLECTIONVMSBATCH|每批采集虚机数|参数可选性: 任选参数类型: 数字参数范围: 1-32默认值: 8|资产采集为分批采集，该参数用于设置当前系统设置的资产信息采集时，每批采集的虚机数量。举例：一个网元有20个虚机，如果该参数设置为5，那么每次采集5个虚机的资产信息，直到所有虚机采集完成。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
COLLECTIONSWITCH|定时采集开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: 0|该参数用于显示当前系统是否开启资产信息定时采集功能。关闭：表示关闭资产信息定时采集。开启：表示开启资产信息定时采集。
COLLECTIONTIME|采集时间|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前系统资产信息定时采集时间，当定时采集开关设置为开启时，到达该时间会自动采集各个虚机的资产信息。
COLLECTIONVMSBATCH|每批采集虚机数|参数可选性: 必选参数类型: 数字参数范围: 1-32默认值: 8|资产采集为分批采集，该参数用于显示当前系统设置的资产信息采集时，每批采集的虚机数量。举例：一个网元有20个虚机，如果该参数设置为5，那么每次采集5个虚机的资产信息，直到所有虚机采集完成。
命令举例 
`
定时采集开关开启。
SET VMASSETMANPOLICY:COLLECTIONSWITCH="ENABLE"
` 
## 重启VM(RESET VM) 
## 重启VM(RESET VM) 
功能说明 
该命令用于重启指定的虚机。 
根据实际情况，需要重启虚机时（如虚机异常），使用该命令。 
执行成功后，虚机将重新启动。 
注意事项 
 
操作前，需确认指定虚机“部署状态”为“已部署”，可通过SHOW VM命令查看。 
 
操作完成后，可通过SHOW VM命令查看指定虚机“运行状态”是否为“运行中”。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要重启的虚机名称。虚机名称可以通过SHOW VM命令获取。虚机名称由以下两部分组成，以STU0001为例进行说明。虚机类型：STU编号：0001
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示重启指定虚机的操作结果，结果包括：操作成功操作超时其他失败虚机不存在备用虚机不在线业务不可以迁移业务迁移失败虚机状态不是runningNF的管理状态是锁定状态，不允许该操作查询NF管理状态失败NF的管理状态是关闭中，不允许该操作正在重启基础虚机，请稍后查询虚机状态系统正在进行其他虚机操作，请稍后再试。VMM重启失败。MANO重启失败。
命令举例 
`
重启虚机，虚机名称为OMU_6_20_0。
RESET VM:VMNAME="OMU_6_20_0"
` 
## 关闭VM(SHUTDOWN VM) 
## 关闭VM(SHUTDOWN VM) 
功能说明 
该命令用于关闭指定的虚机。 
根据实际情况，需要关闭虚机时（如已部署虚机故障或不再需要使用），使用该命令。 
执行成功后，关闭该虚机。/p> 
注意事项 
 
操作前，需确认指定虚机“部署状态”为“已部署”，可通过SHOW VM命令查看。 
 
操作前，需确认指定虚机不是仲裁节点，可通过SHOW QUORUM VM命令查看。如果是仲裁节点，则关闭指定虚机前，需要通过MODIFY QUORUM VM命令将仲裁修改到其他虚机上。如果指定虚机的类型为OMU/AMU，则关闭指定虚机前，需要通过SET QUORUM命令关闭仲裁。 
 
操作完成后，可通过SHOW VM命令查看虚机是否关闭。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|VM 名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要关闭的虚机名称。虚机名称可以通过SHOW VM命令获取。虚机名称由以下两部分组成，以STU0001为例进行说明。虚机类型：STU编号：0001
OPMODE|操作方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: GRACEFULLY|该参数用于配置关闭虚机的操作方式，包括以下两种关闭方式：参数选项的含义是：GRACEFULLY（优雅关闭）：系统将被关闭的虚机上的业务迁移到其他虚机，迁移完成后，系统才会关闭虚机。FORCELY（强制关闭）：系统会立即执行关闭操作。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示关闭虚机操作的结果，结果包括：操作成功正在执行相同的命令，请稍后再试。操作超时虚机不存在主OMU不能关闭仲裁未关闭业务不能迁移业务迁移失败虚机操作失败其他失败系统正在进行其他虚机操作，请稍后再试。虚机是仲裁节点。
命令举例 
`
“优雅关闭”虚机，“虚机名称”为OMU_6_20_0。
SHUTDOWN VM:VMNAME="OMU_6_20_0",OPMODE="GRACEFULLY"
` 
## 启动VM(LAUNCH VM) 
## 启动VM(LAUNCH VM) 
功能说明 
该命令用于启动指定的虚机。 
当虚机处于已停止状态，根据实际情况需要使用该虚机时，可使用本命令启动该虚机。 
命令执行成功后，虚机将启动。 
注意事项 
 
操作完成后，可通过SHOW VM命令查看虚机是否启动。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要启动的虚机名称。虚机名称可以通过SHOW VM命令获取。虚机名称由以下两部分组成，以STU0001为例进行说明。虚机类型：ST编号：000
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示启动虚机操作的结果，结果包括：操作成功操作超时虚机不存在其他失败系统正在进行其他虚机操作，请稍后再试。
命令举例 
`
启动虚机，虚机名称为OMU_6_20_0。LAUNCH VM:VMNAME="OMU_6_20_0"
` 
## 隔离VM(BLOCK VM) 
## 隔离VM(BLOCK VM) 
功能说明 
该命令用于隔离指定的虚机。隔离虚机是指将虚机设置为不能部署VRU（Virtual Running Unit，虚拟运行单元），当进行弹性缩容或者弹性扩容等操作时，被隔离的虚机不可用。 
当虚机出现故障时，使用该命令隔离虚机，用于故障定位。 
隔离成功后，VRU将不能部署到该虚机上。 
注意事项 
 
操作前，需确认虚机“部署状态”为“已部署”状态，可通过SHOW VM命令查看。 
 
如果SC（Service Component）副本数小于最小实例数（通过SHOW SCTYPE命令查询），隔离操作会失败。此时若需要隔离必须先手动增加SC副本数（INC SC）至大于等于最小副本数，再进行隔离。 
 
IAAS场景下：该命令会将虚机上已部署的SC实例全部删除并修改SC副本数。CAAS场景下：该命令会将虚机上已部署的SC实例删除，但是不会修改SC副本数。 
 
操作前，需确认指定虚机不是仲裁节点，可通过SHOW QUORUM VM命令查看。如果是仲裁节点，则关闭指定虚机前，需要通过MODIFY QUORUM VM命令将仲裁修改到其他虚机上。 
 
指定虚机的类型为OMU/AMU/PFU/STU/FWU/IPU时，不支持隔离。 
 
操作完成后，可通过SHOW VM命令查看虚机部署状态查看隔离是否成功。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要隔离的虚机名称。虚机名称可以通过SHOW VM命令获取。虚机名称以下由两部分组成，以STU0001为例进行说明。虚机类型：STU编号：0001
输出参数说明 
标识|名称|类型|说明
---|---|---|---
PROGRESS|操作进度|参数可选性: 必选参数类型: 数字|命令执行的进度。
命令举例 
`
隔离虚机，虚机名为GSU_6_20_0
BLOCK VM:VMNAME="GSU_6_20_0"
` 
## 解隔离VM(UNBLOCK VM) 
## 解隔离VM(UNBLOCK VM) 
功能说明 
该命令用于解隔离指定的虚机。 
因虚机故障隔离虚机，待虚机故障解决后，可以通过解隔离虚机，供VRU（Virtual Running Unit，虚拟运行单元）使用。 
解隔离成功后，虚机将可用于部署VRU。 
注意事项 
 
操作前，需确认虚机“部署状态”是否处于隔离状态（“隔离中”或“已隔离”），可通过SHOW VM命令查看。 
 
操作完成后，可通过SHOW VM命令查看虚机部署状态查看解隔离是否成功。 
 
操作完成后，根据实际情况，若需要恢复SC副本数到隔离前的副本数，则必须手动执行命令INC SC将SC副本数恢复，此时恢复出来的SC不一定会在解隔离的虚机上。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要解隔离的虚机名称。虚机名称可以通过SHOW VM命令获取。虚机名称由以下两部分组成，以STU0001为例进行说明。虚机类型：STU编号：0001。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示解隔离指定虚机的操作结果，结果包括：操作成功操作超时其他失败虚机不存在虚机未隔离
命令举例 
`
解隔离虚机，虚机名称为GSU_6_20_0。
UNBLOCK VM:VMNAME="GSU_6_20_0"
` 
## 回收VM(RECYCLE VM) 
## 回收VM(RECYCLE VM) 
功能说明 
该命令用于回收空闲的虚机， 
当空闲虚机不再需要部署VRU（Virtual Running Unit，虚拟运行单元）时，可使用该命令将其回收。 
当需要回收虚机，使用该命令。 
回收成功后，虚机将会被删除。 
注意事项 
 
操作前，需确认虚机“部署状态”为“已部署”，可通过SHOW VM命令查看。 
 
操作前，需确认指定虚机不是仲裁节点，可通过SHOW QUORUM VM命令查看。如果是仲裁节点，则关闭指定虚机前，需要通过MODIFY QUORUM VM命令将仲裁修改到其他虚机上。 
 
操作完成后，可通过SHOW VM命令查看虚机是否被删除。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|VM 名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于配置需要回收的虚机名称。如果未配置输入参数，将会自动回收所有无业务容器的虚机。虚机名称可以通过SHOW VM命令获取。虚机名称由以下两部分组成，以STU0001为例进行说明。虚机类型：STU编号：0001
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示回收虚机操作的结果，结果包括：操作成功，相关虚机实例正在回收，可以通过SHOW VM查看相关虚机状态。操作成功，暂无虚机资源需要回收。操作超时！指定的虚机不存在！指定的虚机有业务在运行，不允许被回收！指定的虚机正在操作，请稍后再试！指定的虚机不在运行，不需要回收！指定的虚机是仲裁，不能回收！
命令举例 
`
回收虚机，虚机名称名为GSU_6_20_1。
RECYCLE VM:VMNAME="GSU_6_20_1"
` 
## 查询VM实例(SHOW VM) 
## 查询VM实例(SHOW VM) 
功能说明 
该命令用于显示当前NF中运行的虚机信息。 
命令执行成功后将显示包括虚机名称、虚机部署状态等虚机相关信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于配置NF中虚机的名称，若不填则表示查询当前NF的所有虚机信息。虚机名称由以下两部分组成，以STU0001为例进行说明。虚机类型：STU编号：0001
FILTERSTATUS|按状态过滤|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: FIL_ALL|该参数用于配置状态过滤条件。各参数选项的含义是：正常：显示“部署状态”为“已部署”，“运行状态”为“运行中”的虚机。异常：显示除正常状态和“未部署”状态以外的虚机，包括已下电和“运行中”虚机操作过程中的虚机。未部署：显示“部署状态”为“未部署”的虚机。已部署：显示除未创建之外的虚机。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示NF中虚机的名称。
DEPLOYSTATE|部署状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-19|该参数用于显示虚机的部署状态。部署状态包括：已部署部署中未部署待缩容缩容中待弹出弹出中待重启重启中待自愈重启重启自愈中待自愈重建重建自愈中待关机关闭中已关机待启动启动中隔离中已隔离已预占待预占预占中待取消预占正在取消预占
RUNSTATE|运行状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示虚机的运行状态。运行中错误
VCPUCOUNT|VCPU数量|参数可选性: 必选参数类型: 数字参数范围: 0-65535|该参数用于显示虚机的CPU数量。
MEMSIZE|内存大小(MB)|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于显示虚机的可使用内存总大小，单位为MB。
DISKSIZE|磁盘大小(MB)|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于显示虚机的第一块数据盘大小，单位为MB。
SERVERGROUP|虚机组|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示虚机组名称（亲和/反亲和组名称）。
MGTIP|管理IP|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示虚机的管理平面的IP地址。
VMTYPE|类型|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示系统中虚机的类型。
VMSIZE|规格|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示系统中虚机的规格。
VMLABEL|标签|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于对虚机的说明，方便维护人员对虚机进行标识。例如：STU-C8_Commbo。
VMINTRANAME|虚机内部名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示虚机内部名称，虚机内部名称是虚拟化平台系统内部使用的名称，是为了更加利于各模块之间的交互而采取的命名方式。内部名称由以下三部分组成，以XGW_SMF_73-VM-STUC80001为例进行说明。前缀：XGW_SMF_73虚机类型：-VM-STUC8编号：0001
命令举例 
`
查询系统中所有虚机的实例信息。
SHOW VM
(No.1) : SHOW VM
虚机名称 部署状态 运行状态 VCPU数量 内存大小(MB) 磁盘大小(MB) 虚机组 管理IP     类型    规格        标签       虚机内部名称                          
--------------------------------------------------------------------------------------------------------------------------------------------------
IPU0001  已部署   运行中   4        13870       20480              171.1.1.1  IPU    C4                     wy-ddm-test-ipv4-VM-IPUC40001         
IPU0002  已部署   运行中   4        13870       20480              171.1.1.2  IPU    C4                     wy-ddm-test-ipv4-VM-IPUC40002         
GSU0001  已部署   运行中   2        5806        20480              171.1.1.3  GSU    Common-C2M6 GSU-C2_SIG wy-ddm-test-ipv4-VM-GSUCommonC2M60001 
OMU0003  已部署   运行中   2        5806        20480              171.1.1.4  OMU    C2                     wy-ddm-test-ipv4-VM-OMUC20003         
OMU0001  已部署   运行中   4        13870       51200              171.1.1.11 OMU    C4                     wy-ddm-test-ipv4-VM-OMUC40001         
OMU0002  已部署   运行中   4        13870       51200              171.1.1.12 OMU    C4                     wy-ddm-test-ipv4-VM-OMUC40002         
--------------------------------------------------------------------------------------------------------------------------------------------------
记录数：6
执行成功开始时间:2020-07-20 17:30:24 耗时: 0.233 秒
` 
## 查询虚机详细信息(SHOW VMDETAIL) 
## 查询虚机详细信息(SHOW VMDETAIL) 
功能说明 
该命令用于查询指定虚机的CPU占用率、磁盘占用率和内存占用率信息。当占用率过高时，会触发相应的告警。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要查询的VM名称。VM名称可以通过SHOW VM命令获取。虚机名称由两部分组成，以STU0001为例进行说明。第一部分为虚机类型，示例：STU。第二部分为编号，示例：0001。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的虚机名称。
CPURATE|CPU占用率(%)|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数用于显示虚机的CPU占用率，用百分比表示。CPU占用率过高时会触发宿主机CPU使用率超阈值的相关告警。
MEMRATE|内存占用率(%)|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数用于显示虚机的内存占用率，用百分比表示。内存占用率过高时会触发宿主机内存使用率超阈值的相关告警。
DISKRATE|磁盘占用率(%)|参数可选性: 必选参数类型: 数字参数范围: 0-100|该参数用于显示虚机的磁盘占用率，用百分比表示。磁盘占用率过高时会触发宿主机磁盘使用率超阈值的相关告警。
命令举例 
`
查询OMU0001虚机的占用率详细信息。
SHOW VMDETAIL:VMNAME="OMU0001"
(No.2) : SHOW VMDETAIL:VMNAME="OMU0001"
虚机名称 CPU占用率(%) 内存占用率(%) 磁盘占用率(%) 
--------------------------------------------------
OMU0001  14           29            17            
--------------------------------------------------
记录数：1
执行成功开始时间:2020-07-20 19:04:31 耗时: 0.19 秒
` 
## 查询VM类型信息(SHOW VMTYPE) 
## 查询VM类型信息(SHOW VMTYPE) 
功能说明 
该命令用于显示当前NF（Network Function，网络功能）包含的虚机类型信息，包括该NF实例下的虚机类型、虚机规格、虚机最大数量以及虚机部署数量等信息。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VMTYPE|类型|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示该NF下的虚机类型，如OMU、GSU等。
VMSIZE|规格|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示该NF下各个虚机对应的规格。规格是由操作员在MANO上对NF进行实例化操作时自行定义的。
VMMAXNUM|虚机最大数量|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于显示该NF下虚机的最大数量。虚机最大数量是由操作员在MANO上对NF进行实例化操作时，自行定义的。
DEPLOYEDNUM|已部署数量|参数可选性: 必选参数类型: 数字参数范围: 0-1000|该参数用于显示该NF下已部署虚机的数量。
命令举例 
`
查询当前NF中部署的虚机类型信息。
SHOW VMTYPE
(No.1) : SHOW VMTYPE:
类型 规格        虚机最大数量 已部署数量 
-----------------------------------------
OMU  C4          2            2          
GSU  Common-C2M6 2            1          
IPU  C4          2            2          
OMU  C2          1            1          
-----------------------------------------
记录数：4
执行成功开始时间:2020-08-25 17:24:33 耗时: 0.202 秒
` 
# VRU管理 
# VRU管理 
背景知识 
VRU管理需要支持MML命令倒换、重启、业务迁移闭塞等功能。 
VRU重启和倒换都包括以下两种方式： 
 
GRACEFULLY（优雅重启、倒换）
设置为此选项，表示系统需要先把被重启或倒换的VRU上的业务迁移到其他VRU，迁移完成后，系统才会重启或倒换VRU。 
 
FORCELY（强制重启、倒换）
设置为此选项，表示系统会立即执行重启或倒换操作。 
 
功能说明 
VRU管理主要用于完成VRU的重启、倒换、闭塞、解闭塞以及查询当前NF（Network Function，网络功能）中VRU信息等相关功能。 
VRU重启、倒换、闭塞以及解闭塞操作在对业务进行测试时使用，会对当前的业务造成重大影响，请慎重操作。 
子主题： 
## 重启VRU(RESET VRU) 
## 重启VRU(RESET VRU) 
功能说明 
小心：该命令属于高危命令，该操作将重启VRU，操作不当将会影响业务。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于重启指定的VRU（Virtual Running Unit，虚拟运行单元）。VRU是业务逻辑执行的最小软件单元。 
当需要倒换VRU的主备状态或者重启VRU上的业务时，使用该命令。 
注意事项 
使用本功能会重启VRU，可能会对当前的业务造成重大影响，请慎重操作。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置将要复位的VRU名称。VRU是系统调度运行的最小软件单位。该参数的取值可以通过SHOW VRU命令查询获取。VRU名称由四部分组成，每部分之间以“-”连接。以vru-tmsp-mgt-0为例进行说明。第一部分固定为vru。第二部分为服务类型，示例：tmsp。第三部分为SC类型，示例：mgt。第四部分为编号。示例：0。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VRU_OP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示复位指定VRU的操作结果，结果包括：操作成功、操作超时和各种原因导致的操作失败。
命令举例 
`
重启名称为vru-tmsp-smc-0的VRU。
RESET VRU:VRUNAME="vru-tmsp-smc-0"
RESET VRU:VRUNAME="vru-tmsp-smc-0"
操作结果 
---------
操作成功 
---------
记录数：1
` 
## 重部署VRU(REDEPLOY VRU) 
## 重部署VRU(REDEPLOY VRU) 
功能说明 
小心：该命令属于高危命令，该操作将重部署VRU，操作不当将影响业务。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于重新部署VRU（Virtual Running Unit，虚拟运行单元）。VRU是业务逻辑执行的最小软件单元。 
注意事项 
本功能用于对业务进行测试时使用，会对当前的业务造成重大影响，请慎重操作。如果该VRU未添加NFS补丁，请使用"先删再建"的重新部署方式，否则重新部署可能不生效。 
如果所操作的VRU属于TMSP或者OAM服务，通过[SHOW VRU]查询该容器运行正常后，再继续使用该命令！
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置将要重新部署的VRU名称。VRU是系统调度运行的最小软件单位。该参数的取值可以通过SHOW VRU命令查询获取。VRU名称由四部分组成，每部分之间以“-”连接。以vru-tmsp-mgt-0为例进行说明。第一部分固定为vru。第二部分为服务类型，示例：tmsp。第三部分为SC类型，示例：mgt。第四部分为编号。示例：0。
DEPLOYMODE|部署方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DEPLOYDIRECTLY|该参数用于配置重新部署VRU的方式，包括以下两种：直接部署：表示系统直接部署VRU。先删再建：表示系统会先删除已有VRU，再重新部署VRU。如果该VRU未添加NFS补丁，请使用此方式部署。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示重新部署指定VRU操作的结果，结果包括：操作成功。超时！正在执行相同的命令，请稍后再试！VMM部署VRU失败。该VRU不存在。该VRU异常。主MGT容器禁止重建！VRU正在部署，请通过show vru查看结果。
命令举例 
`
重新部署名称为vru-tmsp-mp-0的VRU，部署方式采用“先删再建”。
REDEPLOY VRU:VRUNAME="vru-tmsp-mp-0",DEPLOYMODE="DEPLOYAFTERDEL"
` 
## 查询VRU(SHOW VRU) 
## 查询VRU(SHOW VRU) 
功能说明 
该命令用于显示当前NF（Network Function，网络功能）中部署的所有VRU（Virtual Running Unit，虚拟运行单元）信息。VRU是业务逻辑执行的最小软件单元。 
查询结果包括VRU名称、VRU类型、虚机名称、SC（Service Component，服务组件）类型、NFS（Network Function Service，网络功能服务）名称、部署状态、运行状态、镜像文件、是否已生效等信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置当前NF部署的VRU名称。若填写该参数，则表示查询指定的VRU信息。若不填写该参数，则表示查询当前NF所有的VRU信息。
VMNAME|虚机名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置当前NF中部署的虚机名称。若填写该参数，则表示查询部署在该虚机的VRU信息。若不填写该参数，则表示查询所有虚机的VRU信息。
NFSNAME|NFS实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-200|该参数用于配置当前NF部署的NFS实例名称。若填写该参数，则表示查询该NFS实例下的VRU信息。若不填写该参数，则表示查询所有NFS实例的VRU信息。
FILTERSTATUS|按状态过滤|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: FIL_ALL|该参数用于配置按VRU部署状态过滤查询VRU信息。正常：显示部署状态为已部署，运行状态为运行中的VRU。异常：在虚机上运行不正常的VRU（如虚机本身运行异常、容器状态异常等）。未部署：预留的VRU，所属虚机还没有创建。已部署：除未部署之外的VRU。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的VRU的名称。 VRU名称由四部分组成，每部分之间以“-”连接。以vru-tmsp-mgt-0为例进行说明。第一部分固定为vru。第二部分为服务类型，示例：tmsp。第三部分为SC类型，示例：mgt。第四部分为编号。示例：0。
VRUTYPE|VRU类型|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF中部署的VRU的类型。
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署VRU的虚机名称。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF中部署的VRU的SC类型，即该VRU下服务组件的类型。
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于显示当前NF中部署VRU的NFS实例名称。
DEPLOYSTATE|部署状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-8|该参数用于显示当前NF中部署的VRU的部署状态。部署状态包括：已部署：该VRU已成功部署。未部署：预留的VRU，所属虚机还没有创建。部署中：该VRU正在部署中。删除中：该VRU正在删除中。错误：该VRU部署状态异常。迁出中：该VRU上业务正在迁出。已迁出：该VRU上业务已迁出。迁入中：该VRU上业务正在迁入中。已迁入：该VRU上业务已迁入。
RUNSTATE|运行状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示当前NF中部署的VRU的运行状态。运行状态包括：运行中：该VRU正在运行中。错误：该VRU运行状态错误。不存在：没有统计到该VRU的运行状态。
IMAGEFILE|镜像文件|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于显示当前NF中部署的VRU的镜像文件。
UPGRADED|是否已生效|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: UPGRADED_YES|该参数用于显示当前NF中VRU的镜像文件是否已经生效。如果显示未生效，则表示查询显示的镜像文件和实际运行镜像信息不同。
命令举例 
`
查询当前NF中部署的所有VRU信息。
SHOW VRU
(No.3) : SHOW VRU:NFSNAME="CommonS_TMSP_0"
VRU名称          VRU类型        虚机名称 SC类型        NFS实例名称    部署状态 运行状态 镜像文件                           是否已生效  
----------------------------------------------------------------------------------------------------------------------------------------------
vru-tmsp-mp-1    vru-tmsp-mp    OMU0002  sc-tmsp-mp    CommonS_TMSP_0 已部署   运行中   vru-tmsp-mp.tar:20210410062057     是          
vru-tmsp-mp-0    vru-tmsp-mp    OMU0001  sc-tmsp-mp    CommonS_TMSP_0 已部署   运行中   vru-tmsp-mp.tar:20210410062057     是        
vru-tmsp-smc-1   vru-tmsp-smc   OMU0002  sc-tmsp-smc   CommonS_TMSP_0 已部署   运行中   vru-tmsp-smc.tar:20210409173853    是        
vru-tmsp-smc-0   vru-tmsp-smc   OMU0001  sc-tmsp-smc   CommonS_TMSP_0 已部署   运行中   vru-tmsp-smc.tar:20210409173853    是 
vru-tmsp-mgt-1   vru-tmsp-mgt   OMU0002  sc-tmsp-mgt   CommonS_TMSP_0 已部署   运行中   vru-tmsp-mgt.tar:20210409173853    是      
vru-tmsp-mgt-0   vru-tmsp-mgt   OMU0001  sc-tmsp-mgt   CommonS_TMSP_0 已部署   运行中   vru-tmsp-mgt.tar:20210409173853    是 
----------------------------------------------------------------------------------------------------------------------------------------------
记录数：6
执行成功开始时间:2020-07-23 17:44:58 耗时: 1.261 秒
` 
## 查询独占核(SHOW EXCLUSIVECPUS) 
## 查询独占核(SHOW EXCLUSIVECPUS) 
功能说明 
该命令用于查询指定虚机上部署的VRU的独占核列表。当VRU没有使用独占核时不显示。 
为了确保CPU可以实时响应，可以让某个或者某几个CPU专用于某个VRU，这些CPU就是该VRU的独占核。 
注意事项 
无
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VMNAME|虚机名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于配置需要查询的VM名称。VM名称可以通过SHOW VM命令获取。虚机名称由两部分组成，以STU0001为例进行说明。第一部分为虚机类型，示例：STU。第二部分为编号，示例：0001。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-4|该参数用于显示命令操作结果：操作成功。操作失败。未找到VRU。VRU未部署独占核。VM不存在。
VRUNAME|VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示该虚机下的VRU（Virtual Running Unit，虚拟运行单元）名称。
CPULIST|独占核|参数可选性: 必选参数类型: 字符串参数范围: 1-128|该参数用于显示该虚机下的VRU对应的独占核列表。
命令举例 
`
查询虚机名称为"IPU0001"中VRU的独占核列表。
SHOW EXCLUSIVECPUS:VMNAME="IPU0001"
(No.8) : SHOW EXCLUSIVECPUS:VMNAME="IPU0001"
操作结果 
---------
操作成功 
---------
记录数：1
VRU名称   独占核 
-----------------
vru-ips-0 1,2,3  
-----------------
记录数：1
执行成功开始时间:2020-07-21 10:26:55 耗时: 0.164 秒
` 
## 查询容器CPU和内存限额(SHOW VRUSTAT) 
## 查询容器CPU和内存限额(SHOW VRUSTAT) 
功能说明 
该命令用于查询VRU（Virtual Running Unit，虚拟运行单元）的CPU和内存资源配额和使用情况，包括CPU相对使用率、CPU绝对使用率、CPU配额、内存使用量、内存使用率和内存配额等。 
当查询的VRU没有进行CPU和内存资源配额时，该VRU的CPU相对使用率、CPU绝对使用率、内存使用量和内存使用率显示为"N/A"。 
具体查询方式： 
 
当指定VRU名称时，该命令查询指定VRU的CPU和内存资源配额和使用情况。 
 
当指定VRU类型时，该命令查询指定类型下的所有VRU的CPU和内存资源配额和使用情况。 
 
当不指定VRU名称和VRU类型时，该命令查询所有VRU的CPU和内存资源配额和使用情况。 
 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于查询特定VRU的CPU和内存资源配额使用情况，具体VRU名称可以通过SHOW VRU命令进行查询。
VRUTYPE|VRU类型|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于查询指定VRU类型的CPU和内存资源配额使用情况，VRU类型可以通过SHOW VRU命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
VRUNAME|VRU名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前查询到的VRU的名称。
VRUTYPE|VRU类型|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前查询到的VRU的类型。
CPURELATIVEUSEDRATIO|CPU相对使用率（%）|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示当前查询到的VRU的CPU相对使用率，指容器的CPU使用量相对CPU配额的百分比。
CPUABSOLUTEUSEDRATIO|CPU绝对使用率（%）|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示当前NF中部署的该VRU的CPU绝对使用率，指容器的CPU使用量相对1 CORE的百分比。
CPULIMIT|CPU配额|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF中部署的该VRU使用的CPU限额，表示此容器最多使用的CPU量，不包含排他核。
MEMUSED|内存使用量（MB）|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的该VRU已经使用的内存，以M为单位。
MEMUSEDRATIO|内存使用率（%）|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示当前NF中部署的该VRU的内存使用率，指容器的内存使用量相对内存配额的百分比。
MEMLIMIT|内存配额（MB）|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的该VRU使用的内存限额，表示此容器最多使用的内存量，不包含巨页，以M为单位。
命令举例 
`
这个示例查询了名称为"vru-ips-0"的容器CPU和内存资源配额和使用情况。
SHOW VRUSTAT
(No.3) : SHOW VRUSTAT:VRUNAME="vru-ips-0"
VRU名称     VRU类型  CPU相对使用率（%）   CPU绝对使用率（%）  CPU配额  内存使用量（MB）  内存使用率（%）  内存配额（MB）                         
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
vru-ips-0   vru-ips         12                14                 2.5        800             78            1024
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-07-23 17:44:58 耗时: 1.261 秒
` 
# POD管理 
# POD管理 
背景知识 
POD管理用于CAAS场景下。支持MML命令查询POD、查询WORKLOAD、删除POD等功能。 
功能说明 
POD管理主要用于完成查询POD, 查询WORKLOAD，删除POD等相关功能。 
删除POD仅用于POD出现异常时，进行自愈使用，删除命令执行后，系统会自动弹扩该POD。会对当前的业务造成重大影响，请慎重操作。 
子主题： 
## 删除POD(DEL POD) 
## 删除POD(DEL POD) 
功能说明 
该命令用于删除指定的POD。 
当某个POD不能正常对外提供服务时，可使用该命令对其进行删除。 
删除POD成功后，业务会受到影响但系统很快会对删除的POD进行恢复。POD恢复后可通过命令[SHOW POD]查看。
注意事项 
本功能用于对业务进行测试时使用，会对当前的业务造成重大影响，请慎重操作。删除后业务会受影响，但是系统会很快对其进行恢复。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PODNAME|POD名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要删除的POD实例名称，可以通过SHOW POD命令查询已存在的POD实例名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
POD_OP_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示删除指定POD操作的结果，结果包括：操作成功。正在执行相同的命令,请稍后再试！超时！其他！
命令举例 
`
删除名称为sc-ips-0-0的POD
DEL POD:POD NAME="sc-ips-0-0"
` 
## 查询POD(SHOW POD) 
## 查询POD(SHOW POD) 
功能说明 
该命令用于显示NF（Network Function，网络功能）中部署的所有POD信息，包括POD名称、WORKLOAD名称等信息。POD是k8s项目中的原子调度单位。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
PODNAME|POD名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置当前NF部署的POD名称，为可选参数，表示查询具体的POD的信息。
WORKLOADNAME|WORKLOAD名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置当前NF部署的WORKLOAD名称，为可选参数，表示查询具体的WORKLOAD对应的POD信息。
NODENAME|NODE名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于配置当前NF部署的NODE名称，为可选参数，表示查询具体NODE上POD的信息。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
PODNAME|POD名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的该POD的名称。 POD名称由四部分组成，每部分之间以“_”连接。以POD_TMSP_MGT_0为例进行说明。第一部分为POD。第二部分为服务类型，示例：TMSP。第三部分为SC类型。示例：MGT。第四部分为编号。示例：0。
WORKLOADNAME|WORKLOAD名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的POD的WORKLOAD名称。
PHASE|Phase状态|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF中部署的该POD所处的生命周期阶段。Pending：kubernetes已经开始创建POD，但是POD中的一个或多个容器还没有被启动。Running：kubernetes已经将POD分配到节点上，并且POD中的所有容器都启动了。或者POD中至少有一个容器仍然在运行状态。或者POD正在重新启动状态。Succeeded：POD中的所有容器都处在终止状态，这些容器是自主正常退出到终止状态的，而且kubernetes也没有重启任何容器。Failed：POD中的所有容器都处在终止状态，并且至少有一个容器不是正常终止的，或者是由于系统强行终止的。Unknown：由于一些特殊情况无法获取POD状态，比如由于网络原因无法同POD所在的主机通讯。
STATES|Ready状态|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示当前NF中部署的该POD能否提供服务。True：当前NF中部署的该POD能够提供服务。False：当前NF中部署的该POD不能够提供服务。
NODENAME|NODE名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中部署的该POD的所在的NODE名称。
命令举例 
`
这个示例显示了TMSP中部署的所有POD信息。
SHOW POD
(No.11) : SHOW POD
POD名称               WORKLOAD名称           Phase状态    Ready状态    NODE名称
sc-tmsp-mgt-0-0-1-0   sc-tmsp-mgt-0-0-1      Running     True         test-omuc40001
sc-sig-mp-0-0-1-0     sc-sig-mp-0-0-1        Running     True         test-omuc40001
sc-ips-0-0-1-0        sc-ips-0-0-1           Running     True         test-ipuc40001   
记录数：3
执行成功耗时: 0.133 秒
` 
## 查询WORKLOAD(SHOW WORKLOAD) 
## 查询WORKLOAD(SHOW WORKLOAD) 
功能说明 
该命令用于查询NF（Network Function，网络功能）中部署的所有WORKLOAD信息，包括NFS名称、SC类型、WORKLOAD名称、期望副本数、可用副本数、chart名称、chart版本、chart实例名和部署状态等。 
具体查询方式： 
 
当指定NFS实例名称时，该命令查询指定NFS实例下的WORKLOAD信息。 
 
当指定SC类型时，该命令查询指定SC类型下的WORKLOAD信息。 
 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 任选参数类型: 字符串参数范围: 1-200|该参数用于指定要查询的WORKLOAD信息所属的NFS实例的名称，可以通过SHOW NFS命令进行查询。
SCTYPE|SC类型|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于指定要查询的WORKLOAD信息所属的SC类型名称，可以通过SHOW SCTYPE命令进行查询。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD所属的NFS名称。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD所属的SC类型。
WORKLOADNAME|WORKLOAD名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD名称。
DESIREDREPLICAS|期望副本数|参数可选性: 必选参数类型: 数字参数范围: 0-1024|该参数用于表示查询到的WORKLOAD的期望副本数。
AVAILABLEREPLICAS|可用副本数|参数可选性: 必选参数类型: 数字参数范围: 0-1024|该参数用于表示查询到的WORKLOAD的可用副本数。
CHARTNAME|chart名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD的chart名称。
CHARTVERSION|chart版本|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD的chart版本。
CHARTRELEASE|chart实例名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD的chart实例名。
DEPLOYSTATE|部署状态|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示查询到的WORKLOAD的部署状态，包括succeed和failed两种部署态。两种部署态的含义是：succeed：查询到的WORKLOAD期望副本数与可用副本数相等。failed：查询到的WORKLOAD期望副本数与可用副本数不等。
命令举例 
`
查询TMSP中部署的WORKLOAD信息。
SHOW WORKLOAD
(No.11) : SHOW WORKLOAD
NFS名称            SC类型         workload名称        期望副本数       可用副本数    chart名称       chart版本   chart实例名       部署状态
CommonS_TMSP_0     sc-tmsp-rosng  sc-tmsp-rosng-0    1                1            sc-tmsp-rosng    1.1.1      sc-tmsp-rosng-0  succeed
记录数：1
执行成功 开始时间:2020-05-19 18:46:16 耗时: 0.421 秒
` 
# 运维组管理 
# 运维组管理 
背景知识 
专U产品基于BM CAAS(Bare Metal Communications-as-a-Service)形态部署，在EM上的基础运维单位是SC，每个SC实例都对应一个POD部署在Node上。SC数量较多，导致学习的成本和运维的复杂度增加。因此，将Node上的某一类POD编成一个运维组，以运维组为单位进行基础的运维操作，有利于简化入网测试、降低学习成本等。 
功能说明 
运维组管理主要用于完成运维组的设置、查询、复位、闭塞以及解闭塞等相关功能。 
运维组在重启前应当保证执行BLOCK OPGROUP命令进行业务迁移，以避免业务损失。闭塞以及解闭塞操作在对业务进行测试时使用，会对当前的业务造成重大影响，请慎重操作。 
子主题： 
## 设置运维组(SET OPGROUP) 
## 设置运维组(SET OPGROUP) 
功能说明 
运维组是指将NODE上的某一类POD编成的一个组，以运维组为单位进行基础的运维操作。 
该命令用于根据NODE和WORKLOAD信息定位出一组POD，并将这组POD设置为运维组。 
设置运维组后，可针对某一运维组信息进行复位、闭塞和解闭塞操作。可通过执行命令[SHOW OPGROUP]查询相关运维组的设置。
注意事项 
 
当通过WORKLOAD和NODENAME无法定位出POD时，运维组设置失败。 
 
WORKLOAD和NODENAME的关系可以通过${C=SHOW POD]命令查看。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NODENAME|NODE名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|NODE是部署于NF（Network Function，网络功能）中的，是k8s集群中相对于Master而言的工作主机。该参数为必选参数，表示设置运维组时，选取的POD所在的具体NODE信息。设置该参数前，可通过SHOW NODE命令查看已存在的NODE。
WORKLOADNAME|WORKLOAD名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数是当前NF（Network Function，网络功能）中部署的POD所属的WORKLOAD名称，为必选参数，可通过SHOW WORKLOAD命令查看已存在的WORKLOAD信息。一个WORKLOAD可以管理不同NODE上的POD。通过一个NODE名称和一个WORKLOAD可以定位一组POD。
GROUPLABEL|运维组标签|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数是由用户定义的运维组标签，方便用户识别。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于显示操作结果：操作成功。正在执行相同的命令,请稍后再试!设置超时!设置失败,存盘失败。设置失败,WORKLOAD和NODE不对应。
命令举例 
`
设置名称为"group_label_1"的运维组，运维组对应名称为"xxw95oneomu--vm-omuc40001"的NODE信息和名称为"sc-oam-ccmf-0-0-1"的WORKLOAD信息。
SET OPGROUP:NODENAME="xxw95oneomu--vm-omuc40001",WORKLOADNAME="sc-oam-ccmf-0-0-1",GROUPLABEL="group_label_1"
` 
## 查询运维组信息(SHOW OPGROUP) 
## 查询运维组信息(SHOW OPGROUP) 
功能说明 
该命令用于显示设置的运维组标签。如果不指定运维组，则显示所有的运维组信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
GROUPLABEL|运维组标签|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数为运维组标签名称，可选参数，表示需要查询该标签代表的具体运维组信息。若不指定运维组标签，则显示所有运维组信息。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NODENAME|NODE名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数表示运维组所在的具体NODE名称。NODE是部署于NF（Network Function，网络功能）中的，是k8s集群中相对于Master而言的工作主机。
WORKLOADNAME|WORKLOAD名称|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数表示运维组对应的WORKLOAD名称。一个WORKLOAD可以管理不同NODE上的POD。通过一个NODE名称和一个WORKLOAD可以定位一组POD。
GROUPLABEL|运维组标签|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数是由用户定义的运维组标签。
命令举例 
`
查询名称为"group_label_1"的运维组详情。
SHOW OPGROUP:GROUPLABEL="group_label_1" 
(No.1) : SHOW OPGROUP:GROUPLABEL="group_label_1"
NODE名称                  WORKLOAD名称      运维组标签        
----------------------------------------------------------
xxw95oneomu--vm-omuc40001 sc-oam-ccmf-0-0-1 group_label_1
----------------------------------------------------------
记录数：1
` 
## 复位运维组(RESET OPGROUP) 
## 复位运维组(RESET OPGROUP) 
功能说明 
小心：该命令属于高危命令！该操作将对运维组中的POD进行重启（复位），操作不当对业务造成损失。执行该命令前，需要与中兴通讯技术支持人员确认。 
该命令用于重启（复位）指定运维组下的所有POD。 
注意事项 
请确保在执行该操作前已执行[BLOCK OPGROUP]命令闭塞该运维组，即将该运维组下的POD业务迁移到其他工作态的POD下，从而避免对业务造成损失。
涉及到复位TMSP/OAM服务下的POD时，复位操作的成功结果先返回给EM，随后再由MANO执行复位操作。涉及到复位其他服务下的POD时，则等待MANO执行复位操作后，将复位结果通过TMSP和OAM返回给EM。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
GROUPLABEL|运维组标签|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数是运维组标签名称，必选参数，表示需要复位该标签代表的运维组下的所有POD。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令,请稍后再试!超时。MANO操作失败！运维组标签不存在！
命令举例 
`
复位名称为"group_label_1"的运维组
RESET OPGROUP:GROUPLABEL="group_label_1"
` 
## 闭塞运维组(BLOCK OPGROUP) 
## 闭塞运维组(BLOCK OPGROUP) 
功能说明 
该命令用于闭塞指定的运维组下的所有POD。 
当对业务进行测试或故障定位时，使用该命令。 
闭塞成功后，该运维组下POD的业务会迁移到其他工作态的POD下，该POD将成为闭塞状态。 
业务测试或故障定位结束后，可以通过执行命令[UNBLOCK OPGROUP]进行解闭塞。可以通过执行命令[SHOW POD]查询相应POD的状态。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
GROUPLABEL|运维组标签|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数是运维组标签名称，必选参数，表示需要闭塞该标签代表的运维组下的所有POD。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令,请稍后再试!超时。其他失败。运维组标签不存在!
命令举例 
`
闭塞名称为"group_label_1"的运维组
BLOCK OPGROUP:GROUPLABEL="group_label_1"
` 
## 解闭塞运维组(UNBLOCK OPGROUP) 
## 解闭塞运维组(UNBLOCK OPGROUP) 
功能说明 
该命令用于解闭塞指定的运维组下的所有POD。 
当对业务进行测试或故障定位结束后，使用该命令恢复运维组下的POD。 
解闭塞成功后，该运维组下的POD将从闭塞态转为正常工作态，可以通过执行命令[SHOW POD]查询相应的POD状态。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
GROUPLABEL|运维组标签|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数是运维组标签名称，必选参数，表示需要解闭塞该标签代表的运维组下的所有POD。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令,请稍后再试!超时。其他失败。运维组标签不存在!
命令举例 
`
解闭塞名称为"group_label_1"的运维组
UNBLOCK OPGROUP:GROUPLABEL="group_label_1"
` 
## 删除运维组(DEL OPGROUP) 
## 删除运维组(DEL OPGROUP) 
功能说明 
该命令用于删除指定的运维组。 
当某个运维组不再被使用时，使用该命令对其进行删除。 
当某个运维组被删除后，不能再通过该运维组进行POD操作，执行[SHOW OPGROUP]命令也无法查看到该运维组的记录。
注意事项 
 
删除运维组前，可执行SHOW OPGROUP命令查看当前所有的运维组详细信息。当通过WORKLOAD和NODENAME无法定位出POD时，删除运维组失败。 
 
WORKLOAD和NODENAME的关系可以通过${C=SHOW POD]命令查看。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NODENAME|NODE名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|NODE是部署于NF（Network Function，网络功能）中的，是k8s集群中相对于Master而言的工作主机。该参数为必选参数，表示删除运维组时，选取的POD所在的具体NODE信息。设置该参数前，可通过SHOW NODE命令查看已存在的NODE。
WORKLOADNAME|WORKLOAD名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数是当前NF（Network Function，网络功能）中部署的POD所属的WORKLOAD名称，为必选参数，可通过SHOW WORKLOAD命令查看已存在的WORKLOAD信息。一个WORKLOAD可以管理不同NODE上的POD。通过一个NODE名称和一个WORKLOAD可以定位一组POD。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示操作结果：操作成功。正在执行相同的命令,请稍后再试！超时！删除失败,清除表失败。删除失败,WORKLOAD和NODE不对应。
命令举例 
`
删除NODE名称为"xxw95oneomu--vm-omuc40001"和WORKLOAD名称为"sc-oam-ccmf-0-0-1"对应的运维组标签信息。
DEL OPGROUP:NODENAWE="xxw95oneomu--vm-omuc40001",WORKLOADNAME="sc-oam-ccmf-0-0-1"
` 
# NODE管理 
# NODE管理 
背景知识 
NODE管理用于CAAS场景下。支持MML命令查询NODE相关信息等功能。 
功能说明 
NODE管理主要用于完成查询NODE信息等相关功能。 
子主题： 
## 查询NODE(SHOW NODE) 
## 查询NODE(SHOW NODE) 
功能说明 
该命令用于显示当前NF（Network Function，网络功能）中部署的所有NODE（Node是kubernetes集群中的工作负载节点，节点可以是一个虚拟机或者物理机器，取决于所在的集群配置）信息，包括NODE名称、虚机名称、虚机ID、IPv4地址、IPv6地址、主机名称、NODE状态和NODE别名等。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NODENAME|NODE名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于表示当前NF部署的NODE的名称。如果输入该参数，则表示查询指定的NODE的信息。如果不输入该参数，则表示查询当前NF所有NODE的信息。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NODENAME|NODE名称|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数用于显示当前NF中部署的NODE的名称。
VMNAME|虚机名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示当前NF中NODE所对应的虚机的名称。
VMID|虚机ID|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示NODE对应的虚机ID，虚机ID为VIM平台上的该虚机的标识。
IPv4ADDRESS|IPv4地址|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示NODE的IPv4地址。NODE的IP地址可以使用IPv4配置，也可以使用IPv6配置。
IPv6ADDRESS|IPv6地址|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示NODE的IPv6地址。NODE的IP地址可以使用IPv6配置，也可以使用IPv4配置。
HOSTNAME|主机名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示NODE的主机名称。
STATES|NODE状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示NODE的状态，包含已准备完成和未准备完成两种状态。
NODEALIAS|NODE别名|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于显示NODE的别名。
命令举例 
`
查询当前NF中部署的所有NODE信息。
SHOW NODE
(No.11) : SHOW NODE
NODE名称                   虚机名称                      虚机ID                               IPv4地址 IPv6地址        主机名称    NODE状态   NODE别名
caas-ci--vm-omuc40002      caas_ci_-VM-OMUC40002         5a3cb734-3f4a-4ba8-886f-6c2b56ec7057          3380:1:2::2001  hostname_0  ready      TEST-OMU-1
caas-ci--vm-omuc20003      caas_ci_-VM-OMUC20003         fe03e1d2-1773-41bd-a773-a58522e3f2f0          3380:1:2::2021  hostname_1  ready      TEST-OMU-2
caas-ci--vm-ipuc40002      caas_ci_-VM-IPUC40002         941a32bd-e426-4071-89f0-9cc833e3f9dd          3380:1:2::2015  hostname_2  ready      TEST-IPCC4-2
记录数：3
执行成功耗时: 0.133 秒
` 
# 证书管理 
# 证书管理 
背景知识 
5GC的协议中，定义了多种安全相关的功能，这些功能包括： 
 
NF（Network Function，网络功能）和NRF（Network Repository Function，网络仓储功能）之间的安全验证，要求实现Oauth 2.0版本。此时，整个PLMN（ Public Land Mobile Network， 公用陆地移动通信网）中的NF，需要共同加载同一套授权证书（NRF的证书），NRF上要多放置一份秘钥文件。 
 
基于服务的接口SBI要求启用TLS（Transport Layer Security，传输层安全协议）链路。此时，每个NF有自己独自的秘钥和证书文件。 
 
IPsec（Internet Protocol Security）安全传输要求。当NF启用IPsec功能时，每个NF有自己独自的秘钥和证书文件。
。 
 
这些功能都需要使用CA (Certificate Authority, 证书颁发机构）证书，并且，上述功能应当会使用相同的CA证书。 
功能说明 
该组命令用于查询当前NF的证书信息及证书套件信息。证书信息包括： 
 
证书套件名 
 
证书大小 
 
证书有效期 
 
密钥大小 
 
根证书大小 
 
子主题： 
## 查询证书信息(SHOW CERTINFO) 
## 查询证书信息(SHOW CERTINFO) 
功能说明 
该命令用于查询NF证书信息（包括证书套件名、证书有效期、证书大小、密钥大小、根证书大小）及证书套件信息。当需要查看证书信息时，需要执行该命令。运维人员执行该命令后可以查询到证书信息。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
CERTNAME|证书套件名|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于设置当前所有证书套件名。证书套件包含秘钥、证书文件、根证书文件，这三部分内容写入到NF的后台配置库中，以二进制模式存储。证书套件名指对应的套件名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
CERTNAME|证书套件名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示显示当前所有证书套件名。证书套件包含秘钥、证书文件、根证书文件，这三部分内容写入到NF的后台配置库中，以二进制模式存储，证书套件名指对应的套件名称。
CERTVALIDDATE|证书有效期|参数可选性: 必选参数类型: 字符串默认值: 0|该参数用于显示证书有效期。
CERTSIZE|证书大小(Byte)|参数可选性: 必选参数类型: 数字默认值: 0|该参数用于显示证书大小。
KEYPAIRSIZE|密钥大小(Byte)|参数可选性: 必选参数类型: 数字默认值: 0|该参数用于显示密钥大小。
ROOTSIZE|根证书大小(Byte)|参数可选性: 必选参数类型: 数字默认值: 0|该参数用于显示根证书大小。
CERTDESC|证书套件描述|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于描述证书套件基本信息。
命令举例 
`
查询当前NF证书信息。
SHOW CERTINFO
(No.1) : SHOW CERTINFO:
证书套件名 证书有效期            证书大小(Byte) 密钥大小(Byte) 根证书大小(Byte) 证书套件描述
test222    2028-11-10 11:13:42  1302          1679           1253            testtest
记录数：1
执行成功耗时: 1.475 秒
` 
# 以太接口对象管理 
# 以太接口对象管理 
背景知识 
以太网接口和以太网子接口是用于收发网络数据的端口。每个以太网接口或以太网子接口作为一个测量对象，可以通过查询命令查找所有以太网接口和以太网子接口的列表信息，包括接口归属的业务网元、网元使用的服务名称等信息。 
功能说明 
以太接口对象管理主要用于显示以太网接口/以太网子接口的列表信息，即显示以太网接口/以太网子接口所有测量对象的信息。 
子主题： 
## 显示以太接口列表(SHOW ETHPORTLIST) 
## 显示以太接口列表(SHOW ETHPORTLIST) 
功能说明 
该命令用于查询所有以太网接口列表信息，包括以太网接口归属的业务网元、网元使用的服务名称等信息。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SLICE|切片|参数可选性: 必选参数类型: 字符串参数范围: 0-64|网元切片。本条命令不涉及，取空。
MOTID|测量类型ID|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示以太网接口的测量类型ID，是以太网接口性能测量类型的唯一标识。
VALUE|对象值|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示以太网接口测量对象的值，可以由以太网接口的全局端口号唯一标识。
NAME|对象名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示以太网接口测量对象的对象名，即rosng以太网接口的接口名，比如xgei-1/0/1/1。
ID|对象ID|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示以太网接口测量对象的ID，可以由以太网接口的全局端口号唯一标识。
DESC|对象描述|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于显示以太网接口测量对象的描述，可以用rosng以太网接口的接口名表示，比如xgei-1/0/1/1。
命令举例 
`
查询以太接口列表信息。
SHOW ETHPORTLIST
-----------------CommonS_TMSP_0----------------
网元名          切片   服务名             测量类型ID    对象值     对象名         对象ID      对象描述
DomainS-SMF-8         CommonS_TMSP_0     55851         67244032  xgei-1/0/1/1   67244032    xgei-1/0/1/1  
DomainS-SMF-8         CommonS_TMSP_0     55851         67248128  xgei-1/0/1/2   67248128    xgei-1/0/1/2
DomainS-SMF-8         CommonS_TMSP_0     55851         67375104  xgei-1/0/2/1   67375104    xgei-1/0/2/1
DomainS-SMF-8         CommonS_TMSP_0     55851         67379200  xgei-1/0/2/2   67379200    xgei-1/0/2/2
记录数：4
执行成功耗时: 0.909 秒
` 
## 显示以太子接口列表(SHOW ETHSUBPORTLIST) 
## 显示以太子接口列表(SHOW ETHSUBPORTLIST) 
功能说明 
该命令用于查询以太子网接口列表信息，包括以太子网接口归属的业务网元、网元使用的服务名称等信息。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SLICE|切片|参数可选性: 必选参数类型: 字符串参数范围: 0-64|网元切片。本条命令不涉及，取空。
MOTID|测量类型ID|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示以太网子接口的测量类型ID，是以太网子接口性能测量类型的唯一标识。目前，以太网子接口类型ID值是61051。
VALUE|对象值|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示以太网子接口测量对象的值，可以由以太网子接口的全局端口号唯一标识。
NAME|对象名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示以太网子接口测量对象的对象名，即以太网子接口的接口名，比如xgei-1/0/1/2.3。
ID|对象ID|参数可选性: 必选参数类型: 字符串参数范围: 0-32|该参数用于显示以太网子接口测量对象的ID，可以由以太网子接口的全局端口号唯一标识。
DESC|对象描述|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于显示以太网子接口测量对象的描述，可以由以太网子接口的接口名表示，比如xgei-1/0/1/2.3。
命令举例 
`
查询以太子接口列表信息。
SHOW ETHSUBPORTLIST
-----------------CommonS_TMSP_0----------------
网元名            切片    服务名             测量类型ID   对象值       对象名           对象ID        对象描述
DomainS-SMF-8             CommonS_TMSP_0    55852        410897360   xgei-1/0/1/2.3   410897360     xgei-1/0/1/2.3
DomainS-SMF-8             CommonS_TMSP_0    55852        410897360   xgei-1/0/1/2.4   410897360     xgei-1/0/1/2.4
DomainS-SMF-8             CommonS_TMSP_0    55852        410897360   xgei-1/0/2/2.1   410897360     xgei-1/0/2/2.1
DomainS-SMF-8             CommonS_TMSP_0    55852        410897360   xgei-1/0/2/2.2   410897360     xgei-1/0/2/2.2
DomainS-SMF-8             CommonS_TMSP_0    55852        410897360   xgei-1/0/2/2.3   410897360     xgei-1/0/2/2.3
记录数：5
执行成功耗时: 0.267 秒
` 
# TWAMP链路管理 
# TWAMP链路管理 
背景知识 
5G切片SLA（Service Level Agreement，服务等级协议）指标监控要求： 
 
支持对TWAMP（Two-Way Active Measurement Protocol，双向主动测量协议）链路状态和时延抖动进行测量。 
 
支持TWAMP性能统计实时显示。 
 
支持TWAMP区分链路的性能统计。 
 
TWAMP链路管理主要用于测量客户端和服务端之间的报文传输时延等性能数据。
功能说明 
该命令用于查询TWAMP链路信息，包括TWAMP链路归属的业务网元、网元使用的服务名称、测量类型ID等信息。 
子主题： 
## 显示TWAMP链路列表(SHOW TWAMPLINKPMID) 
## 显示TWAMP链路列表(SHOW TWAMPLINKPMID) 
功能说明 
该命令用于查询TWAMP（Two-Way Active Measurement Protocol，双向主动测量协议）链路测量对象信息。TWAMP链路主要用于测量客户端和服务端之间的报文传输时延等性能数据。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NFINSTNAME|网元名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示TWAMP链路归属的业务网元名称，网元名称通过INFO文件中业务配置指定。
SERVICENAME|服务名|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于表示网元使用的服务名称，由服务类型和服务序列号构成，例如：CommonS_TMSP_0，表示归属于CommonS_TMSP服务。
MOTID|测量类型ID|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于表示TWAMP链路的测量类型ID，是TWAMP链路性能测量类型的唯一标识。
VALUE|对象值|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示TWAMP测量链路的对象值，与对象ID相同，每条TWAMP链路可看作一个测量对象。
NAME|对象名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于表示TWAMP测量链路对象的名称。由链路的连接ID、会话ID、远端地址及端口号构成，例如：CID01_SID01[192.168.10.10/860]。
ID|对象ID|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于表示TWAMP测量链路的对象ID，是TWAMP测量链路的唯一标识，与对象值相同。
命令举例 
`
查询TWAMP链路列表信息。
SHOW TWAMPLINKPMID
(No.1) : SHOW TWAMPLINKPMID:
网元名                                 服务名            测量类型ID    对象值   对象名                      对象ID
b85568b8-3b0b-11e8-bcc5-744aa403c105   CommonS_TMSP_0   61053         65537   CID1_SID1[1.1.1.106/1025]    65537
记录数：1
执行成功 耗时: 0.164 秒
` 
# 接口规则对象管理 
# 接口规则对象管理 
背景知识 
以太接口和子接口可以配置规则，对收发报文进行过滤操作。 
功能说明 
该功能主要是用作显示接口所有配置规则测量对象的信息。 
子主题： 
## 显示规则日志接口信息(SHOW PORTACLLOGINFO) 
## 显示规则日志接口信息(SHOW PORTACLLOGINFO) 
功能说明 
该命令用于查询portacl对象列表信息。Port acl是配置在接口上的报文访问控制列表。网元可以针对匹配port acl的报文采取相应的允许通过或丢弃策略。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SLICE|切片|参数可选性: 必选参数类型: 字符串参数范围: 0-64|网元切片。本条命令不涉及。
MOTID|测量类型ID|参数可选性: 必选参数类型: 字符串参数范围: 0-8|该参数用于显示端口规则的测量类型ID，是端口规则性能测量类型的唯一标识。目前，接口/子接口类型ID值是61055。
VALUE|对象值|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示端口规则测量对象的值，可以由子接口的全局端口号、规则id、规则类型等唯一标识。
NAME|对象名|参数可选性: 必选参数类型: 字符串参数范围: 0-64|该参数用于显示端口规则测量对象的对象名，比如xgei-1/0/1/2.3_Receive_V4RuleId10。
ID|对象ID|参数可选性: 必选参数类型: 字符串参数范围: 0-128|该参数用于显示端口规则测量对象的ID，可以由子接口的全局端口号、规则id、规则类型和收发方向等唯一标识。
DESC|对象描述|参数可选性: 必选参数类型: 字符串参数范围: 0-256|该参数用于显示端口规则测量对象的描述，比如xgei-1/0/1/2.3_Receive_V4RuleId10。
命令举例 
`
查询端口规则对象列表信息。
SHOW PORTACLLOGINFO
切片 测量类型ID  对象值              对象名                       对象ID              对象描述                     
------------------------------------------------------------------------------------------------------------------
     61055      42966589440         xgei-1/0/1/2_Send_V4RuleId10 42966589440         xgei-1/0/1/2_Send_V4RuleId10 
     61055      9223372079821365248 xgei-1/0/1/2_Send_V6RuleId10 9223372079821365248 xgei-1/0/1/2_Send_V6RuleId10 
------------------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-03-19 10:17:52 耗时: 0.603 秒
` 
# 时间管理 
# 时间管理 
背景知识 
系统时间由三部分组成，在格林威治标准时间的基础上，加上时区和夏令时偏移。 
功能说明 
该组命令用于夏令时配置、时区配置、修改时间等操作。 
子主题： 
## 时区配置 
## 时区配置 
背景知识 
时区是全球范围内的一个地区，它出于法律，商业和社会目的观察统一的标准时间。 时区倾向于遵循国家及其细分的界限，因为这对于密切商业或其他交流的区域保持相同的时间非常方便。 
功能说明 
该组命令用于设置时区、查询时区等操作。 
子主题： 
### 修改时区配置(SET TIMEZONE) 
### 修改时区配置(SET TIMEZONE) 
功能说明 
小心：该命令属于高危命令，该操作将调整本地时间，操作不当将导致本地时间跳变。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于设置时区。 
当确实需要修改本地时区时，使用该命令。 
修改时区后，系统的本地时间会根据时区发生相应的变化。比如本地时区为东八区GMT+08:00，本地时间为08:00:00，修改本地时区为东九区GMT+09:00，则本地时间变为09:00:00。 
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TIMEZONE|时区|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-65535默认值: GMTE0800|该参数用于设置时区，时区是本地时间与GMT（Greenwich Mean Time，格林尼治标准时间）时间的偏移。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
TIMEZONE|时区|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-65535默认值: GMTE0800|该参数用于显示时区，时区是本地时间与GMT（Greenwich Mean Time，格林尼治标准时间）时间的偏移。
命令举例 
`
设置本地时区为GMT+08:00。
SET TIMEZONE:TIMEZONE="GMTE0800"
` 
### 查询时区配置(SHOW TIMEZONE) 
### 查询时区配置(SHOW TIMEZONE) 
功能说明 
该命令用于查询本地时区。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
TIMEZONE|时区|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-65535默认值: GMTE0800|该参数用于显示时区，时区是本地时间与GMT（Greenwich Mean Time，格林尼治标准时间）时间的偏移。
命令举例 
`
查询本地时区。
SHOW TIMEZONE
(No.1) : SHOW TIMEZONE:
时区
GMT+08:00
记录数：1
执行成功耗时: 0.662 秒
` 
## 夏令时配置 
## 夏令时配置 
背景知识 
夏令时是一种在夏季月份将时间调快从而让夜晚时间来的更迟一些的做法。通常使用夏令时的地区，会在接近春季开始的时候，将时间调快一小时，并在秋季调回正常时间。 
功能说明 
夏令时配置用于设置绝对时间格式的夏令时或相对格式的夏令时，同时设置夏令时的起始时间、终止时间等信息。 
子主题： 
### 修改夏令时配置(SET DAYLIGHTSAVE) 
### 修改夏令时配置(SET DAYLIGHTSAVE) 
功能说明 
小心：该命令属于高危命令，该操作将调整本地时间，操作不当将导致本地时间跳变。因此执行该命令前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于设置夏令时。 
当需要启动夏令时调整本地时间时，使用该命令。 
当夏令时开始后，本地时间会根据配置的步长进行向前或向后的调整，夏令时结束后，本地时间恢复。 
注意事项 
配置相对夏令时时，开始月和结束月至少要间隔1个月，避免因跨度太短，导致某个年份出现夏令时间隔小于步长的情况。例如：起始月配置为3月，终止月至少要配置为5月。 
配置绝对夏令时时，起始时间与终止时间之间的间隔至少要大于24小时。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|启用模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: Disable|启用夏令时的模式：不启用。绝对夏令时。相对夏令时。
STARTMONTH|相对夏令时开始月|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-12默认值: Jan|相对夏令时起始的月份。
STARTWEEKNO|相对夏令时开始星期序号|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: First|相对夏令时开始星期的序号。
STARTWEEKDAY|相对夏令时开始星期几|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: Sun|相对夏令时开始星期几。
STARTTIME|相对夏令时开始时间(HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-16默认值: 00:00|相对夏令时开始时间(HH:mm)。
ENDMONTH|相对夏令时结束月|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-12默认值: Dec|相对夏令时结束的月份。
ENDWEEKNO|相对夏令时结束星期序号|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: Last|相对夏令时结束星期的序号。
ENDWEEKDAY|相对夏令时结束星期几|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: Sun|相对夏令时结束星期几。
ENDTIME|相对夏令时结束时间(HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-16默认值: 00:00|相对夏令时结束时间(HH:mm)。
ABSSTARTTIME|绝对夏令时开始时间(MM-DD HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-32默认值: 01-01 00:00|表示从某个时间点开始启动夏令时。这里的时间点，采用绝对时间模式MM-DD HH:mm，即从某月某日某时某分开始进入夏令时。
ABSENDTIME|绝对夏令时结束时间(MM-DD HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-32默认值: 12-30 23:59|表示从某个时间点结束夏令时，这里的时间点采用绝对时间模式MM-DD HH:mm，即从某月某日某时某分退出夏令时。
STEPTYPE|调整方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: BACK|夏令时调整方式。该参数为增加步长时，表示在夏令时开始时，将系统本地时间增加步长时间。该参数为减少步长时，表示在夏令时开始时，将系统本地时间减少步长时间。
STEPTIME|调整步长(分钟)|参数可选性: 任选参数类型: 数字参数范围: 0-240默认值: 60|表示启用夏令时后，时间调整的偏移量，单位为分钟。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|启用模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: Disable|启用夏令时的模式：不启用。绝对夏令时。相对夏令时。
STARTMONTH|相对夏令时开始月|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-12默认值: Jan|相对夏令时起始的月份。
STARTWEEKNO|相对夏令时开始星期序号|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: First|相对夏令时开始星期的序号。
STARTWEEKDAY|相对夏令时开始星期几|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: Sun|相对夏令时开始星期几。
STARTTIME|相对夏令时开始时间(HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-16默认值: 00:00|相对夏令时开始时间(HH:mm)。
ENDMONTH|相对夏令时结束月|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-12默认值: Dec|相对夏令时结束的月份。
ENDWEEKNO|相对夏令时结束星期序号|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: Last|相对夏令时结束星期的序号。
ENDWEEKDAY|相对夏令时结束星期几|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: Sun|相对夏令时结束星期几。
ENDTIME|相对夏令时结束时间(HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-16默认值: 00:00|相对夏令时结束时间(HH:mm)。
ABSSTARTTIME|绝对夏令时开始时间(MM-DD HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-32默认值: 01-01 00:00|表示从某个时间点开始启动夏令时。这里的时间点，采用绝对时间模式MM-DD HH:mm，即从某月某日某时某分开始进入夏令时。
ABSENDTIME|绝对夏令时结束时间(MM-DD HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-32默认值: 12-30 23:59|表示从某个时间点结束夏令时，这里的时间点采用绝对时间模式MM-DD HH:mm，即从某月某日某时某分退出夏令时。
STEPTYPE|调整方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: BACK|夏令时调整方式。该参数为增加步长时，表示在夏令时开始时，将系统本地时间增加步长时间。该参数为减少步长时，表示在夏令时开始时，将系统本地时间减少步长时间。
STEPTIME|调整步长(分钟)|参数可选性: 任选参数类型: 数字参数范围: 0-240默认值: 60|表示启用夏令时后，时间调整的偏移量，单位为分钟。
命令举例 
`
设置绝对时间格式夏令时，开始时间为1月1日12:00，结束时间为 4月30日13:45，调整方式为增加步长，调整步长为60分钟。
SET DAYLIGHTSAVE:ENABLE="Absolute",ABSSTARTTIME="01-01 12:00",ABSENDTIME="04-30 13:45",STEPTYPE="BACK",STEPTIME=60
` 
### 查询夏令时配置(SHOW DAYLIGHTSAVE) 
### 查询夏令时配置(SHOW DAYLIGHTSAVE) 
功能说明 
该命令用于查询夏令时配置。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|启用模式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-2默认值: Disable|启用夏令时的模式：不启用。绝对夏令时。相对夏令时。
STARTMONTH|相对夏令时开始月|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-12默认值: Jan|相对夏令时起始的月份。
STARTWEEKNO|相对夏令时开始星期序号|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: First|相对夏令时开始星期的序号。
STARTWEEKDAY|相对夏令时开始星期几|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: Sun|相对夏令时开始星期几。
STARTTIME|相对夏令时开始时间(HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-16默认值: 00:00|相对夏令时开始时间(HH:mm)。
ENDMONTH|相对夏令时结束月|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-12默认值: Dec|相对夏令时结束的月份。
ENDWEEKNO|相对夏令时结束星期序号|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: Last|相对夏令时结束星期的序号。
ENDWEEKDAY|相对夏令时结束星期几|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-6默认值: Sun|相对夏令时结束星期几。
ENDTIME|相对夏令时结束时间(HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-16默认值: 00:00|相对夏令时结束时间(HH:mm)。
ABSSTARTTIME|绝对夏令时开始时间(MM-DD HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-32默认值: 01-01 00:00|表示从某个时间点开始启动夏令时。这里的时间点，采用绝对时间模式MM-DD HH:mm，即从某月某日某时某分开始进入夏令时。
ABSENDTIME|绝对夏令时结束时间(MM-DD HH:mm)|参数可选性: 任选参数类型: 字符串参数范围: 0-32默认值: 12-30 23:59|表示从某个时间点结束夏令时，这里的时间点采用绝对时间模式MM-DD HH:mm，即从某月某日某时某分退出夏令时。
STEPTYPE|调整方式|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: BACK|夏令时调整方式。该参数为增加步长时，表示在夏令时开始时，将系统本地时间增加步长时间。该参数为减少步长时，表示在夏令时开始时，将系统本地时间减少步长时间。
STEPTIME|调整步长(分钟)|参数可选性: 任选参数类型: 数字参数范围: 0-240默认值: 60|表示启用夏令时后，时间调整的偏移量，单位为分钟。
命令举例 
`
查询夏令时配置。
SHOW DAYLIGHTSAVE
(No.1) : SHOW DAYLIGHTSAVE:
启用模式    相对夏令时开始月  相对夏令时开始星期序号  相对夏令时开始星期几  相对夏令时开始时间(HH:mm)  相对夏令时结束月  相对夏令时结束星期序号  相对夏令时结束星期几  
相对夏令时结束时间(HH:mm)  绝对夏令时开始时间(MM-DD HH:mm)  绝对夏令时结束时间(MM-DD HH:mm)  调整方向  调整步长(分钟)
相对夏令时  三月             第一个                 星期日               00:00                     十一月            最后一个               星期日
00:00                     01-01 00:00                     12-30 23:59                     向后      60
记录数：1
执行成功耗时: 0.224 秒
` 
## 修改时间(SET TIME) 
## 修改时间(SET TIME) 
功能说明 
该命令用于修改系统的本地时间。 
在本地时间与标准时间有偏差的情况下，需要修正系统本地时间时 使用该命令。 
修改本地时间后，会引起本地时间跳变，需要谨慎使用。 
注意事项 
 
系统支持的时间下限为2000-01-01 12:00:00(UTC)，上限为2121-01-01 00:00:00。 
 
该命令执行后，最多需要1分钟才能在全系统内完全生效。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TIME|时间|参数可选性: 必选参数类型: 字符串|该参数用于标识系统的本地时间，根据实际网络情况输入年月日时分秒格式的时间，比如2020-01-20 11:16:38，可以与"毫秒"参数配合使用，更加精确。
MSEC|毫秒|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于标识系统本地时间的毫秒字段，可以与"时间"参数配合使用，更加精确。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SET_TIME_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示此命令的操作结果，有以下几种结果。操作成功执行超时日期格式错误未找到时钟源非法时间其他失败
命令举例 
`
修改系统的本地时间为2020年1月20日11点16分38秒100毫秒。
SET TIME:TIME="2020-01-20 11:16:38",MSEC=100
` 
## 查询时间(SHOW TIME) 
## 查询时间(SHOW TIME) 
功能说明 
该命令显示系统的本地时间。当需要获取本地时间时，执行该命令。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SHOW_TIME_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示此命令的操作结果，有以下几种结果。操作成功。执行超时。未找到时钟源。其他失败。
SHOW_TIME_TIME|时间|参数可选性: 任选参数类型: 字符串参数范围: 1-64|该参数显示系统的本地时间。
命令举例 
`
查询系统时间。
SHOW TIME:
(No.1) : SHOW TIME:
操作结果
操作成功
时间
2020-01-20 11:16:38.827
执行成功耗时: 0.142 秒
` 
# 密码管理 
# 密码管理 
背景知识 
为了解决系统用户密码不符合安全规范、不支持修改非OMU虚拟机的登录用户密码以及密码明文存储等安全合规问题，密码管理提供命令来修改系统用户密码从而符合安全需求。 
其中，系统用户密码指的就是VNF（Virtualized Network Function，虚拟化网络功能）实例下所有虚拟机的登录用户密码。系统用户一般包括admin以及root等。 
 当V7进行升级等重大操作前需要安全检查加固??虚机密码检查时，密码管理提供命令来进行虚机密码一键检查从而降低了现场维护成本。
功能说明 
该组命令用于虚机密码的修改以及虚机密码的检查。
[SET PASSWD]命令可以进行虚机密码的修改，增强系统安全性。
[CHECK PASSWD]命令可以一键检查能否通过admin用户密码SSH接入虚机，使虚机密码检查操作更加方便快捷。
子主题： 
## 修改密码(SET PASSWD) 
## 修改密码(SET PASSWD) 
功能说明 
小心：该命令会修改系统用户密码，密码修改不当可能导致系统用户权限问题进而影响系统功能。因此执行该操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于修改系统用户密码，即修改VNF实例下所有虚拟机的登录用户密码。系统用户一般包括admin以及root等。 
当系统用户密码不符合安全规范，或根据用户需求修改密码时，可以使用此命令。 
操作成功后，系统用户的密码将会修改为新密码，该用户登录系统所有虚拟机的密码均修改为此新密码，并且系统会对密码进行加密存储。 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
USER|用户名|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定要设置密码的系统用户名。
PASSWORD|原密码|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于验证系统用户的原密码。原密码不能为空且必须正确，命令才可以执行。
NEWPASSWORD|新密码|参数可选性: 必选参数类型: 字符串参数范围: 8-64|该参数用于设置系统用户的新密码。新密码需符合以下要求：密码长度不小于8位。密码需要包含数字、大写字母、小写字母和符号这四类。新密码和原密码不能相同。
CONFIRMPASSWORD|确认密码|参数可选性: 必选参数类型: 字符串参数范围: 8-64|该参数用于确认新密码。确认密码必须和新密码相同，避免新密码输入错误。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！无效用户！原密码错误！新密码不符合要求！其他！虚机异常！确认密码输入错误！
命令举例 
`
设置admin用户密码为********。EM会对输入的密码进行加密显示。
SET PASSWD:USER="admin",PASSWORD="********",NEWPASSWORD="********",CONFIRMPASSWORD="********"
` 
## 检查密码(CHECK PASSWD) 
## 检查密码(CHECK PASSWD) 
功能说明 
当V7进行升级等重大操作前需要安全检查加固??虚机密码检查时，使用该命令。该命令检查了使用admin用户密码是否可以成功SSH连接虚机。 
存在使用admin用户密码无法SSH接入的虚机时，虚机密码检查结果不通过，否则检查通过。 
注意事项 
 
当虚机密码检查失败时，命令执行结果界面最多显示500个无法SSH接入的虚机名称。 
 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
CHECKRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-255|该参数用于表示虚机密码检查结果：检查通过。检查不通过。正在执行相同的命令，请稍后再试！超时！该命令只支持IAAS环境！其他！
VMNAME|虚机名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|该参数用于表示密码检查失败的虚机名称。
CHECKSTAT|检查结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于表示密码检查失败的原因。
命令举例 
`
检查密码结果。
CHECK PASSWD
(No.3)：CHECK PASSWD:
虚机名称             检查结果
------------------------------
zxp-gsucommonc2m4-01 接入失败
zxp-gsucommonc2m4-02 接入失败
zxp-gsucommonc2m4-05 接入失败
------------------------------
记录数：3
操作结果
----------
检查不通过
----------
记录数：1
` 
# NTP管理 
# NTP管理 
背景知识 
网络时间协议NTP（Network Time Protocol）是用于互联网中时间同步的标准互联网协议，以GPS时间代码传送的时间消息为参考标准。采用Client/Server结构，可以把Client的时间同步到某些时间标准。目前采用的时间标准是世界协调时UTC。 
功能说明 
该组命令用于NTP配置、NTP密钥配置、同步NTP时间、查询NTP状态、查询NTP同步状态等操作。 
子主题： 
## NTP配置 
## NTP配置 
背景知识 
NTP配置是一个基本配置，用于启用NTP客户端以及配置NTP服务器地址等信息。 
功能说明 
该组命令用于设置NTP参数、查询NTP等操作。 
子主题： 
### 修改NTP配置(SET NTP) 
### 修改NTP配置(SET NTP) 
功能说明 
该命令用于启动NTP及设置参数。 
当需要连接上级NTP服务器同步时间时，使用该命令。 
命令执行成功后，需要执行[SHOW NTP]命令检查配置是否正确。
注意事项 
 
对接上级NTP服务器时，参数中的NTP版本应该不大于上级NTP服务器实际支持的NTP版本号。 
 
Transmit时间戳参数适合某些特殊NTP服务器，NTP对接失败的，可以尝试修改此参数为“本地UTC时间”。 
 
NTP配置后，可以使用SHOW NTPSTATE命令检查NTP状态，active为正常启动。 
 
NTP配置后，可以使用SHOW NTP SYNSTATE命令检查NTP的同步状态，状态为“已同步”或“已同步(combined)”或“已同步(not combined)”时，表示已经成功同步。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|是否启用NTP同步。
PRIMARYNAME|主服务器名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|主NTP服务器的名称
PRIMARYADD|主服务器IP|参数可选性: 任选参数类型: 字符串|主NTP服务器的IP地址，支持IPv4或IPv6地址。
PRIMARYPORT|主服务器端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 123|主NTP服务器的端口，默认为123。
PRIMARYKEY|主服务器密钥索引|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295默认值: 0|到主NTP服务器同步时间携带的密钥索引。默认值0表示不携带密钥索引。索引需要在增加NTP密钥命令ADD NTPKEY里进行配置。
PRIMARYVER|主服务器版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-128默认值: NTP_VERSION_4|与主NTP服务器同步时间使用的NTP协议版本。目前支持NTP协议版本3和版本4。对接上级NTP服务器时，参数中的NTP版本应该不大于上级NTP服务器实际支持的NTP版本号。
SECNAME|次服务器名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|次NTP服务器的名称。
SECADD|次服务器IP|参数可选性: 任选参数类型: 字符串|第二个NTP服务器的IP地址，支持IPv4或IPv6地址。
SECPORT|次服务器端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 123|第二个NTP服务器的端口，默认为123。
SECKEY|次服务器密钥索引|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295默认值: 0|到第二个NTP服务器同步时间携带的密钥索引。默认值0表示不携带密钥索引。索引需要在增加NTP密钥命令ADD NTPKEY里进行配置。
SECVER|次服务器版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-128默认值: NTP_VERSION_4|到第二个NTP服务器同步时间使用的NTP协议版本。目前支持NTP协议版本3和版本4。对接上级NTP服务器时，参数中的NTP版本应该不大于上级NTP服务器实际支持的NTP版本号。
POLL|轮询间隔|参数可选性: 任选参数类型: 数字参数范围: 3-24默认值: 6|时间同步的轮询间隔，以2的幂指数形式表示。例如，值为6，表示每64秒到NTP服务器获取一次时间。
MAXCHANGE|最大误差阈值(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 3000|当NTP客户端与服务端的时间偏差大于该阈值时，NTP不再同步时间，0表示不限制。
MAXDISTANCE|最大同步距离(秒)|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 16|NTP客户端会计算到各个NTP服务器的同步距离并且会和该距离阈值相比较，如果同步距离超过了该值，客户端将不会同步该服务器的时钟。
TRANSMIT|Transmit时间戳|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: TRANSMIT_RANDOM|NTP客户端发送时间请求消息里的Transmit时间戳填写方式，有随机和本地UTC时间两种，默认为随机。Transmit时间戳填写为本地UTC时间，适合特殊的NTP对接需求。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|是否启用NTP同步。
PRIMARYNAME|主服务器名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|主NTP服务器的名称。
PRIMARYADD|主服务器IP|参数可选性: 任选参数类型: 字符串|主NTP服务器的IP地址，支持IPv4或IPv6地址。
PRIMARYPORT|主服务器端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 123|主NTP服务器的端口，默认为123。
PRIMARYKEY|主服务器密钥索引|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295默认值: 0|到主NTP服务器同步时间携带的密钥索引。默认值0表示不携带密钥索引。
PRIMARYVER|主服务器版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-128默认值: NTP_VERSION_4|与主NTP服务器同步时间使用的NTP协议版本。目前支持NTP协议版本3和版本4。
SECNAME|次服务器名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|次NTP服务器的名称。
SECADD|次服务器IP|参数可选性: 任选参数类型: 字符串|第二个NTP服务器的IP地址，支持IPv4或IPv6地址。
SECPORT|次服务器端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 123|第二个NTP服务器的端口，默认为123。
SECKEY|次服务器密钥索引|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295默认值: 0|到第二个NTP服务器同步时间携带的密钥索引。默认值0表示不携带密钥索引。
SECVER|次服务器版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-128默认值: NTP_VERSION_4|到第二个NTP服务器同步时间使用的NTP协议版本。目前支持NTP协议版本3和版本4。
POLL|轮询间隔|参数可选性: 任选参数类型: 数字参数范围: 3-24默认值: 6|时间同步的轮询间隔，以2的幂指数形式表示。例如，值为6，表示每64秒到NTP服务器获取一次时间。
MAXCHANGE|最大误差阈值(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 3000|当NTP客户端与服务端的时间偏差大于该阈值时，NTP不再同步时间，0表示不限制。
MAXDISTANCE|最大同步距离(秒)|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 16|NTP客户端会计算到各个NTP服务器的同步距离并且会和该距离阈值相比较，如果同步距离超过了该值，客户端将不会同步该服务器的时钟。
TRANSMIT|Transmit时间戳|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: TRANSMIT_RANDOM|NTP客户端发送时间请求消息里的Transmit时间戳填写方式，有随机和本地UTC时间两种，默认为随机。Transmit时间戳填写为本地UTC时间，适合特殊的NTP对接需求。
命令举例 
`
修改NTP配置，启用NTP服务，主服务器IP地址为"10.43.1.1"，端口为123，没有密钥，版本使用NTP V4，次服务器地址为"2001::1",端口为123，密钥索引为1，版本为NTP V3，轮询间隔为6，最大误差阈值1000毫秒，最大同步距离为16秒,Transmit时间戳为随机。
SET NTP:ENABLE="YES",PRIMARYADD="10.43.1.1",PRIMARYPORT=123,PRIMARYKEY=0,PRIMARYVER="NTP_VERSION_4",SECADD="2001::1",SECPORT=123,SECKEY=1,SECVER="NTP_VERSION_3",POLL=6,MAXCHANGE=1000,MAXDISTANCE=16,TRANSMIT="TRANSMIT_RANDOM";
` 
### 查询NTP配置(SHOW NTP) 
### 查询NTP配置(SHOW NTP) 
功能说明 
该命令用于查询NTP配置。命令执行成功后，可以查询到是否启用NTP，主服务器IP和次服务器IP等信息。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
ENABLE|是否启用|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|是否启用NTP同步。
PRIMARYNAME|主服务器名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|主NTP服务器的名称。
PRIMARYADD|主服务器IP|参数可选性: 任选参数类型: 字符串|主NTP服务器的IP地址，支持IPv4或IPv6地址。
PRIMARYPORT|主服务器端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 123|主NTP服务器的端口，默认为123。
PRIMARYKEY|主服务器密钥索引|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295默认值: 0|到主NTP服务器同步时间携带的密钥索引。默认值0表示不携带密钥索引。
PRIMARYVER|主服务器版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-128默认值: NTP_VERSION_4|与主NTP服务器同步时间使用的NTP协议版本。目前支持NTP协议版本3和版本4。
SECNAME|次服务器名称|参数可选性: 任选参数类型: 字符串参数范围: 0-64|次NTP服务器的名称。
SECADD|次服务器IP|参数可选性: 任选参数类型: 字符串|第二个NTP服务器的IP地址，支持IPv4或IPv6地址。
SECPORT|次服务器端口|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 123|第二个NTP服务器的端口，默认为123。
SECKEY|次服务器密钥索引|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295默认值: 0|到第二个NTP服务器同步时间携带的密钥索引。默认值0表示不携带密钥索引。
SECVER|次服务器版本|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-128默认值: NTP_VERSION_4|到第二个NTP服务器同步时间使用的NTP协议版本。目前支持NTP协议版本3和版本4。
POLL|轮询间隔|参数可选性: 任选参数类型: 数字参数范围: 3-24默认值: 6|时间同步的轮询间隔，以2的幂指数形式表示。例如，值为6，表示每64秒到NTP服务器获取一次时间。
MAXCHANGE|最大误差阈值(毫秒)|参数可选性: 任选参数类型: 数字参数范围: 0-65535默认值: 3000|当NTP客户端与服务端的时间偏差大于该阈值时，NTP不再同步时间，0表示不限制。
MAXDISTANCE|最大同步距离(秒)|参数可选性: 任选参数类型: 数字参数范围: 0-255默认值: 16|NTP客户端会计算到各个NTP服务器的同步距离并且会和该距离阈值相比较，如果同步距离超过了该值，客户端将不会同步该服务器的时钟。
TRANSMIT|Transmit时间戳|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: TRANSMIT_RANDOM|NTP客户端发送时间请求消息里的Transmit时间戳填写方式，有随机和本地UTC时间两种，默认为随机。Transmit时间戳填写为本地UTC时间，适合特殊的NTP对接需求。
命令举例 
`
查询NTP配置。
SHOW NTP
(No.1) : SHOW NTP:
是否启用  主服务器名称  主服务器IP   主服务器端口  主服务器密钥索引  主服务器版本   次服务器名称   次服务器IP   次服务器端口  次服务器密钥索引  次服务器版本  轮询间隔  最大误差阈值(毫秒) 最大同步距离(秒)  Transmit时间戳
是        ntp_1         10.30.1.105  123           0                 NTP协议版本4   ntp_2          192.168.1.3  123           0                 NTP协议版本4  6         0                  16                随机  
记录数：1
执行成功耗时: 0.147 秒
` 
## NTP密钥配置 
## NTP密钥配置 
背景知识 
NTP协议支持消息鉴权码(MAC)来防止网络攻击。 
功能说明 
该组命令用于增加NTP秘钥、修改NTP秘钥、删除NTP秘钥、查询NTP秘钥等操作。 
子主题： 
### 增加NTP密钥(ADD NTPKEY) 
### 增加NTP密钥(ADD NTPKEY) 
功能说明 
该命令用于增加NTP密钥。当需要启动NTP协议的消息鉴权码(MAC)时，使用该命令。命令执行成功后，可以使用[SHOW NTPKEY]命令查询配置结果。
注意事项 
增加NTP密钥需要与NTP服务器协商，否则会导致NTP对接失败。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 必选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
KEY|密钥|参数可选性: 任选参数类型: 字符串参数范围: 1-512|密钥，指定当前正在使用的密钥。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 任选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
KEY|密钥|参数可选性: 任选参数类型: 字符串参数范围: 1-512|密钥，指定当前正在使用的密钥。
命令举例 
`
增加NTP密钥，密钥索引为1，密钥为*********。
ADD NTPKEY:INDEX=1,KEY="*********"
` 
### 修改NTP密钥(SET NTPKEY) 
### 修改NTP密钥(SET NTPKEY) 
功能说明 
该命令用于修改NTP密钥。当需要修改索引对应的密钥时，使用该命令。命令执行成功后，可以使用[SHOW NTPKEY]命令查询修改后的配置。
注意事项 
修改NTP密钥需要与NTP服务器协商，否则会导致NTP对接失败。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 必选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
KEY|密钥|参数可选性: 任选参数类型: 字符串参数范围: 1-512|密钥，指定当前正在使用的密钥。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 任选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
KEY|密钥|参数可选性: 任选参数类型: 字符串参数范围: 1-512|密钥，指定当前正在使用的密钥。
命令举例 
`
修改NTP密钥，密钥索引为1，密钥为*********。
SET NTPKEY:INDEX=1,KEY="*********"
` 
### 删除NTP密钥(DEL NTPKEY) 
### 删除NTP密钥(DEL NTPKEY) 
功能说明 
该命令用于删除NTP密钥。当需要删除密钥时，使用该命令。命令执行成功后，可以使用[SHOW NTPKEY]命令查询删除后的配置。
注意事项 
删除NTP密钥需要与NTP服务器协商，否则会导致NTP对接失败。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 必选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 任选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
命令举例 
`
删除密钥索引为1的密钥。
DEL NTPKEY:INDEX=1;
` 
### 查询NTP密钥(SHOW NTPKEY) 
### 查询NTP密钥(SHOW NTPKEY) 
功能说明 
该命令用于查询NTP密钥。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
INDEX|密钥索引|参数可选性: 任选参数类型: 数字参数范围: 1-4294967295|密钥索引，指定当前的密钥的索引值。
KEY|密钥|参数可选性: 任选参数类型: 字符串参数范围: 1-512|密钥，指定当前正在使用的密钥。
命令举例 
`
查询所有NTP密钥。
SHOW NTPKEY;
(No.1) : SHOW NTPKEY:
密钥索引  密钥
1         *********
记录数：1
执行成功耗时: 0.144 秒
` 
## 同步NTP时间(SYNC NTPTIME) 
## 同步NTP时间(SYNC NTPTIME) 
功能说明 
该命令用于手工同步NTP时间。 
当上报"NTP时间同步超门限"告警或其他需要手工同步NTP时间的场景下，使用该命令。 
该命令忽略[SET NTP]配置中设置的最大误差阈值，强制同步一次NTP时间，使得本地时间与标准时间保持一致。
注意事项 
使用该命令前，需要先在[SET NTP]配置中启用NTP且配置上级NTP服务器的IP地址。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NTP_TIME_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|操作结果：同步NTP时间成功。同步NTP时间失败。未找到时钟源。执行超时。
命令举例 
`
手工同步NTP时间。
SYNC NTPTIME
(No.1) : SYNC NTPTIME:
操作结果
同步NTP时间成功
记录数：1
执行成功 耗时: 0.054 秒
` 
## 查询NTP状态(SHOW NTPSTATE) 
## 查询NTP状态(SHOW NTPSTATE) 
功能说明 
该命令用于查询NTP状态。 
执行命令成功后，可以根据NTP状态判断NTP是否启动。NTP状态为active表示已经正常启动NTP，inactive表示未启动。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
NTP_STATE_RES|NTP状态|参数可选性: 必选参数类型: 字符串参数范围: 0-32|active：NTP服务已经启动inactive：NTP服务未启动
命令举例 
`
查询NTP状态。
SHOW NTPSTATE
(No.1) : SHOW NTPSTATE:
NTP状态
active
执行成功耗时: 1.368 秒
` 
## 查询NTP同步状态(SHOW NTP SYNSTATE) 
## 查询NTP同步状态(SHOW NTP SYNSTATE) 
功能说明 
该命令用于查询NTP的同步状态。 
当需要查询NTP是否成功同步时使用该命令。 
命令执行成功后，可以根据状态判断NTP是否成功同步时间。状态为“已同步”或“已同步(combined)”或“已同步(not combined)”时，表示NTP已经成功同步。 
注意事项 
需要提前在NTP配置（[SET NTP]）里启用NTP且配置NTP服务器IP。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
STATE|状态|参数可选性: 必选参数类型: 枚举，参见枚举定义|已同步，表示成功同步NTP时间。已同步(combined)，表示成功同步NTP时间，而且是两个NTP服务器联合提供了本地时间。已同步(not combined)，表示成功同步NTP时间，但不是两个NTP服务器联合提供本地时间，只有主NTP服务器提供本地时间。不可达，表示到NTP服务器地址不通或是NTP服务未启动。同步错误，表示两个NTP服务器的时间本身差别太大或其他同步错误。时间不稳定，表示NTP服务器时间跳变太多，提供的时间不稳定。
REMOTE|远端|参数可选性: 必选参数类型: 字符串参数范围: 0-64|上级NTP服务器的IP地址。
STRATUM|级别|参数可选性: 必选参数类型: 数字参数范围: 0-16|上级NTP服务器在NTP网络中的层次级别。
POLL|轮询间隔|参数可选性: 必选参数类型: 数字参数范围: 0-24|时间同步的轮询间隔，以2的幂指数形式表示。例如，值为6，表示每64秒到NTP服务器获取一次时间。
REACH|可达状态|参数可选性: 必选参数类型: 字符串参数范围: 0-32|用八进制数描述最近八次的NTP同步状态，初始值为全零。每一个比特位，1表示同步成功，0表示同步失败。每同步一次，这个比特位就左移一位，最近一次的同步结果总是显示在最右边的比特位上。比如17(OCT)->00001111 意味着最近4次NTP同步成功，其中17是八进制的值而00001111是它对应的二进制。
WHEN|上次同步后经过时间(秒)|参数可选性: 必选参数类型: 字符串参数范围: 0-64|上次同步后到当前经过的时间。
DELAY|时间延迟(秒)|参数可选性: 必选参数类型: 字符串参数范围: 0-64|与上级时钟的同步延迟，表示NTP客户端发送时间请求和收到NTP服务器响应之间的时间差。
OFFSET|时间偏差(秒)|参数可选性: 必选参数类型: 字符串参数范围: 0-64|与上级时钟的时间偏差。
命令举例 
`
查询NTP同步状态。
SHOW NTP SYNSTATE
(No.1) : SHOW NTP SYNSTATE:
状态    远端         级别  轮询间隔  可达状态           上次同步后经过时间(秒)  时间延迟(秒)  时间偏差(秒)
已同步  10.30.1.105  1     6        34(OCT)->00011100  8                     0.083278887   -0.010041077
不可达  192.168.1.3  0     6        0(OCT)->00000000   -                     0.000000000   0.000000000
记录数：2
执行成功耗时: 0.735 秒
` 
# MTU管理 
# MTU管理 
背景知识 
MTU（Maximum Transfer Unit，最大传输单元）管理提供了设置与查询系统MTU值功能。
可以设置oam平面，extern平面和service平面的MTU值。 
不支持MGT平面MTU的修改，因为MGT平面是内部通讯平面，消息传递需要依赖，如果MGT平面修改，可能造成配置数据下发后网络不通的异常，从而导致MGT平面网络瘫痪，无法恢复。 
网络层一般要限制每次发送数据帧的最大长度。任何时候IP层接收到一份要发送的IP数据时，它要判断向本地哪个接口发送数据，并查询该接口获得其MTU。IP层把MTU与要发送的数据包长度进行比较，如果数据包的长度比MTU值大，IP层就需要进行分片，分片后的数据可以小于等于MTU。 
如果设置强制不分片，IP层在传输数据时可能会出现丢包现象。即，当需要保证网络中的大报文不丢失时，需要对大报文进行强制分片。可以通过设置MTU来设置报文分片的大小。 
 
如果MTU配置过小而报文尺寸较大，可能会造成分片过多，报文被QoS队列丢弃。 
 
如果MTU配置过大，可能会造成报文的传输速度较慢。 
 
功能说明 
该组命令用于设置、查询系统MTU值。主要功能： 
 
修改MTU值，实例化后操作人员发现规划的MTU值与业务实际需要的MTU值不符，为避免重新实例化，可以使用该命令更改指定平面（比如oam平面、extern平面、service平面）MTU值。 
 
查询MTU值， 查询已配置的MTU值。 
 
修改MTU值后，需要通过 [RESET SYSTEM]命令整局重启，才可以生效。MTU值配置不当会导致配置平面网络不通，会对当前的业务造成重大影响，请慎重操作。
MTU值有默认值，如果规划配置与实际MTU值一致，可以不做修改。 
子主题： 
## 修改MTU值(SET MTU) 
## 修改MTU值(SET MTU) 
功能说明 
该命令用于设置系统MTU（Maximum Transfer Unit，最大传输单元）值。 
实例化后操作人员发现规划的MTU值与业务实际需要的MTU值不符，为避免重新实例化，可以使用该命令更改指定平面（比如oam平面、extern平面、service平面）MTU值。 
指定平面的MTU值设置成功后，可以使指定平面网络正常。 
注意事项 
 
配置前，需要确认云平台上配置的VIM层的MTU值，待配置值不能大于VIM层MTU值。 
 
该命令配置后，需要通过 RESET SYSTEM命令整局重启，才可以生效。MTU值配置不当会导致配置平面网络不通，会对当前的业务造成重大影响，请慎重操作。 
 
MTU值有默认值，如果规划配置与实际MTU值一致，可以不做修改。 
 
该命令配置后，不能删除，只能修改。 
 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NETTYPE|网络类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于设置待配置的网络平面。各参数选项的含义是：oam平面extern平面service平面
MTU|MTU值|参数可选性: 必选参数类型: 数字参数范围: 1280-8192|该参数用于设置网络平面的MTU值。该参数的配置原则是：待配置值不能大于云平台上配置的VIM层MTU值。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SET_MTU_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示设置指定网络平面的MTU值的操作结果，可能出现的结果举例如下。成功失败操作冲突通知数据库存盘失败数据库主备目录存盘都失败数据库主目录存盘失败数据库备份目录存盘失败数据库存盘失败，没有版本表没有信息需要保存数据库读取zdb文件出现异常正在进行本板数据库存盘正在进行主备板数据库存盘数据库存盘，未知错误数据库存盘超时数据入库失败数据库操作失败数据库IO JOB 忙数据库存盘被禁止数据库存盘，主板成功，备板失败正在执行相同的命令，请稍后再试！执行超时
命令举例 
`
设置OAM平面的MTU值为2000。
 SET MTU:NETTYPE="OAM_PLANE",MTU=2000
` 
## 查询MTU值(SHOW MTU) 
## 查询MTU值(SHOW MTU) 
功能说明 
该命令用于查询系统MTU（Maximum Transfer Unit，最大传输单元）值。 
在运维人员需要了解系统中MTU配置时，可以通过该命令查询。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SHOW_NET_TYPE|网络类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示网络类型，如：oam平面、extern平面、service平面。
SHOW_MTU_VALUE|MTU值|参数可选性: 必选参数类型: 数字参数范围: 1280-8192|该参数用于显示网络类型配置的MTU值。
SHOW_MTU_RES|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示查询指定网络平面的MTU值的操作结果，可能出现的结果举例如下。成功失败数据库查询失败MTU未配置正在执行相同的命令，请稍后再试！执行超时
命令举例 
`
查询系统MTU值。
SHOW MTU
 (No.3) :SHOW MTU:
操作结果
--------------
成功
--------------
网络类型   MTU值
-------------------------
oam平面    2000
-------------------------
记录数：1
` 
系统调测 : 
系统调测 : 
背景知识 
系统调测是指产品在完成软件安装、升级等操作后，对系统进行一系列的调试、验证、以及软件运行信息的采集，以确保系统按设计要求投入使用，并能稳定、安全、可靠地运行。 
功能说明 
该组命令用于提供对系统进行调试、验证及相关信息的采集等方法，确保系统正常运行。主要功能： 
 
一键采集ROSNG业务性能数据 
 
查看进程运行信息 
 
诊断网络链路质量 
 
启用操作系统日志功能 
 
诊断节点间通讯链路 
 
子主题： 
调测信息收集 : 
调测信息收集 : 
背景知识 
SC (Service componet  服务组件) 是一组进程，一个SC物理形态就是一个容器。 
TMSP (Telecom Micro  Service Platform 电信微服务平台) 是为中兴5GC核心网提供微服务的平台。 
ROSNG (next generation Routing Operating System 全分布式协议栈平台) 是TMSP服务内的一个SC类型，作为协议栈功能模块提供组网路由协议功能。 
NFS(Network Function Service) 是5G标准定义的网络功能服务。 
调测信息收集是指收集NFS内模块的调试信息及性能数据信息。CommonS_TMSP_0(微服务治理)NFS内的调测信息收集是指从OMU目录获取Rosng业务性能数据日志文件生成Rosng日志收集zip文件，使用命令执行结果中的SFTP URL下载Rosng日志zip文件。运维人员和技术人员根据该日志文件可以分析系统中业务的运行情况，确保系统正常运行。 
功能说明 
该组命令用于收集并保存其归属NFS内模块的业务性能数据信息，以便运维人员判断系统中业务的运行情况，确保系统正常运行。主要功能： 
 
查询含有Debug信息的模块列表 
 
清理模块调测信息 
 
该命令适用于业务性能数据一键采集场景，采集命令对用户不可见，由运维人员执行，采集周期由运维人员决定。 
子主题： 
### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 
### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 
功能说明 
该命令用于查询其归属的NFS内含有调测信息的模块列表。当运维人员需要收集或者清除指定模块的调试信息时，可以执行该命令查询含有调测信息的模块名称。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名|参数可选性: 必选参数类型: 字符串参数范围: 1-47|该参数用于表示支持统计信息的模块名称。
MODULE_INST|模块实例数|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示支持统计信息的模块实例数。
命令举例 
`
查询某个NFS中含有调试统计信息的模块列表。
 SHOW DEBUG MODULELIST
------CommonS_TMSP_0--------
模块名         模块实例数
ROSNG_ADAPT    1
ROSNG_ARCH     1
记录数：2
执行成功耗时: 0.259 秒
` 
### 清理模块内部统计信息(CLEAR DEBUG INFO) 
### 清理模块内部统计信息(CLEAR DEBUG INFO) 
功能说明 
该命令用于清理其归属NFS内模块的调测信息。当需要获取新的调测信息前，先执行该命令。 
注意事项 
获取新的调测信息前可以先执行该命令，该命令返回的“失败数量”为非0则需要联系中兴通讯技术人员支持；为0则可获取新的调测信息。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名称|参数可选性: 任选参数类型: 字符串参数范围: 1-47|该参数用于表示需要清除调测信息的模块名称。该参数选项的含义是：默认为空：表示清除NFS内所有的调测信息。非空：表示清除指定模块的调测信息，可由 SHOW DEBUG MODULELIST命令获取模块名称。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MODULE_NUMBER|模块实例数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理的模块实例总数量。
SUCCESS_NUMBER|成功数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理成功的模块实例数量。
FAILED_NUMBER|失败数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理失败的模块实例数量。
命令举例 
`
清理名称为ROSNG_ADAPT的模块的调测信息。
CLEAR DEBUG INFO:MODULE_NAME="ROSNG_ADAPT"
` 
## 诊断函数 
## 诊断函数 
背景知识 
NFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务。 
SC (Service componet  服务组件) 是一组进程，一个SC实例的物理形态就是一个容器。一个NFS实例通常包含多种SC类型。 
诊断函数是为了支持在商用局点执行调试函数，查看调试信息及运行状态，满足系统运维要求而实现的功能。当运维人员需要定位某个容器中的某个进程中的问题时，需要使用该功能。 
功能说明 
该组命令可以在不登录到业务容器的情况下，直接在网管界面运行各进程中实现的调试函数，来查看和收集调试信息，便于定位问题。 
该组命令包含三个功能：查询进程信息、查询SC进程调试函数、执行进程调试函数。使用顺序为： 
查询进程信息([SHOW PROCESSINFO])：先查询要执行调试函数的进程号。
查询SC进程调试函数([SHOW NFS])：然后查询该进程的调试函数。
执行进程调试函数([EXEC PROCESSDEBUG])：最后执行该进程的特定调试函数。
该组命令主要是辅助中兴通讯技术支持人员定位问题，建议运维人员在中兴通讯技术支持人员指导下使用。 
子主题： 
### 查询进程信息(SHOW PROCESSINFO) 
### 查询进程信息(SHOW PROCESSINFO) 
功能说明 
该命令用于查询指定SC实例的进程信息，包括进程名、进程ID、进程号。 
当需要执行[SHOW PROCESSDEBUGINFO]命令查看SC内的某个进程支持的调试函数时，需要使用该命令确认该进程的进程号。
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定SC实例所属的NFS实例的名称，可通过SHOW NFS命令查看可输入的NFS实例名称。对于TMSP服务，不检查该参数填写是否有效。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC实例的类型，可通过SHOW SCTYPE命令查看可输入的SC类型。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定SC实例所属SC组的组号，可通过SHOW SCINFO命令查看可输入的SC组号。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于指定SC实例所属SC组的组内编号，可通过SHOW SCINFO命令查看可输入的SC组内编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
PROCNAME|进程名|参数可选性: 必选参数类型: 字符串参数范围: 0-80|该参数用于表示查询到的SC实例的进程名，比如mcm_plat。
PROCID|进程ID|参数可选性: 必选参数类型: 数字参数范围: 0-4294967294|该参数用于表示查询到的SC实例的进程ID，是进程的唯一标识符。
PROCINDEX|进程号|参数可选性: 必选参数类型: 数字参数范围: 0-4294967294|该参数用于表示查询到的SC实例的进程序列号，从0开始依次递增。
命令举例 
`
查询指定SC实例的进程信息(最多128个)，NFS实例名称为CommonS_TMSP_0，SC类型为sc-tmsp-mp，SC组号是1，组内编号为1。
SHOW PROCESSINFO:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mp",SCGROUPNUM=1,SCINTRAGROUPNUM=1
(No.1) : SHOW PROCESSINFO:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mp",SCGROUPNUM=1,SCINTRAGROUPNUM=1
进程名                        进程ID 进程号 
-------------------------------------------
mcm_plat                      11     0      
SC_VNFP_DDMAPP                51     1      
FMM                           52     2      
OAMPROXY_X86_64               53     3      
TMSP_UPGRADE_AGENT_X86_64.exe 54     4      
-------------------------------------------
记录数：5
` 
### 查询SC进程调试函数(SHOW PROCESSDEBUGINFO) 
### 查询SC进程调试函数(SHOW PROCESSDEBUGINFO) 
功能说明 
该命令用于查询在SC内的进程中可执行的调试函数。 
运维人员在商用局点可以通过该命令进行系统维护调试。 
当需要查看进程的调试信息时，需要先执行该命令显示出该进程内允许执行的调试函数，再执行[EXEC PROCESSDEBUG]命令查看具体调试信息。
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定SC实例所属的NFS实例的名称，可通过SHOW NFS命令查看可输入的NFS实例名称。对于TMSP服务，不检查该参数填写是否有效。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC实例的类型，可通过SHOW SCTYPE命令查看可输入的SC类型。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定SC实例所属SC组的组号，可通过SHOW SCINFO命令查看可输入的SC组号。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于指定SC实例所属SC组的组内编号，可通过SHOW SCINFO命令查看可输入的SC组内编号。
PROCINDEX|进程号|参数可选性: 必选参数类型: 数字参数范围: 0-4294967294|该参数用于指定进程序列号。可通过SHOW PROCESSINFO命令获取。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
FUNCNAME|功能名称|参数可选性: 必选参数类型: 字符串参数范围: 0-40|该参数用于表示查询到的调试函数的名称。
PARAMLIST|参数列表|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于表示查询到的调试函数的输入参数列表。
FUNCDESC|功能描述|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于表示查询到的调试函数的主要功能。
命令举例 
`
查询NFS实例名称为CommonS_TMSP_0、SC类型为sc-tmsp-mp、SC组号是1，组内编号为1的SC实例上的1号进程中允许执行的调试函数。
SHOW PROCESSDEBUGINFO:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mp",SCGROUPNUM=1,SCINTRAGROUPNUM=1,PROCINDEX=1
(No.1) : SHOW PROCESSDEBUGINFO:NFSNAME="CommonS_TMSP_0",SCTYPE="sc-tmsp-mp",SCGROUPNUM=1,SCINTRAGROUPNUM=1,PROCINDEX=1
功能名称          参数列表 功能描述                                                                                      
-------------------------------------------------------------------
showRangeInfoMaps         show MML code segment registered by app                                                       
showDdmJobData            show infos of DDM registered to OAM                                                           
-------------------------------------------------------------------
记录数：2
` 
### 执行进程调试函数(EXEC PROCESSDEBUG) 
### 执行进程调试函数(EXEC PROCESSDEBUG) 
功能说明 
该命令用于执行指定SC实例上指定进程的调试函数。 
当需要查看进程的调试信息或运行状态时，需要使用该命令，为运维人员在商用局点进行系统维护调试提供便利。执行成功，可以在界面显示进程的调试信息或运行状态。 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
NFSNAME|NFS实例名称|参数可选性: 必选参数类型: 字符串参数范围: 1-200|该参数用于指定SC实例所属的NFS实例的名称，可通过SHOW NFS命令查看可输入的NFS实例名称。对于TMSP服务，不检查该参数填写是否有效。
SCTYPE|SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定SC实例的类型，可通过SHOW SCTYPE命令查看可输入的SC类型。
SCGROUPNUM|SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定SC实例所属SC组的组号，可通过SHOW SCINFO命令查看可输入的SC组号。
SCINTRAGROUPNUM|SC组内编号|参数可选性: 必选参数类型: 数字参数范围: 0-1023|该参数用于指定SC实例所属SC组的组内编号，可通过SHOW SCINFO命令查看可输入的SC组内编号。
PROCINDEX|进程号|参数可选性: 必选参数类型: 数字参数范围: 0-4294967294|该参数用于指定进程序列号，可通过SHOW PROCESSINFO命令获取。
EXECFUNC|执行命令|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于指定需要执行的函数，可通过SHOW PROCESSDEBUGINFO命令获取。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
RETCODE|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3|该参数用于表示执行该命令的操作结果：成功。正在执行相同的命令，请稍后再试！向指定进程发送查询调试函数命令失败！找不到指定进程!超时！调试命令解析失败！进程超时！函数未注册！其他！超时无响应！输入的NFS实例名称不存在！
RESULTMSG|结果信息|参数可选性: 必选参数类型: 字符串参数范围: 0-16384|该参数用于表示查询到的进程调试函数详细的调试信息。
命令举例 
`
执行一条进程调试函数，NFS实例名称为CommonS_IPS_0，SC类型为sc-ips-mp，SC组号是1，组内编号为0，进程号为1，执行命令为SCCUShowSc()。
EXEC PROCESSDEBUG:NFSNAME="CommonS_IPS_0",SCTYPE="sc-ips-mp",SCGROUPNUM=1,SCINTRAGROUPNUM=0,PROCINDEX=1,EXECFUNC="SCCUShowSc()"
(No.1) : EXEC PROCESSDEBUG:NFSNAME="CommonS_IPS_0",SCTYPE="sc-ips-mp",SCGROUPNUM=1,SCINTRAGROUPNUM=0,PROCINDEX=1,EXECFUNC="SCCUShowSc()"
结果信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
--------------------------------------------------------------------------------------------------------------------------------------------------------------
[SCCU_VROUTER_FWD]R_SC (ScMaxId = 2):
[SCCU_VROUTER_FWD]LogicNo ServType Inst ScType CommID    AdmComId  Group Iseq  Status[c s b m f ts] Alloc Special TTL TipcTTL PowerOnTime ScTypeName VruName
[SCCU_VROUTER_FWD]   1       4       0     2 0x04000801 0x04001c01    1     0     2  [2 0 0 0 0 0 ]   0      1      0    0      666956332 sc-ips vru-ips-0
[SCCU_VROUTER_FWD]   2       4       0     2 0x04000802 0x04001c02    1     1     2  [2 0 0 0 0 0 ]   0      0      0    0      666956331 sc-ips vru-ips-1
[SCCU_VROUTER_FWD]1001       4       0     2 0x04000be9 0x04000402    0     1     2  [2 0 0 0 0 0 ]   7      0      0    0              0 sc-ips vru-ips-mp-1
[SCCU_VROUTER_FWD]1003       4       0     2 0x04000beb 0x04000402    0     1     2  [2 0 0 0 0 0 ]   7      0      0    0              0 sc-ips vru-ips-mp-1
[SCCU_VROUTER_FWD]value = 1024 = 0x400(32);value = 1024=0x400(64)
--------------------------------------------------------------------------------------------------------------------------------------------------------------
执行结果 
---------
成功     
---------
记录数：1
` 
## 内部通道IP染色 
## 内部通道IP染色 
背景知识 
DSCP（Differentiated Services Code Point，差分服务代码点）：IETF发布的QoS分类标准。它在每个数据包IP头部的服务类别TOS标识字节中，通过编码值来区分优先级。 
IP染色是定位网络链路质量的一种手段。发送端对报文做特定的标记称之为染色。 
源端发送报文时，可以根据规则设置IP报文头中DSCP字段的值，并统计染色报文的数量。目的端接收报文时，也可以根据IP头中DSCP字段的值统计染色报文数量。通过对比染色报文数量，可以确认报文丢失的节点，从而可以进行网络报文故障的定位。 
功能说明 
该组命令通过提供对染色任务的创建、删除、查询、启动、停止以及对染色统计的查询、清除等相关操作，实现内部通道IP染色的功能。 
当网元内出现两个节点间的丢包问题时，使用该组命令。 
初次执行染色功能的具体流程如下： 
 
创建染色任务(ADD INNER COLORING) 
 
依次启动目的端和源端染色任务(START INNER COLORING) 
 
依次停止源端和目的端染色任务(STOP INNER COLORING) 
 
查看染色统计(SHOW INNER COLORING COUNT) 
 
染色任务可以重复使用，因此再次执行染色功能时，可以根据需求启动已创建的染色任务，启动前可以通过[CLEAR INNER COLORING COUNT]命令清除之前的染色统计，或者通过[ADD INNER COLORING]命令创建新的染色任务，后续流程与初次使用相同。可以通过[SHOW INNER COLORING]命令查询已创建的染色任务。对于不需要的染色任务可以通过[DELETE INNER COLORING]命令进行删除。
子主题： 
### 创建染色任务(ADD INNER COLORING) 
### 创建染色任务(ADD INNER COLORING) 
功能说明 
该命令用于创建一个染色任务。 
当需要对网络丢包问题进行定位时，使用该命令。 
创建染色任务需要指定任务编号、源端信息、目的端信息以及染色值。 
执行该命令前后，可以通过[SHOW INNER COLORING]命令查询已创建以及新创建的染色任务。
刚创建好的染色任务会被保存但不能立即执行染色功能，需执行[START INNER COLORING]命令启动该染色任务。
注意事项 
染色任务的编号具有唯一性不能重复。染色任务的源端信息和目的端信息具有唯一性不能重复，不允许创建源端信息、目的端信息完全一样的两个染色任务。可以通过[SHOW INNER COLORING]命令查询已存在的染色任务。
TMSP、OAM等公共服务不支持此操作。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于设置染色任务的编号。任务编号具有唯一性不能重复，可以通过SHOW INNER COLORING命令查询已存在的任务编号。
SOURCENFSNAME|源端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定源端NFS的实例名称，可以通过SHOW NFS命令进行查询。
SOURCESCTYPE|源端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定源端SC的类型，可以通过SHOW SCTYPE命令进行查询。
SOURCESCGROUPNO|源端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定源端SC的组号，可以通过SHOW SCINFO命令进行查询。
SOURCESCNO|源端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于指定源端SC的组内编号，可以通过SHOW SCINFO命令进行查询。
DESTNFSNAME|目的端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定目的端NFS的实例名称，可以通过SHOW NFS命令进行查询。
DESTSCTYPE|目的端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定目的端SC的类型，可以通过SHOW SCTYPE命令进行查询。
DESTSCGROUPNO|目的端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定目的端SC的组号，可以通过SHOW SCINFO命令进行查询。
DESTSCNO|目的端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于指定目的端SC的组内编号，可以通过SHOW SCINFO命令进行查询。
COLORCODE|染色值|参数可选性: 必选参数类型: 数字参数范围: 1-63|该参数用于设置染色任务的染色值，即对IP报文进行染色标记的DSCP值，这个值由使用者自己决定。源端发送报文时，将报文中的DSCP值染色成设置好的染色值。目的端接收报文时，根据报文中的DSCP值来统计报文数量。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！输入的任务编号已存在！任务保存失败！SCCU返回错误！TMSP、OAM等公共服务不支持此操作！输入参数错误！
命令举例 
`
创建一个任务编号为1的染色任务。
源端：NFS名称为CommonS_IPS_0，SC类型为sc-ips，SC组号为1，SC编号为0。
目的端：NFS名称为CommonS_SIG_0，SC类型为sc-sig，SC组号为1，SC编号为0。
染色值为1。
ADD INNER COLORING:TASKNO=1,SOURCENFSNAME="CommonS_IPS_0",SOURCESCTYPE="sc-ips",SOURCESCGROUPNO=1,SOURCESCNO=0,DESTNFSNAME="CommonS_SIG_0",DESTSCTYPE="sc-sig",DESTSCGROUPNO=1,DESTSCNO=0,COLORCODE=1
` 
### 删除染色任务(DELETE INNER COLORING) 
### 删除染色任务(DELETE INNER COLORING) 
功能说明 
该命令用于删除一个染色任务。 
当无法创建新的染色任务（已存在的染色任务个数达到上限）或者不再需要某个染色任务时，使用该命令。 
删除染色任务成功后，该染色任务的保存记录将被删除，并无法再启动该染色任务。如误删某染色任务，可以通过[ADD INNER COLORING]命令重新创建。
执行该命令前后，可以通过[SHOW INNER COLORING]命令查询已创建的染色任务以及某染色任务是否已被删除。
注意事项 
源端或目的端已启动的染色任务无法删除，需要先停止任务。源端以及目的端的染色任务状态可以通过[SHOW INNER COLORING]命令查询。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要删除的染色任务的编号，可以通过SHOW INNER COLORING命令查询已存在的任务编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！SCCU返回错误！输入的任务编号不存在！源端染色任务未停止！目的端染色任务未停止！
命令举例 
`
删除任务编号为1的染色任务。
DELETE INNER COLORING:TASKNO=1
` 
### 查询染色任务(SHOW INNER COLORING) 
### 查询染色任务(SHOW INNER COLORING) 
功能说明 
该命令用于查询染色任务的信息，包括任务编号、源端信息、目的端信息、染色值、以及源端/目的端染色任务状态等。 
当需要指定任务编号进行染色任务相关操作或需要查询源端/目的端染色任务状态等参数时，使用该命令。 
具体查询方式： 
 
当指定任务编号时，该命令查询指定染色任务的信息。 
 
当不指定任务编号时，该命令查询全部染色任务的信息。 
 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 任选参数类型: 数字参数范围: 1-64|该参数用于指定要查询的染色任务的编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于显示染色任务的编号。任务编号具有唯一性不能重复。
SOURCENFSNAME|源端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示源端NFS实例的名称。
SOURCESCTYPE|源端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示源端SC的类型。
SOURCESCGROUP|源端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于显示源端SC的组号。
SOURCESCNO|源端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于显示源端SC的组内编号。
DESTNFSNAME|目的端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示目的端NFS实例的名称。
DESTSCTYPE|目的端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示目的端SC的类型。
DESTSCGROUP|目的端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于显示目的端SC的组号。
DESTSCNO|目的端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于显示目的端SC的组内编号。
COLORCODE|染色值|参数可选性: 必选参数类型: 数字参数范围: 1-63|该参数用于显示染色任务的染色值，即对IP报文进行染色标记的DSCP值，这个值由使用者自己决定。源端发送报文时，将报文中的DSCP值染色成设置好的染色值。目的端接收报文时，根据报文中的DSCP值来统计报文数量。
COLORCOMID1|源端设置的染色Comid1|参数可选性: 必选参数类型: 数字|该参数用于显示源端需要保存的染色Comid1，即目的端的固定Comid。
COLORCOMID2|源端设置的染色Comid2|参数可选性: 必选参数类型: 数字|该参数用于显示源端需要保存的染色Comid2，即目的端的浮动Comid。如果没有则该参数为0。
SOURCEJNO|源端Jno|参数可选性: 必选参数类型: 数字|该参数用于显示源端Jno，用于节点间通讯。
SOURCECOMID|源端Comid|参数可选性: 必选参数类型: 数字|该参数用于显示源端Comid，用于节点间通讯。
DESTJNO|目的端Jno|参数可选性: 必选参数类型: 数字|该参数用于显示目的端Jno，用于节点间通讯。
DESTCOMID|目的端Comid|参数可选性: 必选参数类型: 数字|该参数用于显示目的端Comid，用于节点间通讯。
SOURCESTATUS|源端染色任务状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示源端染色任务的状态，包括已创建、已启动和已关闭三种状态。已创建：源端染色任务已创建。已启动：源端染色任务已启动。已关闭：源端染色任务已关闭。
DESTSTATUS|目的端染色任务状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示目的端染色任务的状态，包括已创建、已启动和已关闭三种状态。已创建：目的端染色任务已创建。已启动：目的端染色任务已启动。已关闭：目的端染色任务已关闭。
命令举例 
`
查询任务编号为1的染色任务的信息。
SHOW INNER COLORING:TASKNO=1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
(No.1) : SHOW INNER COLORING:TASKNO=1
任务编号 源端NFS名称   源端SC类型 源端SC组号 源端SC编号 目的端NFS名称 目的端SC类型 目的端SC组号 目的端SC编号 染色值 源端设置的染色Comid1 源端设置的染色Comid2 源端Jno 源端Comid 目的端Jno 目的端Comid 源端染色任务状态 目的端染色任务状态 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1        CommonS_IPS_0 sc-ips     1          0          CommonS_SIG_0 sc-sig       1            0            1      100686849            0                    283649  67110913  283649    100686849   已创建           已创建             
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
` 
### 启动染色任务(START INNER COLORING) 
### 启动染色任务(START INNER COLORING) 
功能说明 
该命令用于启动一个染色任务。 
当创建一个染色任务后，需要启动该染色任务进而执行染色功能时，使用该命令。 
一个染色任务需要依次对目的端和源端分别启动，染色任务启动后，对应的目的端或源端染色任务的状态会变成已启动。 
源端启动成功后，开始向目的端发送带有诊断标记（染色值）的报文，根据报文过滤规则设置IP头中DSCP字段的值，并进行统计。 
目的端启动成功后，开始接收报文，根据IP头中DSCP字段的值进行统计。 
由于染色任务可以重复使用，已创建或已关闭的染色任务都可以（重新）启动。每次启动染色任务时会显示启动前对应位置染色任务的统计值，可以在启动染色任务前通过[CLEAR INNER COLORING COUNT]命令清除染色统计。
执行该命令前后，可以通过[SHOW INNER COLORING]命令查询源端和目的端染色任务的状态。
注意事项 
启动源端染色任务前必须先启动目的端染色任务。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要启动的染色任务的编号，可以通过SHOW INNER COLORING命令查询已存在的任务编号。
ROLE|位置|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于指定要启动的染色任务的位置，包括源端和目的端。源端：启动源端染色任务。目的端：启动目的端染色任务。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MESSAGETYPE|消息类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示消息类型，即统计染色任务的平面，包括管理消息和业务消息。管理消息：表示在管理面统计染色任务报文数目。业务消息：表示在媒体面统计染色任务报文数目。
COUNT|统计值|参数可选性: 必选参数类型: 数字|该参数用于显示启动前染色任务的统计值。若启动源端染色任务，则显示为源端染色任务的统计值，即源端发送的报文数统计。若启动目的端染色任务，则显示为目的端染色任务的统计值，即目的端接收的报文数统计。若染色任务为第一次启动，则统计值为0。也可以在启动染色任务前通过CLEAR INNER COLORING COUNT命令清除染色统计。
命令举例 
`
启动任务编号为1的源端染色任务。
START INNER COLORING:TASKNO=1,ROLE="SOURCE"
` 
### 停止染色任务(STOP INNER COLORING) 
### 停止染色任务(STOP INNER COLORING) 
功能说明 
该命令用于停止一个染色任务。 
当染色任务执行一段时间后需要停止染色任务时，使用该命令。 
停止一个染色任务时，需要依次对源端和目的端分别停止。染色任务停止后，对应的源端或目的端染色任务的状态会变成已关闭。 
源端停止成功后，会停止向目的端发送带有诊断标记（染色值）的报文，并结束统计发送的报文数。 
目的端停止成功后，会停止接收报文，并结束统计接收的报文数。 
每次停止染色任务时会显示停止后源端或目的端发送或接收带有染色值的报文总数。对源端和目的端的统计值进行比较从而进行网络丢包问题的定位。 
执行该命令前后，可以通过[SHOW INNER COLORING]命令查询源端和目的端染色任务的状态。
注意事项 
停止目的端染色任务前必须先停止源端染色任务。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要停止的染色任务的编号，可以通过SHOW INNER COLORING命令查询已存在的任务编号。
ROLE|位置|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于指定要停止的染色任务的位置，包括源端和目的端。源端：停止源端染色任务。目的端：停止目的端染色任务。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MESSAGETYPE|消息类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示消息类型，即统计染色任务的平面，包括管理消息和业务消息。管理消息：表示在管理面统计染色任务报文数目。业务消息：表示在媒体面统计染色任务报文数目。
COUNT|统计值|参数可选性: 必选参数类型: 数字|该参数用于显示停止后染色任务的统计值。若停止源端染色任务，则显示为源端染色任务的统计值，即源端发送的报文数统计。若停止目的端染色任务，则显示为目的端染色任务的统计值，即目的端接收的报文数统计。
命令举例 
`
停止任务编号为1的源端染色任务。
STOP INNER COLORING:TASKNO=1,ROLE="SOURCE"
` 
### 查询染色统计(SHOW INNER COLORING COUNT) 
### 查询染色统计(SHOW INNER COLORING COUNT) 
功能说明 
该命令用于查询染色统计信息，即查询染色任务的统计值数据。 
当染色任务结束需要查询染色统计信息时，使用该命令能够查询到包括消息类型、源端统计值以及目的端统计值等信息。 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要查询染色统计的染色任务的编号，可以通过SHOW INNER COLORING命令查询已存在的任务编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
MESSAGETYPE|消息类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示消息类型，即统计染色任务的平面，包括管理消息和业务消息。管理消息：表示在管理面统计染色任务报文数目。业务消息：表示在媒体面统计染色任务报文数目。
SOURCECOUNT|源端统计值|参数可选性: 必选参数类型: 数字|该参数用于显示源端统计值，即源端发送的带有染色标记的报文数。
DESTCOUNT|目的端统计值|参数可选性: 必选参数类型: 数字|该参数用于显示目的端统计值，即目的端接收到的带有染色标记的报文数。
命令举例 
`
查询任务编号为1的染色任务的染色统计。
SHOW INNER COLORING COUNT:TASKNO=1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
(No.1) : SHOW INNER COLORING COUNT:TASKNO=1
消息类型 源端统计值 目的端统计值 
--------------------------------
管理消息 0          0            
业务消息 0          0            
--------------------------------
记录数：2
` 
### 清除染色统计(CLEAR INNER COLORING COUNT) 
### 清除染色统计(CLEAR INNER COLORING COUNT) 
功能说明 
该命令用于清除染色统计，即删除染色任务的统计值数据。 
当染色任务之前的染色统计不再需要，或者再次启动染色任务前需将染色统计清除时，使用该命令。 
执行该命令后，可以通过[SHOW INNER COLORING COUNT]命令查询染色统计是否已清除。
注意事项 
已启动的染色任务无法清除染色统计，可以先通过[STOP INNER COLORING]命令停止染色任务。源端和目的端染色任务的状态可以通过[SHOW INNER COLORING]命令查询。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要清除染色统计的染色任务的编号，可以通过SHOW INNER COLORING命令查询已存在的任务编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-127|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！SCCU返回错误！输入的任务编号不存在！染色任务未停止！
命令举例 
`
清除任务编号为1的染色任务统计。
CLEAR INNER COLORING COUNT:TASKNO=1
` 
## 虚机系统日志配置 
## 虚机系统日志配置 
背景知识 
为方便运维人员进行全量日志采集，需要所有虚机将虚机操作系统的系统日志上报给日志服务器。 
虚机系统日志配置提供采集系统运行日志功能，能够更好地帮助运维人员分析定位网元系统故障。 
功能说明 
该组命令包括对虚机操作系统的系统日志上报功能配置的修改以及查询等操作。 
当需要开启或者关闭虚机操作系统的系统日志上报功能或者需要修改系统日志上报的服务器地址时可以使用[SET OSSYSLOGCFG]命令。
配置开关打开后，全部虚机的系统运行日志将采集到指定的服务器，进而方便运维人员分析定位网元系统故障。 
可以通过[SHOW OSSYSLOGCFG]命令查询修改前后的配置信息。
子主题： 
### 查询操作系统Syslog配置(SHOW OSSYSLOGCFG) 
### 查询操作系统Syslog配置(SHOW OSSYSLOGCFG) 
功能说明 
该命令用于查询虚机操作系统的系统日志上报功能配置信息，包括是否启用虚机操作系统的系统日志上报功能，以及系统日志上报的服务器地址和端口。 
当需要对配置信息进行修改时，可以使用该命令查询当前以及修改之后的配置信息。 
注意事项 
无。 
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SWITCH|上报开关|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示是否开启虚机操作系统的系统日志上报功能。打开：开启虚机操作系统的系统日志上报功能。关闭：关闭虚机操作系统的系统日志上报功能。
ADDRESS|日志网关地址|参数可选性: 必选参数类型: 字符串|该参数用于显示日志网关地址，即虚机操作系统的系统日志需要上报到该地址的日志服务器。
PORT|端口|参数可选性: 必选参数类型: 数字参数范围: 1-65535|该参数用于显示日志网关端口，即虚机操作系统的系统日志需要上报的服务器端口。
命令举例 
`
查询虚机操作系统的系统日志上报功能配置信息。
SHOW OSSYSLOGCFG 
(No.1) : SHOW OSSYSLOGCFG :
上报开关  日志网关地址      端口
--------------------------------
打开     192.168.126.126  514
--------------------------------
记录数：1
` 
### 修改操作系统Syslog配置(SET OSSYSLOGCFG) 
### 修改操作系统Syslog配置(SET OSSYSLOGCFG) 
功能说明 
该命令用于设置虚机操作系统的系统日志上报功能。 
当需要开启或者关闭虚机操作系统的系统日志上报功能或者需要修改系统日志上报的服务器地址或端口时，使用该命令。 
配置开关打开后，全部虚机的系统运行日志将采集到指定的服务器，进而方便分析定位网元系统故障。 
执行该命令前后，可以通过[SHOW OSSYSLOGCFG]命令查询修改前后的配置信息。
注意事项 
首次设置需要填写日志网关地址。后续若再次执行该命令开启虚机操作系统日志上报功能，不填写日志网关地址时，系统日志默认上传到最近一次配置的日志网关地址。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SWITCH|上报开关|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: ON|该参数用于设置是否开启虚机操作系统的系统日志上报功能。打开：开启虚机操作系统的系统日志上报功能。关闭：关闭虚机操作系统的系统日志上报功能。
ADDRESS|日志网关地址|参数可选性: 任选参数类型: 字符串|该参数用于设置日志网关地址，即虚机操作系统的系统日志需要上报到该地址的日志服务器。
PORT|端口|参数可选性: 任选参数类型: 数字参数范围: 1-65535|该参数用于显示日志网关端口，即虚机操作系统的系统日志需要上报的服务器端口。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
OPERATERESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于表示执行该命令的操作结果：操作成功。正在执行相同的命令，请稍后再试！超时！其他！首次设置需要填写日志网关地址！配置没有发生变化！
命令举例 
`
修改虚机操作系统的系统日志上报功能配置，打开配置开关，并将日志网关地址设置为192.168.126.126, 端口设置为517。
SET OSSYSLOGCFG:SWITCH="ON",ADDRESS="192.168.126.126",PORT=514
` 
## 内部通道诊断 
## 内部通道诊断 
背景知识 
为了实现两个节点间的内部通道诊断，提供诊断功能相关的动态命令。 
通过从源端向目的端发送诊断报文，诊断出收发报文数以及时延等结果，实现对两个SC（Service Component，服务组件）之间的管理面、业务面数据链路以及业务面信令链路等的检测。 
功能说明 
该组命令通过提供对诊断任务的创建、删除、修改、查询、启动以及停止等相关操作，实现内部通道诊断的功能。 
当需要对某两个SC之间执行诊断功能时，使用该组命令。 
初次执行诊断功能的具体流程如下： 
 
创建诊断任务(ADD DIAG) 
 
启动诊断任务(START DIAG) 
 
等待诊断任务结束（如需手动停止诊断任务可以通过STOP DIAG命令，但是手动停止诊断任务后无法再查询诊断结果。） 
 
查询诊断结果(SHOW DIAG RESULT) 
 
诊断任务可以重复使用，因此再次执行诊断功能时，可以根据需求启动已创建的诊断任务，启动前还可以通过[MODIFY DIAG]命令修改已创建的诊断任务，或者通过[ADD DIAG]命令创建新的诊断任务，后续流程与初次使用相同。可以通过[SHOW DIAG]命令查询已创建的诊断任务。对于不需要的诊断任务可以通过[DELETE DIAG]命令进行删除。
子主题： 
### 创建诊断任务(ADD DIAG) 
### 创建诊断任务(ADD DIAG) 
功能说明 
该命令用于创建一个诊断任务。 
当初次使用诊断功能或者已创建的诊断任务无法满足需求需要新建一个诊断任务时，使用该命令。 
创建诊断任务需要指定任务编号、源端信息、目的端信息以及诊断类型和诊断报文相关参数。 
执行该命令前后，可以通过[SHOW DIAG]命令查询已创建以及新创建的诊断任务。
刚创建好的诊断任务会被保存但不能立即执行诊断功能，需执行[START DIAG]命令启动该诊断任务。
注意事项 
诊断任务的编号具有唯一性，并且源端、目的端以及诊断类型都相同的诊断任务也是唯一的不允许重复创建，可以通过[SHOW DIAG]命令查询已存在的诊断任务，通过[MODIFY DIAG]命令修改已存在的诊断任务。
TMSP、OAM等公共服务不支持此操作。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于设置诊断任务的编号。任务编号具有唯一性不能重复，最多可以创建64个诊断任务，可以通过SHOW DIAG命令查询已存在的任务编号。
SOURCENFSNAME|源端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定源端NFS的实例名称，可以通过SHOW NFS命令进行查询。
SOURCESCTYPE|源端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定源端SC的类型，可以通过SHOW SCTYPE命令进行查询。
SOURCESCGROUPNO|源端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定源端SC的组号，可以通过SHOW SCINFO命令进行查询。
SOURCESCNO|源端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于指定源端SC的组内编号，可以通过SHOW SCINFO命令进行查询。
DESTNFSNAME|目的端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定目的端NFS的实例名称，可以通过SHOW NFS命令进行查询。
DESTSCTYPE|目的端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于指定目的端SC的类型，可以通过SHOW SCTYPE命令进行查询。
DESTSCGROUPNO|目的端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于指定目的端SC的组号，可以通过SHOW SCINFO命令进行查询。
DESTSCNO|目的端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于指定目的端SC的组内编号，可以通过SHOW SCINFO命令进行查询。
DIAGTYPE|诊断类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-3默认值: SERVICE_PLANE_DATA_LINK|该参数用于设置诊断任务的类型。目前，诊断类型只支持业务面数据链路。
PACKETINTERVAL|诊断报文发送时间间隔（毫秒）|参数可选性: 必选参数类型: 数字参数范围: 500-60000|该参数用于设置诊断报文发送的时间间隔，即执行诊断功能时源端会每隔多久时间向目的端发送一次诊断报文。
PACKETNUM|诊断报文发送总数|参数可选性: 必选参数类型: 数字参数范围: 1-250|该参数用于设置诊断报文发送的总数。
PACKETLENGTH|诊断报文长度（字节）|参数可选性: 必选参数类型: 数字参数范围: 128-10240|该参数用于设置诊断报文的长度。
命令举例 
`
创建一个任务编号为1的诊断任务。
源端：NFS名称为CommonS_IPS_0，SC类型为sc-ips，SC组号为1，SC编号为0。
目的端：NFS名称为CommonS_SIG_0，SC类型为sc-sig，SC组号为1，SC编号为0。
诊断类型为业务面数据链路，诊断报文发送时间间隔为500毫秒，诊断报文发送总数为100个，诊断报文长度为1024字节。
ADD DIAG:TASKNO=1,SOURCENFSNAME="CommonS_IPS_0",SOURCESCTYPE="sc-ips",SOURCESCGROUPNO=1,SOURCESCNO=0,DESTNFSNAME="CommonS_SIG_0",DESTSCTYPE="sc-sig",DESTSCGROUPNO=1,DESTSCNO=0,DIAGTYPE="SERVICE_PLANE_DATA_LINK",PACKETINTERVAL=500,PACKETNUM=100,PACKETLENGTH=1024
` 
### 删除诊断任务(DELETE DIAG) 
### 删除诊断任务(DELETE DIAG) 
功能说明 
小心：强制删除可能导致诊断任务中断，只适用于诊断任务异常无法正常删除等情况，正常情况下不要使用强制删除。因此执行强制删除操作前，需要与中兴通讯技术支持人员确认后才可以实施。 
该命令用于删除一个诊断任务。 
当无法创建新的诊断任务（已存在的诊断任务个数达到上限）或者某个诊断任务已结束诊断功能不再需要时，使用该命令。 
删除诊断任务成功后，将删除该诊断任务的保存记录，并无法再启动该诊断任务。如误删某诊断任务，可以通过[ADD DIAG]命令重新创建。
执行该命令前后，可以通过[SHOW DIAG]命令查询已创建的诊断任务以及某诊断任务是否已被删除。
注意事项 
强制删除可能导致诊断任务中断，只适用于诊断任务异常无法正常删除等情况，正常情况下不要使用强制删除。 
已启动的诊断任务无法删除，需要先停止任务。诊断任务的状态可以通过[SHOW DIAG]命令查询。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要删除的诊断任务的编号，可以通过SHOW DIAG命令查询已存在的任务编号。
IFFORCE|是否强制删除|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NO|该参数用于指定是否强制删除诊断任务。各参数选项的含义是：否：非强制删除。正常情况下，请执行非强制删除操作。是：强制删除。强制删除可能导致诊断任务中断，只适用于诊断任务异常无法正常删除等情况，正常情况下不要使用强制删除。
命令举例 
`
非强制删除任务编号为1的诊断任务。
DELETE DIAG:TASKNO=1,IFFORCE="NO"
` 
### 修改诊断任务(MODIFY DIAG) 
### 修改诊断任务(MODIFY DIAG) 
功能说明 
该命令用于修改一个诊断任务。 
由于源端、目的端以及诊断类型都相同的诊断任务是唯一的不允许重复创建，因此诊断任务可以重复使用。当已创建的某个诊断任务需要修改诊断报文发送时间间隔、诊断报文发送总数以及诊断报文长度等参数时，使用该命令。 
修改诊断任务成功后，将保存修改后的该诊断任务的记录，再次启动该诊断任务时将按照修改后的诊断任务参数执行诊断功能。 
执行该命令前后，可以通过[SHOW DIAG]命令查询修改前后该诊断任务相关参数的值。
注意事项 
已启动的诊断任务无法修改，需要先停止任务。诊断任务的状态可以通过[SHOW DIAG]命令查询。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要修改的诊断任务的编号，可以通过SHOW DIAG命令查询已存在的任务编号。
PACKETINTERVAL|诊断报文发送时间间隔（毫秒）|参数可选性: 任选参数类型: 数字参数范围: 500-60000|该参数用于修改诊断报文发送的时间间隔，即执行诊断功能时源端会每隔多久时间向目的端发送一次诊断报文。
PACKETNUM|诊断报文发送总数|参数可选性: 任选参数类型: 数字参数范围: 1-250|该参数用于修改诊断报文发送的总数。
PACKETLENGTH|诊断报文长度（字节）|参数可选性: 任选参数类型: 数字参数范围: 128-10240|该参数用于修改诊断报文的长度。
命令举例 
`
将任务编号为1的诊断任务的诊断报文发送时间间隔修改为1000毫秒，诊断报文发送总数修改为100个，诊断报文长度修改为64字节。
MODIFY DIAG:TASKNO=1,PACKETINTERVAL=1000,PACKETNUM=100,PACKETLENGTH=64
` 
### 查询诊断任务(SHOW DIAG) 
### 查询诊断任务(SHOW DIAG) 
功能说明 
该命令用于查询诊断任务的信息，包括任务编号、源端信息、目的端信息、诊断类型、诊断报文发送时间间隔、诊断报文发送总数、诊断报文长度以及任务状态等。 
当需要指定任务编号进行诊断任务相关操作或需要查询诊断任务的状态等参数时，使用该命令。 
具体查询方式： 
 
当指定任务编号时，该命令查询指定诊断任务的信息。 
 
当不指定任务编号时，该命令查询全部诊断任务的信息。 
 
注意事项 
无。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 任选参数类型: 数字参数范围: 1-64|该参数用于指定要查询的诊断任务的编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于显示诊断任务的编号。任务编号具有唯一性不能重复，最多可以创建64个诊断任务。
SOURCENFSNAME|源端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示源端NFS实例的名称。
SOURCESCTYPE|源端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示源端SC的类型。
SOURCESCGROUPNO|源端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于显示源端SC的组号。
SOURCESCNO|源端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于显示源端SC的组内编号。
DESTNFSNAME|目的端NFS名称|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示目的端NFS实例的名称。
DESTSCTYPE|目的端SC类型|参数可选性: 必选参数类型: 字符串参数范围: 1-64|该参数用于显示目的端SC的类型。
DESTSCGROUPNO|目的端SC组号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于显示目的端SC的组号。
DESTSCNO|目的端SC编号|参数可选性: 必选参数类型: 数字参数范围: 0-999|该参数用于显示目的端SC的组内编号。
DIAGTYPE|诊断类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-3|该参数用于显示诊断任务的类型。目前，诊断类型只支持业务面数据链路。
PACKETINTERVAL|诊断报文发送时间间隔（毫秒）|参数可选性: 必选参数类型: 数字参数范围: 500-60000|该参数用于显示诊断报文发送的时间间隔，即执行诊断功能时源端会每隔多久时间向目的端发送一次诊断报文。
PACKETNUM|诊断报文发送总数|参数可选性: 必选参数类型: 数字参数范围: 1-250|该参数用于显示诊断报文发送的总数。
PACKETLENGTH|诊断报文长度（字节）|参数可选性: 必选参数类型: 数字参数范围: 128-10240|该参数用于显示诊断报文的长度。
TASKSTATUS|任务状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示诊断任务的状态，包括已创建、已启动和已停止三种状态。已创建：诊断任务创建成功，但从未启动过。已启动：诊断任务已启动，正在发送诊断报文中。已停止：诊断任务被手动停止，或诊断报文发送完毕后诊断任务自动停止。
命令举例 
`
查询任务编号为1的诊断任务的信息。
SHOW DIAG:TASKNO=1
(No.1) : SHOW DIAG:TASKNO=1
任务编号 源端NFS名称    源端SC类型 源端SC组号 源端SC编号 目的端NFS名称  目的端SC类型 目的端SC组号 目的端SC编号 诊断类型      诊断报文发送时间间隔（毫秒） 诊断报文发送总数 诊断报文长度（字节） 任务状态
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1        CommonS_IPS_0 sc-ips     1         0          CommonS_SIG_0 sc-sig       1           0           业务面数据链路 500                        100             1024                已创建 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
` 
### 启动诊断任务(START DIAG) 
### 启动诊断任务(START DIAG) 
功能说明 
该命令用于启动一个诊断任务。 
当创建一个诊断任务后，需要启动该诊断任务进而执行诊断功能时，使用该命令。 
诊断任务启动后，该诊断任务的状态会变成已启动，源端会根据诊断任务设置的参数信息向目的端发送诊断报文。诊断报文全部发送完毕后，诊断任务会自动停止，该诊断任务的状态会变成已停止。 
由于诊断任务可以重复使用，已创建或已停止的诊断任务都可以（重新）启动。启动诊断任务前，也可以通过[MODIFY DIAG]命令修改诊断任务。
执行该命令前后，可以通过[SHOW DIAG]命令查询诊断任务的状态。
注意事项 
目前，同一个源端只支持同时启动一个诊断任务。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要启动的诊断任务的编号，可以通过SHOW DIAG命令查询已存在的任务编号。
命令举例 
`
启动任务编号为1的诊断任务。
START DIAG:TASKNO=1
` 
### 停止诊断任务(STOP DIAG) 
### 停止诊断任务(STOP DIAG) 
功能说明 
该命令用于停止一个诊断任务。 
当一个诊断任务启动后，但是诊断报文还未全部发送完毕，此过程中如需手动停止此诊断任务时，使用该命令。 
诊断任务停止后，该诊断任务的状态会变成已停止，源端会停止继续向目的端发送诊断报文。 
执行该命令前后，可以通过[SHOW DIAG]命令查询诊断任务的状态。
注意事项 
调用该命令停止诊断任务后，可以通过[SHOW DIAG]命令查询该诊断任务的状态，但无法再通过[SHOW DIAG RESULT]命令查询到该任务的诊断结果。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要停止的诊断任务的编号，可以通过SHOW DIAG命令查询已存在的任务编号。
命令举例 
`
停止任务编号为1的诊断任务。
STOP DIAG:TASKNO=1
` 
### 查询诊断结果(SHOW DIAG RESULT) 
### 查询诊断结果(SHOW DIAG RESULT) 
功能说明 
该命令用于查询诊断任务的诊断结果，即具体的诊断统计信息。 
当诊断报文已全部发送完毕，诊断任务已停止，需要查看诊断结果时，使用此命令。 
执行该命令前，可以通过[SHOW DIAG]命令查询诊断任务的状态。
注意事项 
已启动的诊断任务无法查询诊断结果。诊断任务的状态可以通过[SHOW DIAG]命令查询。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
TASKNO|任务编号|参数可选性: 必选参数类型: 数字参数范围: 1-64|该参数用于指定要查询的诊断任务的编号，可以通过SHOW DIAG命令查询已存在的任务编号。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DIAGRESULT|诊断结果|参数可选性: 必选参数类型: 字符串参数范围: 0-4096|该参数用于显示诊断结果，即具体的诊断统计信息。
命令举例 
`
查询任务编号为1的诊断任务的诊断结果。
SHOW DIAG RESULT:TASKNO=1
` 
# 接口管理 
# 接口管理 
## Rosng 接口保活检测 
## Rosng 接口保活检测 
背景知识 
本配置提供了接口处理单元与主用Rosng协议栈单元的保活消息的可配置参数。接口处理单元提供了网元与外部通信的接口，主用Rosng协议栈单元负责接口的管理和协议消息如ARP、ICMP、路由等的处理，备用Rosng协议单元在主用Rosng协议栈状态正常时不起作用。当接口处理单元与主用Rosng协议单元之间保活消息异常时，主用Rosng协议栈单元需要通过保活消息及时感知接口处理单元接口的状态，及时更新与该接口相关的路由表等相关表项。 
功能说明 
该配置用于查询或者设置接口处理单元与主用Rosng协议栈单元的保活消息的参数，默认的配置参数可满足通用的场景需求。但是网元由于业务或者应用场景不同，对于主用Rosng协议栈单元感知接口处理单元接口状态的灵敏程度的要求可能存在差异，如有的业务要求在网络存在抖动时，可增大保活时间间隔和保活次数门限，使得主用Rosng协议栈尽可能慢的感知接口的变化保持接口处理单元上路由表等表项稳定，保证业务消息与网元外部设备交互不中断或者减少业务呼损。 
子主题： 
### 设置主用ROSNG协议栈单元检测接口处理单元的保活消息参数(SET ROSNGINTERFACEKEEPALIVE) 
### 设置主用ROSNG协议栈单元检测接口处理单元的保活消息参数(SET ROSNGINTERFACEKEEPALIVE) 
功能说明 
该命令用于接口处理单元（如IPU、PFU、FWU等）向主用Rosng协议栈单元（如OMU）注册成功后，修改主用Rosng协议单元检测接口处理单元状态的保活消息参数，便于网元根据业务特点调整主用Rosng协议栈单元检测接口处理单元状态的灵敏度。如不需要主用Rosng协议栈尽快感知接口处理单元状态变化，可增大保活时间间隔和保活次数门限，反之则减小保活时间间隔和保活次数门限。
注意事项 
准备修改前，请注意检查主备选举配置（${SHOW ELECTION}），确保接口处理单元与主用Rosng协议栈单元的保活消息参数配置的心跳消息总时长（保活时间间隔 * 保活次数门限）大于主备选举配置的心跳检测时长。 
主备选举配置，请在EM上查询配置服务所提供的帮助说明。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
INTERVAL|保活时间间隔|参数可选性: 必选参数类型: 数字参数范围: 100-2000默认值: 1000|本参数用于指定接口处理单元向主用Rosng协议栈单元注册成功后，由主用Rosng协议单元检测接口处理单元主动发送的保活消息的时间间隔。
THRESHOLD|保活次数门限|参数可选性: 必选参数类型: 数字参数范围: 3-100默认值: 6|本参数用于指定主用Rosng协议栈单元未收到请求消息总次数达到多少时，判定接口处理单元状态异常。
命令举例 
`
设置接口处理单元与主用Rosng协议栈单元之间的保活消息参数，保活时间间隔为 1000 毫秒，保活次数门限为 6。
SET ROSNGINTERFACEKEEPALIVE:INTERVAL=1000,THRESHOLD=6
` 
### 查看主用ROSNG协议栈单元检测接口处理单元的保活消息参数(SHOW ROSNGINTERFACEKEEPALIVE) 
### 查看主用ROSNG协议栈单元检测接口处理单元的保活消息参数(SHOW ROSNGINTERFACEKEEPALIVE) 
功能说明 
该命令用于接口处理单元（如IPU、PFU、FWU等）向主用Rosng协议栈单元（如OMU）注册成功后，查看主用Rosng协议单元检测接口处理单元状态的保活消息参数。如业务发现网络抖动时呼损增大，可通过该命令查看默认或以前的保活消息参数的设置是否合理。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
INTERVAL|保活时间间隔|参数可选性: 任选参数类型: 数字参数范围: 100-2000默认值: 1000|本参数用于指定接口处理单元向主用Rosng协议栈单元注册成功后，而由主用Rosng协议单元检测接口处理单元主动发送的保活消息的时间间隔。
THRESHOLD|保活次数门限|参数可选性: 任选参数类型: 数字参数范围: 3-100默认值: 6|本参数用于指定主用Rosng协议栈单元未收到请求消息总次数达到多少时，判定接口处理单元状态异常。
命令举例 
`
查看接口处理单元与主用Rosng协议栈单元之间的保活消息参数。
SHOW ROSNGINTERFACEKEEPALIVE
(No.1) : SHOW ROSNGINTERFACEKEEPALIVE
操作维护       保活时间间隔(millisecond) 保活次数门限 
---------------------------------------------
修改           1000                      20           
---------------------------------------------
记录数：1
执行成功开始时间:2022-01-25 09:23:46 耗时: 1.116秒
` 
## 预配置接口 
## 预配置接口 
背景知识 
IPS SC上电后，才会向Rosng上报SC的接口信息。并且在SC接口状态为online后，运维人员才可以进行接口相关的IP、VLAN、路由等配置。即需要在IPS 已弹出SC并且SC已上电的场景下，运维人员才可以进行与该SC接口相关的配置。预上报接口的目的在于Rosng提前上报未弹出的SC的接口信息，使维护人员可以在Rosng界面进行接口有关的配置。 
功能说明 
该配置用于配置预配置接口参数。在SC自动弹缩场景下，维护人员需要对未弹出的SC进行接口配置时，可根据该SC的架号、槽位号增加预配置接口，并在超时时间内在Rosng界面上进行对应接口的配置。配置完成后，当SC自动弹出并且上电成功后，即可分担业务流量。如果不配置该命令，在自动弹缩的场景下，新弹出的SC接口无IP、路由等相关配置，业务流量不会分担到此SC上。 
子主题： 
### 增加预配置接口(ADD PRECONFIGINTERFACE) 
### 增加预配置接口(ADD PRECONFIGINTERFACE) 
功能说明 
该命令用于增加接口预配置条目。在自动弹缩SC的场景下，当运维人员需要对未弹出的SC进行接口预配置时，执行该命令。命令执行成功后，Rosng上会预上报接口，使得维护人员在超时时间内可对该接口进行IP、路由等配置。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SHELF|架号|参数可选性: 必选参数类型: 数字参数范围: 1-127默认值: 1|该参数用于表示预配置接口的架号。
SLOT|槽号|参数可选性: 必选参数类型: 数字参数范围: 0-3默认值: 0|该参数用于表示预配置接口的槽号。
SUBSLOT|子槽号|参数可选性: 必选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于表示预配置接口的子槽号。
PORTSNUM|接口数量|参数可选性: 必选参数类型: 数字参数范围: 1-24默认值: 1|该参数用于表示单个SC的预配置接口的数量。
TIMEOUT|配置超时时间|参数可选性: 必选参数类型: 数字参数范围: 1-3600默认值: 1800|该参数用于表示预配置接口的超时时间。Rosng上报预配置端口信息后，运维人员在此时间内才能在Rosng配置界面对接口进行IP、路由等配置。
命令举例 
`
增加预配置接口，架号为1，槽号为0，子槽号为1，接口数量为1，超时时间为900秒。
ADD PRECONFIGINTERFACE:SHELF=1,SLOT=0,SUBSLOT=1,PORTSNUM=1,TIMEOUT=900
` 
### 修改预配置接口(SET PRECONFIGINTERFACE) 
### 修改预配置接口(SET PRECONFIGINTERFACE) 
功能说明 
该命令用于修改接口预配置条目。当需要修改预上报的接口信息时，执行该命令。命令执行成功后，Rosng会根据修改后的接口信息重新上报接口信息，超时时间也会刷新，维护人员可在该时间窗内对接口进行重新配置。
注意事项 
无。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SHELF|架号|参数可选性: 必选参数类型: 数字参数范围: 1-127默认值: 1|该参数用于表示预配置接口的架号。
SLOT|槽号|参数可选性: 必选参数类型: 数字参数范围: 0-3默认值: 0|该参数用于表示预配置接口的槽号。
SUBSLOT|子槽号|参数可选性: 必选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于表示预配置接口的子槽号。
PORTSNUM|接口数量|参数可选性: 必选参数类型: 数字参数范围: 1-24默认值: 1|该参数用于表示单个SC的预配置接口的数量。
TIMEOUT|配置超时时间|参数可选性: 必选参数类型: 数字参数范围: 1-3600默认值: 1800|该参数用于表示预配置接口的超时时间。Rosng上报预配置端口信息后，运维人员在此时间内才能在Rosng配置界面对接口进行IP、路由等配置。
命令举例 
`
修改架号为1，槽号为0，子槽号为1的预配置接口，修改后接口数量为1，超时时间为500秒。
SET PRECONFIGINTERFACE:SHELF=1,SLOT=0,SUBSLOT=1,PORTSNUM=1,TIMEOUT=500
` 
### 删除预配置接口(DEL PRECONFIGINTERFACE) 
### 删除预配置接口(DEL PRECONFIGINTERFACE) 
功能说明 
该命令用于删除接口预配置条目。当不再需要预配置未弹出SC的接口信息时，执行该命令。命令执行成功后，Rosng上预上报的接口的状态变为离线状态，运维人员无法再进行配置接口信息。
注意事项 
删除配置之后，会导致当前预上报的接口离线，运维人员无法在rosng上进行接口配置。请谨慎执行删除操作。。
输入参数说明 
标识|名称|类型|说明
---|---|---|---
SHELF|架号|参数可选性: 必选参数类型: 数字参数范围: 1-127默认值: 1|该参数用于表示预配置接口的架号。
SLOT|槽号|参数可选性: 必选参数类型: 数字参数范围: 0-3默认值: 0|该参数用于表示预配置接口的槽号。
SUBSLOT|子槽号|参数可选性: 必选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于表示预配置接口的子槽号。
命令举例 
`
删除架号为1，槽号为0，子槽号为1的预配置接口。
DEL PRECONFIGINTERFACE:SHELF=1,SLOT=0,SUBSLOT=1
` 
### 查询预配置接口(SHOW PRECONFIGINTERFACE) 
### 查询预配置接口(SHOW PRECONFIGINTERFACE) 
功能说明 
该命令用于查询接口预配置条目，输出结果包括架框槽号、接口数量以及配置超时时间。
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
SHELF|架号|参数可选性: 任选参数类型: 数字参数范围: 1-127默认值: 1|该参数用于表示预配置接口的架号
SLOT|槽号|参数可选性: 任选参数类型: 数字参数范围: 0-3默认值: 0|该参数用于表示预配置接口的槽号
SUBSLOT|子槽号|参数可选性: 任选参数类型: 数字参数范围: 1-32默认值: 1|该参数用于表示预配置接口的子槽号
PORTSNUM|接口数量|参数可选性: 任选参数类型: 数字参数范围: 1-24默认值: 1|该参数用于表示单个SC的预配置接口的数量
TIMEOUT|配置超时时间|参数可选性: 任选参数类型: 数字参数范围: 1-3600默认值: 1800|该参数用于表示预配置接口的超时时间。Rosng上报预配置端口信息后，运维人员在此时间内才能在Rosng配置界面对接口进行IP、路由等配置。
命令举例 
`
查询预配置接口。
SHOW PRECONFIGINTERFACE
(No.8) : SHOW PRECONFIGINTERFACE:
操作维护       架号 槽号 子槽号 接口数量 配置超时时间(S) 
---------------------------------------------------------
复制 修改 删除 1    0    1      1        500             
复制 修改 删除 1    0    2      1        600             
复制 修改 删除 1    0    3      1        900             
---------------------------------------------------------
记录数：3
执行成功开始时间:2021-08-31 15:59:53 耗时: 0.623 秒
` 
## Rosng孤岛检测 
## Rosng孤岛检测 
背景知识 
ROSng处于孤岛状态时，ROSng与IPS之间保活消息会失效，ROSng会主动离线接口。主动离线接口时将触发ROSng协议栈做路由切换、BFD重建等流程，导致网络恢复后业务呼损或中断。为了降低接口离线对业务的影响，需要一种检测到ROSng孤岛时及ROSng孤岛时保持IPS的接口状态的功能。 
 
ROSNG孤岛：ROSng容器与所有正常态的IPS保活失败的一种状态。 
 
IPS：原指接口处理服务，此处泛指所有具备接口处理能力的服务，包括IPS（接口处理服务）、UPF PACKETFORWARD（网络处理服务）、IPSEC（IP安全协议服务）、VFW（虚拟防火墙服务）等。 
 
功能说明 
该配置用于设置ROSng孤岛检测的开关和最少SC数量。 
ROSng孤岛检测依赖于ROSng与IPS之间的链路保活功能，在同一个保活周期内，ROSng未收到全部正常态IPS（IPS不处于闭塞或关机状态）发出的保活请求消息时，即认为ROSng孤岛。ROSng孤岛后，ROSng禁止离线接口，直到ROSng解除孤岛状态。 
子主题： 
### 设置ROSng孤岛检测配置(SET ROSNGISLANDDETECTION) 
### 设置ROSng孤岛检测配置(SET ROSNGISLANDDETECTION) 
功能说明 
该命令用于修改ROSng孤岛检测的配置。当ROSng处于孤岛状态时，保活机制失效后ROSng主动离线接口，会触发ROSng协议栈做路由切换、BFD重建等流程，导致网络恢复后业务呼损或中断。用户可通过开启该功能让ROSng自检孤岛时禁止离线接口。 
注意事项 
若孤岛检测开关设置为ENABLE，必须设置最少SC个数。请注意，SC的数量包含了IPS、UPF PACKETFORWARD、IPSEC和VFW等多种SC类型的SC个数。 
输入参数说明 
标识|名称|类型|说明
---|---|---|---
DETECTIONSWITCH|孤岛检测开关|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置孤岛检测开关，默认关闭。
MINSCNUM|最少SC个数|参数可选性: 任选参数类型: 数字参数范围: 2-512默认值: 2|该参数用于设置支持孤岛检测功能的最少SC个数。孤岛检测开关设置为ENABLE时，必须配置该参数。若实际IPS SC个数小于该参数时，功能不生效。
命令举例 
`
启用ROSng孤岛检测功能，设置最小SC个数为2。
SET ROSNGISLANDDETECTION:DETECTIONSWITCH="ENABLE",MINSCNUM=2
` 
### 查询ROSng孤岛检测配置(SHOW ROSNGISLANDDETECTION) 
### 查询ROSng孤岛检测配置(SHOW ROSNGISLANDDETECTION) 
功能说明 
该命令用于查询ROSng孤岛检测的配置。 
注意事项 
无。
输出参数说明 
标识|名称|类型|说明
---|---|---|---
DETECTIONSWITCH|孤岛检测开关|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: DISABLE|该参数用于设置孤岛检测开关，默认关闭。
MINSCNUM|最少SC个数|参数可选性: 任选参数类型: 数字参数范围: 2-512默认值: 2|该参数用于设置支持孤岛检测功能的最少SC个数。孤岛检测开关设置为ENABLE时，必须配置该参数。若实际IPS SC个数小于该参数时，功能不生效。
命令举例 
`
查看ROSng孤岛检测的配置。
SHOW ROSNGISLANDDETECTION
(No.1) : SHOW ROSNGISLANDDETECTION
操作维护        孤岛检测开关        最少SC个数 
---------------------------------------------
修改            启用                2         
---------------------------------------------
记录数：1
执行成功开始时间:2022-01-25 09:23:46 耗时: 1.116秒
` 
