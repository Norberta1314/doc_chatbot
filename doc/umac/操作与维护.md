# 操作与维护 
## EM网管快速入门 
### 常用功能模块入口 
ZXUN uMAC支持接入ElasticNet UME R50、R50s等多种EM网管产品进行操作和维护。
在执行操作与维护前，可先在客户端页面右上角选择菜单...→关于
，查看当前网管的产品类型。对于不同的网管产品，各功能模块的菜单路径参见[表1]。
功能模块|UME R50菜单路径|UME R50s菜单路径
---|---|---
告警管理|告警|告警管理|运维监控→告警管理
性能管理|性能|性能管理|运维监控→性能管理
配置管理|配置|配置管理|配置管理→命令行终端
维护|CN NF维护|维护→CN NF维护|运维监控→网元维护→CN NF日常维护
运维监控→网元维护→CN NF专业维护|维护|CN NF维护|维护→CN NF维护
跟踪管理|跟踪|跟踪管理|运维监控→信令跟踪
V7网元接入管理|拓扑→分层接入|V7网元接入管理|系统管理→接入管理→CN EM维护→分层接入
系统|安全管理|系统→安全|系统管理→安全管理
日志管理|系统|系统→日志|系统管理→日志管理
数据备份恢复|系统|系统→数据备份恢复|系统管理→备份恢复
密钥管理|系统|系统→密钥管理|系统管理→密钥管理
License文件|系统|系统→License文件|系统管理→License管理
图1  UME R50客户端页面示例
图2  UME R50s客户端页面示例
### 登录EM客户端 
摘要本节介绍登录EM网管客户端的操作。系统支持通过如下浏览器登录：Chrome 60及以后版本FireFox 60及以后版本 
步骤 : 
在客户端PC中，打开浏览器，在地址栏输入https://服务端IP:28808/em-portal
（例如https://10.43.36.143:28808/em-portal），按Enter键。
弹出登录对话框，如[图1]所示。
图1  登录对话框
输入用户名和密码。单击登录按钮，打开EM网管客户端窗口。
## 拓扑管理 
### 逻辑视图 
在拓扑管理页面，选择菜单逻辑视图，进入逻辑视图页面，如[图1]所示。
图1  逻辑视图页面
逻辑视图由网元树、工具栏和资源图层三部分组成：
网元树
网元树为拓扑图提供导航功能。 
工具栏
工具栏上的按钮说明参见[表1]。
按钮|名称|说明
---|---|---
/|表格/图层|将当前资源内容切换为表格/图层的显示模式。
|过滤|按资源名称、链路名称、链路链接状态过滤当前资源。
|搜索|打开或关闭资源搜索区域。资源搜索具体操作可参见“搜索资源”。
|保存视图|设置图层的布局，单击该按钮保存布局样式。
|显示图例|显示逻辑视图中图例含义。
|布局设置|设置图层的布局，包括放射布局、矩阵布局。线型可以选择直线、曲线、折线。
|恢复视图|设置图层的布局后，在没有保存布局样式之前，单击该按钮，可以恢复到修改布局之前的样式。
|开启编辑/结束编辑|鼠标右键单击源节点，再右键单击目的节点，即可以创建一条虚链路。
|全屏显示|将当前图层/表格全屏显示。
/|位置解锁/位置锁定|单击，解锁图标，可以拖动图层中的图标位置。单击，锁定图层中图标，不能随意拖动。
|导出|支持将当前图层导出为.svg或.png格式的文件。
|分用户设置|分用户设置逻辑拓扑图的背景。不同的用户登录后，显示自己设置的背景。
|全局设置|设置节点、链路的图标和颜色，文字的样式、告警是否提示，以及图层的背景。
/|放大/缩小|单击该按钮，可以放大/缩小整个图层。
|全图显示|资源图层在显示窗口全图显示。
|框选网元|单击该按钮，可以框选需要的网元。
|打开信息概览|选中资源节点，单击该按钮，查询资源信息概览。
|打开鸟瞰图|通过鸟瞰图方式查看图层资源。
资源图层
资源图层可用表格/图标的形式显示资源内容。 
图层上的资源图标支持钻取操作。例如双击网元图标，可以进一步查看该网元上的服务、微服务等内容。 
#### 搜索资源 
摘要 : 
本节介绍如何在逻辑视图中搜索指定的资源。 
步骤 : 
在逻辑视图页面，单击工具栏上按钮，出现资源搜索区域，如[图1]所示。
图1  搜索资源
参数名|参数说明
---|---
查找范围|搜索资源的图层范围：所有图层：在所有图层搜索资源。当前图层：仅在当前图层搜索资源。
资源显示名称|搜索资源的关键字。
参考[表1]，在搜索参数区域中输入搜索条件，并单击确定按钮，符合条件的资源显示在下方表格中，如[图2]所示。
图2  资源搜索结果
#### 查看网元当前告警 
摘要 : 
本节介绍如何在拓扑图上查看网元的当前告警信息。 
步骤 : 
在逻辑视图页面，单击左侧资源树上某个网元，该网元图标出现在右侧图层上。
右击网元图标，选择菜单告警→当前告警
，如[图1]所示。
图1  查看网元当前告警
系统跳转到告警监控页面，并显示所选网元的当前告警信息，如[图2]所示。
图2  网元当前告警列表
#### 查看网元信息概览 
摘要 : 
本节介绍如何查看网元的概览信息。 
网元的概览信息包括以下两个部分： 
网元告警信息汇总：列出该网元上严重、主要、次要及警告级别的告警数。 
网元重点KPI监控：对该网元上重点KPI（可自定义）的性能指标值进行监控。 
网元重点告警：对该网元上重点告警进行监控。 
步骤 : 
在逻辑视图页面，单击左侧资源树上某个网元，该网元图标出现在右侧图层上。
右击网元图标，选择快捷菜单中选择信息概览，如[图1]所示。
图1  网元信息概览
系统弹出网元信息概览对话框，如[图2]所示。维护人员可以查看该网元上各级别的告警数汇总，以及重点监控的KPI指标值。
图2  网元信息概览页面
 说明： 
维护人员可以自定义网元的重点监控KPI指标和重点告警。具体操作可参见“[设置重点KPI监控条件]”
和“[设置重点告警监控条件]”。
#### 设置重点KPI监控条件 
摘要 : 
本节介绍如何设置网元信息概览页面中重点KPI的监控条件。
步骤 : 
在逻辑视图页面，参考[查看网元信息概览]，进入信息概览对话框，如[图1]所示。
图1  重点KPI监控
单击按钮，系统弹出设置重点KPI对话框，如[图2]所示。
图2  设置重点KPI对话框
单击新建按钮，在基本信息区域，选择需要监控的网元类型和测量对象类型，其相关的计数器及指标出现在下方待选择区域中，在待选择区域中，选择需要监控的计数器/指标，其自动添加至已选择区域中，如[图3]所示。
图3  选择测量对象类型
单击下一步，选择监控的时间粒度，如[图4]所示。
图4  选择监控时间粒度
单击确定，所选的计数器/指标出现在监控KPI列表中，如[图5]所示。
图5  监控KPI列表
单击修改门限按钮，设置KPI的上下门限值，如[图6]所示。
图6  修改门限
#### 设置重点告警监控条件 
摘要 : 
本节介绍如何设置网元信息概览页面中重点告警的监控条件。
步骤 : 
在逻辑视图页面，参考[查看网元信息概览]，进入资源信息对话框，如[图1]所示。
图1  资源信息
单击重点告警后的按钮，系统弹出重点告警设置对话框，如[图2]所示。
图2  重点告警设置
从待选项中选择需要重点关注的网元和告警，单击按钮，添加到已选项。
单击确定按钮，完成重点告警的设置。
### 分组管理 
概述 : 
ElasticNet UME系统支持对被管理网元进行分组。在拓扑管理页面，选择菜单分组管理，进入分组管理页面，维护人员可以根据管理的需要，将多个网元放入一个分组中，如[图1]所示。
图1  分组管理示例
ElasticNet UME系统的分组具有如下规则：
系统支持创建多个分组。 
在分组中，也可以创建子分组。 
一个分组内可以包含一个或多个网元。 
同一个网元可以同时在多个分组中存在。 
所有网元默认都在ROOT节点中。 
#### 使用场景 
在创建角色时，可以为不同的分组分配不同的操作权限，如[图2]所示。具体操作可参见“新建角色
”。
图2  新建角色权限分配
 说明： 
当父级节点（例如ROOT节点）具有更高级权限时，子节点也会拥有相同的高级权限，而会忽略子节点的权限设置。实际分配权限时，应避免这样的情况。
#### 创建网元分组 
摘要 : 
本节介绍如何创建网元分组。 
步骤 : 
在分组管理页面，选择资源树的ROOT节点，并单击右侧的按钮，创建一个新分组，如[图1]所示。
图1  创建分组按钮
在新分组条件设置中，参考[表1]，设置分组基本信息，并添加分组内的网元，如[图2]所示。
图2  创建分组
参数名|参数说明
---|---
基本信息|节点位置|当前分组的层级结构，由当前分组创建时的位置自动填写。
分组名称|基本信息|新分组的名称。
分组描述|基本信息|新分组的简短描述信息。
规则|位置规则|如果需要根据网元的位置信息自动添加网元，单击，并输入位置条件。多个位置之间以逗号分隔。
IP规则|规则|如果需要根据网元的IP值自动添加网元，单击，并输入IP段或多个IP值。IP段以“-”线连接，多个IP值以","分隔。
成员|设置成员|手工添加网元，单击请设置成员框后选择当前已接入的网元。可选择多个网元。
单击确定，符合条件的网元出现在已加入成员列表中，如[图3]所示。
图3  已加入分组网元
#### 修改网元分组 
摘要 : 
本节介绍如何修改网元分组，包括分组的名称、分组的成员等。 
步骤 : 
在资源树上选择一个分组节点，页面右侧显示该分组的详细信息，如[图1]所示。
图1  网元分组详细信息
根据需要，修改分组基本信息，或者添加或删除网元。
单击确定。
系统提示“分组信息修改成功”。
#### 删除网元分组 
摘要 : 
本节介绍如何删除网元分组。 
当某个网元分组不再需要时，可将其删除。删除网元分组后，所有该分组下的子分组和成员全部被删除。 
 说明： 
ROOT节点不能删除。
步骤 : 
在分组管理页面，选择资源树中待删除的分组节点，并单击右侧的按钮，如[图1]所示。
图1  删除分组节点
系统弹出删除分组确认对话框，如[图2]所示。单击删除，删除该分组。
图2  删除分组确认对话框
### 分层接入 
分层接入是通过创建网元代理，将相关被管理网元接入ElasticNet UME系统。
分层接入支持的网元和代理类型如[表1]所示。
网元类型|代理类型|配置参考
---|---|---
ZXUN xGW（GW-U&UPF）|AIO|新建AIO代理
CloudStudio（NFVO)|NFVO|新建NFVO代理
NSSMF|NSSMF|新建NSSMF代理
ZTE Common Core网元|OAM|新建OAM代理
NetNumen CTS（SNMP告警上报）|SNMP|新建SNMP代理
ZTE 2G/3G/4G核心网网元|V4OMS|新建V4OMS代理
CloudStudio（VNFM）|VNFM|新建VNFM代理
ZXUN xGW（2G/3G/4G/5G）|xGWAgent|新建xGWAgent代理
ZXUN iCX（MSCS）CU|V3OMM|新建V3OMM代理
ZXUN iMEC|MEP|新建MEP代理
 说明： 
新建OAM代理时，可能会出现“新建代理失败”的报错信息，参考[FAQ]处理。
#### 新建AIO代理 
摘要 : 
本节介绍如何新建AIO代理。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面， 如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面，代理类型选择AIO，如[图2]所示。
图2  新建AIO代理-公共信息
参数|说明
---|---
代理类型|选择AIO。
代理名称|接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
图3  新建AIO代理-基本属性
参数|说明
---|---
网络地址|代理的IP地址。
端口|代理的端口号。
协议|支持两种：HTTP/HTTPS。
硬件平台地址|EPC一体化网元的硬件平台地址。
端口|硬件平台端口。
协议|支持两种：HTTP/HTTPS。
位置|硬件平台位置。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
图4  新建AIO代理-安全参数
参数|说明
---|---
安全参数|认证方式|当ElasticNet UME与代理之间采用HTTPS协议交互时，选择的认证方式。单向认证：客户端对服务端进行认证。双向认证：客户端对服务端进行认证，同时，服务端对客户端也需要进行认证。
支持集中安全|安全参数|选择是否启用集中安全管理：是：启用集中安全。否：不启用集中安全。说明：该配置需要与ElasticNet UME自身配置以及对端网元配置保持一致。
硬件平台安全参数|认证方式|当ElasticNet UME与代理之间采用HTTPS协议交互时，选择的认证方式。单向认证：客户端对服务端进行认证。双向认证：客户端对服务端进行认证，同时，服务端对客户端也需要进行认证。
图5  新建AIO代理-告警参数
参数|说明
---|---
网元告警参数|版本|选择下级网元告警上报时SNMP v3的参数。NA：表示ElasticNet UME采用默认SNMP参数与下级网元进行对接。v3：表示ElasticNet UME采用定制的SNMP参数与下级网元进行对接，需进一步输入相关的用户名及安全级别。
用户名|网元告警参数|当网元采用自定义的SNMP参数时，输入网元侧设置的SNMP v3用户名。
安全级别|网元告警参数|当网元采用自定义的SNMP参数时，选择与网元对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
硬件平台告警|版本|选择硬件平台上报告警时使用的SNMP版本：v2c：使用SNMP v2c。需进一步输入Read的Community，Write的Community，Notify的Community。v3：使用SNMP v3。需进一步输入用户名和安全级别。
Read的Community|硬件平台告警|当硬件平台采用SNMP v2c时，选择对端设置的Read的Community，Write的Community，Notify的Community。默认：public。
Write的Community|硬件平台告警|当硬件平台采用SNMP v2c时，选择对端设置的Read的Community，Write的Community，Notify的Community。默认：public。
Notify的Community|硬件平台告警|当硬件平台采用SNMP v2c时，选择对端设置的Read的Community，Write的Community，Notify的Community。默认：public。
用户名|硬件平台告警|当硬件平台采用SNMP v3时，输入对端设置的SNMP v3用户名。
安全级别|硬件平台告警|当硬件平台采用SNMP v3时，选择与对端对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
输入相关参数后，单击新建按钮，完成AIO代理的创建。
#### 新建MEP代理 
摘要 : 
本节介绍如何新建MEP代理，并接入MEP网元。
 说明： 
在接入MEP网元前，需要先导入该网元对应版本的模型文件，否则会导致接入失败。 
前提 : 
已导入MEP网元的模型文件。具体操作可参见“导入网元模型包”。 
已知MEP网元的IP地址和对接用户信息。 
已知MEP网元COS组件的IP地址和对接用户信息。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面， 如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为MEP，并参考[表1]设置相关公共参数，如[图2]所示。
图2  新建MEP代理-公共信息
参数|说明
---|---
代理类型|选择MEP。
代理名称|接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置MEP的相关连接参数，如[图3]所示。
图3  新建MEP代理-基本属性
参数名称|参数说明
---|---
网络地址|输入MEP在EMS平面上的浮动IP地址。
端口|网元代理的端口号。
位置|网元代理的位置信息。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
时区|当代理类型选择为MEP时，需要填写代理的时区（如：Asia/Shanghai）。
子网号|子网号。
网元ID|局号。
原始标识|网元实例化标识。
VNFM ID|VNFM原始标识。
用户名|输入用户名。
密码|输入密码。
在性能参数区域，选择与MEP之间的FTP/SFTP对接参数，如[图4]所示。ElasticNet UME通过FTP/SFTP方式获取MEP的性能数据。
图4  新建MEP代理-性能参数
参数名称|参数说明
---|---
FTP端口|MEP上FTP/SFTP服务的端口号。
FTP协议|选择MEP的FTP协议类型，支持FTP和SFTP。该协议类型需要与MEP上的服务保持一致。
FTP用户名|通过FTP/SFTP接入MEP时使用的用户名。
FTP密码|通过FTP/SFTP接入MEP时使用的密码。
在北向接口参数区域，配置北向接口参数。如[图5]所示。该参数用于ElasticNet UME通过北向接口将MEP的相关信息上报给运营商OSS。
图5  北向接口参数
参数名称|参数说明
---|---
省份|输入MEP所在的省份信息。
访问COS IP地址|输入COS组件的IP地址。
访问COS端口|输入COS组件对接的端口号。
访问COS用户名|输入COS组件对接的用户名。
访问COS密码|输入COS组件对接的密码。
输入相关参数后，单击新建按钮，完成MEP代理的创建。
#### 新建NFVO代理 
摘要 : 
本节介绍如何新建NFVO代理。 
ElasticNet UME接入NFVO后，可以采集NFVO的性能、告警信息，并通过ElasticNet UME的北向接口统一上报给运营商的OSS。
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为NFVO，并设置相关公共参数，如[图2]所示。
图2  新建NFVO代理-公共信息
参数|说明
---|---
代理类型|选择NFVO。
代理名称|新建代理名称。
描述|新建代理信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置NFVO的相关连接参数，如[图3]所示。
图3  新建NFVO代理-基本属性
参数|说明
---|---
网络地址|输入NFVO在EMS平面上的浮动IP地址。
端口|选择接入NFVO的协议类型及其对应的端口号。当采用HTTP（不认证、无Token鉴权）方式接入时，默认端口号为28800。当采用HTTPS（单向认证，无Token鉴权）方式接入时，默认端口号为28802。当采用HTTPS（双向认证，Token鉴权）方式接入时，默认端口号为28805。说明：协议类型和端口号需要与对端NFVO保持一致。
协议|选择接入NFVO的协议类型及其对应的端口号。当采用HTTP（不认证、无Token鉴权）方式接入时，默认端口号为28800。当采用HTTPS（单向认证，无Token鉴权）方式接入时，默认端口号为28802。当采用HTTPS（双向认证，Token鉴权）方式接入时，默认端口号为28805。说明：协议类型和端口号需要与对端NFVO保持一致。
位置|代理的位置。
EMS网络地址|接入的EMS网管IP地址。
在安全参数区域，选择与NFVO之间的安全参数，如[图4]所示。
图4  安全参数
参数|说明
---|---
认证方式|当ElasticNet UME与NFVO之间采用HTTPS协议交互时，选择认证方式。单向认证：客户端对服务端进行认证。双向认证：客户端对服务端进行认证，同时，服务端对客户端也需要进行认证。
根证书|当采用双向认证方式时，单击上传，上传NFVO提供的根证书文件（例如：ca.cert）。
客户端证书 / 客户端密钥|当采用双向认证方式时，单击上传，上传NFVO提供的客户端证书文件（例如：client.crt）和客户端私钥文件（例如：client.key）。
Token 用户名 / Token 密码|输入NFVO侧提供的用户名和密码信息。
在告警参数区域，设置NFVO上报告警时的相关SNMP参数，如[图5]所示。
图5  告警参数
参数|说明
---|---
版本|选择NFVO上报告警时使用的SNMP版本：v2c：使用SNMP v2c。需进一步输入Read的Community、Write的Community、Notify的Community。v3：使用SNMP v3。需进一步输入用户名和安全级别。
Read的Community|当采用SNMP v2c时，选择与NFVO对应的Read的Community，Write的Community，Notify的Community。默认：public。
Write的Community|当采用SNMP v2c时，选择与NFVO对应的Read的Community，Write的Community，Notify的Community。默认：public。
Notify的Community|当采用SNMP v2c时，选择与NFVO对应的Read的Community，Write的Community，Notify的Community。默认：public。
用户名|当采用SNMP v3时，选择与NFVO对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
安全级别|当采用SNMP v3时，选择与NFVO对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
输入相关参数后，单击新建按钮，完成NFVO代理的创建。
#### 新建NSSMF代理 
摘要 : 
接入NSSMF代理用于获取核心网子切片的切片信息。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为NSSMF，并输入其它参数，如[图2]所示。
图2  新建NSSMF代理-公共信息
参数|说明
---|---
代理类型|选择NSSMF。
代理名称|接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置与网元连接的相关参数，如[图3]所示。
图3  NSSMF代理-基本属性
参数|说明
---|---
网络地址|代理的IP地址。
端口|代理的端口号。
协议|选择接入NSSMF的协议类型。
位置|网元的位置。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
在安全参数区域，选择与NSSMF之间的安全参数，如[图4]所示。
图4  NSSMF代理-安全参数
参数|说明
---|---
Token 用户名 / Token 密码|输入NSSMF侧提供的用户名和密码信息。
输入相关参数后，单击新建按钮，完成NSSMF代理的创建。
#### 新建OAM代理 
摘要 : 
本节介绍如何新建OAM代理。 
OAM代理用于接入ZTE Common Core的相关网元（版本为V7.X）。 
前提 : 
已登录ElasticNet UME客户端。 
已确定ElasticNet UME与网元之间的连接方式。 
采用双向认证时，已获取网元侧的证书文件。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为OAM，并输入其它参数，如[图2]所示。
图2  新建OAM代理-公共信息
参数|说明
---|---
代理类型|选择OAM。
代理名称|输入接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置网元的相关连接参数，如[图3]所示。
图3  新建OAM代理-基本属性
参数|说明
---|---
网络地址|网元代理的IP地址。
端口|选择接入对端网元的协议类型及其对应的端口号。当采用HTTP方式接入时，默认端口号为7778。当采用HTTPS（单向认证）方式接入时，默认端口号为8777。当采用HTTPS（双向认证）方式接入时，默认端口号为8778。说明：协议类型和端口号需要与对端网元上的配置保持一致。
协议|选择接入对端网元的协议类型及其对应的端口号。当采用HTTP方式接入时，默认端口号为7778。当采用HTTPS（单向认证）方式接入时，默认端口号为8777。当采用HTTPS（双向认证）方式接入时，默认端口号为8778。说明：协议类型和端口号需要与对端网元上的配置保持一致。
位置|代理的位置。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
在安全参数区域，选择与网元之间的安全参数，如[图4]所示。
图4  安全参数
参数|说明
---|---
认证方式|当ElasticNet UME与代理之间采用HTTPS协议交互时，选择的认证方式。单向认证：客户端对服务端进行认证。双向认证：客户端对服务端进行认证，同时，服务端对客户端也需要进行认证。
根证书|当采用双向认证方式时，单击上传，上传网元提供的根证书文件（例如：ca.cert）。
客户端证书 / 客户端密钥|当采用双向认证方式时，单击上传，上传网元提供的客户端证书文件（例如：oam.srv.cli.crt）和客户端私钥文件（例如：oam.srv.cli.key）。
Token 用户名 / Token 密码|输入网元侧提供的用户名和密码信息。
支持集中安全|选择是否支持集中安全管理。当ElasticNet UME接入USPP或RCP V7.X网元时，需要支持集中安全。当ElasticNet UME接入其它V7.X核心网网元时，则根据实际需要，选择是否支持集中安全。
（可选）如果网元侧修改了告警SNMP上报时的默认参数，在网元告警参数区域，选择版本为v3，并设置相关的认证参数。
图5  网元告警参数
参数|说明
---|---
版本|选择下级网元告警上报时SNMP V3的参数。NA：表示ElasticNet UME采用默认SNMP参数与下级网元进行对接。v3：表示ElasticNet UME采用定制的SNMP参数与下级网元进行对接，需进一步输入相关的用户名及安全级别。
用户名|当网元采用自定义的SNMP参数时，输入网元侧设置的SNMP v3用户名。
安全级别|当网元采用自定义的SNMP参数时，选择与网元对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
输入相关参数后，单击新建按钮，完成OAM代理的创建。
#### 新建SNMP代理 
摘要 : 
本节介绍如何新建SNMP代理。 
SNMP代理可以接入NetNumen CTS网元，并通过SNMP协议获取网元的告警信息。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面，代理类型选择SNMP，如[图2]所示。
图2  新建SNMP代理-公共信息
参数|说明
---|---
代理类型|选择SNMP。
代理名称|输入接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
图3  新建SNMP代理-基本属性
参数|说明
---|---
位置|代理的位置。
供应商|代理网元的供应商。
网络地址|代理的IP地址。
子网号|子网号。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
时区|当代理类型选择为SNMP时，需要填写代理的时区（如：Asia/Shanghai）。
图4  SNMP参数
参数|说明
---|---
SNMP参数|SNMP端口|默认161
SNMP Trap端口|SNMP参数|默认162
超时（秒）|SNMP参数|默认6
重试次数|SNMP参数|默认1
SNMP版本|SNMP参数|v2c、v3。
读团体串|SNMP参数|版本选择v2c时，需要设置该类参数，默认：public。
写团体串|SNMP参数|版本选择v2c时，需要设置该类参数，默认：public。
用户名称|SNMP参数|版本选择v3时，需要输入用户名和安全级别。
认证密码|SNMP参数|版本选择v3时，需要输入用户名和安全级别。
加密密码|SNMP参数|版本选择v3时，需要输入用户名和安全级别。
上下文名称|SNMP参数|版本选择v3时，需要输入用户名和安全级别。
上下文ID|SNMP参数|版本选择v3时，需要输入用户名和安全级别。
输入相关参数后，单击新建按钮，完成SNMP代理的创建。
#### 新建V4OMS代理 
摘要 : 
本节介绍如何新建V4OMS代理。 
V4OMS代理用于接入ZTE 2G/3G/4G核心网网元（版本为V4.X及V5.X）。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为V4OMS，并输入其它参数，如[图2]所示。
图2  新建V4OMS代理-公共信息
参数|说明
---|---
代理类型|选择V4OMS。
代理名称|接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置与网元连接的相关参数，如[图3]所示。
图3  新建V4OMS代理-基本属性
参数|说明
---|---
网络地址|代理的IP地址。
端口|代理的端口号。
厂商|代理网元的供应商，例如：ZTE。
位置|网元的位置。
网元类型|选择网元类型：B200：用于接入ZXUN B200(SBC)网元。N/A：用于接入其它V4.X或V5.X网元。B200LI：用于接入ZXUN B200LI网元。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
支持集中安全|选择是否启用集中安全管理：是：启用集中安全。否：不启用集中安全。说明：该配置需要与ElasticNet UME自身配置以及对端网元配置保持一致。
（可选）如果ElasticNet UME与网元之间需要采用SSH方式通讯，在高级属性区域，选择启用SSH，并设置相关参数，如[图4]所示。
图4  新建V4OMS代理-高级属性
参数|说明
---|---
启用SSH|选择ElasticNet UME与网元之间是否需要采用SSH方式通讯。是：启用SSH通讯。否：不启用SSH通讯。说明：该配置需要与网元侧保持一致。
SSH用户名|当启用SSH方式时，输入由网元侧提供的SSH用户名、密码及端口号。
SSH密码|当启用SSH方式时，输入由网元侧提供的SSH用户名、密码及端口号。
SSH端口|当启用SSH方式时，输入由网元侧提供的SSH用户名、密码及端口号。
输入相关参数后，单击新建按钮，完成V4OMS代理的创建。
#### 新建VNFM代理 
摘要 : 
本节介绍如何新建VNFM代理。 
VNFM代理用于连接ZTE CloudStudio(VNFM)。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为VNFM，并输入其它基本参数，如[图2]所示。
图2  新建VNFM代理-公共信息
参数|说明
---|---
代理类型|选择VNFM。
代理名称|输入接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置VNFM的相关连接参数，如[图3]所示。
图3  新建VNFM代理-基本属性
参数|说明
---|---
网络地址|VNFM的IP地址。
端口|选择接入VNFM的协议类型及其对应的端口号。当采用HTTP（不认证、无Token鉴权）方式接入时，默认端口号为28810。当采用HTTPS（单向认证，无Token鉴权）方式接入时，默认端口号为28812。当采用HTTPS（双向认证，Token鉴权）方式接入时，默认端口号为28815。说明：协议类型和端口号需要与对端网元保持一致。
协议|选择接入VNFM的协议类型及其对应的端口号。当采用HTTP（不认证、无Token鉴权）方式接入时，默认端口号为28810。当采用HTTPS（单向认证，无Token鉴权）方式接入时，默认端口号为28812。当采用HTTPS（双向认证，Token鉴权）方式接入时，默认端口号为28815。说明：协议类型和端口号需要与对端网元保持一致。
位置|网元代理的位置。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
网元自动接入|是否自动接入VNFM上的VNF。是：自动接入VNFM上的VNF。否：不自动接入VNFM上的VNF。
在安全参数区域，选择与VNFM之间的安全参数，如[图4]所示。
图4  安全参数
参数|说明
---|---
认证方式|当ElasticNet UME与VNFM之间采用HTTPS协议交互时，选择认证方式。单向认证：客户端对服务端进行认证。双向认证：客户端对服务端进行认证，同时，服务端对客户端也需要进行认证。
根证书|当采用双向认证方式时，单击上传，上传VNFM提供的根证书文件（例如：ca.cert）。
客户端证书 / 客户端密钥|当采用双向认证方式时，单击上传，上传VNFM提供的客户端证书文件（例如：client.crt）和客户端私钥文件（例如：client.key）。
Token 用户名 / Token 密码|输入VNFM侧提供的用户名和密码信息。
在告警参数区域，设置VNFM上报告警时的相关SNMP参数，如[图5]所示。
图5  告警参数
参数|说明
---|---
版本|选择VNFM上报告警时使用的SNMP版本：v2c：使用SNMP v2c。需进一步输入Read的Community，Write的Community，Notify的Community。v3：使用SNMP v3。需进一步输入用户名和安全级别。
Read的Community|当采用SNMP v2c时，选择与VNFM对应的Read的Community，Write的Community，Notify的Community。默认：public。
Write的Community|当采用SNMP v2c时，选择与VNFM对应的Read的Community，Write的Community，Notify的Community。默认：public。
Notify的Community|当采用SNMP v2c时，选择与VNFM对应的Read的Community，Write的Community，Notify的Community。默认：public。
用户名|当采用SNMP v3时，输入VNFM提供的SNMP v3用户名。
安全级别|当采用SNMP v3时，选择与VNFM对应的安全级别及其相关参数。非鉴权，非私有：SNMP无需鉴权。鉴权，非私有：需进一步输入鉴权密码和鉴权协议。鉴权，私有：需进一步输入鉴权密码和鉴权协议，以及私有密码和私有协议。
输入相关参数后，单击新建按钮，完成VNFM代理的创建。
#### 新建xGWAgent代理 
摘要 : 
本节介绍如何新建xGWAgent代理。 
xGWAgent代理用于连接ZXUN xGW网元。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为xGWAgent，如[图2]所示。
图2  新建xGWAgent代理-公共信息
参数|说明
---|---
代理类型|选择xGWAgent。
代理名称|输入接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置与网元连接的相关参数，如[图3]所示。
图3  基本属性
参数|说明
---|---
位置|网元的位置。
供应商|输入网元的供应商名称，如：ZTE。
网络地址|输入网元的IP地址。
网元类型|选择网元类型：xGW：用于接入物理xGW网元。xGW(virtual)：用于接入虚拟化的xGW网元。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
时区|当代理类型选择为xGWAgent时，需要填写代理的时区（如：Asia/Shanghai）。
在SNMP参数区域，根据网元侧的配置，输入SNMP相关的连接参数，如[图4]所示。
图4  SNMP参数
参数|说明
---|---
SNMP端口|设置SNMP的端口号。默认为161。
SNMP Trap端口|设置SNMP Trap消息的端口号。默认为162。
超时（秒）|设置连接的超时时间。默认为6秒。
重试次数|设置连接的重试次数。默认为1次。
SNMP版本|设置SNMP的版本号。该版本号需要与对端网元保持一致。v2c：SNMP v2cv3：SNMP v3
读团体串|使用SNMP v2c版本时，输入网元侧提供的读写团体串名。默认为：public。
写团体串|使用SNMP v2c版本时，输入网元侧提供的读写团体串名。默认为：public。
用户名称|使用SNMP v3版本时，输入网元侧提供的用户名和安全级别等参数。
认证密码|使用SNMP v3版本时，输入网元侧提供的用户名和安全级别等参数。
加密密码|使用SNMP v3版本时，输入网元侧提供的用户名和安全级别等参数。
上下文名称|使用SNMP v3版本时，输入网元侧提供的用户名和安全级别等参数。
上下文ID|使用SNMP v3版本时，输入网元侧提供的用户名和安全级别等参数。
在CLI参数区域，配置Telnet相关的参数，如[图5]所示。
图5  CLI参数
参数|说明
---|---
CLI用户名|Telnet用户名，不能为空。如果设置不正确，则每次Telnet到xGW上时都需要重新输入用户名和密码。
CLI密码|Telnet密码，不能为空。
提示符|登录提示符，一般采用默认值：>。
增强模式提示符|增强模式提示符，一般采用默认值：#。
登录提示符|登录时要求输入用户名的提示符，一般采用默认值Username:。
密码提示符|登录时要求输入密码的提示符，一般采用默认值Password:。
SSH端口|SSH端口。
输入相关参数后，单击新建按钮，完成xGWAgent代理的创建。
#### 新建V3OMM代理 
摘要 : 
V3OMM代理用于接入MSCS的计费单元（CU）。
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面，如[图1]所示。
图1  分层接入页面
单击新建按钮，进入新建代理页面。
在公共信息区域，选择代理类型为V3OMM，并输入其它参数，如[图2]所示。
图2  新建V3OMM代理-公共信息
参数|说明
---|---
代理类型|选择V3OMM。
代理名称|接入的网元名称。
描述|接入网元简单信息描述。
启动|选择在创建网元代理后，是否立即启动该代理。是：表示创建网元代理后，自动启动该代理并连接下级网元。否：表示创建网元代理后，不启动该代理。维护人员可手工启动该代理。建议保持默认值是。
在基本属性区域，设置与网元连接的相关参数，如[图3]所示。
图3  V3OMM代理-基本属性
参数|说明
---|---
网络地址|代理的IP地址。
端口|代理的端口号。
厂商|代理网元的供应商，例如：ZTE。
位置|网元的位置。
EMS网络地址|当ElasticNet UME需要通过NAT穿越方式接入网元代理时，需要填写ElasticNet UME经过代理防火墙映射后的地址。一般情况下无需填写。
时区|网元所在的时区。
（可选）如果ElasticNet UME与网元之间需要采用SSH方式通讯，在高级属性区域，选择启用SSH，并设置相关参数，如[图4]所示。
图4  V3OMM代理-高级属性
参数|说明
---|---
启用SSH|选择ElasticNet UME与网元之间是否需要采用SSH方式通讯。是：启用SSH通讯。否：不启用SSH通讯。说明：该配置需要与网元侧保持一致。
SSH用户名|当启用SSH方式时，输入由网元侧提供的SSH用户名、密码及端口号。
SSH密码|当启用SSH方式时，输入由网元侧提供的SSH用户名、密码及端口号。
SSH端口|当启用SSH方式时，输入由网元侧提供的SSH用户名、密码及端口号。
输入相关参数后，单击新建按钮，完成V3OMM代理的创建。
#### 管理代理 
摘要 : 
本节介绍如何对对代理进行查看、启动、停止、修改、删除、同步操作。 
步骤 : 
在拓扑管理页面，选择菜单分层接入，进入分层接入页面， 如[图1]所示。
图1  分层接入
根据不同情况，选择执行如下操作。 
如果...|那么...
---|---
查看代理|选择代理名称，单击查看按钮。
修改代理|选择代理名称单击停止按钮，停用代理。单击更多，选择修改，修改相关参数。
删除代理|选择代理名称单击停止按钮，停用代理。单击更多，选择删除，可以删除代理。
同步代理|单击更多，选择同步，手动同步。
#### FAQ 
网元的分层接入，在新建OAM代理时会出现一些报错信息，可以参考相应的处理方法消除。
新建代理失败：OAM标识 XXX 已经存在 
新建代理失败：网元类型XXX无效 
OAM网元重新实例化后无法接入，需要删除后重新接入 
##### 新建代理失败：OAM标识 XXX 已经存在 
故障现象
新建代理失败，提示“OAM标识 XXX 已经存在”，如[图1]所示。
图1  新建代理失败
原因分析
OAM代理上报的标识与已经接入到EMS中的OAM的代理的标识重复。 
解决办法
方法一：修改OAM代理上报的标识值。 
方法二：删除已存在的OAM，重新新建。选择菜单 拓扑→逻辑视图，单击表格图标，如图2所示。图2  视图列表在页面的搜索框中输入待查找的OAM代理的资源北向标识，找到与新建代理标识重复的OAM代理。删除查询到的OAM代理，重新新建上面的OAM代理。 
##### 新建代理失败：网元类型XXX无效 
故障现象
新建代理失败，提示“网元类型 XXX 无效”，如[图3]所示。
图3  新建代理失败
原因分析
当网元上传的的网元类型不在EMS支持的列表中，会提示网元类型无效。 
解决办法
修改OAM代理上报的网元类型值。 
##### OAM网元重新实例化后无法接入，需要删除后重新接入 
故障现象
OAM网元重新实例化后无法接入。 
原因分析
VNFM没有接入EMS时，OAM代理重新实例化后，OAM代理不会自动删除，重新接入。但是新建接入时，EMS会报错，IP地址和端口重复错误。 
解决办法
将EMS中已接入的OAM代理删除，重新新建代理接入。 
### Pool管理 
ElasticNet UME系统支持对网元池的管理，包括MSCS网元池，SGSN网元池，MME网元池，CSCF网元池，AMF SET网元池。
ElasticNet UME系统还提供对网元池的组网管理，配置数据自动/手工核查，配置数据同步，动态管理等。
#### 新建Pool 
摘要 : 
Pool 组网即将多个网元组成一个pool，方便对多个网元同时进行管理和维护。Pool内各网元分担网络负荷，提升网络资源的利用率，节省设备投资，同时可以实现容灾备份，提高网络的可靠性，减少局间切换，提升用户体验。 
一个网元只能加入一个类型的Pool。如果这个网元是复合类型网元，比如Combo MME /GnGp SGSN，那么这个网元就可以同时加入MME Pool和SGSN Pool。 
本节介绍如何创建pool。 
步骤 : 
在拓扑管理页面，选择菜单Pool管理，进入Pool管理页面，如[图1]所示。
图1  Pool管理
单击新建按钮，进入新建Pool页面，如[图2]所示。
图2  新建Pool
Pool类型为MME Pool、MSCS-TRAFFIC、AMF SET、ICSCF Pool、SCSCF Pool、MSC Pool的参数说明参见[表1]。
参数类型|说明
---|---
基本信息|Pool类型|支持MME Pool、MSCS-TRAFFIC、AMF SET、ICSCF Pool、SCSCF Pool、MSC Pool。
Pool标识|基本信息|整数值，范围1-65535。
Pool名称|基本信息|新建Pool名称。
描述|基本信息|对新建Pool进行简要说明。
Pool网元|网元列表|显示能加入Pool的网元。
Pool类型为SGSN Pool的参数说明参见[表2]。
参数类型|说明
---|---
基本信息|Pool类型|支持SGSN Pool。
Pool标识|基本信息|整数值，范围1-255。
Pool名称|基本信息|新建Pool名称。
描述|基本信息|对新建Pool进行简要说明。
参数信息|NRI长度|整数值，范围0-10。
Null NRI长度|参数信息|整数值，范围0-10。
Null NRI值|参数信息|整数值，范围0-1023。且不大于2^n-1，n为Null NRI长度。
Pool网元|网元列表|显示能加入Pool的网元。
根据需求填写和选择相关参数后，单击新建按钮，完成Pool组网配置。
## 缩略语 
## 缩略语 
### CTS 
Call Trace System呼叫跟踪系统
### CU 
Charging Unit计费单元
FTP : 
File Transfer Protocol文件传输协议
HTTP : 
Hypertext Transfer Protocol超文本传输协议
### HTTPS 
Hypertext Transfer Protocol Secure超文本传输安全协议
### IaaS 
Infrastructure as a Service基础设施即服务
IPv4 : 
Internet Protocol version 4第四版互联网协议
IPv6 : 
Internet Protocol Version 6IP协议的版本6
### KPI 
Key Performance Indicator关键性能指标
### MML 
Man Machine Language人机语言
### MSCS 
Mobile Switching Center Server移动交换中心服务器
### NAT 
Network Address Translation网络地址转换
NFVO : 
Network Functions Virtualization Orchestrator网络功能虚拟化编排器
### OMMP 
Operation and Maintenance Management Platform操作维护管理平台
### OSS 
Operation Support System运营支撑系统
### PaaS 
Platform as a Service平台即服务
### PNF 
Physical Network Function物理网络功能
### SBC 
Session Border Controller会话边界控制器
SFTP : 
Secure File Transfer Protocol安全文件传输协议
### SNMP 
Simple Network Management Protocol简单网络管理协议
### SSH 
Secure Shell安全外壳
UPF : 
User Plane Function用户平面功能
### URL 
Uniform Resource Locator统一资源定位符
### USPP 
Universal Subscriber Profile Platform通用用户数据平台
### VAS 
Value-Added Service增值服务
VNF : 
Virtualized Network Function虚拟化网络功能
VNFM : 
Virtualized Network Function Manager虚拟化网络功能管理器
## 告警管理 
### 告警管理概述 
告警是反映网元、网络运行情况和故障定位的一个信息来源，为了保证网络正常运行，网络管理员或维护员应定期对告警进行监控和处理。 
实现原理 : 
ElasticNet UME告警管理的消息处理流程如[图1]所示。
图1  告警管理的消息流程
告警上报和呈现的过程如下。 
ElasticNet UME维护人员可以通过客户端的告警监控功能，对被管理网元产生的告警进行实时监控。
当被管理网元发生故障时，会产生告警事件，并实时上报给ElasticNet UME服务器。
ElasticNet UME服务器对网元上报的告警进行收集，并储存在自身的数据库中。
ElasticNet UME服务器可以将当前的告警信息集中呈现在客户端上。
维护人员可以在ElasticNet UME浏览器上查看当前告警和历史告警，并能完成各种告警处理的功能。
通过ElasticNet UME服务器的北向接口，网元的告警信息可以提供给上级NMS网管，供北向用户分析。
#### 相关概念 
告警和通知 : 
###### 告警 
告警是对被管理对象以及ElasticNet UME系统本身在运行过程中发生的异常情况进行报告，提醒用户进行相应的告警处理。
告警对应的问题或故障解决后，系统将自动返回告警恢复消息。 
当异常或故障出现时，告警管理系统将及时准确地显示相应的告警信息。 
告警信息一般会持续一段时间，在问题或故障消失后，告警信息才会消失，并返回相应的告警恢复消息。 
###### 通知 
通知是对管理对象以及ElasticNet UME系统在运行中的一些操作或异常信息提示，以便维护人员及时掌握各模块的运行状况。
###### 告警和通知的区别 
告警：ElasticNet UME或被管对象发生了异常或故障，若不处理，会引起业务异常。告警可以被确认和清除。 
通知：ElasticNet UME或被管对象发生了某种变化，不一定会引起业务的异常。通知不能被确认和清除。 
###### 告警和通知的标识方法 
告警/通知的唯一标识方法：资源类型+告警码/通知码。 
资源类型：用来进行告警码的分类。 
告警码/通知码：是一个整型字段。用于唯一的标识一条告警/通知。 
##### 告警级别 

###### 级别分类 
告警根据对系统的影响程度分为四种级别：严重、主要、次要和警告，详细说明参见[表1]。
告警级别|级别说明
---|---
严重|表示正常业务受到严重影响，需要立即修复。
主要|表示系统出现影响正常业务的迹象，需要紧急修复。
次要|表示系统存在不影响正常业务的因素，但应采取纠正措施，以免发生更严重的故障。
警告|表示系统存在潜在的或即将影响正常业务的问题，应采取措施诊断纠正，以免其转变成一个更加严重的，影响正常业务的故障。
###### 重定义告警级别 
系统初始化时设置了每条告警的默认告警级别，维护人员也可以根据不同的业务需求和实际环境调整告警的级别。 
##### 告警状态 

###### 告警状态分类 
告警共有如下几种状态： 
 
未确认未清除 
 
已确认未清除 
 
未确认已清除 
 
已确认已清除 
 
###### 告警状态转换 
告警状态转换关系如[图1]所示。
图1  告警状态转换
 
确认/反确认告警确认告警，表示维护人员正在处理该告警。告警被确认后，由未确认状态变成已确认状态。反确认告警，表示将已确认状态的告警重新变成未确认告警。 
 
清除告警当故障排除后，告警会由未清除状态变为已清除状态，该告警变为历史告警，被记录进告警数据库中。维护人员也可以通过手工清除的方式，将未清除的告警变为已清除状态。如果网元的故障依然存在，网元可能会再次上报该告警。 
 
###### 当前告警和历史告警 
 
未确认未清除和已确认未清除状态的告警被称为当前告警，存放当前告警的库叫当前告警库。 
 
未确认已清除和已确认已清除状态的告警被称为历史告警，存放历史告警的库叫历史告警库。 
 
#### 告警页面介绍 
在ElasticNet UME客户端主页面中，选择告警菜单，打开告警主页面，如[图1]所示。
图1  告警主页面
快捷菜单栏 
告警监控栏 
功能导航树 
在告警监控区域，单击条件模板按钮，弹出如[图2]所示的对话框。
图2  条件模板
ElasticNet UME系统在条件模板中默认设置了公有模板和私有模板两个模块，其中：
公有模板为ElasticNet UME系统默认提供的查询模板，包括告警监控、最近一天、最近两天三种查询模板，用户不可对其进行编辑操作。 
私有模板为用户自定义的查询模板。 
单击模板后图标，可将此模板设置为默认模板，默认按照此模板条件进行查询。 
单击模板后图标，可取消此模板的默认状态。 
标号|名称|说明
---|---|---
1|快捷菜单栏|：告警铃。若有告警，左上角的数字表示全部告警数目。光标指向此图标，展示各级别告警的数目，单击可快速进入相应级别告警的查询页面。：系统通知信息。：帮助。光标指向此图标，可打开操作与维护、故障管理手册。：用户。光标指向此图标，可查看用户名、密码修改页面和注销。：设置。单击可设置当前的皮肤、显示语言、时区、导航菜单栏打开方式以及版本信息。
2|告警监控栏|查看当前网元告警。
3|功能导航树|进入各功能页面的导航树。
#### 告警管理模块说明 
告警管理操作可分为以下模块。监控告警/通知：维护人员查询查看告警和通知。 
处理告警：维护人员根据告警信息定位故障后，对告警进行确认、清除、前转等操作。 
管理告警数据：维护人员导出告警，设置定时统计任务和定时输出任务。 
告警设置：设置告警的属性，设置告警处理规则，设置告警抑制计划任务和设置自定义告警处理建议。 
各模块包含的子模块及操作说明参见[表1]。
模块|子模块|链接
---|---|---
监控告警和通知|查询当前告警|查询当前告警
查询历史告警|监控告警和通知|查询历史告警
查询通知|监控告警和通知|查询通知
查看告警详情|监控告警和通知|查看告警详情
查看当前告警统计|监控告警和通知|查看当前告警统计
查看历史告警统计|监控告警和通知|查看历史告警统计
查看告警提示|监控告警和通知|查看告警提示
处理告警|确认告警|确认告警
自定义告警处理建议|处理告警|自定义告警处理建议
清除告警|处理告警|清除告警
前转告警|处理告警|前转告警
管理告警|告警同步|同步当前告警
导出告警|管理告警|导出告警
导出通知|管理告警|手动导出通知
定时统计|管理告警|定时导出历史统计数据
告警设置|设置告警属性|设置告警属性
设置告警处理规则|告警设置|设置告警处理规则
设置告警抑制计划|告警设置|设置告警抑制计划
规则运行|规则管理|新建关联规则
规则包管理|规则运行|导入规则包
### 监控告警和通知 
维护人员可实时监控ElasticNet UME所管理的网络设备和平台产生的告警和通知。
#### 查询当前告警 
ElasticNet UME支持实时监控被管理网元和ElasticNet UME自身的当前告警，并支持以图形化的方式显示。ElasticNet UME提供告警高级筛选过滤功能（支持按网元类型、位置、告警类型、告警码、发生时间、确认时间、确认状态、确认用户、根源/衍生告警、注释、可见性等筛选过滤）和排序。
维护人员可以通过多种方式查询当前告警。 
##### 按自定义条件查询 
摘要 : 
按自定义的告警设置条件查询当前告警。 
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面，如[图1]所示。
图1  告警监控
单击条件查询按钮，打开条件筛选设置页面，根据需要选择设置一个或多个条件，如[图2]所示。参数说明参见[表1]。
图2  条件查询页面
参数名|参数说明
---|---
级别|筛选指定的告警级别。目前共有四项告警级别，分别为：严重、主要、次要、警告。
发生时间|网元侧告警产生时间。根据告警发生的时间来筛选告警。
告警码|根据告警码来筛选告警。单击选择按钮，在搜索栏输入告警码或告警码名称来查找到要选择的告警码。单击小箭头，选中的告警码从待选项框进入已选项框。开启排除模式按钮，选择的结果为已选项的反集。
确认状态|根据告警的确认状态来筛选告警。包括已确认、未确认。可以勾选一个或多个状态。
可见性|根据告警的可见性来筛选告警。
根源衍生|根据根源告警或衍生告警性质来筛选告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
资源|在资源区域，可以按照对象或类型进行筛选。选择按对象筛选，单击选择资源，右侧下拉列表框中默认选择对象类型为网元，可更改需要查询的对象类型（不可多选，如网元、VNFM、分组），并单击选择按钮，选择需要查询的有关具体资源（可多选）。选择按类型筛选，单击选择资源，在右侧下拉列表框中选择需要的网元类型（可多选）。
单击显示高级查询，选择查询条件，单击查询按钮，如[图3]所示。高级查询条件参数说明参见[表2]。
图3  高级查询条件页面
设置条件|说明
---|---
时区|设置告警查询的时区条件。可以选择网元时区或者客户端时区。
确认时间|网元侧告警确认时间。
服务端时间|告警在网管侧入库时间。
改变时间|网元上报更新消息所携带的时间。
清除状态|包括已清除、未清除。可以勾选一个或多个状态。
告警类型|选择需要的告警类型。
确认用户|输入确认告警的用户名。
对象原始流水号|告警条目流水号。
注释|输入注释内容。
告警原因|告警产生的原因。
工程状态|包括普通、调测、新建3种工程状态。
网元虚拟化标识|包括全部、物理网元、虚拟网元。
排序列|选择排序列方式，包含有服务端时间、发生时间、告警级别、告警类型、告警码。
排序方式|选择降序或升序。
相关任务 : 
任务|操作
---|---
恢复默认条件查询|在图1中，单击默认按钮，恢复系统默认条件设置。
保存当前告警|在图1中，单击 按钮，设置名称，另存当前告警。
导出当前告警|在图1中，单击导出按钮，可以导出已选的告警或者是导出全部告警。参考手动导出告警。
定制告警列|在图1中，单击按钮，可以自定义告警列项。
##### 按告警级别查询 
摘要 : 
通过告警级别查询当前告警。 
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
单击告警主页面右上方的告警灯图标，如[图1]所示，在下拉菜单中选择告警级别，按告警级别（严重、主要、次要和警告）分类查询。
图1  单击告警灯
例如，选择严重告警，查询结果如[图2]所示。
图2  查询结果
##### 按已有条件查询 
摘要 : 
通过已有查询条件查询当前告警。系统提供三种默认查询条件：告警监控、最近一天和最近两天。用户自定义的查询保存后，也会在查询条件的选项中显示。
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
在告警监控栏，单击条件模板按钮，打开条件模板页面，如[图1]所示。
图1  选择条件模板
选择已存在的条件模板，按已有条件查询告警，如[图2]所示。图2  按查询条件查询
#### 查询历史告警 
摘要ElasticNet UME提供历史告警高级筛选过滤查询功能（支持按网元类型、位置、告警类型、清除类型、告警码、发生时间、确认时间、清除时间、确认状态、确认用户、根源/衍生告警、注释、可见性等筛选过滤）和排序。并提供历史告警确认、注释、刷新、导出等功能。维护人员可以通过多种方式查询历史告警。 
##### 按自定义条件查询 
摘要 : 
通过自定义查询条件，查询存放在历史告警库中的告警。 
步骤 : 
在告警管理页面，选择菜单历史告警→告警查询
。
单击高级筛选按钮，打开告警筛选条件设置页面，如[图1]所示。
图1  高级筛选
参见[表1]设置查询的条件，根据需要选择设置一个或多个条件。
设置条件|说明
---|---
资源|按资源对象或者资源类型过滤告警。|资源
告警码|在搜索栏输入告警码或告警码名称来查找到要选择的告警码。单击小箭头，选中的告警码从待选项框进入已选项框。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|时区|设置告警查询的时区条件。可以选择网元时区或者客户端时区。
发生时间|时间条件|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
服务端时间|时间条件|告警在网管侧入库时间。
改变时间|时间条件|网元上报更新消息所携带的时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|包括严重、主要、次要、警告4个级别。
根源衍生告警|其他条件|勾选根源告警、衍生告警中的一个或两个。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|告警清除的条件，可以需要选择。
确认用户|其他条件|输入确认告警的用户名。
对象原始流水号|其他条件|系统生成的流水号。
注释|其他条件|输入注释内容。
告警原因|其他条件|告警产生的原因。
按关联网元查询|其他条件|是否按关联的网元查询告警。
更多条件|网元虚拟化网元标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
排序规则|排序列|选择排序列方式，包含有清除时间、发生时间、告警级别、告警类型、告警码。
排序方式|排序规则|勾选降序或升序。
单击查询按钮，开始查询。
##### 按已有条件查询 
摘要 : 
通过已有的查询条件，查询存放在历史告警库中的告警。系统提供三种默认查询条件：所有、最近一天和最近两天。用户自定义的查询保存后，也会显示在查询条件的选项中。
步骤 : 
在告警管理页面，选择菜单历史告警→告警查询
。
单击页面右上方的查询条件按钮。在下拉菜单中选择查询条件，如[图1]所示，开始查询。
图1  选择查询条件
#### 查询通知 
##### 查询通知信息 
摘要 : 
维护人员按自定义查询条件查询已经上报的通知信息。 
步骤 : 
在告警管理页面，选择菜单通知→通知查询
，打开通知查询页面。
单击高级筛选按钮，打开高级查询设置页面。
参见[表1]设置查询条件。
设置条件|说明
---|---
资源|按资源对象或者资源类型过滤通知。|资源
通知码|在搜索栏输入通知码或通知码名称来查找到要选择的通知码。单击小箭头，选中的告警码从待选项框进入已选项框。开启排除模式按钮，选择的结果为已选项的反集。|通知码
时间条件|时区|设置告警查询的时区条件。可以选择网元时区或者客户端时区。
发生时间|时间条件|网元侧通知产生时间。
更多条件|网元虚拟化标识|可选物理网元、虚拟网元或者全选。
单击查询按钮。
相关任务 : 
在通知查询页面，维护人员也可以通过已有的查询条件查询通知信息，方法如下：
在通知查询页面右上角，单击查询条件按钮。
在下拉菜单中选择需要的查询条件，如[图1]所示。
图1  按条件查询通知
##### 监控通知信息 
摘要 : 
通知监控可以实时查看通知信息，并可导出通知信息。 
步骤 : 
在告警管理页面，选择菜单通知→通知监控
，打开通知监控页面，如[图1]所示。
图1  通知监控
单击按钮，可以查看通知的详细信息，以及处理建议，如[图2]所示。
图2  详情
相关任务 : 
任务|操作
---|---
查看最新通知|在图1中，单击刷新按钮，系统产生的通知全部显示在列表中，按照最近的时间顺序从上到下排序显示。
清除通知|在图1中，单击清空表格按钮，删除页面显示的所有通知信息。
导出通知|导出已选通知在图1中，在通知列表中选中需要导出的通知，单击导出→导出已选，通知信息以文件方式保存到本地。导出全部通知在图1中，单击导出→导出全部，通知信息以文件方式保存到本地。
#### 查看告警详情 
摘要 : 
查看当前告警、历史告警的详细信息、处理建议，活跃期告警轨迹和相关规则。 
步骤 : 
根据需要，打开相应页面。
如果...|那么...
---|---
查看当前告警详情|在告警管理页面，选择菜单当前告警→告警监控，打开告警监控页面。
查看历史告警详情|在告警管理页面，选择菜单历史告警→告警查询，打开告警查询页面。
单击告警所在行的详情按钮，如[图1]所示。图1  查看告警详情
在打开的页面中查看该告警的详情和处理建议，如[图2]所示。图2  告警详情
选择活跃期告警轨迹页签，查看告警的变化记录，如[图3]所示。图3  活跃期告警轨迹
选择相关规则页签，查看告警相关规则。
#### 查看告警提示 
摘要 : 
当前告警监控是按照告警发生时间降序排列的，因此在告警数量比较多的场景下，用户当前重点关注的告警信息，可能会被推到下一页，不方便查看。 
告警提示功能给用户提供定制策略，可定制重点关注重要告警。定制后，当这些告警产生或状态发生变化时，则会在当前告警监控界面呈现的同时，还会在告警提示页面上呈现。 
告警提示页面是实现告警提示功能的一种提示方式，在告警提示页面中的告警表格中展示了满足提示规则的告警列表。 
 说明： 
告警提示的实时监控表格只显示最近40秒以来新上报的告警，时间以告警的服务器时间为准。 
告警提示列表只显示最多100条告警。 
步骤 : 
定制告警提示策略
在告警管理页面，选择菜单告警设置→其他设置
，切换到提示设置页签，如[图1]所示。
图1  告警提示设置
单击新建按钮，创建告警提示策略。具体操作参考[设置告警提示]。
查看告警提示
在告警管理页面，选择菜单当前告警→告警提示
，查看相关告警信息，如[图2]所示。
图2  告警提示
#### 查看当前告警统计 
摘要 : 
通过统计当前告警的相关统计信息（告警数量和百分比），方便维护人员监控当前设备和网络的状态。 
ElasticNet UME系统支持的统计类型：
按网元统计 
按网元类型统计 
按切片统计 
步骤 : 
在告警管理页面，选择菜单当前告警→告警统计
，打开告警统计页面，如[图1]所示。
图1  告警统计图
单击表格按钮，告警的统计信息以表格方式显示，如[图2]所示。
图2  告警统计表
（可选）如果需要保存统计结果，单击按钮，统计结果以文件方式保存到本地。文件格式为.csv/.txt/.xml/.html。如[图3]所示。
图3  导出全部
单击刷新频率下拉框，设置统计数据的刷新频率，如[图4]所示。
图4  刷新频率
#### 查看历史告警统计 
历史告警统计指：按某个属性，对历史告警的平均时长，或告警发生次数进行统计汇总。 
ElasticNet UME系统支持的统计类型：基础统计：对所有符合设定条件的历史告警进行统计。 
忙时统计：只统计业务繁忙时刻的历史告警。 
重要告警码统计：统计符合条件的告警的发生频次。 
故障/故障率频次统计：统计符合条件的故障的发生频次。 
##### 查看基础统计 
摘要 : 
基础统计是对所有符合设定条件的历史告警进行统计。用户可以通过告警码、告警类型或告警级别统计项来设定统计条件。统计结果以表、饼图或者柱状图的形式显示。 
步骤 : 
在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到基础统计页签，如[图1]所示。
图1  基础统计页面
单击查询条件按钮，选择系统预定义或者用户自定义的查询条件，如[图2]所示。
图2  查询条件
查询条件选好后，统计结果自动显示。 
（可选）单击表格、环状图、柱状图按钮，切换统计结果显示形式。
相关任务 : 
任务|操作
---|---
修改统计查询条件|单击查询条件下拉框，选择一个查询条件，如告警码Top5。单击修改按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
新建统计查询条件|单击新建按钮。在弹出的页面设置相关参数，参考表1。设置完成后，单击统计按钮。
保存统计数据|单击导出全部按钮，基础统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
恢复默认统计查询条件|单击默认按钮，恢复系统默认查询条件（告警码Top5）。
参数|说明
---|---
基本信息|名称|设置基础统计模板的名称。
动作|统计行|设置行的统计项。维度一：告警码、告警类型、级别、网元、网元类型、时间（小时/日期/周，统计的是服务端的时间）。维度二：告警码、告警类型、级别、网元。维度二的选项与维度一相关，确定维度一的统计项后，维度二的可选项根据维度一自动调整显示。
统计列|动作|设置列的统计项。
最大显示条数|动作|设置最大显示条数，范围：5-500。
资源|按资源对象或者资源类型统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|勾选一个或多个告警级别，包括：严重、主要、次要和警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|勾选需要的清除类型。
确认用户|其他条件|输入确认告警的用户名。
注释|其他条件|备注定时输出信息。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
##### 查看忙时统计 
摘要 : 
用户在某种业务范围内或某些时段，会比较关注历史告警的平均时长，或者历史告警发生次数。忙时统计就是用来统计业务繁忙时刻的历史告警。 
用户可以通过设置告警的平均时长或告警频次，来统计告警。 
步骤 : 
在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到忙时统计页签，如[图1]所示。
图1  历史告警忙时统计列表
单击查询条件按钮，选择系统预定义或者用户自定义的查询条件，如[图2]所示。
图2  查询条件
查询条件选好后，统计结果自动显示。 
（可选）单击表格、环状图、柱状图按钮，切换统计结果显示形式。
相关任务 : 
任务|操作
---|---
修改统计查询条件|单击查询条件下拉框，选择一个查询条件，如告警频次。单击修改按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
新建统计查询条件|单击新建按钮。在弹出的页面设置相关参数，参考表1。设置完成后，单击统计按钮。
保存统计数据|单击导出全部按钮，忙时统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
恢复默认统计查询条件|单击默认按钮，恢复系统默认查询条件（告警频次）。
参数|说明
---|---
基本信息|名称|设置忙时统计模板的名称。
动作|统计类型|包括：告警频次、平均时长。
有效时段|动作|设置统计时间范围。
显示设置|动作|设置显示设置为全部或最大显示条数。
资源|按资源对象或者资源类型统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|勾选一个或多个告警级别，包括：严重、主要、次要和警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|勾选需要的清除类型。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
##### 查看重要告警码统计 
摘要 : 
本节介绍如何设置统计条件，对指定的告警码、按照指定的时间段内发生的频次进行统计。 
步骤 : 
在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到重要告警码统计页签，参考[表1]设置统计参数。
参数|说明
---|---
资源|按资源对象统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。|告警码
时间条件|发生时间|网元侧告警产生时间。
持续时间|时间条件|告警持续存在时间。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
单击统计按钮，统计结果显示在列表中，如[图1]所示。
图1  重要告警码统计列表
相关任务 : 
任务|操作
---|---
修改统计查询条件|在图1中，单击 按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
保存统计数据|单击导出全部按钮，重要告警码统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
##### 查看故障/故障频次统计 
摘要 : 
故障/故障率频次统计是指统计分析全网或部分网元故障率和故障次数，并输出报表。本节介绍如何设置相关的查询条件，统计每个月符合条件的告警故障次数和故障率数据。 
步骤 : 
在告警管理页面，选择菜单历史告警→告警统计
，打开告警统计页面。
切换到故障/故障频次统计页签，参考[表1]设置统计查询条件。
参数|说明
---|---
资源|按资源对象或者资源类型统计告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
清除时间|时间条件|网元侧告警清除时间。
确认时间|时间条件|网元侧告警确认时间。
持续时间|时间条件|告警持续存在时间。
其他条件|确认状态|勾选一个或多个状态。
告警级别|其他条件|勾选一个或多个告警级别，有严重、主要、次要和警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选需要的告警类型。
清除类型|其他条件|勾选需要的清除类型。
确认用户|其他条件|输入确认告警的用户名。
注释|其他条件|备注定时输出信息。
更多条件|网元虚拟化标识|选项包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
单击统计按钮，页面会显示统计结果，如[图1]所示。
图1  故障/故障频次统计列表
相关任务 : 
任务|操作
---|---
修改统计查询条件|在图1中，单击 按钮。在弹出的页面修改相关参数，参考表1。修改完成，单击统计按钮。
保存统计数据|单击导出全部按钮，故障/故障率频次统计结果以文件形式保存到本地。文件格式：.csv/.txt/.xml/.html。
### 告警处理 
#### 确认告警 
摘要 : 
确认告警表示某条告警由当前用户跟踪处理，其他用户不需太多关注。确认后告警状态变成已确认。
已确认的告警若需要取消，则执行反确认操作。反确认后告警状态变成未确认。
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
勾选当前页面显示的告警，可选择一个或多个，如[图1]所示。单击按扭，确认选中的告警。被确认的告警状态变成已确认。图1  勾选要处理的告警
#### 自定义告警处理建议 
对于告警处理的建议，维护人员可以自定义。 
在ElasticNet UME系统，可以通过以下两个途径之一自定义告警处理。
集中自定义：批量对告警处理建议进行自定义。 
单个自定义：查看到某个告警时自定义其处理建议。 
##### 集中自定义处理建议 
摘要 : 
本节介绍如何在自定义处理建议页面补充告警的自定义处理建议。
步骤 : 
在告警管理页面，选择菜单告警设置→处理建议设置
，打开处理建议设置页面。
在搜索框中输入告警码或告警码名称，选择目标告警码，选中的告警码的默认处理建议会显示出来，如[图1]所示。图1  自定义处理建议页面
在自定义处理建议文本框中输入自定义的处理建议内容。
单击保存按钮。
（可选）若要恢复默认处理建议，单击重置按钮。
##### 单个自定义处理建议 
摘要 : 
本节介绍如何在查看某个告警码的详情时，补充该告警的自定义处理建议。 
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
对于一个告警，单击所在行的详情按钮。查看默认的处理建议，如[图1]所示。图1  处理建议
在自定义处理建议文本框中输入自定义的处理建议内容。
单击保存按钮。
（可选）若要恢复默认处理建议，单击重置按钮。
#### 清除告警 
摘要 : 
故障排除后告警无法自动清除时，需要维护人员手动清除告警。 
 说明： 
手动清除告警前，需要确认： 
告警无法自动清除。 
已确认网元不存在该告警。 
已确认ElasticNet UME上不存在该告警。 
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
根据需要进行操作。
如果...|那么...
---|---
清除单个告警|单击该告警所在行的按钮。
清除多个告警|勾选多个告警，单击按钮。
在弹出的确认清除选中告警的对话框中，单击清除按钮。
#### 前转告警 
摘要 : 
维护人员可以设置告警前转规则来自动将符合条件的告警前转到指定的联系人。也可以在处理告警时，手动将一条告警前转到指定的联系人（邮件/短信通知用户）。 
本节介绍手动前转告警的操作方法。 
 说明： 
为了实现告警前转功能，需要预先完成系统的前转配置，包括邮件前转配置和短信前转配置。
前转配置的具体操作可参见前转配置
。
前提 : 
已经在系统→安全→用户管理 中，预先配置好前转用户的邮件地址和电话号码。 
已经在系统→配置中心→系统配置→前转配置→邮件/短信前转配置中完成邮件服务器/短信中心的前转配置。 
步骤 : 
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。
参见[查询当前告警]，查找到要处理的告警。
单击待前转告警所在行的按钮，选择前转按钮，如[图1]所示。图1  设置告警前转
在如[图2]所示页面，参考[表1]设置前转的相关信息。
图2  前转设置窗口
如果...|那么...
---|---
邮件前转|选择一个或多个需发送的联系人。设置邮件前转的邮件标题和邮件内容。
短信前转|选择一个或多个需发送的联系人。设置短信前转的内容。
设置完成，单击确定。
### 管理告警和通知 
#### 同步当前告警 
摘要 : 
由于网络中断等原因，可能造成ElasticNet UME的告警数据与网元告警数据不一致。通过手动同步操作，可以将选中网元的当前告警数据同步到ElasticNet UME。
步骤 : 
在告警管理页面，选择菜单当前告警→告警同步
，打开告警同步页面，如[图1]所示。图1  告警同步
根据需要，要进行网元同步操作。 
如果...|那么...
---|---
同步全网元|单击全网同步按钮，完成全网元同步操作。
同步已选网元|勾选需同步的网元，单击同步按钮，完成所选网元同步操作。
查看同步结果，如[图2]所示。图2  同步结果
#### 导出告警 
##### 手动导出告警 
摘要 : 
可以将当前告警或者历史告警导出到指定类型的文件中，方便通过文件查看告警。 
步骤 : 
根据需要，进入对应页面。 
如果...|那么...
---|---
导出当前告警|在告警管理页面，选择菜单当前告警→告警监控，打开告警监控页面。
导出历史告警|在告警管理页面，选择菜单历史告警→告警查询，打开告警查询页面。
单击导出→导出已选
，则导出选中的告警。单击导出→导出全部
，则导出所有的告警。如[图1]所示。图1  导出
在弹出的对话框中，设置文件名和文件类型，类型可以是.csv/.txt/.xml/.html，如[图2]所示。
图2  设置导出告警文件类型
单击确定按钮，文件会以zip包的形式下载到本地。
##### 定时导出当前告警 
摘要 : 
定时导出功能指ElasticNet UME定期导出符合条件的当前告警，保存为文件，并支持将文件上传至指定的FTP/SFTP服务器。
步骤 : 
在告警管理页面，选择菜单当前告警→定时导出
，打开定时导出页面。
单击新建按钮，打开创建定时导出任务页面。
参考[表1]，设置定时导出参数。
参数|说明
---|---
基本信息|名称|设置定时导出任务名。
描述|基本信息|简要描述任务相关信息。
激活|基本信息|设置任务创建后的状态，默认：激活状态。
导出格式|基本信息|导出数据保存的文件格式类型，包括.csv、.txt、.xml、.html、xlsx。
导出策略|基本信息|设置导出的是增量数据还是全量数据。
高级设置|启用第三方FTP|设置是否启用第三方FTP服务器来保存输出的文件。是：表示将文件保存到第三方服务器。需要设置第三方FTP服务器的IP、文件路径、端口、用户名和密码，单击测试连接来测试ElasticNet UME是否能正常连接到此第三方服务器。否：表示使用默认服务器。
周期设置|高级设置|设置定时导出的时间周期。包括：分钟、小时、天。
执行时间|高级设置|当任务周期为天时，需要设置任务执行的具体时间（服务端时间）。
资源|按资源对象或者资源类型定时输出告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
确认时间|时间条件|网元侧告警确认时间。
其他条件|确认状态|勾选确认状态：已确认、未确认。
可见性|其他条件|设置定时导出当前告警时，才有此参数。
告警级别|其他条件|勾选一种或多种告警级别：严重、主要、次要、警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选一个或多个告警类型。
确认用户|其他条件|输入用户名称。
注释|其他条件|备注定时输出信息。
更多条件|网元虚拟化标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调试、新建3种工程状态。
参数设置完成后，单击新建，完成创建定时导出任务，定时任务列表如[图1]所示。
图1  定时导出
相关任务 : 
任务|操作
---|---
激活定时导出任务|激活单个任务：单击任务所在行的激活按钮。激活多个任务：勾选多个任务，单击列表上方的激活按钮。
暂停定时导出任务|暂停单个任务：单击任务所在行的挂起按钮。暂停多个任务：勾选多个任务，单击列表上方的挂起按钮。
删除定时导出任务|删除单个任务：单击任务所在行的删除按钮。删除多个任务：勾选多个任务，单击列表上方的删除按钮。
查看定时导出任务执行日志|单击一个任务所在行的日志按钮，显示该任务执行的日志信息，如图2所示。单击任务文件名，定时导出的告警信息以表格形式下载到本地，可以直接打开查看。
图2  日志
##### 定时导出历史告警 
摘要 : 
定时导出功能指ElasticNet UME定期导出符合条件的历史告警，保存为文件，并支持将文件上传至指定的FTP/SFTP服务器。
步骤 : 
在告警管理页面，选择菜单历史告警→定时导出
，打开定时导出页面。
单击新建按钮，打开创建定时导出任务页面。
参考[表1]，设置定时导出参数。
参数|说明
---|---
基本信息|名称|设置定时导出任务名。
描述|基本信息|简要描述任务相关信息。
激活|基本信息|设置任务创建后的状态，默认：激活状态。
导出格式|基本信息|导出数据保存的文件格式类型，包括.csv、.txt、.xml、.html、xlsx。
高级筛选|启用第三方FTP|设置是否启用第三方FTP服务器来保存输出的文件。是：表示将文件保存到第三方服务器。需要设置第三方FTP服务器的IP、文件路径、端口、用户名和密码，单击测试连接来测试ElasticNet UME是否能正常连接到此第三方服务器。否：表示使用默认服务器。
周期设置|高级筛选|设置定时导出的时间周期。包括：分钟、小时、天。
执行时间|高级筛选|当任务周期为天时，需要设置任务执行的具体时间（服务端时间）。
资源|按资源对象或者资源类型定时输出告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
确认时间|时间条件|网元侧告警确认时间。
清除时间|时间条件|网元侧告警清除时间。定时导出历史告警时，需要设置此参数。
其他条件|确认状态|勾选确认状态：已确认、未确认。
告警级别|其他条件|勾选一种或多种告警级别：严重、主要、次要、警告。
根源衍生告警|其他条件|勾选包含根源衍生告警：根源告警、衍生告警。根源告警是故障或异常事件直接引发的告警。衍生告警是由根源告警衍生出的告警。
告警类型|其他条件|勾选一个或多个告警类型。
清除类型|其他条件|勾选一个或多个清除类型。定时导出历史告警时，需要设置此参数。
确认用户|其他条件|输入用户名称。
注释|其他条件|备注定时输出信息。
按关联网元查询|其他条件|是否按关联的网元查询告警。
更多条件|网元虚拟化标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
工程状态|更多条件|包括普通、调试、新建3种工程状态。
参数设置完成后，单击新建，完成创建定时导出任务，定时任务列表如[图1]所示。
图1  定时导出
相关任务 : 
任务|操作
---|---
激活定时导出任务|激活单个任务：单击任务所在行的激活按钮。激活多个任务：勾选多个任务，单击列表上方的激活按钮。
暂停定时导出任务|暂停单个任务：单击任务所在行的挂起按钮。暂停多个任务：勾选多个任务，单击列表上方的挂起按钮。
删除定时导出任务|删除单个任务：单击任务所在行的删除按钮。删除多个任务：勾选多个任务，单击列表上方的删除按钮。
查看定时导出任务执行日志|单击一个任务所在行的日志按钮，显示该任务执行的日志信息，如图2所示。单击任务文件名，定时导出的告警信息以表格形式下载到本地，可以直接打开查看。
图2  日志
#### 手动导出通知 
摘要 : 
手动导出当前通知或者历史通知，方便通过文件查看通知。 
步骤 : 
根据需要，进入对应页面。 
如果...|那么...
---|---
导出当前通知|在告警管理页面，选择菜单通知→通知监控，打开通知监控页面。
导出历史通知|在告警管理页面，选择菜单通知→通知查询，打开通知查询页面。
选中需要导出的通知，单击导出按钮，选择导出已选；或者直接单击导出按钮，选择导出全部。
设置保存的文件名和文件类型，如[图1]所示，类型可以是.csv/.txt/.xml/.html。图1  保存文件
单击确定按钮，文件会以zip包的形式下载到本地。
#### 定时导出历史统计数据 
摘要 : 
定时统计任务指通过创建定时统计任务，使用历史告警数据的基础统计查询模板，把统计结果输出到指定的目录下。 
定时统计支持三种执行计划：按天执行、按周执行、按月执行。一个定时统计任务一天只能执行一次。 
步骤 : 
在告警管理页面，选择菜单历史告警→定时统计
，打开定时统计页面，如[图1]所示。
图1  定时统计
单击新建按钮，创建定时统计任务计划，如[图2]所示。
图2  新建定时统计
参考[表1]，设置定时统计任务执行的相关参数。
参数|说明
---|---
任务信息|名称|定时统计任务的名称。
任务时间|任务信息|定时任务执行的时间区段。
模板名称|任务信息|下拉框选择历史告警数据基础统计的查询条件模板。创建查询模板参考查看基础统计。
激活|任务信息|任务创建后的状态。默认：激活。
高级筛选|启用第三方FTP|历史告警的定时统计任务结果需要放到第三方FTP服务器，则开启此选项。根据对接的FTP服务器，配置相关参数。
执行计划|每天：设置每天几点执行任务。每周：设置周几执行任务，并指定具体时间点。每月：设置每月第几天执行任务，并指定具体时间点。|执行计划
单击新建按钮，完成定时统计任务创建，任务显示在列表中，如[图3]所示。
图3  定时统计任务创建完成
相关任务 : 
任务|操作
---|---
激活任务|激活单个任务：单击任务所在行的激活按钮。激活多个任务：勾选多个任务，单击列表上方的已激活按钮。
暂停任务|暂停单个任务：单击任务所在行的挂起按钮。暂停多个任务：勾选多个任务，单击列表上方的挂起按钮。
修改任务|单击状态为已暂停的任务所在行的修改按钮，参考表1重新修改相关参数。
删除任务|删除单个任务：单击任务所在行的删除按钮。删除多个任务：勾选多个任务，单击列表上方的删除按钮。
查看任务执行日志|单击一个任务所在行的日志按钮，显示该任务执行的日志信息，页面如图4所示。单击日志生成的文件名，统计结果以.csv文件保存到本地，可以直接打开查看。
图4  定统计任务日志
### 告警设置 
#### 设置告警属性 
##### 重定义告警级别 
摘要 : 
系统初始化时设置了每条告警的默认告警级别。级别重定义设置的功能就是在系统运行过程中，根据不同的业务需求和实际环境修改告警级别，以引起重点关注。 
 小心！ 
告警级别重定义可能会影响业务，谨慎操作。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，打开其他设置页面，如[图1]所示。
图1  级别重定义
在级别重定义页签，单击资源类型的下拉框，选择要修改的告警，如[图2]所示。
图2  选择资源类型
选好重定义的告警后，单击重定义级别列的下拉框，选择新级别，如[图3]所示。
图3  重定义告警级别
单击保存按钮。
##### 设置告警提示的声音和颜色 
摘要 : 
通过定制不同级别告警的提示声音和显示颜色，提醒用户及时关注系统发生的故障或事件。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到声音颜色设置页签，如[图1]所示。
图1  声音颜色设置
在声音设置行中，单击告警级别下默认.wav按钮，弹出打开窗口。选择本地要上传的音频文件。
（可选）单击重置按钮，恢复系统默认的声音设置。
单击声音设置行的关闭声音或开启声音按钮，可以开启和关闭告警级别声音提示。
在颜色设置行中，单击级别的缺省色块，打开颜色选择器，如[图2]所示。
图2  设置级别颜色
在颜色选择器中选取需要的颜色，单击页面空白处，完成自定义颜色选择，如[图3]所示。
图3  设置颜色
（可选）单击重置按钮，恢复系统默认的颜色设置。
##### 定制告警码 
摘要 : 
在创建自定义的性能指标时，对告警码的定制可以为该指标设定一个自定义的告警级别。根据不同的网元或网元类型设置自定义的告警级别。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到告警码定制页签，如[图1]所示。图1  告警码定制
单击资源类型后的选择框，选择资源类型以便于快速定位到要修改的告警码。
单击要修改的告警码对应的修改按钮，打开自定义告警码级别页面，如[图2]所示。图2  自定义告警码级别
单击自定义告警码级别下拉框选择一个告警级别。
在自定义告警码名称文本框中输入新的名称。
单击确认按钮。
##### 设置告警提示 
摘要 : 
用户可以针对需要重点关注的告警设置提示任务。设置告警提示后，当这些告警产生或状态发生变化时，告警信息会在当前告警→告警监控
页面和当前告警→告警提示
页面同时呈现。
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到提示设置页签，如[图1]所示。
图1  提示设置
单击新建按钮，打开新建告警提示页面。
参考[表1]，设置告警提示任务参数。
参数|说明
---|---
基本信息|名称|设置告警提示任务名。新建告警提示任务时，不允许和现有的告警提示任务名称重复。
描述|基本信息|简要描述告警提示任务相关说明。
激活|基本信息|告警提示任务创建后的状态，默认：激活。
资源|按资源对象或者资源类型定时输出告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
其他条件|告警级别|包括：严重、主要、次要、警告。支持全选。
告警类型|其他条件|下拉框勾选需要的告警类型。
更多条件|网元虚拟化标识|包括全部、物理网元、虚拟网元。
工程状态|更多条件|包括普通、调测、新建3种工程状态。支持全选。
单击新建按钮，完成告警提示设置，如[图2]所示。
图2  新建提示完成
相关任务 : 
任务|操作
---|---
激活告警提示任务|勾选要激活的告警提示任务。单击激活按钮。
暂停告警提示任务|勾选要暂停的告警提示任务。单击挂起按钮。
删除告警提示任务|勾选要删除的告警提示任务。单击删除按钮。
修改告警提示任务|单击要修改的告警提示任务所在行的挂起按钮。单击要修改的告警提示任务所在行的修改按钮，在弹出的页面中修改告警提示任务的相关参数。修改完成，单击修改按钮保存修改。
##### 设置前转模板 
摘要 : 
设置告警前转至邮箱或者手机的内容模板，即前转给邮箱或手机的消息格式。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到前转模板设置页签，如[图1]所示。图1  前转模板设置
在邮件的标题栏和内容栏输入模板内容。在短信的内容栏输入内容。
（可选）单击默认按钮，恢复系统默认模板。
单击校验按钮。若校验通过，文本框后有标记，如[图2]所示。
图2  校验通过
单击保存按钮。
##### 设置历史告警自动确认 
摘要 : 
设置自动确认任务后，在设置的时间前的历史告警会自动确认。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到确认任务设置页签，如[图1]所示。
图1  确认任务设置页面
单击设置按钮，设置自动确认历史告警的天数，如[图2]所示。
图2  设置自动确认天数
单击确定按钮。
##### 设置自动同步任务 
摘要 : 
由于网络中断等原因，可能造成ElasticNet UME告警数据与网元告警数据不一致。通过设置告警同步方式，可以将选中网元的当前告警数据自动同步到ElasticNet UME。
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到同步设置页签，如[图1]所示。
图1  同步设置
参考[表1]，设置同步周期和激活自动同步设置。
参数|说明
---|---
同步周期设置|设置每多长时间同步一次。同步周期以天、时为单位。
自动同步设置|设置是否开启自动同步。
单击保存按钮，完成同步设置。
##### 设置锁定告警 
摘要 : 
处于清除状态的未确认的告警，称为锁定告警。锁定告警保留在当前告警列表中，有相应锁定图标显示。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到锁定告警设置页签，如[图1]所示。
图1  锁定告警设置
参考[表1]，选择选择是否锁定告警。
参数|说明
---|---
已清除的告警直接进入历史告警库|不锁定告警，已清除的告警进入历史告警库。
已清除未确认的告警作为当前告警|锁定告警，已清除未确认的告警保留在当前告警中，有相应的锁定图标显示。
自动确认|设置是否需要自动确认锁定告警。
单击保存按钮。
##### 设置列定制模板 
摘要 : 
本节主要介绍如何设置定制列模板。 
步骤 : 
在告警管理页面，选择菜单告警设置→其他设置
，切换到列定制模板设置页签，如[图1]所示。
图1  设置列定制模板页面
单击新建按钮，打开新建列定制模板页面，如[图2]所示。
图2  新建列定制模板页面
参考[表1]，设置列定制任务参数。
参数名称|参数说明
---|---
模板名称|自定义模板名称。
模板类型|在下拉菜单中选择模板类型：当前告警历史告警通知
列定制|勾选需要定制的列名。
单击新建按钮，完成列定制模板设置。
相关任务 : 
任务|操作
---|---
修改列定制模板|单击要修改的列定制模板所在行的修改按钮，在弹出的页面中修改列定制模板任务的相关参数。修改完成，单击修改按钮保存修改。注：系统默认模板不可进行修改操作。
设置列定制模板为默认模板|单击要设为默认模板所在行的设为默认模板按钮，此模板即可设为默认模板。
删除列定制模板|单击要删除的列定制模板所在行的删除按钮，在弹出的确认弹框中，单击删除按钮，删除成功。注：系统默认模板不可进行删除操作。
应用列定制模板|以当前告警为例：在告警主页面左侧导航树中，选择当前告警→告警监控，打开告警监控页面。单击按钮，进入列定制页面。单击右上角重置按钮，即可应用列定制模板。
#### 设置告警处理规则 
摘要 : 
告警处理是指当指定的告警或通知满足一定条件时，ElasticNet UME系统将自动触发处理操作。设置告警处理规则，即设置告警触发条件和需要执行的动作，ElasticNet UME按照设置的规则自动对告警进行处理，提高告警处理的效率。
相关信息 : 
ElasticNet UME系统的告警/通知规则多样，每个规则类型的应用说明参见[表1]。
规则类型|应用说明
---|---
显示过滤规则|符合条件的告警会被过滤，即按设定的操作进入当前告警库，不显示在EM系统操作界面上。若告警既满足抑制计划任务（参见“设置告警抑制计划”），又满足显示过滤规则，将直接被抑制计划任务过滤。
告警确认规则|符合条件的告警会被自动确认。
告警清除规则|符合条件的告警会被自动清除。
告警屏蔽规则|符合条件的告警会被自动屏蔽。被屏蔽的告警不再上报，节省网络带宽。
闪断告警规则|在短时间内频繁上报并恢复的告警，符合条件，自动执行指定的操作，如将多条相同的告警合并显示为一条告警。
通知过滤规则|符合条件的通知会被直接丢弃，不显示在EM的操作界面上，也不会保存在数据库。此规则只对新上报的通知生效。
告警前转规则|符合条件的告警上报时或持续一定时间未恢复时，将其通过邮件或手机短信发送到指定人员。
上报过滤规则|当告警上报时，符合条件的告警会被自动过滤丢弃，不上报到EM系统。
告警延迟规则|上报后立即恢复的告警，若符合条件，延迟一段时间后上报。若符合条件的告警在指定时间内恢复，则不显示在EM界面。
告警计时规则|对符合条件的新上报告警的状态进行计时，如果持续时间达到指定的时间，则进行指定的操作。该规则不影响北向。
北向过滤规则|符合条件的告警，在被过滤后将不上报到北向上级管理系统。此规则可能导致北向上级管理系统与EM系统告警不一致。
重复历史告警过滤规则|距最近一条历史告警（包括已被过滤的）一定时间内上报的重复历史告警（发生位置和告警码相同）会被自动过滤丢弃。查询历史告警时可以看到历史告警上报的次数。此规则对新上报的重复历史告警生效。
重复通知过滤规则|距最近一条通知（包括已被过滤的）一定时间内上报的重复通知（发生位置和告警码相同）会被自动过滤丢弃。查询通知时可以看到通知上报的次数。此规则对新上报的重复通知生效。
告警归并规则|告警归并规则用于合并由相同故障引起的告警，并显示其中的一条告警来表示这些告警。该规则不影响北向。
步骤 : 
在告警管理页面，选择菜单告警设置→规则设置
，打开规则设置页面，如[图1]所示。
图1  规则设置
单击新建按钮，打开创建规则页面。
参考[表2]和[表3]，设置规则相关参数和动作。
参数|说明
---|---
基本信息|规则类型|选择一个规则类型，规则类型说明参见表1。
名称|基本信息|设置告警处理规则任务的名称。
描述|基本信息|简要描述规则任务信息。
激活|基本信息|设置规则创建后的状态，默认：激活。
资源|系统自动处理满足资源分类条件的告警。|资源
告警码|在待选项选中告警码，单击，选中的告警码进入右侧的已选项中。开启排除模式按钮，选择的结果为已选项的反集。|告警码
时间条件|发生时间|网元侧告警产生时间。
其他条件|告警级别|勾选一种或多种告警级别：严重、主要、次要、警告。
告警类型|其他条件|勾选一个或多个告警类型。
更多条件|网元虚拟化标识|包括全部、物理网元、虚拟网元。
工程状态|更多条件|包括普通、调测、新建3种工程状态。
规则|动作|说明
---|---|---
告警计时规则|告警持续时间|设置持续时间的阈值，达到此阈值开始执行规则动作。
确认状态|告警计时规则|选择告警确认状态为未确认或已确认。
规则动作|告警计时规则|告警设定的状态持续时长达到设定的值后，告警级别升级或创建新的告警。级别跃迁次要可跃迁到严重或主要；警告可跃迁到次要、主要或严重。创建新告警设置新告警的级别和附加信息。
告警前转规则|联系人|选择前转联系人
前转方式|告警前转规则|选择邮件地址或者电话号码，可多选。
前转周期|告警前转规则|设置前转的频次，包括30分钟、1小时、2小时、3小时。
有效时段|告警前转规则|设置前转哪个时间段内的告警。
重复通知过滤规则|过滤|设置距最近一次通知的重复通知时间，30秒~3600秒。
重复历史告警过滤规则|过滤|设置距最近一次历史告警的重复通知时间，30秒~3600秒。
闪断告警规则|标准|设置在多少条告警在多少分钟内上报，会合并产生一条新告警，并且不显示原有告警。
告警延迟规则|延迟时间|设置延迟时间，10秒~86400秒。
告警归并规则|新告警级别|设置新告警的告警级别，包括严重、主要、次要、警告。
新告警附加文本|告警归并规则|描述新告警内容。
单击新建按钮，新创建的告警规则出现在列表中，如[图2]所示。
图2  新创建告警规则
相关任务 : 
任务|操作
---|---
激活规则|勾选要激活的规则。单击激活按钮。
暂停规则|勾选要暂停的规则。单击挂起按钮。
删除规则|勾选要删除的规则。单击删除按钮。
修改规则|单击要修改的规则所在行的挂起按钮。单击要修改的规则所在行的修改按钮，在弹出的页面中修改规则。修改完成，单击修改按钮保存修改。
#### 设置告警抑制计划 
摘要 : 
抑制计划是对工程割接、倒换等任务期间产生的告警进行抑制管理。在抑制计划任务生效期间，若有满足任务条件的告警上报时，页面会出现一条“抑制计划任务(1023) 
”告警，满足任务条件的告警会被此告警抑制且不会出现在告警页面中。
告警抑制计划任务可以根据设置隐藏这些人工造成的非正常告警，确保告警显示更准确。 
步骤 : 
在告警管理页面，选择菜单告警设置→抑制计划
，打开抑制计划页面，如[图1]所示。
图1  抑制计划页面
单击新建按钮，打开新建抑制计划页面。
参考[表1]设置新建抑制计划的相关参数。
参数|说明
---|---
基本信息|名称|设置抑制计划任务名。新建抑制计划任务时，不允许和现有的抑制计划任务名称重复。
激活|基本信息|设置抑制计划任务创建后的状态，默认：激活。
备注|基本信息|简要描述抑制计划任务相关信息。
联系人|基本信息|为抑制计划设置联系人。
工程任务描述|基本信息|为抑制计划设置工程任务描述信息。
任务周期|基本信息|设置抑制计划任务的开始时间和结束时间。
动作|上报北向|设置抑制计划任务产生的新告警是否上报到北向上级管理系统。
工程状态|动作|包括普通、调测、新建3种工程状态。
资源|设置抑制计划的资源。|资源
更多条件|网元虚拟化标识|包括物理网元、虚拟网元。
S-NSSAI|更多条件|以子切片的维度来导出告警。
任务参数设置完成，单击新建按钮，完成抑制计划的创建，页面如[图2]所示。
图2  计划已创建
相关任务 : 
任务|操作
---|---
暂停抑制计划|勾选要激活的计划。单击激活按钮。
激活抑制计划|勾选要暂停的计划。单击挂起按钮。
删除抑制计划|勾选要删除的计划。单击删除按钮。
修改抑制计划|单击要修改的计划所在行的挂起按钮。单击要修改的计划所在行的修改按钮，在弹出的页面中修改计划。修改完成，单击修改按钮保存修改。
### 告警关联规则管理 
5G的虚拟化垂直架构从下往上包括物理层、虚拟层、业务层三个层次。当底层出现故障时，将影响上层业务。ElasticNet UME系统包含告警根因分析（RCA）模块，可以在多个层面找出根源告警，快速定位故障。
通过新建或导入告警关联规则，系统可以基于拓扑关系把底层设备的告警和同时期的上层业务告警关联起来，以达到根故障识别的目的。 
#### 导入规则包 
摘要 : 
规则包是一类RCA规则的集合，支持RCA规则包的新建、导入和导出功能。
步骤 : 
在告警管理页面，选择菜单规则运行→规则包管理
，打开规则包管理页面，如[图1]所示。
图1  规则包管理
单击导入按钮，在弹出的对话框中选择RCA规则包（仅支持.ura或者.zip格式的文件）。
#### 新建关联规则 
摘要 : 
RCA规则可以由网络运维专家根据经验手工创建，也可以在规则包管理中导入含有RCA规则的规则包（参见“[导入规则包]”）。
前提 : 
已创建该RCA归属的规则包。 
步骤 : 
在告警管理页面，选择菜单规则运行→规则管理
，打开规则管理页面，如[图1]所示。
图1  规则管理
单击新建按钮，打开添加规则页面，如[图2]所示。
图2  新建规则
新建规则页面参数说明参见[表1]。
参数|说明
---|---
基本信息|规则名称|新建RCA规则的名称。
所属规则包|基本信息|新建RCA规则归属的规则包。
启用状态|基本信息|RCA规则新建后默认的状态。
规则内容|规则模板|可以自定义RCA规则内容，也可以选择已有的规则模板。
描述|规则内容|描述根告警和子告警的关联信息。
设置规则参数，以选择规则模板为例（例如“EMS垂直关联告警码精确匹配模板”），页面如[图3]所示。
图3  新建规则示例
单击确定按钮，新建的RCA规则显示在规则管理列表中。
相关任务 : 
任务|操作
---|---
激活规则|选择处于未启用状态的规则，打开启用开关。
修改规则|选择处于未启用状态的规则，单击修改按钮，在打开的页面修改参数列表的值。修改完成，单击确定按钮。
删除规则|选择处于未启用状态的规则，单击删除按钮，在打开的页面修改参数列表的值。修改完成，单击确定按钮。
查询规则日志|在图1中，单击需查询日志的规则所在行操作列中的日志按钮，打开日志查询页面。
#### 查看根告警及其子告警 
摘要 : 
当前告警监控列表或者历史告警中只呈现根告警，子告警显示在根告警的折叠表中。运维人员只需关注根告警，子告警可以不用处理。 
前提 : 
已配置RCA规则，参见“[新建关联规则]”。
步骤 : 
当前告警监控
在告警管理页面，选择菜单当前告警→告警监控
，打开告警监控页面。告警关联列存在根源，表示该条告警有子告警，本条告警为根告警，如[图1]所示。
图1  当前告警监控
单击按钮，查看子告警，如[图2]所示。
图2  根源告警
单击按钮，查看根源衍生关系，如[图3]所示。
图3  根源衍生关系
在操作列选择菜单更多→拓扑
，查看根告警及其子告警信息，以及三层关联拓扑，如[图4]所示。
图4  查看父子告警信息
历史告警查询
在告警管理页面，选择菜单历史告警→告警查询
，打开告警查询页面，如[图5]所示。
图5  历史告警查询
单击根源或者子告警的详情按钮，切换到衍生-根源关系页面，查看该告警相关的根告警或者子告警信息，如[图6]所示。
图6  查看根源和子告警关系
## 缩略语 
## 缩略语 
FTP : 
File Transfer Protocol文件传输协议
IP : 
Internet Protocol因特网协议
### NMS 
Network Management System网络管理系统
### RCA 
Root Cause Analysis根本原因分析
## 性能管理 
### 性能管理概述 
#### 基本概念 
##### 概念关系 
性能管理的要点是性能统计任务和测量结果，通过性能管理为指定的测量对象创建测量任务，并得到测量结果。 
性能管理的基本概念包括测量对象类型、测量对象、测量类型、性能计数器、性能指标、采集粒度、查询粒度、性能测量任务、性能门限任务。 
##### 测量对象类型 
测量对象类型是指具有相同属性的测量对象的类型，例如Diameter链路、路由区。 
##### 测量对象 
测量对象是指具体被测量的物理实体和逻辑实体，如某个NF、某条链路、某个跟踪区。
##### 测量类型 
测量类型可以实现对测量对象的某类指标的测量。一个测量对象类型下可以有多个不同的测量类型，例如路由区测量对象类型下的测量类型有：路由区附着测量、路由区更新测量等。 
##### 性能计数器 
性能计数器指测量类型中所包含的具体测量指标，是性能测量的基本单元。每一种测量类型中包含若干个计数器。一个计数器可以通过如下几个属性来描述。 
计数器ID：性能计数器的唯一标识。 
计数器描述：对性能计数器的解释。 
测量触发点：描述性能计数器的触发过程。 
采集方式：计数器采集数据所使用的方式，其取值参见表1。 
取值|名称|说明
---|---|---
CC|累计|累积计数器跟踪统计周期内某事件的累积变化量，且计数器值单向累加。在每个统计周期开始时，计数器将被重置为一个预先定义的值（通常为0）；在统计周期结束时计数器的值即为有效的采集结果。
MAX|最大值|最大值计数器用来对某事件进行最大值统计，且计数器中仅仅保存最大结果。该类型计数器上报的数据是统计周期内的最大值。
MIN|最小值|最小值计数器用来对某事件进行最小值统计，且计数器中仅仅保存最小结果。该类型计数器上报的数据是统计周期内的最小值。
AVG|平均值|平均值计数器采样连续变化事件的数据值，在统计周期结束时计算并上报平均值。
CUR|当前值|当前值计数器用每次上报事件数据替换计数器中的原有数据，在统计周期结束时上报的结果为最近一次上报事件数据。
##### 性能指标 
性能指标可以作为评价网络运行稳定性及安全性的依据。性能指标是维护人员基于性能计数器通过四则运算而定制的一种复合型计数器，包括用户自定义和系统定义两类。 
用户自定义指标：维护人员根据系统现有的计数器，自行定义四则运算公式，在EM客户端上创建。在创建自定义后，维护人员可以对其进行查看、修改、删除操作。 
系统预定义指标：系统自动定义的指标，维护人员可以在EM客户端上查看，但不允许修改和删除。 
##### 采集粒度 
采集粒度是指网管系统对性能数据进行采集的周期，系统支持的采集粒度有：5分钟、15分钟、30分钟、1小时、1天。 
##### 查询粒度 
查询粒度是指查询测量任务数据的统计周期。维护人员可以设置的查询粒度为5分钟、15分钟、30分钟、1小时、1天、1周、1月。 
 说明： 
查询粒度必须大于或等于对应测量任务中设置的采集粒度。 
##### 性能测量任务 
性能测量任务定义了性能数据的收集、存储和传输方式，以及最终数据的展示结果和处理方法。 
一个性能测量任务规定了何时、对何种测量类型的具体指标、以何种周期采集性能数据。 
维护人员在EM客户端上创建性能测量任务，EM根据任务设定的运行周期自动采集指定的性能参数，得出网络性能的统计结果，使维护人员及时了解网络的运行状态。 
##### 性能门限任务 
性能管理提供的性能QoS任务通常称为性能门限任务，QoS是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。当网络过载或拥塞时，QoS能确保重要业务不受延迟或丢弃，以便保证网络的高效运行。
一个性能门限任务规定了何时、对何种测量类型的具体指标进行门限计算。如果计算结果超过了预设的门限值，将产生性能门限告警，并上报到告警管理系统，提醒维护人员关注网络运行的异常情况。 
实现原理 : 
性能管理涉及的系统主要是EM服务器（例如中兴通讯的ElasticNet UME）、EM客户端和NF，EM客户端采用B/S方式，使用浏览器即可登录到EM服务器。
EM服务器：接收EM客户端操作请求，向NF下发性能测量任务，接收和存储NF上报的性能测量数据，并通过EM客户端展示。EM服务器通过北向接口上报性能测量数据给NMS。 
EM客户端：提供Web页面访问EM服务器，提供性能管理操作界面和结果展示。 
NF：收集呼叫处理信息、信令信息及业务信息，并将这些信息汇总成性能测量任务的结果，上报给EM服务器。 
性能管理总体流程如[图1]所示。
图1  性能管理流程
性能管理总体流程包括测量任务的创建、性能数据入库、性能数据显示以及门限值检查等流程，详细说明如下： 
维护人员通过EM客户端创建性能测量任务，EM服务器将该任务下发到NF。 
NF会按性能测量任务中指定的粒度和其它条件上报性能数据给EM服务器。 
EM服务器保存NF上报的性能数据。 
维护人员通过EM客户端访问EM服务器并查询性能数据，NF的性能数据按照用户的定制查询条件展现在客户端上。 
如果维护人员设置了门限任务，对某个指标设置了门限。当NF上报性能数据时，EM服务器会启动门限判断。如果达到门限，则会上报相应的告警，展现在EM客户端。 
EM服务器通过北向接口，将NF的性能数据提供给上级网管NMS，供北向用户分析。 
#### 性能管理功能 

#### 性能管理功能 
##### 性能指标管理 
性能指标（PI）是基于测量对象的计数器统计，通过对一个或者多个测量对象的计数器进行加、减、乘、除运算得到用户需要的测量指标，可用于门限任务、监控和历史性能数据查询等，支持的数据类型有整型、长整型、浮点型、百分型以及逻辑布尔型。
系统预先定义的性能指标为预定义性能指标，预定义性能指标不支持修改和删除操作。维护人员可根据实际情况，自定义新的性能指标，自定义性能指标支持修改和删除操作。 
##### 测量任务管理 
EM服务器为了采集NF的性能数据，需要在性能管理系统中创建性能测量任务，以便及时获取系统运行时的性能数据。
测量任务管理提供了测量任务的创建、修改、删除、查询、任务同步以及任务运行状态监控等功能。 
测量任务状态具体说明参见[表1]。
测量任务状态|说明
---|---
激活|该测量任务正在运行，EM服务器将会采集指定位置上的指定测量对象在指定时间范围内的性能数据。激活状态的测量任务不可进行修改、删除等操作。
挂起|该测量任务暂时停止数据采集，可通过激活操作恢复数据采集。
##### 性能数据查询 
性能数据查询是日常维护和性能监测的重要操作，维护人员可根据查询的性能数据对系统进行调整和优化。 
维护人员在EM客户端中设置查询条件，EM服务器查询性能数据，并呈现给维护人员。
性能管理系统支持以下几种性能数据查询。 
 
自定义查询性能数据：维护人员通过自定义的条件查询NF性能数据。 
 
按任务查询性能数据：维护人员通过性能测量任务查询与该任务相关的NF性能数据。 
 
按模板查询性能数据：维护人员选择性能数据查询模板，按照模板中设定的条件查询NF性能数据。 
 
##### 性能数据导出 
性能管理功能支持性能查询结果的导出功能，包括手工导出性能测量数据和定时导出性能测量数据两种方式。 
手工导出性能测量数据：当维护人员通过各种方式查询到性能数据时，维护人员通过手工的方式将查询到的性能数据导出为csv、xlsx、html 、pdf文件。 
定时导出性能测量数据：系统支持通过模板创建定时导出任务，定时查询性能测量数据，并将结果自动导出为csv、xlsx、html 、pdf文件。 
##### 性能数据补采 
在异常情况下（如NF与EM服务器通信中断），EM服务器出现性能数据不完整的情况，EM系统的自动补采或者手动补采功能，可以重新对性能数据进行采集。性能数据补采流程如[图1]所示。
图1  性能数据补采流程
性能数据补采流程说明如下： 
EM服务器将性能测量任务下发到被管理的NF。 
当采集周期结束时，NF将测量任务中指定的性能数据上报给EM服务器。 
EM服务器对性能数据进行汇总、存储等操作。 
EM服务器自动判断性能数据是否存在缺失。维护人员也可以通过查询数据的完整性操作，手工检查是否存在数据缺失。 
对于缺失的性能数据，EM服务器自动向NF发起补采请求。维护人员也可以通过补采性能数据操作，手工补采缺失的性能数据。 
NF再次上报EM服务器缺失的性能数据。 
EM服务器按照用户的定制查询条件，将NF的性能数据展现在EM客户端上。 
##### 性能门限告警 
为了方便维护人员监控网络运行状况，及时发现不合理的性能测量指标数据，EM系统提供性能门限告警功能。
维护人员可以针对特定测量任务的具体测量指标设定门限。当该任务指标的测量结果高于或低于设定的门限时，性能管理系统自动向告警系统发送测量任务指标门限告警，以提醒维护人员及时关注该性能指标。维护人员可以根据指标门限告警信息，分析测量值异常的原因并消除此类异常情况。 
EM系统的性能门限告警产生和恢复的流程如[图2]所示。
图2  性能门限告警产生和恢复的流程
性能门限管理功能实现了对测量指标值的监控，如果维护人员设置了门限任务，对某个指标设置了门限，当NF数据上报时，EM服务器会启动门限判断。如果指标值符合触发告警的门限范围，则会上报相应的告警，展现在EM客户端上。如果指标值符合恢复告警的门限范围，则会恢复已经产生的告警。
性能门限告警产生和恢复的流程说明如下： 
采集周期结束时，NF将测量任务中指定的性能数据上报给EM服务器。 
EM服务器检查是否设置了该测量周期指标门限。 
如果设置了门限，EM服务器将NF上报的性能数据与设定的门限进行比对。 
EM服务器判断NF的性能指标值是否达到了告警触发/恢复条件。 
如果NF的性能指标值已经达到了告警触发/恢复条件，EM服务器继续检查当前的系统中是否已经存在该指标的门限告警。 
如果NF性能指标值已经达到了告警触发条件，且当前系统中不存在该指标的门限告警，则产生对应的门限告警；如果NF性能指标值已经达到了告警恢复条件，且当前系统中已存在该指标的门限告警，则产生一条该门限告警清除的消息。 
应用场景 : 
#### 系统初建时的性能管理操作 
当被管理网元接入ElasticNet UME系统后，需要对新接入的网元进行性能测量相关设置，包括测量指标、测量对象、测量周期的设置，确保网元的性能测量结果可以正常上报至ElasticNet UME服务器，供客户端进行查询。
系统初建时的性能管理操作流程如[图1]所示。
图1  系统初建时的性能管理操作流程
步骤|过程|说明|操作参考
---|---|---|---
1|接入下级被管理网元|在拓扑→分层接入页面中，维护人员可以创建下级被管理网元。|分层接入
2|查询性能测量指标|通常情况下，系统预先定义了多种计数器和性能指标。维护人员可以查找需要关注的性能指标。|查询性能指标
3|分析该性能指标所属的测量对象类型|维护人员查找到需要关注的性能指标后，分析该指标所属的测量对象类型。后续创建测量任务时，需要选择该测量对象类型。|查看测量对象
4|创建测量任务|维护人员在ElasticNet UME客户端，创建性能测量任务，设置相关的采集条件，包括网元、测量对象类型、测量指标、采集粒度和采集时间段等。网元根据测量任务设定的条件，自动采集性能数据并上报。|创建测量任务
5|（可选）创建定时导出任务|ElasticNet UME系统支持通过定时任务来自动查询并导出网元的性能数据。系统支持将查询结果导出为多种格式的文件，并支持将查询结果通过电子邮件发送到指定邮箱，或通过FTP协议传送到指定的FTP服务器上。|创建定时导出任务
#### 日常维护时的性能管理操作 
日常维护时，性能测量任务通常已经创建好了，维护人员需要查看性能测量的结果，检查结果数据是否完整。对于查询到的性能测量数据，维护人员可以设置各种图形化的展示方式，并可将其导出为报表文件。 
日常维护时的性能管理操作流程如[图1]所示。
图1  日常维护时的性能管理操作流程
步骤|过程|说明|操作参考
---|---|---|---
1|查询性能测量结果数据|维护人员可以通过如下几种方式查询性能数据：创建历史性能任务查询创建定时导出任务查询|查询历史性能数据
2|查询数据的完整性|维护人员可以查询指定时间段内，网元上报的性能数据是否完整。|检查性能数据完整性
3|补采性能数据|如果性能数据不完整，维护人员可以通过补采数据操作来尝试补采性能数据。|补采性能数据
4|查询数据的完整性|再次检查性能数据是否完整。如果仍然不完整，则需要分析原因（如：是否与网元的链路断？网元上是否存在性能数据？）|检查性能数据完整性
5|保存性能数据查询结果|维护人员可以将查询到的性能数据导出为多种文件格式进⾏保存。|创建定时导出任务
#### 特殊场景下的性能管理操作 
场景说明 : 
系统升级割接、重大节日、定位和处理故障时，维护人员通常需要对某些特定的性能指标进行关注。借助实时监控、门限任务等功能，维护人员可以通过监控任务，分析网元的这些性能指标，了解网络的运行情况。 
特殊场景下的性能管理包括如下几种操作： 
通过实时/历史性能数据监控任务，对网元上报给ElasticNet UME服务器的性能数据进行监控。 
通过性能数据门限任务，当网元上报的性能数据超过设定的门限时，产生性能阈值告警。 
##### 历史性能数据监控 
通过历史性能数据监控任务，维护人员对网元上报给ElasticNet UME服务器的性能数据进行监控。
历史性能数据监控操作流程如[图1]所示。
图1  历史性能数据监控操作流程
步骤|过程|说明|操作参考
---|---|---|---
1|检查系统中是否已经存在所需监控的性能指标|检查需要监控的性能指标（计数器/KPI/PI）是否已经存在。|查询性能指标、查询计数器
2|创建性能测量指标|如果需要监控的性能指标不存在，维护人员可以根据需要自己创建一个KPI/PI指标。|新建性能指标
3|检查是否已为该性能指标对应的性能对象（PO）创建了性能测量任务|历史性能数据监控是基于性能测量任务来采集网元的性能指标的。只有当前的性能测量任务中包含了需要监控的指标，网元才会将该指标的数值上报给ElasticNet UME服务器。|-
4|创建性能测量任务|如果当前的性能测量任务中没有包含所需监控指标所属的PO，维护人员需先创建性能测量任务。|创建测量任务
5|创建历史性能数据监控任务|通过历史性能数据监控任务，可对监控指标值进行查询、计算操作，并显示在客户端上，以便维护人员了解网元性能指标的变化情况。|创建历史监控任务
6|设置监控任务指标阈值|在创建历史性能数据监控任务的过程中，维护人员可以为该性能指标值设定一个阈值。历史性能数据监控指标值高于或低于阈值时，会以不同的颜色填充表格背景色。|性能门限任务管理
7|分析监控数据|网元的监控数据可以以表格或图形的形式显示，供维护人员查询及分析。|查询历史性能数据
8|关闭监控任务|当监控结束后，维护人员可以关闭该监控任务。|-
##### 性能数据门限任务监控 
性能门限任务可以帮助维护人员实时掌握所关心的网络运行和质量状况。维护人员可以预先设置告警的门限值。当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警，及时通知维护人员。 
性能门限任务可以对网元的性能计数器/KPI进行监控。 
性能数据门限任务监控流程如[图2]所示。
图2  性能数据门限任务监控流程
步骤|过程|说明|操作参考
---|---|---|---
1|检查系统中是否已经存在所需监控的性能指标|检查需要关注的性能指标（计数器/KPI）是否已经存在。|查询性能指标
2|创建性能测量指标|如果需要关注的性能指标不存在，维护人员可以根据需要自己创建一个KPI指标。|新建性能指标
3|创建性能门限任务|创建一个性能门限任务，该任务需包含所需关注的性能指标。在创建性能门限任务的同时，系统会自动创建一个相关的性能测量任务，用来采集网元的性能指标值。|性能门限任务管理
4|设置性能指标告警门限值|在创建性能门限任务过程中，维护人员可设置性能指标的门限值。|性能门限任务管理
5|监控性能越界告警|当指标的测量结果超过设置的门限值时，系统会产生相应级别的告警。维护人员可以监控这些告警，以了解网元的性能指标是否超过/低于预期。|-
6|挂起/删除门限任务|当监控任务结束后，维护人员可以挂起或删除门限任务。删除门限任务时，相关的性能测量任务会一并删除。|-
### 性能任务管理 
#### 测量任务管理 
测量任务定义如何收集、存储和传输性能数据，以及最终性能数据的展示内容和处理方式。系统按照一定的任务调度规则和具体的采集粒度收集性能数据，产生测量报告。 
在性能测量任务中，维护人员可以指定需要进行性能测量的网元类型、测量对象类型、性能数据采集粒度以及性能数据采集的时间段。 
##### 创建测量任务 
摘要 : 
本节介绍如何创建测量任务。 
在性能测量任务中，维护人员可以指定需要进行性能测量的网元类型、测量对象类型、性能数据采集粒度以及性能数据采集的时间段。 
测量任务创建完成后，网元会根据测量任务设定的条件，采集相关数据，上报到ElasticNet UME服务器。
步骤 : 
在性能管理页面，选择菜单性能任务→测量任务
，打开测量任务页签，如[图1]所示。
图1  测量任务管理
单击新建，打开新建测量任务页面。输入名称，选择网元类型、测量对象类型和测量族，如[图2]所示。
图2  选择测量族
测量任务页面的参数说明参见[表1]。
参数|说明
---|---
名称|测量任务的名称。
网元类型|选择测量任务归属的网元类型。
测量对象类型|选择网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
测量族|测量对象类型支持的测量类型，如果已经选择了测量对象类型，则下拉列表框仅显示该类型下支持的测量族。一个测量族包含的性能计数器可通过查询计数器进行查看。
单击下一步，切换到选择对象页面，如[图3]所示。
图3  选择对象页面
选择对象页面的参数说明参见[表2]。
参数名称|参数说明
---|---
选择类型|按对象范围：配置对象范围参数，并选择资源。按测量对象模板：配置对象过滤和测量对象模板参数。
对象范围|选择类型选择按对象范围，该参数可见。
对象过滤|选择类型选择按测量对象模板，该参数可见。测量任务包含所有对象选项，包括网元、服务、测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。从预定义的模板中选择，创建测量对象模板参见“ 创建测量对象模板 ”。
单击下一步切换到选择时间页签，设置测量任务的基本信息，如[图4]所示。
图4  选择时间
时间页面的参数说明参见[表3]。
参数|说明
---|---
状态|测量任务创建后默认的状态。
粒度|在粒度下拉菜单后选择查询粒度，包括5分钟、15分钟、30分钟、1小时、1天。例如：选择15分钟，表示以15分钟为单位显示查询结果。
时间范围|自定义选择任务有效时间。
有效时段和日期|有效时段有效时间为：00:00-24:00。每段时间以小时为单位分为24个时间粒度，可以单击选择时间段中的小时时间粒度。有效日期查询的有效日期，包括：按月和按周。勾选中按月：下面列出一个月的所有待选天，可全选，可选择某些天。勾选中按周：下面列出一周的所有天，从周一 ~ 周日，可全选，可单击选择某些天。
单击新建按钮，完成测量任务的新建。新建的测量任务出现在测量任务页签中。
相关任务 : 
将已建立的测量任务作为模板，另存为新的测量任务。 
在[图1]中，选择需要另存的测量任务，单击更多→另存为
，页面如[图5]所示。
图5  另存为测量任务
（可选）如果需要修改相关信息，则修改测量任务的测量类型，对象和时间信息，并单击下一步。
单击新建按钮，完成测量任务另存为新的测量任务。
##### 激活测量任务 
摘要 : 
本节介绍如何激活测量任务。 
对于当前运行状态为未激活的测量任务，如要按照该任务的规则采集性能数据，则需要激活该测量任务。
任务激活后，任务信息会同步到对应的网元设备，网元设备进行性能数据的采集，并将采集的性能数据上传存储到ElasticNet UME服务器的数据库中。
步骤 : 
在性能管理页面，选择菜单性能任务→测量任务
，打开测量任务页签，如[图1]所示。
图1  测量任务
选中状态为未激活的测量任务，在操作列选择更多→激活
。
 说明： 
一次可操作多条测量任务。 
##### 查询测量任务 
摘要 : 
本节介绍如何查询已创建的测量任务的详细信息。 
步骤 : 
在性能管理页面，选择菜单性能任务→测量任务
，已创建的测量任务显示在测量任务列表中，如[图1]所示。
图1  测量任务
选择需要查询的测量任务，单击查询按钮，查询测量任务详情，如[图2]所示。
图2  查询详情
相关任务 : 
 说明： 
只能对处于未激活状态的任务进行修改和删除操作。
任务|操作
---|---
修改测量任务|在已创建的测量任务列表中，选择需要修改的测量任务。单击更多→修改，修改测量任务的测量族，对象和时间信息。修改完毕，单击修改按钮。
删除测量任务|在已创建的测量任务列表中，选择需要删除的测量任务。单击更多→删除，显示删除信息提示框。单击删除按钮，删除测量任务。
##### 同步测量任务 
摘要 : 
本节介绍如何将网管服务器上的测量任务同步到网元。 
当ElasticNet UME服务器和被管理网元设备上的测量任务信息不一致时，同步测量任务可将ElasticNet UME服务器上的测量任务信息同步到相应的网元设备上。
步骤 : 
在性能管理页面，选择菜单性能任务→测量任务
，打开测量任务页面，如[图1]所示。
图1  测量任务
选中需要同步的测量任务，在操作列选择更多→同步
。切换到网元任务页签，查看具体网元的测量任务状态，如[图2]所示。
图2  网元任务
选择需要同步到网元的测量任务，单击同步按钮，提示“同步消息发送成功 
”。
#### 性能门限任务管理 
概述 : 
为了监控网络性能指标的变化趋势，及时发现性能指标的异常变化（如大幅上升或下降等），维护人员可以创建性能门限任务，预先设置告警的门限值。当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警，及时通知维护人员。当网元性能指标回落入阈值范围内时，系统产生越限告警相应的告警清除消息，此时越限告警恢复。 
ElasticNet UME系统支持以下多种类型的性能门限任务：
普通门限任务系统可以同时对一个或多个性能指标/计数器进行监控，预先设置这些计数器的告警的门限值。当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警。 
历史统计对比任务系统可以将当前性能测量值和历史连续N个时段内的性能测量值进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。 
历史同期对比任务系统可以将当前性能测量值和历史连续N个时段内同一时期的性能测量值进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。 
复合条件任务维护人员可以自定义包含有一个或多个性能计数器的逻辑运算表达式，系统会对运算结果进行监控。当逻辑运算结果为True时，会触发相应级别的门限告警。 
 说明： 
在创建门限任务时，需要勾选自动创建测量任务。系统需要通过测量任务，才能实现上报网元性能数据、产生门限告警的功能。
##### 告警阈值说明 
门限任务通过设置上门限/下门限值来确定门限告警触发的条件。
图1  告警门限说明
对于值越大告警级别越严重的指标（例如：CPU占用率），需要设置触发告警的上门限。 
对于值越小告警级别越严重的指标（例如：接通率），需要设置触发告警的下门限。 
对于需要将值保持在合理范围内的指标（例如：环境温度、风扇转速），需要同时设置触发告警的上门限和下门限。 
同时，为了避免指标在告警和告警清除状态间的频繁抖动，维护人员还可以设置粘滞值。
例如，对于值越大告警级别越严重的指标，当指标值超过“上门限+粘滞值”时，系统会触发该等级的告警；而当指标值低于“上门限-粘滞值”时，系统自动清除该等级的告警。
##### 新建普通性能门限任务 
摘要 : 
在普通性能门限任务中，维护人员可以同时对一个或多个性能指标/计数器进行监控，预先设置这些计数器的告警的门限值。 
当网元性能指标超过设置的门限值后，系统会自动产生性能门限越界告警，及时通知维护人员。 
前提 : 
如果监控自定义指标的性能门限越界告警，则该指标需要已创建。自定义监控指标参考[新建性能指标]。
步骤 : 
在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面
单击新建按钮，在基本信息页签，参考[表1]，输入门限任务的名称，并选择网元类型，如[图2]所示。
图2  新建门限任务
参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建普通门限任务。系统支持对同一个测量对象类型下的所有指标/计数器同时进行门限设置。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建普通门限任务。
图3  选择新建普通门限任务
在弹出的新建普通门限任务对话框中，选择需监控的计数器/性能指标，参考[表2]，设置门限任务的基础信息，如[图4]所示。
图4  普通门限任务
参数名称|参数说明
---|---
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
按级别发送告警|当产生性能门限告警时，是否按告警级别发送告警。开启：当性能告警级别发生变更时，会产生一条新的告警。关闭：当性能告警级别发生变更时，更新原有告警。
告警标题|如果不填写，使用默认的告警标题，例如“虚拟机CPU使用率(%)高于二级门限”。
单击新建门限级别，参考[表3]，设置该计数器/指标的门限值，如[图5]所示。
 说明： 
有关上下门限和粘滞值说明，可参见[性能门限任务管理]。
图5  设置普通门限页面
参数|说明
---|---
级别|选择高于/低于门限值时，系统触发的告警级别。
门限|性能指标超出门限后上报该门限的越限告警，当性能指标低于门限后上报该门限的告警恢复。当告警方向向上时，门限上限值设置应遵循以下约束：警告告警门限值+警告告警粘滞值＜次要告警门限值-次要告警粘滞值次要告警门限值+次要告警粘滞值＜主要告警门限值-主要告警粘滞值主要告警门限值+主要告警粘滞值＜严重告警门限值-严重告警粘滞值当告警方向向下时，门限下陷值设置应遵循以下约束：警告告警门限值-警告告警粘滞值＞次要告警门限值+次要告警粘滞值次要告警门限值-次要告警粘滞值＞主要告警门限值+主要告警粘滞值主要告警门限值-主要告警粘滞值＞严重告警门限值+严重告警粘滞值告警门限值的单位与测量项目的单位有关。
粘滞值|为了避免门限的越限告警在告警和告警恢复状态之间频繁抖动，而设定的滞后值。粘滞值为门限设置的上下浮动值，没有特殊要求建议一般情况设置为0。例如严重告警门限为95，粘滞值为2，则严重告警门限高值为97，低值为93。
（可选）如果需要同时监控多个性能指标/计数器，可重复步骤5。 
 说明： 
在一个门限任务中同时监控多个性能指标/计数器时，所选的指标/计数器必须同属一种性能测量类型。 
单击新建。设置的门限值出现在门限设置下方表格中，如[图6]所示。
图6  门限设置结果
单击下一步，切换到选择对象页签，选择需要监控的对象，如[图7]所示。
图7  新建门限任务-对象选择页面
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图8]所示。
图8  选择时间页面
参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图9]所示。
图9  门限任务创建结果
##### 新建历史统计对比任务 
摘要 : 
为了监控网络性能指标的变化趋势，及时发现性能指标的异常变化（如大幅上升或下降等），维护人员可以创建历史统计对比任务，对性能指标的变化增量设置告警阈值。 
在历史统计对比任务中，系统可以将当前性能测量值和和历史连续N个时段内的性能测量值进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。当变化增量回落到阈值范围内时，ElasticNet UME系统会自动清除之前产生越限告警。
前提 : 
如果监控自定义指标的性能门限越界告警，则该指标需要已创建。自定义监控指标参考[新建性能指标]。
步骤 : 
在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面
单击新建按钮，在基本信息页签，参考[表1]，输入门限任务的名称，并选择网元类型，如[图2]所示。
图2  新建门限任务
参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建历史统计对比任务，用于和过去连续N个周期中的数据进行对比，监控数据波动情况，波动超过门限则发生告警。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建历史统计对比任务。
图3  选择新建历史统计对比任务
在弹出的新建历史统计对比任务对话框中，选择需监控的计数器/性能指标，参考[表2]，设置门限任务的基础信息，如[图4]所示。
图4  历史统计对比任务
参数名称|参数说明
---|---
对比时间|可按照分钟/小时/天/周填写相应的时间，系统会统计对应过去所有连续时间粒度的数据。例如：对比时间填写1天，系统会统计昨天此时间到今天此时间24小时所有时间粒度的数据。
数据统计算法|对所选N个历史数据的统计方法，包括：平均：计算N个历史数据的平均值。最大：选择N个历史数据中的最大值。最小：选择N个历史数据中的最小值。
对比方式|对比率：ABS((当前值-历史统计值)/当前值)*100%对比值：当前值-历史统计值
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
按级别发送告警|当产生性能门限告警时，是否按告警级别发送告警。开启：当性能告警级别发生变更时，会产生一条新的告警。关闭：当性能告警级别发生变更时，更新原有告警。
告警标题|自定义的告警标题。如果不填写，系统使用默认的告警标题，例如“虚拟机CPU使用率(%)高于二级门限”。
单击新建门限级别，参考[表3]，设置该计数器/指标门限值，如[图5]所示。
 说明： 
有关上下门限和粘滞值说明，可参见[性能门限任务管理]。
图5  设置告警门限值
参数|说明
---|---
级别|选择高于/低于门限值时，系统触发的告警级别。
门限|性能指标超出门限后上报该门限的越限告警，当性能指标低于门限后上报该门限的告警恢复。当告警方向向上时，门限上限值设置应遵循以下约束：警告告警门限值+警告告警粘滞值＜次要告警门限值-次要告警粘滞值次要告警门限值+次要告警粘滞值＜主要告警门限值-主要告警粘滞值主要告警门限值+主要告警粘滞值＜严重告警门限值-严重告警粘滞值当告警方向向下时，门限下陷值设置应遵循以下约束：警告告警门限值-警告告警粘滞值＞次要告警门限值+次要告警粘滞值次要告警门限值-次要告警粘滞值＞主要告警门限值+主要告警粘滞值主要告警门限值-主要告警粘滞值＞严重告警门限值+严重告警粘滞值告警门限值的单位与测量项目的单位有关。
粘滞值|为了避免门限的越限告警在告警和告警恢复状态之间频繁抖动，而设定的滞后值。粘滞值为门限设置的上下浮动值，没有特殊要求建议一般情况设置为0。例如严重告警门限为95，粘滞值为2，则严重告警门限高值为97，低值为93。
单击新建。设置的门限值出现在门限设置下方表格中，如[图6]所示。
图6  门限设置结果
单击下一步，切换到选择对象页签，选择需要监控的对象，如[图7]所示。
图7  新建门限任务-对象选择页面
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图8]所示。
图8  选择时间页面
参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图9]所示。
图9  门限任务创建结果
##### 新建历史同期对比任务 
摘要 : 
为了监控网络性能指标的变化趋势，及时发现性能指标的异常变化（如大幅上升或下降等），维护人员可以创建历史同期对比任务，对性能指标的变化增量设置告警阈值。 
在历史同期对比任务中，系统可以将网元的当前性能测量数据和连续N个周期中相同时间段的历史性能数据进行对比。当变化增量超过设置的阈值时，会触发相应级别的告警。当变化增量回落到阈值范围内时，ElasticNet UME系统会自动清除之前产生越限告警。
前提 : 
如果监控自定义指标的性能门限越界告警，则该指标需要已创建。自定义监控指标参考[新建性能指标]。
步骤 : 
在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面
单击新建按钮，参考[表1]输入门限任务的名称，并选择管理对象类型，如[图2]所示。
图2  新建门限任务
参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建历史同期对比任务，用于和过去连续N个周期中相同时间段的数据进行对比，监控数据波动情况，波动超过门限则发生告警。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建历史同期对比任务。
图3  选择新建历史同期对比任务
在弹出的新建历史同期对比任务对话框中，选择需监控的计数器/性能指标，并参考[表2]，设置门限任务的基础信息，如[图4]所示。
图4  历史同期对比任务
参数名称|参数说明
---|---
历史数据个数|选择需要对比的历史数据个数，即N的数值。
数据统计算法|对所选N个历史数据的统计方法，包括：平均：计算N个历史数据的平均值。最大：选择N个历史数据中的最大值。最小：选择N个历史数据中的最小值。加权平均：通过系统预定义的加权比重计算N个历史数据的平均值。距离当前时间越近，权重越高；距离当前时间越远，则权重越低。
对比方式|系统提供以下两种对比方式：按天：取最近N个工作日/周末的当前时间粒度的历史数据。需要区分工作日和周末场景，系统默认周一~周五为工作日，周六~周日为周末。例如：假设N为2，粒度为1小时。如果当前时间为周二（工作日）8:00，则系统取本周一、上周五这2天8:00这个时间粒度的历史数据进行统计。如果当前时间为周日（周末）8:00，则系统取本周六、上周日这2天8:00这个时间粒度的历史数据进行统计。按周：取连续N周相同星期当前时间粒度的历史数据。例如：假设N为2，粒度为1小时。如果当前时间为周二8:00，则系统取上周二、上上周二这2天8:00这个时间粒度的历史数据进行统计。
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
按级别发送告警|当产生性能门限告警时，是否按告警级别发送告警。开启：当性能告警级别发生变更时，会产生一条新的告警。关闭：当性能告警级别发生变更时，更新原有告警。
告警标题|如果不填写，使用默认的告警标题，例如“虚拟机CPU使用率(%)高于二级门限”。
单击新建门限级别按钮，参考[表3]，设置该计数器/指标告警门限值，如[图5]所示。
 说明： 
有关上下门限和粘滞值说明，可参见[性能门限任务管理]。
图5  设置告警门限值
参数|说明
---|---
级别|选择高于/低于门限值时，系统触发的告警级别。
门限|设置性能数据变化值的告警门限。当性能数据变化值超出或低于告警上限/下限门限值后，系统上报该门限的越限告警。其中：性能数据变化值=当前性能值-历史经验值。历史经验值由系统根据图4中的设定，对历史同期数据进行计算后得出。如果需要同时设置多个级别的告警门限值时，应遵从如下原则：当性能数据变化值越高，告警越严重时，门限上限值设置应遵循以下约束：警告告警门限值+警告告警粘滞值＜次要告警门限值-次要告警粘滞值次要告警门限值+次要告警粘滞值＜主要告警门限值-主要告警粘滞值主要告警门限值+主要告警粘滞值＜严重告警门限值-严重告警粘滞值当性能数据变化值越低，告警越严重时，门限下限值设置应遵循以下约束：警告告警门限值-警告告警粘滞值＞次要告警门限值+次要告警粘滞值次要告警门限值-次要告警粘滞值＞主要告警门限值+主要告警粘滞值主要告警门限值-主要告警粘滞值＞严重告警门限值+严重告警粘滞值告警门限值的单位与测量项目的单位有关。
粘滞值|为了避免门限的越限告警在告警和告警恢复状态之间频繁抖动，而设定的滞后值。粘滞值为门限设置的上下浮动值，没有特殊要求建议一般情况设置为0。例如严重告警门限为95，粘滞值为2，则严重告警门限高值为97，低值为93。
单击新建。设置的门限值出现在门限设置下方表格中，如[图6]所示。
图6  门限设置结果
单击下一步，切换到选择对象页签，选择需要监控的对象，如[图7]所示。
图7  新建门限任务-对象选择页面
参数|说明
---|---
对象汇总|表示性能数据的汇总规则：网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图8]所示。
图8  选择时间页面
参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图9]所示。
图9  门限任务创建结果
##### 新建复合条件任务 
摘要 : 
在复合条件任务中，维护人员可以自定义包含有一个或多个性能计数器的逻辑运算表达式，系统会对运算结果进行监控。当逻辑运算结果为True时，会触发相应级别的门限告警。 
步骤 : 
在性能管理页面，选择菜单性能任务→门限任务
，进入门限任务页面，如[图1]所示。
图1  门限任务管理页面
单击新建按钮，在基本信息页签，参考[表1]输入门限任务的名称，并选择管理对象类型，如[图2]所示。
图2  新建门限任务
参数名称|参数说明
---|---
名称|用户自定义的门限任务名称。
网元类型|单击下拉菜单选择网元对象类型。
自动创建测量任务|勾选，表示在创建门限任务后，系统自动创建对应的性能测量任务并下发到网元。如未勾选，则维护人员需要对相关测量族手工创建相应的测量任务，才能实现上报性能数据、产生门限告警的功能。
门限设置|选择新建复合条件任务。用户可自定义条件公式，满足多个计数器指标共同决定是否触发告警的场景。
前置条件|在满足前置条件的情况下，执行门限任务。在不满足前置条件的情况下，过滤门限任务。仅支持布尔类型指标。设置前置条件的具体操作参见新建性能指标。
在门限设置下拉菜单中，选择新建复合条件任务。
图3  选择新建复合条件任务
在弹出的新建复合条件任务对话框，设置告警清除观察期，并单击新建门限级别，如[图4]所示。
图4  新建复合条件任务对话框
参数名称|参数说明
---|---
告警清除观察期|计数器/指标的值连续不超过设置的门限，性能门限告警才会被自动清除。例如：例如设置为0时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，该告警会立刻被清除。例如设置为1时：当计数器/指标的值超过门限时，就会产生告警。如果在随后第一个粒度计数器/指标的值低于门限，系统会进入观察期。当第二个粒度仍然低于门限，告警才会被清除。如果在第二个粒度又高于了门限值，则会被重新计数。所以只有当连续2个粒度都低于门限时，告警才会被清除。
在新出现的门限级别中，选择触发的告警级别，输入告警标题，并单击新建条件，如[图5]所示。
图5  新建告警触发条件
单击新建门限级别按钮，设置该告警门限的触发条件，如[图6]所示。
图6  设置普通门限页面
参数|说明
---|---
指标|选择计数器，添加到右侧条件编辑器中。
条件编辑器|选择一个或多个计数器进行运算，当整个表达式为True时，则触发对应级别的告警。其中：&&：逻辑与。例如：a&&b，表示只有a和b都为True时，整个表达式结果为True。||：逻辑或。例如：a||b，表示只要任意a或者b为True时，整个表达式结果为True。==：判断是否相等。例如：a==b，表示a和b相等时为True。!=：判断是否不相等。例如：a!=b，表示a不等于b时为True。
检验|单击检验，可以检验输入的表达式是否合法。
重置|单击重置，可以清空当前输入的表达式。
单击新建。告警门限触发条件和告警级别出现在列表中，如[图7]所示。
图7  门限条件设置结果
（可选）如果需要设置多个告警级别和告警触发条件，则重复步骤4-8，如[图8]所示。
图8  添加多个门限条件示例
单击新建，设置的门限告警规则出现在列表中，如[图9]所示。
图9  门限规则
单击下一步，切换到选择对象页签，选择需要监控的对象，如[图10]所示。
图10  新建门限任务-对象选择页面
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
选择类型|按对象范围：针对通配对象的具体网元、服务和测量对象。按测量对象模板：从预定义的模板导入测量对象。
对象范围|选择类型选择按对象范围，该参数可见。选择对象的范围，并选择资源。
对象过滤|选择类型选择按测量对象模板，该参数可见。网元：选择需要监控的网元。服务：选择需要监控的服务。测量对象：选择需要监控的测量对象。
测量对象模板|选择类型选择按测量对象模板，该参数可见。创建测量对模板参见“创建测量对象模板”。
单击下一步，切换到选择时间页面，设置监控任务的粒度和时间范围，如[图11]所示。
图11  选择时间页面
参数名称|参数说明
---|---
状态|该门限任务创建后呈现的状态，包括仅创建完成或开始执⾏。
粒度|门限任务的粒度周期。
时间范围|门限任务生效的时间范围。
有效时段和日期|选择该门限任务生效的日期和时间段。
单击新建按钮。新创建的门限任务出现在任务列表中，如[图12]所示。
图12  门限任务创建结果
#### 检查性能数据完整性 
摘要 : 
通常情况下，系统会按照性能测量任务从网元采集性能数据。但某些特殊情况下（如网元与ElasticNet UME服务器通信中断），服务器会出现未按时采集到网元性能数据的情况。
通过数据完整性检查，维护人员可以查询指定时间段内ElasticNet UME服务器上的网元性能数据是否完整。如果性能数据不完整，维护人员还可以尝试补采数据操作。
步骤 : 
在性能管理页面，选择菜单性能任务→数据完整性检查
，打开数据完整性检查页面，如[图1]所示。
图1  完整性查询-基本信息
选择测量族，页面的参数说明参见[表1]。
参数|说明
---|---
网元类型|性能数据查询的网元类型。
测量对象类型|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
测量族|测量对象类型包括的所有测量项。
单击下一步，切换到选择对象页签，如[图2]所示，选择作为查询对象的网元。
图2  选择对象页面
单击下一步，切换到选择时间页签，如[图3]所示。参数说明参见[表2]。
图3  选择时间
参数|说明
---|---
粒度|网元设备进行数据采集的周期。
时间范围|表示查询性能数据的时间段。
单击查询按钮。数据完整性检查窗口将显示检查结果，如[图4]所示。
图4  检查数据完整性
（可选）对于完整性为缺失的检查任务，选择操作列的补采数据，尝试重新从网元采集性能数据。
#### 补采性能数据 
摘要 : 
由于某种原因（如网元与ElasticNet UME服务器间的通信中断）导致ElasticNet UME服务器上性能数据不完整时，如果网元上的性能数据还没有被清除，此时维护人员可以通过手工方式补采测量任务中丢失的性能数据。
步骤 : 
在性能管理页面，选择菜单性能任务→补采
，进入补采页面，如[图1]所示。
图1  性能数据补采
在选择测量族页面，选择网元类型、测量对象类型和测量族。参数说明参见[表1]。
参数|说明
---|---
网元类型|性能数据查询的网元类型。
测量对象类型|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
测量族|测量对象类型包括的所有测量项。
单击下一步切换到选择对象页面，选择对象范围，界面如[图2]所示。
图2  选择对象
单击下一步，选择补采时间范围，页面如[图3]所示。
图3  选择时间
单击确定，系统显示补采成功。
### 性能数据查询 
系统支持以多种方式查询性能测量的结果，如根据自定义条件查询性能数据、自动查询并导出性能数据及实时监控性能数据。 
#### 查询历史性能数据 
摘要 : 
本节介绍如何设置历史性能数据的查询任务的查询条件，并输出查询结果。 
步骤 : 
在性能管理页面，选择菜单性能查询→历史查询
，打开历史查询页面，如[图1]所示。
图1  历史查询
在左侧导航树中选择已保存的查询模板查询性能数据，如[图2]所示。如果没有可用的查询模板，执行以下步骤操作。
图2  查询模板
根据查询模板的访问控制设置，查询模板放到不同目录下。 
私有：只有自己可见。 
公开：所有人可见，创建者可改。 
完全共享：所有人可见可改。 
选中查询模板，单击后面的按钮，可以执行以下操作，如[图3]所示。
图3  查询模板设置
单击新建，打开临时查询历史性能数据页面，如[图4]所示。
图4  临时查询
单击指标模板下拉框，选择预定义的指标模板，设置计数器/指标参数。指标模板的创建参考“[创建指标模板]”。
单击选择指标/计数器，在弹出的对话框中设置参数信息，如[图5]所示。
图5  选择指标/计数器
参数名称|参数说明
---|---
网元类型|单击下拉菜单选择网元类型。
计算完整率|ElasticNet UME在性能测量数据查询结果中能够提供性能测量数据的完整率查询，以测量任务中定制的性能测量数据的时间粒度和统计对象为分析对象。性能测量数据的完整率 =某时间段实际数据上报条数/ 该时间段理论数据上报条数。
测量对象类型|单击下拉菜单选择测量对象类型。
计数器/指标-待选项|选择测量对象类型会关联到可选择的计数器/指标。选择指标时，此处可以调用在指标管理中自定义的新建指标。勾选中待选项中计数器/指标前的选择框，计数器/指标将被移动到已选项区域框。
计数器/指标-已选项|在已选项区域框中，单击计数器/指标项前的按钮，可以移除选中的计数器/指标。
设置性能数据查询的其他参数，如[图6]所示。
图6  性能数据查询
参数|说明
---|---
对象汇总|网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
对象范围|针对通配对象的具体网元、服务和测量对象。
时间粒度/时区/范围|选择查询粒度和查询时间。
（可选）如果需要导出历史性能查询结果，单击后台导出按钮，则在我的导出页面能查询到导出查询结果，参见“[我的导出]”。
单击查询，查询结果如[图7]所示。
图7  查询结果
（可选）单击保存。在弹出的对话框中设置查询模板的参数，单击确定，如[图8]所示。
新建的查询模板根据访问控制参数的设置，分类保存在左侧导航树中，如[图2]所示。
图8  设置查询模板
#### 我的导出 
摘要 : 
新建的历史性能数据查询任务中，单击导出按钮，则在我的导出页面能查询导出文件。
步骤 : 
在性能管理页面，选择菜单性能查询→历史查询
，打开历史查询页面，如[图1]所示。
图1  历史查询
单击后台导出按钮，设置查询结果导出文件的文件名称和文件类型，如[图2]所示。
图2  导出查询结果
单击确定，弹出如[图3]所示的提示信息。
图3  提示信息
选择菜单性能→性能查询→我的导出
，查询结果文件列表如[图4]所示。
图4  我的导出
单击文件名，导出文件会被保存到本地。 
（可选）如果需要删除导出记录，单击文件名后的删除按钮。
#### 创建定时导出任务 
摘要 : 
根据已有的指标模板，新建性能数据查询结果的定时导出任务。指标模板可以使用系统预定义模板或者用户自定义模板。 
步骤 : 
在性能管理页面，选择菜单性能查询→定时导出任务
，进入定时导出任务列表页面，如[图1]所示。
图1  定时导出任务
单击新建按钮，进入新建定时导出任务页面，如[图2]所示。
图2  新建定时导出任务
设置任务基本信息。基本信息页面的参数说明参见[表1]。
参数|说明
---|---
名称|模板任务的名称。
指标模板名称|从下拉列表框中选择系统预定义和用户自定义的指标模板。创建指标模板操作可参见“创建指标模板”。
统计分析|设置逻辑分析。按逻辑过滤条件或/与输出满足条件的查询结果。
设置TopN统计。同一时间N个对象：在查询结果中取每个时间粒度内的N个对象的最大或最小值。同一对象N个时间：在查询结果中取每个对象的N个最大或最小值的时间范围。全部：结合对象和时间粒度，取N个最大或最小值。|统计分析
设置忙时统计。忙时最大值：查询结果按照时间段输出最大值。忙时最小值：查询结果按照时间段输出最小值。|统计分析
单击下一步，进入选择对象页签，设置对象汇总和对象范围，并选择资源，如[图3]所示。
图3  选择对象
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。原始数据：查询数据库中的原始性能数据。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。
对象范围|针对通配对象的具体网元、服务和测量对象。
单击下一步，进入选择时间页签，设置性能数据的汇总粒度和执行周期，如[图4]所示。
图4  选择任务执行周期
单击下一步，进入用户定制页签，设置导出文件类型等个性化参数设置，可以使用默认值，如[图5]所示。
图5  用户定制
（可选）单击下一步，进入门限设置页签，根据实际情况设置门限值，如[图6]所示。
图6  设置门限
单击新建按钮，完成定时导出任务的新建。新创建的定时导出任务出现在任务列表中，如[图7]所示。
图7  创建定时导出任务结果
### 性能数据监控 
维护人员可以通过执行监控历史任务和实时监控任务来监控系统性能数据。 
#### 创建实时监控任务 
摘要 : 
维护人员可以新建实时性能监控任务，对ElasticNet UME服务器采集的网元指标和计数器数据进行实时监控。
 说明： 
对于分层接入代理类型为V4OMS的网元，创建实时监控任务之前，需基于测量族创建对应的测量任务。 
对于通过其他代理类型接入的网元，创建实时监控任务之前，不需要创建对应的测量任务。 
步骤 : 
在性能管理页面，选择菜单性能监控→实时监控
，进入实时监控任务列表页面，如[图1]所示。
图1  实时性能监控任务
单击新建，选择计数器/指标，如[图2]所示。
图2  选择计数器/指标
选择计数器/指标页面的参数说明参见[表1]。
参数|说明
---|---
名称|为该监控任务设置一个名称。
保留历史数据文件|实时监控任务本身只保留2000条数据，选中是，则把历史数据存到文件中，可以导出，保存的文件在pvc上。
网元类型|选择性能监控的网元类型。
上报北向数据|选择是否上报北向数据。
测量对象类型|网元类型支持的测量对象类型。选择网元类型后，下拉列表框仅显示该类型下支持的测量对象类型。
计数器/指标|选择需要进行监控的性能计数器和指标。
也可以单击选择指标模板，使用预定义的模板创建实时监控指标。
单击下一步，选择监控的对象，如[图3]所示。
图3  选择对象
参数说明参见[表2]。
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。原始数据：查询数据库中的原始性能数据。
对象范围|针对通配对象的具体网元、服务和测量对象。
单击下一步，设置监控的时间，如[图4]所示。
图4  选择监控的时间
（可选）如果需要对监控结果的数值范围进行筛选，单击下一步，设置监控指标的上下门限值，如[图5]所示。
图5  设置门限
单击新建，新创建的监控任务，出现在实时监控任务列表中，如[图6]所示。
图6  新建实时监控完成
单击数据展示栏中的图形或者表格，展示查询结果。
图7  实时性能监控结果
相关任务 : 
任务|操作
---|---
导出任务结果|在实时监控页面的任务列表中，选中一项任务，单击更多→导出，实时性能数据查询结果以文件形式保存到本地。
挂起任务|在实时监控页面的任务列表中，选中不需要继续执行的任务，单击挂起，则暂停该项任务执行。
#### 创建历史监控任务 
摘要 : 
维护人员可以新建历史性能监控任务，对ElasticNet UME服务器采集的网元指标和计数器历史数据进行监控。
通过性能监控任务，ElasticNet UME服务器将性能测量任务中采集到的性能数据，以表格或图形的方式实时地呈现给维护人员。
前提 : 
已新建性能测量任务，且测量任务中已包含了需要监控的测量族。 
步骤 : 
在性能管理页面，选择菜单性能监控→历史监控
，进入历史监控任务列表页面，如[图1]所示。
图1  历史性能监控任务
单击新建，设置任务的基本信息和监控的计数器/指标，如[图2]所示。
图2  历史性能监控任务设置
选择计数器/指标页面的参数说明参见[表1]。
参数|说明
---|---
名称|为该监控任务设置一个名称。
网元类型|选择性能监控的网元类型。
测量对象类型|网元类型支持的测量对象类型。选择网元类型后，下拉列表框仅显示该类型下支持的测量对象类型。
计数器/指标|选择需要进行监控的性能计数器和指标。
单击下一步，选择监控的对象，如[图3]所示。
图3  选择监控对象
选择对象页面的参数说明参见[表2]。
参数|说明
---|---
对象汇总|表示查询性能的汇总规则。网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。原始数据：查询数据库中的原始性能数据。
对象范围|针对通配对象的具体网元、服务和测量对象。
单击下一步，设置监控的时间粒度，如[图4]所示。
图4  选择监控的时间粒度
（可选）如果需要对监控结果的数值范围进行筛选，单击下一步，设置监控指标的上下门限值，如[图5]所示。
图5  设置门限
单击新建，新创建的监控任务，出现在历史监控任务列表中，如[图6]所示。
图6  监控任务创建结果
单击数据展示栏中的图形或者表格，展示查询结果。
相关任务 : 
任务|操作
---|---
导出任务结果|在历史监控页面的任务列表中，选中一项任务，单击导出，历史性能数据查询结果以文件形式保存到本地。
挂起任务|在历史监控页面的任务列表中，选中不需要继续执行的任务，单击挂起，则暂停该项任务执行。
### 测量对象和指标管理 
#### 指标管理 
维护人员可以通过指标管理模块查询ElasticNet UME接入的网元类型以及对应的测量对象类型和计数器。指标管理模块还提供了指标的新建、删除、修改、查看、导入、导出等功能。
##### 查询性能指标 
摘要 : 
查询系统预定义和自定义的性能指标，以及各指标的详细计算公式。 
步骤 : 
在性能管理页面，选择菜单指标管理，指标页签中显示各网元类型和测量对象预定义和自定义的所有性能指标，如[图1]所示。
图1  指标
单击按钮，可以对网元类型、测量对象类型、族、来源进行筛选，查询相应的指标，如[图2]所示。
图2  筛选查询指标
单击指标名称，可以查看该性能指标的详细信息，包括指标的计算公式等信息，如[图3]所示。
图3  性能指标详细信息
##### 新建性能指标 
摘要 : 
如果系统预定义的指标不能满足需求，可以创建⾃定义的性能指标。 
步骤 : 
在性能管理页面，选择菜单指标管理，指标页签中显示各网元类型和测量对象预定义和自定义的所有性能指标，如[图1]所示。
图1  指标
单击新建按钮，显示新建指标页面，如[图2]所示，设置指标的基本信息。
图2  新建指标
参数说明参见[表1]。
参数|说明
---|---
名称|新建性能指标的名称，不能与已经存在的指标名称重复。
描述|性能指标的描述信息，不超过500个字符。一般采用默认值。
类型|指标类型：KPI、PI、SPI
数据类型|根据指标类型的不同，设置数据类型也不同，包括：整型、浮点型、百分型、布尔型。
单位|设置指标的单位。
默认异常值|公式计算异常时的指标值。
告警码|设置指标的告警码。
族|选择新建指标所属的测量族。
网元类型|性能指标归属的网元类型。
测量对象类型|网元类型下的测量对象类型，不同的网元类型有不同的测量对象类型。
公式|测量指标的计算公式，据新建指标的计算公式，在可选计数器和指标导航树中选择计数器，如图3所示，并在下⽅的运算符号区域框中选择运算符号，指标公式变量说明参见表2。
图3  新建指标-指标公式页面
变量名称|变量说明
---|---
C|指引用的计数器前缀，计数器类型均以C开头后跟数字用于标识。
Gr|指标计算中的一个变量，代表一条记录中的粒度值，单位是秒。在计算时，其Gr具体值是由查询结果里每条记录的粒度决定的。
P|指引用的指标，当指标中引用了其他指标，则其表达式为P开头后跟指标的数字编号。
单击新建按钮，新创建的指标出现在指标列表中，如[图4]所示。
图4  新建指标
##### 查询计数器 
摘要 : 
查询所有网元的计数器。 
步骤 : 
在性能管理页面，选择菜单指标管理，切换到计数器页签，显示所有网元类型支持的计数器，如[图1]所示。
图1  计数器
单击按钮，可以对网元类型、测量对象类型、测量族进行筛选，查询相应的计数器，如[图2]所示。
图2  筛选查询计数器
##### 查询测量对象类型 
摘要 : 
查询接入的网元类型的测量对象类型。 
步骤 : 
在性能管理页面，选择菜单指标管理，切换到测量对象类型页签，显示所有网元类型支持的测量对象类型，如[图1]所示。
图1  测量对象类型
单击按钮，可以对网元类型进行筛选，查询某一网元类型所支持的所有测量对象类型，如[图2]所示。
图2  筛选查询测量对象类型
##### 查询网元类型 
摘要 : 
查询系统支持接入管理的网元类型。 
步骤 : 
在性能管理页面，选择菜单指标管理，切换到网元类型页签，显示系统接入的所有网元类型，如[图1]所示。
图1  网元类型
在搜索框输入网元类型名称，单击按钮，可以直接显示查询结果，如[图2]所示。
图2  搜索查询网元类型
#### 创建指标模板 
摘要 : 
维护人员可以将各项查询条件保存为模板，以便在[查询历史性能数据]、[创建定时导出任务]、 [创建实时监控任务]时调用。
模板可以设定的查询条件包括查询的网元类型、查询的指标/计数器。 
也可以在本地预定义模板文件，导入系统直接使用。 
步骤 : 
在性能管理页面，选择菜单性能查询→指标模板
，页面如[图1]所示。
图1  指标模板
单击新建按钮，弹出新建指标模板对话框，如[图2]所示。
图2  新建查询模板
设置模板的基本信息。基本信息参数说明参见[表1]。
参数|说明
---|---
名称|模板的名称。|名称
访问控制|私有：只有自己可见。公开：所有人可见，创建者可改。完全共享：所有人可见可改。|访问控制
计数器/指标|网元类型|性能数据查询的网元类型。
计算完整率|计数器/指标|ElasticNet UME在性能测量数据查询结果中能够提供性能测量数据的完整率查询，以测量任务中定制的性能测量数据的时间粒度和统计对象为分析对象。性能测量数据的完整率 =某时间段实际数据上报条数/ 该时间段理论数据上报条数。
测量对象类型|计数器/指标|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
计数器/指标|计数器/指标|测量对象类型的不同测量指标，选中的计数器和指标将会显示在右侧区域框中。
对象汇总|网元：对各个网元的所有测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。服务：对各个服务对象的测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。测量对象：对各个测量对象的数据进行汇总，且查询的数据按计数器合并规则汇总。|对象汇总
粒度|选择查询粒度。|粒度
有效时段和日期|设置有效时段和日期。|有效时段和日期
（可选）如果需要自定义列头，单击下一步，并勾选或重命名需要显示的列头名称，如[图3]所示。
 说明： 
自定义列头只在定时导出任务的执行结果中生效。 
图3  自定义列头
单击新建按钮。新建的模板出现在指标模板窗口中。
#### 查看测量对象 
摘要 : 
维护人员可以在客户端上查看系统中已有的测量对象类型下的测量对象。 
步骤 : 
在性能管理页面，选择菜单性能查询→测量对象查询
，打开测量对象查询页面，如[图1]所示。
图1  测量对象查询
选择网元和测量对象类型，单击按钮，测量对象的查询信息显示如[图2]所示。
图2  查询结果
#### 创建测量对象模板 
摘要 : 
维护人员可以根据需求创建测量对象模板。创建的对象模板可以在[创建测量任务]和[性能门限任务管理]中选择和使用。
 说明： 
当测量对象模板被测量任务或门限任务所引用时，不允许修改和删除该模板。
步骤 : 
在性能管理页面，选择菜单性能查询→测量对象模板
，页面如[图1]所示。
图1  对象模板
单击新建按钮，创建测量对象模板，页面如[图2]所示。
图2  新建对象模板
参数说明参考[表1]。
参数|说明
---|---
名称|模板的名称。
网元类型|性能数据查询的网元类型。
测量对象类型|网元类型支持的测量对象类型。如果已经选择了网元类型，则下拉列表框仅显示该类型下支持的测量对象类型。
对象范围|针对通配对象的具体网元、服务和测量对象。
设置好相关参数后，单击新建，完成测量对象模板的创建。
## 缩略语 
## 缩略语 
### B/S 
Browser/Server浏览器和服务器结构
EM : 
Element Management网元管理
NF : 
Network Function网络功能
### NMS 
Network Management System网络管理系统
### PI 
Performance Index性能指标
QoS : 
Quality of Service服务质量
## 安全管理 
### 安全管理概述 
#### 功能简介 
安全管理用于确保用户对ElasticNet UME系统的合法使用，保证系统正常、可靠地持续运行。
安全管理包括用户账户管理（即管理角色、操作集、用户、资源）以及为平台各服务组件提供统一的身份认证和授权管理，从而实现不同权限的用户可访问或管理不同的网络资源。 
ElasticNet UME系统的安全管理员登录ElasticNet UME客户端，打开安全管理页面，在安全管理页面执行安全配置操作。ElasticNet UME服务器端程序提供登录认证和操作鉴权的逻辑处理功能。
#### 管理项关系模型 
安全管理提供了用户组、用户、角色、操作集以及管理资源的管理功能。安全管理关系模型如[图1]所示。
图1  安全管理关系模型
用户组用于管理用户的行政归属，用户必须包含角色且隶属于某个用户组，用户组的定义不影响用户的权限。 
用户的权限由其所属的角色决定。 
角色的权限由操作集和管理资源共同决定。 
一个操作集是一个或多个操作权限的集合。 
### 基本概念 
#### 用户 
用户是系统操作者在ElasticNet UME中的标识，包括用户名、密码和权限等属性。
根据用户类型可以将用户分为以下三种： 
本地用户：指在ElasticNet UME认证登录的用户。 
第三方系统接入用户：用于ElasticNet UME与第三方系统对接的用户，例如ElasticNet UME与OSS系统对接的用户。 
远端用户：用于与LDAP服务器或RADIUS服务器对接的用户。 
 说明： 
系统提供的缺省用户admin，具有对整个系统和所有管理对象的最高权限。admin用户可管理所有的管理资源并具有所有的操作权限，同时属于“系统管理员”和“安全管理员”两个角色。 
使用该用户操作务必谨慎，禁止做任何影响系统安全性的操作，例如共享或扩散admin用户的用户名和密码。 
#### 角色 
角色是操作权限和管理资源的集合。 
角色中所包含的用户具有该角色的所有操作权限。通过将用户加入到角色中为用户实现快速授权，使权限管理更加合理和方便。 
#### 操作权限和操作集 
操作权限是指用户可以执行某项具体操作的权限。操作集是多个操作权限的集合。 
安全管理员将操作权限分配给角色后，所属该角色的全部用户可以执行相应操作。安全管理员将操作集赋予角色，所属该角色的全部用户即拥有了操作集的所有操作权限。 
#### 区域 
区域是从地理位置或管理资源使用情况划分的系统子域。安全管理员可根据业务需求创建不同的区域，并按区域为用户授权，进行权限管理。每个区域都可以创建一个区域安全管理员角色，属于这个角色的用户为区域安全管理员。区域安全管理员能够对其管理区域内的资源进行授权。 
安全管理员拥有整个系统的安全管理操作权限，例如：角色管理、用户管理、安全数据维护、调整资源所属区域并创建区域安全管理员等。但安全管理员没有业务相关权限。 
区域安全管理员拥有本区域内的安全管理操作权限，例如：本区域内的角色管理、用户管理，但区域安全管理员没有安全数据的维护权限，也没有业务相关权限。 
授权范围关系如[图1]所示。
图1  授权范围
### 安全管理页面介绍 
使用具有安全管理员权限的账户登录系统，选择菜单系统→安全
，打开安全管理页面。
安全页面左侧功能节点说明参见[表1]。
功能节点|说明
---|---
安全指引|选择节点安全指引，在右侧区域显示安全指引页面。该页面对操作集、角色和用户进行了简要介绍。按照页面箭头所指方向，依次单击新建操作集、新建角色、新建用户、导出安全数据和导入安全数据按钮并进行相应参数设置，可以快速创建操作集、角色、用户、备份用户管理数据以及恢复用户管理数据。
用户管理|选择节点用户管理，在右侧区域显示用户管理页面。可以查询/新建/修改/删除/复制用户，可以查询/新建/修改/删除用户组，同时为用户设置角色权限、账户规则、用户组等操作。在该页面也可以执行强行退出用户和解锁用户操作。
账户规则|选择节点账户规则，在右侧区域显示账户规则页面。可以查询/新建/修改/删除账户规则、设置是否启用强密码，设置账户规则的锁定方式以及执行将用户和账户规则进行批量绑定的操作。
角色管理|选择节点角色管理，在右侧区域显示角色管理页面。可以查询/新建/修改/删除/复制角色，查询/新建/修改/删除操作集，也可以创建导入网元角色。
参数配置|选择节点参数配置，在右侧区域显示参数配置页面。可以配置用户闲置时间、登录横幅是否开启以及编辑登录横幅内容。
认证方式配置|选择节点认证方式配置，在右侧区域显示认证方式配置页面。
金库模式参数配置|金库模式用于对特定网元上执行的危险操作进行二次授权配置。这些危险操作只有经过具有“二次授权”权限的人员的授权确认后才会生效。选择节点金库模式参数配置，在右侧区域显示金库模式参数配置页面。可以对指定网元进行二次授权，可以配置重要的设备参与二次授权控制。
### 创建用户账号 
在系统初始配置和日常操作阶段，需要先规划角色和操作集，再创建用户账号。角色和操作集可以通过新建的方式配置，也可以使用系统默认配置的角色和操作集。 
初始配置用户的工作流程如[图1]所示，操作说明参见[表1]。
图1  初始配置用户流程
步骤|操作|说明
---|---|---
1|新建操作集|将不同的操作权限组成一个集合，以集合的方式将操作权限分配给角色可以降低权限管理的复杂性。
2|新建角色|分配给该角色对网管系统中各项资源的操作权限。
3|新建用户组|根据不同的地域或不同行政部门设置用户组，以方便对用户进行归属管理。
4|定制用户账户规则|设置系统安全策略，如定制用户账户规则。
5|新建用户|为新用户设置用户名和密码，分配用户具有的角色，定义用户所属的用户组。
#### 新建操作集 
摘要 : 
操作集是一系列操作权限的集合，用来定义角色的操作权限。一个角色与一个操作集进行绑定后，包含该角色的用户即拥有相应操作集内的所有操作权限。 
ElasticNet UME系统默认的操作集包括安全管理员权限、管理员权限、系统维护权限、操作权限、以及查看权限。对应的角色分别为安全管理员、系统管理员、系统维护员、系统操作员以及系统监控员。
安全管理员可以根据实际情况，新建操作集，包含与默认操作集不一致的一系列操作权限。 
相关信息 : 
系统已经预定义了5个操作集，这些预定义的操作集无法被修改，维护人员可以直接使用，可以满足用户基本的权限分配场景。若用户还有其他的权限分配情况，可自定义操作集。 
系统预定义的操作集如[图1]所示。
图1  默认角色和对应操作集
预定义操作集名称|操作集说明
---|---
安全管理员权限|进行安全数据维护、调整资源所属组织，没有业务相关权限。
管理员权限|除了安全信息维护权限外，对管理系统及被管网络有不受限制的完全访问权，不能够对单个资源进行分配。
系统维护权限|当该权限分配给某个资源时，具备对该资源不受限制的完全访问权限，包括资源帐号等敏感信息的修改权限。
操作权限|当该权限分配给某个资源时，可对该资源进行浏览，并进行一般的配置修改以完成开局、日常维护、故障处理等工作，但不能够修改资源的帐号等一些敏感的配置信息。
查看权限|当该权限分配给某个资源时，仅能够对该资源进行查询操作。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单角色管理，打开角色管理页面，切换到操作集页签，如[图2]所示。
图2  操作集
单击新建操作集按钮，打开新建操作集页面，如[图3]所示。
图3  新建操作集
 说明： 
操作集分配情况的操作树上的选项与实际接入的网元类型有关。 
在基本信息区域框，输入操作集名称和操作集描述；在操作集分配情况区域框，选择该操作集的操作权限。操作集名称不能重复。
单击新建按钮，完成新建操作集并退出新建操作集页面。
相关任务 : 
任务|操作
---|---
导入操作集|在操作集页面，单击导入操作集按钮，选择用户自定义的操作集文件，单击打开按钮完成操作集的导入。
导出操作集|在操作集页面，单击导出操作集按钮，将操作集以文件形式保存到本地。
查看系统默认操作集|在操作集的列表框中，单击操作集名列的系统默认操作集名称，打开查看操作集页面。该页面显示了系统默认操作集的名称、描述信息，以及该操作集拥有的权限。
查看自定义操作集|在操作集的列表框中，单击操作集名列的用户自定义操作集名称，打开查看操作集页面。该页面显示了用户自定义操作集的名称、描述信息，以及该操作集拥有的权限。
修改操作集|在操作集页面，选中某一个操作集，单击修改按钮，重新配操作。
删除操作集|在操作集页面，选中某一个操作集，单击删除按钮，删除此操作集。
复制操作集|在操作集页面，选中某一个操作集，单击复制按钮，重用此操作集包含的操作，新建成为另一个操作集。
#### 新建角色 
角色对应用户的管理权限，包括操作集和管理资源。ElasticNet UME允许同一角色对不同的网元拥有不同的管理权限。
系统默认的角色包括安全管理员、系统管理员、系统维护员、系统操作员、以及系统监控员。对应的默认操作集分别为安全管理员权限、管理员权限、系统维护权限、操作权限以及查看权限。 
如果默认的角色包含的操作集和管理权限不能满足用户管理的需求，安全管理员可以根据设定的安全管理规划，创建需要的角色。 
安全管理员可以根据需要锁定指定角色。指定角色一旦锁定后，与该角色绑定的用户将不能使用该角色所拥有的权限。未分配角色的用户允许登录ElasticNet UME系统但没有操作权限。
系统预定义的角色参见[表1]。这些预定义的角色无法被修改。
预定义角色名称|角色说明
---|---
安全管理员|进行安全数据维护、调整资源所属组织，没有业务相关权限。
系统管理员|不具备维护安全信息的权限，除此之外对管理系统及被管网络有不受限制的完全访问权。
系统维护员|不具备维护安全信息及管理系统的权限，除此之外具有被管网络的所有权限。
系统操作员|可进行一般的配置修改，不能对管理系统本身进行备份恢复等维护工作，不能修改敏感的资源配置信息。
系统监控员|可对网络信息进行浏览。
##### 新建区域安全管理员角色 
摘要 : 
区域是从地理位置或管理对象使用情况划分的系统子域。安全管理员可根据业务需求创建不同的区域，并按区域为用户授权，进行权限管理。每个区域都可以创建一个区域安全管理员角色，属于这个角色的用户为区域安全管理员。 
区域安全管理员角色仅仅具有与安全相关的权限，没有业务相关权限。 
本节介绍如何创建区域安全管理员角色。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单角色管理，打开角色管理页面，如[图1]所示。
图1  角色管理页面
单击新建角色，页面如[图2]所示。
图2  选择创建角色
选择区域安全管理员角色，单击确定按钮，打开新建角色页面，如[图3]所示。
图3  区域安全管理员角色页面
在基本信息区域中，输入角色名称和角色描述信息，在权限分配区域中选择角色的管理资源，并分配该资源下的操作权限。新建角色页面的参数说明参见[表1]。
参数名称|参数说明
---|---
基本信息|角色名称|角色的名称。角色名称必须输入，且不能重复。名称可以包含汉字、数字、字母、下划线、中划线、点和空格。
角色描述信息|基本信息|对角色的详细描述信息。
锁定该角色|基本信息|角色锁定后，所有拥有该角色的用户均不能使用该角色赋予的权限。
是否区域安全管理员|基本信息|默认选中，当前新建的角色是区域安全管理员角色。
权限分配|定义角色具有的管理资源（例如：某区域内的网元）。区域安全管理员角色拥有所选资源的安全管理操作权限，可以基于该资源创建角色和用户，并为其分配操作权限。但区域安全管理员角色自身没有资源的相关操作权限。|权限分配
单击新建按钮，完成新建区域安全管理员角色并退出新建角色页面。
##### 新建通用角色 
摘要 : 
角色对应用户的管理权限，包括操作集和管理资源。ElasticNet UME允许同一角色对不同的网元拥有不同的管理权限。
本节介绍如何新建非区域与安全管理员以外的其他角色。 
步骤 : 
在安全管理页面，选择菜单角色管理，打开角色管理页面，如[图1]所示。
图1  角色管理页面
单击新建角色，页面如[图2]所示。
图2  选择创建角色
选择其他角色，单击确定按钮，进入新建角色页面，如[图3]所示。
图3  新建其他角色-基本信息区域
在基本信息区域中，输入角色名称和角色描述信息。
参数名称|参数说明
---|---
角色名称|角色的名称。角色名称必须输入，且不能重复。名称可以包含汉字、数字、字母、下划线、中划线、点和空格。
角色描述信息|对角色的详细描述信息。
锁定该角色|角色锁定后，所有拥有该角色的用户均不能使用该角色赋予的权限。
是否区域安全管理员|默认不选中，当前新建的角色不是区域安全管理员角色。
在权限分配区域的资源树中选择角色的管理资源，并在操作集信息列表框中选择对于该资源的的操作权限。
图4  新建其它角色-权限分配区域
参数名称|参数说明
---|---
资源树|定义角色具有的管理资源。从资源树中选取模块节点，并在操作集信息列表中为该资源设置权限。
操作集信息|用于定义角色具有的操作权限。操作集分为系统默认的操作集和用户自定义的操作集（参见“新建操作集”）。
单击新建按钮，完成新建角色操作。
相关任务 : 
任务|操作
---|---
查看角色信息|在角色管理页面的列表框中，单击角色所在行的角色名，打开查看角色页面。该页面显示了角色名称、描述信息、管理资源以及操作集信息。
查看自定义角色|在角色管理页面，选择角色页签，显示用户自定义的角色。单击角色所在行的角色名，打开查看角色页面。该页面显示了角色名称、描述信息、管理资源以及操作集信息。
查看角色下的用户|在角色管理页面，选择角色页签，显示用户自定义的角色。在角色所在行的操作列，单击查看用户按钮，弹出查看用户对话框。查看分配了该角色的用户信息。
修改角色|在角色管理页面，选择角色页签，显示用户自定义的角色。单击角色所在行的修改按钮，打开修改角色页面。修改自定义角色的描述信息、管理资源以及操作集信息。修改完毕，单击确定按钮完成角色参数的修改。
删除角色|在角色管理页面，选择角色页签，显示用户自定义的角色。在角色所在行的操作列，在更多下拉列表框中选择删除，弹出删除角色对话框。单击删除按钮，删除已配置的角色。
复制角色|在角色管理页面，选择角色页签，显示用户自定义的角色。在角色所在行的操作列，在更多下拉列表框中选择复制，弹出复制角色对话框。输入角色名称和角色描述信息，单击确定按钮完成角色复制。
#### 新建用户组 
摘要 : 
用户组用于管理用户的行政归属。实际应用中，安全管理员可以根据不同的地域或不同行政部门对用户进行分组，以方便对用户进行归属管理。这个分组就是用户组。UME系统缺省情况下，存在一个根用户组。该用户组是最高组织，所有新建用户组均是其下级子组织。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，进入用户管理页面，如[图1]所示。
图1  用户管理页面
单击用户组/个卡片，在页面下方区域显示用户组配置信息，如[图2]所示。
图2  用户组/个
将光标放置在根用户组上方，单击右侧出现的加号，弹出新建用户组对话框，如[图3]所示。
图3  新建用户组
输入用户组名称以及用户组描述信息，单击新建按钮，系统自动在根用户组下增加下级用户组，如[图4]所示。
图4  新建用户组完成页面
相关任务 : 
任务|操作
---|---
修改用户组|在用户管理页面，单击修改按钮。修改用户组描述信息。修改完毕单击确定按钮。
删除用户组|在用户管理页面，单击删除按钮，弹出删除对话框。单击删除按钮。
#### 定制用户账户规则 
摘要 : 
用户账户规则即账户安全策略，提供了用户访问控制功能，包括设置帐号策略、密码策略、登录IP地址控制策略和登录时间控制策略。 
创建用户时，需要绑定账户规则。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单账户规则，打开账户规则页面，如[图1]所示。ElasticNet UME提供默认的账户规则，可以在列表框的规则名称列单击默认规则，查看默认账户规则的参数设置。
图1  账户规则
单击新建账户规则，打开新建账户规则页面，规则名称与密码策略配置项如[图2]所示。
图2  规则名称与密码策略
账号锁定规则配置项如[图3]所示。
图3  账号锁定规则
账号策略配置项如[图4]所示。
图4  账号策略
允许登录IP范围配置项如[图5]所示。
图5  允许登录IP范围
设置账户规则参数。账户规则参数说明参见[表1]。
参数|说明
---|---
规则名称与密码策略|规则名称|输入账户规则名称。
最小密码字符长度|规则名称与密码策略|设置密码的最小长度，最小值：8。
最大密码字符长度|规则名称与密码策略|设置用户密码的最大长度。最大值：64。
密码重复|规则名称与密码策略|选中复选框，启用该功能。设置用户密码不能与最近旧密码重复的次数。取值范围：1-100。
密码规则|规则名称与密码策略|选中复选框，启用强密码检测。启用强密码检测时，需要检测连续字符数、重复字符数、用户名和密码的相同字符数。
首次登录|规则名称与密码策略|选中复选框，启用该功能。绑定该账户规则的用户首次登录时必须修改密码。
密码最大有效期|规则名称与密码策略|设置密码的最大有效期，取值范围：0-365。0表示永不过期。
过期提示|规则名称与密码策略|选中复选框，启用该功能。设置密码过期前需要提示，并设置提前多少天进行提示。
账号锁定规则|锁定规则|永不锁定：用户登录失败不受次数限制，用户不会因登录失败次数过多而被锁定。暂时锁定：用户登录失败次数达到锁定密码错误输入次数的值后锁定用户，超过锁定后解锁时间设定的时长后可以自动解锁。也可以在锁定后，使用系统管理员“admin”用户解锁该账户。被解锁的账户可以重新登录ElasticNet UME系统。永久锁定：用户登录失败次数达到锁定密码错误输入次数设定的值后锁定用户，且不允许该用户再次登录。
锁定后解锁时间|账号锁定规则|设置锁定后，经过多长时间会自动解锁。取值范围：1-4320，单位：分钟。
锁定密码错误输入次数|账号锁定规则|设置用户登录时，连续输入指定次数的错误密码后锁定该帐户。
账号锁定|账号锁定规则|选中复选框，启用该功能。选择是否根据IP地址来锁定用户。
账号策略|用户有效期|设置用户在多少天的有效期内能登录系统。过期后，系统禁止该用户登录。
自动禁用前未登录天数|账号策略|设置用户在多少天没有登录后，自动禁用该用户。
用户名最小长度|账号策略|设置用户名最小长度。
账号登录方式|账号策略|设置用户账号登录的方式。用户仅仅可以通过设置的登录方式登录系统。
工作时间|账号策略|设置允许用户登录系统的工作时间范围。
允许登录IP范围|设置允许用户登录系统的IP地址范围。单击添加IP范围按钮，弹出添加IP范围对话框，设置允许用户登录系统的IP地址范围。|允许登录IP范围
设置完成后，单击新建按钮，保存设置并退出新建账户规则页面。
相关任务 : 
任务|操作
---|---
将账户规则和用户绑定|在账户规则页面，单击绑定用户按钮，弹出绑定用户对话框。从账户规则下拉列表框中选择账户规则，在用户待选项列表中选择用户。单击确定按钮，批量完成账户规则与用户的绑定。
修改规则|在账户规则页面，在列表框中需要修改的规则所在行，单击修改按钮，打开修改账户规则页面。修改账户规则参数，单击确定按钮完成修改。
删除规则|在账户规则页面，在列表框中需要删除的规则所在行，单击删除按钮，弹出确认对话框。单击确定按钮删除账户规则。
导入密码常用词|单击导入密码常用词按钮，弹出确认对话框。单击导入按钮，选择包含常用密码的文本文件，单击打开按钮导入。
导出密码常用词|单击导出密码常用词按钮，导出设置强密码规则时禁止使用的常用密码。
#### 新建用户 
摘要 : 
本节介绍如何创建一个新的用户，并为该用户分角色。新建用户必须分配角色，否则使用该用户登录系统后将无任何操作权限。 
一个用户只能归属于一个用户组。新建用户默认属于根用户组。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理
单击新建用户，打开新建用户页面，如[图2]所示。
图2  基本信息页面
基本信息页签的参数说明参见[表1]。
参数名|参数说明
---|---
用户名|新建用户的用户名，即该用户的登录名称。用户名不区分大小写，不允许重复，最长30个字符。
用户全名|用户的全称。最长100个字符。
随机密码|勾选该选项后，系统将随机生成用户的密码，并将密码会发到该用户电子邮件配置的邮箱地址。该用户登录系统时需要使用邮件中的密码登录。
密码|用户登录时输入的口令。在用户账户规则中，可以定制密码的长度范围。
确认密码|再次输入密码，必须和用户密码一致。
电话|新建用户的电话号码。
电子邮件|新建用户的电子邮件。
用户描述|用户描述。
账户规则|选择账户规则，单击查看详情，查看规则名称与密码策略，账号锁定规则和允许登录IP范围。定制一个账号规则参见“定制用户账户规则”。
用户组|选择用户所归属的用户组。新建一个用户组参见“新建用户组”。
二次授权|选择启用选项，该用户可以为其他需要二次授权的网管操作进行授权。
同时登录数限制|设置使用该用户名同时登录ElasticNet UME的用户数量。全局：同一个用户名只允许1个人同时登录。不限制：同一个用户名允许多人同时登录。按IP限制：同一个用户名只允许在同一个IP上多人同时登录。自定义：自定义同一个用户名的同时登录人数。
单击下一步，进入权限分配页签，为该用户分配角色，如[图3]。
图3  权限分配
单击新建按钮，完成用户的创建。
相关任务 : 
任务|操作
---|---
修改用户|在所有用户页面，在列表框中单击用户所在行的修改按钮，打开修改用户页面。修改用户基本信息参数，单击下一步按钮继续。修改用户对应的角色，修改完毕单击确定按钮。
删除用户|在所有用户页面，在列表框中单击用户所在行的删除按钮，弹出删除用户对话框。单击删除按钮删除用户。
复制用户|在所有用户页面，在列表框中单击用户所在行的更多按钮，在下拉列表框中选择复制，弹出复制用户对话框。输入用户名，单击复制按钮复制对应用户。
查看用户权限|在所有用户页面，在列表框中单击用户所在行的更多按钮，在下拉列表框中选择查看用户权限，弹出查看用户权限对话框。查看用户拥有的权限信息。
设置日志查看范围|在所有用户页面，在列表框中单击用户所在行的更多按钮，在下拉列表框中选择设置日志查看范围，弹出设置日志查看范围对话框。选择角色，单击确认按钮。该用户登录系统后，能在日志管理中查看所选角色对应用户的操作日志信息。
启用/禁用用户|在所有用户页面，在列表框中单击用户所在行的状态列。在下拉列表框中选择可用或禁用，启用被禁用户或禁用已启用用户。
批量修改用户登录密码|在所有用户页面，单击批量修改密码按钮，弹出批量修改密码对话框。输入新密码，在用户列表中选择用户，单击确定按钮，完成批量修改密码。
查询登录用户|参见“查询和管理登录用户”。
强制用户退出登录|参见“强制退出用户”。
#### 映射网元用户 
摘要 : 
映射网元用户功能是ElasticNet UME获取网元的用户信息，并将网元的用户映射为ElasticNet UME用户。ElasticNet UME系统管理员用户具备网元管理员用户的操作权限，ElasticNet UME普通用户具有映射的网元用户相同的操作权限。
ElasticNet UME用户登录后，第一次通过ElasticNet UME直接登录网元时需输入密码，提示保存，再次登录网元时，无需重复输入用户名密码，直接登录。
ElasticNet UME用户登录网元并执行MML命令时，根据映射的网元用户权限执行命令和鉴权。
前提 : 
设置映射关系的网元支持集中安全功能。网元集中安全功能的开启参见分层接入
。
##### 操作 
在安全管理页面，选择菜单用户管理，进入用户管理页面，如[图1]所示。
图1  用户管理
单击映射网元用户，进入映射网元用户页面，如[图2]所示。
图2  映射网元用户
参考[表1]，设置映射关系。
参数|说明
---|---
网元|需要设置映射关系的网元。
网管用户|ElasticNet UME与网元用户建立映射关系的用户名。
映射网元用户名|与ElasticNet UME用户建立映射关系的网元用户名。
单击确定，完成映射关系的设置。
### USPP受理用户管理 

 说明： 
该节操作仅适用于ZXUN USPP产品。 
操作前，请确认所有局（合一FE/BE、独立FE、独立BE）的支持集中安全开关设置为是。具体说明参见“USPP的NF接入EM
”。
创建受理用户的操作与创建初始配置用户的操作类似。主要区别在于创建角色时，需为角色分配相应的受理权限。 
角色的受理权限包含以下几个方面： 
 
管理域权限：用户在受理台能够操作的管理域。 
 
号段组权限：用户在受理台上能够操作的号段。根据不同的网元类型，号段可以为物理号段、逻辑号段、PUI、PVI、IMSI号段、ISDN号段、NAI中的一个或多个。 
 
受理操作码权限：用户在受理台上能够进行的操作。 
 
创建受理用户的流程参见[表1]。
步骤|操作|说明
---|---|---
1|（可选）新建操作集|将不同的操作权限组成一个集合，以集合的方式将操作权限分配给角色可以降低权限管理的复杂性。
2|新建具有受理权限的角色|为该角色分配相应的受理权限。
3|定制用户账户规则|设置系统安全策略，如定制用户账户规则。对于营帐使用的受理用户，其中密码最大有效期建议设置为0，即永不过期。
4|新建受理用户|为新的受理用户设置用户名和密码，并为用户分配具有受理权限的角色。
5|同步UMM变化表|生效新增的角色和用户。
#### 新建具有受理权限的角色 
摘要 : 
本节介绍如何创建一个具有受理权限的角色，并分配给这个角色一定的资源和操作权限。 
当系统预定义的角色不能满足需要时，维护人员可以自定义角色，并为该角色分配资源和操作集。 
前提 : 
以系统管理员身份登录ElasticNet UME客户端。
步骤 : 
在安全管理页面，选择菜单用户管理，打开角色管理页面。
单击新建角色，打开如[图1]所示界面。
图1  选择创建角色
选择其他角色，单击确定按钮，打开如[图2]所示界面，是否区域安全管理员选项默认不选中。
图2  受理权限的角色
输入角色名称等信息。 
新建角色页面的参数说明参见[表1]。
参数名称|参数说明
---|---
基本信息|角色名称|具有受理权限的角色的名称，如agent。
权限分配|资源树|受理操作码分组：受理操作码自动同步到受理操作码分组下。展开分组，根据规划，为角色同时添加多个操作码。如果用户需在受理台上操作公共操作码（所有USPP子网元公用的操作码），则需包含公共操作码；如果用户需操作受理台，则需包含使用受理台操作码。受理操作码可在ElasticNet UME客户端的配置页面的USPP名称→UMM节点→全局配置节点下执行SHOW HCMD命令查找。受理号段分组：配置受理号段组后，受理号段组ID自动同步到受理号段分组下。展开分组，选择所需的号段组。受理号段组ID可在ElasticNet UME客户端的配置页面的USPP名称→UMM节点→全局配置节点下执行SHOW NUMGRP命令查找。管理域：配置管理域后，管理域名称自动同步到UMM节点下。展开分组，选择所需的管理域。管理域名称可在ElasticNet UME客户端的配置页面的USPP名称→UMM节点→全局配置节点下执行SHOW VHLR命令查找。
操作集信息|权限分配|该操作对象的操作集合，定义角色具有的操作权限。操作员可以自定义操作集，也可以使用系统默认的操作集。
执行如下操作，为该角色指定操作资源，并分配该资源下的操作权限。 
在左侧的资源树中选择一个分组。
在右侧的操作集列表中，为该分组节点分配一个操作集。 
重复以上步骤，直至全部的分组节点均已分配操作集。 
单击新建按钮，完成新角色的创建。
#### 新建受理用户 

摘要 : 
本节介绍新建受理用户（即具有受理操作权限的用户）的操作。该操作创建的用户可登录受理台，进行权限范围内的操作。 
 说明： 
如果不给用户分配角色，该用户登录后将无任何操作权限。 
前提 : 
 
已完成用户账户规则的定制，参见定制用户账户规则。对于营帐使用的受理用户，其中密码最大有效期建议设置为0，即永不过期。 
 
已具有用户管理权限的用户登录ElasticNet UME客户端。 
 
确认ElasticNet UME的系统→配置中心→系统配置→安全配置→集中安全配置下的开启集中安全开关设置为是，如图1所示。 
 
确认所有USPP局（合一FE/BE、独立FE、独立BE）接入ElasticNet UME时，ElasticNet UME的拓扑→分层接入下的支持集中安全开关设置为是，如图1所示。 
 
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理窗口，如[图1]所示。
图1  用户管理
单击新建用户，如[图2]所示。
图2  基本信息页面
单击下一步，进入权限分配页面，为该用户分配具有受理权限的角色（如agent），如[图3]所示。
图3  选择受理权限角色
单击新建按钮，完成受理用户的创建。
#### 同步UMM变化表 
摘要 : 
同步UMM变化表，使新增的具有受理权限的角色和受理用户生效。 
前提 : 
以系统管理员身份登录ElasticNet UME客户端。
步骤 : 
在配置管理页面的命令终端→命令处理→USPP名称→UMM节点
下执行[SYNC UMM]命令，生效具有受理权限的角色和受理用户。
SYNC UMM命令的参数说明参见[表1]。
参数名称|参数说明
---|---
NF名称|需同步的NF的名称。
同步类型|选择变化表。
是否立即生效|选择是。
### 用户管理日常操作 
#### 查询和管理登录用户 
摘要 : 
查询并管理当前登录用户的信息。可查询登录用户名，客户端IP地址和登录时间；设置登录用户会话数告警门限值，当系统检测到登录用户数超出某告警设置门限后，自动生成相应级别的告警。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理页面
单击登录用户会话数卡片，在页面下方区域显示登录用户信息，如[图2]所示。
图2  登录用户信息
（可选）设置登录用户会话数门限值。 
单击登录用户会话数告警门限设置按钮，弹出登录用户会话数告警门限设置对话框， 如[图3]所示。
图3  登录用户会话数告警门限设置
设置各类告警门限值，单击确定按钮完成设置。
#### 强制退出用户 
摘要 : 
当安全管理员进行系统维护，或发现用户试图进行非法操作时，安全管理员可以强制断开该用户与ElasticNet UME的连接，迫使该用户退出系统。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理页面
单击登录用户会话数卡片，在页面下方区域显示当前登录用户信息，如[图2]所示。
图2  登录用户信息
执行如下操作将对应登录用户强行退出。 
如果...|那么...
---|---
强行退出一个用户|在登录用户会话数列表框中用户所在行的操作列，单击强制退出按钮，弹出强制退出对话框。单击退出按钮，强制用户退出登录。
强行退出多个用户|单击登录用户会话数列表框的复选框，选择需要强制退出的用户。单击登录用户会话数列表框上方的强制退出按钮，弹出强制退出对话框。单击退出按钮，强制多个用户退出登录。
#### 解锁用户 
摘要 : 
用户账户规则中设置了账户锁定的时效及对应的锁定条件。如果用户账户规则的锁定时效参数设置为暂时锁定或永久锁定，用户密码输入错误次数达到了设置的密码错误次数后，ElasticNet UME将锁定该用户账户。
安全管理员可以查看用户锁定情况，并对用户进行解锁操作。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理页面。系统默认显示所有用户信息。
单击锁定用户/人卡片，在页面下方区域显示当前锁定的用户信息，包括被锁定用户、锁定者IP以及锁定时间，如[图1]所示。
图1  当前锁定用户
在列表框中锁定用户所在行的操作列栏，单击解锁按钮，将对应的用户解锁。
#### 禁用用户 
摘要 : 
当指定用户不被允许登录ElasticNet UME时，安全管理员可以将该用户禁用。
用户被禁用后，不能登录ElasticNet UME。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理页面。
在需要禁用的用户对应的操作列列，选择菜单更多→禁用
，如[图1]所示。
图1  禁用用户
在禁用用户确认对话框中，选择禁用。
图2  禁用用户
相关任务 : 
任务|操作
---|---
启用用户|在需启用的用户操作列列，选择菜单更多→启用。在确认对话框中，单击启用。
#### 批量修改用户密码 
摘要 : 
批量修改除安全管理员以外的所有用户的密码，该修改不受任何有关密码规则的限制。可根据需要选择需修改密码的用户，将选中用户的密码修改为统一密码。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理
单击批量修改密码，弹出批量修改密码对话框，如[图2]所示。
图2  批量修改密码对话框
在密码输入框中输入新密码，在确认密码输入框中再次输入新密码。
 说明： 
密码长度输入范围：[8,64]，并必须包含大写字母、小写字母、数字和特殊字符。 
在用户的待选项列表中选择用户，选中的用户自动添加至已选项栏。
单击确定，确认批量修改用户密码。
#### 批量绑定账户规则 
摘要 : 
绑定用户功能用于将账户规则与多个用户进行批量绑定，可根据需要将多个用户的账户规则批量修改为统一的指定账户规则。 
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单账户规则，打开账户规则页面，如[图1]所示。ElasticNet UME提供默认的账户规则，可以在列表框的规则名称列单击默认规则，查看默认账户规则的参数设置。
图1  账户规则
单击绑定用户按钮，打开绑定用户对话框，如[图2]所示。
图2  绑定用户
从账户规则下拉列表框中选择账户规则。
在用户待选项列表中选择用户，单击确定按钮完成规则的批量绑定。
### 接入系统 
#### 接入下级系统 
摘要 : 
本节介绍如何在ElasticNet UME客户端接入下级系统，例如CNIA/CNOC。
前提 : 
下级系统中需要有安全管理员用户，且该用户只由下级系统管理。 
步骤 : 
在安全管理页面，选择菜单接入系统，进入接入系统页面，如[图1]所示。
图1  接入系统页面
单击新建系统，在新建系统页面，填写需要接入的下级系统参数，如[图2]所示。
图2  新建系统页面
单击新建，新接入的系统出现在列表中，如[图3]所示。
图3  新接入的系统出现在列表中
#### 收集下级系统角色 
摘要 : 
在创建安全管理用户并下发给下级系统之前，需要先收集下级系统角色。可以在角色收集对话框查看是否将接入系统中的角色收集成功。
前提 : 
已接入下级系统。 
步骤 : 
在安全管理页面，选择菜单接入系统，打开接入系统页面，如[图1]所示。
图1  接入系统页面
勾选已接入的系统，单击角色收集，弹出角色收集对话框，如[图2]所示。
图2  角色收集对话框
系统收集下级系统的角色，单击确定。
### 下发安全管理用户 
摘要 : 
下级系统角色收集完成后，才能创建并下发安全管理用户给下级系统。 
步骤 : 
创建安全管理用户
在安全管理页面，选择菜单用户管理，打开用户管理页面，如[图1]所示。
图1  用户管理页面
单击新建用户，在新建用户页面，填写安全管理用户的基本参数，如[图2]所示。
图2  创建安全管理用户
单击下一步，在权限分配页签，选择从下级系统收集到的角色，如[图3]所示。
 说明： 
如果系统中存在与下级系统安全管理员同名的用户，则该用户不能绑定下级系统角色，避免下发用户失败。 
图3  选择从下级系统收集到的角色
单击新建，新创建的安全管理用户下发到下级系统中。新创建的安全管理用户也同时出现在列表中。
查询已下发的安全管理用户
在安全管理页面，选择菜单用户下发状态，在用户下发状态页面可以查看已下发的安全管理用户，如[图4]所示。
图4  用户下发状态页面
（可选）选择用户名称、下级系统名称和下发状态，单击查询，筛选下发用户。如果存在下发失败的用户，可以单击下发用户，手动下发安全管理用户。
### 安全数据维护 
#### 参数设置 
##### 设置用户闲置退出时间 
摘要 : 
设置了用户闲置退出时间参数后，如果登录用户在设置时间内没有任何操作，ElasticNet UME会自动注销该用户。默认用户闲置退出时间为30分钟，建议设置不能小于10分钟，否则会影响用户正常的持续使用。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单参数配置，打开参数配置页面。
单击修改按钮，在认证相关配置区域内设置用户闲置退出时间参数。
图1  设置用户闲时退出时间
单击确定按钮完成修改。
##### 设置同名用户同时登录数限制 
摘要 : 
系统默认不限制同名用户同时登录系统的数量。本任务介绍如何设置同名用户同时登录ElasticNet UME系统的用户数量。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单参数配置，打开参数配置页面。
单击修改按钮，在认证相关配置区域，选择同名用户同时登录数限制为自定义，并在文本输入框中输入数值。
图1  设置同名用户同时登录数限制
单击确定按钮完成修改。
##### 修改登录横幅信息 
摘要 : 
ElasticNet UME默认关闭登录横幅。如果将登录横幅状态设置为开启状态，当用户登录时会出现登录横幅显示页面，用户必须单击接受按钮，才能进入系统。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单参数配置，打开参数配置页面。
单击修改按钮，在登录横幅相关配置区域，选择登录横幅状态为开启。如[图1]所示。
图1  参数配置
在登录横幅描述区域，修改横幅内容，单击确定按钮，完成修改。
#### 认证方式配置 
ElasticNet UME除了支持本地认证，还支持与第三方认证服务器对接，实现远端认证。运营商可将登录信息统一部署在第三方认证服务器上。用户登录ElasticNet UME系统时，由第三方认证服务器实现用户的鉴权。
ElasticNet UME支持多种远端认证协议，包括：RADIUS认证、LDAP/LDAPS、LDAP/LDAPS+本地、4A票据等。
ElasticNet UME默认使用本地认证方式。
相关对接的配置指导可以联系中兴通讯技术支持工程师获取。 
##### 配置本地认证 
摘要 : 
本地认证中心为用户提供统一的身份合法性校验服务。 
本地认证中心包括令牌管理功能，提供获取和校验令牌服务。用户获取到令牌后，该令牌作为用户的一个临时身份许可，用户可以借此来获取一定的系统服务。 
本地认证的令牌在用户身份认证合法之后才予以发放，其有效期支持在系统中可配置。用户身份认证合法后，还需要验证通过该用户设置的安全策略，才被认为是合法用户。 
oAuth2.0提供四种授权模式： 
授权模式|说明
---|---
授权码模式|授权码模式是先获取用户授权码，再通过授权码获取访问令牌的方式，是oAuth2.0的最标准的授权模式。
简化模式|简化模式是应用于只有客户端的微型应用场景，所有认证在浏览器侧完成。EM中业务逻辑都由服务器处理，所以没有该使用场景。
用户凭证模式|用户凭证模式，通过用户凭证（用户名/密码）换取访问令牌的方式，该方式是用户非常信任该认证客户端，可以把密码交给认证客户端的场景下使用，在本系统中可用于北向或者南向对外接口的调用认证。该模式的流程就是传入用户凭证，就可以获取到用户访问令牌。
客户端模式|客户端模式，是用认证客户端代替用户的认证方式，基本不采用。除非应用与资源服务器是非常可信的关系。
步骤 : 
在安全管理页面，选择菜单认证方式配置，打开认证方式配置页面，如[图1]所示。
图1  本地认证
 说明： 
系统默认是采用本地认证。本地认证，用户名和密码保存在本地ElasticNet UME系统。
如果需要选择其他的认证方式，单击修改按钮，在认证方式下拉框中选择本地即可。
##### 配置中移4A认证 
摘要 : 
4A是指：认证Authentication、授权Authorization、记账Accounting、审计Audit，中文名称为统一安全管理平台解决方案。即将身份认证、授权、记账和审计定义为网络安全的四大组成部分，从而确立了身份认证在整个网络安全系统中的地位与作用。 
中移的网络安全管控平台通过账号同步管理接口对ElasticNet UME账号进行集中统一的管理。ElasticNet UME账号的权限管理部分，中移网络安全管控平台通过同步接口实现ElasticNet UME侧帐号角色的新增、修改和删除，并完成账号与角色的关联关系建立。角色内部包含的权限信息由ElasticNet UME内部完成。
安全管控平台采用JNDI方式操作ElasticNet UME厂商提供的虚拟LDAP。ElasticNet UME侧提供给安全管控平台具有登录并操作LDAP权限的账号。
ElasticNet UME接入安全管控平台后，对账号的创建、删除、修改密码等操作必须在安全管控平台中完成。在安全管控平台创建ElasticNet UME的账号后即可使用此账号登录并操作ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择中移4A，页面如[图1]所示。
图1  中移4A认证
设置相关参数，单击确定按钮，完成认证方式的配置。
##### 配置Radius认证 
摘要 : 
RADIUS远程用户拨号认证系统，是目前最广泛的3A协议，即同时兼顾Authentication、Authorization及Accounting三种服务的协定。
Radius协议认证机制灵活，支持PAP、CHAP等认证方式。
Radius服务器对用户的认证过程通常需要利用NAS等设备的代理认证功能，Radius 客户端和服务器之间通过共享密钥认证相互间交互的消息，用户密码采用密文方式在网络上传输，增强了安全性。Radius协议合并了认证和授权过程，即响应报文中携带了授权信息。 
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择Radius，使用Radius认证，用户名和密码保存在Radius服务器。页面如[图1]所示。
图1  Radius认证
参数名|参数说明
---|---
认证方式|选择Radius。
Radius服务器IP地址|RADIUS服务器的IP地址。
Radius服务器端口|RADIUS服务器的端口号。
Radius秘钥|保存在RADIUS服务器上用于用户认证的密码。
Radius超时时间(秒)|设置RADIUS认证时，网络连接等待时间。在设定的时间内如果没有收到RADIUS server返回的应答，登录失败。
Radius验证类型|系统支持以下两种验证类型：PAP：简单明文验证方式。CHAP：加密验证方式，避免建立连接时传送用户的真实密码。
根据对接Radius服务器相关参数，修改相关配置，单击确定按钮，完成认证方式的配置。
##### 配置LDAP/LDAPS认证 
摘要 : 
LDAP称为轻量目录访问协议，系统和LDAP服务器之间的通信支持普通方式（不加密）、SSL//TLS方式。采用LDAP/LDAPS认证方式，用户信息存储在LDAP服务器上。 
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择LDAP/LDAPS，页面如[图1]所示。
图1  LDAP/LDAPS认证
参考[表1] ，输入相关参数，单击确定按钮，完成认证方式的配置修改。
参数|说明
---|---
认证方式|选择LDAP/LDAPS。
服务器IP地址|LDAP服务器IP地址。
服务器端口|LDAP服务器端口，根据LDAP服务器具体配置来填写。使用非SSL/TLS方式连接LDAP服务器，默认：389。使用SSL/TLS方式连接LDAP服务器，默认：636。
使用Windows Active Directory|选中该项时，则需要填写用户基底参数，即用户的完整DN。用户基底：用户DN前缀：服务账号DN：服务账号密码
使用固定用户DN后缀|选中该项时，则需要配置如下参数：用户DN前缀：需要登录系统的用户在LDAP服务器中的DN前缀，例如：cn=。用户DN后缀：需要登录系统的用户在LDAP服务器中的DN后缀，例如：ou=account,ou=system。
使用固定角色|选中使用固定角色，则 LDAP用户角色 选择用系统定义好的固定角色，例如，系统管理员、系统维护员、系统操作员、系统监控员、安全管理员等。不选中使用固定角色 ，则 角色基底需要输入用于查询LDAP服务器中用户关联的角色。
使用SSL/TLS|选中使用SSL/TLS，表明通过TLS/SSL连接LDAP服务。需要上传LDAP服务使用的SSL的CA证书文件和证书密码。
##### 配置LDAP/LDAPS+本地认证 
摘要 : 
LDAP/LDAPS+本地认证模式下，在LDAP认证失败后，且用户不是从LDAP中同步的用户，系统尝试使用本地ElasticNet UME系统保存的用户名和密码进行认证。 
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择LDAP/LDAPS+本地，页面如[图1]所示。
图1  LDAP/LDAPS+本地认证
参考[表1]，输入相关参数，单击确定按钮，完成认证方式的配置修改。
参数|说明
---|---
认证方式|选择LDAP/LDAPS。
服务器IP地址|LDAP服务器IP地址。
服务器端口|LDAP服务器端口，根据LDAP服务器具体配置来填写。使用非SSL/TLS方式连接LDAP服务器，默认：389。使用SSL/TLS方式连接LDAP服务器，默认：636。
使用Windows Active Directory|选中该项时，则需要填写用户基底参数，即用户的完整DN。用户基底：用户DN前缀：服务账号DN：服务账号密码
使用固定用户DN后缀|选中该项时，则需要配置如下参数：用户DN前缀：需要登录系统的用户在LDAP服务器中的DN前缀，例如：cn=。用户DN后缀：需要登录系统的用户在LDAP服务器中的DN后缀，例如：ou=account,ou=system。
使用固定角色|选中使用固定角色，则 LDAP用户角色 选择用系统定义好的固定角色，例如，系统管理员、系统维护员、系统操作员、系统监控员、安全管理员等。不选中使用固定角色 ，则 角色基底需要输入用于查询LDAP服务器中用户关联的角色。
使用SSL/TLS|选中使用SSL/TLS，表明通过TLS/SSL连接LDAP服务。需要上传LDAP服务使用的SSL的CA证书文件和证书密码。
##### 配置4A票据认证 
摘要 : 
ElasticNet UME系统支持与运营商的4A系统进行对接，实现用户账户的集中安全认证。
相关信息 : 
4A系统是统一安全管理平台，包含认证（Authentication）、账号（Account）、授权（Authorization）、审计（Audit），它可以实现集中认证管理、集中账号管理、集中权限管理和集中审计管理的功能。 
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择4A票据，页面如[图1]所示。
图1  4A票据认证
参考[表1]，设置相关参数。
参数|说明
---|---
认证方式|4A票据。
服务器地址|4A认证服务器地址。
票据认证URL|默认值：  /sso?method=qryUserByTicket。请根据实际情况填写。
票据注销URL|默认值：  /sso?method=logout。请根据实际情况填写。
4A登录URL|可以不填。
本系统Portal|在中移4A系统中配置ElasticNet UME的访问地址： https://ip:port/api/oauth2/v1/chinamobile  ，其中ip和port填写访问ElasticNet UME的浮动IP地址和端口。在中移4A中系统中，访问该地址时需要携带正确的票据信息ticket，票据正确后会跳转到portal中。例如，访问地址：https://10.74.151.54:28001/api/oauth2/v1/chinamobile?ticket=*******。
单击确定按钮，完成认证参数设置。
##### 配置NFV票据认证 
摘要 : 
对接中移4A系统进行登录，采用NFV票据认证方式认证登录用户。 
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择NFV票据，页面如[图1]所示。
图1  NFV票据认证
参考[表1]，设置相关参数。
参数|说明
---|---
认证方式|NFV票据。
服务器地址|4A认证服务器地址。
票据认证URL|请根据实际情况填写。例如：/casp/qryUserByTicket
票据注销URL|请根据实际情况填写。例如：/casp/logout
4A登录URL|请根据实际情况填写。例如：/casp/auth/login_sy.jsp
APP在4A中编号|请根据实际情况填写。例如：nfvzx
4A状态URL|请根据实际情况填写。例如：/casp/auth/login_sy.jsp。
资源秘钥|请根据实际情况填写。
状态检测超时时间|默认值：0。
Token获取URL|请根据实际情况填写。例如：/casp/v1/security/authentication/token
用户名|请根据实际情况填写。
密码|请根据实际情况填写。
本系统Portal|在中移4A系统中配置ElasticNet UME的访问地址： https://ip:port/api/oauth2/v1/chinamobile ，其中ip和port填写访问ElasticNet UME的浮动IP地址和端口。在中移4A中系统中，访问该地址时需要携带正确的票据信息ticket，票据正确后会跳转到portal中。例如，访问地址：https://10.74.151.54:28001/api/oauth2/v1/?iamcaspticket=*******。
单击确定按钮，完成认证参数设置。
##### 配置OTCP票据认证 
摘要 : 
对接OTCP系统进行登录，采用OTCP票据认证方式认证登录用户。 
步骤 : 
在安全管理页面，选择菜单认证方式配置，进入认证方式配置页面。
单击修改按钮，单击认证方式下拉框，选择OTCP票据，页面如[图1]所示。
图1  OTCP票据认证
参考[表1]，设置相关参数。
参数|说明
---|---
认证方式|OTCP票据。
服务器地址|OTCP服务器地址。
认证客户端ID|请根据实际情况填写。
认证客户端密钥|请根据实际情况填写。
本系统Portal|在OTCP系统中配置ElasticNet UME的访问地址。
单击确定按钮，完成认证参数设置。
#### 开启金库模式 
摘要 : 
金库模式功能，即当用户进行危险操作时，网管要能够对危险操作进行二次授权。这些危险操作只有经过具有“二次授权”权限的人员的授权确认后才会生效。二次授权过程中，授权人员会对操作的必要性和危害进行二次评估，以最大限度防止误操作的发生。 
系统管理员用户拥有最高权限，执行操作不需要二次授权。 
安全管理员给系统维护员及以上用户授予并管理“二次授权”权限。 
系统管理员用户、隶属于管理员群组中的用户、被安全管理员授予“二次授权”权限的用户拥有二次授权权限。 
被安全管理员授予“二次授权”权限的用户不能自已给自己授权，必须由另外一个具有”二次授权“权限的用户授权。 
需要二次授权的操作包括： 
网元许可证管理：“批量发布”和“批量回滚”功能需要二次授权。网元许可证管理操作参见网元许可证管理。 
删除网元代理：只要执行删除操作，就需要二次授权。 
命令处理：命令终端的某些命令，需要二次鉴权。哪些命令需要二次鉴权由提供命令的模块决定。 
系统默认二次授权功能不开启。如果需要开启，则由安全管理员开启并配置需要二次授权操作的网元以及相关操作属性。 
前提 : 
以安全管理员用户登录ElasticNet UME系统。
步骤 : 
在安全管理页面，选择菜单金库模式参数配置，打开金库模式参数配置页面，如[图1]所示。
图1  金库模式参数配置
选择发布许可证，参考[表1]，配置二次授权操作的相关属性，如[图2]所示。（回滚许可证开启二次授权操作，参考发布许可证的授权设置操作。）
图2  启用发布许可证操作的金库模式
参数|说明
---|---
金库模式|默认：不启用。如果需要则开启。
二次授权资源|指定对哪些网元的操作需要二次授权。
资源二次授权门限|允许一次操作的对象数量。当一次操作的对象数量低于该门限时，不需要二次授权，当一次操作的对象数量大于或等于该门限时需要二次授权。
资源禁用门限|当一次操作的对象数量大于或等于该门限时，操作会被拦截禁止。
选择删除代理，单击修改按钮，设置二次授权，页面如[图3]所示。（命令处理开启二次授权操作，参考删除代理设置操作。）
图3  启用删除代理操作的金库模式
单击确定，完成授权设置。
#### 安全数据管理 
ElasticNet UME提供安全管理指引，以及安全数据的备份与恢复。
##### 备份用户管理数据 
摘要 : 
系统支持以.xlsx文件格式导出自定义配置的安全数据。导出的安全数据信息包括用户信息、角色信息以及用户组信息。
前提 : 
以安全管理员账户登录ElasticNet UME。
步骤 : 
在安全管理页面，选择菜单安全指引，打开安全指引页面，如[图1]所示。
图1  安全指引
单击导出安全数据，弹出导出安全数据对话框，如[图2]所示。
图2  导出安全数据
配置导出安全数据参数。参数说明参见[表1]。
参数|说明
---|---
安全数据|系统支持导出自定义用户信息，自定义角色信息，以及自定义用户组信息。用户信息：包含用户名、用户全名、状态、用户描述、电话号码、邮箱、所属用户组、所属角色以及同时登录数限制。角色信息：包含角色名、角色描述、以及锁定状态。用户组信息：包含用户组名、用户组描述、以及所属用户组。
登录密码|输入当前账号登录系统的密码。
文件加密|选择是否文件加密。加密后，打开文件或者导入文件时需要输入密码。
文件密码/确认文件密码|文件加密密码，长度不能小于8位，且必须包含字母、数字、特殊字符。
 说明： 
导出安全数据时，不能导出admin用户信息、纯网元用户信息、预定义角色信息以及根用户组信息。 
配置完成，单击导出按钮，将安全数据信息以xlsx格式导出到本地磁盘。
##### 恢复用户管理数据 
摘要 : 
重新安装系统或者升级系统后，可以导入备份的安全数据，方便快捷的恢复系统用户管理配置。导入的安全数据信息包括用户信息、角色信息以及用户组信息。 
前提 : 
以安全管理员账户登录系统ElasticNet UME。 
安全数据已经导出并做好备份。 
步骤 : 
在安全管理页面，选择菜单安全指引，打开安全指引页面，如[图1]所示。
图1  安全指引
单击导入安全数据，打开导入安全数据页面，如[图2]所示。
图2  导入安全数据
单击选择文件按钮，选择安全数据备份文件。
配置导入安全数据参数，参数说明参见[表1]。
参数|说明
---|---
文件密码|请选择需要导入的安全数据文件，若文件已加密，请输入文件的解密密码。
登录密码|输入当前账号登录系统的密码。
文件中包含用户|如果备份安全数据包含用户信息，选择该选项。
新增用户初始密码/确认新增用户初始密码|导入数据时，需要为为导入的用户设置统一的初始密码。初始密码长度不能小于8位，且必须包含字母、数字、特殊字符。
单击导入按钮，系统开始导入安全数据信息。
 说明： 
执行导入操作后，系统会显示导入结果。如果某信息导入失败，系统会显示失败原因。 
## 缩略语 
## 缩略语 
IMSI : 
International Mobile Subscriber Identity国际移动用户标识
### ISDN 
International Subscriber Directory Number国际用户目录号
### LDAP 
Lightweight Directory Access Protocol轻量级目录访问协议
### LDAPS 
LDAP over SSL安全LDAP
### NAI 
Network Access Identifier网络接入标识
### PUI 
Public User Identity公开用户标识
### PVI 
Private User Identity私有用户标识
### SSL 
Secure Sockets Layer安全套接字层
## 日志管理 
### 日志管理概述 
#### 功能简介 
ElasticNet UME系统支持日志查询、日志统计和日志输出功能。日志管理的各项操作必须在用户被赋予操作权限的条件下进行。
日志查询用户通过设置查询过滤条件，查询日志信息。日志查询结果可以导出到本地硬盘，导出文件格式为csv、txt或xlsx。日志查询条件可保存为常用查询模板，便于快速过滤待关注的日志。 
日志统计通过趋势图、块状图、条形图等图形形式展示指定时间段内的日志统计信息，便于直观的分析特定时间段内系统的操作状态及运行情况。 
日志输出为了保证充足的数据库空间，ElasticNet UME支持将日志导出到本地硬盘中保存。为了保证充足的硬盘空间，用户可以设置日志输出任务，ElasticNet UME定期检测日志，并将满足条件的日志定时输出到到syslog服务器或FTP服务器中保存。 
#### 日志分类 
ElasticNet UME系统支持三类日志：安全日志、系统日志和操作日志。三种类型的日志定义参考[表1]。
日志类型|定义|日志级别|触发场景
---|---|---|---
安全日志|安全日志记录与ElasticNet UME系统安全相关的操作信息，用于发现安全风险及安全问题。|非常重要、重要、注意、普通|安全管理员触发，例如：用户登录、会话超时、用户解锁。
系统日志|系统日志记录网元或ElasticNet UME系统运行过程中信息，用于分析系统运行状态，便于排障和问题定位。|致命、严重、重要、警告、提醒、正常|系统自动运行触发，例如：性能数据汇总。
操作日志|操作日志记录用户在ElasticNet UME上进行的操作信息（不包括影响系统安全的操作信息），用于分析用户操作是否对系统正常运行造成影响。|非常重要、重要、注意、普通|用户操作触发，例如：新增用户、修改网元。
应用场景 : 
ElasticNet UME系统支持存储和管理运行过程中的日志信息。通过查看并分析日志信息，发现安全风险，排查故障或及时做出规避动作。
例行维护例行维护过程中，定期查询操作日志，监控用户进行的非法操作或在非正常时间段进行的非法操作。 
排除故障排障过程中，查询致命或严重的日志信息，分析用户是否有影响安全的操作或系统是否执行了致命级别的操作，便于定位问题，及时排除故障。 
### 查询日志 
按时间、级别、操作结果、操作对象、用户名称、主机地址、操作类型、详细信息等条件查询日志，并可将结果导出成csv文件。
#### 查询操作日志 
摘要 : 
本节介绍如何查询操作日志。 
步骤 : 
在日志管理页面，选择菜单日志查询，打开日志查询页面，如[图1]所示。
图1  操作日志
参考[表1]，设置通用查询条件。
参数名称|参数说明
---|---
操作结果|设置查询操哪种结果状态的日志。状态包括：成功、失败。可以多选。
级别|设置查询哪个级别的日志。级别包括：非常重要、重要、注意、普通。可以多选。
操作对象|筛选对象资源类型。
时间|设置查询哪个时间段的日志。时间段选项包括：今天、最近7天、最近30天、全部、自定义。选择自定义，需设置具体的起止时间范围。
（可选）单击高级条件按钮，设置高级查询条件，如[图2]所示。
图2  操作日志-高级查询条件
参数名称|参数说明
---|---
用户名称|设置按用户名称查询操作日志。用户包括所有有操作记录的用户。如果不选择，则查询所有用户的操作日志。
客户端地址|设置按客户端IP地址查询操作日志。根据客户端IP地址来选择客户端，如果不选择，则查询所有客户端的操作日志。
接入方式|设置按接入方式查询操作日志。如果不选择，则查询所有接入方式的操作日志。
操作名称|设置按操作类型查询操作日志。在下拉列表中选择要查询的操作类型。如果不选择，则查询所有操作类型的操作日志。
功能模块|设置按功能模块查询操作日志。如果不选择，则查询所有功能模块操作日志。
详细信息|输入查询关键字，单击，在操作日志的详情的详细信息描述中进行模糊匹配，查询相关的操作日志。
单击查询按钮，页面显示按照设置条件过滤后的日志信息，如[图3]所示。
图3  操作日志查询结果
查询结果相关字段说明参考[表3]。
参数名称|参数说明
---|---
详情|操作日志的详细信息，包括操作描述和重要参数。如果操作结果是失败，还包括失败原因说明。
功能模块|日志按功能模块分类。
操作名称|具体的操作类型。
操作对象|操作对应的资源对象。如果是对ElasticNet UME系统本身的操作，则显示EM。如果是对网元的操作，则显示网元名称。
对象地址|操作对象的IP地址。
级别|日志的重要程度。包括：非常重要、重要、注意、普通，等级依次降低。操作和对应的操作级别是在系统预定义配置好的。
操作结果|包括成功、失败两种结果。
用户名称|执行相关操作的用户。
操作开始时间|操作的开始时间，精确到年月日时分秒。
操作结束时间|操作的结束时间，精确到年月日时分秒。
客户端地址|EM客户端IP地址。
接入方式|客户端的接入模式，包括：WEB、SSH、API、GUI 、TELNET。
相关任务 : 
任务|操作
---|---
保存当查询条件|单击保存查询条件，保存自定义设置的查询条件。单击我的查询条件，可以查看已保存自定义查询条件。
重置查询条件|单击重置，恢复系统默认的查询条件。
导出查询结果|单击导出结果，将查询的日志结果以文件形式保存到本地。文件格式：csv/txt/xlsx.
#### 查询安全日志 
摘要 : 
本节介绍如何查询安全日志。 
步骤 : 
在日志管理页面，选择菜单日志查询，切换到安全日志页面，如[图1]所示。
图1  安全日志
参考[表1]，设置通用查询条件。
参数名称|参数说明
---|---
操作结果|设置查询操哪种结果状态的日志。状态包括：成功、失败。可以多选。
级别|设置查询哪个级别的日志。级别包括：非常重要、重要、注意、普通。可以多选。
时间|设置查询哪个时间段的日志。时间段选项包括：今天、最近7天、最近30天、自定义、全部。选择自定义，需设置具体的起止时间范围。
（可选）单击高级条件按钮，设置高级查询条件，如[图2]所示。
图2  安全日志-高级条件
参数名称|参数说明
---|---
用户名称|设置按用户名称查询安全日志。用户包括所有有安全日志记录的用户。如果不选择，则查询所有用户的安全日志。
客户端地址|设置按客户端IP地址查询安全日志。根据客户端IP地址来选择客户端，如果不选择，则查询所有客户端的安全日志。
接入方式|设置按接入方式查询安全日志。如果不选择，则查询所有接入方式的安全日志。
日志名称|设置按日志名称查询安全日志。如果不选择，则查询所有安全日志。
详细信息|输入查询关键字，单击，在安全日志的详情的详细信息描述中进行模糊匹配，查询相关的安全日志。
单击查询按钮，页面显示按照设置条件过滤后的日志信息，如[图3]所示。
图3  安全日志查询结果
查询结果相关字段说明参考[表3]。
参数名称|参数说明
---|---
详情|安全日志的详细信息，包括操作描述和重要参数。如果操作结果是失败，还包括失败原因说明。
日志名称|安全日志名称。
用户名称|执行相关操作的用户。
级别|日志的重要程度。包括：非常重要、重要、注意、普通，等级依次降低。操作和对应的操作级别是在系统预定义配置好的。
操作时间|操作发起时间，精确到年月日时分秒。
操作结果|包括成功、失败两种结果。
客户端地址|EM客户端IP地址。
接入方式|客户端执行操作时的接入模式。
相关任务 : 
任务|操作
---|---
保存查询条件|单击保存查询条件，保存自定义设置的查询条件。单击我的查询条件，查看已保存的自定义查询条件。
重置查询条件|单击重置，恢复系统默认的查询条件。
导出查询结果|单击导出结果，将查询的日志结果以文件形式保存到本地。文件格式：csv/txt/xlsx.
#### 查询系统日志 
摘要 : 
本节介绍如何查询系统日志。 
步骤 : 
在日志管理页面，选择菜单日志查询，切换到系统日志页面，如[图1]所示。
图1  系统日志
参考[表1]，设置通用查询条件。
参数名称|参数说明
---|---
级别|设置查询哪个级别的日志。级别包括：致命、严重、重要、警告、提醒、正常。可以多选。
时间|设置查询哪个时间段的日志。时间段选项包括：今天、最近7天、最近30天、自定义、全部。选择自定义，需设置具体的起止时间范围。
（可选）单击高级条件按钮，设置高级查询条件，如[图2]所示。
图2  系统日志-高级条件
参数名称|参数说明
---|---
日志名称|设置按日志名称查询系统日志。如果不选择，则查询所有系统日志。
来源|系统日志的来源。
详细信息|输入查询关键字，单击，在系统日志的详情的详细信息描述中进行模糊匹配，查询相关的系统日志。
单击查询按钮，页面显示按照设置条件过滤后的日志信息，如[图3]所示。
图3  系统日志查询结果
查询结果相关字段说明参考[表3]。
参数名|说明
---|---
详情|系统日志的详细信息，显示系统操作结果，包含关键信息和重要参数。
日志名称|系统日志名称
级别|日志的重要程度。包括：致命、严重、重要、警告、提醒、正常，等级依次降低。操作和对应的操作级别是在系统预定义配置好的。
来源|微服务名称 。
操作开始时间|操作的开始时间，精确到年月日时分秒。
操作结束时间|操作的结束时间，精确到年月日时分秒。
主机地址|微服务的IP地址。
相关任务 : 
任务|操作
---|---
保存查询条件|单击保存查询条件，保存自定义设置的查询条件。单击我的查询条件，查询已保存的自定义查询条件。
重置查询条件|单击重置，恢复系统默认的查询条件。
导出查询结果|单击导出结果，将查询的日志结果以文件形式保存到本地。文件格式：csv/txt/xlsx.
### 查看日志统计信息 
摘要 : 
本节介绍如何查看日志统计信息。 
本节以查询“操作日志”为例说明，查看日志信息的统计信息。统计项目包括级别、操作结果、Top5操作、Top5客户端地址 和Top5用户5个分项的内容。
步骤 : 
在日志管理页面，选择菜单日志统计，进入日志统计页面。
选择查询日志统计信息的时间范围（例如，最近7天），选择日志类型（例如，操作日志），如[图1]所示。
图1  日志统计
在趋势图中，选择级别，查看其趋势图和具体统计信息，如[图2]所示。
图2  级别-趋势图和统计信息
每个项目的统计信息有趋势图和单项统计图： 
在趋势图中，单击 趋势图以柱状图展示。单击 趋势图以折线图展示。 
单项统计图以饼状图、条状图等形式展现，单击具体条目还可以查看详情。 
在环形图中单击各级别日志（例如：重要），页面下方将显示详细信息，如[图3]所示。
图3  级别-重要
### 导出日志 
日志输出仅支持输出ElasticNet UME自身的日志信息。当任务状态为激活时，ElasticNet UME系统可以将日志信息输出至第三方日志服务器。
系统支持以下两种日志服务器： 
FTP/SFTP服务器：系统每天定时将前一天的日志文件输出到指定的FTP/SFTP服务器上。 
Syslog服务器：系统实时将日志信息输出到指定的Syslog服务器上。 
#### 导出日志到FTP服务器 
摘要 : 
ElasticNet UME可以定时将日志文件输出到指定的FTP/SFTP服务器。
步骤 : 
在日志管理页面，选择菜单日志输出，默认打开FTP配置页签。
单击修改按钮，拖动激活按钮，修改任务为开启状态，并设置输出的日志类型和周期，如[图1]所示。
图1  设置输出的日志类型和周期
参数名|参数说明
---|---
激活|任务状态为激活时，点亮配置页面，可进行参数设置。
日志类型|当前输出的规范：输出规范需要预先设置。选择菜单系统→配置中心→系统配置→日志配置，具体参见设置日志输出规范。操作日志：用户在ElasticNet UME系统的操作记录，包括用户进行的操作、操作起始时间、操作结果，以及用户的接入方式等信息。安全日志：主要记录用户的登录、注销、会话超时等。系统日志：主要记录网元的连接状态等系统信息。
周期设置|设置日志输出的粒度和周期。
语言|根据需要选择中文、英文。
在服务器信息设置区域，设置FTP/SFTP服务器的相关参数信息，如[图2]所示。
图2  FTP/SFTP服务器信息设置
参数名|参数说明
---|---
服务器地址/端口|第三方FTP/SFTP服务器地址/端口。
用户名|第三方FTP/SFTP服务器登录用户名。
密码|第三方FTP/SFTP服务器登录密码。
路径|日志保存在FTP/SFTP服务器的路径。
在清理设置区域，选择是否要开启日志数据清理，以及日志文件的最长保存时间，如[图3]所示。
图3  清理设置
参数名|参数说明
---|---
清理|选择是否需要开启日志文件清理功能。
文件保存最大天数|启用日志文件清理后，设置日志文件在FTP/SFTP服务器上的最长保存时间（单位：天）。
参数设置完成后，单击确定 ，配置信息设置成功。
#### 导出日志到Syslog服务器 
摘要 : 
ElasticNet UME可以实时将日志信息输出到指定的Syslog服务器。
步骤 : 
在日志管理页面，选择菜单日志输出，切换到Syslog配置页签。
单击修改按钮，拖动激活按钮，修改任务为开启状态，如[图1]所示。
图1  Syslog配置
参考[表1]，设置任务类型和服务器信息 。
参数|参数说明
---|---
类型|激活|任务状态为激活时，点亮配置页面，可进行参数设置。
日志类型|类型|当前输出的规范：输出规范需要预先设置。选择菜单系统→配置中心→系统配置→日志配置，具体参见设置日志输出规范。操作日志：用户在EM系统的操作记录，包括用户进行的操作、操作起始时间、操作结果，以及用户的接入方式等信息。安全日志：主要记录用户的登录、注销、会话超时等。系统日志：主要记录网元的连接状态等系统信息。
语言|类型|根据需要选择中文、英文。
服务器信息|服务器地址/端口|第三方Syslog服务器地址/端口。
字符集|服务器信息|Syslog服务器的字符编码方式。
参数设置完成后，单击确定 ，配置信息设置成功。
## 缩略语 
## 缩略语 
FTP : 
File Transfer Protocol文件传输协议
SFTP : 
Secure File Transfer Protocol安全文件传输协议
## 配置管理 
### 命令终端 
#### 命令终端概述 
##### 功能 
当下级被管理网元接入ElasticNet UME系统后，需要对新接入的网元进行性能测量相关设置，包括测量指标、测量对象、测量周期的设置，确保网元的性能测量结果可以正常上报至ElasticNet UME服务器，供客户端进行查询。
命令终端是网管系统提供给工程技术人员的命令行工具。通过在此工具中输入单命令或批处理命令，实现对网管对象的管理功能。 
 说明： 
主要介绍命令终端窗口及其相关操作说明，需要结合网元设备的MML命令手册使用。 
##### 窗口 
命令终端窗口如[图1]所示。
图1  命令终端
人机命令树：单击拓扑树中的一个网元节点，该区域显示对应的人机命令。也可以使用关键字搜索到相关的命令。 
资源拓扑树：显示接入的网元。 
命令处理区：显示命令执行的文本结果、操作结果、帮助。 
命令输入区：输入命令和参数。 
#### 按图形窗口执行命令 
摘要 : 
本节介绍如何通过命令终端窗口的人机命令树，对目标管理对象执行单条MML命令。 
步骤 : 
选择菜单命令终端→命令处理
，进入命令处理页面。在资源拓扑树上选择一个目标网元节点，人机命令树上自动刷新并显示其对应的MML命令。也可通过搜索方式查询网元。
选择一条要执行的MML命令，命令框中参数显示区输入的对应参数，下面的MML命令就显示相应的输入值，如[图1]所示。
图1  选中命令
单击执行按钮执行命令。命令执行成功，在文本结果页中显示命令执行的结果信息，如[图2]所示。
图2  执行结果
相关任务 : 
将执行结果区内的信息保存到本地，参见“保存命令执行结果”。 
查看已经执行过的操作记录，参见“查看操作记录”。 
了解命令功能和参数，参见“获取命令帮助”。 
##### 保存命令执行结果 
摘要 : 
本节介绍如何保存命令执行结果。命令执行结果是将执行结果区内的信息以.html格式文件保存到本地。
步骤 : 
选择菜单命令终端→命令处理
，进入命令处理页面。
选择命令处理框的文本结果，显示命令执行的结果，如[图1]所示。
图1  文本结果
单击导出，将文本结果导出到本地，如[图2]所示。
图2  导出按钮
导出按钮有4个选项，含义说明参见[表1]。
参数|说明
---|---
全部导出|将所有命令执行结果保存到一个文件中（txt或者html格式）。
按资源节点导出|筛选命令执行结果，将同一资源节点的执行结果保存到一个文件中（txt或者html格式）。
（可选）单击清空按钮，清除命令执行的文本结果。
（可选）单击设置按钮，设置显示的数量，如[图3]所示。
图3  设置显示数量
##### 查看操作记录 
摘要 : 
本介绍如何查看已经执行过的操作记录。每条操作记录记录着命令执行时间、执行结果（成功或失败）、命令内容等信息。 
步骤 : 
选择菜单命令终端→命令处理
，进入命令处理页面。
选择操作记录，显示操作的执行记录，如[图1]所示。
图1  查看操作记录
单击查看结果按钮，在操作记录页面显示执行结果，如[图2]所示。
图2  查看结果
单击回显命令按钮，在命令框显示命令参数，并显示执行的结果，如[图3]所示。
图3  回显命令
##### 获取命令帮助 
摘要 : 
本节介绍如何从命令处理窗口获取命令帮助，了解命令功能和参数。
步骤 : 
选择菜单命令终端→命令处理
，进入命令处理页面。在拓扑树上选择目标资源节点，人机命令树上自动刷新并显示其对应的MML命令。
在人机命令树上选择要获得帮助的MML命令，单击命令处理框的帮助， 显示 MML命令的帮助信息，如[图1]所示。
图1  查看帮助
#### 批量执行命令 
摘要 : 
本节介绍如何批量执行人机命令。 
用户将需要执行的多条命令，导入批处理文件，运行批处理文件即可。批处理文件最多支持50000条命令，且导入文件大小不超过1M。 
步骤 : 
选择菜单命令终端→批处理
，进入批处理页面。如[图1]所示。
图1  批处理
选择资源类型，单击选择，在弹出的对话框中选择需要执行批处理的资源节点。
单击导入按钮，从本地导入批处理文件。或者在命令窗口现场编辑批处理命令。
单击执行按钮，批量执行命令。
#### 创建定时任务 
摘要 : 
本节介绍如何创建定时任务，定期执行MML命令。 
步骤 : 
选择菜单命令终端→定时任务
，进入定时任务页面，如[图1]所示。
图1  定时任务页面
单击新建按钮。弹出新建任务对话框，如[图2]所示。
图2  新建任务
参考[表1]设置相关参数。
参数名称|参数说明
---|---
基本信息|名称|定时任务名称。不能包含 \/:;?"'*|$<>%#
描述|基本信息|定时任务的描述说明。
状态|基本信息|激活、挂起。激活状态时该任务生效。
周期信息|执行策略|可以单次执行，也可以周期执行。周期执行可以选择按照天、周、月、小时执行任务。
操作对象|MML命令|可以直接编辑MML命令，或者单击导入导入MML命令。
资源类型|操作对象|选择定时任务生效的资源节点。
单击新建按钮，系统显示新建任务成功提示，新建任务出现在定时任务列表中，如[图3]所示。
图3  定时任务
相关任务 : 
任务名称|任务说明
---|---
修改定时任务|当定时任务状态为已挂起时，单击操作栏中修改按钮，进入定时任务修改页面。修改定时任务信息并单击保存按钮。
查看定时任务详情|单击详情栏中按钮，查看定时任务详情。
激活定时任务|定时任务状态为已挂起时，单击操作栏中激活按钮，至状态栏状态为已激活。
挂起定时任务|定时任务状态为已激活时，单击操作栏中挂起按钮，至状态栏状态为已挂起。
批量删除定时任务|当定时任务状态为已挂起时，选择需要删除的定时任务，单击删除按钮。
查看定时任务日志|单击操作栏中日志按钮，查看定时任务日志信息。
#### 创建群发脚本 
摘要 : 
本节介绍如何创建群发脚本，通过脚本文件导入来执行相关命令。 
步骤 : 
选择菜单命令终端→脚本群发
，进入脚本群发页面，如[图1]所示。
图1  脚本群发页面
单击导入按钮，打开脚本导入页面，如[图2]所示。
图2  脚本导入
选择资源类型并选择资源节点，设置MML命令，参考[表1]。
参数|说明
---|---
MML命令|单击编辑按钮，现场编辑需要执行的MML命令脚本。单击导入，从本地选择需要导入脚本文件。
资源类型|在导航树中选择需要群发执行命令的资源节点。
单击新建按钮，执行脚本。
脚本执行结果在执行结果界面显示。
#### 配置MML参数 
摘要 : 
维护人员可以通过SSH方式接入ElasticNet UME并执行命令。系统可以配置某一用户名的并发接入数，超过该数量的SSH接入将被拒绝。
系统支持新建用户并发数，并且可以对用户并发数进行修改、删除等操作。 
步骤 : 
选择菜单命令终端→参数配置
，进入参数配置页面，如[图1]所示。
图1  参数配置页面
单击新建按钮，打开设置并发数量页面，填写用户名和并发数，如[图2]所示。
图2  设置并发数量页面
单击确定按钮。
若用户名不存在，弹出”新建用户配置失败，请输入正确的用户名”。 
用户名存在，回到参数配置首页并弹出“新建用户配置成功”。 
相关任务 : 
任务名称|任务说明
---|---
删除用户并发数|单击参数配置列表上的删除按钮。在弹出的删除确认框中单击确认按钮，界面回到参数配置首页并重新加载参数配置列表并弹出“删除用户配置成功”。
修改用户并发数|单击修改按钮，弹出设置并发数量页面，修改用户并发数量。单击确定按钮，回到参数配置首页并弹出“修改用户配置成功”。
### 脚本设计器 
UMER18_Open_Script_Designer 
概述 : 
OSD是一款基于Python的在线脚本编辑器，提供以下功能。
支持Python V3.6版本语法。 
支持按照UME业务来自定义SDK函数库。比如调用RESTful接口、操作MML命令等。 
支持编写脚本功能，实现定制化脚本的需求。比如编写批量修改配置参数的脚本、编写生成数据报表文件的脚本、编写定时清理文件目录的脚本等。 
支持工作流在线编辑功能，通过编辑可将零散脚本编排为一个脚本工程。比如将多个零散的定位故障脚本编排为一个全流程定位故障的脚本。 
为了方便使用者快速编程，UME的在线帮助中提供了OSD的编程指南，详细地介绍了Python基础语法和脚本应用开发SDK，具体进入在线帮助的操作参见[获取在线帮助]。
#### 支持的操作 
脚本工程： 
支持对脚本工程进行搜索、新建、修改、删除、导入和导出等操作。 
支持对脚本工程进行编写、调试、发布、语法检查等操作。 
工作流工程： 
支持对工作流工程进行搜索、新建、编辑、删除、导入和导出等操作。 
支持对工作流工程进行格式化、发布等操作。 
#### 管理脚本工程 
摘要 : 
在脚本设计器页面显示脚本设计列表，可查看当前的脚本工程。
使用者可以新建脚本工程，对当前脚本工程进行修改和删除操作，在脚本设计器页面还提供对脚本工程进行搜索、按列搜索和列定制功能。
步骤 : 
登录UME系统，打开UME主页面。
单击脚本设计器图标，默认打开脚本设计器页面的应用工程子页面，如[图1]所示。
图1  脚本设计器页面
OSD页面按钮的操作说明参见[表1]。
操作|按钮|说明
---|---|---
新建||单击该按钮，新建脚本工程。
导入||单击该按钮，导入脚本工程文件。文件的格式为*.oad或*.owd，文件大小限制为20 M。导入的脚本工程文件的settings文件里面的工程名属性值，不能与工程列表中已有的脚本工程一样。
编辑||单击该按钮，修改对应的脚本工程。
删除||单击该按钮，删除对应的脚本工程。
导出||单击该按钮，将对应的脚本工程导出到本地保存，保存的文件格式为*.oad。
搜索||在搜索框中输入关键字，根据关键字搜索脚本工程。
列搜索||单击该按钮，可按照名称、创建人、更新时间查找脚本工程。
列定制||单击该按钮，选中需要显示的表头字段，以定制需要显示的脚本设计列表头。该功能只对当前用户生效。
#### 使用脚本设计器 
##### 应用工程页面介绍 
###### 新建脚本工程 
在应用工程页面，单击新建工程按钮，打开新建工程对话框，如[图1]所示。
图1  选择工程类型
选择工程类型后单击确认按钮，进入页面如[图2]所示。
图2  新建工程
输入工程名和描述信息，并选择相应的模板，单击新建按钮，打开资源管理器页面，如[图3]所示。
 说明： 
目前模板下拉框支持三种模板样例，若不选择，则为默认模板。 
图3  脚本工程资源管理器页面
工程目录 
脚本输入区 
###### 工程目录 
工程目录以节点的形式显示当前脚本工程的所有脚本文件。 
新建脚本工程时，OSD已定义了__init__.py、main.py和settings文件，文件说明参见“[脚本应用工程文件说明]”。
在工程目录上，可添加文件，具体操作可参见“[编写脚本]”。
###### 按钮说明 
脚本输入区的按钮说明参见[表1]。
操作|按钮|说明
---|---|---
保存||单击该按钮，可将当前脚本工程保存。
另存为||通过另存为功能，将脚本复制成另一个脚本，并保存在工程列表中。单击该按钮，打开另存为对话框。在新工程名输入框中输入另存为的工程名称。单击保存按钮，在工程列表中可以看到另存为的工程。
撤销||在脚本编写过程中，支持编写记录回退，单击该按钮，能够撤销上一步的操作。
恢复||在脚本编写过程中，支持编写记录恢复，单击该按钮，能够恢复上一步的操作。
设置||单击该按钮，显示settings页面，用户可根据需要设置工程、参数以及国际化信息。
显示/隐藏控制台|/|单击该按钮，显示或隐藏脚本执行结果以及语法检查结果。
调试||单击该按钮，输入相应脚本参数（无参数脚本不弹出参数输入框），能看到当前脚本的运行结果。
语法检查||单击该按钮，系统将自动校验当前脚本编写是否正确。
终止||在调试过程中，单击该按钮，终止调试脚本。执行终止操作后运行中的脚本进程将被杀死。使用此功能会导致数据不一致，请谨慎使用。
发布||单击该按钮，将脚本发布成*.oap格式的文件。发布后的脚本，可以在OSE APP的业务包管理功能中查看到。
帮助||编辑脚本工程页面提供了界面帮助，帮助使用者快速进行脚本设计。单击该按钮，打开帮助页面。
返回||单击该按钮，返回OSD页面。
##### 脚本应用工程文件说明 
创建一个脚本应用工程默认包含__init__.py、settings、main.py三个文件。
main.py文件说明
main.py文件用于编写脚本代码，文件内必须定义一个execute(**kw)函数作为脚本程序的主入口，此函数不可修改。
如[图1]所示定义execute(**kw)函数作为脚本程序的主入口。
图1  定义主入口
settings文件说明
settings文件可以设置脚本工程的描述、脚本输入参数以及国际化等信息。
单击设置按钮，显示settings页面，如[图2]所示。
图2  settings文件--工程信息
settings页面由工程信息、参数信息、国际化以及输出设置四部分组成。
工程信息工程信息包含工程名、描述信息、说明文档、输出样例和重要操作提示，用户除不能修改工程名外，其他信息可根据自己的需求完成修改。说明文档主要帮助用户更好的使用工程，其中包括工程的背景说明、参数设置、限制说明等信息，用户可根据其内容更深层次地了解该工程的作用。其中说明文档大小限制为20 M，上传的文档命名长度不超过30个字符。输出样例为用户提供可视化的输出结果模板，方便用户可以直观地了解到工程的运行结果。其中模板大小限制为20 M，上传的模板命名长度不超过30个字符。用户可根据需求上传说明文档和输出样例并发布至OSE中，方便使用者使用。 
参数信息此处设置的参数即为脚本的输入参数，根据脚本设计需求在此新建参数，在脚本中可通过参数名称获取参数值。详细介绍参见“管理参数”。 
国际化此页签用于用户自定义工程名称、工程描述、重要操作提示、参数名称以及参数描述的对应中英文。 
输出设置此页签用于用户自定义工程的输出类型，这个设置决定了运行脚本时的展示形式。 
##### 管理参数 
摘要 : 
用户在编写脚本时，如果需要新建参数，可参考本节内容（以新建Number类型参数为例）。对于新建成功的参数，支持对参数进行修改、删除、分组及设置关联参数。 
步骤 : 
打开settings页签，切换到参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新增参数对话框
根据需要填写参数信息。参数设置项说明参见[表1]。
属性|名称|说明
---|---|---
基本属性|参数名|参数名称，在脚本中可通过此名称获取参数的值，不能重复。必填项。
类型|基本属性|根据需要选择不同类型的参数。在OSE中执行脚本时会根据所选类型显示不同的效果。必填项。
可选|基本属性|设置参数为可选项或必选项。脚本执行前会进行空校验，如果不是可选参数则不能为空，否则无法执行。选填项。
描述|基本属性|对设置的参数进行描述。必填项。
扩展属性|约束|通过约束对参数的输入进行校验。选填项。
默认值|扩展属性|给参数设定的一个参考值。选填项。
扩展字段|扩展属性|为不同类型的参数设置附加功能。选填项。
单击新建按钮，新增的参数信息显示在参数信息页面中，如[图2]所示。Number类型参数新建成功。
图2  新增的参数信息
（可选）如果需要继续添加其他类型参数，重复步骤[1]~步骤[3]。
（可选）对参数信息页面的所有参数，单击设置联动参数按钮，可为参数设置分组和关联参数。
##### 获取在线帮助 
OSD提供脚本编写的帮助文档，帮助使用者快速进行脚本设计。
在脚本编辑器页面，单击脚本输入区的按钮，可打开帮助文档界面，如[图1]所示。
图1  帮助文档界面
##### 编写脚本 
摘要 : 
本节介绍如何编写脚本，以及在编写过程中检查脚本编写是否正确和查看脚本的运行结果。 
OSD脚本支持Python 3.9语言，同时支持调用RESTful接口、MML命令等。
步骤 : 
编写脚本内容
在应用工程页面，选择[新建工程→脚本工程]，打开新建工程对话框。
输入工程名和描述信息，选择相应的模板，单击新建按钮，打开资源管理器页面，如[图1]所示。
图1  资源管理器页面
根据需要编写脚本，例如输出“Hello UME!”，即在main.py文件中编写代码print ('Hello UME!') 
，如[图2]所示。
图2  编写脚本
（可选）新增文件夹、新增文件或导入文件
如[图3]所示鼠标悬放在工程目录的工程名节点上（本次编辑的脚本工程名为demo），根据脚本设计需求，可选择单击按钮新增文件、单击按钮新增文件夹以及单击按钮导入文件。创建成功的文件夹、创建成功的文件、及导入成功的文件会显示在工程目录树上，如[图4]所示。
图3  创建脚本文件按钮
图4  新增文件夹/文件夹及导入文件结果
 说明： 
导入文件大小限制为20 M。 
将鼠标悬放在文件夹节点上，可新建子文件夹、新建子文件、导入子文件、重命名该文件夹以及删除该文件夹。删除文件夹之后，文件夹下面的所有文件都会被删除。 
将鼠标悬放在文件节点上，可重命名文件以及删除该文件。 
不能修改main.py文件的文件名且不允许删除该文件。 
（可选）检查语法
单击按钮，检查当前脚本编写是否正确，检查结果如[图5]所示。
图5  语法检查结果
结果显示区的按钮说明参见[表1]。
操作|按钮|说明
---|---|---
清空日志||单击该按钮，清空当前显示的结果。
复制日志||单击该按钮，复制当前显示的结果至粘贴板。
资源监控||单击该按钮，查看脚本执行实例资源监控曲线图。
（可选）查看运行结果
单击按钮，查看当前脚本的运行结果，如[图6]所示。
图6  执行结果
单击按钮，可以将执行结果下载到本地。
保存脚本
单击按钮，保存当前脚本工程。
##### 发布脚本工程 
摘要 : 
脚本开发完成后，需要将脚本发布成 *.oap。
步骤 : 
在脚本设计器页面的工程列表中，单击需要发布的脚本工程，进入对应脚本工程的脚本编辑器页面。
单击按钮，打开发布确认框，如[图1]所示。
图1  发布确认框
单击发布按钮。
发布成功后弹出“脚本发布成功”提示框，可在OSE APP应用管理页面查看当前发布的脚本工程即业务包。
 说明： 
当需要执行脚本工程时，操作过程参见“脚本执行引擎
”。
#### 工作流应用工程页面介绍 
##### 功能简介 
工作流应用工程提供工作流的在线编辑功能，可将零散脚本编排为一个脚本工程。新建工作流应用工程有两种模式：视图模式和源码模式，用户可根据需要选择。 
在工作流应用工程页面可新建、修改、删除、发布工作流工程。
##### 进入工作流应用工程页面 
在应用工程页面，选择新建工程→工作流工程
，单击确定打开新建工程对话框，如[图1]所示。
图1  新建工作流工程对话框
输入工程名和描述信息，并选择默认模板，单击新建按钮，打开工作流应用工程页面，如[图2]所示。
 说明： 
目前模板下拉框只支持一种模板样例，若不选择，则为默认模板。 
图2  工作流应用工程页面
节点区域 
画布区域 
属性区域 
工作流应用工程页面主要分为三部分：节点区域、画布区域、属性区域。用户可将节点拖拽至画布，通过连线的方式完成流图的绘制，单击相应节点可在属性区域设置参数。完成的工作流应用工程，可通过发布按钮完成发布。
工作流应用工程右上方按钮说明参见[表1]。
操作|按钮|说明
---|---|---
设置||单击该按钮，显示settings页面，可参考脚本应用工程文件说明，帮助使用者设置工程、参数以及国际化信息。
保存||单击该按钮，可保存当前工作流工程。
另存为||通过另存为功能，将工作流工程复制成另一个工作流工程，并保存在工程列表中。
发布||单击该按钮，将脚本发布成*.owf或*.cwf格式的文件。发布后的脚本，可以在OSE APP的应用管理中查询到。
在线帮助||单击该按钮，可打开帮助文档页面。
##### 节点区域 
节点区域各节点说明参见[表2]。
节点|节点类型|按钮|说明
---|---|---|---
基本节点|开始||流图的开始。
结束|基本节点||流图的结束。
判断|基本节点||流图的一项判定或一个分岔点，通过分支连线上的标识确定下一步执行的节点。
手工确认|基本节点||流图的等待节点，当流图执行到该节点时，会等待执行，用户手工确认后，流程继续执行。若超过用户设置的时间，流程自动终止。
延时|基本节点||可设置延迟执行的时间，延时后继续执行下一个节点。比如设置两秒，流程执行到这个节点会延时两秒，然后继续执行下一个节点。
通用节点|脚本||流图的业务节点，主要为OSE中的脚本应用。
HTTP|通用节点||流图的业务节点，通过http/https的形式访问接口信息。
代码块|通用节点||流图的业务节点，通过编写javascript代码块的方式进行逻辑处理，供后续节点使用。
##### 画布区域 
画布区域主要用于工作流图的绘制，画布上方的工具栏说明参见[表3]。
操作|按钮|说明
---|---|---
撤销||在流图绘制过程中，支持编写记录回退，单击该按钮，能够撤销上一步的操作。
恢复||在流图绘制过程中，支持编写记录恢复，单击该按钮，能够恢复上一步的操作。
复制||单击该按钮，可以复制画布中的节点或连线。
粘贴||单击该按钮，可以将复制节点或连线粘贴在画布中。
删除||单击该按钮，删除已选中的节点或连线。
放大||单击该按钮，可放大整个画布。
缩小||单击该按钮，可缩小整个画布。
恢复视图||单击该按钮，可将绘制的流图居中、放大展示。
居中||单击该按钮，可将绘制的流图居中展示在画布上。
小地图||单击该按钮，画布右下方显示小地图，当画布中节点较多时，可通过小地图查看流图。
##### 属性区域 
属性区域包含节点属性和业务参数两部分，用于节点名称和参数的设置。单击节点，右侧显示属性区域，如[图3]所示。
图3  工作流工程属性区
用户在属性区可以设置节点的名称和参数的值。其中参数的设置包括两种方式，分别为输入方式和引用方式。当参数设置为“输入方式”时，用户可以直接编辑参数值；当参数设置为“引用方式”时，用户可引用全局参数或上游节点的值。 
#### 编程指南 
##### 脚本应用开发SDK 
开放脚本平台的目标是通过 Python + SDK，达到快速交付用户需求。平台内置了nemo基础 SDK， 并通过 UME 插件包的方式支持 SDK 的扩展。 
另外， 目前支持以 SDK 插件方式导入第三方库，支持模型驱动，任何小产品都可以根据需求和规范开发自己的 SDK 或导入第三方库 。 
###### 1. 基础 SDK 
除了 python 和其扩展包支持的脚本开发能力，平台提供了丰富的基础设施。 
基础 SDK 结构
内置的 SDK 结构如下： 
|- nemo # 基础sdk|-- rest|-- file|-- log|-- ftp|-- path|-- util|-- context|-- ucli|-- step|-- ui
nemo
提供基础功能类库，功能描述如下： 
分类|函数说明|示例
RESTful接口调用函数|模块: nemo.rest.client.RestClient函数：get(service_name, uri, body=None, headers={}, timeout=60)描述： 请求RESTful接口的GET操作返回值：返回执行结果|# -*- coding: utf-8 -*-  from nemo.rest.client import RestClientfrom nemo.log import loggerimport jsonlogger = logger()def execute(**kw):    rc = RestClient()    result = rc.get('res', '/mes')    mes = json.loads(result)    logger.info("Total " + str(len(mes)) + " NE")
模块: nemo.rest.client.RestClient函数：post(service_name, uri, body, headers={}, timeout=60)描述： 请求RESTful接口的POST操作返回值：返回执行结果|RESTful接口调用函数|# -*- coding: utf-8 -*- from nemo.rest.client import RestClientfrom nemo.log import loggerlogger = logger()def execute(**kw):    rc = RestClient()    body = {        "terms": {"status": [-1]}    }    result = rc.post(        'ofd-access', '/ose/logs/_search', body)    logger.info(result)
模块: nemo.rest.client.RestClient函数：put(service_name, uri, body, headers={}, timeout=60)描述： 请求RESTful接口的PUT操作返回值：返回执行结果|RESTful接口调用函数|# -*- coding: utf-8 -*- from nemo.rest.client import RestClientfrom nemo.log import loggerlogger = logger()def execute(**kw):    rc = RestClient()    body = {        'projectName': 'Test',        'desc': 'Test project description'    }    result = rc.put('service_name', 'your_url', body)    logger.info(result)
模块: nemo.rest.client.RestClient函数：delete(service_name, uri, body=None, headers={}, timeout=60)描述： 请求RESTful接口的DELETE操作返回值：返回执行结果|RESTful接口调用函数|# -*- coding: utf-8 -*- from nemo.rest.client import RestClientfrom nemo.log import loggerlogger = logger()def execute(**kw):    rc = RestClient()    result = rc.delete('service_name', 'your_url')    logger.info(result)
文件操作函数|CSV 文件操作nemo.file.CsvWriter( file_name )描述：返回csv对象，使用csv对象可以进行csv文件的读写操作，最终文件会保存在用户执行结果目录，生成的文件可以通过脚本任务结果下载链接获取到本地参数：file_name: csv文件前缀名,名称会加时间戳返回值: csv对象文件路径： csv文件可以在任务执行完成后，通过界面的结果文件下载。|# -*- coding: utf-8 -*-from nemo.file import CsvWriterdef execute(**kw):    try:        csv_writer = CsvWriter('test')        csv_writer.writerow(            ['ID', 'Name', 'Description'])        csv_writer.writerow(            [1, 'OSD', 'Open Script Designer'])        csv_writer.writerows((            [2, 'OSE', 'Open Script Execution Engine'],            [3, 'OAS', 'Open API']))    finally:        csv_writer.close()
csv_writer.writerow(row)将参数 row 写入 writer 的文件对象|文件操作函数|# -*- coding: utf-8 -*-from nemo.file import CsvWriterdef execute(**kw):    try:        csv_writer = CsvWriter('test')        csv_writer.writerow(            ['ID', 'Name', 'Description'])        csv_writer.writerow(            [1, 'OSD', 'Open Script Designer'])        csv_writer.writerows((            [2, 'OSE', 'Open Script Execution Engine'],            [3, 'OAS', 'Open API']))    finally:        csv_writer.close()
csv_writer.writerows(rows)将参数 rows 写入 writer 的文件对象|文件操作函数|# -*- coding: utf-8 -*-from nemo.file import CsvWriterdef execute(**kw):    try:        csv_writer = CsvWriter('test')        csv_writer.writerow(            ['ID', 'Name', 'Description'])        csv_writer.writerow(            [1, 'OSD', 'Open Script Designer'])        csv_writer.writerows((            [2, 'OSE', 'Open Script Execution Engine'],            [3, 'OAS', 'Open API']))    finally:        csv_writer.close()
日志记录函数|nemo.log描述: 返回日志记录器（支持info,warn,error级别打印）,日志会保存在用户执行结果目录，生成的文件可以通过脚本任务结果下载链接获取到本地返回值: 日志记录器文件路径： 日志文件可以在任务执行完成后，通过界面的结果文件下载。|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
info(msg)打印info级别日志|日志记录函数|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
warn(msg)打印warning级别日志|日志记录函数|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
error(msg)打印error级别日志|日志记录函数|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
FTP操作函数|FtpClient('ip',21,'username','password')描述： 创建Ftp客户端对象，参数为ip、端口、用户名、密码，必填参数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
connect()描述：连接到ftp服务器|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
disconnect()描述：断开ftp连接|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
mkdir(dir)描述：在服务器上创建文件夹，参数为文件夹路径。|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
rmdir(dir)描述：删除服务器上的文件夹，参数为文件夹路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get(remote_path, local_path)描述：下载文件，参数为服务端文件路径、本地文件路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
put(local_path, remote_path)上传文件，参数为本地文件路径、服务端文件路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get_ftp(）描述：返回ftp对象实例，用于对ftp更多的操作|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
exists(remote_path)描述：判断远端的目录是否存在，参数为服务端文件路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
SFTP操作函数|SftpClient('ip', port, 'username', 'password')描述：创建Sftp客户端对象，参数为ip、端口、用户名、密码，必填参数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
connect()描述：连接到Sftp服务器|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
disconnect()描述：断开Sftp连接|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
mkdir(dir)描述：在服务器上创建文件夹，参数为文件夹路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
rmdir(dir)描述：删除服务器上的文件夹，参数为文件夹路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get(remote_path, local_path)描述：下载文件，参数为服务端文件路径、本地文件路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
put(local_path, remote_path)描述：上传文件，参数为本地文件路径、服务端文件路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get_sftp(）描述：返回sftp对象实例，用于对sftp更多的操作|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
exists(remote_path)描述：判断远端的目录是否存在，参数为服务端文件路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
路径获取|get_result_root()描述：获取输出结果的根目录，此目录中的内容会被打包成附件|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
get_parameter_file_path(parameter_value)描述：获取文件类型参数的绝对路径。参数：parameter_value ：文件参数的参数取值|路径获取|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
get_csv_root()描述：获取输出csv的根目录|路径获取|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
get_data_root()描述：获取输出数据的根目录，此目录用于放置用户自定义的输出数据|路径获取|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
压缩解压缩接口|compress()描述：压缩文件|# -*- coding: utf-8 -*-from nemo.util.compress.CompressUtil import CompressUtilfrom nemo.util.compress.CompressType import CompressTypedef execute(**kw):    CompressUtil(CompressType.zip).compress(        'logs', 'logs.zip')    CompressUtil(CompressType.tar).compress(        'logs', 'logs.tar')    CompressUtil(CompressType.gz).compress(        'logs.tar', 'logs.tar.gz')
decompress()描述：解压缩文件|压缩解压缩接口|# -*- coding: utf-8 -*-from nemo.util.compress.CompressUtil import CompressUtilfrom nemo.util.compress.CompressType import CompressTypedef execute(**kw):    CompressUtil(CompressType.zip).decompress(        'logs.zip', 'logs_zip_out')    CompressUtil(CompressType.tar).decompress(        'logs.tar', 'logs_tar_out')    CompressUtil(CompressType.gz).decompress(        'logs.tar.gz', 'logs_gz_out')
获取上下文|get_language_option()描述：获取当前语言环境|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_trigger_type()描述：获取触发类型，DEBUG、ONCE等|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_username()描述：获取用户名|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_transaction_id()描述：获取事务 id|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_header_keys()描述：获取header的keys，header是单次执行应用请求传递的header|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_header(key)描述：获取header中key的值|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
UCLI|connect_ucli()，ucli_client()描述：建立ucli连接|# -*- coding: utf-8 -*-from nemo.cli import ucli_clientdef execute(**kw):    client = ucli_client()    result = client.send_command('ose help')    client.disconnect()
send_command(self, command)描述：执行ucli命令comman|UCLI|# -*- coding: utf-8 -*-from nemo.cli import ucli_clientdef execute(**kw):    client = ucli_client()    result = client.send_command('ose help')    client.disconnect()
disconnect()描述：断开ucli连接|UCLI|# -*- coding: utf-8 -*-from nemo.cli import ucli_clientdef execute(**kw):    client = ucli_client()    result = client.send_command('ose help')    client.disconnect()
设置关键步骤及执行进度|init(steps)描述：初始化步骤|# -*- coding: utf-8 -*-from nemo.step import ExecuteStepimport timeexecute_step = ExecuteStep()def init_execution_steps():    steps = [        {"number": "1", "name": "start",          "zh": "start", "en": "start"},        {"number": "2", "name": "open_plan_area",          "zh": "open", "en": "open plan area"},        {"number": "3", "name": "end",          "zh": "end", "en": "end"}    ]    execute_step.init(steps)def execute(**kw):     execute_step.run("open_plan_area")    execute_step.run("open_plan_area",         {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})    time.sleep(5)    current_step_detail = {        "name": "open_plan_area",        "status": "Succeed",        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}    }    execute_step.set_result(current_step_detail)
run(name)描述：执行步骤|设置关键步骤及执行进度|# -*- coding: utf-8 -*-from nemo.step import ExecuteStepimport timeexecute_step = ExecuteStep()def init_execution_steps():    steps = [        {"number": "1", "name": "start",          "zh": "start", "en": "start"},        {"number": "2", "name": "open_plan_area",          "zh": "open", "en": "open plan area"},        {"number": "3", "name": "end",          "zh": "end", "en": "end"}    ]    execute_step.init(steps)def execute(**kw):     execute_step.run("open_plan_area")    execute_step.run("open_plan_area",         {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})    time.sleep(5)    current_step_detail = {        "name": "open_plan_area",        "status": "Succeed",        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}    }    execute_step.set_result(current_step_detail)
set_result(current_step_detail)描述：更新步骤|设置关键步骤及执行进度|# -*- coding: utf-8 -*-from nemo.step import ExecuteStepimport timeexecute_step = ExecuteStep()def init_execution_steps():    steps = [        {"number": "1", "name": "start",          "zh": "start", "en": "start"},        {"number": "2", "name": "open_plan_area",          "zh": "open", "en": "open plan area"},        {"number": "3", "name": "end",          "zh": "end", "en": "end"}    ]    execute_step.init(steps)def execute(**kw):     execute_step.run("open_plan_area")    execute_step.run("open_plan_area",         {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})    time.sleep(5)    current_step_detail = {        "name": "open_plan_area",        "status": "Succeed",        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}    }    execute_step.set_result(current_step_detail)
设置聚合表格|set_columns(CustomColumn())描述：设置聚合表格中的自定义列|# -*- coding: utf-8 -*-from nemo.ui.table.workflow_aggregation import WorkflowAggregationTablefrom nemo.ui.table.workflow_aggregation import CustomColumndef execute(**kw):    wg = WorkflowAggregationTable()    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称',                                  order=1, show=True, True,                                  'Shows the workflow name', '展示工作流的名称'),                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度',                                   order=2, show=False)                    CustomColumn('user', 'user_name', '用户名',                                   order=3, show=True, True,                                  'Creator of the workflow application', '工作流应用的创建人')])    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮',                                  description_en='Description of the customized button',                                  description_zh='自定义按钮的描述信息', action_type="ose",                                  ose_action_setting = OseActionSetting(                                                         "applicationName",                                                          "parameterBinding",                                                          parameter_template =""))])    results = []    request = ose.__execute_packet(params, '自动入网开站流程')             workflow_execution_id = request['executionId']    # 当工作流正常执行时    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})         wg.add_data(results)    # 当工作流未正常启动时         results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED,                     "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})          wg.add_data(results)
set_buttons(CustomButton())描述：设置聚合表格中的自定义导出按钮|设置聚合表格|# -*- coding: utf-8 -*-from nemo.ui.table.workflow_aggregation import WorkflowAggregationTablefrom nemo.ui.table.workflow_aggregation import CustomColumndef execute(**kw):    wg = WorkflowAggregationTable()    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称',                                  order=1, show=True, True,                                  'Shows the workflow name', '展示工作流的名称'),                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度',                                   order=2, show=False)                    CustomColumn('user', 'user_name', '用户名',                                   order=3, show=True, True,                                  'Creator of the workflow application', '工作流应用的创建人')])    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮',                                  description_en='Description of the customized button',                                  description_zh='自定义按钮的描述信息', action_type="ose",                                  ose_action_setting = OseActionSetting(                                                         "applicationName",                                                          "parameterBinding",                                                          parameter_template =""))])    results = []    request = ose.__execute_packet(params, '自动入网开站流程')             workflow_execution_id = request['executionId']    # 当工作流正常执行时    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})         wg.add_data(results)    # 当工作流未正常启动时         results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED,                     "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})          wg.add_data(results)
add_data(rows)描述：为聚合表格添加数据|设置聚合表格|# -*- coding: utf-8 -*-from nemo.ui.table.workflow_aggregation import WorkflowAggregationTablefrom nemo.ui.table.workflow_aggregation import CustomColumndef execute(**kw):    wg = WorkflowAggregationTable()    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称',                                  order=1, show=True, True,                                  'Shows the workflow name', '展示工作流的名称'),                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度',                                   order=2, show=False)                    CustomColumn('user', 'user_name', '用户名',                                   order=3, show=True, True,                                  'Creator of the workflow application', '工作流应用的创建人')])    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮',                                  description_en='Description of the customized button',                                  description_zh='自定义按钮的描述信息', action_type="ose",                                  ose_action_setting = OseActionSetting(                                                         "applicationName",                                                          "parameterBinding",                                                          parameter_template =""))])    results = []    request = ose.__execute_packet(params, '自动入网开站流程')             workflow_execution_id = request['executionId']    # 当工作流正常执行时    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})         wg.add_data(results)    # 当工作流未正常启动时         results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED,                     "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})          wg.add_data(results)
ran
提供基础功能类库，功能描述如下： 
分类|函数说明|示例
---|---|---
网元选择器|模块：from ran.util import neutils函数：get_selected_mode(kw, '参数名')描述：获取网元选择器的选择模式|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_ne_list(kw, '参数名')描述：获取不同选择模式下的网元信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_groupids(kw, '参数名')描述：获取不同选择模式下的分组信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_subnetworks(kw, '参数名')描述：获取不同选择模式下的子网信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_ne_groups(kw, '参数名')描述：获取分组模式下的详细分组信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
资源选择器|模块：from ran.util import resourceutils函数：get_selected_type(kw, '参数名')描述：获取资源选择器的资源类型|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import resourceutilslogger = logger()def execute(**kw):    logger.info(resourceutils.get_selected_type(kw, 'resource'))    logger.info(resourceutils.get_resource_list(kw, 'resource'))
模块：from ran.util import resourceutils函数：get_resource_list(kw, '参数名')描述：获取资源选择器的资源列表|资源选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import resourceutilslogger = logger()def execute(**kw):    logger.info(resourceutils.get_selected_type(kw, 'resource'))    logger.info(resourceutils.get_resource_list(kw, 'resource'))
###### 2. 第三方库 
目前平台支持的第三方库如下： 
组件名称|组件版本|组件说明
---|---|---
pandas|1.2.1|Pandas is a fast, powerful, flexible and easy to use open source data analysis and manipulation tool,built on top of the Python programming language.
openpyxl|3.0.9|Openpyxl is a Python library to read/write Excel 2010 xlsx/xlsm/xltx/xltm files.
xlrd|1.2.0|Extract data from Excel spreadsheets (.xls and .xlsx, versions 2.0 onwards) on any platform.
numpy|1.20.3|NumPy is the fundamental package for scientific computing in Python. It is a Python library that provides a multidimensional array object, various derived objects (such as masked arrays and matrices), and an assortment of routines for fast operations on arrays, including mathematical, logical, shape manipulation, sorting, selecting, I/O, discrete Fourier transforms, basic linear algebra, basic statistical operations, random simulation and much more.
XlsxWriter|1.3.7|XlsxWriter is a Python module that can be used to write text, numbers, formulas and hyperlinks to multiple worksheets in an Excel 2007+ XLSX file.
python-docx|0.8.11|python-docx is a Python library for creating and updating Microsoft Word (.docx) files.
##### 脚本应用开发示例 
###### FTP/SFTP操作 
用于连接FTP及SFTP，实现文件的下载和上传，文件夹的相关操作。 
####### 1.FTP 
模块：nemo.ftp 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.ftp import FtpClient
from nemo import path
def execute(**kw):
    cli = FtpClient('ip', port, 'username', 'password')
    try:
        cli.connect()
        if not cli.exists('/report'):
            cli.mkdir('/report')
        remoteFile = '/a/test.txt'
        localFile = path.get_result_root() + '/test_ftp.txt'
        if cli.exists(remoteFile):
            cli.get(remoteFile,  localFile)
        if not cli.exists(localFile):
            cli.put(localFile, '/a/ftp_dest2.txt')
    finally:
        cli.disconnect()` 
接口说明： 
接口名称|说明
---|---
FtpClient('ip', port, 'username', 'password')|创建Ftp客户端对象，参数为ip、端口、用户名、密码，必填参数
connect()|连接到ftp服务器
disconnect()|断开ftp连接
mkdir(dir)|在服务器上创建文件夹，参数为文件夹路径
rmdir(dir)|删除服务器上的文件夹，参数为文件夹路径
get(remote_path, local_path)|下载文件，参数为服务端文件路径、本地文件路径
put(local_path, remote_path)|上传文件，参数为本地文件路径、服务端文件路径
get_ftp(）|返回ftp对象实例，用于对ftp更多的操作
exists(remote_path)|判断远端的目录是否存在，参数为服务端文件路径
####### 2.SFTP 
模块：nemo.ftp 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.ftp import SftpClient
 
def execute(**kw):
    cli = SftpClient('ip', port, 'username', 'password')
    try:
        cli.connect()
        if not cli.exists('/report'):
            cli.mkdir('/report')
         将本地文件上传到服务器
        if not cli.exists('/report/rru.csv'):
            cli.put('/tmp/rru.csv', '/report/rru.csv')
    finally:
        cli.disconnect()` 
接口说明： 
接口名称|说明
---|---
SftpClient('ip', port, 'username', 'password')|创建Sftp客户端对象，参数为ip、端口、用户名、密码，必填参数
connect()|连接到Sftp服务器
disconnect()|断开Sftp连接
mkdir(dir)|在服务器上创建文件夹，参数为文件夹路径
rmdir(dir)|删除服务器上的文件夹，参数为文件夹路径
get(remote_path, local_path)|下载文件，参数为服务端文件路径、本地文件路径
put(local_path, remote_path)|上传文件，参数为本地文件路径、服务端文件路径
get_sftp(）|返回sftp对象实例，用于对sftp更多的操作
exists(remote_path)|判断远端的目录是否存在，参数为服务端文件路径
###### 调用RESTful接口 
实现对UME微服务提供RESTful接口的调用 
####### 1. 基本操作 
对RESTful接口的基本操作都封装在nemo.rest.client.RestClient中，RestClient使用如下： 
` -*- coding: utf-8 -*- 
  rc = RestClient()` 
或者使用带参数构造函数： 
` -*- coding: utf-8 -*- 
  rc = RestClient(namespace="ranoss", version="v1")` 
GET操作
模块：nemo.rest.client.RestClient 
函数：get(service_name, uri, body=None, headers={}, timeout=10) 
描述： 请求RESTful接口的GET操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
import json
logger = logger()
 
def execute(**kw):
    rc = RestClient() 
    result = rc.get('res', '/mes')
    mes = json.loads(result) 
    logger.info("总计" + str(len(mes)) + "个网元")` 
POST操作
模块：nemo.rest.client.RestClient 
函数：post(service_name, uri, body, headers={}, timeout=10) 
描述： 请求RESTful接口的POST操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    rc = RestClient()
    body = {
        'projectName': 'Test',
        'desc': 'Test project description'
    }
    result = rc.post('ofd-access', '/ose/logs/_search', body)
    logger.info(result)` 
PUT操作
模块：nemo.rest.client.RestClient 
函数：put(service_name, uri, body, headers={}, timeout=10) 
描述： 请求RESTful接口的PUT操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    rc = RestClient()
    body = {
        'projectName': 'Test',
        'desc': 'Test project description'
    }
    result = rc.put('service_name', 'your_url', body)
    logger.info(result)` 
DELETE操作
模块：nemo.rest.client.RestClient 
函数：delete(service_name, uri, body=None, headers={}, timeout=10) 
描述： 请求RESTful接口的DELETE操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    rc = RestClient()
    result = rc.delete('service_name', 'your_url')
    logger.info(result)` 
####### 2.并发操作 
对RESTful接口的并发操作都封装在 nemo.rest.client.ParallelRestClient中，默认并发数为10，并发数限制在1~100之间，RestClient使用如下： 
` -*- coding: utf-8 -*- 
  rc = ParallelRestClient()` 
或者使用带参数构造函数： 
` -*- coding: utf-8 -*- 
  rc = ParallelRestClient(namespace="ranoss", version="v1")` 
并发GET操作
模块：nemo.rest.client.ParallelRestClient 
函数：get(service_name, uris, headers=None, timeout=10, parallel_num=10) 
描述： 并发请求RESTful接口的GET操作，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
def execute(**kw):
    prc = ParallelRestClient()
    your_uris = ["/order/1", "/order/2", "/order/3"]
    results = prc.get('service_name', your_uris, timeout=30, parallel_num=10)
    for r in results:
        logger.info(r)` 
并发POST操作
模块：nemo.rest.client.ParallelRestClient 
函数：post(service_name, uri, bodies, headers=None, timeout=10, parallel_num=10) 
描述： 并发请求RESTful接口的POST操作，只支持对同一微服务的同一URL请求不同的body，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    prc = ParallelRestClient()
    your_bodies = [{"a": "1"}, {"a": "2"}]
    results = prc.post('service_name', 'your_url', your_bodies)
    for r in results:
        logger.info(r)` 
并发PUT操作
模块：nemo.rest.client.ParallelRestClient 
函数：put(service_name, requests, headers=None, timeout=10, parallel_num=10) 
描述：并发请求RESTful接口的PUT操作，只支持对同一微服务的不同请求，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    prc = ParallelRestClient()
    request = [{
        'uri': 'your_url1',
        'body': {}
    },
    {
        'uri': 'your_url2',
        'body': {}
    }]
    results = prc.put('service_name', requests)
    for r in results:
        logger.info(r)` 
2.4 并发DELETE操作
模块：nemo.rest.client.ParallelRestClient 
函数：delete(service_name, uris, headers=None, timeout=10, parallel_num=10) 
描述：并发请求RESTful接口的DELETE操作，只支持对同一微服务的请求，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw): 
    prc = ParallelRestClient()
    logger = logger()
    results = prc.delete('service_name', your_uris)
    for r in results:
        logger.info(r)` 
通用的并发操作
模块：nemo.rest.client.ParallelRestClient 
函数：request(requests, parallel_num=10) 
描述：支持对完全不同的请求进行并发处理，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw): 
    prc = ParallelRestClient()
    reqs = [
        {
            'service_name': 'your_service_name',
            'method': 'GET',
            'uri': 'your_uri',
            'body': None,
            'headers': {},
            'timeout': 10
        },
        {
            'service_name': 'your_service_name',
            'method': 'DELETE',
            'uri': 'your_uri'
        }
    ]
    results = prc.request(reqs)
    for r in results:
        logger.info(r)` 
注：request支持的字段如下 
字段名|必填参数|说明
---|---|---
service_name|是|需要请求的服务名称
method|是|需要请求的方法名称： GET DELETE PUT POST等
uri|是|接口的相对路径
body|否|请求体,默认为None
headers|否|请求头,默认为{}
timeout|否|超时时间，默认为10
response_status|否|是否返回状态码，默认为False
###### 调用UCLI命令 
实现UCLI命令的下发。 
####### 1.UCLI操作 
建立UCLI连接
模块 : nemo.cli 
函数 ：connect_ucli()，ucli_client() 
描述 ： 连接UCLI并返回客户端 
返回值 ： UCLI客户端 
示例一： 
` -*- coding: utf-8 -*-
from nemo.cli import connect_ucli
def execute(**kw):
     需要输入用户名和密码
    client = connect_ucli('user', 'password')` 
示例二： 
` -*- coding: utf-8 -*-
from nemo.cli import ucli_client
def execute(**kw):
     无需输入用户名和密码
    client = ucli_client()` 
发送UCLI命令
模块 : nemo.cli 
函数 ：send_command(command) 
描述 ： 利用1.1建立UCLI连接返回的客户端发送UCLI命令 
返回值 ： UCLI命令的执行结果 
示例一： 
` -*- coding: utf-8 -*-
from nemo.cli import connect_ucli
def execute(**kw):
    client = connect_ucli('user', 'password')
    result = client.send_command('ose help')` 
示例二： 
` -*- coding: utf-8 -*-
  
from nemo.cli import ucli_client
  
def execute(**kw):
    client = ucli_client()
    result = client.send_command('ose help')` 
断开UCLI连接
模块 : nemo.cli 
函数 ：disconnect() 
描述 ： 利用1.1建立UCLI连接返回的客户端断开UCLI连接 
返回值 ： 无 
示例一： 
` -*- coding: utf-8 -*-
from nemo.cli import connect_ucli
def execute(**kw):
    client = connect_ucli('user', 'password')
    client.disconnect()` 
示例二： 
` -*- coding: utf-8 -*-
  
from nemo.cli import ucli_client
  
def execute(**kw):
    client = ucli_client()
    client.disconnect()` 
###### 读写文件 
提供CSV的写操作 
####### CsvWriter 
模块 : nemo.file 
示例 ： 
` -*- coding: utf-8 -*-
 
 
from nemo.file import CsvWriter
 
def execute(**kw):
    try:
        csv_writer = CsvWriter('test')
        csv_writer.writerow(['ID', 'Name', 'Description'])
        csv_writer.writerow([1, 'OSD', 'Open Script Designer'])
        csv_writer.writerows((
            [2, 'OSE', 'Open Script Execution Engine'],
            [3, 'OAS', 'Open API']))
    finally:
        csv_writer.close()` 
接口说明： 
接口名称|说明
---|---
CsvWriter('file_name')|创建CsvWriter对象，参数为文件名称
writerow(['ID', 'Name', 'Description'])|写入一行数据
writerows((['ID', 'Name', 'Description']))|写入多行数据
path()|返回CSV文件路径
close()|关闭写对象
###### 获取路径 
用于查询各种输出路径。 
####### 1.path 
模块: nemo.path 
示例 
` -*- coding: utf-8 -*-
from nemo.log import logger
from nemo import path
logger = logger()
def execute(**kw):
    logger.info(path.get_csv_root())
    logger.info(path.get_result_root())
    logger.info(path.get_data_root())` 
接口说明： 
接口名称|说明
path.get_result_root()|获取输出结果文件的根目录，此目录中的内容会在执行完成之后被打包为附件
path.get_csv_root()|获取输出CSV文件的根目录
path.get_data_root()|获取输出数据文件的根目录，此目录用于放置用户自定义的输出数据
path.get_parameter_file_path()|获取文件参数的路径，此路径用于放置用户上传的文件
###### 获取上下文 
用于查询脚本执行上下文信息，包括用户名，语言环境，执行方式，事物ID和客户端IP。 
####### 1.context 
模块: nemo.context 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.log import logger
from nemo import context
logger = logger()
def execute(**kw):
    logger.info("CONTEXT_USERNAME: " + context.get_username())
    logger.info("CONTEXT_LANGUAGE_OPTION: " + context.get_language_option())
    logger.info("CONTEXT_TRIGGER_TYPE: " + context.get_trigger_type())
    logger.info("CONTEXT_TRANSACTION_ID: " + context.get_transaction_id())
    logger.info("CONTEXT_TRANSACTION_ID: " + context.get_client_ip())` 
接口说明: 
接口名称|描述
context.get_username(True)|获取脚本执行的用户名，默认返回编码后的字符串True：返回编码后的字符串False：返回编码前的字符串
context.get_language_option()|获取脚本从用户界面透传的执行语言，例如"en-US"
context.get_trigger_type()|获取脚本执行方式，为ONCE, TIMING, DEBUG中的其中一个
context.get_transaction_id()|获取脚本执行的事物id
context.get_client_ip()|获取触发脚本执行的客户端IP
###### 记录日志 
用于记录日志，日志可以在脚本运行时实时回显，也可以在执行结果附件中查看。 
####### 1. log 
模块 : nemo.log 
示例 ： 
` -*- coding: utf-8 -*-
 
from nemo.log import logger
 
logger = logger()
 
def execute(**kw):
    logger.info('hello osd!')` 
接口说明： 
接口名称|说明
---|---
logger.info('info')|打印info级别日志
logger.error('error')|打印error级别日志
logger.warn('warn')|打印warn级别日志
###### 压缩与解压缩文件 
用于文件的压缩和解压缩。 
####### 1.压缩与解压缩 
模块: nemo.util 
示例 
` -*- coding: utf-8 -*-
from nemo.util.compress.CompressUtil import CompressUtil
from nemo.util.compress.CompressType import CompressType
def execute(**kw):
    CompressUtil(CompressType.zip).compress('logs', 'logs.zip')
    CompressUtil(CompressType.tar).compress('logs', 'logs.tar')
    CompressUtil(CompressType.gz).compress('logs.tar', 'logs.tar.gz')
    CompressUtil(CompressType.zip).decompress('logs.zip', 'logs_zip_out')
    CompressUtil(CompressType.tar).decompress('logs.tar', 'logs_tar_out')
    CompressUtil(CompressType.gz).decompress('logs.tar.gz', 'logs_gz_out')` 
###### 设置关键步骤及执行进度 
提供脚本的执行步骤 
####### ExecuteStep 
模块 : nemo.step 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.step import ExecuteStep
import time
execute_step = ExecuteStep()
def init_execution_steps():
    steps = [
        {"number": "1", "name": "start", "zh": "start", "en": "start"},
        {"number": "2", "name": "open_plan_area", "zh": "open", "en": "open plan area"},
        {"number": "3", "name": "end", "zh": "end", "en": "end"}
    ]
    execute_step.init(steps)
def execute(**kw): 
    execute_step.run("open_plan_area")
    execute_step.run("open_plan_area", 
        {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})
    time.sleep(5)
    current_step_detail = {
        "name": "open_plan_area",
        "status": "Succeed",
        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}
    }
    execute_step.set_result(current_step_detail)` 
接口说明： 
接口名称|说明
---|---
init(steps)|初始化步骤
run(name)|执行步骤
set_result(current_step_detail)|更新步骤
###### 网元选择器 
在网元选择器不同选择模式下，为用户提供网元、分组和子网信息 
####### Neutils 
模块 ：ran.util 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.log import logger
from ran.util import neutils
logger = logger()
def execute(**kw):
    logger.info(neutils.get_selected_mode(kw, 'NE'))
    logger.info(neutils.get_ne_list(kw, 'NE'))
    logger.info(neutils.get_groupids(kw, 'NE'))
    logger.info(neutils.get_subnetworks(kw, 'NE'))
    logger.info(neutils.get_ne_groups(kw, 'NE'))` 
接口说明： 
接口名称|说明
---|---
get_selected_mode(kw, '参数名')|获取网元选择器的选择模式
get_ne_list(kw, '参数名')|获取不同选择模式下的网元信息
get_groupids(kw, '参数名')|获取不同选择模式下的分组信息
get_subnetworks(kw, '参数名')|获取不同选择模式下的子网信息
get_ne_groups(kw, '参数名')|获取分组模式下的详细分组信息
###### 资源选择器 
在资源选择器的不同选择模式下，为用户提供网元、分组、子网以及小区信息。 
####### Resourceutils 
模块 ：ran.util 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.log import logger
from ran.util import resourceutils
logger = logger()
def execute(**kw):
    logger.info(resourceutils.get_selected_type(kw, 'resource'))
    logger.info(resourceutils.get_resource_list(kw, 'resource'))` 
接口说明： 
接口名称|说明
---|---
get_selected_type(kw, '参数名')|获取资源选择器的资源类型
get_resource_list(kw, '参数名')|获取资源选择器的资源列表
###### 聚合表格 
为聚合表格设置自定义列以及添加数据 
####### ui 
模块 ：ui.table.workflow_aggregation 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.ui.table.workflow_aggregation import WorkflowAggregationTable
from nemo.ui.table.workflow_aggregation import CustomColumn
def execute(**kw):
    wg = WorkflowAggregationTable()
    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称', order=1, show=True, True, 
                                 'Shows the workflow name', '展示工作流的名称'),
                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度', order=2, show=False)
                    CustomColumn('user', 'user_name', '用户名', order=3, show=True, True, 
                                 'Creator of the workflow application', '工作流应用的创建人')])
    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮', 
                                 description_en='Description of the customized button',
                                 description_zh='自定义按钮的描述信息', action_type="ose", 
                                 ose_action_setting = OseActionSetting("关联应用的名称", "关联应用的参数名称", 
                                 parameter_template = {"扩展参数":'xxx'}))])
    results = []
    request = ose.__execute_packet(params, '自动入网开站流程')         
    workflow_execution_id = request['executionId']
     当工作流正常执行时
    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})     
    wg.add_data(results)
     当工作流未正常启动时     
    results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED, 
                    "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})      
    wg.add_data(results)
` 
接口说明： 
接口名称|说明
---|---
set_columns(CustomColumn(key, title_en, title_zh, order=1, show=True, is_filter=False, pop_over_title_en=' ', pop_over_title_zh=' '))set_columns(CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度'))|设置聚合表格中的自定义列key：自定义列的标识title_en：自定义列的英文名称title_zh：自定义列的中文名称order：设置列的顺序show：是否显示is_filter：是否包含过滤器pop_over_title_en：自定义列的英文描述信息pop_over_title_zh：自定义列的中文描述信息ReservedColumn.PROGRESS, 'en', 'zh'：设置固定列的中英文名称
set_buttons([CustomButton(name_en=' ', name_zh=' ',                                  description_en=' ', description_zh=' ', action_type="ose", ose_action_setting = OseActionSetting("applicationName", "parameterBinding", parameter_template = " "))])|设置聚合表格中的自定义导出按钮name_en：自定义按钮的英文名称name_zh：自定义按钮的中文名称description_en：自定义按钮的英文描述信息description_zh：自定义按钮的中文描述信息action_type：触发类型，固定为oseapplicationName：关联应用的名称parameterBinding：关联应用的参数名称parameter_template：扩展参数
add_data(rows)|为聚合表格添加数据id：工作流应用的执行IDname：自定义列的key值，用于关联数据与自定义列status：自定义执行结果列中的内容，其中包括三种状态，分别为：'COMPLETED'，'FAILED' 以及 'RUNNING'currentStep：自定义当前步骤列中的内容
##### 脚本参数设置指南 
###### 新建String类型参数 
摘要 : 
参数描述：字符串类型，用户可以输入任何文本字符串。 
参数约束：可以通过配置constraints属性对输入值进行校验，如constraints = ''d+"，则输入参数必须为数字。 
使用场景：常用参数类型，兼容各种场景。使用最普遍，这里不做赘述。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建String类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
约束|正则表达式|选填|^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$
默认值|符合约束字段的值|选填|username@zte.com.cn
提示信息|参数的提示信息，zh：中文；en：英文（中英文为选填项）|选填|{     "zh": "username@zte.com.cn",     "en": "username@zte.com.cn"}
前缀|参数是否显示前缀|选填|Touch
是否只读|参数是否仅具有读权限True：参数信息仅具有读权限False：参数信息具有编辑权限|选填|关闭
单击新建按钮，String类型的参数新建成功，如[图2]所示。
图2  String类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite 
 Created: 2020-10-28 
 Purpose: String 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    string = kw['String']
    logger.info('Touch: ' + string)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  String参数显示
单击确认按钮，执行结果如[图4]所示。
图4  String参数执行结果
###### 新建Number类型参数 
摘要 : 
参数描述：数字类型，支持整数、浮点数、正负数。 
参数约束：可以通过配置constraints属性对输入值进行校验，如constraints="[0,120]"，输入122则校验不通过。 
使用场景：常用参数类型，兼容各种场景。常用来做阈值判断，如清理类脚本，当达到设定的阈值后，执行清理操作。这里不做赘述。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Number类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
约束|数据的取值范围|选填|[1,60]
默认值|符合约束字段的值|选填|30
小数位数|为参数设定小数点后最多保留的位数，若不设置该字段，则取默认值为：0|选填|3
步长|为参数设定增减值，若不设置该字段，则取默认值为：1；若设置步长，在调试过程中，可通过输入框右侧的“上下按钮”增减参数的值|选填|3
单位|参数是否显示单位|选填|s
提示信息|参数的提示信息，zh：中文；en：英文（中英文为选填项）|选填|{    "zh": "时间间隔",    "en": "Time Interval"}
单击新建按钮，Number类型的参数新建成功，如[图2]所示。
图2  Number类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: Number 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    Number = kw['Number']
    logger.info('Time Interval is ' + Number)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Number参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Number参数执行结果
###### 新建Password类型参数 
摘要 : 
参数描述：密码类型，为满足安全需求，界面上统一显示为“..”。 
参数约束：密码参数不能设置默认值。 
使用场景：很多业务脚本使用的接口需要鉴权后才能调用。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Password类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
开启密码确认|参数是否展示确认密码框|选填|打开
单击新建按钮，Password类型的参数新建成功，如[图2]所示。
图2  Password类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite 
 Created: 2020-10-28 
 Purpose: Password 类型
 ---------------------------------------------------------
from nemo.log import logger
from nemo import context
logger = logger()
def execute(**kw):
    username = context.get_username()
    password = kw['Password']
    logger.info('username: '+username)
    logger.info('password: '+password)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Password参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Password参数执行结果
###### 新建Switch类型参数 
摘要 : 
参数描述：切换参数，用户在两个备选项中选中单个状态。 
参数约束：取值：1或0，1为打开，0为关闭。可设置默认值，如果不更改，则默认为0。 
使用场景：常用参数类型，用户可设置初始状态，在一定条件下，用户可手动切换至另一状态。如能力开放大赛获奖作品展播4：NR侧PowerSaving节能配置工具，反复使用此类型参数，其中包括是否配置符号关断、通道关断、载波关断、深度休眠和Qcell定时上下电参数信息。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Switch类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
默认值|选则打开或关闭按钮|选填|打开
中文标题（开）|与“打开”按钮相对应的中文标题|选填|连接
英文标题（开）|与“打开”按钮相对应的英文标题|选填|Connect
中文标题（关）|与“关闭”按钮相对应的中文标题|选填|断开
英文标题（关）|与“关闭”按钮相对应的英文标题|选填|Disconnect
单击新建按钮，Switch类型的参数新建成功，如[图2]所示。
图2  Switch类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: Switch 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    switch = kw['Switch']
    if switch == "0":
        logger.info('Data link status is connect')
    else:
        logger.info('Data link status is disconnect')` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Switch参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Switch参数执行结果
###### 新建Enum类型参数 
摘要 : 
参数描述：下拉单选，根据用户给出的参数取值范围选择某一个参数。 
参数选项：只能选择一个值，必须为键值对，如{"0":"断链","1":"正常"}。 
使用场景：很多脚本给用户展示的参数内容较多而复杂且用户只能选择其一，但是写在脚本里又不简洁，开发人员可用此参数解决此问题。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Enum类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
约束|下拉列表的选项定义，输入内容需符合特定的JSON格式|必填|{   "0":{ "zh":"允许连接","en":"Connected Allowed" },   "1":{ "zh":"禁止连接","en":"Connected Forbidden"}}
默认值|符合约束字段的值|选填|0
单击新建按钮，Enum类型的参数新建成功，如[图2]所示。
图2  Enum类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: Enum 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    re_conn_state = kw['reConnState']
    logger.info('The selected status is ' + re_conn_state)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Enum参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Enum参数执行结果
###### 新建List类型参数 
摘要 : 
参数描述：下拉多选，根据用户给出的参数取值范围选择多个参数。 
参数选项：支持选择多个值，必须为键值对，如[{"value":"0","zh":"断链","en":"Broken"},{"value":"1","zh":"建链","en":"Connected"}]。 
使用场景：很多脚本给用户展示的参数内容较多而复杂，脚本编写较为复杂，为方便用户自行选取所需的参数，开发人员可用此参数解决此问题。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建List类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
约束|下拉列表的选项定义，输入内容需符合特定的JSON格式|必填|[{        "value": "0",        "zh": "断链",	"en": "Broken"  },  {	"value": "1",	"zh": "建链",	"en": "Connected"}]
默认值|符合约束字段的值|选填|["0","1"]
单击新建按钮，List类型的参数新建成功，如[图2]所示。
图2  List类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: List 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    ConnentState = kw['ConnectState']
    logger.info('The selected status is ' + ConnentState)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  List参数显示
单击确认按钮，执行结果如[图4]所示。
图4  List参数执行结果
###### 新建IP类型参数 
摘要 : 
参数描述：为用户提供IP地址的输入参数。 
默认值：只支持IPV4或IPV6格式。 
使用场景：很多业务脚本需要配置IP地址，并且支持IPV4和IPV6双站的场景。所以提供IP类型参数统一设置IP地址，无需全脚本编写IP地址。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Ip类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
默认值|支持IPV4或IPV6地址|选填|127.0.0.1
单击新建按钮，Ip类型的参数新建成功，如[图2]所示。
图2  Ip类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: IP 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    IP = kw['IP']
    logger.info('The ip is ' + IP)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Ip参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Ip参数执行结果
###### 新建NE类型参数 
摘要 : 
参数描述：网元类型参数支持用户选取全部网元或者指定网元。 
扩展属性：支持两种显示模式，（如：仅选择网元和选择全网或网元）；过滤条件：网元选择器的过滤条件，（如：moc=ITBBU AND connectionState=0）。 
使用场景：为降低用户在采集网元信息时操作的复杂性，开发人员提供两种显示网元的方式，用户可根据自己的需求选择全部网元或者指定网元来完成基站数据的采集。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建NE类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
模式|网元选择器的显示模式|选填|选择全网或网元
过滤条件|网元选择器的过滤条件|选填|moc=ITBBU AND connectionState=0
最大网元个数|最大网元个数限制|选填|100
单击新建按钮，NE类型的参数新建成功，如[图2]所示。
图2  NE类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: NE 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    NE = kw['NE']
    logger.info('The network elements selected in the complex mode are' + NE)
    ne = kw['ne']
    logger.info('The network elements selected in the simple mode are ' + ne)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  NE参数显示
单击确认按钮，执行结果如[图4]所示。
图4  NE参数执行结果
###### 新建Resource类型参数 
摘要 : 
参数描述：资源类型，支持获取网元、分组、子网和小区的资源信息。 
扩展属性：资源类型下拉框中的属性由集成的插件包决定。 
使用场景：用户可通过资源选择器来获取小区资源的数据。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Resource类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
资源类型|资源选择器的资源类型|必填|选择网元、分组、子网、小区
单击新建按钮，Resource类型的参数新建成功，如[图2]所示。
图2  Resource类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2021-11-23
 Purpose: Resource 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    cell = kw['cell']
    logger.info('Cell resource data:' + cell)    
    group = kw['group']
    logger.info('Group resource data:' + group)    
    subnetwork = kw['subnetwork']
    logger.info('Subnetwork resource data:' + subnetwork)    
    NE = kw['NE']
    logger.info('NE resource data:' + NE)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Resource参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Resource参数执行结果
###### 新建Date类型参数 
摘要 : 
参数描述：为用户提供日期的输入参数。 
扩展属性：Date参数在调试中提供选择日期下拉框，支持3种日期类型：date，time，datetime以供用户选择，不填默认为date类型。 
使用场景：很多业务脚本需要查看其执行日期，而且对日期的编写格式不统一，正则表达式对于新手用户不易用。所以提供Date类型参数统一设置日期格式，而且提供可视化的选择下拉框方便用户设置日期。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建Date类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
日期类型|参数支持的3种日期类型|选填|date
单击新建按钮，Date类型的参数新建成功，如[图2]所示。
图2  Date类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: Date 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    date = kw['Date']
    time = kw['Time']
    datetime = kw['DateTime']
    
    logger.info('---------1：select date-----------')
    logger.info('The selected date is: ' + date)
    logger.info('---------2: select time-----------') 
    logger.info('The selected time is: ' + time)
    logger.info('---------3: select datetime-----------')  
    logger.info('The selected datetime is: ' + datetime)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  Date参数显示
单击确认按钮，执行结果如[图4]所示。
图4  Date参数执行结果
###### 新建DateRange类型参数 
摘要 : 
参数描述：为用户提供开始时间与结束时间的输入参数。 
参数展示：DateRange参数在调试中支持时间范围的设置，在开始时间和结束时间中提供选择日期下拉框。 
使用场景：很多业务脚本需要设置脚本的执行时间范围，起止时间需使用正则表达式编写，对于新手用户不易用。所以开发DateRange类型参数统一设置时间范围，而且提供可视化的选择下拉框方便用户设置日期。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建DateRange类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：目前DateRange类型的参数不支持扩展字段。
单击新建按钮，DateRange类型的参数新建成功，如[图2]所示。
图2  DateRange类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: DateRange 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    DateRange = kw['DateRange']
    logger.info('The time range is ' + DateRange)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  DateRange参数显示
单击确认按钮，执行结果如[图4]所示。
图4  DateRange参数执行结果
###### 新建File类型参数 
摘要 : 
参数描述：File参数，用户可使用本参数将本地文件上传到服务器中供脚本调用。 
文件模板：上传文件大小不超过20 M。 
使用场景：很多业务脚本需要处理各种复杂的参数请求，比如：使用csv文件作为动态参数，使用json或者xml文件作为复杂的结构化参数，这些复杂的文件信息通常在本地存放，需要将文件上传到服务器中。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建File类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|说明|选填项|示例
---|---|---|---
文件类型|参数默认指定可选择的文件类型|选填|zip,png
最小文件大小（Byte）|参数可上传的最小文件大小1MB=1024KB，1KB=1024B|选填|0
最大文件大小（Byte）|参数可上传的最大文件大小1MB=1024KB，1KB=1024B|选填|20971520
自定义上传接口|是否自定义上传文件的接口信息|选填|打开
接口URL|自定义接口的上传路径|选填|/api/ofd-access/v1/ose/executions/parameter-files
请求类型|自定义接口的请求类型|固定值|POST
请求参数|自定义接口的请求参数|选填|{   "key":"test"}
上传失败响应|自定义文件上传失败的提示信息|选填|{   "zh": "response.data.zh",   "en": "response.data.en"}
传递响应|是否传递接口的响应信息若“打开”开关，则传递到后端参数值格式为json；若“关闭”开关，则传递到后端参数值格式为字符串|选填|打开
 说明： 
新增file参数中提供上传模板功能，为用户提供配置参数，方便用户更好的使用数据开放平台。其中，file模板支持的文件类型包括（csv、xlsx、json、xml、yml、zip），大小限制为20 M，模板命名长度不超过30个字符。 
单击新建按钮，File类型的参数新建成功，如[图2]所示。
图2  File类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: File 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    file = kw['File']
    logger.info('Uploaded files: ' + file)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  File参数显示
单击确认按钮，执行结果如[图4]所示。
图4  File参数执行结果
###### 新建RestDynamic类型参数 
摘要 : 
参数描述：RestDynamic类型参数提供下拉框的组件参数来实现对规划区ID的选择操作。 
参数约束：其通过访问RESTful接口，返回查询的规划区，如{"mutiple":false,"method":"GET","url":"/api/pm-model/v1/templates/list","body":null,"func":"response.map(res => {return {value: res.id, zh: res.name, en: res.name}});"} 
使用场景：在很多场景，对于配置数据的操作都需要打开规划区，目前只能通过输入组件来输入规划区ID，使用上很不友好。故开发RestDynamic组件来实现对规划区ID的选择操作，提升易用性。 
参数的设置 : 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1]所示。
图1  新建RestDynamic类型参数
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1]。
扩展属性|字段|说明|选填项|示例
---|---|---|---|---
约束|mutiple|true：表示多选false：表示单选|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
method|约束|请求的方法类型|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
url|约束|完整注册的url|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
body|约束|请求的RESTful接口的参数，若不填写该字段，则取默认值（"body": null）|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
func|约束|将返回的请求进行转换，response字段代表完整的响应体，为Json对象|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
单击新建按钮，RestDynamic类型的参数新建成功，如[图2]所示。
图2  RestDynamic类型的参数
在脚本设计器中使用参数 : 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: RestDynamic 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()
def execute(**kw):
    RestDynamic = kw['RestDynamic']
    logger.info('The selected plan area is ' + RestDynamic)` 
单击按钮，打开调试窗口，输入参数，如[图3]所示。
图3  RestDynamic参数显示
单击确认按钮，执行结果如[图4]所示。
图4  RestDynamic参数执行结果
##### 脚本参数设置联动效果 
###### 功能介绍 
用户在OSD中编写脚本时，当脚本参数设置过多时，调试页面不利于参数的查询和输入，因此在设置联动参数页面新增参数分组和参数关联的功能。具体包括：
1. 设置参数分组 
2. 设置参数关联 
3. 设置参数值关联 
###### 分组的设置 
在参数页面新建多个参数，新建参数的具体操作可参见“[脚本参数设置指南]”，如[图1]所示。
图1  新建参数
为参数添加分组设置，单击新设置联动参数按钮，在参数分组页面，单击添加分组链接，设置分组信息，如[图2]所示。
图2  设置分组
如果需要继续添加分组信息，可重复单击添加分组链接，单击预览页面的按钮，参数分组的展示效果如[图3]所示。
图3  分组预览
分组信息设置成功，单击按钮，打开调试窗口，参数分组的展示效果与预览页面相同，如[图4]所示。
图4  分组展示
OSE中运行应用、新建任务以及修改任务页面，参数分组的展示效果与调试调试页面相同。
###### 参数关联的设置 
在参数页面新建多个参数，其中包括Switch、Enum、List等类型的参数，新建参数的具体操作可参见“[脚本参数设置指南]”，如[图5]所示。
图5  新建枚举类型的参数
为参数添加参数关联的设置，单击设置联动参数按钮，进入参数关联页面，单击添加条件链接，在参数下拉框中选择参数（只支持枚举类型的参数，如：switch、enum、list类型的参数），单击按钮，添加关联参数，如[图6]所示。
图6  设置参数联动
如果需要继续添加关联参数信息，可重复单击添加条件链接。单击预览页面的按钮。
当enum参数选择“允许连接”时，页面展示参数（A,B,C,switch,D），参数的关联效果如图7所示。图7  参数联动预览 
当enum参数选择“禁止连接”时，页面展示参数（list,E,F,G,H），参数的关联效果如图8所示。图8  参数联动预览 
参数关联设置成功，单击按钮，打开调试窗口，参数的关联效果与预览页面相同。
当enum参数选择“允许连接”时，参数的关联效果如图9所示。图9  参数联动展示 
当enum参数选择“禁止连接”时，参数的关联效果如图10所示。图10  参数联动展示 
OSE中运行应用、新建任务以及修改任务页面，参数关联的展示效果与调试调试页面相同。
###### 参数值关联的设置 
在参数页面新建多个参数，新建参数的具体操作可参见“[脚本参数设置指南]”。
为参数添加参数值关联的设置，单击设置联动参数按钮，在参数关联页面，单击添加条件链接，在参数下拉框中选择参数（只支持枚举类型的参数，如：switch、enum、list类型的参数），单击按钮，设置参数值关联，如[图11]所示。
图11  设置参数值联动
如果需要继续添加关联参数信息，可重复单击添加条件链接，用户也可在设置完参数值关联的基础上，继续设置参数关联或参数值关联，目前最多提供三层参数关联的效果。如[图12]所示。
图12  三层参数关联
单击预览页面的按钮。
当enum参数选择“允许连接”时，list参数仅展示状态值“建链”，参数的关联效果如图13所示。图13  参数值联动预览 
当enum参数选择“禁止连接”时，list参数仅展示状态值“断链”，参数的关联效果如图14所示。图14  参数值联动预览 
参数值关联设置成功，单击按钮，打开调试窗口，参数的关联效果与预览页面相同。
当enum参数选择“允许连接”时，参数的关联效果如图15所示。图15  参数值联动展示 
当enum参数选择“禁止连接”时，参数的关联效果如图16所示。图16  参数值联动展示 
OSE中运行应用、新建任务以及修改任务页面，参数值关联的展示效果与调试调试页面相同。
##### 脚本应用开发快捷键 
###### 功能介绍 
为了提高开发人员编写代码的效率，脚本编辑器新增快捷键和语法提示功能，放便用户使用。 
###### 快捷键 
脚本编辑器提供如下快捷键的使用，具体功能参见[表1]。
分类|快捷键|功能说明
---|---|---
通用快捷键|F1|命令输入框
Ctrl + S|通用快捷键|保存文件
Ctrl + Shift + S|通用快捷键|另存为文件
F4|通用快捷键|设置
Ctrl + `|通用快捷键|打开 / 关闭控制台
F7|通用快捷键|语法检查
Ctrl + F8|通用快捷键|调试
F9|通用快捷键|终止
F10|通用快捷键|发布
文本编辑|Ctrl + C|拷贝。注：若选中文本，则复制文本；若光标停留在某一行，则复制该行。
Ctrl + X|文本编辑|剪切。注：若选中文本，则剪切文本；若光标停留在某一行，则剪切该行。
Ctrl + V|文本编辑|粘贴
Ctrl + Z|文本编辑|撤销
Ctrl + Shift + Z|文本编辑|恢复
Alt + ↑|文本编辑|上移一行
Alt + ↓|文本编辑|下移一行
Ctrl + Shift + K|文本编辑|删除一行
Ctrl + Enter|文本编辑|后面插入一行
Ctrl + Shift + Enter|文本编辑|前面插入一行
Ctrl + Shift + \|文本编辑|跳转到匹配括号
Ctrl + ] 或 tab|文本编辑|增加缩进
Ctrl + [ 或 shift + tab|文本编辑|减少缩进
Home|文本编辑|跳到一行的开始
End|文本编辑|跳到一行的结束
Ctrl + Home|文本编辑|跳到文件的开始
Ctrl + End|文本编辑|跳到文件的结束
Ctrl + ↑|文本编辑|向上滚动一行
Ctrl + ↓|文本编辑|向下滚动一行
Alt + PgUp|文本编辑|向上滚动一页
Alt + PgDn|文本编辑|向下滚动一页
Ctrl + Shift + [|文本编辑|折叠区域
Ctrl + Shift + ]|文本编辑|展开区域
Ctrl + K Ctrl + C|文本编辑|添加行注释
Ctrl + K Ctrl + U|文本编辑|删除行注释
Ctrl + K Ctrl + F|文本编辑|选中文本，支持脚本的格式化处理
Shift + Alt + F|文本编辑|脚本格式化
Ctrl + /|文本编辑|行注释
Ctrl + Shift + A|文本编辑|块注释
搜索与替换|Ctrl + F|搜索
Ctrl + H|搜索与替换|替换
F3|搜索与替换|查找下一个字符
Shift + F3|搜索与替换|查找前一个字符
Alt + Enter|搜索与替换|选中搜索框中所有匹配的词
光标与选择|Shift + Alt + ↑|之前插入光标
Shift + Alt + ↓|光标与选择|之后插入光标
Ctrl + U|光标与选择|撤销最后一次光标操作
Shift + Alt + I|光标与选择|插入光标到选中的每一行之后
Ctrl + L|光标与选择|选中当前行
Ctrl + Shift + L|光标与选择|选中当前选择的所有匹配项
Ctrl + F2|光标与选择|选中当前单词的所有匹配项
Shift + Alt + →|光标与选择|扩大选择区域
Shift + Alt + ←|光标与选择|缩减选择区域
导航|Ctrl + G|跳转到某行
##### 工作流应用开发指南 
###### 1 工作流应用创建 
工作流应用文件目录结构及文件内容定义
|--.config 
|--project.yml 
|--parameter.yml 
|--flow_define.json 
如图[图1]：
图1  图示1
目录文件详细说明： 
Application|文件名|说明|注意事项
工作流|.config|应用配置文件目录，包含project.yml、parameter.yml和i18n.json三个文件|windows环境创建.config文件需要通过命令行：md .config即可创建
project.yml|工作流|工程应用配置文件，定义应用名称，描述等信息|
parameter.yml|工作流|工程应用参数配置文件，定义参数字段，类型，描述等信息|
i18n.json|工作流|工程应用国际化配置文件，定义应用名称，参数名称，描述等国际化信息|
flow_define.json|工作流|工作流配置文件，定义工作流执行逻辑|
project.yml 工程应用配置文件
`name: work_flow_package_with_important
description: work_flow_package_with_important
importantOperation:
  isImportant: true
  prompt: 该脚本包含危险操作` 
project.yml参数说明 
字段|说明|约束|注意事项
name|工作流应用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|必须与flow_define.json中的name字段保持一致
description|工作流应用描述|10到1000个字符，不能包含非法字符：< ' " & / >|
importantOperation|重要操作配置字段||
importantOperation参数说明 
字段|说明|约束
isImportant|是否展示重要操作提示信息|true或false
prompt|重要操作的提示信息|10到1000个字符，不能包含非法字符：< ' " & / >
parameter.yml 工程应用参数配置文件
`- name: path
  type: String
  value: test
  constraints: ""
  optional: false
  description: 输入清理目标文件的路径
- name: value
  type: Number
  value: 3
  constraints: ""
  optional: false
  description: 循环次数` 
parameter.yml参数说明 
字段|说明|约束
name|参数名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"
type|参数类型|只允许输入：String,Number,Password,Switch,File,EMS,OMM,NE,DateRange,RestDynamic,Enum,List,Ip,Date,Boolean
value|默认值|不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"
constraints|约束|正则表达式
optional|是否选填|只允许输入：true或false
description|参数描述|10到1000个字符，不能包含非法字符：< ' " & / >
i18n.json 工程应用国际化配置文件（选填）
`{
    "en": {
        "displayName": "Internationalization Workflow",
        "description": "Internationalization test of Workflow",
        "parameters": {
            "path": {
                "displayName": "path 英文",
                "description": "path 英文 描述"
            }
        }
    },
    "zh": {
        "displayName": "国际化工作流",
        "description": "关于工作流的国际化测试",
        "parameters": {
            "path": {
                "displayName": "path 中文",
                "description": "path 中文 描述"
            }
        }
    }
}` 
i18n.json参数说明 
字段|说明|约束
displayName|应用国际化名称|0到30个字符
description|应用国际化描述|0到1000个字符
parameters-displayName|参数国际化名称|0到30个字符
parameters-description|参数国际化描述|0到1000个字符
flow_define.json 工作流定义文件
`{
  "name": "workflow_demo",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf",
      "inputParameters": {
        "applicationName": "script_for_wf",
        "parameters": {
          "path": "${workflow.input.path}"
        }
      },
      "type": "SIMPLE"
    }
  ],
  "inputParameters": [
    "path"
  ],
  "outputParameters": {
  }
}` 
flow_define.json参数说明 
字段|说明|约束|注意事项
name|工作流名称|非空，不允许输入算数运算符|必填，必须与project.yml文件中的name.value值相同
tasks|工作流任务|非空|
inputParameters|工作流入参||入参字段必须与parameter.yml中的name字段值保持一致
outputParameters|工作流输出||如果不填写，默认为最后一个task输出结果。例子："neId": "${script1.output.neId}"
tasks参数说明 
字段|说明|约束|注意事项
name|任务名称|非空，不允许输入算数运算符|必填，如果任务是脚本应用，该值必须为：ose_script_task
taskReferenceName|任务引用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|必填，如果是脚本应用，填写脚本名称
inputParameters|任务入参||key-value,也可以是json格式，例如："path": "${workflow.input.path}"
applicationName|脚本应用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|脚本应用必填，且必须为脚本名称，建议与taskReferenceName值保持一致
inputParameters参数说明 
字段|说明|约束|注意事项
path|脚本入参示例||json-path格式，例如：${workflow.input.path}意思是取workflow定义入参中的path值。
parameters|脚本入参||
applicationName|脚本应用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|脚本应用必填，且必须为脚本名称，建议与taskReferenceName值保持一致
###### 2 生成工作流应用 
将文件目录压缩成zip包，并修改后缀名为.owf即可在应用管理中导入 
图2  图示2
##### 工作流应用开发示例 
###### 顺序任务 
工作流支持脚本应用类型的任务，适用于串行脚本任务执行，效果图如下[图1]。
脚本应用script_for_wf和script_for_wf1按序执行。 
图1  分支任务
flow_define.json文件示例如下： 
`{
  "name": "workflow_demo",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf",
      "inputParameters": {
        "applicationName": "script_for_wf",
        "parameters": {
          "path": "${workflow.input.path}"
        }
      },
      "type": "SIMPLE"
    },
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf1",
      "inputParameters": {
        "applicationName": "script_for_wf1",
        "parameters": {
          "count": "${script_for_wf.output.result.count}"
        }
      },
      "type": "SIMPLE"
    }
  ],
  "inputParameters": [
    "path"
  ],
  "outputParameters": {
	"result_count1": "${script_for_wf.output.result.count}",
	"result_count2": "${script_for_wf1.output.result.count}"
  }
}` 
说明： 
1）脚本应用script_for_wf入参为工作流应用输入参数“path”。 
2）脚本应用script_for_wf1入参为script_for_wf脚本的输出参数count的值，script_for_wf输出json格式，例如：{'count': count}。 
3）工作流输出结果为script_for_wf，script_for_wf1脚本应用输出的counter值。 
###### 分支任务 
####### 分支任务 
工作流支持分支任务。可以按照不同的策略，执行不同场景的任务。效果图如[图1]所示：
图1  分支任务
flow_define.json示例如下： 
`{
  "name": "wf_decision_2",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf1",
      "inputParameters": {
        "applicationName": "script_for_wf1",
        "parameters": {
          "path": "${workflow.input.path}"
        }
      },
      "type": "SIMPLE"
    },
	{
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf2",
      "inputParameters": {
        "applicationName": "script_for_wf2",
        "parameters": {
        },
		"case_count": "${script_for_wf1.output.result.count}"
      },
      "type": "DECISION",
      "caseValueParam": "case_count",
      "decisionCases": {
		"0": [
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf3",
				  "inputParameters": {
					"applicationName": "script_for_wf3",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				},
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf4",
				  "inputParameters": {
					"applicationName": "script_for_wf4",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				}
		],
		"1": [
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf5",
				  "inputParameters": {
					"applicationName": "script_for_wf5",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				},
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf6",
				  "inputParameters": {
					"applicationName": "script_for_wf6",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				}
		]
	  },
      "defaultCase": [
		{
		  "name": "ose_script_task",
		  "taskReferenceName": "script_for_wf7",
		  "inputParameters": {
			"applicationName": "script_for_wf7",
			"parameters": {}
		  },
		  "type": "SIMPLE"
		}
	  ]
    }
  ],
  "inputParameters": [
    "path"
  ]
}` 
分支任务关键点说明： 
1）分支任务类型type字段必须为DECISION。 
2）分支任务决策字段：caseValueParam，该字段值需要在任务的inputParameters中定义。 
3）分支场景：decisionCases字段，当caseValueParam字段不同的值，执行不同的任务列表. 
###### 循环任务 
####### 循环任务 
工作流支持循环类型的任务，先执行一次循环任务，根据循环条件，轮询任务列表，执行效果图如下[图1]。图1  循环任务效果图
flow_define.json定义示例如下： 
`{
  "name": "work_flow_loop",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf1",
      "inputParameters": {
        "applicationName": "script_for_wf1",
        "parameters": {
          "path": "${workflow.input.path}",
		  "time_value": "${workflow.input.value}"
        }
      },
      "type": "SIMPLE"
    },
	{
      "name": "Loop Task",
      "taskReferenceName": "LoopTask",
      "inputParameters": {
		"time_value": "${workflow.input.value}"
      },
      "type": "DO_WHILE",
      "startDelay": 3,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "defaultExclusiveJoinTask": [],
      "asyncComplete": false,
      "loopCondition": "if ($.LoopTask['iteration'] < $.time_value) { true; } else { false; }",
      "loopOver": [
		{
			"name": "ose_script_task",
            "taskReferenceName": "workflow_loop1",
            "inputParameters": {
				"applicationName": "workflow_loop1",
				"parameters": {
					"path": "${workflow.input.path}",
					"time_value": "${workflow.input.value}"
				}
            },
            "type": "SIMPLE"
		},
		{
			"name": "ose_script_task",
            "taskReferenceName": "workflow_loop2",
            "inputParameters": {
				"applicationName": "workflow_loop2",
				"parameters": {
					"path": "${workflow.input.path}"
				}
            },
            "type": "SIMPLE"
		},
		{
			"name": "ose_script_task",
            "taskReferenceName": "workflow_loop3",
            "inputParameters": {
				"applicationName": "workflow_loop3",
				"parameters": {
					"path": "${workflow.input.path}"
				}
            },
            "type": "SIMPLE"
		}
	  ]
    }
  ],
  "inputParameters": [
    "path","value"
  ],
  "outputParameters": {
  }
}` 
说明： 
loopCondition字段只为true表示执行循环体，false跳出循环。语句为javascript语法。 
例子中："loopCondition": "if ($.LoopTask['iteration'] < $.time_value) { true; } else { false; }",解释如下： 
1）$.LoopTask['iteration'] 表示循环开始下标，初始值为1，$.time_value在inputParameters中定义为工作流输入参数。 
2）loopCondition判断条件中也可以使用循环任务结果作为条件，例如："loopCondition": "if (($.LoopTask['iteration'] < $.time_value) || $.workflow_loop1.output.result.count > 2) { true; } else { false; }"，表示当迭代次数小于输入参数 或 workflow_loop1任务的输出结果大于2时，执行循环，否则跳出循环。 
### 脚本执行引擎 
概述 : 
脚本执行引擎简称OSE（Open Script Execution Engine），用于执行由OSD制作的脚本文件。OSD是一款基于Python脚本的在线脚本编辑器，用户可以用该编辑器编写脚本，实现脚本定制。例如，可以编写批量修改配置参数的脚本、生成数据报表文件的脚本、定时清理文件目录的脚本等。用户还可以存储在调试过程中的脚本程序，方便外场测试。
在OSE中，由OSD制作的脚本文件统称为“应用”。应用按照来源分为以下3类。
随软件版本发布的内置默认应用。 
通过在线OSD脚本编辑器生成的应用。 
用户导入的通过校验的应用。 
#### 功能实现 
脚本执行引擎提供以下功能： 
增加、删除、更新、查看应用，并支持应用导出，可以多环境共用。 
单次运行应用或创建应用的定时任务。 
查询应用的执行结果。 
#### 打开脚本执行引擎主页面 
登录UME系统，打开UME系统主页面。单击脚本执行引擎OSE图标，打开脚本执行引擎主页面，如[图1]所示。脚本执行引擎主页面展示应用总数、任务总数、日均执行数的统计信息和用户最近7天执行的Top应用。
图1  脚本执行引擎主页面
功能导航树 
操作区 
#### 管理应用 
摘要 : 
应用管理页面提供导入应用的功能。应用导入后，可单次执行应用，也可创建应用的定时任务。另外，用户可对应用进行更新、删除、导出、添加标签等操作。
相关信息 : 
导入OSE的应用按照类型可分为脚本应用、采集应用、UniCare应用、工作流应用以及工具集应用。 
脚本应用：为*.oap文件，支持导入及导出操作。脚本应用是按照实际需求定制的脚本，包括批量修改配置参数的脚本、生成数据报表文件的脚本、定时清理文件目录的脚本等。 
采集应用：为*.oap文件，支持导入及导出操作。采集应用用于采集数据信息，包括基站故障时的数据信息、远程监控场景需要采集的数据信息等。 
Unicare应用：为*.eoap文件，导入前需输入密码，不支持导出操作。 
工作流应用：为*.owf或*.cwf文件，支持导入及导出操作。工作流应用由编排好的多个应用组成，该应用定义了多个应用之间的执行规则，用于满足复杂场景下的需求。 
工具集应用：为*.sop文件，支持导入及导出操作。工具集应用主要用于应用的统一管理。 
步骤 : 
在脚本执行引擎主页面，单击功能导航树中的应用管理节点，进入应用管理页面，如[图1]所示。
图1  应用管理页面
单击导入，弹出打开对话框。
选择需要导入的应用，单击打开，应用导入完成。
 说明： 
支持导入的文件类型有*.oap文件、*.eoap文件、*.owf文件、*.cwf及*.sop文件。 
支持导入的文件大小限制为20 M。 
应用导入成功后，应用卡片会带有“新上线”标识，该标识一天后自动消失。 
相关任务 : 
导入应用后，可执行以下操作。 
如果...|那么...
---|---
单次执行应用|在应用管理页面，选择目标应用，单击按钮，打开运行应用页面。输入应用参数，单击运行。应用执行完成后，在本页面可查看应用的执行结果及下载应用的执行日志。对于工作流应用，在本页面可查看工作流图和日志，便于用户了解应用的执行过程及执行状态。
创建应用的定时任务|在应用管理页面，选择目标应用，单击按钮，进入新建任务页面。具体操作参见管理任务。
查看某个应用创建了哪些定时任务|在应用管理页面，选择目标应用，单击，选择下拉框中的查看关联任务按钮，页面跳转至任务管理页面，显示该应用的关联任务。
收藏应用|在应用管理页面，选择目标应用，单击，可收藏应用。标签栏单击我的收藏后，页面会显示被收藏的应用，方便用户快速查找自己需要的应用。
新增标签|在应用管理页面上方的标签栏，单击+可添加新标签，最大可输入10个字符，不支持输入特殊字符。每个用户只能看到自己创建的标签。单击标签后，页面会显示所有被标记的应用，方便用户快速查找自己需要的应用。
删除标签|在应用管理页面上方的标签栏，选中不需要的标签，单击X删除。日常运维、数据导出及数据清理为内置标签，不允许删除。
为应用标记标签|在应用管理页面，选择目标应用，单击，选择下拉框中的标签按钮，弹出标记对话框，对话框中显示标签栏中的标签。选择目标标签，单击确定。
查看应用详情|在应用管理页面，选择目标应用，单击，打开应用详情对话框。页面显示该应用的基本信息和输入参数信息。若该应用含说明文档和输出样例，可单击说明文档和输出样例按钮进行下载。
更新应用|内置应用不支持更新操作。（内置应用的图标左下方有锁型图案）在应用管理页面，选择目标应用，单击，选择下拉框中的更新按钮，打开本地文件夹。选择需要更新的应用，单击打开。应用更新成功后，应用卡片会带有“已更新”标识，该标识一天后自动消失。
删除应用|批量删除应用：在应用管理页面，点击页面右上方的删除按钮，批量删除应用。删除单个应用：在应用管理页面，选择目标应用，单击，选择下拉框中的删除按钮，打开删除对话框。单击确定。内置应用不支持删除操作。
导出应用|批量导出应用：在应用管理页面，点击页面右上方的导出按钮，批量导出应用到本地。导出单个应用：在应用管理页面，选择目标应用，单击，选择下拉框中的导出按钮，导出该应用到本地。UniCare应用不支持导出。
查看执行记录|在应用管理页面，选择目标应用，单击，选择下拉框中的查看执行记录按钮，页面跳转至历史查询页面，显示该应用的执行记录。
#### 管理任务 
摘要 : 
任务管理页面可以进行任务的创建、激活、挂起、修改、删除和日志下载。
通过创建任务，可实现应用的周期性调度。任务创建成功后，默认状态为已激活。任务过期后，状态会显示为失效。 
下面以"oap_es_clean"应用为例介绍如何创建任务。 
前提 : 
在创建任务前已确定任务名称，便于回溯。 
已确定任务的执行周期。 
步骤 : 
在脚本执行引擎主页面单击功能导航树中的任务管理节点，进入任务管理页面，如[图1]所示。
图1  任务管理页面
在任务管理页面，单击新建定时任务按钮，进入新建定时任务页面。如[图2]所示。
图2  新建定时任务页面
在新建定时任务页面，左侧选择应用名称"oap_es_clean"，右侧出现该任务的参数信息填写页面，如[图3]所示。
图3  参数信息填写页面
设置参数信息，单击新建按钮，完成任务的创建操作。
 说明： 
鼠标指针放置到位置会自动浮现出对应参数的描述，可根据该描述填写应用参数信息。
相关任务 : 
创建任务完成后，可执行以下操作。 
如果...|那么...
---|---
激活任务|在任务管理页面单击操作列的激活按钮，启动已挂起的任务。
挂起任务|在任务管理页面单击操作列的挂起按钮，停止正在运行中的任务。
修改任务|在任务管理页面单击操作列的修改按钮，修改已挂起的任务。
删除任务|在任务管理页面，在操作列的更多下拉菜单中选择删除，删除已挂起的任务。
快速查询任务的执行结果|在任务管理页面，选择目标任务，在操作列的更多下拉菜单中选择执行记录，跳转到该任务的历史查询页面。用户可下载该任务的日志及执行过程中生成的数据信息，具体操作参见“查询结果”。
#### 查询结果 
摘要 : 
在历史查询页面，可以查询应用的执行结果，下载应用执行过程中生成的日志信息及数据信息。若应用执行失败，可结合应用的执行日志与脚本定位具体问题。
相关信息 : 
脚本语法错误，脚本依赖的接口调用失败或依赖的APP异常可能导致应用执行失败，可结合应用的执行日志与脚本定位具体问题。 
脚本逻辑复杂，数据量大可能导致应用长期处于执行中，需通过脚本定位具体问题。 
步骤 : 
在脚本执行引擎主页面单击功能导航树中的历史查询节点，进入历史查询页面，如[图1]所示。页面显示应用的执行结果信息。
图1  历史查询页面
（可选）单击高级查询按钮，页面展示条件查询框，如[图2]所示。用户可根据需要选择查询条件 ，单击查询按钮进行高级查询。（若用户未选择高级查询条件，搜索结果以默认值为全部的搜索条件进行查询。）
图2  高级查询条件框
高级查询条件设置参见[表1]。
查询条件|说明
---|---
应用类型|选择后按选择的应用类型查询。
执行人|选择后按选择的执行人查询，可查询某一用户的执行结果。
执行结果|选择后按应用的执行结果查询。
执行方式|选择后按应用的执行方式查询。
应用名称|选择后按应用名称查询某一应用的执行结果。
定时任务名称|选择后按任务名称查询某一任务的执行结果。当执行方式选择单次时，定时任务名称下拉列表框置灰。
执行时间|按应用的执行时间统计。统计结果可以按照全部、近1天、近7天、近30天和自定义进行分类查看。
相关任务 : 
查询结果完成后，可执行以下操作。 
如果...|那么...
---|---
下载应用的执行日志|在历史查询页面，单击该应用对应操作列的下载日志按钮。
下载应用在执行过程中生成的数据信息|在历史查询页面，单击该应用对应操作列的下载附件按钮。若该应用在执行过程中不生成数据信息，则下载附件按钮置灰。
### 进入RCP策略管理窗口 
摘要 : 
本节介绍如何通过代理拉远方式，访问策略管理功能模块，实现RCP策略配置。 
 说明： 
如果单击管理按钮，无法打开RCP策略管理页面，单击下载链接，下载并安装ielink插件。
步骤 : 
在配置管理页面，选择菜单RCP策略管理，打开RCP策略管理页面，如[图1]所示。
图1  RCP策略管理
选择网元实例，单击管理按钮，进入策略配置页面， 如[图2]所示。
图2  策略配置
### 进入核心网受理台窗口 
摘要 : 
本节介绍如何通过代理拉远方式，访问核心网受理台，包括USPP（HLR/HSS/UDM/EIR/SPR）和SSS受理台。
 说明： 
如果单击管理按钮，无法打开核心网受理台页面，单击下载链接，下载并安装ielink插件。
步骤 : 
在配置管理页面，选择菜单核心网受理台，打开核心网受理台页面，如[图1]所示。
图1  核心网受理台
选择网元实例，单击管理按钮，进入受理台登录对话框， 如[图2]所示。
图2  受理台登录对话框
输入用户名和密码，单击登录，打开受理台客户端，如[图3]所示。
图3  受理台客户端
### 查看离线配置变化表 
摘要 : 
离线配置变化表用于记录网元上未同步的配置数据。当维护人员在ElasticNet UME上对网元的配置数据进行修改后，系统将修改的配置数据存放在网元的配置数据变化表中。当维护人员执行网元的数据同步命令后，该配置数据才会生效。
当ElasticNet UME系统发现被管理网元上存在未同步的配置数据时，会以提示消息的方式提醒维护人员。维护人员可以进一步对未同步的配置数据进行处理，例如：执行数据同步操作，或者撤销数据变更操作等。本节介绍如何在ElasticNet UME上查看各网元的离线配置数据变化表。
 说明： 
部分网元不支持离线配置数据查询。 
前提 : 
已登录用户需要具备网元配置的权限。 
步骤 : 
使用具有网元数据配置权限的用户登录ElasticNet UME客户端。当系统中存在该网元的配置数据变化表时，页面右下角会弹出提示信息，如[图1]所示。
图1  离线配置变化表提示消息
单击查看详情，可以跳转到离线配置变化表页面，查看离线配置变化表的状态列，如[图2]所示。
图2  离线配置变化表
其中，状态栏用于显示网元上的离线配置变化表状态，包括：
未知：表示该网元不支持离线配置数据通知功能。维护人员需要手工查询该网元上是否有未同步的配置数据。 
有变化表：表示该网元存在未同步的配置数据，提醒维护人员可以进一步登录命令终端，对该网元未同步的配置数据进行处理。 
对于状态为有变化表的网元，在配置管理页面，选择命令终端→命令处理
，进入命令处理页面。选择存在变化表的网元，并执行数据同步命令，可将变化的配置数据同步到该网元上。具体操作参见“[按图形窗口执行命令]”。
等待5分钟后，在离线配置变化表页面，单击刷新按钮，该网元的信息从离线配置变化表清单中消失。
### MEP管理 
边缘计算平台（MEP）提供APP运行环境和调用边缘计算服务，MEP本身也可以提供服务。MEP的功能包括负载均衡、安全功能、带宽管理、对移动性的支持、Local API网关功能、用户计量和路由控制功能等。 
#### 导入网元模型包 
摘要 : 
在ElasticNet UME接入MEP网元前，需要先导入对应版本的MEP模型包。
MEP模型包中包括MEP数据和MEP的配置信息。ElasticNet UME系统会从模型管理中获取并加载MEP模型包的内容，实现对不同版本MEP的共同管理。
前提 : 
已获取MEP网元的模型包（格式为.zip），该模型包随MEP网元的版本发布。
步骤 : 
在配置管理页面，选择左侧菜单MEP管理→网元模型管理
，进入网元模型管理页面，如[图1]所示。
图1  网元模型管理
单击导入模型，在导入模型对话框中，单击选择文件，选择并导入模型包文件。
图2  导入模型
当导入完成后，系统显示导入成功信息，如[图3]所示。单击关闭按钮。
图3  导入完成
结果 : 
导入模型包后，系统会自动解析模型包的版本信息，并显示在页面中，如[图4]所示。
图4  模型包导入结果
#### 导入插件 
摘要 : 
插件是ElasticNet UME中可热加载的内容，可实现ElasticNet UME系统各项功能的灵活拓展。
当ElasticNet UME接入MEP网元后，通过加载相关的告警插件，实现将MEP的告警信息上报给ElasticNet UME系统。
本节介绍如何导入用于MEP网元的告警插件。 
前提 : 
已获取用于MEP网元告警上报的插件文件，包括： 
nf-model-umePlugins-*****.zip 
ume-plugins-fm-all_*****.zip 
步骤 : 
在配置管理页面，选择左侧菜单MEP管理→插件管理
，进入插件管理页面，如[图1]所示。
图1  插件管理
单击导入插件，在导入插件对话框中，单击选择文件，选择并导入插件文件。
图2  导入插件
当导入完成后，单击关闭。新导入的插件显示在页面中，如[图3]所示。
图3  导入完成
#### 通用配置 
通用配置包括MO编辑器、密码编辑器、JSON编辑器通用功能，参见[表1]。MO编辑器等通用功能操作步骤在后面章节描述，通过不同业务模板查看与修改数据的操作步骤相似。
通用功能|功能描述
---|---
MO编辑器|查看现网数据。当进入修改模式后可以对MO数据进行配置修改，并可激活到网元生效，便于快速修改网元数据。
密码编辑器|查看、修改密码数据并激活到网元。
JSON编辑器|编辑MO数据对应的JSON文本来修改规划区数据。
##### 通过MO编辑器配置MEP数据 
摘要 : 
通过通用配置的MO编辑器功能，可以查看和比较MEP数据，进入编辑模式后，可以根据需要进行增加、删除、修改等操作，并通过激活使MEP生效以实现对MEP数据的配置需求。 
配置MEP数据总体流程如下： 
进入MO编辑器 
修改MEP数据（需要选择规划区） 
激活数据（创建回滚区） 
立即激活 
定时激活 
前提 : 
已创建规划区，具体的操作步骤参考[规划区管理]。
步骤 : 
进入MO编辑器
在配置管理页面，选择MEP管理→通用配置
，打开通用配置页面，如[图1]所示。
图1  通用配置页面
单击MO编辑器→选择网元
按钮，打开选择网元页面，勾选网元，如[图2]所示。
图2  选择网元
单击确定按钮，进入MO编辑器页面，如[图3]所示。
图3  MO编辑器
模型标识选择框 
视图选择框 
MOC属性查找输入框 
（可选）单击已选网元，页面显示已选择的网元。
如果已选网元存在多个模型标识，在模型标识选择框中选择相应的模型标识。
（可选）在视图选择框中选择视图，只显示所选视图的MOC。
单击需要查询的MOC，查询结果显示在页面右侧，如[图4]所示。
图4  MO编辑器页面
可采用以下方式搜索、过滤MOC： 
在文本框中输入MOC/属性名称，符合条件的MOC自动高亮显示在下方MOC树中。 
在文本框中输入MOC/属性名称，单击右边按钮，匹配到的所有MOC会集中显示出来，如图5所示。 
图5  过滤MOC
 说明： 
如需查看属性的协议字段名，需要打开右上角的属性名下拉框，选择显示全名。
修改MEP数据（需要选择规划区）
单击右上角的进入规划区，弹出选择规划区界面，单击选择规划区下拉框，如[图6]所示。可以选择使用现有规划区，单击确定按钮，也可以单击新建规划区，输入规划区名称，单击确定，进入规划区。
图6  进入规划区
根据需要修改规划区数据。如[图7]所示。
如果...|那么...
---|---
需要修改某一行数据|双击某行数据或勾选某一行网元数据，单击表格上方的按钮。在弹出的编辑对话框中修改数据，单击保存按钮保存修改。
需要将多行数据的某一个或多个属性设置为相同值|勾选多行网元数据，单击表格上方的按钮。在弹出的编辑对话框中修改数据，单击保存按钮保存修改。
 说明： 
被修改的MEP数据保存在打开的规划区。 
图7  修改数据页面
激活数据（创建回滚区）
单击右上角数据激活，可以进入规划区界面，如[图8]所示。
图8  规划区激活数据页面
激活数据。 
立即激活数据。选择需要激活的MEP数据，单击立即激活，打开立即激活页面，如图9所示。图9  立即激活页面 
定时激活数据。选择需要激活的MEP数据，单击立即激活下拉框，选择定时激活打开定时激活页面，选择激活的执行时间，如图10所示。图10  定时激活页面 
填写任务名称、验证码，勾选激活并创建回滚区，创建回滚区的具体操作参见“[创建回滚区]”。
单击确定。
相关任务 : 
修改现网规划区数据页面的相关任务参见[表1]。
如果...|那么...
---|---
刷新数据|单击按钮，表格重新显示MO数据。
新增数据|单击按钮，为当前表格新增MO数据。
删除数据|单击按钮，删除当前表格中勾选的MO数据。
比较数据|在右侧已打开的MOC表格中勾选两条数据，单击  图标进行比较。
设置显示方式|从下拉菜单中选择显示全部、显示已选、显示失败设置表格显示方式。
查看现网数据|单击右上角查看现网数据，返回现网区只读模式。
关闭规划区|单击右上角关闭规划区，关闭当前规划区。
导出|单击导出按钮导出参数模板文件。
导入|单击导入按钮将修改后的参数模板文件导入规划区，修改网元数据。
修改规划区激活数据页面的相关任务参见[表2]。
如果...|那么...
---|---
变更清除|勾选需要清除修改数据的MEP数据，单击变更清除，输入验证码并单击确定按钮，取消本次修改MEP数据操作。
合法性检查|勾选需要进行合法性检查的MEP数据，单击合法性检查，进行数据的合法性检查。
导出数据合法性检查结果|数据检查结果未通过时，单击导出结果，下载并查看合法性检查未通过原因。
规划区数据迁移|单击规划区数据迁移，将当前修改的数据转移到另一个规划区。
##### 修改网元密码 
摘要 : 
通过密码编辑器可以修改MEP密码字段的配置，并激活使其生效。 
步骤 : 
在配置管理页面，选择MEP管理→通用配置
，打开通用配置页面，如[图1]所示。
图1  通用配置
单击密码编辑器，进入密码编辑器页面。
单击选择网元按钮，在待选网元中勾选需要查询的网元，如[图2]所示。
图2  选择网元
单击确定按钮，进入密码编辑器页面，如[图3]所示。
图3  密码编辑器
单击需要查询的MOC，查询结果显示在右侧对应页面中，如[图4]所示。
图4  密码编辑器页面
根据需要修改密码，如[图5]所示。
如果...|那么...
---|---
需要修改某一个网元的密码|双击某行数据或勾选某一行网元数据，单击表格上方的按钮，弹出编辑对话框。在密码输入框中修改密码，单击保存按钮保存修改。
需要将多个网元的密码的某一个或多个密码设置为相同值|勾选多行网元数据，单击表格上方的按钮，弹出编辑对话框。在密码输入框中修改密码，单击保存按钮保存修改。
图5  密码编辑器修改
单击激活按钮，将修改的密码激活到网元。
相关任务 : 
修改网元密码页面的相关任务参见[表1]。
操作|说明
---|---
刷新数据|单击按钮，表格重新显示MO数据。
新增数据|单击按钮，为当前表格新增MO数据。
删除数据|单击按钮，删除当前表格中勾选的MO数据。
设置显示方式|单击下拉选项框，选择显示全部、显示已选、显示修改、显示失败等表格显示方式。
导出|单击导出按钮，导出MOC数据文件到本机。
##### 修改规划区数据（JSON编辑器方式） 
摘要 : 
维护人员可以通过JSON编辑器直接编辑MO数据对应的JSON文本来修改规划区数据， 在JSON编辑器页面将需要修改的MO数据以JSON格式编辑完成后，提交给系统。
前提 : 
已创建规划区，具体的操作步骤参考[规划区管理]。
步骤 : 
在配置管理页面，选择MEP管理→通用配置
，打开通用配置页面，如[图1]所示。
图1  通用配置
单击页面中的JSON编辑器，进入JSON编辑器页面，如[图2]所示。
图2  JSON编辑器页面
单击右上角的进入规划区按钮，关联一个规划区。
关联规划区后，在编辑区修改参数，单击右上角数据激活按钮，提交给服务端，页面显示提交结果信息。如[图3]所示。
图3  激活数据
 说明： 
JSON编辑器具有语法检测功能。
如果在编辑器中输入内容格式有误，则最右侧进度条处会显示出红色。 
如果输入了不合法的参数，单击数据激活按钮后页面会弹出错误提示框。 
#### 通过参数模板导入导出数据 
摘要 : 
ElasticNet UME支持用户使用参数模板来修改MEP数据。通过参数模板导入导出功能，将MEP数据导出到本地，在本地修改后再导入到规划区。
支持通过参数模板和自定义模板两种方式导出参数数据。 
参数模板是运维人员在模板管理中自定义的参数模板。参数模板导出功能是通过已有参数模板进行导出，具体操作参见“新建参数模板”。 
自定义导出功能支持对跨模型标识的网元数据导出 。 
本节关于导出参数模板数据的操作步骤以自定义模板为例进行介绍。 
步骤 : 
导出参数模板数据
在配置管理页面，选择MEP管理→数据导入导出
，打开数据导入导出页面，如[图1]所示。
图1  导入导出页面
单击参数模板卡片，进入参数模板页面，如[图2]所示。
图2  参数模板页面
选择导出方式。
当导出方式为分版本导出时，不限制选择的模型标识个数。 
当导出方式为合并导出时，最多选择10种模型标识。 如果选择了多个版本的模型，只能导出多个模型的公共MOC。 
单击选择网元，选择目标网元，单击确定。如[图3]所示。
图3  选择网元
单击选择模板下拉框，选择导出数据时使用的模板。
 说明： 
若选择的模板为自定义(需定制MOC)，必须手工定制MOC才能导出。 
若选择的模板为参数模板，可直接选择已有的参数模板进行导出，也可基于该模板重新定制MOC后再导出。创建模板操作可参见新建参数模板。 
单击定制MOC按钮，打开定制MOC界面，在MOC树中勾选所需MOC，单击确定按钮。如[图4]所示。
图4  自定义导出-定制MOC页面
在按网元数拆分文件下拉框中选择要拆分的文件大小，默认3000。
 说明： 
文件大小不能为空； 
可设置的网元数目范围为100到1000000之间的整数； 
下拉选项中的All表示将所有数据导出到一个文件。 
单击导出按钮，导出数据文件到本地。
导入参数模板数据
在参数模板页面，单击右上角的进入规划区按钮，打开选择规划区对话框，如[图5]所示。
图5  选择规划区
单击下拉框，选择现有规划区或新建规划区。 
单击确定，进入该规划区的参数模板页面。
（可选）在导入区域勾选MOC联动。
单击导入，选择修改好的参数模板，单击打开，系统自动执行导入操作。
相关任务 : 
任务名称|任务操作
---|---
查看导入导出历史任务|在参数模板页面，单击历史任务区域的任务监控，查看任务详情。
#### 规划区管理 
摘要 : 
运维人员在规划区管理中对MEP数据进行规划和配置前，需要先创建或者打开一个规划区，每个规划区可独立作为一个工作区供运维人员修改MEP数据。 
本节介绍创建规划区的操作步骤。   
步骤 : 
在配置管理页面，选择MEP管理→规划区管理
，打开规划区管理页面，如[图1]所示。
图1  规划区管理页面
单击按钮，弹出创建对话框，如[图2]所示。
图2  创建对话框
在创建对话框中，设置规划区ID、规划区名称、权限和备注。参数说明参见[表1]。
参数|说明
---|---
规划区ID|手动填写或使用系统自动生成的ID。规划区ID只能由数字、字母、下划线组成，不能仅为数字0。
规划区名称|手动填写规划区的名称。
权限|私有或者公有。私有表示只对该规划区的创建者可见；公有表示所有用户都可见。
备注|用于填写备注信息。
单击确定按钮，完成规划区创建，如[图3]所示。单击打开按钮，可直接进入该规划区。
图3  规划区创建完成
相关任务 : 
任务名称|任务操作
---|---
删除规划区|在图1中，删除规划区操作如下：单击表格操作列中的删除按钮，可删除一个规划区。在规划区管理表格中勾选一个或多个规划区，单击表格上方的删除按钮，批量删除规划区。
修改规划区|在图1中，单击表格操作列的修改按钮，可修改规划区的规划区名称、权限、备注。
#### 新建参数模板 
摘要 : 
参数模板，用于在现网区或规划区以导入导出的方式批量查看和修改MEP数据。 
本节介绍创建参数模板的操作步骤。 
步骤 : 
在配置管理页面，选择MEP管理→模板管理
，打开模板管理页面，如[图1]所示。
图1  模板管理界面
单击创建按钮，在下拉列表中选择参数模板，打开参数模板创建页面。如[图2]所示。
图2  参数模板创建
选择网元类型、模型类型和模型标识，下方显示对应网元的MOC属性。
输入模板名称和模板描述。
双击MOC树节点，在页面右侧勾选参数模板文件所需的MOC的属性。 
单击保存按钮，保存参数（自定义）模板文件。
相关任务 : 
如果...|那么...
---|---
查看模板|单击查看按钮查看参数（自定义）模板文件。
删除模板|单击删除按钮删除参数（自定义）模板文件。
编辑模板|选择更多→编辑按钮编辑参数（自定义）模板文件。
刷新|单击刷新按钮刷新列表内容。
#### 网元备份恢复 
网元备份恢复功能提供以下操作： 
在对MEP数据执行操作前，用户可以通过网元数据备份功能批量备份MEP数据。 
网元数据恢复功能支持批量性对MEP进行数据恢复操作，将MEP数据快速恢复到执行操作之前的状态。 
##### 备份网元数据 
摘要 : 
本节介绍如何备份MEP网元的数据。系统支持对多个MEP网元的数据进行批量备份。 
步骤 : 
在配置管理页面，选择MEP管理→网元备份恢复→网元数据备份
，打开网元数据备份页面，如[图1]所示。
图1  网元数据备份页面
在基本信息区域填写文件前缀以及备份说明。
在网元列表区域单击选择网元，在待选列表中选择网元。
（可选）单击已选列表，页面显示已选择网元的信息。
单击确定按钮，网元列表区域显示待备份的网元。连接状态中显示的表示为双CC网元，鼠标移动至图标处可查看具体的连接状态，如[图2]所示。
图2  待备份网元
单击备份按钮，页面显示备份进度和结果。
 说明： 
备份页面备份的文件导出将直接导出到本地。周期备份文件导出会跳转到网元备份数据导出页面，用户选择需要的网元，再导出文件。 
相关任务 : 
网元数据备份页面的相关任务参见[表1]。
操作|说明
---|---
查看历史备份|单击历史备份按钮，查看历史备份文件的记录。
恢复|单击恢复按钮，跳转到恢复页面，使用备份文件做恢复操作。
导出|单击导出按钮，导出备份文件。
删除|单击删除按钮，删除备份文件。
##### 恢复网元数据 
摘要 : 
本节介绍如何通过服务器或本地的备份文件，对MEP网元的数据进行恢复。系统支持对多个MEP网元的数据进行批量恢复。 
前提 : 
已经备份了该网元数据。 
步骤 : 
在配置管理页面，选择MEP管理→网元备份恢复→网元数据恢复
，打开网元数据恢复页面，如[图1]所示。
图1  网元数据恢复页面
在基本信息区域选择服务器或本地文件。
在网元列表区域选择网元类型和网元。
（可选）勾选执行操作前备份。
单击恢复按钮，页面显示恢复进度和结果。
 说明： 
当所选择的网元类型为ITBBU时，可选择恢复生效方式，支持立即生效和复位后生效，默认为复位后生效。其他网元类型只支持复位后生效。 
当所选择的网元类型为ITBBU时，可在表格中单击比较按钮，对网元数据和备份数据进行比较。 
#### 配置工具 
运维人员可以通过配置工具对规划区MEP数据进行其他相关配置，配置工具是规划区数据配置操作的工具集合，支持如下操作： 
网元同步管理在网元同步管理页面，可查看MEP的数据同步状态，将MEP数据同步到网管上，选择MEP与网管数据进行比较。 
回滚区管理在回滚区管理页面可以进行数据回滚，支持创建、查看、终止、删除回滚区等操作。 
任务监控在配置任务监页面对任务进行集中监控，包括运行中或已结束的、当前用户或者所有用户任务的状态，支持查看和导出操作。 
工具箱工具箱提供多种工具。如：NR频率计算器、导入网元文件等。通过常用工具中的NR频率计算器计算器可以在设置频点时计算NR-ARFCN与射频参考频率之间的关系。 
##### 同步网元数据 
摘要 : 
通过网元同步信息功能，可查看当前系统中MEP配置数据的同步情况，如果有未同步的MEP，可使用同步功能将MEP数据同步到网管，系统也支持周期自动同步。 
本节介绍同步信息的操作步骤。 
步骤 : 
在配置管理页面，选择MEP管理→配置工具→网元同步管理
，打开网元同步管理页面，如[图1]所示。
图1  网元同步管理
（可选）默认显示未同步网元，可以通过选择指定网元的方式选择网元。单击下拉框，单击指定网元，在右侧弹出的网元选择器界面，选择网元。
图2  指定网元
在表格中勾选所需网元，单击同步按钮，更新网元数据。
相关任务 : 
同步信息页面的相关任务参见[表1]。
操作|说明
---|---
设置周期|单击周期按钮可以设置网元信息的同步周期，系统会按照设置的周期定期更新现网区数据。
查看全网网元同步状态统计信息|单击全网统计按钮，可以查看全网网元同步状态信息。
比较网管数据和网元数据|单击数据比较按钮，可以比较网管现网区数据和网元数据。
刷新列表|单击刷新按钮，页面显示刷新结果。
##### 创建回滚区 
摘要 : 
回滚区是指定时刻的网元数据备份。当系统异常或用户需要回退MEP数据时，可通过回滚可以将MEP数据回退到激活前的状态。回滚区管理功能支持创建、删除回滚区，并对指定回滚区进行回滚。 
有以下两种方式创建回滚区。 
在规划区进行数据激活前，创建数据回滚区。 
在回滚区管理页面创建数据回滚区。 
本节介绍创建数据回滚区的操作步骤。 
步骤 : 
在配置管理页面，选择MEP管理→配置工具→回滚区管理
，打开回滚区管理页面，如[图1]所示。
图1  回滚区管理页面
单击创建按钮，打开回滚区页面，如[图2]所示。
图2  创建回滚区页面
输入回滚区名称和描述，回滚区的格式为: 前缀_时间，例如 rollback_20171001000000000。
在网元类型下拉菜单中选择网元类型。
单击选择网元按钮，勾选需要进行数据回滚的网元。
（可选）单击已选列表，页面显示已勾选的网元。 
单击确定按钮，页面显示已选择的网元。
单击创建按钮完成回滚区的创建，页面显示创建进度和结果。
相关任务 : 
回滚区管理页面的相关任务参见[表1]。
操作|说明
---|---
执行数据回滚|单击回滚按钮打开数据回滚页面。在输入框中输入搜索条件搜索网元，勾选需要的网元。单击回滚按钮，在弹出的确认框中输入验证码执行数据回滚，页面显示回滚进度和结果。
查看回滚区|单击详情按钮查看回滚区的详细信息。
终止回滚|单击终止按钮取消回滚操作。
删除回滚区|勾选需要删除的回滚区。单击删除按钮，在弹出的确认对话框中输入验证码删除回滚区。
##### 监控任务 
摘要 : 
运维人员可以对激活、导入、导出等任务进行集中监控，包括运行中、已结束、当前用户任务以及所有用户任务。 
本节介绍监控任务的操作步骤。 
步骤 : 
在配置管理页面，选择MEP管理→配置工具→任务监控
，打开任务监控页面，默认显示已结束的全部用户任务信息，如[图1]所示。
图1  任务监控页面
设置任务监控页面的查询条件。例如在下拉列表框中选择任务状态为运行中，操作用户、任务类型为全选，单击查询按钮，页面显示运行中的所有用户的任务信息。如[图2]所示。
图2  任务监控页面
参数|说明
---|---
任务状态|要查询任务的状态。
任务类型|任务的功能类型，如激活数据等。
操作用户|当前登录的用户名。
创建时间|任务创建时间。
等待时间|任务的等待时间。
执行时间|任务的执行时间。
剩余时间|任务完成还剩余的时间。
进度|任务的进度。
数据区|用户操作的规划区名称和ID或者现网区。
操作|单击详情可以查看任务详细页面。
相关任务 : 
配置任务监控页面的相关任务说明参见[表2]。
操作|说明
---|---
查看任务详情|单击任务中的详情按钮，查看对应任务的详细信息。
导出任务操作结果|单击导出结果文件按钮，在导出文件中查看对应任务的操作结果信息。
##### 常用工具 
常用工具为运维人员提供多种工具。包括NR频率计算器、导入网元文件、moId调整工具等。 
## 缩略语 
## 缩略语 
EIR : 
Equipment Identity Register设备标识寄存器
HLR : 
Home Location Register归属位置寄存器
HSS : 
Home Subscriber Server归属用户服务器
### JSON 
Java Script Object NotationJava脚本对象标记
### MEP 
MEC Platform多接入边缘计算平台
### MML 
Man Machine Language人机语言
### MO 
Managed Object管理对象
### MOC 
Managed Object Class管理对象类
Measurement Object Class测量对象类型
### OSD 
Open Script Designer脚本设计器
### OSE 
Open Script Execution Engine脚本执行引擎
### SDK 
Software Development Kit软件开发工具
SPR : 
Subscription Profile Repository用户签约数据库
### SSH 
Secure Shell安全外壳
### SSS 
Supplementary Service Server（IMS）补充业务服务器
UDM : 
Unified Data Management统一数据管理
### UME 
Unified Management Expert统一管理专家
## 信令跟踪 
### 端到端跟踪 
#### 用户跟踪 
摘要 : 
端到端用户信令跟踪是指跟踪特定用户端到端的核心网侧全流程信令。 
本节介绍创建一个端到端的用户跟踪任务的过程。根据需求，跟踪任务创建后，可以即时执行、定时启动执行，也可以是持续执行。 
步骤 : 
登录EM Web客户端，选择跟踪→端到端跟踪→用户跟踪
，进入用户跟踪页面，如[图1]所示。
图1  用户跟踪页面
单击新建按钮，打开新建任务界面，如[图2]所示，通用参数说明参见[表1]。
图2  新建用户跟踪
参数|说明
---|---
跟踪类型|IMSI：输入15位的国际移动用户识别码。MSISDN：输入6–16位用户手机号码。IMEI：输入15-17位国际移动设备识别码。
网元类型|选择需要跟踪的网元类型。
协议类型|选择需要跟踪的协议类型。
时间设置|即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
任务数提示|显示已建任务和系统支持任务的比率。
设置好相关参数后，单击新建，完成用户跟踪任务的建立。
#### Pool跟踪 
摘要 : 
本节介绍如何创建Pool跟踪任务。 
步骤 : 
登录EM Web客户端，选择菜单跟踪→端到端跟踪→Pool跟踪
，进入Pool跟踪页面，如[图1]所示。
图1  Pool跟踪
单击新建按钮，创建Pool跟踪任务，页面如[图2]所示。
图2  新建Pool跟踪
参考[表1]，设置跟踪任务参数，单击新建按钮，创建跟踪任务完成。
参数|说明
---|---
跟踪类型|端到端跟踪用户的IMSI或者是MSISDN。
时间设置|即时：设置跟踪的时长，任务创建后，立即生效，上报设置时长内的跟踪数据。持续：任务创建后，立即生效，持续上报跟踪数据，不会自动停止。定时：任务创建后，在指定时间段生效，上报指定时间段内跟踪数据。
### CN跟踪（OAM） 
CN跟踪（OAM）实现核心网5G各类NF的各类信令跟踪流程，包括跟踪指定的接口、跟踪指定的用户、跟踪指定的NF、跟踪随机用户等。通过对跟踪到的各类信令的解码及展示功能，操作维护人员可以直观地分析和判断相关信令的正确性，有助于协助排查相关问题。跟踪码流及其解码结果，可以导出为数据文件，供事后分析。
#### 通用操作 
##### 新建跟踪任务 
摘要 : 
本节介绍创建一个跟踪任务的过程。跟踪任务的类别包括信令跟踪、失败观察。根据需求，跟踪任务创建后，可以即时执行、定时启动执行，也可以是持续执行。 
步骤 : 
登录EM Web客户端，选择跟踪→CN跟踪（OAM）
，在左侧的导航树中选择网元（例如，AMF/GnGp SGSN/MME），界面如[图1]所示。
图1  CN跟踪页面
单击新建按钮，打开新建任务界面，如[图2]所示，通用参数说明参见[表1]。
图2  新建任务界面-通用参数
项目|参数|说明
---|---|---
基本信息|任务名称|跟踪任务名称。
任务分类|基本信息|跟踪任务分类，可根据需要选择。
任务类型|基本信息|根据选择NF不同，任务类型也不同。
选择网元|选择网元|在网元列表中选择需要跟踪的网元。
时间设置|即时|任务从现在开始启动，经过设置的时长后停止任务。
持续|时间设置|任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。
定时|时间设置|任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。|信令存储设置
任务数提示|显示已建任务数与系统支持任务数的比率。|任务数提示
单击下一步，进入业务参数页面，如[图3]所示。
 说明： 
跟踪任务的分类不同，后续业务参数的设置也不同。 
图3  业务参数页面
选择跟踪类型，单击新建并监控按钮，任务创建成功，进入实时监控状态，如[图4]所示。
图4  新建监控任务
##### 启动跟踪任务 
摘要 : 
本节介绍如何启动任务状态是已停止的跟踪任务。
步骤 : 
在任务列表中勾选需要启动的任务，如[图1]所示。
图1  勾选任务
单击启动按钮，进行任务启动。任务状态变为已激活，如[图2]所示。
图2  启动任务
##### 停止跟踪任务 
摘要 : 
本节介绍如何停止已经激活或者正在激活中的任务。 
步骤 : 
在任务管理界面中勾选需要停止的任务，如[图1]所示。
图1  勾选任务
单击停止按钮，将选中的任务停止，任务状态变为已停止，如[图2]所示。
图2  停止任务
##### 修改跟踪任务 
摘要 : 
本节介绍如何修改任务状态为已停止跟踪任务。只能修改选择网元、时间设置、业务参数参数。
步骤 : 
在任务管理界面中勾选需要修改的任务，如[图1]所示。
图1  勾选任务
单击操作列下的修改按钮，修改选中的任务，修改相关参数的操作参考[新建跟踪任务]。
##### 删除跟踪任务 
摘要 : 
本节介绍如何删除已停止跟踪的任务。 
步骤 : 
在任务管理界面中勾选需要删除的任务（可以选择多个跟踪任务），如[图1]所示。
图1  勾选任务
单击删除按钮，在弹出的确认删除所选任务对话框中，单击确定按钮，如[图2]所示。
图2  确认删除所选任务对话框
单击确定按钮，选中的任务从任务列表删除。
##### 查看网元状态 
摘要 : 
本节介绍如何查看网元的任务状态。 
步骤 : 
在任务列表中，选择需要查看网元状态的跟踪任务所在行，单击操作→更多→查看网元状态
，弹出查看网元状态界面，如[图1]所示。
图1  查看网元状态
参见[表1]，查看所选任务的网元的状态。
项目|说明
---|---
任务号|跟踪任务的编号。
网元名|跟踪的网元。
状态|网元的任务状态有如下。已激活：网管下发的任务已经在网元上启动成功。未激活：网元已收到网管下发的任务，启动失败。失败的详细原因在描述列显示。
描述|显示任务运行的详细信息。
##### 实时监控跟踪数据 
摘要 : 
本节介绍如何监控实时跟踪数据。 
步骤 : 
在信令跟踪任务的详情列表中，如[图1]所示，选中所要查询任务。
图1  跟踪任务详情列表
单击监控按钮，实时监控数据如[图2]所示。
图2  实时数据
##### 查看历史跟踪数据 
摘要 : 
本节介绍如何查看历史跟踪数据。 
步骤 : 
在信令跟踪任务的详情列表中，如[图1]所示，选中所要查询任务。
图1  跟踪任务列表
单击操作栏更多→查看历史数据
按钮，界面显示设置查询时间段，如[图2]所示。
图2  设置查询时间
设置查询时间范围，单击查询按钮，历史数据显示如[图3]所示。
图3  历史数据查询
##### 查看详细码流 
摘要 : 
本节介绍如何查看详细码流。 
步骤 : 
在实时监控跟踪数据页面或者是查看历史跟踪数据页面，如[图1]所示，选择需要查看详细码流的跟踪任务项。
图1  跟踪数据页面
单击按钮，弹出事件详情界面，查看数据的详细信息，如[图2]所示。
图2  事件详情
##### 保存数据 
摘要 : 
本节介绍如何保存历史跟踪数据。保存的文件格式为为四种：.html 
 /.txt  
/.sta 
/ .pcap 
。
步骤 : 
在历史数据查询结果列表中，选择需要导出的条目，如[图1]所示。
图1  选择导出条目
单击导出已选，则选中的条目跟踪信息以文件保存到本地（格式可选：html 
  /txt  
/sta 
/pcap 
），如[图2]所示。
图2  选择格式文件
单击导出按钮，则选中数据到存到本地。
##### 导出数据 
摘要 : 
本节介绍如何从跟踪任务中导出信令数据。 
步骤 : 
在跟踪任务列表，选择需要导出历史跟踪数据的任务，如[图1]所示。
图1  选择导出任务
单击操作栏的导出按钮，进入导出设置界面，如[图2]所示。
图2  设置导出条件
设置相关参数，单击导出，则选中任务的跟踪数据以文件形式保存到本地。
#### SIG信令跟踪 
##### 基于偶联ID的SCTP跟踪 
摘要 : 
本节介绍基于偶联ID的SCTP信令的跟踪方法。SCTP用于在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择SCTP跟踪 基于偶联ID。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|参数说明
---|---
AssociationID|SCTP链路ID。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  基于偶联ID的SCTP跟踪任务
##### 基于端口号的SCTP跟踪 
摘要 : 
本节介绍基于端口号的SCTP信令的跟踪方法。SCTP用于在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择SCTP跟踪 基于端口号。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|参数说明
---|---
LocalPort|本端端口号。
PeerPort|对端端口号。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  基于端口号的SCTP跟踪任务
##### 基于IP+PORT的SCTP跟踪 
摘要 : 
本节介绍基于IP+PORT的SCTP信令的跟踪方法。SCTP用于在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择SCTP跟踪 基于IP+PORT。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|参数说明
---|---
VPNID|VPN的ID。
LocalIP|本端IP地址，可设置为IPV4或IPV6。
PeerIP|对端IP地址。
LocalPort|本端端口号。
PeerPort|对端端口号。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  基于IP+PORT的SCTP跟踪任务
##### M3UA偶联跟踪 
摘要 : 
本节介绍M3UA信令的跟踪方法。在SIGTRAN提供的适配层协议中，M3UA提供选路功能和信令网管理功能，并具备组网能力，适宜于网间电话互通。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择M3UA偶联跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|参数说明
---|---
ASSOCID|M3UA偶联链路的ID。
Direction|出向：跟踪SCTP向对端发送的消息。入向：跟踪SCTP接收的来自对端的消息。出向/入向：跟踪SCTP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  M3UA偶联跟踪任务
##### M3UA丢弃消息跟踪 
摘要 : 
本节介绍M3UA丢弃消息的跟踪方法。在SIGTRAN提供的适配层协议中，M3UA提供选路功能和信令网管理功能，并具备组网能力，适宜于网间电话互通。
M3UA有时会接收到不合法的消息，对于这些不合法的消息，M3UA不会继续进行处理，而是直接丢弃。M3UA丢弃消息跟踪可以跟踪到被M3UA丢弃的消息，进而帮助系统维护人员排查M3UA信令相关的问题。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择M3UA丢弃消息跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面（无业务参数）。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图2]所示。
图2  M3UA丢弃消息跟踪任务
##### NIF丢弃消息跟踪 
摘要 : 
本节介绍NIF丢弃消息的跟踪方法。SIGTRAN消息可以通过NIF进行转发。NIF有时会接收到不合法的消息，对于这些不合法的消息，NIF不会继续进行处理，而是直接丢弃。NIF丢弃消息跟踪可以跟踪到被NIF丢弃的消息，进而帮助系统维护人员排查NIF信令相关的问题。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择NIF丢弃消息跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面（无业务参数）。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图2]所示。
图2  NIF丢弃消息跟踪任务
##### SCCP跟踪 
摘要 : 
本节介绍SCCP通用信令跟踪的方法。 
该跟踪方式支持条件跟踪，实现了基于GT和SSN的各种组合的信令跟踪。
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择SCCP跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
如果...|那么...
---|---
需要对GT进行过滤|在地址类型中选中GT过滤。选择过滤类型并设置相应的GT号码。设置SCCP跟踪的跟踪方向。
需要对子系统进行过滤|在地址类型中选中子系统过滤。选择过滤类型并设置相应的SSN。（选中全选时下方选择框中全部子系统号被选中）设置SCCP跟踪的跟踪方向。
需要对GT和子系统进行过滤|在地址类型中选中GT过滤和子系统过滤。选择过滤类型并设置相应的GT号码和SSN号码。设置SCCP跟踪的跟踪方向。
参数|参数说明
---|---
跟踪方向|出向：跟踪SCCP向对端发送的消息。入向：跟踪SCCP接收的来自对端的消息。出向/入向：跟踪SCCP和对端间的消息。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  SCCP跟踪任务
##### SCCP丢弃消息跟踪 
摘要 : 
本节介绍SCCP丢失消息的跟踪方法。SCCP位于MTP3层之上，提供无连接和面向连接的网络服务以及全局码翻译，增强寻址功能，并与MTP3一起完成网络层的功能。
SCCP有时会接收到不合法的消息，对于这些不合法的消息，SCCP不会继续进行处理，而是直接丢弃。SCCP丢弃消息跟踪可以跟踪到被SCCP丢弃的消息，进而帮助系统维护人员排查SCCP信令相关的问题。 
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG信令跟踪。在任务类型下拉菜单中选择SCCP丢弃消息跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面（无业务参数）。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图2]所示。
图2  SCCP丢弃消息跟踪任务
#### SIG失败观察 
##### SCCP失败观察 
摘要 : 
本节介绍观察SCCP失败消息的方法。 
SCCP位于MTP3层之上，提供无连接和面向连接的网络服务以及全局码翻译，增强寻址功能，并与MTP3一起完成网络层的功能。
观察SCCP失败消息，主要用于观察SCCP消息收发过程中产生的失败数据，便于定位分析问题。 
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数设置
设置失败观察任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择SIG失败观察。在任务类型下拉菜单中选择SCCP观察。
选择网元|在网元列表中选择需要跟踪的网元，如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面（无业务参数）。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图2]所示。
图2  SCCP失败观察任务
#### AMF用户信令跟踪 
摘要 : 
本节介绍AMF用户信令跟踪的跟踪方法。 
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择信令跟踪。在任务类型下拉菜单中选择AMF用户信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|参数说明
---|---
跟踪方式|全部用户指定用户
接口类型|选择跟踪的接口类型。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  AMF用户信令跟踪任务
#### AMF业务失败观察 
摘要 : 
本节介绍AMF业务失败观察的跟踪方法。 
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择失败观察。在任务类型下拉菜单中选择AMF业务失败观察。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|说明
---|---
严重级别|失败级别由高到低排序如下：严重错误警告当选择高级别时，跟踪结果不显示低级别的失败；当选择低级别时，跟踪结果显示高级别的失败。
跟踪方式|跟踪方式选项：全部用户：跟踪所有用户。指定用户：至少配置一个用户号码。单击新增按钮，输入SUPI/IMSI、GPSI/MSISDN任意一个号码。单击图标，保存号码。
失败原因跟踪方式|跟踪方式选项：全部：跟踪所有失败。指定：选择跟踪的失败原因。
匹配方式|正向：表示跟踪失败原因列表中失败。逆向：表示跟踪失败原因列表之外的其他失败。
失败原因|指定跟踪时，可选择具体的失败原因。
业务类型跟踪方式|跟踪方式选项：全部：跟踪所有模块。指定：选择失败观察上报的模块。
业务类型|指定跟踪时，可选择上报的模块。
接口类型跟踪方式|跟踪方式选项：全部：跟踪所有接口。指定：选择跟踪的接口。
接口类型|指定跟踪时，可选择上报的接口。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  AMF业务失败观察任务
#### SGSN&MME用户信令跟踪 
摘要 : 
本节介绍SGSN&MME用户信令跟踪的跟踪方法。 
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF/GnGp SGSN/MME
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择信令跟踪。在任务类型下拉菜单中选择SGSN&MME用户信令跟踪。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|参数说明
---|---
跟踪方式|所有用户随机用户特定用户
跟踪类型|选择跟踪的接口类型。
已增加的任务|已经增加的跟踪任务。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  SGSN/MME用户信令跟踪任务
#### SGSN&MME失败观察 
摘要 : 
本节介绍SGSN&MME业务失败观察的跟踪方法。 
开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。 
步骤 : 
在跟踪页面中，选择CN跟踪（OAM）→AMF/GnGp SGSN/MME
节点，进入任务管理页面。
单击新建按钮，打开新建任务页面，如[图1]所示。
图1  通用参数页面
设置跟踪任务的通用参数。 
参数名称|参数含义
---|---
基本信息|设置跟踪任务的名称。在任务分类下拉菜单中选择失败观察。在任务类型下拉菜单中选择SGSN&MME失败观察。
选择网元|在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。
时间设置|根据需要选择任务执行的时间。即时：任务从现在开始启动，经过设置的时长后停止任务。持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。定时：任务从设置的开始时间启动，到设置的终止时间停止。
信令存储设置|设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。
单击下一步，进入业务参数页面，如[图2]所示。
图2  业务参数页面
设置跟踪任务的业务参数。 
参数|说明
---|---
用户标识|跟踪类型选项所有用户：跟踪所有用户。特定用户：指定跟踪用户。号码类型：选择号码类型。用户号码
跟踪进程|可选择跟踪进程。
设置黑白名单|优先级由高到低排序如下：严重告警通知
失败原因|指定跟踪进程时，可选择失败原因及辅助失败原因。
单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如[图3]所示。
图3  SGSN&MME业务失败观察任务
### CN跟踪（OMM） 
CN跟踪（OMM）实现对中兴通讯核心网网元（版本号为V4.X或V5.X）进行信令跟踪。通过对跟踪到的各类信令的解码及展示功能，操作维护人员可以直观地分析和判断相关信令的正确性，有助于协助排查相关问题。跟踪码流及其解码结果，可以导出为数据文件，供事后分析。 
后续的信令跟踪操作以通用操作为例说明。具体网元的信令跟踪的详细信息需要参考网元对应版本的随机文档。 
#### 设置IE浏览器 
摘要 : 
当需要跟踪由OMM接入EMS的网元信令时，EM客户端所在chrome浏览器无法打开信令跟踪窗口。本节介绍如何设置IE浏览器，从而保证客户端可以通过弹出IE浏览器窗口显示信令跟踪页面。
前提 : 
已获取需要进行信令跟踪的网元所属的OMM IP地址。 
客户端IE浏览器版本为Internet Explorer 11。 
步骤 : 
在EM客户端PC上，下载如下补丁文件并安装。
[omm-trace-plugin.exe]
打开IE浏览器，选择工具→兼容性视图设置
，进入兼容性视图设置窗口，如[图1]所示。
图1  选择兼容性视图设置
在兼容性视图设置窗口，添加需要跟踪网元信令的OMM IP地址，如[图2]所示。
图2  添加网元OMM IP
选择工具→Internet选项
，进入Internet选项窗口，如[图3]所示。
图3  IE选项
在Internet选项窗口，选择高级页签，勾选TLS1.2，如[图4]所示。
图4  使用TLS1.2
选择安全页签，单击自定义级别按钮，如[图5]所示。
图5  打开自定义安全设置
将ActiveX控件和插件下的所有选项设置为启用，如[图6]所示。
图6  启用ActiveX控件和插件
（可选）如果需要进行信令跟踪的网元属于xGW，则还需执行如下操作。 
选择受信任的站点，单击站点按钮，弹出受信任站点对话框，如[图7]所示。
图7  为xGW网元添加受信任站点
在受信任站点对话框中，添加该xGW的IP地址，如[图8]所示。
图8  添加xGW的IP地址
单击关闭。
#### 进入跟踪信令窗口 
摘要 : 
本节介绍如何在EM客户端打开信令跟踪窗口，跟踪目标网元信令。
 说明： 
如果单击监控按钮，无法打开信令跟踪页面，单击下载链接，下载并安装ielink插件。
前提 : 
已完成IE浏览器设置，具体参见[设置IE浏览器]。
步骤 : 
在EM客户端跟踪页面，选择CN跟踪（OMM），在左侧的导航树中选择网元类型，打开信令跟踪页面，如[图1]所示。
图1  CN跟踪（OMM）
单击监控按钮，弹出要打开URL对话框，如[图2]所示。
图2  弹出对话框
单击打开URL按钮，进入IE浏览器页面，如[图3]所示。
图3  进入IE浏览器页面
单击继续浏览此网页（不推荐），进入该网元信令跟踪窗口，如[图4]所示。
图4  进入信令跟踪窗口
任务管理器页面的按钮说明参见[表1]。
按钮|按钮名称|按钮说明
---|---|---
|开始任务|选中处于暂停或停止状态的任务，单击该按钮，开始任务。
|暂停任务|选中处于运行状态的任务，单击该按钮，暂停任务。
|停止任务|选中处于运行或暂停状态的任务，单击该按钮，弹出确认停止任务的对话框，单击确认按钮后停止任务。
|删除任务|选中任务，单击该按钮，弹出确认删除任务的对话框，单击确认按钮后删除选中的任务。
|停止服务器所有任务|单击该按钮，弹出确认停止服务器所有任务的对话框，单击确认按钮后停止服务器上所有处于运行或暂停状态的任务。
|打开文件|单击该按钮，弹出打开窗口，选择已保存的任务的数据文件，查看其历史数据。
|条件|单击该按钮，显示跟踪详细信息。
|清空所有任务数据|单击该按钮，删除当前任务管理器中的所有任务的数据。
|查询跟踪任务|单击该按钮，在下方出现的跟踪任务列表页面中，查询当前信令跟踪/失败观察任务。
|查询数据文件|单击该按钮，在下方出现的数据文件列表页面中，查询当前信令跟踪/失败观察任务的数据文件。
|书签|单击该按钮，在下方出现的书签管理器页面中，查询已经保存的信令跟踪/失败观察任务。
|设置|单击该按钮，在下方出现的设置页面中，设置表格显示允许最大记录数和详细的解码操作。
### 设置 
#### 信令数据存储设置 
摘要 : 
本节介绍信令数据存储参数的设置。 
步骤 : 
登录EM Web客户端，选择跟踪→设置→信令数据存储设置
，界面如[图1]所示。
图1  信令数据存储设置
如果需要修改默认参数设置，单击修改按钮，重新设置参数后，单击提交按钮完成设置。
#### 原因码设置 
摘要 : 
本节介绍如何设置原因码。原因码设置指用户按照个人需求，自定义需要凸显的异常信令。 
步骤 : 
登录EM Web客户端，选择跟踪→设置→原因码设置
，界面如[图1]所示。
图1  原因码设置
在左侧目录树中选择相应的网元，单击修改按钮，选中需要提交的原因码后，单击提交按钮按钮完成设置。
（可选）如果不需要自定义凸显某些异常信令，单击恢复默认按钮，则回到到初始模型配置。
### 工具 
#### 查看离线数据 
摘要 : 
本节介绍如何查看离线数据。 
步骤 : 
登录EM Web客户端，单击菜单跟踪→工具→离线数据查看
，打开离线数据查看页面，如[图1]所示。
图1  查看离线数据
单击选择文件按钮，选择需要查看的离线数据文件，如[图2]所示。
图2  选择离线数据文件
选中sta文件，单击打开，打开上传页面，如[图3]所示。
图3  上传数据文件
单击上传按钮，则选中的文件开始上传，结束后显示具体跟踪信息，如[图4]所示。
图4  上传结果
## 缩略语 
## 缩略语 
GPSI : 
Generic Public Subscription Identifier一般公共用户标识
IMEI : 
International Mobile Equipment Identity国际移动设备标识
IMSI : 
International Mobile Subscriber Identity国际移动用户标识
### M3UA 
MTP3-User Adaptation layer protocolMTP第三层的用户适配层协议
MSISDN : 
Mobile Station International Subscriber Directory Number移动台国际用户目录号
### MTP3 
Message Transfer Part layer 3消息传递部分第三层
NF : 
Network Function网络功能
### NIF 
Node Interworking Function节点互通功能
### PEI 
Permanent Equipment Identifier永久设备标识
### SCCP 
Signaling Connection Control Part信号连接控制部分
SCTP : 
Stream Control Transmission Protocol流控制传输协议
### SIGTRAN 
Signalling Transport信令传输
### SSN 
Sub-System Number子系统号
SUPI : 
Subscriber Permanent Identifier用户永久标识
### VPN 
Virtual Private Network虚拟专用网
## 备份与恢复 
### 备份与恢复简介 
摘要 : 
数据是系统中最宝贵的资源，一旦发生数据丢失，将给系统造成重大影响。严重的将影响系统运行，给系统拥有者带来无法弥补的损失。 
数据只要进行存储交换等操作，就存在安全问题。若未采取备份和恢复手段等措施，则可能导致数据丢失。通过备份恢复的预防措施，以提高系统的可服务性。 
在虚拟化后，EM以及关联产品均运行在云平台上。对数据进行备份的要求更高，同时务必将备份的数据文件及时归档第三方的物理存储设备上。当本地备份异常时能通过第三方恢复操作及时恢复系统，减少用户的损失。
#### 备份 
备份是指在备份介质上创建数据副本的过程，数据副本用于原数据被损坏或丢失的情况下恢复数据。 
备份的方式分为自动备份和手工备份两种： 
自动备份是系统通过定时任务，定时将需要备份的数据进行自动备份防止系统数据丢失，在故障时可通过自动备份的文件对系统进行恢复。 
手工备份是系统操作维护人员，自行保存系统中重要的数据，以备在系统数据丢失或者出现无法解决的故障时对系统进行恢复。 
#### 恢复 
恢复是指在数据丢失后通过数据副本重新创建原数据的过程。 
注意事项 : 
维护人员执行备份恢复的操作时应了解以下相关知识。熟悉Linux常用命令和操作。熟悉本产品设备网络组网、服务器应用部署。熟悉本产品各服务器相关文件、文件路径。 
为保证备份恢复的效率，防止误操作，维护工程师需符合以下要求。上岗前须进行培训。熟练掌握本产品相关操作流程。严格遵守操作规程和行业安全规程，确保人身安全与设备安全。 
备份恢复中禁止操作内容。禁止修改业务数据。禁止卸载业务。禁止删除服务器上重要目录禁止在忙时执行备份恢复操作。 
 说明： 
执行备份恢复操作会影响磁盘的I/O，并对现有网络运行有重大影响。如有需要请在系统闲时进行，如凌晨0～4点。 
执行备份恢复操作前需要经过严格的审批，并由专业人员执行。 
### NF数据备份恢复 
#### 手工备份NF数据 
摘要 : 
本节介绍NF手动备份数据操作。 
 小心！ 
备份前需确认NF是否存在变化表及该变化表是否影响业务，如有影响在确认后先传表同步数据，再进行备份。 
涉及备份恢复相关命令中的密码，不能直接拷贝执行，只能在界面手动输入。 
步骤 : 
登录EMS网管客户端，选择配置→命令处理→NF节点
。
执行[BACKUP]命令，手动备份NF数据。参数保持默认设置，默认备份所有对象集，备份内容参见[表1]。
序号|备份内容
---|---
1|基本配置数据
2|IP协议栈配置数据
3|安全数据
4|日志数据
5|OAM数据库文件
6|NFS私有数据
7|性能数据
8|告警数据
 说明： 
如果备份网元的License受控项NF_0001（支持GDPR功能）为打开状态，则需要设置BAKFILEPWD（备份文件密码）参数，设置完成后务必记录该密码。
在网管操作记录页面查看任务进度执行至100%后，单击查看结果按钮确认所有打印记录的任务错误状态为成功。
状态确认完成后单击输出文件路径返回的URL链接，将备份完成的文件保存至本地。
#### 自动备份NF数据 
摘要 : 
本节介绍NF自动备份数据操作。 
 说明： 
涉及备份恢复相关命令中的密码，不能直接拷贝执行，只能在界面手动输入。 
##### 相关知识 
在系统安装完成并运行正常时，系统会自动创建NF数据自动备份策略。防止配置数据意外损坏丢失的情况，并能够在发生故障时快速恢复配置数据。 
步骤 : 
登录EMS网管客户端，选择配置→命令处理→NF节点
。
执行[SHOW AUTO STRATEGY]命令，查询自动备份策略。
在命令执行结果中，确认系统对象集合的自动备份任务是否完整，如[图1]所示。
图1  SHOW AUTO STRATEGY命令执行结果
 说明： 
执行[SHOW AUTO STRATEGY]命令查询的系统对象集合，需要与命令[SHOW SYS SET]查询结果一致。
（可选）如果存在查询结果缺失系统对象集合的情况，需要手动创建自动备份任务。 
[ADD AUTO STRATEGY]:ID=1,NAME="BASICCM",ACTIVEFLAG="ACTIVATE",OUTPUTPATH="SFTP://[2021:0:179:1063::138]:29029/Oamdata/amf29/oam/autobackup/1/",USERNAME="ems",PASSWORD="************",FILECOUNT=30,BASEFILENAME="BASICCM",SETID="1",TIMETYPE="DAY",TIME="04:00"
创建对象集合的自动备份三方服务器策略
 说明： 
在网管中默认创建的自动备份策略是将数据备份到系统自带的SFTP服务器，建议创建自动备份策略将数据备份到第三方服务器。 
创建对象集合的自动备份三方服务器策略，参考命令如下。 
[ADD AUTO STARTEGY]:ID=10,NAME="all",OUTPUTPATH="sftp://10.228.125.58/backup/5GC_ZTE/",USERNAME="backup",PASSWORD="********",BASEFILENAME="amf31",SETID="1"&"2"&"3"&"4"&"5"&"6"&"7"&"8",TIME="4:35"
参数名称|参数说明
---|---
USERNAME（用户名）|该参数在命令中表示，用户名backup。
OUTPUTPATH（SFTP服务器IP）|该参数在命令中表示，sftp://10.228.125.58/backup/5GC_ZTE/其中5GC_ZTE是在/backup根目录下创建的目录，用来存放备份文件。
SETID（备份对象）|该参数在命令中表示，当前支持的所有备份对象。
TIME（自动备份时间）|该参数在命令中表示，选择凌晨非忙时，需要满足和其他备份定时任务的启动时间错开至少5分钟的条件。
### NF数据恢复操作 
#### 原局恢复NF数据 
原局恢复NF数据是指将备份的数据文件恢复到网管后台数据库，然后同步到前台生效的过程。 
建议原局恢复NF数据的操作在非话务高峰时进行。 
原局恢复数据后，建议整局重启，如果当前不允许中断业务或者不允许重启说明不具备重启条件，联系中兴通讯技术支持进行评估后操作。 
操作倒回时优先采用脚本回退的方式。如果回退耗时较长、回退的脚本存在问题、脚本回退过程存在异常，联系中兴通讯技术支持确认是否继续采用原局恢复数据的方式进行数据恢复操作。 
##### 操作前准备与条件 
 说明： 
涉及备份恢复相关命令中的密码，不能直接拷贝执行，只能在界面手动输入。 
原局恢复数据前的操作准备与前提条件如下。 
已完成[NF数据备份恢复]的操作对数据进行备份处理。
在修改配置前，执行[EXPT MML]命令，将当前配置反导并保存至本地。
修改配置操作时，需记录重启生效的命令。 
##### 恢复配置数据和数据同步 
摘要 : 
本节介绍根据[NF数据备份恢复]备份的内容，恢复配置数据并将数据同步的操作。
###### 相关知识 
uMAC网元，需要同步离线配置的全部数据。 
步骤 : 
将待恢复的数据文件上传至与OMU互通的SFTP服务器。
登录EMS网管客户端，选择配置→命令处理→NF节点
。
 小心！ 
在原局恢复数据后，建议整局重启，如果当前不允许中断业务或者不允许重启说明不具备重启条件，联系中兴通讯技术支持
评估后操作。
执行[RESTORE]:ID=1,NAME="default",FILENAME="sftp://172.5.20.7/tmp/backup/cm_backup_1123.zip",USERNAME="root",PASSWORD="**************",ISREINST="RESTORE_LOCAL"命令，命令中的关键参数参见[表1]。
参数释义|填写说明
---|---
FILENAME（恢复文件路径）|该参数为存放备份文件的SFTP路径。
BAKFILEPWD（恢复文件密码）|该参数为当前网元License的受控项NF_0001当GDPR开关为打开状态时需要填写备份时设置的密码，否则不需要配置。
USERNAME（SFTP用户名）|该参数为对应的SFTP的用户名。
PASSWORD（SFTP密码）|该参数为对应的SFTP密码。
ISREINST（恢复场景）|该参数为设置为RESTORE_LOCAL（本局恢复）
 说明： 
在网管操作记录页面中，查看恢复进度至100%并且执行结果为成功状态，表示恢复完成。
执行[SYNA]:STYPE="ALL"命令，同步CUDR和MME/SGSN服务的离线配置数据。
执行[SYN ONLINE]:STYPE="ALL"命令，进行在线一致性同步。
如果恢复前的配置修改涉及Rosng协议栈数据的修改，需要在数据恢复后，同时重启主备Rosng容器生效，否则不需要重启。 
 小心！ 
重启前不能执行Rosng配置命令并且不能进行Rosng写入操作。 
通过SSH方式，以admin账号分别登录网管虚机OMU0001和OMU0002。
执行[SU]命令，将用户模式切换到ROOT模式。
务必同时在两个虚机中，执行以下对应命令重启主备OMU0001和OMU0002虚机。 
`docker restart vru-tmsp-rosng-0     /*OMU0001虚机执行命令*/
docker restart vru-tmsp-rosng-1     /*OMU0002虚机执行命令*/` 
##### 数据检查与测试基本业务 
检查无新增异常告警。 
检查和确认各链路和路由状态正常。 
按照验证条目进行业务验证。 
##### 数据恢复异常处理 
如果恢复时出现异常，在联系中兴通讯技术支持
定位分析后还是无法恢复，请使用操作方案准备的回退命令进行恢复。
#### 本局重新实例化后恢复NF数据 
本局重新实例化后恢复NF数据是指本局重新实例化后将备份的数据文件恢复到网管后台数据库中，然后同步到前台并重启整局生效的过程。 
重新实例化的局点名称必须和删除的局点名称相同。 
重新实例化后，需要重新申请License并加载。 
重新实例化的局导入备份数据后，需要同步数据并重启全局后才能生效。 
检查已恢复的Rosng配置并确认接口MAC地址是否正确。 
当本局存在运行异常的情况，联系中兴通讯技术支持确认是否通过重新实例化的方式解决异常，或者在测试场景下测试是否需要重新实例化。 
##### 操作前准备与条件 
 说明： 
涉及备份恢复相关命令中的密码，不能直接拷贝执行，只能在界面手动输入。 
已完成[NF数据备份恢复]的步骤进行数据备份。
执行[SHOW LICENSE]命令，在操作记录中手动复制保存当前网元的License项。
执行[EXPT MML]命令，在操作记录中点击导出执行结果将当前配置反导保存。
执行[SHOW NF]命令，并记录查询结果中当前NF类型以及对应的NFID的后12位信息，如[图1]所示。
图1  网元信息查询
检查重新实例化后的网元名称和实例化前的网元名称是否一致。 
##### 申请新License文件并加载 
摘要 : 
本节介绍恢复数据前，如何申请全新License文件和加载License文件的步骤。 
步骤 : 
执行[SHOW NFSN]命令，查询新实例化网元的NFS序列号并记录。
将查询出的序列号以及对应版本的License模板，按照重新实例化前记录的License项比对填写新的License申请文件。 
联系中兴通讯技术支持
发起License申请。
获取Licesne文件后加载激活新的License文件。 
 说明： 
优先界面操作的方式激活License文件，操作方法可以联系中兴通讯技术支持
获取。
##### 备份新实例化网元的空局数据 
摘要 : 
本节介绍备份新实例化网元的空局数据的操作步骤。 
步骤 : 
执行[BACKUP]命令备份空局数据，备份成功后，将空局数据下载至本地并保存。
 说明： 
如果提示Rosng文件备份失败，请在Rosng配置模式下先执行[WRITE]命令，再进行备份。
备份完成后在Rosng配置模式下，执行[show running-config]命令，保存配置文件中每个接口的MAC配置信息。
##### 恢复配置数据并重启全局 
摘要 : 
本节介绍本局重新实例化后恢复配置数据并重启全局的操作步骤。 
 小心！ 
在恢复过程中请不要随意添加、修改、删除任何配置数据，避免数据在更改过程中出现错误，导致无法恢复原始数据。 
步骤 : 
待恢复数据上传
将配置修改前备份的数据文件上传至和OMU互通的SFTP服务器中。 
登录EMS网管客户端，选择配置→命令处理→NF节点
。
执行[RESTORE]:ID=1,NAME="default",FILENAME="sftp://172.5.20.7/tmp/backup/cm_backup_1123.zip",USERNAME="root",PASSWORD="****************",ISREINST="RESTORE_REINST"命令，命令中的关键参数，参见[表1]。
参数名称|参数说明
---|---
FILENAME（恢复文件路径）|该参数为存放备份文件的SFTP路径。
BAKFILEPWD（恢复文件密码）|该参数为当前网元License的受控项NF_0001，当GDPR开关为打开状态，说明需要填写备份时设置的密码，否则无需配置。
USERNAME（SFTP用户名）|该参数为SFTP用户名。
PASSWORD（SFTP密码）|该参数为SFTP密码。
ISREINST（恢复场景）|该参数设置为RESTORE_REINST（本局重新实例化恢复）
 说明： 
恢复过程中可以在网管操作记录页面中，查看恢复进度，进度100%表示恢复完成。 
AMF网元的租户配置检查和修改
在AMF网元中依次执行[SHOW AMFLOCALOFFICECFG]和[SHOW CDBTENANT]命令，如[图1]所示。
检查AMF网元的租户配置内容如下，如果不一致需要修正。 
AMF网元名称和租户名称配置一致。 
主用NF(局)标识、备用NF(局)标识和实际规划一致。 
参数左域SC TYPE为9，右域SC TYPE为10。图1  检查网元租户等配置 
NF配置数据检查和修改
执行[SHOW NF]命令，检查NF配置数据对比返回结果中的NFID后12位字符和NF类型，与操作前记录的信息是否一致。
若不一致则修改为一致，修改命令参考[SET NF]:NFTYPE="XXX",ALIASNFTYPE="XXX",NFIDNODE="98f6c08bc906"。
数据同步操作
执行[SYNA]:STYPE="ALL"命令，同步CUDR和MME/SGSN服务的离线配置数据。
执行[SYN ONLINE]:STYPE="ALL"命令，进行在线一致性同步。
重启整局操作
 小心！ 
重启前不能执行Rosng配置命令并且不能进行Rosng写入操作。
执行[RESET SYSTEM]命令，重启整局。
进入Rosng配置管理，执行[show running-config]命令检查恢复的Rosng配置是否正确。
确认每个接口的MAC地址与新实例化后的MAC地址是否一致如果不一致，则需要修改为新实例化后的MAC地址。 
##### 数据检查与测试基本业务 
执行[SHOW VM]命令，检查VM虚机状态是否正常。
执行[SHOW VRU]命令，检查VRU状态是否正常。
检查和确认各链路和路由状态正常。 
执行[SHOW CDBNODE]命令，检查返回的节点个数与CDU虚机个数乘以3后的结果一致，并且所有节点状态为NORMAL，如[图1]所示。
图1  检查节点数与节点状态
按照验证条目进行业务验证。 
##### 数据恢复异常处理 
若恢复出现异常并且在联系中兴通讯技术支持
定位分析后还是无法恢复，请参考如下方法恢复数据。
重新恢复已经备份的空局数据。 
使用在[操作前准备与条件]章节中配置反导出的命令进行恢复。并执行[SYNA]:STYPE="ALL"同步离线数据命令。
如果有需要重启生效的命令，则执行[RESET SYSTEM]重启整局。
#### 从他局恢复数据 
从他局恢复数据是指将备份的数据文件恢复到网管后台数据库中，然后同步到前台，重启整局生效的过程。 
当前网元的版本号必须和备份数据的网元版本号完全一致。 
导入他局备份数据后需要执行数据同步操作，再重启全局生效。 
检查恢复的Rosng配置并确认接口MAC地址是否正确。 
需要从他局备份配置数据恢复到本局时，联系中兴通讯技术支持确认情况后再进行操作。 
##### 操作前准备与条件 
准备相同版本待恢复他局配置备份数据文件，并采集他局的License。 
执行[BACKUP]命令，备份当前网元数据。
执行[SHOW NF]命令，记录查询结果中当前NF类型以及对应的NFID的后12位信息，如[图1]所示。
图1  网元信息查询
执行[SHOW NFSN]命令，查询当前网元的NFS序列号并记录。
将查询出的序列号以及对应版本的License模板，按照重新实例化前记录的License项比对填写新的License申请文件。 
获取Licesne文件后加载激活新的License文件。 
 说明： 
优先界面操作的方式激活License文件，操作方法可以联系中兴通讯技术支持获取。 
涉及备份恢复相关命令中的密码，不能直接拷贝执行，只能在界面手动输入。 
在Rosng配置模式下执行命令[show running-config]，保存配置文件中每个接口的MAC配置信息。
##### 恢复配置数据并重启全局 
摘要 : 
本节介绍从他局恢复配置数据并重启全局的步骤。 
 小心！ 
在恢复过程中，请不要随意添加、修改、删除任何配置数据，避免数据在更改过程中出现错误，导致无法恢复原始数据。 
步骤 : 
待恢复数据上传
登录EMS网管客户端，选择配置→命令处理→NF节点
。
执行[RESTORE]:ID=1,NAME="default",FILENAME="sftp://172.5.20.7/tmp/BLANK/SC-CD-XX-XXX-2-5GC_BLANK.zip",USERNAME="root",PASSWORD="****************",ISREINST="RESTORE_OTHER"命令，命令中的关键参数参见[表1]。
参数名称|参数说明
---|---
FILENAME（恢复文件路径）|该参数我为存放备份文件的SFTP路径。
BAKFILEPWD（恢复文件密码）|该参数为当前网元License的受控项NF_0001当GDPR开关为打开状态，说明需要填写备份时设置的密码，否则不需要配置。
USERNAME（SFTP用户名）|该参数为SFTP用户名。
PASSWORD（SFTP密码）|该参数为SFTP密码。
ISREINST（恢复场景）|该参数设置为RESTORE_OTHER（从其他局备份恢复）。
 说明： 
在网管操作记录页面中，查看恢复进度，进度至100%并且执行结果为成功表示恢复完成。
AMF网元的租户配置检查和修改
在AMF网元中依次执行[SHOW AMFLOCALOFFICECFG]和[SHOW CDBTENANT]命令，如[图1]所示。
检查AMF网元的租户配置详细内容如下，如果不一致则需要修正。 
AMF网元名称和租户名称配置一致。 
主用NF(局)标识、备用NF(局)标识和实际规划一致。 
参数左域SC TYPE为9，右域SC TYPE为10。图1  检查网元租户等配置 
NF配置数据检查和修改
执行[SHOW NF]命令，检查NF配置数据对比返回结果中的NFID后12位字符和NF类型，与操作前记录的信息是否一致。
若不一致则修改为一致，修改命令参考[SET NF]:NFTYPE="XXX",ALIASNFTYPE="XXX",NFIDNODE="98f6c08bc906"。
数据同步操作
执行[SYNA]:STYPE="ALL"命令，同步CUDR和MME/SGSN服务的离线配置数据。
执行[SYN ONLINE]:STYPE="ALL"命令，进行在线一致性同步。
重启整局操作
 小心！ 
重启前不能执行Rosng配置命令并且不能进行Rosng写入操作。
执行[RESET SYSTEM]命令，重启整局。
进入Rosng配置管理，执行[show running-config]命令，检查恢复的Rosng配置是否正确。
确认每个接口的MAC地址与新实例化后的MAC地址是否一致如果不一致，则需要修改本局当前的实际MAC地址。 
##### 数据检查与测试基本业务 
执行[SHOW VM]命令，检查VM虚机状态是否正常。
执行[SHOW VRU]命令，检查VRU状态是否正常。
检查和确认各链路和路由状态正常。 
执行[SHOW CDBNODE]命令，检查返回的节点个数与CDU虚机个数乘以3后的结果一致，并且所有节点状态为NORMAL，如[图1]所示。
图1  检查节点数与节点状态
按照验证条目进行业务验证。 
##### 数据恢复异常处理 
若恢复出现异常，联系中兴通讯技术支持
。
#### 恢复完整VNF数据场景 
恢复完整VNF数据是指将备份的数据文件恢复到网管后台数据库中，然后同步到前台，重启整局生效的过程。 
恢复完整VNF数据场景适用于V7.21.30及以后版本。 
当系统运行异常，联系中兴通讯技术支持排查问题后再进行操作。 
当OAM或TMSP运行中的ZDB文件有损坏无法手工恢复并且当前存在备份完好的ZDB文件，则需要恢复完整VNF数据。 
##### 操作前准备与条件 
联系中兴通讯技术支持
确认是否满足采用完整VNF数据恢复的方式。
执行[SET QUORUM]:QUORUM_SWITCH="DISABLE"命令，关闭仲裁开关。
执行[SHUTDOWN VM]:VMNAME="OMU0002",OPMODE="FORCELY"命令，关闭备用OMU虚机。
 说明： 
涉及备份恢复相关命令中的密码，不能直接拷贝执行，只能在界面手动输入。 
##### 恢复配置数据并重启全局 
摘要 : 
本节介绍完整的VNF数据场景恢复配置数据和重启全局的操作。 
 小心！ 
在恢复过程中，请不要随意添加、修改、删除任何配置数据，避免数据在更改过程中出现错误，导致无法恢复原始数据。 
步骤 : 
准备好待恢复的备份文件，联系中兴通讯技术支持
确认该备份文件正常后再进行操作。
将待恢复的数据文件上传至与OMU互通的SFTP服务器中。 
登录EMS网管客户端，选择配置→命令处理→NF节点
。
执行[RESTORE]:ID=1,NAME="default",FILENAME="sftp://172.5.20.7/tmp/backup/cm_backup_1123.zip",USERNAME="root",PASSWORD="****************",RESVNFDATA="YES"命令，命令中的关键参数参见[表1]。
参数名称|参数说明
---|---
FILENAME（恢复文件路径）|该参数为存放备份文件的SFTP路径。
BAKFILEPWD（恢复文件密码）|该参数为当前网元License的受控项NF_0001，当GDPR开关为打开状态，说明需要填写备份时设置的密码，否则不需要配置。
USERNAME（SFTP用户名）|该参数为SFTP用户名。
PASSWORD（SFTP密码）|该参数为SFTP密码。
RESVNFDATA（恢复整VNF数据）|该参数填写为是。
 说明： 
在网管操作记录页面中，查看恢复进度，进度到100%并且执行结果为成功表示恢复完成。
执行[LAUNCH VM]:VMNAME="OMU0002"命令，启动备用OMU。
执行[SHOW VM]命令，确认备用OMU状态为Active。
执行[SHOW PG STAUTS]命令，确认PG数据库已恢复启动，如[图1]所示。
图1  PG数据库恢复
执行[SET QUORUM]:QUORUM_SWITCH="ENABLE"命令，打开仲裁开关。
执行[SYNA]:STYPE="ALL"命令，同步CUDR和MME/SGSN服务的离线配置数据。
执行[SYN ONLINE]:STYPE="ALL"命令，进行在线一致性同步。
检查恢复的Rosng配置是否正确，重点关注MAC地址是否正确。
（可选）如果不正确则需要修改为本局实际MAC地址，在备份的数据中含有原局的MAC地址。 
重启整局执行命令[RESET SYSTEM]。
##### 数据检查与测试基本业务 
执行[SHOW VM]命令，检查VM虚机状态是否正常，除了未启动的备用OMU。
执行[SHOW VRU]命令，检查VRU状态是否正常，除了未启动的备用OMU。
检查和确认各链路和路由状态正常。 
执行[SHOW CDBNODE]命令，检查返回的节点个数与CDU虚机个数乘以3后的结果一致，并且所有节点状态为NORMAL，如[图1]所示。
图1  检查节点数与节点状态
按照验证条目进行业务验证。 
##### 数据恢复异常处理 
如果恢复出现异常，联系中兴通讯技术支持
。
#### 自动备份NF数据使用说明 
自动备份的NF数据作为应急恢复时使用的。
如果系统突发异常，并且在异常前没并未进行手工备份NF数据。在联系中兴通讯技术支持
确认恢复方案可行后，能够使用自动备份的NF数据进行数据恢复。
##### 区分对象集合备份的数据恢复 
摘要 : 
本节介绍每类系统对象集合备份数据适用的恢复场景。 
步骤 : 
恢复的原则在于，恢复的数据要以备份中包含的对象集合为准。若自动备份任务是以区分对象集合进行备份的，则需要根据不同的恢复方案对备份数据进行恢复操作。具体请参考[表1]介绍了每类系统对象集合备份数据适用的恢复场景。
系统对象集合编号|系统对象集合名称|适用的恢复场景
---|---|---
1|基本配置数据|原局恢复NF数据场景本局重新实例化后恢复从他局恢复数据恢复完整VNF数据
2|IP协议栈配置数据|原局恢复NF数据场景本局重新实例化后恢复从他局恢复数据恢复完整VNF数据
3|安全数据|原局恢复NF数据场景本局重新实例化后恢复从他局恢复数据恢复完整VNF数据
4|日志数据|原局恢复NF数据场景本局重新实例化后恢复从他局恢复数据恢复完整VNF数据
5|OAM数据库文件|恢复完整VNF数据
6|NFS私有数据|恢复完整VNF数据
7|性能数据|原局恢复NF数据场景本局重新实例化后恢复从他局恢复数据恢复完整VNF数据
8|告警数据|原局恢复NF数据场景本局重新实例化后恢复从他局恢复数据恢复完整VNF数据
原局恢复NF数据场景
采用区分对象集合的备份数据进行恢复时，需要分别恢复基本配置数据，IP协议栈配置数据、安全数据、日志数据、性能数据等备份数据。 
具体恢复方法请参照[原局恢复NF数据]中的恢复配置数据和数据同步。
本局重新实例化后恢复NF数据
采用区分对象集合的备份数据进行恢复时，需要分别恢复基本配置数据，IP协议栈配置数据、安全数据、日志数据、性能数据等备份数据。 
具体恢复方法请参照[本局重新实例化后恢复NF数据]中的恢复配置数据并重启全局。
从他局恢复数据
采用区分对象集合的备份数据进行恢复时，需要分别恢复基本配置数据，IP协议栈配置数据、安全数据、日志数据、性能数据等备份数据。 
具体恢复方法请参照[本局重新实例化后恢复NF数据]中的恢复配置数据并重启全局。
恢复完整VNF数据（适用于V7.21.30和V7.21.31版本）
采用区分对象集合的备份数据进行恢复时，需要分别恢复基本配置数据，IP协议栈配置数据、OAM数据库文件、NFS私有数据、安全数据、日志数据、性能数据等备份数据。
具体恢复方法请参照[从他局恢复数据]中的恢复配置数据并重启全局。
##### 自动备份所有对象集合的配置数据 
 如果创建的自动备份任务包含所有对象集合，并且确定的恢复方案可以采用自动备份配置进行恢复时，可以参照不同场景进行恢复操作。 
## 缩略语 
## 缩略语 
### CUDR 
Cloud Unified Data Repository云化统一数据仓库
EMS : 
Element Management System网元管理系统
NFS : 
Network File System网络文件系统
OAM : 
Operation, Administration and Maintenance操作管理维护
OMU : 
Operation & Management Unit操作管理单元
### SSH 
Secure Shell安全外壳
VM : 
Virtual Machine虚拟机
### VRU 
Virtual Running Unit虚拟运行单元
## 例行维护 
### 例行维护概述 
### 例行维护概述 
为了充分发挥设备的性能和作用，减少各种意外事故的发生，需要对运行中的设备进行例行维护。例行维护是一种预防性的维护，通过对设备进行定期的检查与保养，能及时发现并消除设备所存在的缺陷或隐患，确保设备能够长期安全、稳定、可靠地运行。 
#### 例行维护的分类 
###### 日常维护 
日常维护是指每天进行的、维护过程相对简单、并可由一般维护人员实施的维护操作。 
日常维护的目的包括： 
及时发现ZXUN uMAC系统所发出的告警或已存在的缺陷，并采取适当的措施予以恢复和处理，维持设备的健康水平，降低故障率。 
及时发现业务运行过程中各连接状态的异常现象，并采取适当的措施以恢复和处理，确保业务运行正常。 
实时掌握ZXUN uMAC系统和网络的运行状况，了解ZXUN uMAC系统或网络的运行趋势，提高维护人员对突发事件的处理效率。 
###### 定期维护 
定期维护是指按一定周期（如：每周、每月）进行的、维护过程相对复杂、且多数情况下须由经过专门培训的维护人员实施的维护操作。 
定期维护的目的包括： 
通过定期维护，使ZXUN uMAC系统的健康水平长期处于良好状态，确保系统能够安全、稳定、可靠运行。 
通过定期检查、备份、测试等手段，及时发现设备在运行过程中所出现的功能失效、性能下降等缺陷，并采取适当的措施及时予以处理，以消除隐患、预防事故的发生。 
#### 例行维护注意事项 
建立完善的维护制度，对维护人员的日常工作进行规范。应有详细的值班日志，对系统的日常运行情况、版本情况、数据变更情况、升级情况、问题处理情况等做好详细的记录，便于出现问题后进行分析和处理。应有交接班记录，做到责任分明。 
维护人员在上岗前必须接受必要的维护培训，学习必要的维护知识和相关的网络知识，掌握基本操作技能和应急处理技能。维护操作时要按照相关手册的说明来进行，以确保人身安全与系统安全。维护人员应该有严谨的工作态度和较高的维护水平，并通过不断学习提高维护技能。 
所有的重大操作（如重启系统、加载软件等）均应作记录，并在操作前仔细确认操作的可行性，在做好相应的备份、应急和安全措施后，方可由有资质的操作人员执行。改动数据前要做数据备份，修改数据后应在一定的时间内（一般为一周）确认系统运行正常，才能删除备份数据。 
网管口令应该按级设置、严格管理、定期更改，并只向维护人员发放。 
严禁在计算机终端上玩游戏、上网等，禁止在计算机终端中安装、运行、拷贝其他任何与系统无关的软件。 
应具备常用的工具和仪表，如螺丝刀（一字、十字）、网线钳、电话线、网线等。 
维护过程中可能用到的软件和资料应该指定位置就近存放，在需要使用时能及时获得。 
维护人员应每天进行常规检查与测试，并做好记录。 
发现故障应及时处理，疑难问题应先详细记录各种原始信息，并及时联系中兴通讯技术支持。 
将中兴通讯当地办事处的联络方法放在醒目的地方并周知所有维护人员，以便在需要支持时能及时联络。注意时常更新最新的联络方法。 
#### 对维护人员的基本要求 
###### 理论知识 
熟悉移动通信原理通信专业知识。 
熟悉GTP、Diameter等相关协议。 
了解以太网、TCP/IP、C/S、数据库等计算机网络基础知识。 
熟悉ZXUN uMAC产品的功能结构、业务流程等产品知识。 
###### 系统组网和运行环境 
熟悉ZXUN uMAC产品的组网方式和IP规划。 
熟悉ZXUN uMAC产品的业务功能的实现原理。 
熟悉ZXUN uMAC产品与网络上其它设备之间的连接关系。 
熟悉ZXUN uMAC产品与各组网设备所使用的协议。 
###### 设备操作要求 
熟练掌握ZXUN uMAC产品的日常操作。 
熟悉哪些操作能导致部分或全部业务中断。 
熟悉哪些操作能造成设备损坏。 
熟悉哪些操作能导致用户投诉。 
熟悉有哪些应急或备份的措施。 
###### 仪器仪表使用要求 
ZXUN uMAC产品的维护人员应熟练使用万用表和信令分析仪来定位故障。
### 日例行维护 
#### 检查当前告警 
维护目的 : 
在日例行维护中，需要实时检查当前告警信息，并及时排查告警原因。 
通过EM客户端对ZXUN uMAC告警进行检查。需要特别关注告警级别为严重和主要的告警。
维护指导 : 
在EM客户端中，选择菜单告警→当前告警→告警监控
，打开告警监控页面，如[图1]所示。
图1  告警监控页面
在告警监控页面中，查看当前告警信息。
参考标准 : 
系统应无异常告警。 
异常处理 : 
发现系统有任何告警都应及时分析并尽快解决。 
在EM上发现系统有告警产生时，单击告警记录列表中的详情按钮，按照告警处理建议处理。如果仍无法消除告警，及时联系中兴通讯技术支持
。
#### 检查CPU/内存使用率 
维护目的 : 
查看ZXUN uMAC系统的CPU/内存使用率是否满足要求。
维护指导 : 
在EM客户端中，选择菜单维护→CN NF维护→资源观察
，打开资源观察页面，如[图1]所示。
图1  资源观察页面
选择AMF网元，选择观察的资源类型（例如虚机），勾选资源对象（虚机CPU/内存的占用率），选择时间粒度（5秒、10秒、15秒等），单击执行按钮，在页面中显示观察结果，示例如[图2]所示。
图2  资源观察示例
参考标准 : 
内存占用率不超过98%，各个CPU占用率不超过96%。 
异常处理 : 
如果用户容量已经超过设计要求，且使用率的数据长期处在高位，表明系统负荷较大，需要扩容。 
如果用户容量还没有达到设计要求，但是使用率的数值经常处在高位，及时联系中兴通讯技术支持。 
#### 检查日志信息 
维护目的 : 
日志按照内容分为： 
操作日志记录用户操作信息。 
安全日志记录用户登录、注销的日志信息。 
系统日志记录服务器定时任务的完成情况。 
检查操作日志、安全日志和系统日志，可掌握系统的运行情况。 
维护指导 : 
在EM客户端中，选择菜单系统→日志→日志查询
，打开日志查询页面，如[图1]所示。
图1  日志查询页面
在日志查询页面即可查看所有日志信息。
参考标准 : 
不会有不断出现的、大量的报错日志。 
没有非法或未经授权的操作，如随意修改FTP密码、随意缩小用户的权限等操作。 
没有修改数据的异常日志。 
异常处理 : 
如果有异常的日志，须查明是何人操作、为何操作，非法操作可能会导致不可预料的结果。 
根据日志的详细信息，处理故障。 
如果还未解决，及时联系中兴通讯技术支持
。
#### 检查关键性能指标 
维护目的 : 
在EM客户端上查看网元的关键性能指标（KPI），根据查询到的指标数据，分析系统运行状态。
维护指导 : 
在EM客户端中的性能页面，创建关键性能指标对应的实时监控任务，并以图形或表格的形式呈现查询结果，详细操作步骤可参见“创建实时监控任务
”。
参考标准 : 
AMF在稳定运行状态下的各KPI建议值参见下表。 
指标名称|类型|公式|阈值
---|---|---|---
初始注册成功率(%)|预定义指标|100*C510010002/C510010001|>=85
初始注册成功率（去除用户原因）(%)|预定义指标|100*C510010002/(C510010001-C510010003-C510010004-C510010005-C510010007-C510010012-C510010043-C510010041)|>=99
PDU建立成功率(%)|预定义指标|100*C510070002/C510070001|>=99
寻呼成功率(%)|预定义指标|100*C513010002/C513010001|>=96
5G内切换成功率|预定义指标|100*(C510050002+C510050004+C510050006+C510050008)/(C510050001+C510050003+C510050005+C510050007)|>=99
5G切换到4G成功率(%)|预定义指标|100*C510050012/C510050011|>=98
业务请求成功率(%)|预定义指标|100*(C510040002+C510040004+C510040006+C510040008+C510040052)/(C510040001+C510040003+C510040005+C510040007+C510040051)|>=99
移动性注册成功率(%)|预定义指标|100*C510020002/C510020001|>=90
AMF HTTP的成功率|自定义指标（55601 HTTP客户端流程消息测量）|100*(C556010006+C556020004)/(C556010001+C556020001)|>=95
GSU CPU平均利用率|计数器|C557000010 CPU使用率平均值（%）|<=35
CDU CPU平均利用率|计数器|C557000010 CPU使用率平均值（%）|<=35
IPU CPU平均利用率|计数器|C557000010 CPU使用率平均值（%）|<=35
OMU CPU平均利用率|计数器|C557000010 CPU使用率平均值（%）|<=50
异常处理 : 
当性能指标数据异常时，需要采集异常时间段内的性能指标数据、相关计数器数据、EMS+数据、一键采集（仅需Debuginfo）信息等，如[图1]所示，联系中兴通讯技术支持
。
 说明： 
性能指标异常的故障处理案例可参见故障处理
。
图1  信息采集流程
流程说明如下： 
在EM客户端上获取该指标的详细计算公式，详细操作步骤可参见“查询性能指标
。
根据计算公式中涉及的性能计数器ID，查询到归属的测量族（即性能测量类型），详细操作步骤可参见“查询计数器
。创建性能测量类型对应的实时监控任务，并以表格的形式呈现查询结果，分析相关计数器的值，判断导致指标值下降的原因，详细操作步骤可参见“创建实时监控任务
。
（可选）局点已部署EMS+的场景下，在EMS+客户端上查看指标异常时间段内的统计数据。 
筛选目标网元和相关Event ID，查看内部原因值（InnerCause）。 
查看高频用户号码 
查看高频基站 
 说明： 
Event ID及的内部原因值的详细说明请联系中兴通讯技术支持
。
（可选）在EM客户端上查看指标异常时间段内的失败观察数据，详细操作步骤可参见“AMF业务失败观察
”。
（可选）根据步骤3获取到的高频用户号码，在EM上进行单用户的端到端信令跟踪或AMF信令跟踪， 分析用户信令是否异常，详细操作步骤可参见“用户跟踪
”或“AMF用户信令跟踪
"。
（可选）在EM客户端上一键采集网元调试信息并反馈给中兴通讯技术支持，详细操作步骤可参见“命令行方式一键采集故障信息
或“图形界面方式一键采集故障信息
”。
### 周例行维护 
#### 检查历史告警 
维护目的 : 
通过EM客户端查看历史告警，及时排查未解决的历史告警。 
维护指导 : 
在EM客户端中，选择菜单告警→历史告警→告警查询
，打开告警查询页面，如[图1]所示。
图1  历史告警查询
告警查询页面可查询历史告警信息。
参考标准 : 
显示的历史告警都已处理。 
异常处理 : 
发现有未处理的历史告警，应及时分析并尽快解决。 
在EM上发现有未处理的历史告警时，单击告警记录列表中的详情按钮，按照告警处理建议处理。如果仍无法消除告警，及时联系中兴通讯技术支持
。
#### 检查硬盘空间 
维护目的 : 
当硬盘剩余空间不足时，设备的运行速度会变慢，严重时会引起设备故障。因此需要定期查看硬盘剩余空间，在硬盘剩余空间不足时及时进行处理，避免引起设备故障。 
需要对硬盘空间进行检查。 
维护指导 : 
在EM客户端中，选择菜单维护→CN NF维护→资源观察
，打开资源观察页面，如[图1]所示。
图1  资源观察页面
选择AMF网元，选择观察的资源类型（例如虚机），勾选资源对象（ GSU/IPU/OMU等磁盘占用率），选择时间粒度（5秒、10秒、15秒等），单击执行按钮，在页面中显示观察结果，示例如[图2]所示。
图2  资源观察示例
参考标准 : 
硬盘的使用率＜90%。 
异常处理 : 
清理硬盘上的垃圾文件。 
清除旧的备份文件，仅保留最近一天的备份文件。 
 说明： 
清除备份文件前需确保这些备份文件已备份到其他硬盘上。 
如果硬盘使用率仍然较高，及时联系中兴通讯技术支持
。
#### 检查系统自动备份 
维护目的 : 
检查EM的自动备份是否正常。 
维护指导 : 
在EM客户端，选择菜单系统→备份恢复→备份恢复日志
，如[图1]所示。
图1  备份恢复日志
针对结果为失败的任务，单击详情按钮，查看任务执行的具体信息，如[图2]所示。
图2  任务详情
参考标准 : 
日志中没有异常信息。 
异常处理 : 
检查磁盘空间是否充足。 
检查网络连接是否正常。 
如果还未解决，及时联系中兴通讯技术支持
。
#### 执行网元巡检任务 
维护目的 : 
维护巡检是保证系统平稳运行的重要步骤，日常的维护巡检可以及时发现存在的隐患，便于及时消除潜在和已经发现的故障。 
维护指导 : 
在EM客户端中，选择菜单维护→CN 巡检值守→网元巡检
，默认进入巡检任务页面，如[图1]所示。
图1  巡检任务
（可选）创建新的巡检任务。 
切换到模型管理页面，选择网元类型为“Common AMF/MME/GnGp SGSN(cn.umac.amfmmegngpsgsn)”，并单击导入按钮，从本地导入巡检模型文件。
切换到巡检任务页面，单击新建按钮，创建巡检任务。
设置巡检任务名称、执行计划、定时器。 
根据巡检模板提供的巡检项目，选择本次巡检需检查的范围。 
单击完成按钮，巡检任务创建成功。
在巡检任务页面中选择需要执行的任务，单击更多→立即执行
按钮，开始执行网元巡检。
单击操作列日志按钮，查看巡检任务的日志详情。
参考标准 : 
巡检结果显示为正常状态。 
异常处理 : 
如果发现巡检项目有异常，及时联系中兴通讯技术支持
。
#### 检查防病毒软件 
维护目的 : 
EM客户端一般采用Windows操作系统，要求必须安装防病毒软件，定期更新病毒库，并定期进行人工扫描病毒，以防止因病毒侵入而导致系统故障。 
维护指导 : 
检查防病毒软件的实时监控，查看病毒库日期是否是最新日期。 
是→步骤3 
否→步骤2 
更新病毒库，确保病毒库是最新日期。 
在防病毒软件中对全盘进行扫描杀毒。 
参考标准 : 
防病毒软件启动了自动更新。 
防病毒软件在全盘扫描后，没有发现病毒。 
异常处理 : 
如果不能在线升级，需要手动下载最新的病毒库文件进行升级。 
如果发现病毒，使用防病毒软件进行杀毒处理。 
如果有系统文件被病毒感染而又不能修复，需要从其它客户端中拷贝一个相同的文件进行替换。如果严重，则考虑重装系统。 
### 月例行维护 
#### 手工备份配置数据 
维护目的 : 
定期备份网元的业务配置数据，以便在出现异常或者故障时能够及时恢复数据。 
维护指导 : 
在EM客户端中，单击菜单配置，展开网元树，选择网元。
在命令输入框内输入[BACKUP]，显示命令参数页面。设置备份相关的参数。
命令示例： 
[BACKUP]:ID=1,NAME="default",FILEPATH="sftp://10.43.197.61:22/root/uMAC41",USERNAME="root",PASSWORD="**********",FILENAME="uMAC_bakup_all"
 说明： 
备份配置数据的操作步骤及参数说明参见备份与恢复
。
单击执行按钮，在操作记录页面中可以看见进度。待备份操作完成后，执行结果显示“成功”。
登录到备份的FTP服务器上下载备份文件，将备份数据在本地做备份。 
参考标准 : 
根据定时备份间隔（例如一个月，时间可以修改）进行数据配置。 
异常处理 : 
检查备份目的服务器的硬盘空间是否充足（剩余空间>总硬盘的10%）。删除备份目的服务器的垃圾文件，确保硬盘空间充足。 
检查网络连接情况，确保网络连接正常。 
如果无法解决，及时联系中兴通讯技术支持
。
### 年例行维护 
#### 检查机房灰尘 
维护目的 : 
灰尘对服务器硬件危害较大，过多的灰尘会导致电子元器件发生短路等故障。日常维护中，需要经常检查并清理机房灰尘，以确保设备运行正常。 
维护指导 : 
用手触摸服务器硬件的表面，查看灰尘情况。 
检查服务器硬件各插槽之间缝隙的灰尘情况。 
参考标准 : 
正常情况下，机房应保持清洁，基本没有灰尘。 
异常处理 : 
如果灰尘较多，需要对服务器及周围的环境进行清洁。可用吸尘器清除，也可用干净的软毛刷轻刷粘有灰尘之处。 
## 缩略语 
## 缩略语 
### C/S 
Client/Server客户端/服务器模式
### CPU 
Central Processing Unit中央处理器
FTP : 
File Transfer Protocol文件传输协议
GTP : 
GPRS Tunneling ProtocolGPRS隧道协议
IP : 
Internet Protocol因特网协议
### KPI 
Key Performance Index关键性能指标
TCP : 
Transmission Control Protocol传输控制协议
