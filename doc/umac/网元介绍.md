# 网元介绍 
## 产品描述 
### 产品定位与特点 
#### 产品定位 
##### 在网络中的角色 
ZTE 5G核心网基于3GPP标准，面向增强的移动互联网（eMBB）、物联网设备互联（mMTC）、工业互联网等垂直行业（uRLLC）应用场景，开发下一代全融合核心网产品，提供网络切片、移动边缘计算、按需重构的移动性、能力开放等代表性的服务能力。ZTE 5G核心网充分利用NFV、SDN、云计算、大数据等先进技术，是架构领先、性能领先、成本领先的产品。
ZXUN uMAC作为中兴通讯下一代核心网解决方案的一个非常重要的组成部分，集成了SGSN、MME和AMF的功能，可同时应用于2/3/4/5G网络的访问和移动管理。
##### 在网络中的位置 
在2/3/4G网络中的位置
在2/3/4G网络中，ZXUN uMAC作为SGSN和MME在网络中的位置如[图1](#zd4a37b24d1da4d809bad5027df314990__fa307526-5c2c-4884-aaa1-fbd5f4909321)所示。
图1  在2/3/4G网络中的位置
[]images/uMAC234G%E7%BB%84%E7%BD%91%E6%9E%B6%E6%9E%84%E5%9B%BE.png)
2/3/4G组网涉及的核心网网元参见[表1](#zd4a37b24d1da4d809bad5027df314990__T_2013351358364__EPS%E7%BD%91%E7%BB%9C%E6%B6%89%E5%8F%8A%E7%9A%84%E7%BD%91%E5%85%83%E4%BB%8B%E7%BB%8D-5C9D8415)。
名称|功能简介
---|---
SGSN|SGSN作为临时存储用户数据的服务器，负责管理和存储UE相关信息，如UE用户标识、移动性管理状态、用户安全参数等，为用户分配临时标识，完成用户安全功能，完成用户移动性管理功能和会话管理功能，处理SGSN和UE之间的所有非接入层消息。
HSS|HLR的演进，存储用户签约信息和鉴权数据。
MME|MME是EPS网络控制面功能实体，临时存储用户数据的服务器，负责管理和存储UE相关信息，比如用户标识、移动性管理状态、用户安全参数等，当UE驻扎在该跟踪区域或者该网络时负责对该用户进行鉴权，处理MME和UE之间的所有非接入层消息，并为用户分配临时标识。
SGW-C|SGW-C负责管理和存储UE的SAE承载上下文等。
SGW-U|SGW-U负责用户面数据路由处理，终结处于空闲状态的UE下行数据等功能。
PGW-C|PGW-C负责与SGW-C交互，共同完成UE的会话管理等功能。
PGW-U|PGW-U负责与SGW-U交互，共同完成用户面数据传输等功能。
在5G网络中的位置
在5G网络中，ZXUN uMAC作为AMF时的网络位置如[图2](#zd4a37b24d1da4d809bad5027df314990__731ac21b-e8f3-4272-92ec-4966a4c89b38)所示。
图2  在5G网络中的位置
[]images/uMAC-5G%E6%9E%B6%E6%9E%84%E5%9B%BE.png)
5G组网涉及的核心网网元参见[表2](#zd4a37b24d1da4d809bad5027df314990__51f26c65-50c0-41bb-8133-4b71090c51ee)。
名称|功能简介
---|---
AMF|接入及移动性管理功能，完成用户的移动性管理，维护用户注册及连接状态，NAS SM信令路由，安全处理等。
SMF|会话管理功能，终结NAS SM信令，完成会话管理，UE IP地址分配及管理，UPF选择，会话策略控制等。
UDM|统一数据管理，管理和存储用户签约及鉴权数据。
PCF|策略控制功能，支持统一策略控制框架，提供策略规则给其他NF，进行接入和移动性策略控制，会话策略控制，授权AF资源请求等。
AUSF|鉴权服务器功能，为其他NF提供用户鉴权功能。
NSSF|网络切片选择功能，用于为用户选择为其提供网络服务的网络切片实例，如eMBB切片。
UPF|用户面功能，完成PDU会话用户面数据转发，QoS及策略执行，用量上报，计费信息上报等功能。
AF|相关的应用服务器。
在融合网络中的位置
图3  ZXUN uMAC在融合网络中的位置
[]images/%E8%9E%8D%E5%90%88.PNG)
#### 产品特点 
##### SBA架构 
ZXUN uMAC符合3GPP R15引入的基于服务的架构，该架构将NF定义为多个微服务组件，以开放、敏捷、灵活和易于扩展的方式提供融合访问和移动性管理服务。
##### 合一部署 
ZXUN uMAC提供了在一个节点上实现3GPP定义的AMF、MME和SGSN功能，实现了2/3/4/5G网络的合一部署。网元和网络功能可以共享相同的平台和相同的管理系统。
##### 无状态架构 
ZXUN uMAC采用无状态架构，将数据层和服务逻辑层分开。系统的无状态架构使其易于缩/扩容、升级和故障恢复。
##### 便捷的操作和系统维护 
ZXUN uMAC提供动态管理、预防性维护、配置管理和MML导航、跟踪工具（包括信令跟踪和故障观测）、故障管理和性能管理功能。
##### 虚拟化 
ZXUN uMAC遵循ETSI标准定义的NFV虚拟化架构，NFV支持软件层、虚拟层和硬件层三层解耦，ZXUN uMAC运行在COTS（Commercial-off-the-shelf）通用服务器上，可为运营商提供灵活、经济的弹性网络方案。
##### 弹性伸缩 
ZXUN uMAC支持根据系统负荷状况进行动态扩展，具体负荷信息包括：并发用户数、CPU容量等。
##### 电信级高可靠性 
ZXUN uMAC采用集中管理，分散处理的系统架构，有利于大容量移动网的控制和管理，同时又具有强大的处理能力和可扩展性，确保系统中没有单点故障，支持组件冗余和容灾恢复。
### 系统结构 
ZXUN uMAC的系统结构基于标准ETSI NFV架构设计，主要功能组件支持作为VNF部署在虚拟基础设施之上，并由MANO进行统一管理。ZXUN uMAC的系统结构如[图1](#z02037d3c47a242888a4254d5756e0e55__f2ca277a-bac4-4c68-8909-9f0585bb9fee)所示。
图1  系统结构图
[]images/uMAC%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84.PNG)
ZXUN uMAC的系统结构说明参见[表1](#z02037d3c47a242888a4254d5756e0e55__4a568444-6f55-450a-bb7d-b9c6f028ebc1)。
节点|描述
---|---
OSS/BSS|综合的业务运营和管理平台，由网络管理、系统管理、计费、营业、账务和客户服务等部分组成。
EM|提供对ZXUN uMAC的日常管理和维护。
uMAC|ZXUN uMAC提供SGSN、MME和AMF功能。
NFVI|网络功能虚拟化基础设施，通常指的是物理资源。NFVI由云平台提供并负责管理。
Hypervisor|虚拟机监视器，提供软件管理虚拟机对底层硬件的访问。
CloudStudio|负责对虚拟化设备的集中管理。CloudStudio由NFVO和VNFM两个系统组成。
NFVO|负责对全网的网络服务、虚拟资源以及物理资源进行编排和管理。
VNFM|负责对ZXUN uMAC的生命周期进行管理
VIM/CMS|NFVI的管理模块。在NFV架构中，VIM/CMS 在ETSI中称为VIM，在CCSA中称为CMS。VIM/CMS是虚拟化基础设施管理系统，负责基础设施层硬件资源、虚拟化资源的管理，监控和故障上报，面向上层应用提供虚拟化资源池。VIM/CMS为NFVO和VNFM提供VNF相关虚拟资源的操作接口。VIM/CMS作为云平台管理虚拟资源，常见的VIM包括：TECS、VmWare、Openstack。
ZXUN uMAC组件部署架构如[图2](#z02037d3c47a242888a4254d5756e0e55__6069aad1-0d38-4823-98fc-2739ab410f70)所示。
其中，灰色线条表示内部管理平面，用于传递管理消息。橙色线条表示内部业务平面，用于传递业务消息。 
OMU通过管理类通信平面与EM和VNFM交互。 
IPU通过业务类通信平面与其他NF节点交互。 
图2  组件部署架构
[]images/umac13%E8%99%9A%E6%9C%BA.PNG)
ZXUN uMAC虚拟机配置说明见[表2](#z02037d3c47a242888a4254d5756e0e55__cbe2c475-a88e-4c94-8f4b-0d05842f6730)。
虚拟机名称|服务|功能及工作模式
---|---|---
OMU|O&M|操作与维护单元，包含一个用于辅助裁决OMU主备状态的AMU单元。采用1+1+1主备模式。其中，1+1作为主备，另外一个VM作为AMU用于这两个OMU主备仲裁。
IPU|Interface|接口处理单元，处理IP接口业务，采用N+M负荷分担模式。
CDU|Cloud DB|云数据库单元（可选），存储用户会话上下文等信息。当数据库功能集成在这个VNF中时，CDU是必需的。当使用外部数据库功能（例如UDSF）时，CDU不是必需的。采用N*（1+1）互备模式，即N组CDU虚拟机，每组中两个CDU虚拟机为1+1互备模式。
GSU|MME&SGSN_C|MME和SGSN的控制面处理。采用N+M负荷分担模式。
SGSN_U|GSU|SGSN用户面处理。采用N+M负荷分担模式。
AMF_Communication|GSU|3GPP协议中定义的AMF通信服务。采用N+M负荷分担模式。
AMF_MT|GSU|3GPP协议中定义的AMF的MT服务。采用N+M负荷分担模式。
AMF_EventExposure|GSU|3GPP协议中定义的AMF事件暴露服务。采用N+M负荷分担模式。
ResourceManage|GSU|资源管理。采用N+M负荷分担模式。
SIG LB|GSU|SCTP和SS7信令处理。采用N+M负荷分担模式。
HTTP LB|GSU|HTTP信令处理。采用N+M负荷分担模式。
CDU GW|GSU|CDU网关，用于AMF的CDU之间的数据转发。可选，当CDU部署在VNF（AMF）中并使用异地容灾时，需要GSU（CDU GW），否则不需要。采用N+M负荷分担模式。
虚拟机工作模式说明见[表3](#z02037d3c47a242888a4254d5756e0e55__%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97CPU%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F-79014DE0)。
工作模式|描述
---|---
1+1主备|1+1 Active/Standby，同一种业务模块可包含一个或多个Group，每个Group内包含两个VM：一个VM为主用；一个VM为备用。
1+1互备|1+1 Active/Active，同一种业务模块可包含一个或多个Group，每个Group内的包含两个VM，均处于正常工作状态，当其中一个VM故障时，另一个VM可以接管全部工作。
N+M主备|N+M Active/Standby，同一种业务模块的所有VM组成一个Group，Group内有M个VM处于空闲状态（无数据同步），其余N个VM处于正常工作状态。当N个VM中的VM故障时，备份的M个VM就接管故障VM的工作。
N+M负荷分担|N+M Active/Active，同一种业务模块的所有VM组成一个Group，Group内N+M个VM处于正常工作状态。当最多M个VM故障时，其余VM可以接管全部工作。
### 功能描述 
#### 通用功能 
IP功能
ZXUN uMAC支持静态路由和动态路由协议，包括ECMP、OSPF、BGP、GRE、VLAN、VLAN Trunk等。支持IPv4、IPv6以及IPv4/IPv6双栈，适用于UE以及标准协议定义的接口，如Gb、Iu、Gr/Gf、Gn、Gd/SGd、Ga、S1-MME、S6a/S13、S11/S10、SGS、Sv、N2、N26、AMF SBI、DNS等。
##### 过负荷和拥塞控制功能 
ZXUN uMAC支持过负荷控制功能。 当系统流量超出设计容量时，保障系统稳定运行。
NFV功能
ZXUN uMAC支持NFV功能。 采用虚拟化技术实现软硬件的解耦，与其他VNF共享NFVI资源。 支持自动部署、弹性伸缩、虚机自愈以及虚机反亲和部署功能。
#### 功能-MME 
##### 移动性管理功能 
ZXUN uMAC支持3GPP为E-UTRAN网络定义的移动性管理功能。 移动性管理功能用于跟踪移动的UE的位置。 支持附着、分离、用户数据管理、跟踪区更新、4G 业务请求、寻呼以及S1接口释放。
##### 会话管理功能 
ZXUN uMAC支持3GPP为E-UTRAN网络定义的会话管理功能。 对于MME，会话管理用于创建、修改和删除EPS承载。 支持专用承载激活、承载修改和承载删除。
##### 安全管理功能 
ZXUN uMAC支持安全管理功能，以确保用户和网络的安全。安全管理功能支持用户鉴权和密码管理、接入层安全、非接入层安全、用户ID安全、移动安全和MEID检查功能。
##### QoS管理功能 
ZXUN uMAC支持3GPP定义的QoS功能。支持QoS协商过程、查询HSS订阅的QoS信息、本地QoS策略等。
##### 切换功能 
ZXUN uMAC支持3GPP在23.401中定义的切换过程。
支持E-UTRAN系统内切换，包括X2切换和S1切换（MME内部的切换和MME之间的切换）。 
支持跨RAT的系统间切换，包括E-UTRAN到UTRAN的切换和UTRAN到E-UTRAN的切换。 
##### MME Pool功能 
ZXUN uMAC支持3GPP定义的MME Pool功能。 MME Pool的功能主要包括三部分：MME Pool内负荷分担功能，使用户可以较均衡的分布在各个MME上，保证了在MME Pool内各个MME上的负荷和其处理能力的一致性；MME负荷重平衡功能，通过将某个MME的全部或部分特定用户迁移到Pool内其他MME的方式，减少该MME下用户的数量，从而减少该MME升级或其它情况下对用户业务的影响；MME容灾功能，当Pool内某MME不可用后，Pool内其他MME支持故障MME中的用户发起的业务。
##### 短消息服务功能 
ZXUN uMAC支持SGs和SGd，包括MS发起的消息和MS终止的消息。
##### SAE-GW 选择功能 
ZXUN uMAC支持从DNS返回的SGW列表中选择SGW，从DNS返回的PGW列表中选择PGW。根据SGW或PGW的优先级、权重、拓扑关系和可用性来选择SGW或PGW。通过此功能，可实现SGW或PGW冗余。
##### 语音服务功能 
ZXUN uMAC支持3GPP定义的语音服务解决方案，包括CSFB和VoLTE。在VoLTE方案中, ZXUN uMAC支持SRVCC、eSRVCC和rSRVCC。
##### AMF选择功能 
ZXUN uMAC支持UE从E-UTRAN移动到NR时，根据目标位置选择AMF。支持根据目标TA构造FQDN，通过DNS查询或本地配置获取AMF列表，提供合适的选项。
##### 5GC互通功能 
ZXUN uMAC支持4G与5G的N26接口互通或无N26接口互通，具备4G/5G接入能力的用户可以通过LTE接入EPC，移动到5G。 
#### 功能-Gn/Gp SGSN 
##### 移动性管理功能 
ZXUN uMAC支持3GPP为GPRS / UMTS网络定义的移动性管理功能。 移动性管理功能用于跟踪移动的UE的位置，支持附着、分离、路由区域更新、3G业务请求、寻呼和订阅数据管理。
##### 会话管理功能 
ZXUN uMAC支持3GPP定义的GPRS/UMTS会话管理功能。会话管理功能包括PDP上下文激活、PDP上下文修改、PDP上下文去激活、PDP上下文保留和本地分流控制策略。
##### 安全管理功能 
ZXUN uMAC提供安全管理功能，以确保用户数据的安全。支持鉴权、用户身份保密、用户数据和信令保密、身份识别和数据完整性功能。
##### QoS管理功能 
ZXUN uMAC支持3GPP定义的QoS功能。支持QoS协商过程、查询HLR订阅的QoS信息和本地QoS策略等。
##### 切换功能 
ZXUN uMAC支持3GPP定义的切换过程。 支持UMTS系统内切换和跨RAT（LTE和3G）的系统间切换。
##### SGSN Pool功能 
ZXUN uMAC支持3GPP定义的Pool功能。SGSN Pool功能用于多个SGSN之间的负荷均衡和地理冗余。SGSN POOL主要功能包括：通过POOL覆盖范围内的RAN节点的NNSF选择功能，保证POOL内各个SGSN的负载均衡及SGSN容灾；通过POOL内灵活的SGSN负荷卸载功能，减少SGSN升级、维护对在线用户的影响。
##### 短消息服务功能 
ZXUN uMAC支持SMS，包括MS发起的消息和MS通过Gd接口终止的消息。
##### DT功能 
ZXUN uMAC支持3GPP定义的DT功能。在DT应用于UMTS网络之后，用户面数据直接在RNC和GGSN之间传输，SGSN只负责PDP上下文的建立和删除。
##### 计费功能 
ZXUN uMAC收集每个移动用户与核心网络资源使用相关的计费信息，按照3GPP协议规范采用ASN.1编码格式输出CDR话单。
##### GGSN选择 
ZXUN uMAC支持GGSN选择功能。对于APN，SGSN可提供多地址轮询功能。当DNS中的一个APN具有多个GGSN的IP地址时，ZXUN uMAC支持根据优先级、GGSN运行状态、负载状态等参数从GGSN列表中进行选择。
#### 功能-AMF 
##### 服务化架构 
ZXUN uMAC作为AMF时，采用SBA架构，与NRF交互，实现NF业务管理和NF业务发现功能等，与其他NF通过SBI接口交互，实现NF间的服务调用。采用SBA架构，可以实现核心网软件化、灵活化、开放化和智能化，同时更符合电信领域的业务部署要求，在提供功能独立性、重用性、弹性、健壮性、安全性的同时，也保证了业务处理性能。
##### 注册管理功能 
ZXUN uMAC支持3GPP TS23.501定义的注册管理功能。该功能控制移动用户对5GC网络的访问，并在用户移动时跟踪用户的位置。主要过程包括注册、去注册、注册区域管理等。
##### 移动管理功能 
ZXUN uMAC支持3GPP 23.501定义的移动性管理功能。支持关于移动性定时器管理、移动性限制、用户位置信息报告、系统内切换和系统间切换等功能。
##### 连接管理功能 
ZXUN uMAC支持3GPP TS23.501定义的连接管理功能。连接管理支持建立和释放N1接口UE与AMF之间的NAS信令连接以及N2接口AN与AMF之间的连接，还支持业务请求、智能寻呼、UE可达性管理、MICO等功能。
##### 安全管理功能 
ZXUN uMAC支持3GPP TS33.501定义的安全要求。在用户访问5GC网络期间，ZXUN uMAC作为AMF使用一系列安全措施进行用户鉴权、加密用户ID，并保护NAS信令消息的完整性。安全管理支持5G AKA鉴权、EAP-AKA'鉴权、秘钥派生与传递、NAS信令加密、NAS信令完整性保护、4/5G互操作安全上下文映射等功能。
##### 网络切片功能 
ZXUN uMAC作为AMF支持网络切片功能，支持用户注册过程中为UE确定Allowed NSSAI和Rejected NSSAI，选择支持Allowed NSSAI的AMF，并把Allowed NSSAI等信息通知UE和RAN。
##### 策略控制功能 
ZXUN uMAC作为AMF支持从UDM获取签约信息，结合从PCF获取的策略信息及本地策略，实现对用户的接入和移动性控制。
##### 消息透明路由功能 
ZXUN uMAC作为AMF支持通过Payload Container IE透明传输UE和其他NF（SMF、SMSF、LMF、PCF）间的消息。
##### 网元选择功能 
ZXUN uMAC支持3GPP定义的NF选择功能，包括AMF选择、PCF选择、SMF选择、AUSF选择、UDM选择、NSSF选择、NRF选择、SMSF选择、GMLC选择等。
##### 语音业务功能 
ZXUN uMAC支持3GPP定义的5G语音业务解决方案，包括EPS Fallback、VoNR、紧急业务Fallback、VoNR信令流程保障、紧急业务、T-ADS、EPS Fallback信令流程保障等。
##### 短消息业务功能 
ZXUN uMAC支持3GPP定义的5G短消息解决方案。
支持基于NAS的SMS业务，通过N20接口连接SMSF来传递短消息，包括MS发起的和MS终止的短消息。 
支持基于IP的SMS业务，IMS系统提供E2E SMS业务，5GC（包括AMF、SMF和UPF）提供IP承载。UE注册到IMS系统后，短消息由IP-SM-GW传递。 
##### 事件暴露功能 
ZXUN uMAC作为AMF支持向3GPP内的其他NF暴露移动性相关的事件。其他NF向AMF订阅移动性相关事件，AMF启动用户状态监测，监测到用户相应的订阅事件，发送相应的移动性事件报告给订阅的NF。
##### AMF Pool功能 
ZXUN uMAC支持AMF负载均衡功能。5G网络支持多个AMF组成POOL，用户在POOL内移动无需改变AMF，减少了局间流程，同时POOL内AMF可负荷分担及容灾。POOL内的AMF具有不同的GUAMI和相应的权重，在NG Setup流程中AMF将GUAMI和权重下发给gNobeB，gNobeB通过GUAMI及权重进行负荷分担选择AMF，从而实现AMF的负载均衡。
##### QoS管理功能 
ZXUN uMAC支持3GPP定义的QoS功能，支持QoS协商过程和本地QoS策略等。
##### 漫游功能 
ZXUN uMAC支持3GPP定义的5G漫游方案，支持Home Routed漫游、Local Breakout漫游和I-SMF选择。
##### 邻接NF容灾功能 
ZXUN uMAC支持邻接NF容灾功能。支持对相邻NF崩溃的检测、发现并使用可用替代NF继续服务、通知UE重新注册，从而提高网络的可用性。邻接NF可能包括SMF、UDM、PCF、NRF、NSSF、SMSF等。
##### NPN功能 
ZXUN uMAC支持PNI-NPN。PNI-NPN可以使运营商在自己的PLMN中提供NPN，为企业用户提供专网服务，增加网络收入。
### 操作与维护 
ZXUN uMAC常用的操作维护功能参见[表1](#z2b362e2fc94f4e84b80342dc41a2e1d0__8c1bb488-7bba-4afb-aff9-26f210d62e42)。
功能|描述
---|---
配置管理|配置管理系统为网络资源的配置和管理提供了用户友好的界面，提供集中配置和管理，以及数据传输，数据备份和恢复的工具。
系统数据备份和恢复|系统数据维护功能用于备份和恢复系统数据，支持备份和恢复单个模块的数据或整个系统的数据。
故障管理|故障管理系统用于显示警报和通知，并为用户提供故障详细信息。
性能管理|性能管理支持系统性能参数和流量数据的测量和统计功能。
软件管理|软件管理为运行在系统每个组件上的软件提供上传管理功能，并可查询相关信息，包括每个组件的版本号和软件类型。
安全管理|ZXUN uMAC系统提供独立的用户管理系统，管理用户权限。用户权限分为三个级别：超级用户权限组、操作员权限组和浏览用户权限组。通过创建用户并赋予不同的权限来进行管理。
日志管理|日志管理功能用于记录客户端的所有操作，包括记录操作员、操作时间和操作内容。
信令跟踪|用户信令跟踪功能跟踪指定接口或用户的信令，并解码输出，便于运维人员进行分析。
### 可靠性 
#### 软件可靠性 
ZXUN uMAC采用以下机制保障其软件的可靠性：
ZXUN uMAC部署在云平台的虚拟机上， 这些虚拟机的可靠性确保了系统运行环境的可靠性。 
ZXUN uMAC支持备机以避免单点故障。 当主机发生故障时，备机将立即接管以避免服务中断。 
ZXUN uMAC系统各服务发生异常或服务器各进程发生异常时，会产生告警信息并存储异常故障日志信息。 
#### 数据安全性 
备份机制
ZXUN uMAC支持不同模块的备份，例如配置管理、告警管理、安全管理和日志管理数据。支持手动或自动备份，对于自动备份，备份的间隔时间和备份的内容可以配置。
恢复机制
ZXUN uMAC支持将已备份的数据进行恢复，所有的备份数据均可被恢复。
#### 可靠性指标 
ZXUN uMAC系统的可靠性指标参见[表1](#z0e032df75baf4b2f8dbe43853a7fa4fa__5714db6f-1ac9-484b-951b-a1db3c412667)。
可靠性参数|指标
---|---
系统可靠性|>99.999％
系统平均故障间隔时间|148000小时
系统平均故障修复时间|<60分钟
系统年平均中断时间|<5分钟
### 遵循的标准 
#### 接口与协议 
ZXUN uMAC相关的3GPP接口与协议见[表1](#zb6db1e67e20648aa8f628f047531611d__4798b567-d251-41b8-b6fa-a907b9116092)。
ZXUN uMAC接口图见[图1](#zb6db1e67e20648aa8f628f047531611d__ead57d06-1f62-4dd7-a6d9-188d8ccdc932)。
图1  ZXUN uMAC接口图
[]images/%E5%9B%BE%E7%89%872.png)
接口|说明|协议|标准
---|---|---|---
Iu-PS|SGSN和RNC之间的接口|RANAP|3GPP 25.413
S1-MME|eNodeB和MME之间的接口|S1AP|3GPP 36.413
Gr|SGSN和HLR之间的接口SGSN和HSS之间的接口|MAP|3GPP 29.002
S6a|MME和HSS之间的接口|Diameter|3GPP 29.272
Gs|SGSN和CAMEL MSCS之间的接口|BSSAP+|3GPP 29.018
Gb|SGSN和BSC之间的接口|BSSGP|GSM 08.183GPP 48.018
Gn/Gp|SGSN和MME之间的接口SGSN和PGW之间的接口|GTP V1/ GTP V0|3GPP 29.0603GPP 29.281
S10|MME和MME之间的接口|GTPv2|3GPP 29.274
S11|MME和SGW之间的接口|GTPv2|3GPP 29.274
S13|MME和EIR之间的接口|Diameter|3GPP 29.272
Sv|MME和MSC for SRVCC之间的接口|GTPv2|3GPP 29.274
SGs|MME和MSC for CSFB or SMS之间的接口|SGsAP|3GPP 29.118
Gn|SGSN和SGW之间的接口SGSN和GGSN之间的接口|Gn GTP V1|3GPP 29.060
Ga|SGSN和CG之间的接口|GTP'|3GPP 32.215
N1|UE和AMF之间的接口|NAS|3GPP 24.501
N2|NR和AMF之间的接口|NG-AP|3GPP 38.413
N11|AMF和SMF之间的接口|Nsmf|3GPP 29.502
N8|AMF和UDM之间的接口|Nudm|3GPP 29.503
N15|AMF和PCF之间的接口|Npcf|3GPP 29.507
N12|AMF和AUSF之间的接口|Nausf|3GPP 29.509
N22|AMF和NSSF之间的接口|Nnssf|3GPP 29.531
Nnrf|AMF和NRF之间的接口|Nnrf|3GPP 29.510
N14|AMF和AMF之间的接口|Namf|3GPP 29.518
#### 遵循标准 
##### 3GPP标准 
ZXUN uMAC遵循的3GPP标准如下：
3GPP TS 23.003: Numbering, addressing and identification 
3GPP TS 23.060: General Packet Radio Service (GPRS) Service description Stage 2 
3GPP TS 23.107: Quality of Service (QoS) concept and architecture 
3GPP TS 23.125: Overall high level functionality and architecture impacts of flow based charging; Stage 2 
3GPP TS 23.203: Policy and charging control architecture  
3GPP TS 23.228: IP Multimedia Subsystem (IMS) Stage 2  
3GPP TS 23.246: Multimedia Broadcast/Multicast Service (MBMS); Architecture and functional description 
3GPP TR 23.803: Evolution of policy control and charging 
3GPP TS 24.007: Mobile radio interface signalling layer 3; General aspects 
3GPP TS 24.008: Mobile Radio Interface Layer 3 specification; Core Network Protocols; Stage 3 
3GPP TS 29.060: GPRS Tunnelling Protocol (GTP) across the Gn and Gp interface 
3GPP TR 21.905: "Vocabulary for 3GPP Specifications". 
3GPP TS 22.261: "Service requirements for next generation new services and markets; Stage 1". 
3GPP TS 23.502: "Procedures for the 5G System; Stage 2". 
3GPP TS 23.203: "Policies and Charging control architecture; Stage 2". 
3GPP TS 23.040: "Technical realization of the Short Message Service (SMS); Stage 2". 
3GPP TS 24.011: "Point-to-Point (PP) Short Message Service (SMS) support on mobile radio interface: Stage 3". 
3GPP TS 24.301: "Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS): Stage 3". 
3GPP TS 23.228: "IP Multimedia Subsystem (IMS); Stage 2". 
3GPP TS 22.173: "IMS Multimedia Telephony Service and supplementary services; Stage 1". 
3GPP TS 23.122: "Non-Access-Stratum (NAS) functions related to Mobile Station in idle mode". 
3GPP TS 23.167: "3rd Generation Partnership Project; Technical Specification Group Services and Systems Aspects; IP Multimedia Subsystem (IMS) emergency sessions". 
3GPP TS 23.003: "Numbering, Addressing and Identification". 
3GPP TS 23.002: "Network Architecture". 
3GPP TS 23.335: "User Data Convergence (UDC); Technical realization and information flows Stage 2". 
3GPP TS 23.221: "Architectural requirements". 
3GPP TS 22.153: "Multimedia priority service". 
3GPP TS 22.011: "Service Accessibility". 
3GPP TS 23.401: "General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access". 
3GPP TS 38.300: "NR; NR and NG-RAN Overall Description". 
3GPP TS 38.331: "NR; Radio Resource Control (RRC); Protocol Specification". 
3GPP TS 33.501: "Security architecture and procedures for 5G system". 
3GPP TS 36.300: "Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2". 
3GPP TS 37.340: "Evolved Universal Terrestrial Radio Access (E-UTRA) and NR; Multi-connectivity; Stage 2". 
3GPP TS 23.214: "Architecture enhancements for control and user plane separation of EPC nodes; Stage 2". 
3GPP TS 22.101: "3rd Generation Partnership Project; Technical Specification Group Services and Systems Aspects; Service aspects; Service principles". 
3GPP TS 38.413: "NG-RAN; NG Application Protocol (NGAP)". 
3GPP TS 33.126: "Lawful Interception Requirements". 
3GPP TS 23.682: "Architecture enhancements to facilitate communications with packet data networks and applications". 
3GPP TS 22.280: "Mission Critical Services Common Requirements (MCCoRe); Stage 1". 
3GPP TS 23.379: "Functional architecture and information flows to support Mission Critical Push To Talk (MCPTT); Stage 2". 
3GPP TS 23.281: "Functional architecture and information flows to support Mission Critical Video (MCVideo); Stage 2". 
3GPP TS 23.282: "Functional architecture and information flows to support Mission Critical Data (MCData); Stage 2". 
3GPP TS 32.240: "Charging management; Charging architecture and principles". 
3GPP TS 38.401: "NG-RAN Architecture description". 
3GPP TS 23.402: "Architecture enhancements for non-3GPP accesses". 
3GPP TS 23.503: "Policy and Charging Control Framework for the 5G System". 
3GPP TS 23.041: "Public Warning System". 
3GPP TS 24.501: "Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3". 
3GPP TS 24.502: "Access to the 5G System (5GS) via non-3GPP access networks; Stage 3". 
3GPP TS 29.500: "5G System; Technical Realization of Service Based Architecture; Stage 3". 
3GPP TS 38.304: "NR; User Equipment (UE) procedures in idle mode". 
3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification". 
3GPP TS 36.304: "Evolved Universal Terrestrial Radio Access (E-UTRA); User Equipment (UE) procedures in idle mode". 
3GPP TS 23.271: "Functional stage 2 description of Location Services (LCS)". 
3GPP TS 23.060: "General Packet Radio Service (GPRS); Service description; Stage 2". 
3GPP TS 29.510: "5G System: Network function repository services; Stage 3". 
3GPP TS 29.502: "5G System: Session Management Services: Stage 3". 
3GPP TS 23.380: "IMS Restoration Procedures". 
3GPP TS 24.229: "IP multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3". 
3GPP TS 23.292: "IP Multimedia Subsystem (IMS) centralized services; Stage 2". 
3GPP TS 23.222: "Functional architecture and information flows to support Common API Framework for 3GPP Northbound APIs". 
3GPP TS 29.244: "Interface between the Control Plane and the User Plane Nodes; Stage 3". 
3GPP TS 32.421: "Telecommunication management; Subscriber and equipment trace; Trace concepts and requirements". 
3GPP TS 32.290: "5G system; Services, operations and procedures of charging using Service Based Interface (SBI)". 
##### IETF RFC标准 
ZXUN uMAC遵循的IETF RFC标准如下：
IETF RFC 1058: Routing Information Protocol  
IETF RFC 1195: Use of OSIIS-IS for routing in TCP/IP and dual environments 
IETF RFC 1661: The Point-to-Point Protocol (PPP) 
IETF RFC 1701: Generic Routing Encapsulation 
IETF RFC 1702: Generic Routing Encapsulation over IPv4 networks 
IETF RFC 1918: Address Allocation for Private Internets 
IETF RFC 2131: Dynamic Host Configuration Protocol 
IETF RFC 2228: FTP Security Extensions  
IETF RFC 2328: OSPF Version 2  
IETF RFC 2402: IP Authentication Header 
IETF RFC 2406: IP Encapsulating Security Payload (ESP) 
IETF RFC 2409: The Internet Key Exchange (IKE) 
IETF RFC 2439: BGP Route Flap Damping  
IETF RFC 2460: Internet Protocol, Version 6 (IPv6) Specification 
IETF RFC 2547: BGP/MPLS VPNs 
IETF RFC 2764: IP Based Virtual Private Networks 
IETF RFC 2918: Route Refresh Capability for BGP-4 
IETF RFC 3588: Diameter Base Protocol 
IETF RFC 4005: Diameter Network Access Server Application 
IETF RFC 4217: Securing FTP with TLS 
IETF RFC 4271: A Border Gateway Protocol 4 (BGP-4) 
IETF RFC 4291: IP Version 6 Addressing Architecture 
IETF RFC 4346: The Transport Layer Security (TLS) Protocol 
IETF RFC 4456: BGP Route Reflection  
IETF RFC 4760: Multiprotocol Extensions for BGP-4 
IETF RFC 4960: "Stream Control Transmission Protocol". 
IETF RFC 5065: Autonomous System Confederations for BGP 
IETF RFC 5492: Capabilities Advertisement with BGP-4 
IETF RFC 1027: "Using ARP to Implement Transparent Subnet Gateways". 
IETF RFC 4861: "Neighbor Discovery for IP version 6 (IPv6)". 
IETF RFC 4555: "IKEv2 Mobility and Multihoming Protocol (MOBIKE)". 
IETF RFC 7296: "Internet Key Exchange Protocol Version 2 (IKEv2) ". 
IETF RFC 7542: "The Network Access Identifier". 
##### 网管标准 
ZXUN uMAC遵循的网管标准如下：
ITU-T M.3000, Overview of TMN recommendations 
ITU-T M.3010, Principles for a Telecommunications management network 
ITU-T M.3016, TMN security overview 
ITU-T M.3020, TMN Interface Specification Methodology 
ITU-T M.3100 Generic Network Information Model 
ITU-T M.3101, Managed Object Conformance Statements for the Generic Network Information Model 
ITU-T M.3200, TMN management services and telecommunications managed areas: overview 
ITU-T M.3300, TMN F interface requirements 
ITU-T M.3400, TMN Management Function 
ITU-T Temporary Document 69 (IP Experts): Revised draft document on IP access network architecture 
ITU-T X.701-X.709, Systems Management framework and architecture 
ITU-T X.710-X.719, Management Communication Service and Protocol 
ITU-T X.720-X.729, Structure of Management Information 
ITU-T X.730-X.799, Management functions 
RFC1157, Simple Network Management Protocol 
RFC1213, Management Information Base for Network Management of TCP/IP based internets: MIB-II 
RFC1901, Introduction to Community-based SNMPv2 
RFC1902, Structure of Management Information for Version 2 of the Simple Network Management Protocol (SNMPv2) 
RFC1903, Textual Conventions for Version 2 of the Simple Network Management Protocol (SNMPv2) 
RFC1905, Protocol Operations for Version 2 of the Simple Network Management Protocol (SNMPv2) 
RFC2037, Entity MIB using SMIv2 
RFC2233, The Interface Group MIB using SMIv2 
RFC1558, A String Representation of LDAP Search Filters 
RFC1558, A String Representation of LDAP Search Filters  
RFC1777, Lightweight Directory Access Protocol 
RFC1778, The String Representation of Standard Attribute Syntaxes 
RFC1959, An LDAPURL Format 
RFC2251, Lightweight Directory Access Protocol (v3) 
RFC1493, Definitions of Managed Objects for Bridges 
GB901, A Service management Business Process Model 
GB910, Telecom Operations Map 
GB909, Generic Requirements for Telecommunications Management Building Blocks 
RFC1757, Remote Network Monitoring Management Information Base 
GB908, Network Management Detailed Operations Map 
RFC1757, Remote Network Monitoring Management Information Base 
GB914, System Integration Map 
GB917, SLA Management Handbook V1.5 
NMF038, Bandwidth Management Ensemble V1.0 
TMF508, Connection and Service Management Information Model Business Agreement 
TMF801, Plug and Play Service Fulfillment Phase 2 Validation Specification V1.0 
TMF605, Connection and Service Management Information Model 
NMF037, Sub-System Alarm Surveillance Ensemble V1.0 
TMF053, NGOSS Architecture Technology Neutral Specification V1.5 
TMF053A, NGOSS Architecture Technology Neutral Specification V1.5 
TMF053B, NGOSS Architecture Technology Neutral Specification V1.5 
TMF821, IPVPN Management Interface Implementation Specification V1.5 
TMF816, B2B Managed Service for DSL Interface Implementation Specification V1.5 
Interworking Between CORBA and TMN System Specification V1.0 
YD/T 852-1996 Telecom Management Network (TMN) General Design Principles 
YD/T 871-1996 Universal Network Information Model of Telecommunication Management Network (TMN) 
YD/T XXXX-2001 Broadband Metropolitan Area Network General Technical Requirements 
YD/T XXXX-2001 IP network Technical Requirements—Network Performance Objectives and Availability 
YD/T XXXX-2000 IP Network Technical Requirements—General Network 
YDN 075-1998 Network Management Specifications of China Public Multimedia Communication Network 
RFC 1215 A Convention for Defining Traps for use with the SNMP 
RFC 1657 BGP4-MIB 
RFC 1724 RIPv2-MIB 
RFC 1850 OSPF-MIB 
RFC 1907 SNMPv2-MIB 
RFC 2096 IP-FORWARD-MIB 
RFC 2011 IP-MIB 
RFC 2012 TCP-MIB 
RFC 2013 UDP-MIB 
RFC 2138 RADIUS 
RFC 2206 RSVP-MIB 
RFC 2452 IPv6 Management Information Base for the Transmission Control Protocol 
RFC 2454 IPv6 Management Information Base for the User Datagram Protocol 
RFC 2987 VRRP-MIB  
RFC 3014 NOTIFICATION-LOGMIB 
RFC 3019 IP Version 6 Management Information Base for The Multicast Listener Discovery Protocol 
RFC 3164 Syslog 
draft-ietf-disman-alarm-mib-04.txt 
draft-ietf-ospf-mib-update-04.txt 
draft-ietf-IS-IS-wg-mib-05.txt  
draft-ietf-mpls-lsr-mib-06.txt  
draft-ietf-mpls-te-mib-04.txt  
draft-ietf-mpls-ldp-mib-07.txt 
##### 安全标准 
ZXUN uMAC遵循的安全标准如下：
UL 60950 
IEC 60950 
EN 60950 
## 缩略语 
## 缩略语 
### 3G 
The 3rd Generation Mobile Communications第三代移动通信
### 3GPP 
3rd Generation Partnership Project第三代合作伙伴计划
### 5GC 
5G Core Network5G核心网
### AF 
Application Function应用功能
### AMF 
Access and Mobility Management Function接入和移动管理功能
### AN 
Access Network接入网
### APN 
Access Point Name接入点名称
### ASN.1 
Abstract Syntax Notation One抽象语法编码1
### AUSF 
Authentication Server Function鉴权服务器功能
### BSC 
Base Station Controller基站控制器
### BTS 
Base Transceiver Station基站收发信机
### CDR 
Call Detail Record呼叫详细记录，即话单
### CSFB 
Circuit Switched Fallback电路域回落
### DNS 
Domain Name Server域名服务器
### DT 
Direct Tunnel直传隧道
### E-UTRAN 
Evolved Universal Terrestrial Radio Access Network演进的通用陆地无线接入网络
### eMBB 
Enhanced Mobile Broadband增强移动宽带
### eNB 
E-UTRAN NodeBE-UTRAN基站
### eNodeB 
Evolved NodeB演进的NodeB
### EPS 
Evolved Packet System演进的分组系统
### GERAN 
GSM/EDGE Radio Access NetworkGSM/EDGE无线接入网
### GGSN 
Gateway GPRS Support NodeGPRS网关支持节点
### GPRS 
General Packet Radio Service通用无线分组数据业务
### GUAMI 
Globally Unique AMF ID全球唯一AMF标识
### HLR 
Home Location Register归属位置寄存器
### HSS 
Home Subscriber Server归属用户服务器
### IMS 
IP Multimedia SubsystemIP多媒体子系统
### IP 
Internet Protocol因特网协议
### IPv4 
Internet Protocol version 4第四版互联网协议
### IPv6 
Internet Protocol Version 6IP协议的版本6
### LMF 
Local Management Function本地管理功能
### MANO 
Management and Orchestration管理和编排
### MEID 
Mobile Equipment Identifier移动设备标识
### MME 
Mobility Management Entity移动管理实体
### MML 
Man Machine Language人机语言
### mMTC 
Massive Machine Type Communication海量机器类通信
### NAS 
Non-Access Stratum非接入层
### NF 
Network Function网络功能
### NFV 
Network Functions Virtualization网络功能虚拟化
### NFVI 
Network Functions Virtualization Infrastructure网络功能虚拟化基础设施
### NFVO 
Network Functions Virtualization Orchestrator网络功能虚拟化编排器
### NNSF 
NAS Node Selection Function非接入层节点选择功能
### NRF 
NF Repository Function网络功能仓储
### NSSAI 
Network Slice Selection Assistance Information网络切片选择辅助信息
### NSSF 
Network Slice Selection Function网络切片选择功能
### PCF 
Policy Control Function策略控制功能
### PDP 
Packet Data Protocol分组数据协议
### PDU 
Packet Data Unit分组数据单元
### PGW 
PDN Gateway分组数据网网关
### PGW-C 
PDN Gateway Control plane functionPGW控制面网关
### PGW-U 
PDN Gateway User plane functionPGW用户面网关
### QoS 
Quality of Service服务质量
### RAN 
Radio Access Network无线接入网
### RNC 
Radio Network Controller无线网络控制器
### SBA 
Service Based Architecture基于服务的架构
### SBI 
Service Based Interface基于服务的接口
### SDN 
Software Defined Network软件定义网络
### SGSN 
Serving GPRS Support Node服务GPRS支持节点
### SGW 
Serving Gateway服务网关
### SGW-C 
Serving Gateway Control plane functionSGW控制面网关
### SGW-U 
Serving Gateway User plane functionSGW用户面网关
### SMF 
Session Management Function会话管理功能
### SMS 
Short Message Service短消息业务
### SMSF 
Short Message Service Function短消息服务功能
### SRVCC 
Single Radio Voice Call Continuity单射频语音呼叫连续性
### TECS 
Tulip Elastic Cloud System郁金香弹性云系统
### UDM 
Unified Data Management统一数据管理
### UE 
User Equipment用户设备
### UMTS 
Universal Mobile Telecommunication System通用移动通讯系统
### UPF 
User Plane Function用户平面功能
### UTRAN 
UMTS Terrestrial Radio Access NetworkUMTS陆地无线接入网
### VIM 
Virtualized Infrastructure Manager虚拟化基础设施管理系统
### VNF 
Virtualized Network Function虚拟化网络功能
### VNFM 
Virtualized Network Function Manager虚拟化网络功能管理器
### VoLTE 
Voice over LTELTE语音
### VoNR 
Voice over New Radio新空口承载语音
## 系统原理 
### 系统架构 
ZXUN uMAC系统架构统一遵循ETSI定义的NFV标准架构，提供从硬件COTS、虚拟化平台、容器平台到VNF的端到端能力，具备全云全栈能力。
ZXUN uMAC是VNF的一个功能实体，提供AMF/MME/SGSN网元功能，NF的业务功能通过若干服务来承载，系统架构如[图1](#zc8dab961bb344137847d3c18cab54ea5__6bb589ee-2d75-42ef-b90b-6e426b06fda3)所示。
图1  uMAC系统架构
[]images/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.png)
NFV架构中部件组成及其功能参见下表。 
部件类别|部件名称|部件功能简述
---|---|---
运营支撑部件|OSS/BSS|运营商的运营支撑和业务支撑系统。
应用管理部件|EMS|VNF网元运维管理系统，可根据实际情况部署一个或多个。
NFVO|应用管理部件|NS（Network Service，网络服务）生命周期的管理模块，实现对整个NFV基础架构、软件资源、网络服务的编排和管理，同时负责协调NS、组成NS的VNFs以及承载各VNF的虚拟资源的控制和管理。
VNFM|应用管理部件|VNF管理模块，也就是应用管理单元，是VNF的生命周期管理部件，主要对VNF的生命周期实例化、配置、关闭、弹性、重建等进行控制。
业务网元|VNF|网络功能实体，提供5G核心网控制面NF的功能，以及融合的2/3/4G功能。ZXUN uMAC提供的控制面NF包括AMF、MME、SGSN。NF在软件实现上通过各种NFS组合来承载，NFS是能够独立完成某个具体功能的软件实体，NFS包括5类：信令业务类服务平台支撑&网管运维类服务接口管理&转发服务数据存储类服务业务资源管理类服务
容器平台|CIM|（可选）容器管理平台，实现容器部署及容器资源管理。
部件|VIM|提供对虚拟化基础设施的管理，主要功能包括：资源的发现、虚拟资源的管理分配、故障处理等，为VNF运行提供资源支持。采集和上报基础设施性能指标和相关事件。
基础设施|CloudOS|提供虚拟化功能，将硬件物理资源虚拟成虚拟资源，供VNF使用，其中虚拟网络支持SR-IOV/DVS。
COTS|基础设施|通用COTS设备，包括服务器、存储、网络设备。
### 服务框架 
#### 服务组成 
##### 业务服务和服务组件说明 
为了适应5GC网络的灵活性、扩展性，ZXUN uMAC系统采用服务化架构。服务化架构由一系列业务服务NFS和服务组件SC构成。
业务服务，是NF的具体功能，能够独立完成某个具体功能的软件实体，服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征，多个业务服务组合可实现一定的业务功能。 
服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。 
##### 业务服务模型和资源模型的映射关系 
业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（[IaaS](1636018194101.html)形态），也可以运行在POD资源模型（[CaaS](1636017611827.html)形态），业务功能逻辑呈现一致，底层的部署方式不同。
服务组件的运行载体为VRU，VRU在IaaS形态部署时呈现为容器实例，在CaaS形态部署时呈现为POD实例。
业务服务模型和资源模型的映射关系如[图1](#z312c25055ce348deae82a45092f18f18__a0059f4c-2324-4e10-9a17-4d2befbef9fa)所示。
图1  业务服务模型和资源模型的映射关系
[]images/1640048948647.png)
##### 各业务服务和服务组件介绍 
各业务服务及其包含的服务组件介绍参见下表。 
服务分类|服务|说明|归属NF|服务组件|功能描述
---|---|---|---|---|---
平台支撑&网管运维类服务|Service Governance|微服务治理，又称CommonS_TMSP。|公共服务SMF/AMF/PCF/UPF……|sc-tmsp-mgt|管理SC，服务部署资源的编排，升级，自愈。
sc-tmsp-smc|平台支撑&网管运维类服务|Service Governance|微服务治理，又称CommonS_TMSP。|公共服务SMF/AMF/PCF/UPF……|管理SC，服务管理，服务注册，发现，升级。
sc-tmsp-mp|平台支撑&网管运维类服务|Service Governance|微服务治理，又称CommonS_TMSP。|公共服务SMF/AMF/PCF/UPF……|本服务配置管理，性能统计管理等。
sc-tmsp-rosng|平台支撑&网管运维类服务|Service Governance|微服务治理，又称CommonS_TMSP。|公共服务SMF/AMF/PCF/UPF……|路由协议栈SC。
sc-tmsp-amu|平台支撑&网管运维类服务|Service Governance|微服务治理，又称CommonS_TMSP。|公共服务SMF/AMF/PCF/UPF……|仲裁SC，对其他SC提供主备仲裁。
Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|sc-oam-gateway|OAM接入网关，负责管理口http/ssh等协议接入。
sc-oam-main|Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。
sc-oam-umf|Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|OAM统一消息上报单元，负责信令跟踪消息上报。
sc-oam-ccmf|Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|OAM配置管理单元，负责配置数据校验、存储、同步。
sc-oam-upgrade|Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|OAM升级管理单元，负责业务SC和OAM自身升级控制。
sc-oam-postgre|Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|OAM数据库，负责存储OAM配置、安全、接入等数据。
sc-oam-web|Operation and Maintenance|平台支撑&网管运维类服务|操作维护，又称CommonS_OAM。|公共服务SMF/AMF/PCF/UPF……|提供本地网管web服务。
AMF Management Process|平台支撑&网管运维类服务|业务公共服务，又称Namf_MP。|AMF/MME/SGSN|sc-amf-mp-dba|MME/SGSN网元级配置、告警、性能统计等。
sc-amf-mp|AMF Management Process|平台支撑&网管运维类服务|业务公共服务，又称Namf_MP。|AMF/MME/SGSN|本服务SC控制单元，负责升级控制、动态命令。
接口管理&转发服务|Interface Management|接口处理，又称CommonS_IPS。|公共服务SMF/AMF/PCF/UPF……|sc-ips-mp|本服务SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。
sc-ips|接口管理&转发服务|Interface Management|接口处理，又称CommonS_IPS。|公共服务SMF/AMF/PCF/UPF……|转发接口服务，提供报文分发服务以及IP路由转发功能。
HTTP Service|接口管理&转发服务|HTTP服务，又称CommonS_HTTP_LB|公共服务SMF/AMF/PCF/UPF……|sc-http-lb-mp|本服务SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。
sc-http-lb|HTTP Service|接口管理&转发服务|HTTP服务，又称CommonS_HTTP_LB|公共服务SMF/AMF/PCF/UPF……|HTTP协议处理，提供能力开发查询功能。
SIG Service|接口管理&转发服务|信令服务，又称CommonS_SIG。|AMF/MME/SGSN|sc-sig-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-sig|SIG Service|接口管理&转发服务|信令服务，又称CommonS_SIG。|AMF/MME/SGSN|SCTP、M3UA协议处理。
业务资源管理类服务|AMF Resource Management|AMF资源管理服务，又称Namf_ResourceManage。|AMF|sc-amf-rm-mp|本服务SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。
sc-amf-rm|业务资源管理类服务|AMF Resource Management|AMF资源管理服务，又称Namf_ResourceManage。|AMF|全局类业务资源管理。
业务类服务|AMF Communication|AMF通讯服务，又称Namf_Communication。|AMF|sc-amf-comm-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-amf-comm|业务类服务|AMF Communication|AMF通讯服务，又称Namf_Communication。|AMF|AMF通讯服务，AMF的主要流程处理，为其他NF提供访问UE和AN的能力。支持SMF发起的EBI分配请求，以便支持和EPS的互操作。
AMF MT|业务类服务|AMF终呼服务，又称Namf_MT。|AMF|sc-amf-mt-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-amf-mt|AMF MT|业务类服务|AMF终呼服务，又称Namf_MT。|AMF|AMF终呼服务，执行寻呼流程，允许NF确认UE是可达的。
AMF Event Exposure|业务类服务|AMF事件暴露服务，又称Namf_EventExposure。|AMF|sc-amf-ee-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-amf-ee|AMF Event Exposure|业务类服务|AMF事件暴露服务，又称Namf_EventExposure。|AMF|AMF事件暴露服务，允许其他NF订阅并获取事件和统计信息通知，这些事件和统计与用户移动性相关。
AMF Location|业务类服务|AMF定位服务，又称Namf_Location。|AMF|sc-amf-loc-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-amf-loc|AMF Location|业务类服务|AMF定位服务，又称Namf_Location。|AMF|AMF定位服务，向Communication服务和MT服务提供UE位置信息订阅和通知服务。
MMESGSN Sevice|业务类服务|MMESGSN服务，又称NFS_MMESGSN。|MME/SGSN|sc-mmesgsn-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-mmesgsn-oam-dba|MMESGSN Sevice|业务类服务|MMESGSN服务，又称NFS_MMESGSN。|MME/SGSN|MME/SGSN服务中负责配置功能。
sc-mmesgsn-cmp|MMESGSN Sevice|业务类服务|MMESGSN服务，又称NFS_MMESGSN。|MME/SGSN|MME/SGSN服务的主业务处理SC，负责2/3/4G业务处理。
sc-mmesgsn-up|MMESGSN Sevice|业务类服务|MMESGSN服务，又称NFS_MMESGSN。|MME/SGSN|MME/SGSN服务的媒体面数据处理，负责2/3G的媒体面报文转发。
数据存储类服务|UDSF Management|非结构化数据管理，又称Nudsf_UnstructuredDataManagement。|公共服务SMF/AMF/PCF……|sc-cudr-cdn-mp|本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。
sc-cudr-cdn-l|数据存储类服务|UDSF Management|非结构化数据管理，又称Nudsf_UnstructuredDataManagement。|公共服务SMF/AMF/PCF……|内存数据库（左域），提供数据存储、备份和同步。
sc-cudr-cdn-r|数据存储类服务|UDSF Management|非结构化数据管理，又称Nudsf_UnstructuredDataManagement。|公共服务SMF/AMF/PCF……|内存数据库（右域），提供数据存储、备份和同步。
CUDR System Management|数据存储类服务|云数据系统管理，又称Ncudr_SystemManagement。|sc-cudr-sys-mp|公共服务SMF/AMF/PCF……|数据存储控制中心，负责CDN组件的弹性策略控制。
#### 服务治理机制 
##### 描述 
ZXUN uMAC产品业务服务组件众多，而且随着5G业务生态的不断壮大，业务服务组件可能会越来越多，必须有一套治理机制来保障服务间的交互、通信能够快速、安全、可靠地完成。
ZXUN uMAC产品根据自身特点提供了服务治理服务-微服务治理（Service Governance）。该服务可以提供业务服务组件的注册、发现，以及服务间内部通信支撑，保证系统正常、可靠运行。
##### 服务组件注册发现机制 
不同类型的SC间，通过[SCR](1636016713739.html)（Service Component Responsible，SC注册中心）来实现注册和发现。双方根据服务名称来发现对方的[SCCU](1636016464666.html)（Service Component Control Unit，服务组件控制单元）主用节点，从SCCU获取对方的节点列表、节点状态、转发策略。SCCU主用节点和使用本服务其他[SCI](1636016100654.html)间保持服务节点和转发策略的实时同步。
服务组件注册发现机制，如[图1](#z1c07888cc7b146e2beb9b077dc9f3983__11c82f5c-65eb-4505-8765-c0427a1ac6d6)所示。
图1  服务组件注册发现机制
[]images/%E6%9C%8D%E5%8A%A1%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0%E6%9C%BA%E5%88%B6.png)
##### 服务组件间内部通信机制 
ZXUN uMAC提供了两个管理中心用于保证服务组件间的内部通信。
服务管理中心由服务组件sc-tmsp-smc提供SCR功能，用于存储SC注册信息和提供订阅发现能力。 
通信管理中心由服务组件sc-tmsp-mgt提供服务组件之间的可靠性通信和RAW通信能力，同时负责维护内部通道的链路健康状态检测。 
服务组件间内部通信机制，如[图2](#z1c07888cc7b146e2beb9b077dc9f3983__0ffbcd42-9286-4ce4-bf14-21bc80955691)所示。
图2  服务组件间内部通信机制
[]images/%E6%9C%8D%E5%8A%A1%E7%BB%84%E4%BB%B6%E9%97%B4%E5%86%85%E9%83%A8%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6.png)
服务组件间内部通信机制说明： 
服务间转发信息同步：依靠服务管理中心提供的服务注册发现机制，各服务相互同步各自的转发表信息到SCCU保存，SCCU再将转发信息同步给本服务内的SC，为各自SC间通信提供转发规则数据。 
通信节点管理：由通信管理中心提供对内部管理面，内部业务面两个通信平面的网络状态提供健康检测。 
服务组件间通信：依靠SCCU同步的转发表信息，完成和其他SC的点对点通信。 
### 业务原理 
#### 注册流程 
注册流程如[图1](#z4ff1e64811e9469fbbdce98f15e0aadf__7a75a2bb-8e08-4433-9270-f65ace43acf4)所示。
图1  注册流程在服务间流程示意图
[]images/CjYTEWGMjfaAVatuAACh0-O_tDc534.png)
步骤说明参见下表。 
顺序关系|说明
---|---
1->2->3->4|UE发起注册流程（Registration Request），消息经过RAN，经由Interface Management、SIG Service服务到达AMF Communication服务进行处理。
5->6->7|AMF Communication完成用户对用户身份的鉴权后，通过HTTP Service、Interface Management服务向UDM发送Nudm_UEContextManagement_Registration Request，通知并获取用户的签约数据信息。
8->9->10|UDM发送Nudm_UEContextManagement_Registration Response消息，经由Interface Management、HTTP Service服务到达AMF Communication服务，AMF Communication服务保存用户签约信息。
11->12->13|AMF Communication通过HTTP Service、Interface Management服务向PCF发送Npcf_SMPolicyControl_Create Request，获取用户策略信息。
14->15->16|PCF返回Npcf_SMPolicyControl_Create Response消息，经由Interface Management、HTTP Service到达AMF Communication。
17->18->19->20|AMF Communication根据PCF和UDM返回的信息完成控制策略、GUTI分配等处理后，向UE发送Registration Accept消息。
#### 基于N26接口的EPS到5GS切换流程 
##### 4G到5G切换流程在服务间流程 
图1  4G到5G切换流程在服务间流程示意图
[]images/CjYTEWGPZDqAAHzEAAFse79g5Hw884.png)
步骤说明参见下表。 
顺序关系||说明
---|---|---
1->2||MME发送Forward Relocation Request给AMF，消息经由Interface Management服务到达AMF Communication服务进行处理。
3->4->5||AMF Communication根据MME携带过来的SMF+PGW-C FQDN，查询得到SMF+PGW-C地址信息，通过HTTP Service、Interface Management服务向SMF+PGW-C发送Nsmf_PDUSession_CreateSMContext Request消息。
6->7->8||SMF+PGW-C回复Nsmf_PDUSession_CreateSMContext Response，经由Interface Management、HTTP Service服务到达AMF Communication服务处理。
9->10->11||AMF Communication服务通过SIG Service、Interface Management向NG-RAN发送Handover Request。
12->13->14||NG-RAN回复Handover Request Acknowledge，经由Interface Management、SIG Service服务到达AMF Communication服务处理。
15->16->17||AMF Communication通过HTTP Service、Interface Management服务向SMF+PGW-C发送Nsmf_PDUSession_UpdateSMContext Request。
18->19->20||SMF+PGW-C回复Nsmf_PDUSession_UpdateSMContext Response，经由Interface Management、HTTP Service服务到达AMF Communication服务处理。
21->22||AMF Communication服务通过Interface Management向源局MME回复Forward Relocation Response。
23->24->25->26||UE切换到目标NG-RAN，目标NG-RAN发送Handover Notify，经由Interface Management、SIG Service服务到达AMF Communication服务处理。
27->28||AMF Communication服务通过Interface Management向源局MME发送Forward Relocation Complete Notification，通知切换完成。
29->30||源局MME回复Forward Relocation Complete Acknowledge，经由Interface Management服务到达AMF Communication服务处理。
31->32->33||AMF Communication服务通过HTTP Service、Interface Management服务向SMF+PGW-C发送Nsmf_PDUSession_UpdateSMContext Request，通知切换完成。
34->35->36||SMF+PGW-C回复Nsmf_PDUSession_UpdateSMContext Response，经由Interface Management、HTTP Service服务到达AMF Communication服务处理。
##### 4G到5G切换后注册流程在服务间流程 
图2  4G到5G切换后注册流程在服务间流程示意图
[]images/G%E5%88%B05G%E5%88%87%E6%8D%A2%E5%90%8E%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B%E5%9C%A8%E6%9C%8D%E5%8A%A1%E9%97%B4%E6%B5%81%E7%A8%8B.png)
步骤说明参见下表。 
顺序关系|说明
---|---
1->2->3->4|UE从4G切换到5G后，由于RAT发生变化，触发注册更新流程（Registration Request），消息经过RAN，经由Interface Management、SIG Service服务到达AMF Communication服务进行处理。
5->6->7|AMF Communication通过HTTP Service、Interface Management服务向UDM发送Nudm_UEContextManagement_Registration Request，通知并获取用户的签约数据信息。
8->9->10|UDM发送Nudm_UEContextManagement_Registration Response消息，经由Interface Management、HTTP Service服务到达AMF Communication服务，AMF Communication服务保存用户签约信息。
11->12->13|AMF Communication通过HTTP Service、Interface Management服务向PCF发送Npcf_AMPolicyControl_Create Request，获取用户策略信息。
14->15->16|PCF发送Npcf_AMPolicyControl_Create Response消息，经由Interface Management、HTTP Service到达AMF Communication服务。
17->18->19->20|AMF Communication根据PCF和UDM返回的信息完成控制策略、GUTI分配等处理后，向UE发送Registration Accept消息。
#### 基于N26接口的5GS到EPS切换流程 
图1  5G到4G流程在服务间流程示意图
[]images/%E5%9F%BA%E4%BA%8EN26%E6%8E%A5%E5%8F%A3%E7%9A%845GS%E5%88%B0EPS%E5%88%87%E6%8D%A2%E6%B5%81%E7%A8%8B.png)
步骤说明参见下表。 
顺序关系|说明
---|---
1->2->3->4|UE移动过程，上报无线测量报告给NG-RAN，NG-RAN判断UE即将从4G覆盖进入5G覆盖，或者EPS回落后语音呼叫结束时UE重新接入到5G覆盖，NG-RAN发起Handover Required，消息经由Interface Management、SIG Service服务到达AMF Communication服务进行处理。
5->6->7|AMF Communication通过HTTP Service、Interface Management服务向SMF+PGW-C发送Nsmf_PDUSession_ContextRequest Request，获取PDU会话信息。
8->9->10|SMF+PGW-C回复Nsmf_PDUSession_ContextRequest Response，经由Interface Management、HTTP Service服务到达AMF Communication服务。
11->12|AMF Communication根据目标TAI信息，获取到目标局MME地址后，通过Interface Management服务向目标局MME发送Forward Relocation Request。
13->14|MME回复Forward Relocation Response消息，经由Interface Management服务到达AMF Communication服务。
15->16->17|AMF Communication通过SIG Service、Interface Management服务向NG-RAN发送Handover Command，通知执行用户切换。
18|NG-RAN发送AS Handover Command，通知UE向目标4G基站切换。
19->20|UE切换到4G后，MME发送Forward Relocation Complete Notification，经由Interface Management服务到达AMF Communication服务。
21->22|AMF Communication通过Interface Management服务向目标局MME回复响应Forward Relocation Complete Acknowledge，并启动资源保护定时器。
23->24->25|资源保护定时器超时后，AMF Communication通过SIG Service、Interface Management服务向NG-RAN发送UE Context Release Command，通知释放用户上下文。
26->27->28|NG-RAN回复UE Context Release Complete，经由Interface Management、SIG Service服务到达AMF Communication服务进行处理。
### 参考术语 
#### SC 
##### 全称 
Service Componen，服务组件 
##### 解释 
ZTE定义的服务组件，多种SC组成NFS或Common Service微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性功能。
#### SCI 
##### 全称 
Service Component Instance，服务组件实例 
##### 解释 
SC集群内的业务处理节点，即服务节点，以进程为单位。
#### SCCU 
##### 全称 
Service Component Control Unit，服务组件控制单元 
##### 解释 
SCCU是SC的主控节点，管理SC的集群节点状态、负荷分担规则、弹性迁移控制、节点故障处理、服务注册和服务发现的源端点。
#### SCCU Agent 
##### 全称 
SCCU Agent，服务组件控制单元的客户端 
##### 解释 
SCCU Agent驻留在每个SC上，负责向SCCU进行注册，向SCCU获取本SC的实例号
#### SCR 
##### 全称 
Service Component Repository，SC注册中心 
##### 解释 
SC仓库，内部SC间的注册发现，提供客户端LIB库和VNFM/EMS接口，完成业务视角监控管理。
#### SMC 
##### 全称 
Service Manager Control，服务管理 
##### 解释 
服务管理组件包括EMC、LTM、SCR等。
#### EMC 
##### 全称 
Elasticity Manager Control，弹性管理中心 
##### 解释 
弹扩控制中心，负责弹缩策略的处理，收集到SC的KPI上报后，决策出是否需要弹缩。
#### LTM 
##### 全称 
Logical Topology Management，业务逻辑拓扑管理 
##### 解释 
NF/NFS/SC的关系管理，作为业务逻辑的管理入口。例如对NF查询的动态管理命令。
#### VNM 
##### 全称 
Virtual Node Manager，虚拟节点管理 
##### 解释 
VNM和VNFM接口，共同完成VNF内VM的生命周期管理。
#### CaaS 
##### 全称 
Container as a service，通信即服务 
##### 解释 
集通讯相关的IaaS（Infrastructure as a Service，基础设施即服务）、PaaS（Platform as a Service，平台即服务）以及SaaS（Software as a Service，软件即服务）为一体，将传统电信的能力如消息、语音、视频、会议、通信协同等封装成API(Application Programming Interface，应用软件编程接口)或者SDK(Software Development Kit，软件开发工具包)通过互联网对外开放，提供给第三方（企业、SME、垂直行业、CP/SP以及个人开发者等）使用，将电信能力真正作为服务对外提供。
#### IaaS 
##### 全称 
Infrastructure as a Service，基础设施即服务 
##### 解释 
为用户提供计算、存储和网络等硬件资源的服务。基于此服务，用户能够部署和运行任意软件，包括操作系统和应用程序。 
#### F-TEID 
##### 全称 
Full Qualified TEID，全量隧道端点标识 
##### 解释 
F-TEID包含TEID和IP地址，标识GTP隧道。
#### F-SEID 
##### 全称 
Full Qualified SEID， 全量会话端点标识 
##### 解释 
F-SEID包含SEID和 IP地址，标识PFCP会话。 
## 缩略语 
## 缩略语 
### API 
Application Programming Interface应用编程接口
### BSS 
Business Support System业务支撑系统
### CP 
Content Provider内容提供商
### EMC 
Elastic Management Center弹性管理中心
### EMS 
Element Management System网元管理系统
### ETSI 
European Telecommunications Standards Institute欧洲电信标准化协会
### FAR 
Forwarding Action Rule报文转发规则
### GTP 
GPRS Tunneling ProtocolGPRS隧道协议
### IaaS 
Infrastructure as a Service基础设施即服务
### KPI 
Key Performance Indicator关键性能指标
### LIB 
Label Information Base标签信息库
### LTM 
Logical Topology Management逻辑拓扑管理
### NF 
Network Function网络功能
### NFS 
Network Function Service网络功能服务
### NFV 
Network Functions Virtualization网络功能虚拟化
### NFVO 
Network Functions Virtualization Orchestrator网络功能虚拟化编排器
### NS 
Network Service网络服务
### OSS 
Operation Support System运营支撑系统
### PDR 
Packet Detection Rule报文检测规则
### PSA 
PDU Session AnchorPDU会话锚点
### PaaS 
Platform as a Service平台即服务
### QER 
QoS Enforcement RuleQoS执行规则
### RA 
Router Advertisement路由器通告报文
### RS 
Router Solicitation路由器请求报文
### SC 
Service Component服务组件
### SCCU 
Service Component Control Unit服务组件控制单元
### SCR 
Service Component Repository服务组件仓库
### SDK 
Software Development Kit软件开发工具
### SP 
Service Provider服务提供商
### SaaS 
Software as a Service软件即服务
### TEID 
Tunnel Endpoint Identifier隧道端点标识
### ULCL 
Uplink Classifier上行分类器
### URR 
Usage Reporting Rule用量上报规则
### VIM 
Virtualized Infrastructure Manager虚拟化基础设施管理系统
### VM 
Virtual Machine虚拟机
### VNF 
Virtualized Network Function虚拟化网络功能
### VNFM 
Virtualized Network Function Manager虚拟化网络功能管理器
### VRU 
Virtual Running Unit虚拟运行单元
## 安全描述 
### 安全策略 
中兴通讯基于多年ZXUN uMAC设备开发经验和安全实践，确定如下总体策略：
安全规划：遵循国际和国内安全标准，将业界安全最佳实践和安全技术要求规划到安全基线中，不断提高产品安全水平。 
立体防护：通过在管理平面、控制平面和数据平面采用立体安全措施保障产品安全。 
分权分域：提供分权分域的技术手段，在产品部署中，根据任务所需权限和资源的具体情况分配用户最小的权限和资源以减少潜在的安全威胁。 
审计跟踪：记录安全事件，事后进行追踪，改进产品安全措施。 
### 管理平面 
管理平面的安全措施是针对操作用户的安全管理。 
#### 用户超时退出 
管理员可以为每个用户设置超时退出功能。 
用户通过SSH方式登录操作系统，在一段时间内未进行任何操作时，自动退出系统。默认空闲超时时间为900秒，该时长可通过手工修改配置文件进行配置。 
#### 用户密码有效期 
管理员可以为每个用户设置密码有效期。 
有效期可配置，在有效期内，用户可使用密码成功登录系统。 
到期前强制用户修改密码，到期后密码失效。 
密码有效期功能可开启或关闭。 
#### 密码长度和强度 
管理员可以设置密码长度及强度，用户在修改密码时，需要满足密码长度及强度的策略要求。 
密码强度策略是全局的，不具体到每个用户。 
强密码至少包含大写字母（A~Z）、小写字母（a~z）、数字（0~9）、特殊符号（如：!，$，#，%等）4类中的2种类型。 
密码的最小长度可配置，最大长度不超过64位。 
不得使用用户名作为密码。 
#### 登录失败若干次锁定账户 
管理员可以为每个用户设置锁定功能。用户在登录时，密码输入失败，在失败若干次（失败次数可配置）后，锁定此用户，只能通过管理员解锁。 
#### 密码重复控制 
管理员可以为用户设置密码重复控制功能，同时可以设置重复控制次数。用户在重设密码时，最近N次（含N次）内用过的密码不允许重复使用（N为可配置值）。 
### 控制平面 
#### GSU备份 
为提高系统运行的安全可靠性，ZXUN uMAC的GSU提供N+M负荷分担方式。
N指在不考虑冗余下，满负荷运转的GSU数。M指的是在这基础上额外增加的冗余GSU数。所有GSU都作为主用GSU，处理用户的接入信息和数据业务。 
冗余的GSU数越多，总的GSU个数就越多，在相同局用户数下，每个GSU的负荷就越低，能承受的同时宕机的GSU数也越多。 
每个GSU的用户数据都备份在CDU上。 
当某个GSU重启时，其他GSU接替这个GSU，继续用户的业务流程，其中用户数据从CDU读取后恢复到这些GSU。 
#### OMU备份 
为提高系统运行的安全可靠性，ZXUN uMAC的OMU提供1+1主备方式，即OMU成对（1主1备）设置，主用OMU上的用户数据同步到备用OMU进行备份，当主用OMU异常时，备用OMU将接替主用OMU进行工作，原主用OMU异常恢复后，将作为新的备用OMU。
### 数据平面 
#### USUP备份 
为提高系统运行的安全可靠性，ZXUN uMAC的USUP模块采用互相备份方式，即USUP模块在处理各自业务的同时也作为其他USUP模块的备份；当其中一个USUP模块异常时，其业务将会倒换到其他USUP模块。原模块恢复正常后，相应业务也会倒回。
 说明： 
USUP模块仅用于SGSN网元。
### 安全维护 
摘要为保证系统正常运行时的安全，需要对系统进行定时检测和例行检查。 
#### 控制节点和计算节点的例行检查 
检查控制节点和计算节点的服务状态是否一致、正确。 
检查虚拟机运行状态是否正常。 
检查物理机是否异常复位过。 
检查控制节点和计算节点的CPU利用率、内存利用率、本地磁盘空间使用率是否有异常情况。 
检查是否存在AMQP通信阻塞。 
#### 网络的例行检查 
检查IP可达性（IP地址包括控制节点、计算节点和磁阵这三者之间的管理口地址、数据口地址、虚拟机内业务地址）。 
检查控制节点、计算节点的所有网口中是否有状态为down的。 
检查每个计算节点的子接口数量是否超过了63。 
#### 数据库的例行检查 
检查数据库定时备份功能是否正常。 
检查数据库使用的磁盘空间。 
检查mysqld服务状态。 
检查数据库连接情况。 
检查数据库I/O情况。 
检查数据库日志大小（数据库日志路径：/var/log/mariadb/mariadb.log）。 
#### HA集群软件的例行检查 
检查是否有资源失败。 
检查/var/log/cluster/目录下的日志是否占用了过大的空间（正常情况下所有日志总和应不超过300 MB）。 
检查/var/lib/corosync目录所在的磁盘空间是否足够（剩余磁盘空间应大于300 MB）。 
检查corosync的运行情况：corosync进程是否正常运行、corosync进程的CPU占用率是否过高。 
### 应急处理 
#### 应急处理流程 
中兴通讯PSIRT是负责接收、处理和披露中兴通讯产品和解决方案与安全相关漏洞的应急响应组织，是中兴通讯披露漏洞信息的唯一出口。中兴通讯PSIRT的职责还包括响应和处理客户提交的安全事件、响应和处理行业协会公布的安全事件、制定公司信息安全事件管理策略和安全事件处理方案、分析系统软件提供商和专业安全厂商发布的漏洞及补丁。 
中兴通讯PSIRT工作流程如[图1](#Auto_concept__%E4%B8%AD%E5%85%B4%E9%80%9A%E8%AE%AFPSIRT%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-48757A1F)所示。
图1  中兴通讯PSIRT工作流程
[]images/img-0012739160.png)
#### 联系方式 
中兴通讯PSIRT电子邮箱地址：psirt@zte.com.cn 
## 缩略语 
## 缩略语 
### AMQP 
Advanced Message Queuing Protocol高级消息队列协议
### CPU 
Central Processing Unit中央处理器
### GSU 
General Service Unit通用业务单元
### I/O 
Input/Output输入/输出
### IP 
Internet Protocol因特网协议
### OMM 
Operation & Maintenance Module操作维护模块
### OMU 
Operation & Management Unit操作管理单元
### USUP 
Universal Service User plane Processor通用业务用户面处理模块
### vGSU 
Virtualized General Service Unit虚拟化通用业务子单元
## 配置管理描述 
### 配置管理概述 
配置管理提供了对NF正常运行所需数据进行管理的功能。
#### 配置数据的组成 
##### 数据配置的定义 
数据配置是指制作能够使通信设备正常运行的数据，并将这些数据设定到通信设备的一种操作。 
NF提供增加、删除、修改、查询、存储、备份、恢复等操作手段，可对NF运行的各种数据（如信令数据、号码分析数据）进行有效的管理和维护。
##### 配置数据的类别 
NF的配置数据包括基础数据、对接数据、业务数据。 
基础数据基础数据是NF配置数据的基础，主要用于定义全局性的NF数据。基础数据的配置使得NF具备软件逻辑，从而能作为网络实体提供通信服务。基础数据所定义的参数包括本局信令地址等，这些关键参数在后续的数据配置过程中将被多次引用。由于受到数据库存储过程的限制，一旦操作员通过数据配置命令创建这些关键参数，其在后续的数据配置过程中就不能随意地删除或修改这些关键参数。操作员应十分重视基础数据的规划，便于操作员对配置数据的管理与维护，也便于将来系统扩容或软件升级时操作员对配置数据库进行扩展。 
对接数据对接数据是NF配置数据的重要组成部分，用于定义本NF在与其他NF对接时信令、协议等密切相关的数据，如SCTP数据、M3UA数据、SCCP数据，根据本NF功能不同，对接的NF类型也不相同。配置对接数据是运营商通过NF开展各种业务的必要前提，但由于系统组网的复杂性，各种组网条件下的对接数据的配置过程也各不相同。为了降低数据配置的复杂度，建议操作员在配置对接数据之前，按照组网功能（或用途）将复杂的系统组网分解为多个相对独立的组网单元，再执行对接数据配置操作。 
业务数据配置业务数据是运营商通过NF开展各种业务、实现各种功能的最终体现，也是操作员在日常维护中需要经常操作的内容。 
#### 配置数据的应用场景 
NF数据配置的主要场景包括：
开局阶段的初始配置：配置数据为空，需要进行全局性的数据配置。在开局时，经过硬件安装、软件安装等一系列工程实施与交付流程之后，需要进行初始数据配置，从而激活系统业务。 
维护阶段的调整配置：由于网络参数改变（如新增NF、链路等），需要增加或修改局部数据。设备正式入网运行后，在日常维护过程中，当系统资源不足，链路数太少或者负荷、局向路由不均衡时，需要进行配置调整的操作。 
#### 配置数据的配置方式 


##### MML命令配置和脚本文件配置 
根据操作员在执行配置数据时的操作类型，NF的数据配置方式分为：

 
MML命令配置也称为逐条配置，此种方式是指在MML命令界面上依次对每一条命令进行配置。这是一种最通用的配置方式，所有的配置数据都可以通过这种方式完成。 

 
脚本文件配置也称为脚本配置，此种方式是将配置数据做成脚本文件，操作员只需执行这些脚本文件就可以完成数据配置。 

 


##### 在线配置和离线配置 
根据配置数据是否能即时生效，NF的数据配置方式分为： 

 
在线配置是指数据立即下发的配置方式。此种方式的配置过程是EM和NF实时交互的过程，配置数据即时生效。 

 
离线配置是指数据在EM下发到NF暂不生效，EM下发同步命令后批量生效的配置方式。通过此种方式配置的数据，需要将数据从NF-OAM数据库下发到NFS-OAM内存数据库后才能生效。 

 


#### 配置数据库简介 
##### 定义 
NF采用关系型数据库对系统的各种数据进行管理，整个数据库由多张具有一定内在联系的数据表组成，每张数据表描述一组特定的数据，各数据表之间通过特定的关键字段进行索引和被索引。
##### 数据库类型 
按照存储位置的不同，NF的数据库分为NFS-OAM内存数据库与NF-OAM数据库两大部分。
NFS-OAM内存数据库NFS-OAM内存数据库是指在NF各NFS-OAM内存区的数据库，主要用于存储与业务处理密切相关的数据。操作员在EM的命令窗口执行配置命令增加、删除、修改数据后，NFS-OAM内存数据库中的在线配置部分会同步更新，离线配置部分需要同步后更新。 
NF-OAM数据库NF-OAM数据库是指NF-OAM上的PostgreSQL数据库，基于中兴通讯公司的CGSL操作系统，主要用于存储支撑NF运行的相关数据信息。运行数据存放在PostgreSQL数据库中，如图1所示。图1  NF-OAM数据库 
##### 数据库管理功能 
NF的数据配置和数据库管理功能包括： 
提供增加、删除、修改、查询、存储、备份、恢复等数据库操作手段。 
可对系统运行的各种数据（如硬件数据、信令数据、路由数据、号码分析数据、移动业务数据等）进行有效的管理和维护。 
支持离线和在线配置数据。 
支持近端配置和远程配置。 
支持数据在线升级功能。 
支持配置回退功能。 
支持数据校验功能。 
#### 配置数据的操作 
##### MML命令配置 
使用MML命令配置数据时，通常选择在线配置方式，操作步骤如下： 
从EM客户端登录到NF的EM服务器。
在命令终端的命令输入区域框中，输入MML命令（以[SHOW NF](../../Commons_TMSP\zh-cn\mml\1242300.html)为例进行说明），如[图1](#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E7%9A%84%E6%93%8D%E4%BD%9C-A61B413C__SETDNSGLB%E5%91%BD%E4%BB%A4-A63DBA42)所示。
图1  SHOW NF命令
[]images/SET%20DNS%20GLB%E5%91%BD%E4%BB%A4(%E9%87%8D%E7%94%A81).png)
单击执行按钮。
##### 脚本文件配置 
脚本文件也称为批命令处理文件，是一个文本格式的文件（后缀名为.txt）。
 说明： 
在新开局时，建议操作员采用脚本文件配置方式。导入的脚本不能超过10000行，否则会超过批处理上限。 
脚本文件配置的操作步骤如下： 
从EM客户端登录到NF的EM服务器。 
选择命令终端的命令批处理节点，如[图2](#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E7%9A%84%E6%93%8D%E4%BD%9C-A61B413C__%E5%91%BD%E4%BB%A4%E6%89%B9%E5%A4%84%E7%90%86%E7%AA%97%E5%8F%A3-A6952DF3)所示。
图2  命令批处理窗口
[]images/%E5%91%BD%E4%BB%A4%E6%89%B9%E5%A4%84%E7%90%86%E7%AA%97%E5%8F%A3(%E9%87%8D%E7%94%A81).png)
在工具栏中，单击导入按钮，选择要执行的数据脚本*.txt文件。
单击执行按钮。执行过程中，若发现数据脚本文件中的MML命令、参数等有错误，系统将弹出窗口提示，并询问是否继续执行。
数据脚本文件执行完成后，会显示执行成功和失败的MML命令数目。 
### 配置管理原理 


配置管理的具体过程是指系统接收EM客户端发起的配置请求，对其中包含的配置数据进行有效性检查，将正确的配置数据保存在NF的数据库（NF-OAM和NFS-OAM数据库）中，同时将执行的结果返回给EM客户端。


#### 软件结构 
##### OAM子系统简介 
OAM是操作、管理和维护子系统，为运营商提供投入运行的交换系统所需做的各种配置，其目的是为了保证系统能够正常运转，以便向用户提供良好的电信服务。
OAM子系统的主要功能包括提供配置管理接入功能、对配置数据进行解析。 
NF的配置管理功能由NF软件系统中OAM子系统的配置管理模块实现。
##### OAM子系统的软件结构 
OAM系统作为唯一和EM有接口关系的子系统：
接收NF管理层的监控命令并进行处理。 
执行对单个NF的管理职能。 
在NF上电初始化阶段对虚拟机进行版本加载、配置处理。 
正常运行状态下负责监控整个NF的故障、性能状况，并提供必要的本地维护手段。 
OAM子系统的软件结构如[图1](#%E8%BD%AF%E4%BB%B6%E7%BB%93%E6%9E%84-A61B6194__OAM%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%BB%93%E6%9E%84-A6962E3C)所示，配置管理模块位于OAM子系统的服务层（即NF-OAM和NFS-OAM服务端）。
图1  OAM子系统的软件结构
[]images/OAM%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%BB%93%E6%9E%84.png)
OAM子系统分为CN-OAM（OAM接入适配层）、NF-OAM和NFS-OAM三层。EM通过OAM接入适配层与各个NF-OAM应用模块（例如配置管理模块）进行交互，再通过OAM应用模块与各NFS-OAM交互，以实现网管功能。
OAM子系统接收EM发来的控制命令，通过与其他软件子系统的接口完成所要求的动作，具体流程如下： 
EM通过管理接入通道将配置数据请求转发给OAM子系统。 
由CN-OAM对其进行解析和适配，将其转换为内部消息结构，并根据配置数据的类型和应用，转发给相关的应用（指各个NF-OAM）。 
NF-OAM进行相关的有效性检查后，将各配置数据写入NF-OAM数据库。 
成功写入数据库后，由数据库负责分发，并由数据库负责到NFS-OAM内存数据库的数据同步。 
##### OAM子系统的特点 
OAM子系统主要以下特点： 
提供了多种标准接口，如Telnet/SSH、REST、NETCONF，同时还提供中兴私有接口，即采用支持自解析的TLV格式，很大程度上减少了NF版本和网管版本的耦合性，同时方便了第三方网管的接入，提高了可扩展性。其中，配置管理接入功能支持以下三种接入方式：本地维护终端（即OAM客户端）接入OAM客户端作为TCP/IP协议中的客户端与CN-OAM相连，支持通过Telnet、MML命令，实现对NF的数据配置、日常操作和维护管理功能。EM接入NetNumen U31是中兴通讯公司开发的统一网管系统，实现对移动网络不同NF的集中管理。EM与NF之间采用标准的REST/SNMP协议进行通信。第三方网管接入第三方网管通过中兴私有接口进入运营商内部网络，进行远程维护。 说明：中兴私有接口是中兴通讯公司自主开发的私有接口，现网中很少使用，后续不再介绍此种接口。 
对内部各子系统，提供了通用的各网管功能接入通道，优化内部结构，合理分工，降低了与各子系统应用的耦合性，增强兼容性。 
##### 配置管理流程 
配置管理通常使用REST和Telnet/SSH方式，如[图2](#%E8%BD%AF%E4%BB%B6%E7%BB%93%E6%9E%84-A61B6194__%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E6%B5%81%E7%A8%8B-A697266E)所示。
图2  配置管理流程
[]images/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E6%B5%81%E7%A8%8B.png)
配置管理支持对配置数据在NF各节点间的同步、对NFS-OAM的分发、以及对配置数据的加载和存储，各模块分工如下： 
HTTP服务端主要负责接收EM网管的配置请求并将其转发给配置命令处理模块，以及对命令数据的加载和存储。 
TELNET/SSH服务端主要负责接收TELNET/SSH客户端的配置MML并将其转发给配置命令处理模块，以及对命令数据的加载和存储。 
配置命令处理模块负责对命令的有效性进行检查，并辅助命令数据的存储。 
配置分发同步模块负责数据到各NFS-OAM内存数据库的分发、同步。 
#### 数据存储机制 
##### 数据存储格式 
NF支持使用两种文件格式存储配置数据。
ZDB方式：ZTE私有数据库格式，文件名以.zdb为后缀。 
TXT方式：文本格式，文件名以.txt为后缀，通常用于保存协议栈的配置数据。 
不同的配置数据支持的存储方式不同，其中协议栈配置数据只能存储为.txt文件，其他配置数据一般保存为.zdb文件。
##### 数据存储分类 
NF既支持对全局数据进行存储，同时也支持对数据分模块进行存储，详细情况参见[表1](#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%9C%BA%E5%88%B6-A61B6875__%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F-A698843A)。
存储类型|支持方式|流程
---|---|---
全局存储|支持ZDB和TXT两种方式|若以ZDB方式进行存储，先对协议栈数据以TXT方式进行存储，再以ZDB方式对其他配置数据进行存储。若以TXT方式进行存储，则直接存储。
分NFS存储|只支持ZDB方式|非协议栈数据，以ZDB方式对配置数据进行存储。
#### 数据加载机制 
##### 定义 
加载，是指从外部存储器向NFS的内存数据库加载软件与配置数据的过程。
##### 加载方式 
根据加载源文件存储位置和加载的文件的不同，系统数据加载的方式如[图1](#%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6-A61B6D7E__%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F-A69908F2)所示。
图1  数据加载方式
[]images/%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F.png)
根据加载源文件存储位置的不同，可将加载分为以下两种主要方式： 
从NF-OAM数据库向主机（虚拟机）的内存加载软件与数据，此时，加载所需要的源数据全部存储在NF-OAM数据库上。 
从各虚拟机自身的本地存储介质向其内存加载软件与数据，此时，加载所需要的源文件存储在主机各虚拟机自身的本地存储介质中。 
##### 加载数据类型 
加载的数据类型分为ZDB和TXT两种，不同的配置数据使用的文件类型不同：
协议栈的配置数据是从.txt文件中加载的。 
其它NFS的配置数据从.zdb文件中加载的。 
#### 数据同步机制 
##### 同步说明 
配置数据包括离线配置数据和在线配置数据： 
对于在线配置数据，无需同步，所配置的数据立即生效。 
对于离线配置数据，需要执行数据同步操作，数据才能生效。 
 说明： 
NF中有些数据只支持在线配置方式。
##### 离线数据生效流程 
离线数据生效的流程如下： 
NF-OAM层的配置Manager生成配置数据.xml文件。
NF-OAM将配置数据.xml文件上传在FTP服务器指定目录下。
NF-OAM层的配置Manager发送请求消息给“配置分发同步”模块，完成指定目录下文件的分发和加载工作，并触发存盘、分发、通知流程。
### 配置数据的管理机制 
#### 数据传送与回退 
##### 数据传送 
数据传送是指操作员将NF-OAM存储的相关配置数据下发到NFS-OAM的内存数据库中，保证操作员在NF-OAM上修改的配置数据能够在NFS生效。
在EM上进行数据配置时，无论是进行增加、修改还是删除操作，数据都以数据表的形式实时保存到NF-OAM数据库上，对于离线配置数据，NFS内存数据并没有做相应的修改，只有在操作员执行数据同步命令后，才会将配置的数据表传送到NFS-OAM的内存数据库中。
数据传送有两种方式： 
传送全部表一般在开局时，全部数据设置完后进行。 
传送变化表一般在单步操作设置完成后进行。 
数据传送包括管理员数据传送（[SYNA](../../OAM\zh-CN\mml\1850234.html)命令）和当前登录用户数据传送（SYN命令）两种情况：
管理员数据传送：当前登录用户是admin时，才可以使用这条命令，使用此条命令将传送所有用户（包括admin用户）修改的数据。 
当前登录用户数据传送：使用此条命令仅仅传送当前登录用户修改的数据。其他用户修改的数据不会被传送。 
##### 数据回退 
数据回退是指操作员将已经在NF-OAM配置，但还未执行数据传送命令时，可通过[UNDO DATA](../../OAM\zh-CN\mml\1850280.html)命令将变化数据进行回退的操作。
配置回退功能保证了数据的安全性，防止人为操作失误，同时还提高了NF的可维护性。 
#### 数据备份与恢复 
##### 目的 
为了提高系统数据的可靠性和安全性，通常需要在系统完成首次配置后或进行重要配置变更前，对配置数据进行备份。 
若系统数据库发生意外损坏后，则采用备份数据进行恢复，若未对配置数据采取备份，可能导致数据丢失，对运营商的业务造成影响。 
##### 数据备份 
数据备份是指将NF-OAM的配置数据备份到磁盘中。 
NF使用备份管理机制如[图1](#%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D-A61BA0B6__%E5%A4%87%E4%BB%BD%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6-A69B5578)所示。
图1  备份管理机制
[]images/%E5%A4%87%E4%BB%BD%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6.png)
备份任务操作员通过EM可以定制备份任务。一个备份任务可以包含一个或多个备份对象。 
备份对象系统各功能模块需要备份的数据库表或文件。 
 说明： 
NF支持手工备份和自动备份两种机制，通常情况下，对配置数据一般使用自动备份；当修改重要的数据时可以进行手工备份。 
##### 数据恢复 
数据恢复是指当系统崩溃、用户误操作、系统升级失败等情况下，将配置数据从磁盘恢复到NF-OAM数据库中，能够及时将系统恢复到可用状态。 
 说明： 
NF只支持手工恢复。 
## 缩略语 
## 缩略语 
### CGSL 
Carrier Grade Server Linux电信级服务器Linux
### CN 
Core Network核心网
### EM 
Element Management网元管理
### FTP 
File Transfer Protocol文件传输协议
### HTTP 
Hypertext Transfer Protocol超文本传输协议
### IP 
Internet Protocol因特网协议
### M3UA 
MTP3-User Adaptation layer protocolMTP第三层的用户适配层协议
### MML 
Man Machine Language人机语言
### NF 
Network Function网络功能
### NFS 
Network Function Service网络功能服务
### OAM 
Operation, Administration and Maintenance操作管理维护
### REST 
Representational State Transfer表述性状态转移
### SCCP 
Signaling Connection Control Part信号连接控制部分
### SCTP 
Stream Control Transmission Protocol流控制传输协议
### SNMP 
Simple Network Management Protocol简单网络管理协议
### SSH 
Secure Shell安全外壳
### TCP 
Transmission Control Protocol传输控制协议
### TLV 
Tag, Length, Value标记、长度、取值
### ZDB 
ZIP Database压缩数据库
## 性能管理描述 
### 基本概念 
#### 概念关系 
性能统计的核心是性能统计任务和测量结果，通过为指定的测量对象设置测量任务，输出测量结果，这是性能统计的基本过程。 
性能统计包括测量对象、测量任务、性能计算指标、性能门限、计数器等概念，这些基本概念之间的关系如[图1](#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-BD8FA54D__%E6%80%A7%E8%83%BD%E7%BB%9F%E8%AE%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%85%B3%E7%B3%BB-54045DA6)所示。
图1  性能统计基本概念关系
[]images/img-0012550829.png)
在性能统计中，统计测量的主体核心为测量任务。 
#### 测量对象类型 
测量对象类型是指具有相同属性的测量对象的类型，例如Diameter链路、路由区。 
#### 测量对象 
测量对象是指具体被测量的物理实体和逻辑实体，如整个网元、某个域、某个跟踪区。 
#### 测量类型 
测量类型可以实现对测量对象的不同指标的测量，不同的测量对象下有不同的测量类型。 
#### 性能计数器 
性能计数器指测量类型中所包含的具体测量指标，是性能测量的基本单元。每一种测量类型中包含若干计数器。一个计数器可以通过如下几个部分来描述。 
计数器ID：性能计数器的唯一标识，与性能管理窗口中显示的一致。如果某项计数器的ID后标注了EMS，表示此计数器在EMS上显示为计数器，在OMM客户端上显示为预定义计算指标。 
计数器描述：对性能计数器的解释。 
测量触发点：描述性能计数器的触发过程。 
采集方式：计数器采集数据所使用的方式，其取值参见表1。表1  采集方式取值名称说明CC累积计数器累积计数器跟踪统计粒度内某事件的累积变化量，且计数器值单向累加，在每个采集周期开始时，计数器将被重置为一个预先定义的值（通常为0）；在采集周期结束时计数器的值即为有效的采集结果。Gauge测量计数器测量计数器跟踪的事件数据在时间上是连续变化的，且可以双向改变（即可增加或减少）。在采集周期结束时读出的变量的值即为有效的采集结果。Sample采样计数器采样计数器根据每次上报事件数据替换计数器中的原有数据，在统计粒度周期结束时上报的结果为最近一次上报事件数据。TA时间平均计数器时间平均计数器一般每隔十秒采样连续变化事件数据值，统计粒度结束时计算并上报所有十秒数据的平均值。Max最大值计数器最大值计数器一般每隔十秒获取事件数据（该数据可能是连续事件数据的采样值，也有可能是十秒内的数据的变化值），且计数器中仅仅保存最大结果。该类型计数器上报的数据是某模块或某单元在统计周期内的最大值。Peak峰值计数器峰值计数器采用峰值算法计算整个网元内某事件的峰值数据。SIMax状态检查最大值计数器被测网元中保存着一些用于资源管理目的的内部计数器，并按照预定的采样 频率不断地读取这些计数器。状态检查的测量值在每个采集周期开始时要重置；在采集周期结束时，根据该周期内所有的采样值计算出一个有效的采集结果。SIMax用在最大值场合。SIMin状态检查最小值计数器被测网元中保存着一些用于资源管理目的的内部计数器，并按照预定的采样 频率不断地读取这些计数器。状态检查的测量值在每个采集周期开始时要重置；在采集周期结束时，根据该周期内所有的采样值计算出一个有效的采集结果。SIMin用在最小值场合。SIMean状态检查平均值计数器被测网元中保存着一些用于资源管理目的的内部计数器，并按照预定的采样 频率不断地读取这些计数器。状态检查的测量值在每个采集周期开始时要重置；在采集周期结束时，根据该周期内所有的采样值计算出一个有效的采集结果。SIMean用在平均值场合。 
#### 性能指标 
性能指标（KPI）可以作为评价网络运行稳定性及安全性的依据。
KPI是维护人员基于性能计数器通过四则运算而定制的一种复合型计数器，包括用户自定义和系统定义两类。
用户自定义KPI由维护人员根据系统现有的计数器，并自行定义四则运算公式在OMM客户端上创建的。在创建完自定义KPI后，维护人员可以对其进行查看、修改、删除等操作。 
系统定义KPI是由系统自行创建的，维护人员可以通过OMM客户端进行查看，但不允许修改和删除。 
#### 采集粒度 
采集粒度是指网管系统对性能数据进行采集的周期。系统可以设置多种采集粒度，例如5分钟、15分钟、30分钟、1小时。 
#### 查询粒度 
查询粒度是指查询测量任务数据的统计周期。维护人员可以设置的查询粒度为5分钟、
15分钟、30分钟、1小时、1天。 
 说明： 
查询粒度必须大于或等于对应测量任务中设置的采集粒度。 
#### 性能测量任务 
性能测量任务定义了性能数据的收集、存储和传输方式以及最终数据的展示结果和处理方法。 
一个性能测量任务规定了何时、对哪个测量对象类型的具体指标、以何种周期采集何种类别的性能数据。 
维护人员通过OMM客户端创建性能测量任务，系统根据任务设定的运行周期自动采集指定的性能参数，得出网络性能的统计结果，使维护人员及时了解网络的运行状态。
#### 性能门限任务 
性能管理提供的性能QoS任务通常称为性能门限任务，QoS是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。当网络过载或拥塞时，QoS能确保重要业务不受延迟或丢弃，以便保证网络的高效运行。
一个性能门限任务，规定了何时、对何种性能对象类型的具体指标进行门限计算。如果计算结果超过了预设的门限值，将产生性能门限告警，并上报到告警管理系统，提醒维护人员关注系统和网络运行的异常情况。 
### 实现原理 
### 实现原理 
性能管理系统是用户进行性能测量管理的重要工具，采用B/S结构方式，不需要客户端安装软件，直接使用IE浏览器即可登录OMM服务器。性能管理网管系统提供远、近端多种接入系统方式，既可以进行本地操作维护，也可以通过网络系统进行远程操作维护；既可以维护整个系统，也可以对特定的实体进行操作维护。
ZXUN uMAC性能测量系统主要由ZXUN uMAC性能测量进程、OMM服务器和OMM客户端组成。
ZXUN uMAC性能测量进程：收集业务、设备和信令等信息，并将这些信息汇总成性能测量任务的结果，传递给OMM服务器。 
OMM服务器主要有以下功能：解析执行客户端发送来的各种操作指令，处理执行后下发任务到ZXUN uMAC， 并把ZXUN uMAC上报的结果汇总发送给OMM客户端。实现网络的管理功能、网络的代理功能、网元集中和适配功能、上级网管接入功能、FTP服务器功能等，是实现性能管理、配置管理、告警管理、网络诊断、本地维护功能的网管功能中心。满足网管的级联、集中控制、反向操作等。 
OMM客户端：提供操作平台，形成各种操作命令，发往OMM服务器。 
ZXUN uMAC系统性能管理总体流程如[图1](#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD-BEAB8C11__%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E6%B5%81%E7%A8%8B-1EE1907A)所示。
图1  性能管理流程
[]images/img-0012550832.png)
ZXUN uMAC系统的性能管理总体流程包括测量任务的创建、性能数据入库、性能数据显示以及门限值检查等流程，详细说明如下：
OMM服务器将创建的性能测量任务下发到ZXUN uMAC中。
ZXUN uMAC按性能测量任务中指定的测量粒度和其他条件上报性能数据给OMM服务器。
OMM服务端将ZXUN uMAC上报的性能数据保存到数据库中。
维护人员可以根据查询条件，在OMM客户端中查询性能数据。 
如果维护人员设置了门限任务，对某个指标设置了门限值，当ZXUN uMAC上报性能数据时，OMM服务器会启动门限值判断。如果达到门限值，则会上报相应的告警，展现在OMM客户端上。
### 应用场景 
### 应用场景 
#### 应用于日常维护 
对系统设备和话务状态等的性能统计分析结果，可以用于日常维护，便于及时发现网络异常，避免故障的升级。 
性能统计用于日常维护包括以下两个方面： 
利用性能统计结果检查网络错误。 
利用性能统计结果检查全局设备运行状况。 
以全局话务统计为例，通过这份报表可以看出ZXUN uMAC下所带的用户的话务繁忙状况，可以分析出每天的忙时状况（哪些时段是忙时），帮助运营商就是否需要扩容做决策。
另外，还可以通过一些失败原因，找出网络中存在的故障，及时发现并解决。 
#### 应用于网络监控 
性能统计结果还可用于网络监控，可及时发现网络负荷瓶颈，改善服务质量。 
性能统计应用于网络监控包括以下两个方面： 
监控各VM使用情况。 
监控网元之间的链路消息情况。 
#### 应用于网络优化 
在EPC网络的日常运行过程中，一项重要的维护工作就是网络优化，包括各类业务的观察以及会话成功建立次数等。 
通过对ZXUN uMAC进行性能统计结果分析，使网络性能在资源合理配置、经济性方面达到最佳。
### 性能管理功能 
### 性能管理功能 
性能管理系统可以对ZXUN uMAC网元的性能数据或者用户自定义的测量任务和性能指标进行监测、查询、导出以及门限告警管控，保证网元系统安全运营，为运维和性能分析提供了完整的性能数据。
#### 性能指标管理 
性能管理系统已经预先定义了一些常用的性能指标，如果维护人员在新建性能门限任务之前，判断系统定义的常用性能指标不满足需要，可自定义性能指标，用于设置任务告警门限。系统的性能指标包括关键性能指标和普通性能指标。
关键性能指标（KPI）：是基于性能对象的计数器统计，通过对一个或者多个性能对象的计数器进行加、减、乘、除运算得到用户需要的测量指标，可用于门限任务监控和历史性能数据查询等，支持的数据类型有整型、长整型、浮点、百分数以及逻辑布尔型。 
普通性能指标（PI）：类似于KPI，但是不支持门限任务监控，也不支持逻辑布尔型数据。 
系统预先定义的性能指标为系统性能指标，系统性能指标不支持修改和删除操作。维护人员可根据实际情况查看系统性能指标是否满足需求。如果不能满足需求，维护人员可以根据自己的需要，自定义所需的性能指标，灵活地考察网络运行状况。 
#### 测量任务管理 
为了采集ZXUN uMAC网元的性能数据，并通过消息的方式把采集到的性能数据发送到网管服务器，需要在性能管理系统中创建性能测量任务，以便及时获取系统运行时的性能数据。例如，创建测量任务SCTP偶联测量，用于在设置的时间范围内以一定的采集粒度获取SCTP偶联相关的性能数据。
测量任务管理提供了测量任务的创建、修改、删除、查询、任务同步以及任务运行状态监控等功能。测量任务状态具体说明参见[表1](4-%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD.html#newa3867ddd00c24f22918eb2f58633c371__%E6%B5%8B%E9%87%8F%E4%BB%BB%E5%8A%A1%E7%8A%B6%E6%80%81%E8%AF%B4%E6%98%8E%E6%BF%80%E6%B4%BB%E8%AF%A5%E6%B5%8B%E9%87%8F%E4%BB%BB%E5%8A%A1%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E5%B0%86%E4%BC%9A%E9%87%87%E9%9B%86%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E4%B8%8A%E7%9A%84%E6%8C%87%E5%AE%9A%E6%80%A7%E8%83%BD%E5%AF%B9%E8%B1%A1-CFF2346A)。
测量任务状态|说明
---|---
激活|该测量任务正在运行，将会采集指定位置上的指定性能对象在指定时间范围内的性能数据。不可进行修改、激活、删除等操作。
挂起|该测量任务暂时停止数据采集，可通过激活功能恢复数据采集。
#### 性能数据查询 
性能数据查询是ZXUN uMAC日常维护和性能监测的重要操作，维护人员可根据查询的性能数据对系统进行调整和优化。
维护人员在本地维护终端中设置查询条件，网管服务器将采集到的ZXUN uMAC性能数据从数据库中检索出，并呈现给维护人员。
ZXUN uMAC的性能管理系统支持以下几种性能数据查询。
查询统计数据维护人员可查询相关测量任务下所有测量数据，如计数器、性能指标值；也可以按时间粒度查询相关测量任务的性能数据。 
查询指标维护人员可根据指标标识、测量类型标识查询计算指标的名称、计算公式、数据类型等信息。 
查询所有门限维护人员可以查询所有计算指标的门限值，包括严重告警阈值、主要告警阈值、次要告警阈值、警告告警阈值，若当前计算指标值超过阈值时，触发相应告警。 
#### 性能数据导出 
性能管理系统支持性能查询结果的导出功能。当维护人员通过各种方式查询到性能数据时，可以通过手工的方式将查询到的性能数据导出。 
ZXUN uMAC系统通过定时任务来查询并导出性能数据。系统支持将查询结果导出为CSV、XLS、XLSX、XML、TXT等文件。系统还支持将查询结果通过电子邮件发送到指定邮箱，或通过FTP协议传送到指定的FTP服务器上。
#### 性能阈值告警 
为了方便维护人员监控网络运行状况，及时发现不合理的性能测量指标数据，性能管理系统提供性能阈值告警功能。 
阈值可以针对特定测量任务的具体测量指标进行设定。当该任务指标的测量结果高于/低于设定的阈值时，性能管理系统自动向告警系统发送测量任务指标阈值告警，以便维护人员及时对其性能指标进行关注。 
维护人员可以根据指标阈值告警信息分析测量值异常的原因并消除此类异常情况。 
ZXUN uMAC网元的性能阈值告警产生和恢复的流程如[图1](4-%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD-BEAB8C11__fig_-166-1EE7A5C7)所示。
图1  性能阈值告警产生和恢复的流程
[]images/0012551297.png)
性能阈值管理功能实现了对测试指标值的监控，如果维护人员设置了阈值任务，对某个指标设置了阈值，当数据上报时，网管服务器会启动阈值判断。如果指标值超出了阈值范围，则会上报相应的告警，展现在网管客户端上。 
性能阈值告警产生和恢复的流程说明如下： 
当测量周期到来时，ZXUN uMAC网元将测量任务中指定的性能数据上报给网管服务器。
网管服务器检查是否设置了该测量周期指标阈值。 
如果设置了阈值，网管服务器将网元上报的性能数据与设定的阈值进行比对。 
网管服务器判断网元的性能指标值是否达到了告警触发/恢复条件。 
如果ZXUN uMAC网元性能指标值已经达到了告警触发/恢复条件，网管服务器继续检查当前的系统中是否已经存在该指标的阈值告警。
存在该指标的阈值告警：更新相应的告警信息。 
不存在该指标的阈值告警：结束流程。 
如果ZXUN uMAC网元性能指标值已经达到了告警触发条件，且当前系统中不存在该指标的阈值告警，则产生对应的阈值告警；如果ZXUN uMAC网元性能指标值已经达到了告警恢复条件，且当前系统中已存在该指标的阈值告警，则恢复对应的阈值告警。
## 缩略语 
## 缩略语 
### B/S 
Browser/Server浏览器和服务器结构
### EMS 
Element Management System网元管理系统
### FTP 
File Transfer Protocol文件传输协议
### IE 
Internet Explorer因特网浏览器
### KPI 
Key Performance Index关键性能指标
### OMM 
Operation and Maintenance Management操作维护管理
### PI 
Performance Index性能指标
### QoS 
Quality of Service服务质量
### SCTP 
Stream Control Transmission Protocol流控制传输协议
## 告警管理描述 
### 告警管理概述 
告警管理是故障管理系统的重要组成部分。通过告警监控、告警统计、告警查询等功能，对ZXUN uMAC运行情况进行监测、隔离和校正。
告警管理可以对系统或网络中的事件进行监控和管理，并将产生的告警信息呈现在网管客户端中，或者将告警以声、光或者告警箱等方式呈现给维护人员，用于故障定位和故障修复。 
### 告警管理原理 
ZXUN uMAC告警管理的系统原理如[图1](#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86%E5%8E%9F%E7%90%86-EE556AD9__%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86-EE55D3AF)所示。
图1  告警管理的系统原理
[]images/img-0012959519.png)
告警上报和呈现的过程如下： 
ZXUN uMAC维护人员可以通过本地维护终端的告警监控功能，对ZXUN uMAC产生的告警进行实时监控。
当ZXUN uMAC设备（含烟雾、温湿、 红外等传感器）收集告警，并产生告警事件，实时上报给OMM服务器。
OMM服务器对网元上报的告警进行处理，并储存在自身的数据库中。
OMM服务器对上报的告警通过以下方式进行告警展现。
OMM服务器可以将当前的告警信息集中呈现在本地维护终端上。 
OMM服务器控制告警箱，以声、光、短消息和文件传输等多种形式，提示当前系统运行中的故障情况。 
维护人员可以在本地维护终端上查看当前告警和历史告警，并能完成各种告警处理的功能。 
### 告警状态 
### 告警状态 
#### 告警状态分类 
告警共有如下几种状态： 
未确认未清除 
已确认未清除 
未确认已清除 
已确认已清除 
其中，未确认未清除和已确认未清除状态的告警被称为当前告警；未确认已清除和已确认已清除状态的告警被称为历史告警。
#### 告警状态转换 
告警状态转换关系如[图1](#%E5%91%8A%E8%AD%A6%E7%8A%B6%E6%80%81-EF7B80FD__%E5%91%8A%E8%AD%A6%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2-EF7BA74D)所示。
图1  告警状态转换
[]images/img-0012959532.png)
确认/反确认告警确认告警，表示维护人员正在处理该告警。告警被确认后，由未确认状态变成已确认状态。维护人员也可以通过反确认操作，将已确认状态的告警重新变成未确认告警。 
清除告警当故障恢复后，告警会由未清除状态变为已清除状态，该告警变为历史告警，被记录进告警数据库中。 
### 告警和通知 
#### 告警 
告警是对被管理网元以及网管本身在运行过程中发生的异常情况进行报告，提醒维护人员进行相应的告警处理。 
告警信息是指ZXUN uMAC系统运行过程中出现问题或故障时的异常信息，会实时通过告警管理系统显示出来。
告警信息一般会持续一段时间，在告警对应的问题或故障解决后，系统会返回相应的告警恢复消息，告警信息才会消失。 
#### 通知 
通知是对被管理网元以及网管本身在运行中的一些操作或异常信息进行提示，以便维护人员及时掌握系统的运行状况。 
通知信息是指ZXUN uMAC系统在运行中出现的不可重复的或瞬时的提示信息，会实时通过告警管理系统显示出来，维护人员可以通过该信息掌握系统各部分的运行状态。
#### 告警和通知的区别 
告警信息是ZXUN uMAC系统运行过程中出现问题或故障时的异常信息；通知信息是ZXUN uMAC系统运行过程中正常的系统运行信息或者瞬时的异常提示信息。 
告警通常由异常或故障引起，必须要处理，否则可能会影响业务；通知通常是一些提示信息，不一定会影响业务。 
维护人员可以对告警进行确认和清除操作；维护人员不可以对通知进行确认和清除操作。 
已发生的告警或者问题恢复正常时，该告警信息就会变成历史告警。如果某通知对应的现象存在，则通知消息会不断上报；当该通知对应的现象不存在时，则通知消息停止上报。 
### 消除告警的一般流程 
#### 描述 
当通过告警箱或者本地维护终端的告警系统查看到告警信息时，需要采取适当的措施对系统进行维护，以消除告警。 
#### 步骤 
消除告警的一般流程如下： 
明确此告警的告警码、告警级别、描述以及涉及的网元部件。 
判断此告警产生的原因以及系统影响。 
根据步骤1、2的要点，作出消除此告警的处理方法。 
对此告警进行处理结果判断。 
### 告警处理介绍 
### 告警处理介绍 
#### 告警处理总述 
告警处理相关信息包括告警码、告警名称、告警描述、告警属性、可能原因、处理意见等。本文将对这些告警处理相关信息进行逐一介绍，从而帮助ZXUN uMAC维护人员更好地了解和针对性地处理网元告警。
#### 告警码 
告警系统为每个告警定义了一个告警码，用于区分告警的标识。告警码最多由32
bits的字段定义，表示具体的告警码码值。 
#### 告警名称 
告警名称用于简洁直观地反映故障原因、现象等内容。 
#### 告警描述 
告警描述是对具体某个告警信息的详细说明。 
#### 告警属性 
告警属性包括告警级别、告警类型和自动清除属性。 
告警级别按照对系统的影响程度，告警分为四种级别：严重、主要、次要和警告，详细说明参见表1。表1  告警级别说明告警级别级别说明严重（一级）在系统运行中出现严重错误，导致系统陷于瘫痪，并且无法自行恢复正常的故障。表示正常业务受到严重影响，需要立即修复。主要（二级）系统功能出现严重错误，严重影响系统运行和用户使用，但无需重启系统就可以恢复，或者无法自行恢复但对系统影响相对较小的故障。表示系统出现影响正常业务的迹象，需要紧急修复。次要（三级）系统功能实现出现错误，导致某些功能不能正常使用，或者系统某些功能未能实现，但对系统其他功能没有严重影响的故障。表示系统存在不影响正常业务的因素，但应采取纠正措施，以免发生更严重的故障。警告（四级）系统的重要和基本功能不受影响，只对用户使用造成轻微影响。表示系统存在潜在的或即将影响正常业务的问题，应采取措施诊断纠正，以免其转变成一个更加严重的，影响正常业务的故障。 
告警类型按告警触发条件以及对系统的影响，告警分为五种类型：通信告警、处理错误告警、服务质量告警、设备告警、环境告警，详细说明参见表2。表2  告警类型说明告警类型类型说明通信告警与信息传输过程相关的告警类型。处理错误告警与软件或进程故障相关的告警类型。服务质量告警与服务质量降级相关的告警类型。设备告警与设备故障相关的告警类型。环境告警与设备所处的环境相关的告警类型。 
确认状态显示告警信息的当前处理状态。 
#### 可能原因 
罗列出可能产生该告警的各种原因。给出告警产生原因的目的是希望通过了解告警的触发条件，及时获得排除故障的方法和预防措施，以使系统尽快恢复正常。 
#### 处理意见 
有针对性地给出能够排除告警的措施和建议。 
处理告警时需要注意的事项如下： 
操作维护人员记录下问题和故障现象后，按照本文的相关处理建议和方法，按顺序进行处理。若无特殊说明，在每一个处理步骤完成后，如果故障排除（即告警恢复），则结束告警处理；如果故障没有排除，则进入下一步骤。 
如果告警无法处理或无法恢复，请及时联系中兴通讯。 
## 缩略语 
## 缩略语 
### OMM 
Operation and Maintenance Management操作维护管理
## 隐私保护声明 
### 概述 
为充分应对全球范围内日趋严格的个人数据保护合规立法和执法工作，中兴通讯高度重视个人数据保护合规工作，严格执行个人数据保护要求，全面防控数据保护合规风险。 
中兴通讯ZXUN unified Mobile Access Controller产品（以下简称“ZXUN uMAC”）一贯坚持个人数据保护原则，在向您提供的功能中，部分功能会处理个人数据，比如手机号、邮箱等，以上功能在设计时也兼顾了个人数据保护。ZXUN uMAC的个人数据处理功能完全向您开放，本说明将帮助您充分了解ZXUN uMAC所涉及的个人数据处理功能和保护功能，更好地保护您的客户的个人数据，避免因误操作而产生意外风险。
本系统产品在设计伊始即考虑了对用户的个人数据进行处理的需求场景，通过隐私影响分析、隐私风险评估、处置方案制定落实等流程活动，遵循个人数据保护的7大原则（合法性合理性和透明性、目的限制、数据最小化、准确性、限期储存、数据完整性与保密性、可问责性），落实Privacy by Design and by Default的理念和方法，充分保障产品数据处理活动的合法合规，最终的目的是帮助您更好地保护个人数据。 
下文从产品的角色和责任、数据处理功能、数据主体权力实现、数据共享传输和披露、数据保护措施这几个方面，进一步说明是如何帮助您实现个人数据保护的。 
### 产品角色及责任 
ZXUN uMAC向您提供完全本地化的数据处理功能，中兴通讯仅提供与产品功能说明书一致的产品功能。产品功能运行的过程中，除非获得您的授权，所有数据均不会传输到中兴通讯。
中兴通讯向您交付ZXUN uMAC后，您对ZXUN uMAC有完全的控制权，您有权决定通过ZXUN uMAC以何种目的收集、处理您的用户的个人数据。我们将通过本声明向您详细阐述ZXUN uMAC的个人数据处理功能逻辑及保护措施，您应保证数据处理过程中的合规性。
### 数据处理功能 
ZXUN uMAC个人数据的业务处理服务包括：
传统网络中2G/3G/4G的SGSN/MME等业务功能。 
5GC网络中AMF服务功能。 
以上功能使用的个人数据包括：IMSI/SUPI、IMEI/IMEISV/PEI、MSISDN、IP地址以及位置。
ZXUN uMAC处理个人数据的数据存储和维护服务包括：
2G/3G/4G/5G SGSN/MME/AMF网元保存用户数据的CDB微服务，数据保存在内存中。 
以上功能需要使用的个人数据包括用户的IMSI/SUPI、MSISDN、IMEI/IMEISV/PEI、IP地址以及位置等信息。
ZXUN uMAC处理个人数据的操作与维护功能包括：
用户身份验证功能：需要使用用户名、密码、手机号。 
用户管理功能：需要使用用户全名。 
告警功能：需要使用告警内容中的IMSI、SUPI等信息。 
日志功能：需要使用日志内容中的IMSI、MSISDN、SUPI、GPSI、IMEI、IP地址、位置等信息。 
信令跟踪功能：需要使用SUPI、MSISDN、IMEI，以及消息内容中的IMSI、IMEI/PEI、MSISDN、IP地址和用户位置。 
失败观察功能：需要使用IMSI、MSISDN、SUPI、GPSI、IMEI等。 
### 数据主体权利实现 
ZXUN uMAC产品可以协助您落实数据主体权利，使用户能够控制他们的个人数据。
ZXUN uMAC提供查询动态命令，实现用户详细信息的查询。
ZXUN uMAC提供删除动态命令，删除已接入到本网元的用户。
操作维护管理的普通用户可以在ZXUN uMAC的用户管理页面查询、修改其账号信息，并删除非必填字段。
操作维护管理的管理员用户可以在ZXUN uMAC的用户管理页面查询、修改其账号信息，删除管理员账号的非必填字段。也可以查询、修改、删除普通用户的账号信息。
操作维护管理的用户可以在信令跟踪、失败观察、告警、日志页面查看和导出已记录的信息，但不支持修改、删除。 
### 数据共享、传输、披露 
ZXUN uMAC支持web页面，运营商可以通过上述方式获得需要的数据。运营商完全控制web页面的访问权限，可自行分配数据共享、传输、披露的对象，以及传输的目的地。运营商需要自行保证数据共享、传输、披露过程中的合规性。
### 数据保护措施 
ZXUN uMAC在提供个人数据处理功能的同时，也采取了一系列数据保护措施。
数据收集：
操作维护用户填写个人数据时，ZXUN uMAC提供了必填和选填选项，可以选择填写哪些个人数据字段。对于密码，ZXUN uMAC在录入时就会进行哈希处理，再进行传输。 
数据存储：
操作维护用户的密码和密钥等数据，ZXUN uMAC会对其进行加密存储。ZXUN uMAC支持本地存储和备份，可备份ZXUN uMAC数据库的所有数据。不允许操作维护用户直接访问数据库中的数据。 
数据使用：
ZXUN uMAC支持操作维护账号权限管理，管理员可基于角色分配权限。用户需要通过用户名密码的方式完成身份认证，并支持开启双因素认证。ZXUN uMAC支持记录操作日志、系统日志和安全日志，支持将日志信息发送到指定的日志服务器。 
数据传输：
ZXUN uMAC在系统内通过HTTPS的方式或者内部接口方式传输数据，对外提供HTTPS/SFTP方式进行通信。 
数据删除：
ZXUN uMAC支持操作维护用户删除账号里的非必填数据，支持管理员删除普通用户的账号信息。配置信息只有授权用户才能删除。日志数据会随存储空间或者预设时间期限自动删除。 
### 个人数据保护特色功能 
登录横幅功能。操作维护用户可以通过登录横幅功能配置您所需要的隐私政策。再次登录网管时，在登录首页中将显示隐私政策。 
个人数据保护功能。在开启个人数据保护功能License之后，ZXUN uMAC支持：在线展示脱敏。操作维护人员在线查看信令跟踪、失败观察、日志和告警时，默认查看到的数据为匿名化后的数据。在线导出脱敏。操作维护人员在线导出的信令跟踪、失败观察、日志和告警文件，默认为匿名化后的数据。 
## 系统可靠性 
### 可靠性原理 
#### 架构可靠性 
按照Cloud Native设计思想，微服务需采用无状态设计。APP的设计要基于无状态，任何状态信息或数据都需要被抽取出来，并通过后端服务的方式保存在Backing Service（数据库、缓存等）中。业务处理单元随时可以执行弹性、扩容、销毁、重生、迁移操作，在此过程中，由于状态数据通过后端数据库进行存储，可以保障业务处理不受影响，使系统实现和系统运行更富有可恢复性和敏捷的适应性。 
5GC中，各个NF采用无状态的设计思路来实现，业务逻辑上实现计算与存储分离。无状态设计示意图如下图所示。可靠性原理部分的图都放在了图1中 
图1  无状态设计示意图
[]images/image.png)
数据存储单元：负责存储状态信息和用户数据，实现计算与存储分离。 
业务处理单元：负责执行业务逻辑。当一个业务处理单元故障时，由其它业务处理单元接管业务，并从数据存储单元获取用户数据。 
负载均衡单元：负责对话务进行均衡分发。当业务处理单元在执行弹性伸缩、自愈及重生时，话务自动分发到正常的业务处理单元。 
详细系统原理，参见[架构可靠性](11.html)。
#### 部署可靠性 
5GC容灾解决方案支持网元分域部署、双DC部署、互斥部署，从而实现部署可靠性。 
分域部署：通过管理域、业务域、转发域分离的方式进行网元部署。 
双DC部署：DC内的同种类型网元组POOL，DC间保证地域容灾的可靠性。 
互斥部署：将同质的虚机部署在不同的物理机上，从而保证当某个物理机出现异常时，多个同质虚机仍能够提供服务。 
图2  部署可靠性
[]images/1651025064193.png)
详细系统原理，参见[部署可靠性](12.html)。
#### 资源可靠性 
5GC的资源包括以下两种： 
计算资源：如VM、容器、进程。 
通信资源：如Management通信平面、Service通信平面、TOR/EOR（Top of Rack/End of Row）。 
业务功能的正常运行，依赖以上资源的正常运行。而以上资源的可靠性，可通过链路检测、自愈、防脑裂等机制来保障。 
图3  资源可靠性
[]images/1651025215404.png)
详细系统原理，参见[资源可靠性](1651026336192.html)。
#### 数据可靠性 
5GC的NF按无状态设计，在当前处理流程完成后，将用户及会话上下文状态数据保存在UDSF中，由UDSF对数据进行多副本保存。当NF故障时，NF SET内的其他NF在接管故障NF的业务时可以从UDSF读取上下文状态数据并继续话务处理。NF可以共享UDSF来存储各自的非结构化数据，或者可以各自拥有自己的UDSF。 
图4  数据可靠性
[]images/1651025488980.png)
详细系统原理，参见[数据可靠性](14.html)。
#### 网络可靠性 
网络层面，NF对外的所有逻辑网络接口，都需要支持至少2个不同的物理网络平面互为备份。当其中一个物理网络平面发生故障时，另一个物理网络平面依旧能够接管所有的网络流量，保证业务不中断。
图5  网络层面
[]images/1651025835398.png)
业务层面，通过链路检测机制对周边NF进行主动探测，保证及时发现故障，自动触发容灾措施保障业务。 
图6  业务层面
[]images/1661163078969.png)
详细系统原理，参见[网络可靠性](1633966299997.html)。
#### 业务可靠性 
信令风暴是指网络中的信令负荷超出了网络的设计能力，使网络崩溃或者不可用。 
引发信令风暴的原因有很多，比如周边网元异常、网元节假日话务模型变化、热点区域话务剧增、自然灾害等。信令风暴发生后将引发一系列问题，比如链路拥塞、网元过负荷，导致网络服务能力下降，甚至整个网络无法提供服务。 
网络侧通过采取如下措施，可以避免系统瘫痪，保障业务稳定运行。 
拥塞控制，向上游网元发送过载通知。 
过载控制，优先保障高优先级业务。 
扩充虚机数量，增加业务处理能力。 
图7  业务可靠性
[]images/1651025979521.png)
详细系统原理，参见[业务可靠性](1633966441701.html)。
#### 可靠性指标 
ZXUN uMAC的可靠性指标参见下表。 
可靠性参数|指标
---|---
MTBF|≥385651.2小时
MTTR|≤1小时
可靠性|99.999%
可靠性＝MTBF / (MTBF + MTTR) × 100% = 385651.2 / (385651.2 + 1) × 100% = 99.99974% 
### 架构可靠性 
#### 概述 
ZXUN uMAC支持负荷分担、主备实例功能和无状态特性，从而实现架构可靠性。
#### 负荷分担 
负荷分担是指运行实例采用负荷分担的工作方式，即所有运行实例共同分担处理业务。当部分运行实例异常宕机时，由其余运行正常的实例共同分担处理业务，从而保证业务正常运行。 
采用N+M冗余方式，即当N个实例可以满足系统容量的业务处理时，再提供M个实例用于冗余。 
采用N+M个实例共同分担处理业务，此时系统能够承受最多M个实例的异常宕机而不影响系统处理能力。 
采用负荷分担工作方式的运行实例，全部为主用（Active）工作状态。运行实例分别运行在不同的资源之上，如不同的虚机或容器、不同的硬件服务器，以及不同的资源分区（ZONE）。当部分（小于等于M个）运行实例出现故障宕机时，其业务由其他正常运行的实例继续处理，从而能够不间断提供服务。 
采用N+M冗余的负荷分担的系统架构如[图1](#T_1604980389589__57b3135a-c78e-41bf-9657-5e12c631c04c)所示。
图1  负荷分担方式系统架构图
[]images/1621944804578.png)
上图中N=3、M=1。当任何1个运行实例故障时，其他3个运行实例继续工作，从而保证系统容量及业务处理不受影响。 
#### 主备实例 
主备实例是指运行实例采用主用和备用的工作方式，即一个主用、一个备用。正常工作状态时，主用实例提供服务，备用实例对主用实例的数据进行备份。当主用实例异常宕机或执行主备倒换命令时，备用实例转换为主用实例提供服务，从而保证业务正常运行。引入主备实例特性的目的在于提高运行实例的可靠性，从而进一步提高NF的可靠性。  
主备实例的系统架构如[图2](#T_1604980389589__5b10ad95-f0f7-4cab-8ce8-9de056b51b46)所示。
图2  主备实例系统架构图
[]images/1621944772744.png)
#### 无状态 
无状态是指微服务的无状态设计，任何状态信息或数据都需要被抽取出来，并通过后端服务的方式保存在数据库、缓存等。业务逻辑APP随时可以执行弹性、扩容、销毁、重生、迁移操作。在此过程中，由于状态数据通过后端数据库进行存储，可以保障业务处理不受影响，使系统实现和系统运行更富有可恢复性和敏捷的适应性。 

3GPP TS 23.501标准规范提出了计算和存储分离的概念，并定义了UDSF用于统一存储NF的状态数据（又称为非结构化数据），实现业务逻辑执行与状态数据分离。 
中兴通讯系列产品采用无状态的设计思路实现各个NF，业务处理逻辑实现了计算与存储分离。系统的负载均衡器（Stateless Load Balancer），也按无状态的方式负责对话务进行均衡分发，简化了业务处理，保障了业务逻辑在执行弹性伸缩、自愈及重生时，系统负荷分担可以敏捷均衡。 
NF的无状态设计如[图3](#T_1604980389589__23dadbf1-0956-408f-ab67-2d9c23d121d1)所示。
图3  无状态设计
[]images/%E6%97%A0%E7%8A%B6%E6%80%81%E8%AE%BE%E8%AE%A1.png)
#### 相关特性 
特性名称|简要说明
---|---
ZUF-76-01-002 软件无状态架构|在5G中的Stateless包含两层含义和要求：NF的无状态设计；NF的shared data layer的设计。
ZUF-76-04-006 VNFC支持N+M负荷分担冗余|运行中的服务组件包含多个运行实例，运行实例采用负荷分担工作模式支持水平扩展，保证服务组件的高可用性和自适应能力。
ZUF-76-04-005 VNFC支持1+1主备冗余|服务组件的运行实例采用Active/Standby工作模式，当Active状态的实例停止服务时，Standby状态的实例能及时接管业务，保证服务的高可用性。
### 部署可靠性 
#### 概述 
ZXUN uMAC支持网元分域部署、双DC部署、互斥部署，同时采用网卡Bond模式和网络双平面，从而实现部署可靠性。
#### 分域部署 
采用管理域、业务域、转发域分离的方式进行网元部署。 
#### 双DC部署 
网元部署在双DC内，DC内的同种类型网元组POOL，保证地域容灾的可靠性。 
#### 互斥部署 
互斥部署也称为反亲和部署，指同质的虚机部署在不同的物理机上，从而保证当某个物理机出现异常时，其他物理机的同质虚机仍能够提供服务。当前支持的反亲和组方式有： 
软反亲和：组内虚机软互斥，尽量实现每个虚机部署在不同的主机（计算节点）上。 
硬反亲和：组内虚机互斥，严格保证每个虚机部署在不同的主机（计算节点）上。 
不反亲和：不生成对应的反亲和组。 
 说明： 
同质虚机是指虚机子类型相同的虚机，类型与规格都相同，且承担相同的业务。例如处理5G业务虚机，GSU（Communication）。
#### 网卡Bond模式 
网卡配置Bond（绑定）模式是指将两个或者多个物理网卡绑定成一个虚拟逻辑网卡，从而实现本地网卡的冗余、带宽扩容和负载均衡，保证网络的可靠性。 
#### 网络双平面 
网络双平面是指NF对内与对外的所有逻辑网络接口，都需要支持至少2个不同的物理网络平面互为备份。当其中一个物理网络平面发生故障时，另一个物理网络平面依旧能够接管所有的网络流量，保证业务不中断。
网络双平面支持NF的所有网络接口，包括：内部管理面、内部业务平面以及所有的对外接口。 
#### 相关特性 
特性名称|说明
---|---
ZUF-76-02-005 虚机的反亲和部署|开启反亲和特性的VM，不会被部署在同一个主机上。虚机反亲和特性，可以避免反亲和虚机之间竞争计算资源。同时也保障主机故障时，不会导致多个业务虚机同时不可用。
### 资源可靠性 
#### 概述 
5GC的资源包括以下两种： 
计算资源：如VM、容器、进程。 
通信资源：如Management通信平面、Service通信平面、TOR/EOR（Top of Rack/End of Row）。 
业务功能的正常运行，依赖以上的资源正常运行。而以上资源的可靠性，可通过链路检测、自愈、防脑裂等机制来保障。 
#### 链路检测 
业务内部通信平面包括Management通信平面、Service通信平面。每个通信平面都有链路检测功能。业务节点会定时发送心跳保活报文给管理节点，管理节点检测出长时间未发心跳的节点，则判定为故障节点，从而触发业务迁移流程，把故障节点的业务迁移到其他正常节点，从而保证业务的可靠性。 
#### 自愈 
对于持续出现故障的业务处理节点，系统会进行节点的多级自愈。根据用户的自愈策略配置，系统依次采用重启容器、重建容器、重启虚机、重建虚机逐级上升的策略进行自愈，从而尽快恢复业务。 
#### 防脑裂 
防脑裂指主控节点采用仲裁形式，防止主控节点脑裂的发生。当主备之间无法通信，需要决定主备状态时，引入仲裁节点，辅助主备决策。 
#### 相关特性 
特性名称|说明
---|---
ZUF-76-02-003 虚机自愈|虚机因异常停止服务，VNF能够自动检测到虚机异常，并协助虚机从异常中恢复，使其重新提供服务。
### 数据可靠性 
#### 概述 
5GC的NF按无状态设计，在当前处理流程完成后，将用户及会话上下文状态数据保存在UDSF中，由UDSF对数据进行多副本保存。当NF故障时，NF
SET内的其他NF在接管故障NF的业务时可以从UDSF读取上下文状态数据并继续话务处理。NF可以共享UDSF来存储各自的非结构化数据，或者可以各自拥有自己的UDSF。
UDSF地理容灾方案是在多个地理位置部署数据节点，数据节点在不同的地理位置以站点为单位进行组织。多个站点之间相互协作，呈现为一个有机的完整的系统，对外提供稳定可靠的服务。UDSF支持的容灾方式有： 
1+1冗余存储在DC内，数据存储节点之间通过可靠的复制机制，实现用户数据的双副本存储。通过互斥组设置，用户数据的两个副本，可以存储在不同的物理机上，确保一个物理机的故障，不会影响用户数据的所有副本。 
1+1地理容灾在DC内1+1冗余存储的基础上，将用户数据存储在2个DC。每个DC的双副本存储，可以确保DC级故障不会影响数据的可靠性。 
#### 基本概念 
CDN节点UDSF数据存储和处理节点，通常是虚机中的一个容器。 
UDSF租户（Tenant）一个或两个站点的若干CDN节点的集合。在UDSF租户的每个站点内，每个CDN节点存储APP数据NF的部分数据，所有CDN节点的数据构成了APP数据NF的全部数据。租户是容灾的基本单位。 
UDSF控制中心（Control Center）负责监控所有CDN节点和UDSF租户的工作状态，确保FE的数据访问在合适的CDN节点上完成。 
主用站点（Home Site）和备用站点（Backup Site）将租户的其中一个站点设置为主用站点，另外一个站点设置为备用站点。主用站点和备用站点的设置只影响数据访问的优先级，不影响数据的访问功能。两个站点都可以提供增、删、查、改等全部数据访问操作。 
#### 应用场景 
无容灾场景
不需要地理容灾功能时，UDSF租户的节点只部署在一个站点，如[图1](#T_1604980389599__c8649993-42ed-4f94-b258-34b90f67fc5a)所示。
图1  无容灾场景
[]images/%E6%97%A0%E5%AE%B9%E7%81%BE%E5%9C%BA%E6%99%AF.png)
无容灾的UDSF租户部署，不具备地理级的可靠性，通常应用于以下场合： 
非正式商用的测试环境。 
业务不需要容灾的场景。 
APP自身具备不依赖于UDSF的容灾功能。 
1+1互备容灾场景
两个UDSF租户，每个租户的节点都部署在两个站点，并且分别将不同的站点设置为主用站点，如[图2](#T_1604980389599__d6d4c025-d377-4bd0-84f6-1cde5809f040)所示。
图2  1+1互备容灾场景
[]images/1+1%E4%BA%92%E5%A4%87%E5%AE%B9%E7%81%BE%E5%9C%BA%E6%99%AF.png)
UDSF租户1将站点1设置为主用站点，站点2设置为备用站点。 
UDSF租户2将站点2设置为主用站点，站点1设置为备用站点。 
正常情况下，站点1的FE访问租户1中站点1的节点，站点2的FE访问租户2中的站点2的节点。如果站点1发生故障，站点2的FE将访问租户1和租户2中的站点2的节点。 
#### 相关特性 
特性名称|说明
---|---
ZUF-76-01-002 软件无状态架构|采用计算和存储分离架构，系统由计算密集型的业务NF和存储密集型的数据存储型NF组成。各业务NF（包括AMF、SMF、PCF、UDM、NEF等）只负责业务逻辑处理，不存储数据。独立数据存储型的UDR和UDSF NF统一存储和管理各业务NF数据。
### 网络可靠性 
#### 概述 
各NF通过链路检测机制对周边NF进行主动探测，并在链路发生故障时，采取容灾措施保障业务，确保本NF与周边NF的网络可靠性，提高业务可靠性。 
#### 服务化接口之间的链路检测 
服务化接口之间的链路通过HTTP/2协议的PING帧进行检测，根据HTTP/2协议要求，接收方收到PING帧时，必须回送PING ACK帧。HTTP/2链接的两端都可以发起HTTP/2的PING探测。在TCP链路建立后，源NF根据配置周期性发送PING探测请求给探测的目的NF（默认30 s）。如果在下次检测请求发起之前仍未收到PING ACK，则认为本次检测失败；如果在下次检测请求发起之前收到PING ACK，则认为本次检测成功。如果当连续检测失败次数达到配置值时（默认3次），则将该链路状态设置为不可用状态。 
NF与NRF间通过PATCH心跳来进行保活。NF在NRF注册时，协商心跳定时器T1。注册成功后，NF使用PATCH方法向NRF发送消息Nnrf_NFManagement_NFUpdate_Request启动心跳探测。在心跳检测周期内，NRF返回Nnrf_NFManagement_NFUpdate_Response消息响应心跳请求，则表示NRF和NF状态都正常。如果NRF在连续多个心跳检测周期内（默认3个）未收到NF发送的心跳请求，NRF则将NF状态设置为Suspended故障态。 
#### 非服务化接口之间的链路检测 
探测方式|功能描述|探测网元
---|---|---
SCTP检测|通过SCTP偶联状态进行检测，SCTP协议通过HEARTBEAT/HEARTBEAT ACK消息机制检测对端状态及维护SCTP偶联状态。当按配置间隔发送HEARTBEAT消息而未收到ACK的次数达到最大配置次数后，则判定故障。|AMF与gNodeB之间BSF与PCF之间BSF与DRA之间
GTPc echo检测|对于使用GTP协议的接口，GTP协议通过ECHO Request/ECHO Response消息机制检测对端状态。当按配置间隔发送ECHO Request消息而未收到ECHO Response的次数达到最大配置次数后，则判定故障。|AMF与MME之间MME与SGW之间
### 业务可靠性 
#### 防控信令风暴机制 
##### 概述 
信令风暴是指网络中的信令负荷超出了网络的设计能力，导致网络拥塞甚至雪崩效应，使网络崩溃或者不可用。通过网络侧采取一定的措施，减少网络侧要处理的信令，进行信令风暴抑制，可以避免网络拥塞，化解信令风暴。 
##### 引发信令风暴的原因 
引发信令风暴的原因有很多，主要包括以下几类： 
终端及应用原因智能终端信令能力相对于普通终端极大提升。智能终端行为模式复杂化，各种异常引发信令增加。海量APP应用导致信令剧增。APP永久在线导致保活信令剧增。海量物联网终端行为趋同，特定行为（如：定时抄表）触发信令冲击。异常终端因配置错误、中毒、欠费、服务器异常等异常，对网络持续反复重发各种连接建立请求。 
特殊事件原因节假日话务剧增引发的信令风暴。体育赛事演唱会等引发特定区域的信令风暴。地震海啸台风等灾害引发的信令风暴。其他群体事件引发的信令风暴。 
网络及运营原因网络部署时信令能力考虑不足、冗余不够导致信令风暴。部分网元故障导致连锁反应。部分链路故障导致信令风暴。网络升级或业务调整时引发的信令风暴。因网络配置等原因引起网络环路。运营商定义的定时网络行为造成的信令冲击，比如零点全网用户套餐清零等。 
##### 信令风暴引发的问题 
信令风暴发生后将引发一系列问题，包括但不限于： 
部分链路拥塞该链路上用户失败率上升。该链路业务质量下降。该链路可接入用户数下降。 
部分网元过负荷或失效该网元接入能力下降或者完全失效。该网元部分用户业务质量下降，失败率上升。该网元用户掉线或者转入其他容灾网元，可造成其他网元负荷上升。 
整个网络服务能力下降业务服务质量下降，时延增加。用户业务失败率剧增。网络整体可接入用户数下降。 
网络雪崩，完全无法提供服务所属区域内用户都无法接入。整个网络完全无法提供服务。 
##### 解决信令风暴的方法 
针对信令风暴，可采用以下几类方法。 
无效信令抑制，减少不必要的信令智能识别异常信令，对异常终端进行管控，并设置合理的退出机制保证用户权益。区分业务（DNN、切片等）的拥塞控制，对部分用户进行延时处理，降低当前网络负荷，平滑业务峰谷。 
自身过载控制，保证本网元正常运行设定过载指标（CPU、数据区等核心指标）。区分业务优先级，按比例进行应答拒绝，逐步降低本网元负荷。业务拒绝时携带合适原因和退避定时器，防止发生反复请求。向上游网元发送过载通知，减少来自上游的业务量。根据部署策略启用自动弹性扩容，扩充虚机数量，增加业务处理能力，降低单虚机负荷。 
周边网元过载保护，保护周边网元正常运行通过邻接网元过载控制保护，均衡整个网络负荷，保障整个网络的稳定性。 
##### 相关特性 
分类|特性名称|说明
---|---|---
保护本网元|ZUF-76-04-007 AMF/MME/SGSN过负荷控制|CPU过负荷控制，是以CPU负荷的负载情况为判断基础，通过限制接入请求的业务量，来降低本网元或者邻接网元的负荷，避免因负荷过高导致设备异常或崩溃。
保护周边网元|ZUF-78-20-006 动态流控|动态流控功能是指MME周边网元（HSS、MSC/VLR、SGW/PGW）存在过载风险时，MME根据周边网元返回的响应消息，计算到周边网元的业务成功率，判断周边网元拥塞程度，再通过自动调节S1口接收的Attach、Inter TAU、Inter RAT TAU处理速率，从而控制向周边网元放通的业务请求数，最终达到保护周边网元的目的，并保证用户以最大的速率接入网络。
#### 周边网元故障的容灾方案 
##### 概述 
周边网元故障触发的容灾是指链路、网元故障、网络运维导致的信令处理失败而造成用户从其他可用的网元快速接入，引发大量用户短时间内重新附着而导致的节点选择和可用数据空间的问题。因此，网元需要具有可靠的探测机制检测周边网元的状态，并提供相应的容灾方案。 
##### 周边网元故障的原因 
网元故障的原因有很多，主要包括以下几类： 
网络故障 
对端节点宕机或重启电源问题或网元软件异常。 
运营原因网络升级或业务调整时引发的网络闭塞。 
##### 周边网元检测的容灾方案 
源NF|故障NF|故障检测|故障影响|容灾方案
---|---|---|---|---
AMF|SMF|服务化接口有链路探测机制。NRF心跳检测，NRF推送故障网元状态|SMF波及的用户承载无法使用|重选SMF详细容灾方案参考：ZUF-79-21-001 AMF支持SMF容灾
UDM|AMF|服务化接口有链路探测机制。NRF心跳检测，NRF推送故障网元状态|UDM重启后，UE注册信息丢失，会导致语音被叫场景下无法域选，语音被叫不通。|重选UDM详细容灾方案参考：ZUF-79-21-002 AMF支持UDM容灾
PCF|AMF|服务化接口有链路探测机制。NRF心跳检测，NRF推送故障网元状态|PCF故障时，使用本地配置策略|重选PCF详细容灾方案参考：ZUF-79-21-003 AMF支持PCF容灾
