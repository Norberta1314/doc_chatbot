动态管理 :

背景知识 


动态管理即动态数据管理，是设备维护中的一个重要组成模块，完成对网元某些关键资源（如信令链路、路由局向等）的状态查询和管理控制（如激活、去活、闭塞和解闭塞等），为整个系统的调试和系统管理提供了必要的技术手段。 




功能说明 


动态管理即动态数据管理，完成对网元某些关键资源的状态查询和管理控制。 




子主题： 






# 用户管理 
# 用户管理 


背景知识 


运维人员通过查看当前AMF接入的用户数，以及各个虚机实例上接入的用户数，可以了解当前各个虚机的负荷情况，判断虚机的用户分布是否均匀。 




功能说明 


本功能用于查看当前AMF接入的用户总数，以及各个虚机实例上接入的用户数。 




子主题： 






## 用户数统计 
## 用户数统计 


背景知识 


运维人员通过查看当前AMF接入的用户数，以及各个虚机实例上接入的用户数，可以了解当前各个虚机的负荷情况，判断虚机的用户分布是否均匀。 




功能说明 


本功能用于查看当前AMF接入的用户总数，以及各个虚机实例上接入的用户数。 




子主题： 






### 查询用户数(SHOW USER STATISTICS) 
### 查询用户数(SHOW USER STATISTICS) 


功能说明 

该命令用于查询AMF上用户数信息。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
USERSTAT|用户数统计|参数可选性: 必选参数类型: 字符串参数范围: 1-20000默认值: 0|该动态命令用于查询并显示AMF每个Communication_sc上的用户数，并汇总显示AMF上的总用户数。




命令举例 


`
查询并显示AMF每个Communication_sc上的用户数，并汇总显示AMF总用户数。
SHOW USER STATISTICS:

(No.1) : SHOW USER STATISTICS:
-----------------Namf_Communication_0_A----------------
userStatistics 
-----------------------------------5G User Statistics Per Sc-------------------------------------
-------------------------------------------------------------------------------------------------

No.  Vm_name                                     Vru_name                                nfs_version                        UserNum
[1]  ZTE_AMF_19_-VM-GSUCommonC2M40002            vru-amf-comm-0                          V7.20.30.B14_20200917              20         
[2]  ZTE_AMF_19_-VM-GSUCommonC2M40003            vru-amf-comm-0                          V7.20.30.B14_20200917              45        
Total                                                                                                                       65
-------------------------------------------------------------------------------------------------
Total Records: 1

Execute Successfully Elapsed Time:  0.069 S

` 


## 查询用户信息 
## 查询用户信息 


背景知识 


获取用户当前在系统的接入信息，包括位置、签约、激活的会话等信息，可以帮助有关人员分析用户当前状态。比如用户故障投诉时，可以通过用户获取接入信息，以便帮助定位用户故障原因。 




功能说明 


本功能用于获取用户在本AMF接入信息，比如位置、激活会话等信息。 




子主题： 






### 查询用户信息(SHOW USER INFORMATION) 
### 查询用户信息(SHOW USER INFORMATION) 


功能说明 

该命令用于查询AMF上用户的详细上下文信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
useridtype|用户ID类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|参数作用：该参数用于配置需要查询的终端的用户ID类型。修改影响：当前该值支持SUPI、GPSI类型。数据来源：本端规划。默认值：无。配置原则：支持配置SUPI、GPSI类型。
userid|用户ID|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于配置需要查询的终端的SUPI或GPSI（Subscriber Permanent Identifier，用户永久标识）。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
QUERYUSERIDINFO|用户ID类型|参数可选性: 任选参数类型: 字符串参数范围: 1-200|该参数用于显示用户ID的信息。
USERSRC|用户来源|参数可选性: 任选参数类型: 字符串参数范围: 1-200|该参数用于显示用户归属的AMF信息。
OUTPUTSUPI|SUPI|参数可选性: 任选参数类型: 字符串参数范围: 1-100|该参数用于显示用户的SUPI信息。
USERINFOPART1|-|参数可选性: 任选参数类型: 字符串参数范围: 0-9000|该参数用于显示用户上下文的第一部分信息。
PEI|PEI|参数可选性: 任选参数类型: 字符串参数范围: 1-100|该参数用于显示用户的IMEI或IMEISV信息。
USERINFOPART2|-|参数可选性: 任选参数类型: 字符串参数范围: 0-9000|该参数用于显示用户上下文的第二部分信息。
GPSI|GPSI|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于显示用户的ISDN信息。
USERINFOPART3|-|参数可选性: 任选参数类型: 字符串参数范围: 0-9000|该参数用于显示用户上下文的第三部分信息。




命令举例 


`
查询AMF上用户46011999082046的详细上下文信息。
SHOW USER INFORMATION:USERIDTYPE="USERIDTYPE_SUPI",USERID="46011999082046"

(No.1) : SHOW USER INFORMATION:USERIDTYPE="USERIDTYPE_SUPI",USERID="46011999082046"
-----------------uMAC_AMF_86/Namf_Communication_0----------------
User ID Type                                     
-------------------------------------------------
User ID Type: SUPI
User ID:      46011999082046
 
-------------------------------------------------
SUPI
user does not exist!

执行成功 耗时: 0.102 秒

` 


## 网投信息查询 
## 网投信息查询 


背景知识 


为保证网络质量和客户满意度，如果仅依靠网维人员手工处理投诉，是远不能满足生产要求的。因此，在实际网络运维工作中，对于投诉量大、手工处理繁琐的网络投诉类型，以及资深网维专家积累的投诉处理经验可以标准化、通用化的投诉类型，是由各省网投系统提供智能化支撑的。网投系统按照网元厂家提供的查询接口指令，与网元之间通过直连、API接口或经过第三方（例如指令平台等）网投接口，直接或间接向网元查询相关信息。该接口是在满足各项安全规范的前提下，针对单用户（具体来投诉的某个用户）的、不包含通信内容（比如：短信彩信的内容、语音通话的内容等）的、实时或某具体时段历史信息的查询，而非针对设备整体运行情况的网管统计类指标的查询。  




功能说明 


本功能用于获取用户在本AMF接入的网投信息，比如用户所在跟踪区等移动性信息及激活PDU等会话信息。 




子主题： 






### 网投信息查询(NETCOMPLAINT INFO QUERY) 
### 网投信息查询(NETCOMPLAINT INFO QUERY) 


功能说明 

该命令用于查询特定用户的网投信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于配置需要查询网投信息的终端的SUPI（Subscriber Permanent Identifier，用户永久标识）。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
COMPLAINTINFO|网投信息|参数可选性: 任选参数类型: 字符串参数范围: 0-9000|该参数用于显示该参数根据SUPI查询到的网投信息。




命令举例 


`
查询SUPI为460111234567890的指定用户的网投信息。
NETCOMPLAINT INFO QUERY:SUPI="460111234567890"
` 


## 用户号码查询 
## 用户号码查询 


背景知识 


获取用户号码，SUPI、GPSI、IMEI根据其中一个查询其他的两个。 




功能说明 


本功能用于获取用户号码。 




子主题： 






### 用户号码查询(SHOW USER NUMBER) 
### 用户号码查询(SHOW USER NUMBER) 


功能说明 

该命令用于查询AMF上用户的号码信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必须单选参数类型: 字符串参数范围: 5-15|该参数用于配置需要查询的终端的SUPI（Subscriber Permanent Identifier，用户永久标识）。
GPSI|GPSI|参数可选性: 必须单选参数类型: 字符串参数范围: 5-16|该参数用于配置需要查询的终端的GPSI(Generic Public Subscription Identifier, 通用公共签约标识)。
IMEI|IMEI|参数可选性: 必须单选参数类型: 字符串参数范围: 5-16|该参数用于配置需要查询的终端的IMEI( International Mobile station Equipment Identity, 国际移动设备识别码)。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
USERSRC|用户来源|参数可选性: 任选参数类型: 字符串参数范围: 1-200|该参数用于显示用户归属的AMF信息。
SUPI|SUPI|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于显示用户的SUPI信息。
GPSI|GPSI|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于显示用户的GPSI信息。
IMEI|IMEI|参数可选性: 任选参数类型: 字符串参数范围: 0-100|该参数用于显示用户的IMEI信息。




命令举例 


`
查询AMF上用户460110123456789的号码信息。
SHOW USER NUMBER:SUPI="460110123456789"

(No.1) : SHOW USER NUMBER:SUPI="460119991010001"
-----------------Namf_Communication_0----------------
SUPI
--------------
460119991010001
--------------
ISDN
--------------
460119991010001
--------------
IMEI
--------------
0000000000000000
--------------

执行成功耗时: 0.149 秒

` 


## UE无线能力管理 
## UE无线能力管理 


背景知识 


当UE接入网络时，将其无线能力信息携带给AMF。AMF保存这些信息并在后续流程中提供给NR，因此NR不必在各个流程获取这些信息，从而节省空口资源。 




功能说明 


本功能用于获取或者删除指定用户的UE无线能力信息。 




子主题： 






### 查询用户UE无线能力 
### 查询用户UE无线能力 


背景知识 


获取用户无线接入信息，可以帮助相关人员依据用户无线接入能力，定位用户故障原因。 




功能说明 


本功能用于获取指定用户的UE无线能力信息。 




子主题： 






#### 查询用户UE无线能力(SHOW UE RADIOCAPABILITY) 
#### 查询用户UE无线能力(SHOW UE RADIOCAPABILITY) 


功能说明 

该命令用于查询指定用户的UE无线能力。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于配置需要查询的终端的SUPI（Subscriber Permanent Identifier，用户永久标识）。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
UERADIOCAPABILITY|用户UE无线能力|参数可选性: 任选参数类型: 字符串参数范围: 1-16000|该参数用于显示用户的UE无线能力信息。




命令举例 


`
查询SUPI为460110123456789的UE无线能力。
SHOW UE RADIOCAPABILITY:SUPI="460110123456789"

(No.1) : SHOW UE RADIOCAPABILITY:SUPI="460110123456789"
-----------------Namf_Communication_0----------------
用户UE无线能力
-----------------
USER NOT EXIST
-----------------
记录数：1
执行成功开始时间:2021-06-01 17:27:22 耗时: 0.19 秒

` 


### 删除用户UE无线能力 
### 删除用户UE无线能力 


背景知识 


当UE接入网络时，将其无线能力信息携带给AMF。AMF保存这些信息并在后续流程中提供给NR，因此NR不必在各个流程获取这些信息，从而节省空口资源。 




功能说明 


本功能用于删除指定用户的UE无线接入能力信息，可以根据用户的SUPI或GPSI删除。 




子主题： 






#### 删除用户UE无线能力(DEL UE RADIOCAPABILITY) 
#### 删除用户UE无线能力(DEL UE RADIOCAPABILITY) 


功能说明 

该命令用于删除指定用户的UE无线能力，可以根据用户的SUPI或GPSI删除。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
type|用户标识类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUPI|该参数用于配置需要删除UE无线能力的用户标识类型。
id|用户标识|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于配置需要删除UE无线能力的用户标识。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-30|该参数用于显示本命令的操作结果。




命令举例 


`
删除SUPI为460110123456789的UE无线能力。
DEL UE RADIOCAPABILITY:TYPE="SUPI",ID="460110123456789"

(No.1) : DEL UE RADIOCAPABILITY:TYPE="SUPI",ID="460110123456789"
-----------------Namf_Communication_0----------------
操作结果 
-----------------
USER NOT EXIST   
-----------------
记录数：1
执行成功开始时间:2021-06-01 17:27:22 耗时: 0.19 秒

` 


## 清除签约用户 
## 清除签约用户 


背景知识 


终端用户注册到AMF后，AMF可以通过该命令发起网络侧去注册流程并清除终端用户数据。 




功能说明 


本功能用于触发网络侧去注册并清除用户数据。 




子主题： 






### 清除用户上下文信息(PURGE SUBSCRIBER) 
### 清除用户上下文信息(PURGE SUBSCRIBER) 


功能说明 

该命令用于AMF清除签约的终端用户。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于配置需要删除的终端的SUPI（Subscriber Permanent Identifier，用户永久标识）。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|该参数用于显示命令操作结果。




命令举例 


`
清除SUPI为460110123456789的用户的上下文信息。
PURGE SUBSCRIBER:SUPI="460110123456789"
` 


## 释放N2用户上下文 
## 释放N2用户上下文 


背景知识 


在某些测试场景中，运营商需要释放N2用户上下文。 




功能说明 


本功能用于AMF释放N2用户上下文。 




子主题： 






### 用户释放NGAP 链接，使用户进入CM-IDLE态(RELEASE N2) 
### 用户释放NGAP 链接，使用户进入CM-IDLE态(RELEASE N2) 


功能说明 

该命令用于AMF释放NGAP链接，使终端进入CM-IDLE态。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|本参数用于配置需要释放NGAP链接的终端的SUPI（Subscriber Permanent Identifier，用户永久标识）。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|本参数用于显示命令操作结果。




命令举例 


`
针对SUPI为460110123456789用户释放NGAP 链接，使用户进入CM-IDLE态。
RELEASE N2:SUPI="460110123456789"
` 


## 用户去注册 
## 用户去注册 


背景知识 


在某些测试场景中，运营商需要对指定终端进行去注册操作。 

终端用户注册到AMF后，AMF可以通过该命令发起网络侧去注册流程。 




功能说明 


该功能用于AMF对指定终端发起去注册操作。 




子主题： 






### 用户去注册(DEREG USER) 
### 用户去注册(DEREG USER) 


功能说明 

该命令用于AMF对指定终端发起去注册操作。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于设置需要进行去注册操作的终端的SUPI（Subscriber Permanent Identifier，用户永久标识），表示终端的身份信息。
DEREG_TYPE|去注册类型|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于设置AMF对终端进行去注册操作后，终端是否需要重新发起注册。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|该参数用于显示本命令的操作结果。




命令举例 


`
AMF对SUPI为460110123456789终端发起De-registration操作，且不需要终端重新注册。
DEREG USER:SUPI="460110123456789",DEREG_TYPE="No_Need_ReRegistration"
` 


## AMF重分配GUTI 
## AMF重分配GUTI 


背景知识 


在某些测试场景中，运营商需要重新分配指定终端的GUTI。 




功能说明 


本功能用于AMF重新分配指定终端的GUTI。 




子主题： 






### AMF重分配GUTI(AMF REALLOC GUTI) 
### AMF重分配GUTI(AMF REALLOC GUTI) 


功能说明 

该命令用于AMF为终端重分配5G-GUTI（5G全球唯一临时UE标识，Globally Unique Temporary UE Identity）。 

GUTI是由AMF为移动用户分配的全球唯一临时标识。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|本参数用于配置需要重新分配5G-GUTI的终端的SUPI（Subscriber Permanent Identifier，用户永久标识）。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
RST|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-3|本参数用于显示命令操作结果。




命令举例 


`
AMF为SUPI为460110123456789的终端重分配5G-GUTI。
AMF REALLOC GUTI:SUPI="460110123456789"
` 


## 用户卸载到指定AMF 
## 用户卸载到指定AMF 


背景知识 


在某些场景下，比如版本升级，需要保证测试UE能够注册到升级AMF上，以便验证升级AMF功能是否正常。但由于在AMF POOL组网方式下，同一个基站与POOL内所有AMF互联。当UE发起注册流程，若RRC层未携带5G GUTI，则基站随机选择POOL内AMF；若RRC层携带了5G GUTI，则基站将该注册请求发送到对应的AMF上。 




功能说明 


本功能用于将指定用户卸载到指定AMF上，执行动态命令后需要在操作记录中通过查看结果选项访问执行结果。 




子主题： 






### 用户卸载到指定AMF(UNLOADUSERTOSPECIFIEDAMF) 
### 用户卸载到指定AMF(UNLOADUSERTOSPECIFIEDAMF) 


功能说明 

该命令用于将指定用户卸载到指定的AMF，指定AMF由配置参数GUAMI确定。 


注意事项 

本命令执行后，用户从本AMF去注册并接入指定AMF。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于配置指定卸载到指定AMF的SUPI（Subscriber Permanent Identifier，用户永久标识）。
MCC|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|该参数用于配置MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息。
MNC|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|该参数用于配置MNC（Mobile Network Code），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中，基于MCC唯一标识一个运营商网络信息。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
REGIONID|AMF Region标识|参数可选性: 必选参数类型: 数字参数范围: 0-255|该参数用于配置特定AMF的Region标识，是特定AMF服务区域的标识，由运营商统一规划。该参数采用十进制配置。
SETID|AMF Set标识|参数可选性: 必选参数类型: 数字参数范围: 0-1024|该参数用于配置特定AMF的Set标识，是特定AMF服务区域的标识，由运营商统一规划。该参数采用十进制配置。
POINTID|AMF Point标识|参数可选性: 必选参数类型: 数字参数范围: 0-63|该参数用于配置特定AMF的Point标识，是特定AMF服务区域的标识，由运营商统一规划。该参数采用十进制配置。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-11|该参数用于显示本命令的操作结果。




命令举例 


`
AMF将SUPI为460111234567890的指定用户卸载到GUAMI为460-11-1-2-3的AMF下。
UNLOADUSERTOSPECIFIEDAMF:SUPI="460111234567890",MCC="460",MNC="11",REGIONID=1,SETID=2,POINTID=3
` 


# 局向管理 
# 局向管理 


背景知识 


为了便于调试维护和故障处理，需要查询GNB局向的实时状态。 




功能说明 


包括GNB局向总数，局向ID和局向信息。 




子主题： 






## 查询GNB局向总数 
## 查询GNB局向总数 


背景知识 


NG setup后，NG-RAN节点信息会保存在AMF中。 




功能说明 


本功能用于AMF查询GNB局向总数。 




子主题： 






### 查询GNB局向总数(SHOW GNBBUREAU NUM) 
### 查询GNB局向总数(SHOW GNBBUREAU NUM) 


功能说明 

该命令用于AMF查询gNB局向总数。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
TOTALNUM|局向总数|参数可选性: 必选参数类型: 数字|该参数表示当前接入AMF的所有gNB个数。




命令举例 


`
查询gNB局向总数。
SHOW GNBBUREAU NUM

(No.1):SHOW GNBBUREAU NUM
-----------------Namf_Communication_0_A----------------
局向总数
--------
100
--------
记录数 1
命令执行成功（耗时 0.031 秒）。

` 


## 查询GNB局向Id 
## 查询GNB局向Id 


背景知识 


NG setup后，NG-RAN节点信息会保存在AMF中。 




功能说明 


本功能用于AMF查询GNB局向ID。 




子主题： 






### 查询GNB局向Id(SHOW GNBBUREAU ID) 
### 查询GNB局向Id(SHOW GNBBUREAU ID) 


功能说明 

该命令用于AMF查询所有的gNB ID。 


注意事项 

每一次查询最多显示200条记录，当总的gNB个数大于200个时，为了查出所有gNB ID，需要进行多次查询。 

每次查询都会显示gNB的总数、当前查询数、已查询数，具体gNB ID及提示信息。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
TOTALNUM|局向总数|参数可选性: 必选参数类型: 数字|该参数表示当前接入AMF的所有gNB个数。
CURRENTNUM|本次查询数|参数可选性: 必选参数类型: 数字|该参数表示本次查询出的gNB个数。
QUERIEDNUM|已查询数|参数可选性: 必选参数类型: 数字|该参数表示累计已经查询出的gNB个数（包括本次查询出的个数）。
RESULT|查询结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数表示查询结果，提示操作者的查询进度。
GNBBUREAUID|GNB局向ID|参数可选性: 任选参数类型: 字符串参数范围: 1-110|该参数表示gNB ID的具体信息，包括gNB ID，MCC，MNC。




命令举例 


`
查询gNB局向Id。
SHOW GNBBUREAU ID

(No.1) : SHOW GNBBUREAU ID:
-----------------Namf_Communication_0_A----------------
局向总数 本次查询数 已查询数 查询结果 
--------------------------------------
1        1          1        查询结束 
--------------------------------------
记录数：1
GNB局向ID                                                                                            
-----------------------------------------------------------------------------------------------------
Id:82472174334636132[f40]mcc:460 mnc:11 gNBId:19202049 nBits:28 00010010 01010000 00000000 0001(BIT) 
-----------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-09-03 21:35:27 耗时: 0.122 秒

` 


## 查询指定GNB局向信息 
## 查询指定GNB局向信息 


背景知识 


NG setup后，NG-RAN节点信息会保存在AMF中。 




功能说明 


本功能用于AMF查询指定GNB局向信息。 




子主题： 






### 查询指定GNB信息(SHOW SPECIFIED GNB INFO) 
### 查询指定GNB信息(SHOW SPECIFIED GNB INFO) 


功能说明 

该命令用于查询指定gNB的详细信息。 


注意事项 

无。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|参数作用：本参数用于输入待查询gNB的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数是通过SHOW GNBBUREAU ID命令获取的。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|参数作用：本参数用于输入待查询gNB的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数是通过SHOW GNBBUREAU ID命令获取的。
bitLen|gNB ID长度|参数可选性: 必选参数类型: 数字参数范围: 22-32|参数作用：本参数用于输入待查询gNB的gNB ID长度，取值范围为22-32。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数是通过SHOW GNBBUREAU ID命令获取的。
gNBID|gNB ID|参数可选性: 必选参数类型: 数字|参数作用：本参数用于输入待查询gNB的gNB ID。MCC+MNC+gNB ID用于全局唯一标识一个gNB。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数是通过SHOW GNBBUREAU ID命令获取的。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
GNBINFO|GNB信息|参数可选性: 必选参数类型: 字符串参数范围: 1-10000|本参数用于显示指定gNB的详细信息。gNB Bureau Id：该gNB局向在AMF中ID标识。gNBID：gNBID信息，即NG Setup Request消息中gNB-ID字段信息。Ran Node Name：NG Setup Request消息中RAN Node Name信息。sctp：该gNB局向在AMF中关联的动态偶联ID信息。CfgSctpId：对应EM上配置的偶联标识。RAN IP：动态偶联对应的RAN的IP地址、端口信息。AMF IP：动态偶联对应的AMF的IP地址、端口信息。tai：该gNB局向支持的TaList，即NGSetupRequest消息中SupoortedTAList信息。Gnb version：该gNB局向支持的N2协议版本，38413-f20表示2018年12月R15版本，38413-f40表示2019年6月R15版本。




命令举例 


`
查询PLMN ID为"46011"，gNB ID为16777217（长度28位）的gNB信息。
SHOW SPECIFIED GNB INFO:MCC="460",MNC="11",BITLEN=28,GNBID=16777217

(No.1) : SHOW SPECIFIED GNB INFO:MCC="460",MNC="11",BITLEN=28,GNBID=16777217
-----------------Namf_Communication_0----------------
GNB信息
------------------------------------------------------------------------------------
gNB Bureau Id: 72057600196341860 (0x10000016f11f064)
gNBID: nbits[28], data[0x10 00 00 10]    00010000 00000000 00000000 0001(BIT)
Ran Node Name: abc
sctp: 1048576
CfgSctpId: 29
RAN IP: 192.168.29.29-5000
AMF IP: 11.11.29.11-5000
tai[0]: mcc:0x460, mnc:0x11, tac: 0x987600

-------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-11-23 21:39:22 耗时: 0.119 秒

` 


## 查询单个GNB局向信息 
## 查询单个GNB局向信息 


背景知识 


NG setup后，NG-RAN节点信息会保存在AMF中。 




功能说明 


本功能用于AMF查询单个GNB局向信息。 




子主题： 






### 查询GNB局向信息(SHOW GNBBUREAU INFO) 
### 查询GNB局向信息(SHOW GNBBUREAU INFO) 


功能说明 

该命令用于AMF查询某个gNB的详细信息。 


注意事项 

该命令执行后，配置立即生效。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
GNBBUREAUID|GNB局向ID|参数可选性: 必选参数类型: 数字参数范围: 0-18446744073709551615|参数作用：本参数用于设置需要查询详细信息的gNB ID。修改影响：无。数据来源：本端规划 。默认值：无。配置原则：本参数的取值是通过SHOW GNBBUREAU ID命令查询获取的。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
GNBBUREAUINFO|GNB局向信息|参数可选性: 必选参数类型: 字符串参数范围: 1-10000|参数作用：本参数用于显示AMF查询的gNB的详细信息，取值及含义如下：gNB Bureau Id：该gNB局向在AMF中的ID标识。gNBID：gNBID信息，即NGSetupRequest消息中gNB-ID字段信息。Ran Node Name：NGSetupRequest消息中RANNodeName信息。sctp：该gNB局向在AMF中关联的动态偶联ID信息。CfgSctpId：对应EM上配置的偶联标识。RAN IP：动态偶联对应的RAN的IP地址、端口信息。RAN IP：动态偶联对应的AMF的IP地址、端口信息。tai：该gNB局向支持的TaList，即NGSetupRequest消息中SupoortedTAList信息。Gnb version：该gNB局向支持的N2协议版本：38413-f20表示2018年12月R15版本，38413-f40表示2019年6月R15版本。




命令举例 


`
AMF根据GNBBUREAUID为82472174334636132查询GNB局向信息。
SHOW GNBBUREAU INFO:GNBBUREAUID=82472174334636132

(No.1) : SHOW GNBBUREAU INFO:GNBBUREAUID=82472174334636132
-----------------Namf_Communication_0_A----------------
GNB局向信息                                                                                                                                                                                                                                                                     
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
gNB Bureau Id: 82472174334636132 (0x12500016f11f064)
gNBID: nbits[28], data[0x12 50 00 10]    00010010 01010000 00000000 0001(BIT)
Ran Node Name: 
sctp: 1048576
CfgSctpId: 29
RAN IP: 192.168.29.29-5000
AMF IP: 11.11.29.11-5000
tai[0]: mcc:0x460, mnc:0x11, tac: 0x987600
 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-09-03 21:39:22 耗时: 0.119 秒

` 


## 查询全部GNB局向信息 
## 查询全部GNB局向信息 


背景知识 


NG setup后，NG-RAN节点信息会保存在AMF中。 




功能说明 


本功能用于AMF查询全部GNB局向信息。 




子主题： 






### 查询全部GNB局向信息(SHOW ALL GNBBUREAU INFO) 
### 查询全部GNB局向信息(SHOW ALL GNBBUREAU INFO) 


功能说明 

该命令用于在AMF上查询全部gNB的详细信息。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，显示成功或失败。
PROCESS|完成百分比|参数可选性: 任选参数类型: 字符串参数范围: 0-10|该参数用于显示当前已获取的gNB信息占总gNB数量的百分比。




命令举例 


`
AMF查询全部gNB详细信息。
SHOW ALL GNBBUREAU INFO

(No.1) : SHOW ALL GNBBUREAU INFO:
-----------------Namf_Communication_0_A----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


## 查询TA下的GNB信息 
## 查询TA下的GNB信息 


背景知识 


NG setup后，NG-RAN节点信息会保存在AMF中。 




功能说明 


本功能用于AMF查询归属于指定TA下的GNB信息。 




子主题： 






### 查询TA下的GNB信息(SHOW TAI GNB INFO) 
### 查询TA下的GNB信息(SHOW TAI GNB INFO) 


功能说明 

该命令用于根据TA查询本局归属下与该TA相关的gNB信息，包括MCC、MNC、gNB ID、gNB地址、gNB名称。 


注意事项 

当gNB个数不大于120时，直接在EM界面中显示出所有gNB信息。 

当gNB个数大于120时，系统自动将gNB个数保存为文件，在EM上只显示文件的链接，操作员需要单击链接，自动下载文件，在下载后的文件中查看gNB信息。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于设置跟踪区的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于设置跟踪区的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
tac|跟踪区域码|参数可选性: 必选参数类型: 字符串参数范围: 6-6|本参数用于设置跟踪区域码，在同一个PLMN（公共陆地移动网络 PLMN=MCC+MNC ）内，标识唯一的一个跟踪区，由运营商在PLMN内统一规划，以16进制数字编码。
sclogicNo|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|该参数用于设置SC（Service Component，服务组件）逻辑编号，查询指定SC上的归属于某个TA下的gNB信息。可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:SC_TYPENAME="sc_amf_communication"该参数为可选参数，默认不输入。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于显示跟踪区的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于显示跟踪区的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
gNBId|gNB ID|参数可选性: 必选参数类型: 数字|本参数用于显示gNB ID。gNB ID用于唯一标识一个PLMN内的gNB。
gNBIdLen|gNB ID长度|参数可选性: 必选参数类型: 数字参数范围: 22-32|本参数用于显示gNB ID长度。gNB ID长度为22-32BIT位。
gNBIpAddr|gNB地址|参数可选性: 任选参数类型: 字符串|本参数用于显示gNB的IP（IPv4或IPv6）地址。
gNBName|gNB名称|参数可选性: 任选参数类型: 字符串参数范围: 0-150|本参数用于显示gNB的名称。




命令举例 


`
查询跟踪区"460-11-00d011"下的gNB信息。
SHOW TAI GNB INFO:MCC="460",MNC="11",TAC="00d011"

(No.4) : SHOW TAI GNB INFO:MCC="460",MNC="11",TAC="00d011"
-----------------Namf_Communication_0_A----------------
移动国家码  移动网络码  gNB ID    gNB ID长度  gNB地址         gNB名称
----------------------------------------------------------------------
460         11          190993    28          192.168.30.30   RAN01
460         11          123456    30          172.168.30.30   RAN02
----------------------------------------------------------------------
记录数：2

执行成功耗时: 1.276 秒

` 


## 查询TA下的GNB数量 
## 查询TA下的GNB数量 


背景知识 


运营商全网网络规划时，规划了TA以及gNB站点归属的TA，TA下gNB数量需要控制在一定范围内，以保障网络的稳定运行。 




功能说明 


本功能用于AMF查询所有TA或指定TA下的gNB数量。 




子主题： 






### 查询TA下的gNB数量(SHOW TA GNB NUM) 
### 查询TA下的gNB数量(SHOW TA GNB NUM) 


功能说明 

该命令用于查询每个TA（Tracking Area，跟踪区域）下或指定TA下的gNB（Next Generation Node B，下一代基站）数量。 


注意事项 

当查询方式为“查询所有”时，系统自动将每个TA下的gNB数量保存为文件，在EM上只显示文件的链接，操作员需要单击链接，自动下载文件，在下载后的文件中查看所有TA下的gNB数量。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
queryMode|查询方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: 0|参数作用：本参数用于输入查询方式。修改影响：修改该参数可以改变查询gNB数量的方式。有以下取值：查询所有：表示查询所有TA下gNB的数量。查询指定TA：表示查询指定TA下gNB的数量。数据来源：本端规划。默认值：无。配置原则：无。
mcc|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|参数作用：本参数用于输入待查询TA的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。修改影响：无。数据来源：全网规划。默认值：无。配置原则：当查询方式为“查询指定TA”时需输入本参数。
mnc|移动网络码|参数可选性: 任选参数类型: 字符串参数范围: 2-3|参数作用：本参数用于输入待查询TA的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。修改影响：无。数据来源：全网规划。默认值：无。配置原则：当查询方式为“查询指定TA”时需输入本参数。
tac|跟踪区域码|参数可选性: 任选参数类型: 字符串参数范围: 6-6|参数作用：本参数用于输入待查询TA的TAC（Tracking Area Code，跟踪区域码），在同一个PLMN（公共陆地移动网络 PLMN=MCC+MNC ）内，标识唯一的一个跟踪区，由运营商在PLMN内统一规划，以16进制数字编码。修改影响：无。数据来源：全网规划。默认值：无。配置原则：当查询方式为“查询指定TA”时需输入本参数。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于显示指定TA的MCC。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于显示指定TA的MNC。
tac|跟踪区域码|参数可选性: 必选参数类型: 字符串参数范围: 6-6|本参数用于显示指定TA的TAC。
gnbnum|gNB数量|参数可选性: 必选参数类型: 数字|本参数用于显示指定TA下的gNB数量。




命令举例 


`
1、查询所有TA下的gNB数量。
SHOW TA GNB NUM:QUERYMODE="ALL"

(No.1) : SHOW TA GNB NUM:QUERYMODE="ALL"
-----------------Namf_Communication_0----------------
输出文件路径
---------------
当前命令执行的结果被另存为文件，请点击这个URL下载：
fbc02a8437d74071ab4a1c0d307229c3_AMFShowTaiGnbInfo.csv
---------------

执行成功开始时间:2021-06-03 17:53:06 耗时: 0.394 秒

2、查询TA"460-11-00d011"下的gNB数量。
SHOW TA GNB NUM:QUERYMODE="TA",MCC="460",MNC="11",TAC="00d011"

(No.2) : SHOW TA GNB NUM:QUERYMODE="TA",MCC="460",MNC="11",TAC="00d011"
-----------------Namf_Communication_0---------------------------
移动国家码 移动网络码 跟踪区域码 gNB数量
-----------------------------------------
460        11         00d011     1000
-----------------------------------------
记录数：1
执行成功开始时间:2021-04-29 16:47:55 耗时: 0.142 秒

` 


## 查询单个GNB邻接关系信息 
## 查询单个GNB邻接关系信息 


背景知识 


邻接gNB（Neighbor gNB）是策略寻呼特性引入的概念，指物理上邻接的gNB。 

邻接关系的来源有两种：操作员手功配置和业务流程自学习。 


 
操作员手功配置：通过ADD NEIGHBORGNB命令配置指定gNB的gNB邻接列表。 

 
业务流程自学习：为实现在Neighbor gNB范围进行寻呼，AMF需要在流程中自动学习邻接关系，从而获取gNB的相邻gNB信息，并记录在邻接关系表中。 

 

AMF可以通过以下几种方式自动学习gNB邻接关系。 


 
通过SON流程学习邻接关系：自组织网络（SON）流程传送可以实现通过Uplink RAN Configuration Transfer消息传递gNB的Xn接口地址信息给AMF，自动获得配置相关数据。当两个gNB通过Xn接口进行SON流程时，则认为这两个gNB是相邻gNB。 

 
通过Xn based Handover流程学习邻接关系：相邻gNB间有Xn接口，由目标侧gNB发起到AMF的流程，AMF接收Path Switch Request消息获取源gNB和目标侧gNB之间的邻接关系。 

 
通过N2 based Handover流程学习邻接关系：相邻gNB间无Xn接口，或需改变AMF，由源侧gNB发起到AMF的流程，AMF通过Handover Required消息获取目标侧gNB与源侧gNB之间的邻接关系。 

 




功能说明 


本功能用于在AMF上查询通过业务流程自学习获取的单个gNB邻接关系信息。 




子主题： 






### 查询单个gNB邻接关系信息(SHOW SINGLE GNB NEIGHBOR INFO) 
### 查询单个gNB邻接关系信息(SHOW SINGLE GNB NEIGHBOR INFO) 


功能说明 

该命令用于在AMF上查询单个gNB的邻接gNB信息。 


注意事项 

无。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|参数作用：本参数用于设置中心gNB的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中，唯一标识一个国家信息，例如中国为460。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数通过SHOW GNBBUREAU ID命令获取。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|参数作用：本参数用于设置中心gNB的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数通过SHOW GNBBUREAU ID命令获取。
bitLen|gNB ID长度|参数可选性: 必选参数类型: 数字参数范围: 22-32|参数作用：本参数用于设置中心gNB的gNB ID长度，取值范围为22-32BIT位。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数通过SHOW GNBBUREAU ID命令获取。
gNBID|gNB ID|参数可选性: 必选参数类型: 数字|参数作用：本参数用于设置中心gNB的gNB ID。在同一个PLMN（公共陆地移动网络 PLMN=MCC+MNC）内，标识唯一的一个gNB，由运营商在PLMN内统一规划。修改影响：无。数据来源：全网规划。默认值：无。配置原则：本参数通过SHOW GNBBUREAU ID命令获取。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
neiMcc|邻接gNB移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于显示邻接gNB的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
neiMnc|邻接gNB移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于显示邻接gNB的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
neiGNBIdBitLen|邻接gNB ID长度|参数可选性: 必选参数类型: 数字参数范围: 22-32|本参数用于显示邻接gNB的gNB ID长度。gNB ID长度为22-32BIT位。
neiGNBId|邻接gNB ID|参数可选性: 必选参数类型: 数字|本参数用于显示邻接gNB的gNB ID。gNB ID用于唯一标识一个PLMN内的gNB。




命令举例 


`
查询PLMN ID为"46011"，gNB ID为16777217（长度28位）的gNB的邻接gNB信息。
SHOW SINGLE GNB NEIGHBOR INFO:MCC="460",MNC="11",BITLEN=28,GNBID=16777217

(No.1) : SHOW SINGLE GNB NEIGHBOR INFO:MCC="460",MNC="11",BITLEN=28,GNBID=16777217
-----------------Namf_Communication_0----------------
邻接gNB移动国家码 邻接gNB移动网络码 邻接gNB ID长度 邻接gNB ID
--------------------------------------------------------------
460               11                28             16777218 
460               11                28             16777219 
460               11                28             16777220 
460               11                28             16777221 
--------------------------------------------------------------
记录数：4
执行成功开始时间:2022-02-14 21:39:22 耗时: 0.119 秒

` 


## 查询全部GNB邻接关系信息 
## 查询全部GNB邻接关系信息 


背景知识 


邻接gNB（Neighbor gNB）是策略寻呼特性引入的概念，指物理上邻接的gNB。 

邻接关系的来源有两种：操作员手功配置和业务流程自学习。 


 
操作员手功配置：通过ADD NEIGHBORGNB命令配置指定gNB的gNB邻接列表。 

 
业务流程自学习：为实现在Neighbor gNB范围进行寻呼，AMF需要在流程中自动学习邻接关系，从而获取gNB的相邻gNB信息，并记录在邻接关系表中。 

 

AMF可以通过以下几种方式自动学习gNB邻接关系。 


 
通过SON流程学习邻接关系：自组织网络（SON）流程传送可以实现通过Uplink RAN Configuration Transfer消息传递gNB的Xn接口地址信息给AMF，自动获得配置相关数据。当两个gNB通过Xn接口进行SON流程时，则认为这两个gNB是相邻gNB。 

 
通过Xn based Handover流程学习邻接关系：相邻gNB间有Xn接口，由目标侧gNB发起到AMF的流程，AMF接收Path Switch Request消息获取源gNB和目标侧gNB之间的邻接关系。 

 
通过N2 based Handover流程学习邻接关系：相邻gNB间无Xn接口，或需改变AMF，由源侧gNB发起到AMF的流程，AMF通过Handover Required消息获取目标侧gNB与源侧gNB之间的邻接关系。 

 




功能说明 


本功能用于在AMF上查询通过业务流程自学习获取的全部gNB邻接关系信息。 




子主题： 






### 查询全部gNB邻接关系信息(SHOW ALL GNB NEIGHBOR INFO) 
### 查询全部gNB邻接关系信息(SHOW ALL GNB NEIGHBOR INFO) 


功能说明 

该命令用于在AMF上查询全部gNB的邻接gNB信息。 


注意事项 

无。


命令举例 


`
AMF查询全部gNB邻接关系信息。
SHOW ALL GNB NEIGHBOR INFO

(No.1) : SHOW ALL GNB NEIGHBOR INFO:
-----------------Namf_Communication_0----------------
正在执行一个异步命令，请到操作记录中查看执行结果

` 


## AMF RESET 
## AMF RESET 


背景知识 


本功能适用的场景是在5GC网络发生故障时，需要重新初始化RAN（Radio Access Network，无线接入网）。 

5G网络中的基站包括如下两种类型： 


 
gNB：向UE提供NR（New Radio，新无线）用户面和控制面协议终端的节点，并且经由NG接口连接到5GC。 

 
NG-eNB：向UE提供E-UTRA用户面和控制面协议终端的节点，并且经由NG接口连接到5GC。 

 

NG接口是NG-RAN（5G无线接入网）和5GC（5G Core Network，5G核心网）之间的接口。 

NG接口分为NG-C接口（NG-RAN和5GC之间的控制面接口）和NG-U接口（NG-RAN和5GC之间的用户面接口）。 


 
NG用户面接口（NG-U）在NG-RAN节点和UPF之间定义，NG-U在NG-RAN节点和UPF之间提供无保证的用户面PDU传送。 

 
NG控制面接口（NG-C）在NG-RAN节点和AMF之间定义。 

 




功能说明 


本功能用于对与AMF连接的全部或部分gNB执行重启操作。 




子主题： 






### AMF发起的全部RESET(AMF RESET ALL) 
### AMF发起的全部RESET(AMF RESET ALL) 


功能说明 

该命令用于通知全部基站释放AMF相关的用户资源。 


注意事项 


 
本命令执行后，配置立即生效。 

 
该命令为高危命令！本命令执行后，AMF通知基站释放用户资源，导致连接态用户（包括通话中用户）掉线，用户需要重新与基站间建链。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 任选参数类型: 字符串参数范围: 3-3|本参数用于设置Global gNB ID的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。
mnc|移动网络码|参数可选性: 任选参数类型: 字符串参数范围: 2-3|本参数用于设置Global gNB ID的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
bitLen|gNB ID长度|参数可选性: 任选参数类型: 数字参数范围: 22-32|本参数用于设置gNB ID的位长度，取值范围为22-32。
gNBID|gNB ID|参数可选性: 任选参数类型: 数字|本参数用于设置指定gNB的gNB ID。MCC+MNC+gNB ID用于全局唯一标识一个gNB。本参数及上述几个参数的取值可通过SHOW GNBBUREAU ID命令获取。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于显示本命令的操作结果。




命令举例 


`
对所有与AMF连接的gNB发起RESET。
AMF RESET ALL

(No.1) : AMF RESET ALL
-----------------Namf_Communication_0----------------
操作结果
SUCCESS
记录数：1
执行成功耗时: 0.072 秒

` 


### AMF发起的部分RESET(AMF RESET PART) 
### AMF发起的部分RESET(AMF RESET PART) 


功能说明 

该命令用于通知部分基站释放AMF相关的用户资源。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于设置Global gNB ID的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于设置Global gNB ID的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
bitLen|gNB ID长度|参数可选性: 必选参数类型: 数字参数范围: 22-32|本参数用于设置gNB ID的位长度，取值范围为22-32。
gNBID|gNB ID|参数可选性: 必选参数类型: 数字|本参数用于设置指定gNB的gNB ID。MCC+MNC+gNB ID用于全局唯一标识一个gNB。本参数及上述几个参数的取值可通过SHOW GNBBUREAU ID命令获取。
N2NUM|N2连接个数|参数可选性: 必选参数类型: 数字参数范围: 1-16|本参数用于设置需要重启的gNB的N2连接个数。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-16|该参数用于显示本命令的操作结果。




命令举例 


`
AMF发起部分RESET。随机释放与本AMF连接的PLMN ID为"46011"，gNB ID为16777217（长度28位）的gNB的1个N2连接
AMF RESET PART:MCC="460",MNC="11",BITLEN=28,GNBID=16777217,N2NUM=1

(No.1) :AMF RESET PART:MCC="460",MNC="11",BITLEN=28,GNBID=16777217,N2NUM=1
-----------------Namf_Communication_0----------------
操作结果
SUCCESS
记录数：1
执行成功耗时: 0.126 秒

` 


## RAN侧过负荷控制 
## RAN侧过负荷控制 


背景知识 


AMF的主服务NFS（Namf_Communication服务）在每个评估周期，根据NF整体负荷（即Namf_Communication和Namf_MT的NFS负荷的高值，目前取用的CPU占用率）的当前值判断所处的负荷等级，根据配置决定是否发送OverloadStart消息给RAN。同样，根据当前值判断所处的负荷等级，根据配置决定是否发送OverloadStop消息给RAN。 

一个NF可以包含多个NFS（Network Function Service，网络功能服务）。 




功能说明 


本功能用于控制AMF向RAN发送OverloadStart或OverloadStop消息的负载状态。 




子主题： 






### 发送overloadStart/overloadStop消息至RAN(OVERLOAD CTRL) 
### 发送overloadStart/overloadStop消息至RAN(OVERLOAD CTRL) 


功能说明 

该命令用于设置AMF向RAN发送OverloadStart或OverloadStop消息的负载状态。 


注意事项 

该命令只适用于模拟测试场景，注意事项如下： 


 
操作员在测试AMF向多个RAN发送OverloadStart消息时，AMF可以发送的最大gNB个数，受到SET OLTORANCFG命令的参数“olGNBNum（发送Overload start 的最大gNodeB个数）”的限制，即AMF可以发送的最大gNB个数，不能超过“olGNBNum（发送Overload start 的最大gNodeB个数）”配置的个数。 

 
AMF向多个gNB发送OverloadStop消息时，AMF可以发送的最大gNB个数不会受此参数限制，而是根据AMF发送OverloadStart消息时发送给了哪些gNB来确定。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
loadStatus|负载状态|参数可选性: 必选参数类型: 枚举，参见枚举定义|本参数用于设置AMF向RAN发送OverloadStart或OverloadStop消息的负载状态。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|本参数用于显示AMF向RAN发送OverloadStart或OverloadStop消息的操作结果。




命令举例 


`
AMF向RAN发送OverloadStart消息，其中消息参数值使用高过载配置值。
OVERLOAD CTRL:LOADSTATUS="HIGH_OVERLOAD"
` 


# NRF相关 
# NRF相关 


背景知识 


5GC网络系统由多个物理的或虚拟化的网络功能（NF）组成。NRF（Network Repository Function，网络功能仓储）在此网络架构中提供了关键的NF服务注册及发现功能，5GC网络中的每个NF都需要向NRF注册。 

AMF在进行业务流程时候，需要到NRF发现相关NF，为了减少AMF和NRF之间的交互次数，AMF可开启NRF发现缓存功能。即将前一次向NRF发现的结果缓存下来，后续针对同一NF，或相同的发现请求时，直接使用缓存结果，不再向NRF进行消息交互。可有效的减少网络中交互的信令数量。 

5GC网络系统由多个物理的或虚拟化的网络功能（NF）组成。NRF在此网络架构中提供了各个NF服务注册，订阅及发现功能。 

服务消费者（某个NF）可以向NRF发起订阅请求，订阅服务提供者（某个NF）或某一类型的服务提供者的信息，当被订阅的服务提供者发生了变化（参数变化、状态变化），NRF需要向订阅者（即服务消费者）发送变更通知。 

在服务化架构下，5GC网络中的每一个NF（Network Function，网络功能）都可以作为一个服务对授权的消费者（5GC网络内其他NF）提供业务能力。 

一个NF可以针对不同的消费者提供不同的功能，因此一个NF可以包含多个NFS（Network Function Service，网络功能服务），同时这些NFS是独立、可重用和可自我管理的。 

NRF是服务化架构的核心，通过NRF实现NF及NFS的统一管理、互相发现及信息变更通知，整个过程全动态自动完成，无需人工参与。 




功能说明 


本功能用于配置AMF与NRF相关的操作，包括注册/去注册，订阅/去订阅等。 




子主题： 






## NRF注册(NRF REGISTRATION) 
## NRF注册(NRF REGISTRATION) 


功能说明 

5GC网络由多个物理的或虚拟化的网络功能（NF）组成。NRF在此网络架构中提供了各个NF服务的注册及发现功能，需要各个NF向其注册以及去注册。 

本命令用于AMF向NRF执行注册操作，使NRF获得AMF的信息。 


注意事项 

本命令执行后，配置立即生效。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|参数作用：该参数用于显示AMF向NRF注册的操作结果。




命令举例 


`
AMF向NRF注册。
NRF REGISTRATION
` 


## NRF去注册(NRF DEREGISTRATION) 
## NRF去注册(NRF DEREGISTRATION) 


功能说明 

5GC网络由多个物理的或虚拟化的网络功能（NF）组成。NRF在此网络架构中提供了各个NF服务的注册及发现功能，需要各个NF向其注册以及去注册。 

该命令用于AMF向NRF去注册。 


注意事项 

本命令执行后，配置立即生效。 

本命令为高危命令！本命令执行后，AMF将向NRF发起去注册流程，后续NRF会通知周边网元，该AMF已不可用，周边网元将不再与该AMF交互，可能造成整个网络瘫痪，需要先进行以下操作，将终端迁移到其他AMF，才能执行本命令： 


 
执行SET AMFSTATUS命令设置AMF为维护状态，终端会被其他AMF接管。 

 
执行LOAD REBALANC START命令，将GUAMI设置为不可用， 对应的终端被其他AMF接管。 

 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|参数作用：该参数用于显示AMF向NRF去注册的操作结果。




命令举例 


`
AMF向NRF去注册。
NRF DEREGISTRATION
` 


## NRF更新(NRF UPDATE) 
## NRF更新(NRF UPDATE) 


功能说明 

本命令用于AMF向NRF更新注册的信息，使NRF持有AMF的最新信息。 


注意事项 

本命令执行后，配置立即生效。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|参数作用：该参数用于显示AMF向NRF更新的操作结果。




命令举例 


`
AMF向NRF更新。
NRF UPDATE
` 


## 查询AMF状态(SHOW NFSTATUS) 
## 查询AMF状态(SHOW NFSTATUS) 


功能说明 

该命令用于查询AMF的状态。包括四个状态，注册态，注册未成功，去注册态，暂停服务。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3默认值: AMFREGISTERED|显示查询的amf状态。




命令举例 


`
查询amf状态。
SHOW NFSTATUS

(No.1):SHOW NFSTATUS
-----------------Namf_Communication_0----------------
状态
--------------------------------------------------------------------
注册态
--------------------------------------------------------------------
记录数 1
命令执行成功（耗时 0.031 秒）。

` 


# NSSF相关 
# NSSF相关 


背景知识 


服务消费者（某个NF）可以向NSSF（Network Slice Selection Function，网络切片选择功能）发起订阅请求，订阅某个服务提供者（某个NF）或某一类型的服务提供者的切片信息，当被订阅的服务提供者的切片信息发生了变化，NSSF需要向订阅者（服务消费者）发送变更通知。 




功能说明 


该功能用于AMF向NSSF请求订阅其所关心的切片的信息。 

当服务消费者不需要获取切片信息时，可以向NSSF发起去订阅请求。 




子主题： 






## NSSF订阅(NSSF SUBSCRIBE) 
## NSSF订阅(NSSF SUBSCRIBE) 


功能说明 

该命令用于AMF向NSSF请求订阅其所关心的切片的信息。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|本参数用于查询AMF向NSSF订阅的操作结果。
RESULT|提示信息|参数可选性: 必选参数类型: 字符串参数范围: 0-100|本参数用于显示向NSSF订阅的具体提示信息。




命令举例 


`
该命令用于AMF向NSSF请求订阅其所关心的切片信息。
NSSF SUBSCRIBE
` 


## NSSF去订阅(NSSF UNSUBSCRIBE) 
## NSSF去订阅(NSSF UNSUBSCRIBE) 


功能说明 

本命令用于AMF向NSSF请求去订阅其所关心的切片信息。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|本参数用于显示AMF向NSSF去订阅的操作结果。
RESULT|提示信息|参数可选性: 必选参数类型: 字符串参数范围: 0-100|本参数用于显示向NSSF去订阅的具体提示信息。




命令举例 


`
AMF向NSSF请求去订阅其所关心的切片信息。
NSSF UNSUBSCRIBE
` 


## 查询NSSF返回的切片可用性信息(SHOW NSSF SLICE AVAIL INFO) 
## 查询NSSF返回的切片可用性信息(SHOW NSSF SLICE AVAIL INFO) 


功能说明 

该命令用于在AMF上查询NSSF返回的切片可用性信息。 


注意事项 

无。


命令举例 


`
AMF查询NSSF返回的切片可用性信息。
SHOW NSSF SLICE AVAIL INFO

(No.1) : SHOW NSSF SLICE AVAIL INFO:
-----------------Namf_Communication_0_A----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


## 查询NSSF返回的指定TA切片可用性信息(SHOW NSSF SPECIFIED TA SLICE AVAIL INFO) 
## 查询NSSF返回的指定TA切片可用性信息(SHOW NSSF SPECIFIED TA SLICE AVAIL INFO) 


功能说明 

该命令用于查询NSSF返回的指定TA切片可用性信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于设置跟踪区的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于设置跟踪区的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
tac|跟踪区域码|参数可选性: 必选参数类型: 字符串参数范围: 6-6|本参数用于设置跟踪区域码，在同一个PLMN（公共陆地移动网络 PLMN=MCC+MNC ）内，标识唯一的一个跟踪区，由运营商在PLMN内统一规划，以16进制数字编码。




命令举例 


`
查询跟踪区"460-11-00d011"下的切片可用性信息。
SHOW NSSF SPECIFIED TA SLICE AVAIL INFO:MCC="460",MNC="11",TAC="00d011"

(No.1) : SHOW NSSF SPECIFIED TA SLICE AVAIL INFO:
-----------------Namf_Communication_0_A----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


## 查询RAN上报的指定TA切片可用性信息(SHOW RAN SPECIFIED TA SLICE AVAIL INFO) 
## 查询RAN上报的指定TA切片可用性信息(SHOW RAN SPECIFIED TA SLICE AVAIL INFO) 


功能说明 

该命令用于查询RAN上报的指定TA切片可用性信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mcc|移动国家码|参数可选性: 必选参数类型: 字符串参数范围: 3-3|本参数用于设置跟踪区的MCC（Mobile Country Code，移动国家码），由运营商根据国际电联分配的国家码进行规划配置，用于在移动网络中唯一标识一个国家信息，例如中国为460。MCC对于所有的记录都是唯一的。
mnc|移动网络码|参数可选性: 必选参数类型: 字符串参数范围: 2-3|本参数用于设置跟踪区的MNC（Mobile Network Code，移动网络号），由运营商根据国际电联分配的网络号进行规划配置，用于在移动网络中基于MCC唯一标识一个运营商网络信息。例如运营商“中国移动“在中国运营的GSM网络的MNC为01。MCC和MNC标识唯一的一个PLMN，标识移动用户的归属PLMN，也就是移动用户归属的运营商的移动网络。
tac|跟踪区域码|参数可选性: 必选参数类型: 字符串参数范围: 6-6|本参数用于设置跟踪区域码，在同一个PLMN（公共陆地移动网络 PLMN=MCC+MNC ）内，标识唯一的一个跟踪区，由运营商在PLMN内统一规划，以16进制数字编码。




命令举例 


`
查询跟踪区"460-11-00d011"下的切片可用性信息。
SHOW RAN SPECIFIED TA SLICE AVAIL INFO:MCC="460",MNC="11",TAC="00d011"

(No.1) : SHOW RAN SPECIFIED TA SLICE AVAIL INFO:
-----------------Namf_Communication_0_A----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


## 查询RAN上报的切片可用性信息(SHOW RAN SLICE AVAIL INFO) 
## 查询RAN上报的切片可用性信息(SHOW RAN SLICE AVAIL INFO) 


功能说明 

该命令用于在AMF上查询全部RAN上报的切片可用性的详细信息。 


注意事项 

无。


命令举例 


`
AMF查询无线上报的切片可用性信息。
SHOW RAN SLICE AVAIL INFO

(No.1) : SHOW RAN SLICE AVAIL INFO:
-----------------Namf_Communication_0_A----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


# NF管理 
# NF管理 


背景知识 


网元支持切换三种管理状态：locked, unlocked，shutting down。 

管理状态解释如下： 


 
网元A业务正常是unlocked状态：此时向EMS上报unlocked状态。 

 
网元A业务卸载过程：此时向EMS上报shutting down状态。 

 
网元A业务全部卸载完毕，并且不再接收新业务：此时向EMS上报locked状态。 

 
网元A从locked状态进入正常业务状态：此时向EMS上报unlocked状态。 

 




功能说明 


NF实例化后为Unlocked状态。 

Unlocked状态下操作员可以执行Lock操作，设置NF状态为Locked状态。 

操作员执行操作后,NF迁移到ShuttingDown状态,等待延迟时间(默认300秒)自动迁移到Locked状态。 

Locked状态下操作员可以执行Unlock操作,设置NF状态为Unlocked状态，NF状态从Locked状态迁移到Unlocked状态。 




子主题： 






## NF发现 
## NF发现 


背景知识 


AMF执行业务流程时要和周边NF进行交互，交互前要发现和选择对应的NF，这些NF包括：AUSF、UDM、PCF、SMF、SMSF和AMF。 


 
AUSF发现和选择：
UE注册时，AMF发现和选择合适的AUSF进行鉴权。 

 
UDM发现和选择：
UE在注册时，完成到UDM的登记，AMF发现和选择合适的UDM。 

 
PCF发现和选择：
UE在注册时，AMF为UE进行策略关联的建立，发现和选择合适的PCF。 

 
SMF发现和选择：
UE发起PDU会话建立，AMF发现和选择合适的SMF建立PDU会话。 

 
SMSF发现和选择：
UE通过NAS消息投递短消息时，AMF发现和选择合适的SMSF进行短消息投递。 

 
AMF发现和选择：
UE在5G网络内移动，目标区域不是当前UE所在AMF的服务区时，根据目标区域发现和选择新AMF为UE提供服务。 

 

AMF通过NRF（Network Repository Function，网络功能仓储）发现其他NF，为了减少AMF和NRF之间的交互次数，AMF可开启NRF发现缓存功能。即将前一次向NRF发现的结果缓存下来，后续针对同一NF，或相同的发现请求时，直接使用缓存结果，不再向NRF进行消息交互。可有效的减少网络中交互的信令数量。 




功能说明 


本功能用于AMF向NRF发现相关NF。 




子主题： 






### NF 发现(NF DISCOVERY) 
### NF 发现(NF DISCOVERY) 


功能说明 

该命令用于AMF向NRF发现相关NF。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
serviceName|服务名|参数可选性: 任选参数类型: 字符串参数范围: 0-63|参数作用：参数用于配置AMF需要到NRF发现的NF的服务类型。修改影响：填写该参数后，发现请求将携带NF的服务类型。数据来源：不涉及。默认值：不涉及。配置原则：当目标NF类型为"UDM"时，服务名只能为"nudm-sdm"、"nudm-uecm"、"nudm-ueau"、"nudm-ee"、"nudm-pp"中的一种。当目标NF类型为"AMF"时，服务名只能为"namf-comm"、"namf-evts"、"namf-mt"、"namf-loc"中的一种。当目标NF类型为"SMF"时，服务名只能为"nsmf-pdusession"、"nsmf-event-exposure"中的一种。当目标NF类型为"PCF"时，服务名只能为"npcf-am-policy-control"、"npcf-smpolicycontrol"、"npcf-policyauthorization"、"npcf-bdtpolicycontrol"、"npcf-eventexposure"、"npcf-ue-policy-control"中的一种。
targetNFType|目标NF类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 1-21|参数作用：本参数用于配置AMF需要到NRF发现的NF类型，为其中的一种：“UDM”、“AMF”、“SMF”、“AUSF”、“PCF”。修改影响：修改NF类型，发现请求将携带配置的NF类型。数据来源：不涉及。默认值：不涉及。配置原则：无。
sst|切片服务类型|参数可选性: 任选参数类型: 数字参数范围: 0-255|参数作用：本参数用于配置AMF向NRF发现相关NF时，发现请求携带的SST（Slice/Service Type，切片/服务类型）。修改影响：发现请求将携带配置的SST。数据来源：不涉及。默认值：不涉及。配置原则：无。S-NSSAI（Single Network Slice Selection Assistance Information，单个网络切片选择辅助信息） 可用于标识网络切片，由SST（Slice/Service Type，切片/服务类型）和SD（Slice Differentiator，切片区分信息）组成。目前协议明确的标准SST有三种。1：eMBB：提供高带宽、大数据量的服务。2：uRLLC：提供超高可靠低时延服务。3：mIoT：提供海量的连接数，但是数据量比较小，且对时延要求不高。具体解释参见协议3GPP TS 23.501的"5.15.2.2 Standardised SST values"。
sd|切片微分信息|参数可选性: 任选参数类型: 字符串参数范围: 0-31|参数作用：本参数用于配置AMF向NRF发现相关NF时，发现请求携带的SD（Slice Differentiator，切片区分信息），SD用于区分同一种SST之内不同的S-NSSAI。修改影响：发现请求将携带配置的SD。数据来源：不涉及。默认值：不涉及。配置原则：无。
dnn|数据网络名称|参数可选性: 任选参数类型: 字符串参数范围: 0-99|参数作用：本参数用于配置AMF向NRF发现类型为"SMF"的NF时，发现请求携带的DDN（Data Network Name，数据网络名称）。修改影响：发现请求将携带配置的DDN。数据来源：不涉及。默认值：不涉及。配置原则：本参数仅当目标NF类型为"SMF"时进行配置。
serviceArea|服务区域|参数可选性: 任选参数类型: 字符串参数范围: 0-99|参数作用：本参数用于配置AMF向NRF发现类型为"SMF"的NF时，发现响应携带的服务区域。修改影响：发现请求将携带配置的服务区域。数据来源：不涉及。默认值：不涉及。配置原则：本参数仅当目标NF类型为"SMF"时进行配置。服务区域限制是5GC网络中，对终端用户的移动性限制功能的一种表现形式。AMF根据终端用户签约的服务区域及其PCF的策略，给UE下发服务区域（Servcie Area）。当用户处于非允许服务区域（Non-Allowed Area）时，用户终端不允许主动发起业务请求流程，也不允许发起SM相关信令流程。具体参见3GPP TS 23.501协议的”5.3.4.1 Mobility Restrictions“和3GPP TS 24.501协议的“5.3.5 Service area restrictions“。
servingSUPI|服务号码|参数可选性: 任选参数类型: 字符串参数范围: 5-15|参数作用：本参数用于配置AMF向NRF发现类型为"UDM"的NF时，发现请求携带的SUPI（Subscriber Permanent Identifier，用户永久标识）。修改影响：发现请求将携带配置的SUPI。数据来源：不涉及。默认值：不涉及。配置原则：本参数仅当目标NF类型为"UDM"时进行配置。
amfGuamiFqdn|AMF GUAMI域名|参数可选性: 任选参数类型: 字符串参数范围: 0-99|参数作用：本参数用于配置AMF向NRF发现类型为"AMF"的NF时，发现请求携带的GUAMI FQDN。格式为"mcc-mnc-regionId-setId-pointId"，例如"460-11-22-33-44"。修改影响：发现请求将携带配置的GUAMI FQDN。数据来源：不涉及。默认值：不涉及。配置原则：本参数仅当目标NF类型为"AMF"时进行配置。每个AMF由AMF Region、AMF Set、AMF Pointer，这些信息加上PLMN共同组成GUAMI（Globally Unique AMF ID，全球唯一AMF标识），每个GUAMI唯一标识一个AMF。GUAMI = MCC+MNC+AMF IdentifierAMF Identifier = AMF Region ID+AMF Set ID+AMF Pointer其中AMF Region ID标识了一个区域，AMF Set ID唯一标识一个AMF Region内的AMF Set，AMF Pointer标识了AMF Set内的一个或多个AMF。
taiFqdn|TAI域名|参数可选性: 任选参数类型: 字符串参数范围: 0-99|参数作用：本参数用于配置AMF向NRF发现相关NF时，发现请求携带的TAI FQDN。格式为"mcc-mnc-tac"，例如"460-01-1289ab"。修改影响：发现请求将携带配置的TAI FQDN。数据来源：不涉及。默认值：不涉及。配置原则：无。TAI：跟踪区域标识（Tracking Area Identity），由MCC（Mobile Country Code，移动国家码）、MNC（Mobility Network Code，移动网络码）和TAC（Tracking Area Code，跟踪区域码）组成，由运营商统一规划。每个TAI对应一定物理位置区域。
amfSetIdFqdn|AMF SETID域名|参数可选性: 任选参数类型: 字符串参数范围: 0-99|参数作用：本参数用于配置AMF向NRF发现类型为"AMF"的NF时，发现请求携带的SETID FQDN。修改影响：发现请求将携带配置的SETID FQDN。数据来源：不涉及。默认值：不涉及。配置原则：本参数仅当目标NF类型为"AMF"时进行配置。每个AMF由AMF Region、AMF Set、AMF Pointer，这些信息加上PLMN共同组成GUAMI（Globally Unique AMF ID，全球唯一AMF标识），每个GUAMI唯一标识一个AMF。GUAMI = MCC+MNC+AMF IdentifierAMF Identifier = AMF Region ID+AMF Set ID+AMF Pointer其中AMF Region ID标识了一个区域，AMF Set ID唯一标识一个AMF Region内的AMF Set，AMF Pointer标识了AMF Set内的一个或多个AMF。
discoveryPolicy|发现策略|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1|参数作用：本参数用于设置AMF与NF的交互中，查找对端NF是否需要强制向NRF发现。修改影响：设置该参数将控制查找对端NF是否需要强制向NRF发现。数据来源：不涉及。默认值：不涉及。配置原则：无。AMF通过NRF发现NF成功后，可以将NF的信息缓存到本地，下次AMF与此NF交互时，可以不需要再次到NRF发现，直接读取本地缓存的NF数据。
pgwFqdn|PGW域名|参数可选性: 任选参数类型: 字符串参数范围: 0-127|参数作用：本参数用于配置AMF向NRF发现相关NF时，发现请求携带的PGW FQDN。格式为"epc.mnc.mcc.3gppnetwork.org"，例如"epc.mnc460.mcc01.3gppnetwork.org"。修改影响：发现请求将携带配置的PGW FQDN。数据来源：不涉及。默认值：不涉及。配置原则：无。 PGW：PDN网关（Packet Data Network Gateway），PGW域名中包含MCC（Mobile Country Code，移动国家码）和MNC（Mobility Network Code，移动网络码）。
preferredTaiFqdn|优先TAI域名|参数可选性: 任选参数类型: 字符串参数范围: 0-13|参数作用：本参数用于配置AMF向NRF发现相关NF时，发现请求携带的PREFERRED TAI FQDN。格式为"mcc-mnc-tac"，例如"460-01-1289ab"。修改影响：发现请求将携带配置的PREFERRED TAI FQDN。数据来源：不涉及。默认值：不涉及。配置原则：无。PREFERRED TAI：优先跟踪区域标识（Preferred Tracking Area Identity），由MCC（Mobile Country Code，移动国家码）、MNC（Mobility Network Code，移动网络码）和TAC（Tracking Area Code，跟踪区域码）组成，由运营商统一规划。每个TAI对应一定物理位置区域。携带优先跟踪区域标识时，NRF应优先选择能够服务于该跟踪区域标识的NF配置文件。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|该参数用于显示本命令的操作结果。




命令举例 


`
AMF向NRF发现名称为nsmf-pdusession，类型为SMF的NF。
NF DISCOVERY:SERVICENAME="nsmf-pdusession",TARGETNFTYPE="SMF"
` 


## 查询NF重试信息 
## 查询NF重试信息 


背景知识 


当对端NF SBI口过载时，会发送503或429响应，并携带Retry-After信息，AMF在接收到该响应时，在携带的Retry-After的时间周期内，新用户业务不能再使用该NF。 




功能说明 


本功能用于查询AMF接收对端NF的Retry-After信息，对应的NF列表时，使用该命令。 




子主题： 






### 查询NF重试信息(SHOW NF RETRY AFTER INFO) 
### 查询NF重试信息(SHOW NF RETRY AFTER INFO) 


功能说明 

该命令用于查询AMF上记录的对端服务SBI类型消息限制类型，包括IP、网元服务类型、重试时长以及剩余限制时长。 


注意事项 

无。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
NFID|NF标识|参数可选性: 必选参数类型: 字符串参数范围: 1-255|NF重试网元标识。
NFTYPE|NF类型|参数可选性: 任选参数类型: 字符串参数范围: 0-35|NF重试网元服务类型，包括UDM、PCF、AUSF 、AMF、SMF、SMSF、NSSF、SCP、SEPP。
IP|IP地址|参数可选性: 任选参数类型: 字符串参数范围: 0-50|NF重试网元IP地址。
RETRYAFTER|重试时长(秒)|参数可选性: 必选参数类型: 数字默认值: 0|重试时长。
REMAININGTIME|剩余受控时长(秒)|参数可选性: 必选参数类型: 数字默认值: 0|剩余受控时长（秒）。
TOTALNUM|总记录数|参数可选性: 必选参数类型: 数字|查询到的记录总数。
CURRENTNUM|本次查询数|参数可选性: 必选参数类型: 数字|当查询记录需要分批显示时，显示当前批次查询出的记录数。
QUERIEDNUM|已查询数|参数可选性: 必选参数类型: 数字|当查询记录需要分批显示时，显示已查询批次所查询到的记录数。
RESULT|查询结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该字段用于标识本次查询是否查询出当前全部的记录（一次最大查询103条记录）。查询结果包括：未完请继续查询查询结束




命令举例 


`
查询Retry-After相关信息。
SHOW NF RETRY AFTER INFO
` 


## 查询AMF接收OCI信息 
## 查询AMF接收OCI信息 


背景知识 


在5GC网络中的业务数据发生过载（即业务拥塞）时，AMF通过在服务化接口的请求或响应消息中携带OCI（Overload Control Information，过载控制信息）给对端NF，要求对端NF根据AMF发送的请求消息中携带的过载信息，来进行相应的过载控制，从而降低网络的负载，保障网络的稳定运行。 




功能说明 


本功能用于查询AMF所接收到的OCI（Overload Control Information，过载控制信息），即查询当前AMF正在处理哪些NF的OCI信息。 




子主题： 






### 查询AMF接收的OCI信息(SHOW NF OCI INFO) 
### 查询AMF接收的OCI信息(SHOW NF OCI INFO) 


功能说明 

该命令用于查询AMF目前接收到的OCI（Overload Control Information，过载控制信息）对应的NF列表，即查询当前AMF正在处理哪些NF的OCI信息。 


注意事项 

当AMF目前接收到的OCI（Overload Control Information，过载控制信息）对应的NF列表中的NF个数不大于64时，直接在EM界面中显示出所有NF OCI信息。 

当AMF目前接收到的OCI（Overload Control Information，过载控制信息）对应的NF列表中的NF个数大于64时，系统自动将NF OCI信息保存为文件，在EM上只显示文件的链接，操作员需要单击链接，自动下载文件，在下载后的文件中查看NF OCI信息。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
NFID|NF标识|参数可选性: 必选参数类型: 字符串参数范围: 1-255|本参数用于显示需要查询OCI信息的NF标识。
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 0-35|本参数用于显示OCI NF类型，包括SMF、PCF、NRF 、UDM、AUSF、SMSF、NSSF、AMF、GMLC、LMF等。
OLCMETRIC|控制百分比|参数可选性: 必选参数类型: 数字参数范围: 0-100|本参数用于查询OCI（Overload Control Information，过载控制信息）控制百分比，表示过载控制信息的发送方请求接收方控制流量的百分比，即需要减少请求消息的百分比。
VALIDITYPERIOD|有效时长（秒）|参数可选性: 必选参数类型: 数字参数范围: 0-65535|本参数用于查询OCI（Overload Control Information，过载控制信息）的有效时长，单位：秒。有效时长是指OCI信元指定的过载条件被认为是有效的时间长度，当超过此有效时长时，OCI无效。
TIMESTAMP|时间戳|参数可选性: 必选参数类型: 字符串参数范围: 1-30|本参数用于查询OCI（Overload Control Information，过载控制信息）时间戳，即OCI产生的时间。




命令举例 


`
查询NF OCI信息。
SHOW NF OCI INFO

-----------------Namf_Communication_0----------------
NF标识                               NF类型 控制百分比 有效时长（秒） 时间戳                         
-----------------------------------------------------------------------------------------------------
54804518-4191-46b3-955c-000000000001 SMF    50        175           Tues, 29 Dec 2020 09:49:37 GMT 
-----------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-12-28 07:14:33 耗时: 0.146 秒

` 


## 删除AMF接收OCI信息 
## 删除AMF接收OCI信息 


背景知识 


在5GC网络中的业务数据发生过载（即业务拥塞）时，AMF通过在服务化接口的请求或响应消息中携带OCI（Overload Control Information，过载控制信息）给对端NF，要求对端NF根据AMF发送的请求消息中携带的过载信息，来进行相应的过载控制，从而降低网络的负载，保障网络的稳定运行。 




功能说明 


本功能用于删除AMF所接收到的OCI（Overload Control Information，过载控制信息）。 




子主题： 






### 删除AMF接收的OCI信息(DEL NF OCI INFO) 
### 删除AMF接收的OCI信息(DEL NF OCI INFO) 


功能说明 

本命令用于操作员从接收的NF OCI（Overload Control Information，过载控制信息）列表中，删除指定或者全部的NF。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
NFInstanceId|NF实例ID|参数可选性: 任选参数类型: 字符串参数范围: 0-255|本参数用于设置需要从NF OCI（Overload Control Information，过载控制信息）列表中删除的NF的实例ID。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示本命令的操作结果。




命令举例 


`
清空接收的NF OCI列表。
DEL NF OCI INFO

(No.1) : DEL NF OCI INFO;
-----------------Namf_Communication_0_A----------------
操作结果
-------
成功
-------

记录数：1
执行成功耗时: 1.046 秒

` 


## 查询AMF接收LCI信息 
## 查询AMF接收LCI信息 


背景知识 


AMF通过在服务化接口的请求或响应消息中，携带 LCI（Load Control Information，负荷控制信息）给对端NF，以便对端NF可以更有效的执行负荷分担选择，从而实现NF之间负荷均衡，保障网元稳定运行。 




功能说明 


本功能用于查询AMF所接收到的LCI（Load Control Information，负荷控制信息），即AMF目前正在处理哪些NF的LCI信息。 




子主题： 






### 查询AMF接收的LCI信息(SHOW NF LCI INFO) 
### 查询AMF接收的LCI信息(SHOW NF LCI INFO) 


功能说明 

该命令用于查询AMF目前接收到的LCI（Load Control Information，负荷控制信息）对应的NF列表，即查询当前AMF正在处理哪些NF的LCI信息。 


注意事项 

当AMF目前接收到的LCI（Load Control Information，负荷控制信息）对应的NF列表中的NF个数不大于64时，直接在EM界面中显示出所有NF LCI信息。 

当AMF目前接收到的LCI（Load Control Information，负荷控制信息）对应的NF列表中的NF个数大于64时，系统自动将NF LCI信息保存为文件，在EM上只显示文件的链接，操作员需要单击链接，自动下载文件，在下载后的文件中查看NF LCI信息。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
NFID|NF标识|参数可选性: 必选参数类型: 字符串参数范围: 1-255|本参数用于显示需要查询LCI（Load Control Information，负荷控制信息）信息的对应的NF标识。
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 0-35|本参数用于显示需要查询LCI（Load Control Information，负荷控制信息）信息的对应的NF类型，包括SMF、PCF、NRF 、UDM、AUSF、SMSF、NSSF、AMF、GMLC、LMF等。
lCMETRIC|负荷百分比|参数可选性: 必选参数类型: 数字参数范围: 0-100|本参数用于显示LCI（Load Control Information，负荷控制信息）负荷百分比。
TIMESTAMP|时间戳|参数可选性: 必选参数类型: 字符串参数范围: 1-30|本参数用于查询LCI（Overload Control Information，过载控制信息）时间戳，即LCI产生的时间。




命令举例 


`
查询NF LCI信息。
SHOW NF LCI INFO

-----------------Namf_Communication_0----------------
NF标识                                                       NF类型     负荷百分比    时间戳                         
-------------------------------------------------------------------------------------------------------------------------------
54804518-4191-46b3-955c-000000000001    SMF         50               Tues, 29 Dec 2020 09:49:37 GMT 
-------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-12-28 07:14:33 耗时: 0.146 秒

` 


## 删除AMF接收LCI信息 
## 删除AMF接收LCI信息 


背景知识 


AMF通过在服务化接口的请求或响应消息中，携带 LCI（Load Control Information，负荷控制信息）给对端NF，以便对端NF可以更有效的执行负荷分担选择，从而实现NF之间负荷均衡，保障网元稳定运行。 




功能说明 


本功能用于删除AMF所接收到的LCI（Load Control Information，负荷控制信息）。 




子主题： 






### 删除AMF接收LCI信息(DEL NF LCI INFO) 
### 删除AMF接收LCI信息(DEL NF LCI INFO) 


功能说明 

本命令用于从接收的NF LCI（Load Control Information，负荷控制信息）列表中删除指定或者全部的NF。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
NFInstanceId|NF实例ID|参数可选性: 任选参数类型: 字符串参数范围: 0-255|本参数用于设置需要从NF LCI（Load Control Information，负荷控制信息）列表中删除的NF的实例ID。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示本命令的操作结果。




命令举例 


`
清空接收的NF LCI列表。
DEL NF LCI INFO

(No.1) : DEL NF LCI INFO;
-----------------Namf_Communication_0_A----------------
操作结果 
---------
成功     
---------

记录数：1
执行成功耗时: 1.046 秒

` 


## 查询AMF发送LCI信息 
## 查询AMF发送LCI信息 


背景知识 


AMF通过在服务化接口的请求或响应消息中，携带 LCI（Load Control Information，负荷控制信息）给对端NF，以便对端NF可以更有效的执行负荷分担选择，从而实现NF之间负荷均衡，保障网元稳定运行。 




功能说明 


本功能用于查询AMF向对端的哪些NF发送的LCI（Load Control Information，负荷控制信息）信息。 




子主题： 






### 查询AMF发送的LCI信息(SHOW AMF SEND LCI INFO) 
### 查询AMF发送的LCI信息(SHOW AMF SEND LCI INFO) 


功能说明 

该命令用于查询AMF发送的LCI（Load Control Information，负荷控制信息）。 


注意事项 

当AMF目前发送的LCI（Load Control Information，负荷控制信息）对应的NF列表中的NF个数不大于64时，直接在EM界面中显示出所有NF LCI信息。 

当AMF目前发送的LCI（Load Control Information，负荷控制信息）对应的NF列表中的NF个数大于64时，系统自动将NF LCI信息保存为文件，在EM上只显示文件的链接，操作员需要单击链接，自动下载文件，在下载后的文件中查看NF LCI信息。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
NFID|NF标识|参数可选性: 必选参数类型: 字符串参数范围: 1-255|本参数用于显示需要查询LCI（Load Control Information，负荷控制信息）信息的对应的NF标识。
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 0-35|本参数用于显示需要查询LCI（Load Control Information，负荷控制信息）信息的对应的NF类型，包括SMF、PCF、NRF 、UDM、AUSF、SMSF、NSSF、AMF、GMLC、LMF等。
TIMESTAMP|时间戳|参数可选性: 必选参数类型: 字符串参数范围: 1-30|本参数用于查询LCI（Load Control Information，过载控制信息）时间戳，即LCI产生的时间。




命令举例 


`
查询AMF发送的LCI信息。
SHOW AMF SEND LCI INFO: 
(No.4) : SHOW AMF SEND LCI INFO:
-----------------Namf_Communication_0----------------
输出文件路径
---------------
当前命令执行的结果被另存为文件，请点击这个URL下载：
ebf8caa1edcc4b448a03d14a50088a47_AMFShowNfLciInfo.csv
---------------

执行成功开始时间:2021-02-05 15:35:37 耗时: 0.33 秒
` 


## 删除AMF发送LCI信息 
## 删除AMF发送LCI信息 


背景知识 


AMF通过在服务化接口的请求或响应消息中，携带 LCI（Load Control Information，负荷控制信息）给对端NF，以便对端NF可以更有效的执行负荷分担选择，从而实现NF之间负荷均衡，保障网元稳定运行。 




功能说明 


本功能用于删除AMF向对端的哪些NF发送的LCI（Load Control Information，负荷控制信息）信息。 




子主题： 






### 删除AMF发送的LCI信息(DEL AMF SEND LCI INFO) 
### 删除AMF发送的LCI信息(DEL AMF SEND LCI INFO) 


功能说明 

本命令用于从AMF发送的LCI（Load Control Information，负荷控制信息）列表中删除指定或全部的NF。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
NFInstanceId|NF实例ID|参数可选性: 任选参数类型: 字符串参数范围: 0-255|本参数用于设置需要从AMF发送的 LCI（Load Control Information，负荷控制信息）列表中删除的NF的实例ID。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示本命令的操作结果。




命令举例 


`
从AMF发送的LCI（Load Control Information，负荷控制信息）列表中删除全部的NF。
DEL AMF SEND LCI INFO

(No.5) : DEL AMF SEND LCI INFO:
-----------------Namf_Communication_0----------------
操作结果 
---------
成功     
---------
记录数：1
执行成功开始时间:2021-02-05 15:44:24 耗时: 0.315 秒

` 


# 定位业务 
# 定位业务 


背景知识 


LCS（Location Services，定位业务）是移动通信网络通过无线信号测量来确定终端的地理位置信息及其移动速度的技术。LCS使得网络具备获取用户的地理位置信息的能力。 

LCS定位业务是3GPP协议中规定的标准业务，用于管理用户的定位信息。LCS业务可以通过LCS客户端、LCS服务器和终端的交互获得终端在某个时刻的地理位置信息以及信息的精确度等。 

运营商可基于网络的定位能力获取位置信息，并结合位置信息推出各式各样的位置业务应用服务。位置业务应用，将极大丰富运营商的业务，增强运营商的业务竞争力。 

AMF在定位业务中涉及到与GMLC（Gateway for Mobile Location Center，移动定位中心网关）和LMF（Location Management Function，定位管理功能）的交互。 


 
GMLC（Gateway Mobile Location Centre，移动位置中心网关）用于与LCS客户端及AMF交互，执行LCS客户端的定位请求并向其回送定位结果。具体参见3GPP TS 23.273描述的5G LCS功能，3GPP TS 23.502协议“4.13.5 Location Services procedures”章节。
AMF支持通过GMLC（Gateway for Mobile Location Center，移动定位中心网关）接收来自LCS Client的定位请求，获取终端的最新ECGI（E-UTRAN Cell Global Identifier，E-UTRAN小区全球标识）信息，并将ECGI信息通过SLg接口上报给GMLC。由于该LCS定位方法的定位结果为小区ID（非地理的经玮度位置信息），其定位精度取决于小区的覆盖范围，精度较低。 

 
LMF（Location Management Function，定位管理功能）用于具体收集、计算和决定UE的相关位置信息，LMF会通过AMF与UE或RAN执行具体的定位过程，下行及上行消息需要通过AMF在LMF与UE或RAN之间转发。具体参见3GPP TS 23.273描述的5G LCS功能，3GPP TS 23.502协议“4.13.5 Location Services procedures”“5.2.15 LMF Services”章节及LMF对应的接口协议3GPP TS 29.572。 

 




功能说明 


本功能用于对AMF中的LMF转发信息进行维护。 




子主题： 






## 查询LMF转发表信息 
## 查询LMF转发表信息 


背景知识 


在定位业务中，LMF会通过AMF与UE或RAN执行具体的定位过程，下行及上行消息需要通过AMF在LMF与UE或RAN之间转发。 




功能说明 


本功能用于查询AMF中的LMF转发信息。 




子主题： 






### 查询LMF转发表信息(SHOW LMF FORWARDING INFO) 
### 查询LMF转发表信息(SHOW LMF FORWARDING INFO) 


功能说明 

该命令用于查询AMF保存的LMF转发表。 

LMF转发表用于LMF通过AMF向UE/RAN发送定位消息后生成记录，UE/RAN向AMF返回定位消息时，AMF将使用此转发表找到对应的LMF并向其返回消息。 


注意事项 

入参为SC逻辑编号和LCS关联ID只能二选一。 

入参为SC逻辑编号时，当记录数不大于100时，执行一次，就能显示出所有LMF转发表信息。当记录数大于100时，需要多次执行，才能显示出所有LMF转发表信息。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicno|SC逻辑编号|参数可选性: 必须单选参数类型: 数字参数范围: 1-1000|参数作用：本参数用于输入SC（Service Component，服务组件）逻辑编号，查询指定SC下的LMF转发表信息。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询SC逻辑编号，具体命令格式为： SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm"。
correlationid|LCS关联ID|参数可选性: 必须单选参数类型: 字符串参数范围: 1-255|参数作用：本参数用于输入LCS关联ID，查询指定LCS关联ID的LMF转发表信息。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|查询结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3|本参数用于显示查询结果。
totalnum|总数|参数可选性: 任选参数类型: 数字|本参数用于显示查询的记录总数。
currentnum|本次查询数|参数可选性: 任选参数类型: 数字|本参数用于显示本次查询的记录数。
queriednum|已查询数|参数可选性: 任选参数类型: 数字|本参数用于显示累计已经查询的记录数（包括本次查询出的个数）。
correlationid|LCS关联ID|参数可选性: 任选参数类型: 字符串参数范围: 1-255|本参数用于显示LCS关联ID。
lmfid|LMF ID|参数可选性: 任选参数类型: 字符串参数范围: 1-100|本参数用于显示LMF的实例ID。
timestamp|时间戳|参数可选性: 任选参数类型: 字符串参数范围: 1-32|本参数用于显示记录插入时的时间戳。




命令举例 


`
查询LCS关联ID为"460048000000025-MT-0-0-1-661585758"的转发表信息。
SHOW LMF FORWARDING INFO:CORRELATIONID="460048000000025-MT-0-0-1-661585758";

(No.1) : SHOW LMF FORWARDING INFO:CORRELATIONID="460048000000025-MT-0-0-1-661585758"
-----------------Namf_Communication_0----------------
查询结果 总数 本次查询数 已查询数 
---------------------------------
成功
---------------------------------
记录数：1
LCS关联ID                           LMF ID                                时间戳
-----------------------------------------------------------------------------------------------------
460048000000025-MT-0-0-1-661585758  f81d4fae-7dec-11d0-1111-123456789012  Thu, 06 May 2021 16:02:53 GMT
-----------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2021-04-29 16:47:55 耗时: 0.142 秒

查询SC逻辑编号为1的SC下的转发表信息。
SHOW LMF FORWARDING INFO:SCLOGICNO=1;

(No.2) : SHOW LMF FORWARDING INFO:SCLOGICNO=1
-----------------Namf_Communication_0----------------
查询结果  总数  本次查询数  已查询数
------------------------------------
成功      2     2           2
------------------------------------
记录数：1
LCS关联ID                            LMF ID                                 时间戳
-------------------------------------------------------------------------------------------------------
460000000000001-MT-0-0-1-661585758   f81d4fae-7dec-11d0-1111-123456789012   Thu, 06 May 2021 10:15:00 GMT
460000000000002-MT-0-0-1-123456788   7dec4fae-6354-56d4-1234-657686541644   Thu, 06 May 2021 16:02:53 GMT
-------------------------------------------------------------------------------------------------------
记录数：2
执行成功开始时间:2021-04-29 16:47:55 耗时: 0.142 秒

` 


## 删除LMF转发表信息 
## 删除LMF转发表信息 


背景知识 


在定位业务中，LMF会通过AMF与UE或RAN执行具体的定位过程，下行及上行消息需要通过AMF在LMF与UE或RAN之间转发。 




功能说明 


本功能用于删除AMF中的LMF转发信息，仅在必要的异常情况下使用。 




子主题： 






### 删除LMF转发表信息(DELETE LMF FORWARDING INFO) 
### 删除LMF转发表信息(DELETE LMF FORWARDING INFO) 


功能说明 

该命令用于删除AMF保存的LMF转发表。 

LMF转发表用于LMF通过AMF向UE/RAN发送定位消息后生成记录，UE/RAN向AMF返回定位消息时，AMF将使用此转发表找到对应的LMF并向其返回消息。 


注意事项 

两个入参SC逻辑编号和LCS关联ID不能同时输入，最多只能输入一个，可以全都不输入。 

不输入SC逻辑编号和LCS关联ID时，表明删除AMF所有保存的LMF转发表。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicno|SC逻辑编号|参数可选性: 任意单选参数类型: 数字参数范围: 1-1000|参数作用：本参数用于输入SC（Service Component，服务组件）逻辑编号，删除指定SC下的LMF转发表信息。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询SC逻辑编号，具体命令格式为： SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm"。
correlationid|LCS关联ID|参数可选性: 任意单选参数类型: 字符串参数范围: 1-255|参数作用：本参数用于输入LCS关联ID，删除指定LCS关联ID的LMF转发表信息。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|本参数用于显示命令执行结果。




命令举例 


`
删除LCS关联ID为"460048000000025-MT-0-0-1-661585758"的转发表信息。
DELETE LMF FORWARDING INFO:CORRELATIONID="460048000000025-MT-0-0-1-661585758";

(No.1) : DELETE LMF FORWARDING INFO:CORRELATIONID="460048000000025-MT-0-0-1-661585758"
-----------------Namf_Communication_0----------------
执行结果 
--------
成功
--------
记录数：1
执行成功开始时间:2021-04-29 16:47:55 耗时: 0.142 秒

删除SC逻辑编号为1的SC下的转发表信息。
DELETE LMF FORWARDING INFO:SCLOGICNO=1;

(No.1) : DELETE LMF FORWARDING INFO:SCLOGICNO=1
-----------------Namf_Communication_0----------------
执行结果 
--------
成功
--------
记录数：1
执行成功开始时间:2021-04-29 16:47:55 耗时: 0.142 秒

` 


# AMF网元过负荷控制 
# AMF网元过负荷控制 


背景知识 


AMF的周边网元（AUSF，UDM等）发生过负荷后，AMF可以自动感知或通过接口消息中的特定的信元获取周边网元过负荷信息。 




功能说明 


本功能用于查询AMF的周边网元（AUSF，UDM等）的过负荷信息。 




子主题： 






## 查询AMF自动过负荷信息(SHOW AMF AUTO CNG INFO) 
## 查询AMF自动过负荷信息(SHOW AMF AUTO CNG INFO) 


功能说明 

本命令用于查询AMF自动过负荷信息。 


注意事项 

需要通过[SET AMF AUTOCTL BASIC PARA]命令开启AMF自动过负荷功能需要开启。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于设置SC（Service Component，服务组件）逻辑编号，查询指定SC对应的AMF自动过负荷控制信息。可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1
threadID|实例号|参数可选性: 必选参数类型: 数字参数范围: 1-6|该参数用于设置单SC（Service Component，服务组件）实例号，其中大规格虚机实例号范围为1~6，中规格虚机实例号范围为1~2，小规格虚机实例号为1。商用局规格一般为大虚机，实例号范围为1~6。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
thread|实例号|参数可选性: 必选参数类型: 数字|本参数用于显示当前记录所归属的实例。
starttime|周期开始时间（秒）|参数可选性: 必选参数类型: 字符串参数范围: 0-100|本参数用于显示控制周期起始时间。
judgeperiod|评判周期（秒）|参数可选性: 必选参数类型: 数字|本参数用于显示控制周期的时间长度，根据配置可能是5s或15s。
startcaps|触发拥塞的接入业务通过数量|参数可选性: 必选参数类型: 数字|本参数用于显示触发拥塞的接入业务通过数量。只有在本实例，每秒的业务（初始注册，局间位置更新注册和GUTI非本局的注册和业务请求（全量容灾导致））数量超过配置的值时，才可能会触发本功能。即如果业务量过低是不被控制的。
limitcaps|初始限制的接入业务最大数量|参数可选性: 必选参数类型: 数字|本参数用于显示初始限制的接入业务最大数量。只有在本SC，每秒的业务（初始注册，局间位置更新注册和GUTI非本局的注册和业务请求（全量容灾导致））数量超过配置的值时，即使成功率高于门限，也会触发本功能，使初始业务速率不能大于该数值 。
goalsuccrate|触发提升通过业务数量的业务成功率（%）|参数可选性: 必选参数类型: 数字|本参数用于显示触发提升通过业务数量的业务成功率。
periodservnum|周期内初始业务请求数（每秒）|参数可选性: 必选参数类型: 数字|本参数用于显示周期内每秒初始业务请求数。
periodpassrate|周期允许通过速率（每秒）|参数可选性: 必选参数类型: 数字|本参数用于显示周期允许每秒通过速率。
n8reqnum|发出到UDM请求数|参数可选性: 必选参数类型: 数字|本参数用于显示每周期发出到UDM请求数。
n8respscuccnum|收到的UDM成功响应数|参数可选性: 必选参数类型: 数字|本参数用于显示每周期收到的UDM成功响应数。
n8respfailassuccnum|收到的UDM失败响应当做成功响应的数|参数可选性: 必选参数类型: 数字|本参数用于显示每周期收到的UDM失败响应当做成功响应的数。
n8succrate|发送给UDM的请求消息的成功率（%）|参数可选性: 必选参数类型: 数字|本参数用于显示每周期发送的UDM的请求消息的成功率。
n12reqnum|发出到AUSF请求数|参数可选性: 必选参数类型: 数字|本参数用于显示每周期发出到AUSF请求数。
n12respscuccnum|收到的AUSF成功响应数|参数可选性: 必选参数类型: 数字|本参数用于显示每周期收到的AUSF成功响应数。
n12respfailassuccnum|收到的AUSF失败响应当做成功响应的数|参数可选性: 必选参数类型: 数字|本参数用于显示每周期收到的AUSF失败响应当做成功响应的数。
n12succrate|发送给AUSF的请求消息的成功率（%）|参数可选性: 必选参数类型: 数字|本参数用于显示每周期发送的AUSF的请求消息的成功率。




命令举例 


`
查询AMF自动过负荷控制信息
SHOW AMF AUTO CNG INFO

(No.1) : SHOW AMF AUTO CNG INFO:SCLOGICNO=1,THREADID=6
-----------------Namf_Communication_0----------------
实例号 周期开始时间（秒）  评判周期（秒） 触发拥塞的接入业务通过数量 初始限制的接入业务最大数量 触发提升通过业务数量的业务成功率（%） 周期内初始业务请求数（每秒） 周期允许通过速率（每秒） 发出到UDM请求数 收到的UDM成功响应数 收到的UDM失败响应当做成功响应的数 发送给UDM的请求消息的成功率（%） 发出到AUSF请求数 收到的AUSF成功响应数 收到的AUSF失败响应当做成功响应的数 发送给AUSF的请求消息的成功率（%） 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6      2022-05-26 06:33:34 9              20                         90                         80                                    2                            18                        18             12                   6                                 100                             6                6                    0                                  100                               
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1

` 


## 查询AMF自动过负荷学习信息(SHOW AMF AUTO LEARN INFO) 
## 查询AMF自动过负荷学习信息(SHOW AMF AUTO LEARN INFO) 


功能说明 

查询AMF自动过负荷学习信息。 


注意事项 

需要开启学习功能，学习到的参数是否用于控制还需要单独开启。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于设置SC（Service Component，服务组件）逻辑编号，查询指定SC对应的AMF自动过负荷学习信息。可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1
threadID|实例号|参数可选性: 必选参数类型: 数字参数范围: 1-6|该参数用于设置单SC（Service Component，服务组件）实例号，其中大规格虚机实例号范围为1~6，中规格虚机实例号范围为1~2，小规格虚机实例号为1。商用局规格一般为大虚机，实例号范围为1~6。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
thread|实例号|参数可选性: 必选参数类型: 数字|本参数用于显示当前记录所归属的实例。
time|学习时间|参数可选性: 必选参数类型: 字符串参数范围: 0-100|本参数用于显示学习到该值的时间。
startcaps|接入业务通过数量|参数可选性: 必选参数类型: 数字|本参数用于显示学习到的7天内的最大通过业务量。统计本线程每秒的业务（初始注册，他局位置更新注册和GUTI非本局的注册和业务请求（全量容灾导致））。
n8succrate|N8接口的业务成功率（%）|参数可选性: 必选参数类型: 数字|本参数用于显示学习到的7天内的最大通过业务量时对应的N8接口成功率。
n12succrate|N12接口的业务成功率（%）|参数可选性: 必选参数类型: 数字|本参数用于显示学习到的7天内的最大通过业务量时对应的N12接口成功率。
lasttime|上次冲击时间|参数可选性: 必选参数类型: 字符串参数范围: 0-100|本参数用于显示上次冲击时间。
lastpassnum|学习到的控制门限|参数可选性: 必选参数类型: 数字|本参数用于显示上次冲击发生后，学习到的最优门限值。




命令举例 


`
查询AMF自动过负荷学习信息
SHOW AMF AUTO LEARN INFO

(No.1) : SHOW AMF AUTO LEARN INFO:SCLOGICNO=1,THREADID=1
-----------------Namf_Communication_0----------------
实例号 学习时间 接入业务通过数量 N8接口的业务成功率（%） N12接口的业务成功率（%） 上次冲击时间 学习到的控制门限 
----------------------------------------------------------------------------------------------------------------
1               0                0                       0                                     0                
----------------------------------------------------------------------------------------------------------------
记录数：1

` 


## 开启自动负荷日志记录(START AMFALCLOG) 
## 开启自动负荷日志记录(START AMFALCLOG) 


功能说明 

即指定开启AMF的自动过负荷日志记录的时长时间，超过设置时长后自动停止。单位分钟。 

可以多次执行，以最后时长为准。设置为0，则立刻停止日志记录。 


注意事项 

拥塞状态下记录日志的功能和本处是独立功能。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
ALCLOGTIME|日志记录时长（分钟）|参数可选性: 必选参数类型: 数字参数范围: 0-255|




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|本参数用于显示开启AMF的自动过负荷日志记录的操作结果。




命令举例 


`
开启AMF的自动过负荷日志记录的时长时间。
START AMFALCLOG
` 


# 容灾相关 
# 容灾相关 


背景知识 


容灾恢复是当AMF发生故障后，通过各种方式，实现相关的业务恢复。 




功能说明 


容灾恢复是当AMF发生故障后，通过各种方式，实现相关的业务恢复。 




子主题： 






## 负载重平衡 
## 负载重平衡 


背景知识 


负荷重平衡启动：该功能在AMF的部分用户及业务迁移的场景下使用，用于调整AMF的运行负荷，在负荷严重不均时，需要启用此功能。 

负荷重平衡停止：当AMF启用负荷重平衡功能后，经过一段时间，当AMF的运行负荷达到期望的正常状态时，可以停止负荷重平衡。 

负荷重平衡查询：在执行AMF负载重平衡的过程中，如果需要查询当前各GUAMI的实际状态，使用此命令。 




功能说明 


本功能用于启动、停止和查询负载重平衡。 




子主题： 






### 负载重平衡启动(LOAD REBALANC START) 
### 负载重平衡启动(LOAD REBALANC START) 


功能说明 

该命令用于开启AMF的负载重平衡。 

负载重平衡功能是指一个AMF Set内的所有AMF的负载，各自达到平衡的状态，即每个AMF上的负载都比较均匀，不会出现某个AMF的负载过高，或者某个AMF上的负载过低的情况。 

负载重平衡操作一般在如下情况中使用。 


 
AMF Set内各AMF的负荷由于各种原因（如用户活跃度不同等原因），会出现在某时刻某个AMF负荷相对比较高的情况。 

 
在对某个AMF进行计划性运维管理动作前（如升级），一般需要事先将其上的注册用户平滑的迁移到其他AMF上，之后再对此AMF执行维护操作，从而将维护对网络和用户的影响降低到最小。在将某个AMF内的业务迁移到其他AMF后，由于对应AMF的负载增大，也需要对AMF Set内的所有AMF执行负荷重平衡操作。 

 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
WEIGHTSWITCH|是否更新容量权重参数|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOTUPDATE|该参数用于指示AMF是否将容量权重参数在负荷重平衡期间更新为0。同时，此值将在重平衡停止后，更新为重平衡启动前的配置值。该参数包括以下选项：不更新权重：容量权重参数在负荷重平衡期间取值不变。更新权重：容量权重参数在负荷重平衡期间将更新为0
GUAMIIDLIST|GUAMI ID列表|参数可选性: 必选参数类型: 字符串参数范围: 1-1000|该参数用于配置需要执行负荷重平衡AMF的GUAMI（Globally Unique AMF ID，全球唯一AMF标识）ID。每个GUAMI ID对应GUAMI池配置中的一个GUAMI，该参数必须配置为属于本AMF的GUAMI ID）。必选参数，可以为一个或多个，最大支持同时输入8个。如果输入多个GUAMI ID，各个GUAMI ID需要使用空格隔开。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-30|该参数用于显示本命令的操作结果。




命令举例 


`
AMF对ID为1的GUAMI启动负载重平衡，更新容量权重参数。
LOAD REBALANC START:WEIGHTSWITCH="UPDATE",GUAMIIDLIST="1"
` 


### 负载重平衡停止(LOAD REBALANC STOP) 
### 负载重平衡停止(LOAD REBALANC STOP) 


功能说明 

该命令用于停止AMF的负载重平衡。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-30|该参数用于显示本命令的操作结果。




命令举例 


`
AMF停止负载重平衡。
LOAD REBALANC STOP

(No.2) : LOAD REBALANC STOP:
-----------------Namf_Communication_0_A----------------
操作结果
SUCCESS

执行成功开始时间:2020-06-20 15:21:36 耗时: 0.921 秒

` 


### 负载重平衡查询(LOAD REBALANC QUERY) 
### 负载重平衡查询(LOAD REBALANC QUERY) 


功能说明 

该命令用于查询AMF中各GUAMI的当前状态。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|该参数用于显示本命令的操作结果。
GUAMILIST|GUAMI状态列表|参数可选性: 任选参数类型: 字符串参数范围: 0-8000|该参数用于显示AMF中各GUAMI的当前状态。




命令举例 


`
AMF负载重平衡查询。
LOAD REBALANC QUERY
` 


## 主动负载重平衡 
## 主动负载重平衡 


背景知识 


在备份用户部分信息的情况下，负荷重平衡功能对于UE发起注册的流程会继续处理，对于其他非注册的流程（如业务请求或会话流程）将触发UE重注册，原有会话丢失。同时，负荷重平衡的进度是由UE相关业务触发的，整体迁移进度不可控，且无法指定用户迁移。引入主动负载重平衡可以根据需要控制迁移指定数量的UE，适当控制迁移的进度，也可以指定某个UE进行迁移。尽力使UE平滑迁移到其他AMF上，避免原有会话丢失。
。 




功能说明 


本功能用于启动、停止和查询主动负载重平衡。 

主动负载重平衡启动：AMF主动触发用户进行负载重平衡。其中按卸载类型不同，执行方式不同。 

主动负载重平衡停止：在主动负载重平衡执行过程中，通过查询负载重平衡的状态后，决定结束主动负载重平衡。 

主动负载重平衡查询：在主动负载重平衡执行过程中，可以查询当前卸载的用户数等信息，以便及时了解负载重平衡的状态。 




子主题： 






### 主动重平衡启动(ACTIVE REBALANC START) 
### 主动重平衡启动(ACTIVE REBALANC START) 


功能说明 

该命令用于主动重平衡启动，即AMF主动触发用户进行负载重平衡。其中按卸载类型不同，执行方式不同，具体如下： 


 
按保留用户千分比卸载，即指明AMF需要保留的用户千分比，其他用户将迁移到Set内的其他AMF。举例，保留用户千分比为0时，表示将用户全部迁移。 

 
按用户数卸载，即指明AMF需要迁移到Set内其他AMF上的总用户数。 

 
按SUPI号段卸载，即指明AMF需要迁移的用户SUPI号段，AMF将此用户号段的用户迁移到Set内其他AMF。 

 
按GPSI号段卸载，即指明AMF需要迁移的用户GPSI号段，AMF将此用户号段的用户迁移到Set内其他AMF。 

 


注意事项 


 
本命令执行后，配置立即生效。 

 
重平衡启动命令的执行结果为成功只代表启动主动重平衡，并不代表重平衡执行完成。重平衡执行情况需要通过ACTIVE REBALANC QUERY命令进行查询。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
WEIGHTSWITCH|是否更新容量权重参数|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOTUPDATE|该参数用于指示AMF是否将容量权重参数在负荷重平衡期间更新为0。同时，此值将在重平衡停止后，更新为重平衡启动前的配置值。该参数包括以下选项：不更新权重：容量权重参数在负荷重平衡期间取值不变。更新权重：容量权重参数在负荷重平衡期间将更新为0。
UNLOADTYPE|卸载类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3|该参数用于指示AMF主动负载重平衡的方式。该参数包括以下选项：按保留用户千分比卸载用户。按用户数卸载用户。按SUPI号段卸载用户。按GPSI号段卸载用户。
RESERVUSERRATE|保留用户千分比(‰)|参数可选性: 任选参数类型: 数字参数范围: 0-999|该参数用于指示保留的用户千分比，（1000-保留用户千分比）将是需要卸载的用户数千分比例。
USERAMOUNT|卸载用户数|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于指示需要卸载的用户数量。
USERSEGMENT|SUPI/GPSI号段|参数可选性: 任选参数类型: 字符串参数范围: 5-15|该参数用于指示需要卸载的用户号段。
UNLOADSTEP|卸载步长|参数可选性: 必选参数类型: 数字参数范围: 1-200默认值: 50|该参数用于设定AMF主动卸载用户的步长，固定每实例1秒扫描多少用户。AMF在卸载预处理时间超时之后，会按照该步长主动扫描并卸载用户。
PREPROCTIME|卸载预处理时间(分钟)|参数可选性: 必选参数类型: 数字参数范围: 0-1440默认值: 54|该参数用于设定卸载预处理时间。在该时长内，AMF等待用户当前流程处理完毕后再执行卸载。单位：分钟。
ACTIVERELEASE|主动释放|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NOTACTIVERLS|该参数用于指示预处理阶段是否主动执行AN释放。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3|该参数用于显示本命令的操作结果。




命令举例 


`
AMF启动主动负载重平衡，不更新容量权重参数，卸载全部用户，卸载步长为每实例1秒扫描50个用户，卸载预处理时间为54分钟，预处理阶段不主动执行AN释放。
ACTIVE REBALANC START:WEIGHTSWITCH="NOTUPDATE",UNLOADTYPE="RATE",RESERVUSERRATE=0,UNLOADSTEP=50,PREPROCTIME=54,ACTIVERELEASE="NOTACTIVERLS"
` 


### 主动重平衡停止(ACTIVE REBALANC STOP) 
### 主动重平衡停止(ACTIVE REBALANC STOP) 


功能说明 

该命令用于主动重平衡停止。在主动负载重平衡执行过程中，通过查询负载重平衡情况决定结束主动负载重平衡时，使用此命令。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-10|该参数用于显示本命令的操作结果。该参数包括以下选项：成功。卸载中，本次命令未生效。功能未启用：License或者软参配置开关未打开。其他失败：命令未提供卸载类型对应的详细参数。




命令举例 


`
AMF停止主动负载重平衡。
ACTIVE REBALANC STOP
` 


### 主动重平衡查询(ACTIVE REBALANC QUERY) 
### 主动重平衡查询(ACTIVE REBALANC QUERY) 


功能说明 

该命令用于主动重平衡查询。在主动负载重平衡执行过程中，可以执行该命令查询当前卸载的用户数等信息，以便及时了解重平衡状态，帮助判断是否可以手动停止负载重平衡。 


注意事项 

本命令执行后，配置立即生效。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数用于显示本命令的操作结果，查询成功或查询失败。
UNLOADTYPE|卸载类型|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-4|该参数用于指示AMF主动负载重平衡的方式。该参数包括以下选项：未知，当未执行过卸载时，卸载方式为未知。按保留用户千分比卸载用户。按用户数卸载用户。按SUPI号段卸载用户。按GPSI号段卸载用户。
INITUSERAMOUNT|卸载初期用户数|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于指示执行卸载前的用户数量。
UNLOADUSERAMOUNT|卸载用户数|参数可选性: 任选参数类型: 数字参数范围: 0-4294967295|该参数用于指示已经卸载的用户数量。
UNLOADSTATUS|卸载状态|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-3|该参数用于指示AMF主动负载重平衡的状态。该参数包括以下选项：未执行卸载。阶段一卸载中。阶段二卸载中。卸载结束。卸载停止。
UNLOADDETAIL|卸载详细信息|参数可选性: 任选参数类型: 字符串参数范围: 0-7000|该参数用于指示AMF主动负载重平衡过程中负荷卸载控制周期的卸载详细信息，仅在配置支持负荷卸载优化并且存在卸载详细信息时携带。每个负荷卸载周期的详细信息包括以下参数：负荷卸载控制周期结束时间。负荷卸载控制周期结束后剩余用户数。负荷卸载控制周期内活动用户数。负荷卸载控制周期内活动用户卸载数量。负荷卸载控制周期内主动扫描卸载数量。




命令举例 


`
查询AMF主动负载重平衡信息。
ACTIVE REBALANC QUERY
` 


## 部分备份功能 
## 部分备份功能 


背景知识 


当AMF支持部分备份功能时，需要将本局注册用户的用户标识及位置信息备份到其他局。本局故障后，其他局能够通过备份数据寻呼到用户，从而恢复业务。 




功能说明 


本功能用于查询或清除备份数据。 




子主题： 






### 备份数据清除(CLEAR BACKUPDATA) 
### 备份数据清除(CLEAR BACKUPDATA) 


功能说明 

该命令用于清除本AMF作为其他某个AMF的备份AMF时，本AMF上备份的其他AMF的用户数据。 


注意事项 

该命令为高危命令。本命令执行后，本AMF会清除备份AMF的用户数据，再收到归属备份AMF用户的下行消息时，会造成寻呼等流程失败。 

在以下两种场景中，需要使用到此命令。 


 
当通过Namf_MP_0模式下的SET DISASTERRECOVERYPOLICY命令的将AMF的容灾策略配置为“无UDSF部分备份”方式时
。 

 
当前AMF仅支持清除本地CACHE中的备份数据，不删除UDSF中的用户数据。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
OperationFlag|删除类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-5默认值: CACHE ONLY|本参数用于配置在本AMF上删除为其他AMF备份的用户数据的类型。仅删除本地Cache：仅将本地CACHE中的备份数据清除，不删除UDSF中的用户数据。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
operationResult|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-5|本参数用于显示备份数据清除结果。包含：成功，失败，容灾策略配置错误。




命令举例 


`
删除本AMF为其他AMF备份的用户数据。
CLEAR BACKUPDATA:OPERATIONFLAG="CACHE ONLY"
` 


### 备份数据查询(SHOW BACKUPDATA) 
### 备份数据查询(SHOW BACKUPDATA) 


功能说明 

该命令用于查询本AMF作为其他某个AMF的备份AMF时，本AMF上备份的其他AMF的用户数据。 


注意事项 

已通过Namf_MP_0模式下的[SET DISASTERRECOVERYPOLICY]命令，将AMF的容灾策略配置为“无UDSF部分备份”方式。

如果不输入SUPI进行查询，且本地Cache无备份数据，那么AMF不会向CDB主动获取用户数据。 

 查询本地及UDSF是否有备份数据，并显示至多五条。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 任选参数类型: 字符串参数范围: 5-15|本参数用于设置用户的SUPI。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
queryResult|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-5|备份数据查询结果。包含：成功，失败，本地SC无备份数据，无该用户的备份数据，容灾策略配置错误，等待CDB返回超时。
totalCount|UDSF总记录数|参数可选性: 任选参数类型: 数字|当查询备份信息命令中未携带SUPI时，需要返回本局至多5条用户备份数据信息和UDSF中的记录总数。
SUPI|SUPI|参数可选性: 任选参数类型: 字符串参数范围: 0-100|SUPI ： 订阅永久标识符
guti|5G-GUTI|参数可选性: 任选参数类型: 字符串参数范围: 0-1000|5G全球唯一临时标识符。<5G-GUTI> :=  <5G-TMSI>
taiList|TAI_LIST|参数可选性: 任选参数类型: 字符串参数范围: 0-1000|跟踪区域标识列表。




命令举例 


`
查询用户460011122000001的备份数据。
SHOW BACKUPDATA:SUPI="460011122000001"   
(No.1) : SHOW BACKUPDATA:SUPI="460011122000001"
-----------------Namf_Communication_0_A----------------
执行结果
无该用户的备份数据
` 


## NF操作命令 
## NF操作命令 


背景知识 


5GC网络中，需要识别和维护NF的故障状态，从而降低因NF故障对业务处理造成的影响，同时也能够在NF恢复后重新使用NF处理业务。 




功能说明 


本功能包括： 


 
重新启用故障的NF。 

 
查询NF故障列表，故障列表中的NF均为已故障NF。 

 
删除AMF本地链路检测的检测对象，可以使用NFInstanceId或FQDN指定删除对应的NF。 

 
删除容灾节点通知记录，指示AMF在后续交互中重新向周边网元携带备份AMF信息。删除方式可以全量删除也可以指定网元类型删除。 

 
根据NFID删除容灾节点通知记录，指示AMF在后续交互中重新向周边网元携带备份AMF信息。 

 




子主题： 






### NF启用(DEL NFENABLED) 
### NF启用(DEL NFENABLED) 


功能说明 

本命令用于从NF故障列表中删除指定或全部的NF，如需要将NF手动投入服务时，使用该命令。 


注意事项 


 
本命令执行后，配置立即生效。 

 
该命令为高危命令！本命令执行后，AMF将认为该NF处于正常态并向该NF发消息，如果实际上该NF仍处于故障态，则AMF与该NF的交互消息会失败，影响流程成功率。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
EnabledMode|启用模式|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于指定对NF启用的方式，包括以下几种方式。 按条件启用：根据条件启用指定的NF。全部启用：启用故障列表中所有NF。
NFInstanceId|NF实例ID|参数可选性: 任选参数类型: 字符串参数范围: 0-36|本参数用于配置启用NF的实例ID。启用模式为按条件启用时，NF实例ID和NF FQDN需要二选一。
NFFQDN|NF FQDN|参数可选性: 任选参数类型: 字符串参数范围: 0-127|本参数用于配置启用NF的FQDN。启用模式为按条件启用时，NF实例ID和NF FQDN需要二选一。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义|该参数用于显示本命令的操作结果。




命令举例 


`
所有故障NF投入使用。
DEL NFENABLED:ENABLEDMODE="ALL"

(No.1) : DEL NFENABLED:ENABLEDMODE="ALL";
-----------------Namf_Communication_0_A----------------
操作结果
成功

记录数：1
执行成功耗时: 1.046 秒

` 


### 故障NF列表查询(SHOW NFFAULTYLIST) 
### 故障NF列表查询(SHOW NFFAULTYLIST) 


功能说明 

该命令用于查询AMF上记录的NF故障列表，故障列表中的NF均为已故障的NF，包括NF标识以及NF类型。 


注意事项 

当故障NF个数不大于64时，直接在EM界面中显示出所有故障NF信息。 

当故障NF个数大于64时，系统自动将故障NF信息保存为文件，在EM上只显示文件的链接，操作员需要单击链接，自动下载文件，在下载后的文件中查看故障NF信息。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
NFID|NF标识|参数可选性: 必选参数类型: 字符串参数范围: 0-127|NF标识。
NFTYPE|NF类型|参数可选性: 必选参数类型: 字符串参数范围: 1-8|NF类型。
DATETIME|NF不可达时间戳|参数可选性: 必选参数类型: 字符串参数范围: 1-32|NF不可达时间戳。
RECOVERYFLAG|NF状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3|NF状态。
FAULTFLAG|故障指示|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-3|检测出故障的方法。
FQDN|FQDN|参数可选性: 必选参数类型: 字符串参数范围: 0-255|NF FQDN。
NFINSTANCENAME|NF实例名|参数可选性: 必选参数类型: 字符串参数范围: 0-127|NF实例名。




命令举例 


`
查询NF故障列表信息。
SHOW NFFAULTYLIST

(No.1) : SHOW NFFAULTYLIST:
----------------------------------------------------------------Namf_Communication_0------------------------------------------------------------------------------------------------
NF标识                                  NF类型          NF不可达时间戳          NF状态          故障指示          FQDN                                  NF实例名                                                                                           
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
f81d4fae-7dec-11d0-a765-112233445566    AUSF           2022.06.02 16:11:53     NF不可达        NRF检测          ausf.nfdiscovery.fqdn.zte.com.cn      GD_GX_NN_AUSF100_C_ZTE
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2022-06-02 16:10:54 耗时: 0.26 秒

` 


### 删除本地检测(DEL LOCAL DETECTION) 
### 删除本地检测(DEL LOCAL DETECTION) 


功能说明 

该命令用于删除AMF本地链路检测的检测对象。当关闭本地链路检测功能时，为了减少链路检测消息，使用该命令。命令执行成功后，通过[SHOW DETECT OFFICE INFO]命令查询检测局向概要信息，查询结果中无该检测对象。


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mode|删除方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: NFINSTANCEID|参数作用：该参数用于指定待删除的本地检测NF ID类型。有以下两种选项：按NF实例ID：NF ID为NF的实例ID。按FQDN：NF ID为NF主机名FQDN。修改影响：修改之后会导致要删除的本地检测NF ID类型发生改变。数据来源：本端规划。默认值：0配置原则：无
nfinstanceid|NF实例ID|参数可选性: 任选参数类型: 字符串参数范围: 0-36|参数作用：该参数用于当删除方式为“按NF实例ID”时，配置待删除的本地检测NF的实例ID。修改影响：修改后会导致待删除的本地检测NF的实例ID发生改变。数据来源：NRF发现的NF。可通过SHOW DETECT OFFICE INFO命令查询。默认值：无。配置原则：当删除方式为“按NF实例ID”时，nfinstanceid为必选参数。
nffqdn|NF FQDN|参数可选性: 任选参数类型: 字符串参数范围: 0-127|参数作用：该参数用于当删除方式为“按FQDN”时，配置待删除的本地检测NF的FQDN。修改影响：修改后会导致待删除的本地检测NF的FQDN发生改变。数据来源：本地配置的NF。可通过SHOW DETECT OFFICE INFO命令查询。默认值：无。配置原则：当删除方式为“按FQDN”时，NF FQDN为必选参数。
servicename|服务名|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-9|参数作用：该参数用于设置待删除的本地检测NF的服务名。修改影响：修改后会导致待删除的本地检测NF的服务名发生改变。数据来源：可通过SHOW DETECT OFFICE INFO命令查询待删除目标NF的服务名。默认值：0。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
STATUS|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-2|该参数用于显示本命令的操作结果。




命令举例 


`
删除本地检测的局向：NF ID类型为NF实例ID，NF实例ID为44444444-1111-1111-1111-000000000002，服务名为"nausf-auth"。
DEL LOCAL DETECTION:MODE="NFINSTANCEID",NFINSTANCEID="44444444-1111-1111-1111-000000000002",SERVICENAME="nausf-auth"

(No.1) :DEL LOCAL DETECTION:MODE="NFINSTANCEID",NFINSTANCEID="44444444-1111-1111-1111-000000000002",SERVICENAME="nausf-auth"
-----------------Namf_Communication_0_A----------------
操作结果
成功

记录数：1
执行成功耗时: 开始时间:2021-03-26 02:25:09 耗时: 0.14 秒

` 


### 删除节点通知信息(DEL NODE INFO) 
### 删除节点通知信息(DEL NODE INFO) 


功能说明 

该命令用于删除容灾节点通知记录，指示AMF在后续交互中重新向周边网元携带备份AMF信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
mode|删除方式|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3|该参数用于配置删除容灾节点通知信息的方式，可以全量或基于网元类型进行删除。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
status|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-30|该参数用于显示本命令的操作结果。




命令举例 


`
删除全部容灾节点通知信息。
DEL NODE INFO:MODE="ALL"

(No.1) : DEL NODE INFO:MODE="ALL"
-----------------Namf_Communication_0----------------
操作结果
---------
SUCCESS
---------
记录数：1
执行成功开始时间:2021-06-04 10:53:42 耗时: 0.188 秒

` 


### 根据NFID删除节点通知信息(DEL NODE INFO BYNFID) 
### 根据NFID删除节点通知信息(DEL NODE INFO BYNFID) 


功能说明 

该命令用于指定待删除的容灾节点记录，该记录由NFID作为索引。删除指定容灾节点记录后，AMF会在后续交互中重新向周边网元携带容灾节点信息，即备份AMF信息。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
nfid|NF实例标识|参数可选性: 必选参数类型: 字符串参数范围: 0-36|参数作用：该参数用于指定NFID，即待删除的容灾节点记录的索引。修改影响：NFID是这个节点表的索引，修改此参数，会改变待删除的节点。数据来源：统一规划。默认值：无。配置原则：NFID由数字和字母组成，要求小写配置。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
status|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-30|该参数用于显示本命令的操作结果。




命令举例 


`
根据NFID删除容灾节点通知信息。
DEL NODE INFO BYNFID:NFID="2b3d8182-365c-44ff-a051-ef56f89732d5"

(No.1) : DEL NODE INFO BYNFID:NFID="2b3d8182-365c-44ff-a051-ef56f89732d5"
-----------------Namf_Communication_0----------------
操作结果
---------
del suc
---------
记录数：1
执行成功开始时间:2021-06-04 10:53:42 耗时: 0.188 秒

` 


## 自运行授权 
## 自运行授权 


背景知识 


当园区的无线基站和虚拟云上的AMF之间的N2接口链路故障时，基站可以将园区用户选路到园区的应急网络。但是园区应急网络只能进行暂时性的接入，其网络的可靠性不如运营商的虚拟云上的网络，因此当基站和云上AMF之间链路恢复后，应尽快将用户回迁到云上网络。 

将应急AMF上已接入的用户回迁到运营商的虚拟云上网络，有以下三种方式。 


 
当用户主动发起业务，基站将用户选路到运营商的虚拟云上网络。 

 
操作员通过手动执行负荷重平衡命令，将用户回迁到运营商的虚拟云上网络。 

 
当用户授权超时后，应急AMF主动发起负荷重平衡，主动回迁用户。 

 




功能说明 


本功能用于维护园区应急AMF自运行授权状态，包括手动启动应急AMF自运行授权、查询应急AMF自运行授权状态、以及恢复应急AMF自运行授权状态。 




子主题： 






### 启动自运行授权(ENABLE AUTOAUTHCTRL) 
### 启动自运行授权(ENABLE AUTOAUTHCTRL) 


功能说明 

该命令用于启动自运行授权。 

执行该命令后，AMF开始进行自运行授权计时。当计时长度超过自运行授权时长后，自运行授权状态为授权超时。当自运行授权超时后，AMF拒绝UE注册接入以及建立PDU会话。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
ENABLERESULT|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-5|本参数用于回显启动自运行授权操作的执行结果。




命令举例 


`
启动自运行授权。
ENABLE AUTOAUTHCTRL

ENABLE AUTOAUTHCTRL:
-----------------Namf_Communication_0----------------
执行结果  
-------------
执行启用自运行授权成功
-------------
记录数：1
执行成功开始时间:2021-08-19 09:54:05 耗时: 0.123 秒

` 


### 查询自运行授权状态(SHOW AUTOAUTHSTATUS) 
### 查询自运行授权状态(SHOW AUTOAUTHSTATUS) 


功能说明 

该命令用于查询自运行授权状态。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
AUTOAUTHSTATUS|自运行授权状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-5|本参数用于显示自运行授权状态。
AUTOAUTHTIMELEFT|授权剩余时间|参数可选性: 任选参数类型: 字符串参数范围: 0-40|本参数用于显示自运行授权中状态下的授权剩余时间。




命令举例 


`
查询自运行授权状态。
SHOW AUTOAUTHSTATUS

(No.1) : SHOW AUTOAUTHSTATUS:
-----------------Namf_Communication_0----------------
自运行授权状态 
---------------
自运行授权中   
---------------
记录数：1
授权剩余时间           
-----------------------
1023(hours) 59(minutes) 
-----------------------
记录数：1
执行成功开始时间:2022-03-23 15:03:37 耗时: 0.508 秒

` 


### 恢复自运行授权状态(RESTORE AUTOAUTHSTATUS) 
### 恢复自运行授权状态(RESTORE AUTOAUTHSTATUS) 


功能说明 

该命令用于恢复自运行授权状态。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESTORERESULT|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|本参数用于回显恢复自运行授权状态的执行结果。




命令举例 


`
恢复自运行授权状态。
RESTORE AUTOAUTHSTATUS

RESTORE AUTOAUTHSTATUS:
-----------------Namf_Communication_0----------------
执行结果
-------------
成功
-------------
记录数：1
执行成功开始时间:2021-08-19 09:54:05 耗时: 0.123 秒

` 


## BINDING信息管理 
## BINDING信息管理 


背景知识 


为提高5GC网络服务的可靠性，AMF需要提供NF容灾功能。 

Binding功能是将NF自身的容灾能力及备份关系告知对端NF的一种方式。 

在NF发生故障时，对端NF可以根据接收的Binding信息执行NF的重选，从而能够继续在5GC网络中提供服务。 




功能说明 


本功能用于查询和删除AMF所接收到的对端NF的Binding信息。 




子主题： 






### 查询BINDING信息(SHOW BINDING INFO) 
### 查询BINDING信息(SHOW BINDING INFO) 


功能说明 

该命令用于查询AMF接收对端NF的Binding信息时，使用该命令。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicno|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于动态命令分发到指定SC实例。
md5|MD5|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于根据MD5查询指定记录。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|执行结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，显示成功或失败。
md5|MD5|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于显示MD5信息。
instno|Inst No|参数可选性: 任选参数类型: 数字参数范围: 0-1|该参数用于显示实例号。
binding|Binding信息|参数可选性: 任选参数类型: 字符串参数范围: 0-500|该参数用于Binding具体信息。




命令举例 


`
查询SC逻辑编号为1的Binding信息。
SHOW BINDING INFO:SCLOGICNO=1

(No.1) : SHOW BINDING INFO:SCLOGICNO=1:
-----------------Namf_Communication_0----------------
正在执行一个异步命令，请到操作记录中查看执行结果。

` 


### 删除BINDING信息(DEL BINDING INFO) 
### 删除BINDING信息(DEL BINDING INFO) 


功能说明 

该命令用于删除AMF接收对端NF的Binding信息时，使用该命令。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicno|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|该参数用于动态命令分发到指定SC实例，不填写时指示所有SC实例。
md5|MD5|参数可选性: 任选参数类型: 字符串参数范围: 0-32|该参数用于根据MD5删除指定记录，不填写时指示所有MD5记录，SC逻辑编号和MD5不能全不填写。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|执行结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，显示成功或失败。




命令举例 


`
删除SC逻辑编号为1的BINDING信息。
DEL BINDING INFO:SCLOGICNO=1

(No.1) : DEL BINDING INFO:SCLOGICNO=1:
-----------------Namf_Communication_0----------------
执行结果
-----------------
删除成功
-----------------

` 


# 安全检查操作命令 
# 安全检查操作命令 


背景知识 


AMF支持GTP消息安全检查，对不符合安全检查的消息进行过滤丢弃。本动态管理命令提供对安全检查GTP消息过滤统计计数的查询和清除功能。 




功能说明 


本功能用于查询和清除安全检查GTP消息过滤统计计数。 




子主题： 






## 统计查询 
## 统计查询 


背景知识 


AMF支持GTP消息安全检查，对不符合安全检查的消息进行过滤丢弃。本动态管理命令提供对安全检查GTP消息过滤统计计数的查询功能。 




功能说明 


本功能用于查询安全检查GTP消息过滤统计计数，查询结果为本局按照GTP过滤的消息数以及对应的配置规则。 




子主题： 






### GTP统计查询(SHOW GTPSECCHECKSTAT) 
### GTP统计查询(SHOW GTPSECCHECKSTAT) 


功能说明 

AMF支持对GTP消息的安全检查，对不符合安全检查的消息进行丢弃。该命令用于查询GTP消息过滤统计。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
WhiteOrBlack|名单选择|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: WHITE|本参数用于设置需要查询的GTP过滤规则，查询白名单或查询黑名单。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: SUCCESS|本参数显示查询结果，分为查询成功、查询失败和记录不存在。
ruleIndex|规则索引|参数可选性: 必选参数类型: 数字参数范围: 1-1024|本参数显示查询结果的规则索引。
errCount|丢弃计数|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|本参数显示在该规则索引下已被GTP过滤功能丢弃的消息总数。




命令举例 


`
显示当前GTP安全检查白名单统计计数。
SHOW GTPSECCHECKSTAT:WHITEORBLACK="WHITE"

(No.1) : SHOW GTPSECCHECKSTAT:
-----------------Namf_Communication_0----------------
执行结果
记录不存在

执行成功耗时: 0.163 秒

` 


## 统计清除 
## 统计清除 


背景知识 


AMF支持GTP消息安全检查，对不符合安全检查的消息进行过滤丢弃。本动态管理命令提供对安全检查GTP消息过滤统计计数的清除功能。 




功能说明 


本功能用于清除安全检查GTP消息过滤统计计数。 




子主题： 






### GTP统计清除(DEL GTPSECCHECKSTAT) 
### GTP统计清除(DEL GTPSECCHECKSTAT) 


功能说明 

AMF支持对GTP消息的安全检查，对不符合安全检查的消息进行丢弃。该命令用于清空GTP消息过滤统计。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，成功或失败。




命令举例 


`
清空安全检查GTP消息过滤统计计数。
DEL GTPSECCHECKSTAT

(No.1) : DEL GTPSECCHECKSTAT
-----------------Namf_Communication_0----------------
执行结果
成功
记录数：1
执行成功耗时: 0.086 秒

` 


# SC信息查询管理 
# SC信息查询管理 


背景知识 


在日常测试或者维护中，操作员经常需要登陆到一个具体的SC（即Special SC）上查询一些信息或者根据终端用户的群信息需要知道这个用户在哪个SC上。 




功能说明 


本功能包括： 


 
查询Special SC信息 

 
查询群对应的SC信息 

 




子主题： 






## 查询Special SC信息 
## 查询Special SC信息 


背景知识 


在日常测试或者维护中，操作员经常需要登陆到Special SC查询一些信息。 




功能说明 


本功能用于查询Special SC相关信息，包括IP地址、VM名称和VRU名称。 




子主题： 






### 查询SPECIAL SC信息(SHOW SPECIAL SCINFO) 
### 查询SPECIAL SC信息(SHOW SPECIAL SCINFO) 


功能说明 

该命令用于查询Commucation服务下的Special SC信息，如VM名称、VRU名称、管理IP和SC Logic No。 


 
SC：Service Component。 

 
VRU：Virtual Running Unit。 

 
VM：Virtual Machine。 

 


注意事项 

无


输出参数说明 


标识|名称|类型|说明
---|---|---|---
specialSCInfo|Special SC信息|参数可选性: 必选参数类型: 字符串参数范围: 1-1000|Special SC信息是指系统中Special SC所属的虚机名称、VRU名称、管理IP和SC Logic No。




命令举例 


`
查询AMF上Special SC信息。
SHOW SPECIAL SCINFO

(No.3) : SHOW SPECIAL SCINFO:
-----------------Namf_Communication_0_A----------------
Special SC信息                                                                                                                       
----------------------------------------------------------------

Vm_name :        ZTE_AMF_22_-VM-GSUCommonC2M40002
Vru_name:        vru-amf-comm-0
Management IP:   193.165.22.41
SC Logic No:     1 
----------------------------------------------------------------
记录数：1

` 


## 查询群对应的SC信息 
## 查询群对应的SC信息 


背景知识 


在日常测试或者维护中，操作员可能需要根据终端用户的群号，查询群所在的SC相关信息。 




功能说明 


本功能用于查询群所在的SC相关信息，包括IP地址、VM名称和VRU名称。 




子主题： 






### 查询群所在的SC信息(SHOW GROUP SCINFO) 
### 查询群所在的SC信息(SHOW GROUP SCINFO) 


功能说明 

该命令用于查询群当前所在的SC信息，如VM名称、VRU名称、管理IP和逻辑编号。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
groupNo|群号|参数可选性: 必选参数类型: 数字参数范围: 0-8191|用户群号，取值范围0~8191。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
SCInfo|SC信息|参数可选性: 必选参数类型: 字符串参数范围: 1-1000|显示SC信息，如VM名称、VRU名称、管理IP和逻辑编号。




命令举例 


`
查询AMF上0号群所在的SC信息。
SHOW GROUP SCINFO:GROUPNO=0

(No.1) : SHOW GROUP SCINFO:GROUPNO=0
-----------------Namf_Communication_0_A----------------
SC信息                                                                                                                               
-------------------------------------------------------

VM name :        ZTE_AMF_22_-VM-GSUCommonC2M40002
Vru name:        vru-amf-comm-0
Management IP:   193.165.22.41
SC Logic No:     1 
-------------------------------------------------------
记录数：1
执行成功 开始时间:2020-08-05 15:17:07 耗时: 0.149 秒

` 


# DNS相关 
# DNS相关 


背景知识 


AMF可以根据以下方法获取其他NF的IP地址。 


 
使用本地主机信息表（Hostfile）：保存在AMF本地中，包含的记录比较少。 

 
使用DNS服务器：DNS服务器是网络中专门提供域名解析服务的服务器。
AMF提供域名和Hostname给DNS服务器，DNS服务器根据提供的域名和Hostname可以查询到对应的NF的IP地址。 

 
使用DNS Cache：是DNS服务器解析到的域名和IP地址在AMF上的缓存记录，用于AMF快速获取NF的IP地址，以减少AMF访问DNS服务器的次数，DNS Cache记录具有一定的时长，时间到期，该记录失效。
DNS Cache是AMF本地的一个数据表，用于保存之前AMF到DNS服务器的历史查询结果，AMF可以先在DNS Cache中查询需要解析的域名，如果查询不到结果，再将域名发送到DNS服务器进行解析。  

 




功能说明 


本功能用于设置AMF到DNS服务器进行域名解析的相关参数。 




子主题： 






## DNS查询(DNS LOOKUP) 
## DNS查询(DNS LOOKUP) 


功能说明 

本命令用于AMF通过DNS服务器，查询特定域名的资源记录，可根据以下信息进行查询。 


 
域名 

 
查询方式 

 
优先查询DNS Cache 

 


注意事项 

本命令执行后，配置立即生效。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|参数作用：该参数用于设置SC（Service Component，服务组件）编号，设置该参数的作用是指定使用该AMF（DNS Client）以SC为单位，向DNS服务器发起查询。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1。
queryType|查询方式|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于指定对域名进行解析的查询方式，取值及含义如下：GPRS查询：对域名进行DNS查询（查询方式包括A查询、AAAA查询和ANY查询）。AMF选择的DNS服务器为GPRS Profile中的服务器。EPC查询：对域名进行从S-NAPTR查询开始的一系列查询。AMF选择的DNS服务器为LTE Profile中的服务器。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。
domainName|域名|参数可选性: 必选参数类型: 字符串参数范围: 1-255|参数作用：该参数用于配置AMF需要到DNS服务器进行解析的域名，以便AMF根据域名获取对应NF的IP地址。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。
prior|优先查询DNS CACHE|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: DNS_CACHE_PRIOR_YES|参数作用：该参数用于配置AMF是否优先查询DNS Cache中的结果，DNS Cache是AMF本地的一个数据表，用于保存之前AMF到DNS服务器的历史查询结果，AMF可以先在DNS Cache中查询需要解析的域名，如果查询不到结果，再将域名发送到DNS服务器进行解析，取值及含义如下：DNS_CACHE_PRIOR_YES”：AMF优先查询DNS Cache中保存的结果，如果查询不到，AMF再到DNS服务器进行查询。DNS_CACHE_PRIOR_NO”：AMF不查询DNS Cache中的结果，直接到DNS服务器进行查询。修改影响：无。数据来源：本端规划。默认值：DNS_CACHE_PRIOR_YES。配置原则：无。
ipQueryType|IP类型|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: V4V6|参数作用：该参数用于设置被查询网元的IP地址类型，取值及含义如下：V4V6: ANY查询V4: A查询V6: AAAA查询修改影响：无。数据来源：本端规划。默认值：V4V6。配置原则：无。
serviceType|服务类别|参数可选性: 任选参数类型: 枚举，参见枚举定义|参数作用：该参数用于设置被查询的网元的类型，目前支持的类型如下：x-3gpp-mme: 被查询网元为MME修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。
protocolType|协议类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|参数作用：该参数用于设置被查询网元所支持的接口类型，取值及含义如下：x-n26: N26接口。N26接口，是MME与AMF之间的接口，采用GTPv2-C协议。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
domainName|域名|参数可选性: 必选参数类型: 字符串参数范围: 1-255|参数作用：该参数用于配置AMF需要到DNS服务器进行解析的域名，以便AMF根据域名获取对应NF的IP地址。
queryType|查询方式|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于指定对域名进行解析的查询方式，取值及含义如下：GPRS查询：对域名进行DNS查询（查询方式包括A查询、AAAA查询和ANY查询）。AMF选择的DNS服务器为GPRS Profile中的服务器。EPC查询：对域名进行从S-NAPTR查询开始的一系列查询。AMF选择的DNS服务器为LTE Profile中的服务器。
result|查询结果|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: SUCCESS|参数作用：该参数用于显示查询结果，成功或失败。
failReason|失败原因|参数可选性: 任选参数类型: 字符串参数范围: 0-100|参数作用：该参数用于显示查询失败的具体原因。
addressInfo|地址|参数可选性: 任选参数类型: 字符串|参数作用：该参数用于显示查询出的地址列表。
addressNum|地址数量|参数可选性: 任选参数类型: 数字|参数作用：该参数用于显示查询出的地址数量。




命令举例 


`
在编号为1的SC，采用GPRS查询方式，查询域名“zte.com.cn”是否能够解析成功。

(No.1) : DNS LOOKUP:SCLOGICNO=1,QUERYTYPE="GPRS",DOMAINNAME="zte.com.cn",PRIOR="DNS_CACHE_PRIOR_NO",IPQUERYTYPE="V4V6"
-----------------Namf_Communication_0_A----------------
地址
-------------
192.168.29.29
192.168.29.30
192.168.29.31
-------------

地址数量
--
3
--

域名  查询方式  查询结果
------------------------
zte   GPRS      成功
------------------------

执行成功耗时: 1.046 秒

` 


## 指定地址DNS查询(DNS SERVER LOOKUP) 
## 指定地址DNS查询(DNS SERVER LOOKUP) 


功能说明 

本命令用于AMF查询特定DNS服务器的资源记录，可根据以下信息进行查询。 


 
域名 

 
查询方式 

 
优先查询DNS Cache 

 
指定DNS服务器地址 

 
DNS服务器地址 

 
DNS客户端地址 

 
VRF ID 

 


注意事项 


 
本命令执行后，配置立即生效。 

 
在使用本命令前，需要确认ADD COMMU DNS SERVER 命令的配置结果。当本命令指定的DNS服务器（即参数“dnsServerAddr”配置的DNS服务器IP地址）不是AMF本地配置的DNS服务器时（即不是通过 ADD COMMU DNS SERVER 命令配置的DNS服务器），AMF会认为到该DNS服务器的TCP链路不可用。 

 
在使用本命令前，需要确认SET COMMU DNS GLB命令的配置结果。在SET COMMU DNS GLB命令中，通过参数“DNS查询方式（MODE）”配置了AMF到DNS服务器的查询方式，其中包括三种方式：UDP方式、TCP方式和UDP优先方式。 

 

如果通过SET COMMU DNS GLB命令将参数“DNS查询方式（MODE）”配置为“TCP方式（TCP）”，那么当本命令指定的DNS服务器（即参数“dnsServerAddr”配置的DNS服务器IP地址）不是AMF本地配置的DNS服务器时（即不是通过 ADD COMMU DNS SERVER 命令配置的DNS服务器），由于AMF会认为当前到该DNS服务器的TCP链路不可用，则会导致AMF到此DNS服务器的查询失败。
如果通过SET COMMU DNS GLB命令将参数“DNS查询方式（MODE）”配置为“UDP优先方式（UDPFIRST）”，AMF会优先使用UDP方式到DNS服务器去获取查询结果，如果DNS服务器回复的响应消息超长，超过255个字节时，响应消息会携带截断标志。此时，AMF需要使用TCP方式再次到DNS服务器获取查询结果，但是因为此种情况下，TCP链路不可用，AMF不会再次发起TCP方式的查询。
 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|参数作用：该参数用于设置SC（Service Component，服务组件）编号，设置该参数的作用是指定使用该AMF（DNS Client）以SC为单位，向DNS服务器发起查询。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1。
queryType|查询方式|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于指定对域名进行解析的查询方式，取值及含义如下：GPRS查询：对域名进行DNS查询（查询方式包括A查询、AAAA查询和ANY查询）。AMF选择的DNS服务器为GPRS Profile中的服务器。EPC查询：对域名进行从S-NAPTR查询开始的一系列查询。AMF选择的DNS服务器为LTE Profile中的服务器。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。
domainName|域名|参数可选性: 必选参数类型: 字符串参数范围: 1-255|参数作用：该参数用于配置AMF需要到DNS服务器进行解析的域名，以便AMF根据域名获取对应NF的IP地址。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。
prior|优先查询DNS CACHE|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: DNS_CACHE_PRIOR_YES|参数作用：该参数用于配置AMF是否优先查询DNS Cache中的结果，DNS Cache是AMF本地的一个数据表，用于保存之前AMF到DNS服务器的历史查询结果，AMF可以先在DNS Cache中查询需要解析的域名，如果查询不到结果，再将域名发送到DNS服务器进行解析，取值及含义如下：DNS_CACHE_PRIOR_YES”：AMF优先查询DNS Cache中保存的结果，如果查询不到，AMF再到DNS服务器进行查询。DNS_CACHE_PRIOR_NO”：AMF不查询DNS Cache中的结果，直接到DNS服务器进行查询。修改影响：无。数据来源：本端规划。默认值：DNS_CACHE_PRIOR_YES。配置原则：无。
specifyDNS|指定DNS服务器地址|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于设置是否AMF到指定DNS服务器查询，取值及含义如下：是：AMF到指定DNS服务器查询。否：AMF不到指定DNS服务器查询。修改影响：无。数据来源：本端规划。默认值：无。配置原则：如果设置为是，则需要设置本配置中DNS服务器地址和DNS客户端地址。
dnsServerAddr|DNS服务器地址|参数可选性: 任选参数类型: 字符串|参数作用：该参数用于设置指定的DNS服务器地址，取值及含义如下：IPv4IPv6修改影响：无。数据来源：本端规划。默认值：无。配置原则：和本命令中的参数“DNS客户端地址”需要为同一种类型，即DNS客户端IP地址和DNS服务器IP地址都是IPv4或都是IPv6地址。
dnsClientAddr|DNS客户端地址|参数可选性: 任选参数类型: 字符串|参数作用：该参数用于设置指定的DNS客户端地址，取值及含义如下：IPv4IPv6修改影响：无。数据来源：本端规划。默认值：无。配置原则：和本命令中的参数“DNS服务器地址“需要为同一种类型，即DNS客户端IP地址和DNS服务器IP地址都是IPv4或都是IPv6地址。
ipQueryType|IP类型|参数可选性: 任选参数类型: 枚举，参见枚举定义默认值: V4V6|参数作用：该参数用于设置被查询网元的IP地址类型，取值及含义如下：V4V6: ANY查询V4: A查询V6: AAAA查询修改影响：无。数据来源：本端规划。默认值：V4V6。配置原则：无。
serviceType|服务类别|参数可选性: 任选参数类型: 枚举，参见枚举定义|参数作用：该参数用于设置被查询的网元的类型，目前支持的类型如下：x-3gpp-mme: 被查询网元为MME修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。
protocolType|协议类型|参数可选性: 任选参数类型: 枚举，参见枚举定义|参数作用：该参数用于设置被查询网元所支持的接口类型，取值及含义如下：x-n26: N26接口。N26接口，是MME与AMF之间的接口，采用GTPv2-C协议。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
domainName|域名|参数可选性: 必选参数类型: 字符串参数范围: 1-255|参数作用：该参数用于配置AMF需要到DNS服务器进行解析的域名，以便AMF根据域名获取对应NF的IP地址。
queryType|查询方式|参数可选性: 必选参数类型: 枚举，参见枚举定义|参数作用：该参数用于指定对域名进行解析的查询方式，取值及含义如下：GPRS查询：对域名进行DNS查询（查询方式包括A查询、AAAA查询和ANY查询）。AMF选择的DNS服务器为GPRS Profile中的服务器。EPC查询：对域名进行从S-NAPTR查询开始的一系列查询。AMF选择的DNS服务器为LTE Profile中的服务器。
result|查询结果|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: SUCCESS|参数作用：该参数用于显示查询结果，成功或失败。
failReason|失败原因|参数可选性: 任选参数类型: 字符串参数范围: 0-100|参数作用：该参数用于显示查询失败的具体原因。
addressInfo|地址|参数可选性: 任选参数类型: 字符串|参数作用：该参数用于显示查询出的地址列表。
addressNum|地址数量|参数可选性: 任选参数类型: 数字|参数作用：该参数用于显示查询出的地址数量。




命令举例 


`
查询指定DNS服务器的资源记录：SC逻辑号为1，采用GPRS查询方式，域名为"zte.com.cn"，DNS服务器地址为"10.43.151.10"，VRF ID为0。
DNS SERVER LOOKUP:SCLOGICNO=1,QUERYTYPE="GPRS",DOMAINNAME="zte.com.cn",PRIOR="DNS_CACHE_PRIOR_NO",SPECIFYDNS="YES",DNSSERVERADDR="10.43.151.10",VRFID=0

(No.1) : DNS SERVER LOOKUP:SCLOGICNO=1,QUERYTYPE="GPRS",DOMAINNAME="zte.com.cn",PRIOR="DNS_CACHE_PRIOR_NO",SPECIFYDNS="YES",DNSSERVERADDR="10.43.151.10",VRFID=0
-----------------Namf_Communication_0_A----------------
域名  查询方式  查询结果  失败原因
----------------------------------------------------
zte   GPRS      失败      No records are in response
----------------------------------------------------

执行成功耗时: 1.046 秒

` 


## 查询DNS缓存中指定域名信息(SHOW DNSCACHE INFO) 
## 查询DNS缓存中指定域名信息(SHOW DNSCACHE INFO) 


功能说明 

该命令用于AMF查询DNS缓存中的指定域名，当操作员需要根据域名从缓存中查询对应的资源记录时，使用该命令。 


注意事项 


 
本命令执行后，配置立即生效。 

 
若执行本命令时，指定了“SC逻辑编号”，表示查询指定“SC逻辑编号”的DNS缓存中的域名，需要先通过SHOW SCINFO命令来查询当前可用的SC，确保“SC逻辑编号”有效。 

 
若执行本命令时，未指定“SC逻辑编号”，则表示查询全部SC上的DNS缓存中的域名。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|参数作用：该参数用于设置SC（Service Component，服务组件）编号，设置该参数的作用是指定使用该AMF（DNS Client）以SC为单位，向DNS服务器发起查询。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1。
domainName|域名|参数可选性: 必选参数类型: 字符串参数范围: 1-255|参数作用：该参数用于设置需要解析的域名，根据该域名从DNS缓存中获取对应NF的IP地址。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
RRTYPE|资源记录类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-3|参数作用：该参数用于显示资源记录的类型，对应的字段描述参考RFC1035。
SERVER|DNS服务器地址|参数可选性: 必选参数类型: 字符串|参数作用：该参数用于显示响应该资源记录的DNS服务器地址。
ORDER|次序|参数可选性: 必选参数类型: 数字|参数作用：该参数用于显示NAPTR记录中的次序字段，和NAPTR记录中的优选字段一起，作为对应NAPTR记录优选的依据。NAPTR相关的RFC协议有3401,3402,3403,3404,3405，其中关于NAPTR记录中的字段的描述请求参考RFC3403中描述。
PREFERENCE|优选|参数可选性: 必选参数类型: 数字|参数作用：该参数用于显示NAPTR记录中的优选字段和NAPTR记录中的次序字段一起，作为对应NAPTR记录优选的依据。NAPTR相关的RFC协议有3401,3402,3403,3404,3405，其中关于NAPTR记录中的字段的描述请求参考RFC3403中描述。
FLAG|标志|参数可选性: 必选参数类型: 字符串参数范围: 0-32|参数作用：该参数用于显示NAPTR记录中的标志字段，控制标志，根据协议，该标志控制NAPTR记录的重写机制。NAPTR相关的RFC协议有3401,3402,3403,3404,3405，其中关于NAPTR记录中的字段的描述请求参考RFC3403中描述。
SERVICE|服务|参数可选性: 必选参数类型: 字符串参数范围: 0-256|参数作用：该参数用于显示NAPTR记录中的服务字段，NAPTR相关的RFC协议有3401,3402,3403,3404,3405，其中关于NAPTR记录中的字段的描述请求参考RFC3403中描述。
REGEXP|正则表达式|参数可选性: 必选参数类型: 字符串参数范围: 0-256|参数作用：该参数用于显示NAPTR记录中的正则表达式，NAPTR相关的RFC协议有3401,3402,3403,3404,3405，其中关于NAPTR记录中的字段的描述请求参考RFC3403中描述。
REPLACE|替换|参数可选性: 必选参数类型: 字符串参数范围: 0-256|参数作用：该参数用于显示NAPTR记录中的替换字段，NAPTR相关的RFC协议有3401,3402,3403,3404,3405，其中关于NAPTR记录中的字段的描述请求参考RFC3403中描述。
PRIORITY|优先级|参数可选性: 必选参数类型: 数字|参数作用：该参数用于显示SRV记录中的优先级字段,决定SRV记录中主机名对应的权重值，用来作为对SRV记录进行优选时的依据。
WEIGHT|权重|参数可选性: 必选参数类型: 数字|参数作用：SRV记录中的权重字段。当SRV记录中的优先级字段相同时，根据协议要求，依据权重值对优先级字段相同的SRV记录进行优选。
PORT|端口|参数可选性: 必选参数类型: 数字|参数作用：该参数用于显示SRV记录中的端口号，SRV记录中的主机名对应的主机提供的服务的端口号。
TARGET|目标|参数可选性: 必选参数类型: 字符串参数范围: 0-256|参数作用：该参数用于显示SRV记录中的主机名。
IPADDR|IP地址|参数可选性: 必选参数类型: 字符串|参数作用：该参数用于显示DNS查询的IP地址。




命令举例 


`
查询DNS缓存中指定域名的资源记录：SC逻辑号为1，域名为"zte.com.cn"。
SHOW DNSCACHE INFO:SCLOGICNO=1,DOMAINNAME="zte.com.cn"

(No.1) :SHOW DNSCACHE INFO:SCLOGICNO=1,DOMAINNAME="zte.com.cn"
-----------------Namf_Communication_0_A----------------
地址信息
192.168.29.29
Number: 1

记录数：1
执行成功耗时: 1.046 秒

` 


## 查询DNS缓存使用率(SHOW DNSCACHE USAGE) 
## 查询DNS缓存使用率(SHOW DNSCACHE USAGE) 


功能说明 

该命令用于查询DNS缓存使用率。 


注意事项 


 
本命令执行后，配置立即生效。 

 
若执行本命令时，指定了“SC逻辑编号”，表示查询指定“SC逻辑编号”的DNS缓存，需要先通过SHOW SCINFO命令来查询当前可用的SC，确保“SC逻辑编号”有效。 

 
若执行本命令时，未指定“SC逻辑编号”，则表示查询全部SC上的DNS缓存。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|参数作用：该参数用于设置SC（Service Component，服务组件）逻辑编号，查询指定SC对应的DNS缓存使用率。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1，不设置该参数时，表明查询AMF所有SC的DNS缓存使用率。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字|参数作用：该参数用于设置SC（Service Component，服务组件）逻辑编号，查询指定SC对应的DNS缓存使用率。
usage|使用率(%)|参数可选性: 必选参数类型: 数字参数范围: 0-100|参数作用：该参数用于显示每个SC对应的DNS缓存使用率。




命令举例 


`
查询DNS缓存使用率。
SHOW DNSCACHE USAGE

(No.1) :SHOW DNSCACHE USAGE
-----------------Namf_Communication_0_A----------------
SC逻辑编号     使用率(%)
---------------------
1                    50
2                    40
3                    80
---------------------
记录数：1

执行成功耗时: 1.046 秒

` 


## 删除DNS缓存中指定域名信息(DEL DNSCACHE INFO) 
## 删除DNS缓存中指定域名信息(DEL DNSCACHE INFO) 


功能说明 

该命令用于AMF清除DNS缓存中指定域名对应的资源记录，当AMF需要根据域名从DNS缓存中清除对应的资源记录时，使用该命令。 


注意事项 


 
本命令执行后，配置立即生效。 

 
因为AMF的各个SC独立维护本模块上的DNS缓存，因此操作员在清除DNS缓存时，需要指定具体的SC，需要先通过SHOW SCINFO命令来查询当前可用的SC，确保"SC逻辑编号"有效。 

 
该命令为高危命令！本命令执行后，该域名对应的同类型的资源记录在DNS缓存中被清除。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000默认值: 1|参数作用：该参数用于设置SC（Service Component，服务组件）逻辑编号，AMF根据此编号删除指定SC的DNS缓存记录。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1。
domainName|域名|参数可选性: 必选参数类型: 字符串参数范围: 1-128|参数作用：该参数用于设置需要删除的域名，即从DNS缓存中删除该域名对应的资源记录。修改影响：无。数据来源：本端规划。默认值：无。配置原则：无。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-100|参数作用：该参数用于显示本命令的操作结果。




命令举例 


`
删除DNS缓存中指定域名的资源记录：SC逻辑号为1，域名为"zte.com.cn"。
DEL DNSCACHE INFO:SCLOGICNO=1,DOMAINNAME="zte.com.cn"

(No.1) :DEL DNSCACHE INFO:SCLOGICNO=1,DOMAINNAME="zte.com.cn"
-----------------Namf_Communication_0_A----------------
操作结果
成功

记录数：1
执行成功耗时: 1.046 秒

` 


## 清空DNS Cache所有内容(CLEAR DNSCACHE) 
## 清空DNS Cache所有内容(CLEAR DNSCACHE) 


功能说明 

该命令用于清除AMF上DNS Cache中所有的缓存记录。 


注意事项 


 
本命令执行后，配置立即生效。 

 
若执行本命令时，指定了“SC逻辑编号”，表示清除指定“SC逻辑编号”的DNS缓存，需要先通过SHOW SCINFO命令来查询当前可用的SC，确保“SC逻辑编号”有效。 

 
若执行本命令时，未指定“SC逻辑编号”，则清除全部SC上的DNS缓存。 

 
本命令为高危命令！本命令执行后，DNS Cache会被清空，清空后会引发大量DNS查询操作。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sclogicNo|SC逻辑编号|参数可选性: 任选参数类型: 数字参数范围: 1-1000|参数作用：该参数用于设置SC（Service Component，服务组件）的编号，设置该参数的作用是指定删除该AMF的某个SC上的DNS Cache中所有的缓存记录。修改影响：无。数据来源：本端规划。默认值：无。配置原则：可通过SHOW SCINFO命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:NFSNAME="Namf_Communication_0",SCTYPE="sc-amf-comm",SCGROUPNUM=1。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-100|参数作用：该参数用于显示本命令的操作结果。




命令举例 


`
清空逻辑编号是1的SC上DNS Cache所有内容
CLEAR DNSCACHE, SCLOGICNO=1

(No.1) : CLEAR DNSCACHE:SCLOGICNO=1
-----------------Namf_Communication_0----------------
操作结果
SUCCESS
记录数：1
执行成功耗时: 0.086 秒

` 


## 查询DNS TCP链路状态(SHOW TCPLINK STATE) 
## 查询DNS TCP链路状态(SHOW TCPLINK STATE) 


功能说明 

该命令用于查询和DNS服务器通信的TCP链路的状态。 


注意事项 


 
本命令执行后，配置立即生效。 

 
若执行本命令时，没有指定“DNS服务器编号”，表示查询全部DNS服务器的TCP链路状态。 

 
若执行本命令时，指定了“DNS服务器编号”，表示查询指定“DNS服务器编号”的TCP链路状态，需要先通过SHOW COMMU DNS SERVER命令来查询当前可用的DNS服务器，确保“DNS服务器编号”有效。 

 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
serverId|DNS服务器编号|参数可选性: 任选参数类型: 数字参数范围: 1-32|参数作用：该参数用于配置DNS服务器的内部编号。修改影响：无。数据来源：本端规划。默认值：无。配置原则：本参数的取值是通过SHOW COMMU DNS SERVER命令查询当前配置的DNS服务器编号。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
serverId|DNS服务器编号|参数可选性: 必选参数类型: 数字参数范围: 1-32|参数作用：该参数用于显示DNS服务器的内部编号。
linkId|链路编号|参数可选性: 必选参数类型: 数字参数范围: 1-128|参数作用：该参数用于显示操作员定义的TCP链路编号，用于内部索引、关联和查询。
linkState|链路状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|参数作用：该参数用于显示TCP链路状态（是否激活）。
sclogicNo|SC逻辑编号|参数可选性: 必选参数类型: 数字|参数作用：该参数用于显示SC（Service Component，服务组件）逻辑编号。
port|端口|参数可选性: 必选参数类型: 数字|参数作用：该参数用于显示当前TCP链路使用的端口。
linkNum|链路个数|参数可选性: 必选参数类型: 数字参数范围: 0-128|参数作用：该参数用于显示TCP链路个数。




命令举例 


`
查询编号为1的DNS服务器的TCP链路状态。
SHOW TCPLINK STATE:SERVERID=1

(No.1) :SHOW TCPLINK STATE:SERVERID=1
-----------------Namf_Communication_0_A----------------
DNS服务器编号  链路编号  链路状态  SC逻辑编号   端口
----------------------------------------------------------
1             1         激活           1      54008
1             3         未激活         2      54017
----------------------------------------------------------

链路个数
--------
2
--------
记录数：1

执行成功耗时: 1.046 秒

` 


# GTP节点管理 
# GTP节点管理 


背景知识 


在4G网络和5G网络共存的情况下，AMF需要和GTP节点通信。 

AMF根据所配置的目标端的GTP-C地址，主动向目标端发送一条Echo消息，当收到目标端的Echo响应消息后，确认目标与本AMF之间存在链接。 

在实际运营过程中，由于修改路由数据或配置错误等人为原因，会造成AMF的对端GTP节点不可达。正常情况下，维护人员修改错误路由或修改配置数据后，这些故障会立即修复。 

但是由于这些不可达的GTP节点会造成告警上报，在运营商希望能够快速恢复这类告警的场景中，维护人员可以通过该功能查看，并删除这类不可达GTP节点，达到快速恢复告警的目的。 




功能说明 


本功能用于管理AMF对端的各种GTP节点，包括GTP链路检测功能。 




子主题： 






## 显示全部不可达节点(SHOW ALL UNREACHABLE NODES) 
## 显示全部不可达节点(SHOW ALL UNREACHABLE NODES) 


功能说明 

本命令用于查询全部不可达的邻接MME的信息。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，显示成功或失败。
PROCESS|完成百分比|参数可选性: 任选参数类型: 字符串参数范围: 0-10|该参数用于显示当前已获取的不可达节点占总不可达节点数量的百分比。




命令举例 


`
显示当前与AMF相连接的所有不可达MME。
SHOW ALL UNREACHABLE NODES

(No.1) : SHOW ALL UNREACHABLE NODES:
-----------------Namf_Communication_0----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


## 删除不可达节点(DELETE UNREACHABLE NODE) 
## 删除不可达节点(DELETE UNREACHABLE NODE) 


功能说明 

在实际运营过程中，由于修改路由数据或配置错误等人为原因，会造成AMF的对端GTP节点不可达。正常情况下，维护人员修改错误路由或修改配置数据后，这些故障会立即修复。 

但是由于这些不可达的GTP节点会造成告警上报，在运营商希望能够快速恢复这类告警的场景中，维护人员可以通过该命令删除这类不可达GTP节点，达到快速恢复告警的目的。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
nodeDelType|节点删除类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-33|该参数用于配置需要删除的不可达GTP节点的类型，包括以下选项。记录号删除（Delete by record Id）：根据GTP节点的编号来删除。节点IP地址（ Delete by  Node Ip）：根据GTP节点的IP地址来删除。删除所有不可达节点（ Delete All Unreachable Nodes）：不区分类型，删除所有不可达GTP节点。
nodeId|记录号|参数可选性: 任选参数类型: 数字参数范围: 2000-5000|该参数用于配置删除的不可达GTP节点的编号。当“节点删除类型（nodeDelType）”设置为“记录号（Delete by record Id）”时，需要设置本参数。记录号为不可达GTP节点的记录号，范围是2001-3024。
nodeIp|节点IP地址|参数可选性: 任选参数类型: 字符串|该参数用于配置删除的不可达GTP节点的IP地址。当“节点删除类型（nodeDelType）”设置为“节点IP地址（Delete by  Node Ip）”时，需要设置本参数。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
delResult|删除操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-100|该参数用于显示本命令的操作结果。当删除成功，提示“操作成功”。当删除失败，提示“操作失败”。当输入的删除类型和输入内容不一致时，提示“删除类型与填入内容不匹配”。




命令举例 


`
删除不可达节点：根据节点IP进行删除，节点IP是4.4.4.4 。DELETE UNREACHABLE NODE:NODETYPE=NODEDELTYPE="NODEIP",NODEIP=4.4.4.4
` 


## GTP节点链路检测(GTP ECHO) 
## GTP节点链路检测(GTP ECHO) 


功能说明 

本命令用于配置AMF本端的GTP-C地址和需要进行链路检测的对端GTP节点的GTP-C地址。 

AMF根据所配置的目标端的GTP-C地址，主动向目标端发送一条Echo消息，当收到目标端的Echo响应消息后，确认目标与本AMF之间存在链接。 


注意事项 

如果地址配置错误，可能会导致动态命令无法正常发送，注意观察返回的操作结果。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
sourceIpAddress|源地址|参数可选性: 任选参数类型: 字符串|本参数用于配置AMF本端的GTP-C IP地址。
targetIpAddress|目的地址|参数可选性: 必选参数类型: 字符串|本参数用于配置目标端的GTP-C IP地址。
ipType|IP地址类型|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: IPV4|本参数用于配置IP地址的类型。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
OPERATIONRESULT|操作结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-100|该参数用于显示本命令的操作结果。当MME成功回复响应给AMF时，提示“Echo检测成功”。当输入的源端IP地址与本地配置不一致时，如相同类型，但地址不同，或携Ipv4/6地址，但本地只有Ipv6/4的地址，提示“源地址与本地配置不相同”。当配置源地址和目标IP地址相同时，提示“源地址与目标地址相同”。如果本地未配GTP-C地址，或查询本地地址失败，提示“本地未配置GTPC地址”。如果对端超过5s未回复响应，提示“对端没有响应”。如果IP类型配置错误，如配置Ipv6地址，但类型选为Ipv4，提示“IP类型错误”。如配置的Ipv4地址转换GTP-C地址失败等因流程失败导致的错误，提示“其他错误”。




命令举例 


`
本端GTPC地址为27.27.27.27，目标端地址为28.28.28.28，IP类型为IPV4。按照目标地址28.28.28.28发送Echo请求消息。ZTE:>GTP ECHO:SOURCEIPADDRESS=27.27.27.27,TARGETIPADDRESS=28.28.28.28,IPTYPE="IPV4"
` 


调测信息采集 :调测信息采集 :

背景知识 


在系统调试过程中，需要采集系统的运行信息，可提供给运维人员进行分析，达到监测系统是否正常的目的。 




功能说明 


本功能可以显示系统当前支持的所有模块，可针对模块名进行信息采集，也可以采集系统所有模块的信息，同时具备清除模块信息的功能。 




子主题： 






## 模块内部统计信息 
## 模块内部统计信息 


背景知识 


业务前台有大量的内部统计，用于开发维护人员更详细的知悉系统运行状况、性能话务情况等，但是这些内部统计的采集获取很不方便。 




功能说明 


开启内部统计上报后，前台会将内部统计数据周期性的上报给后台网管，后台网管保存在硬盘目录，供开发维护人员查询分析，这样就方便更好的监控了解系统运行状况、性能话务情况等。 




子主题： 






### 清理模块内部统计信息(CLEAR DEBUG INFO) 
### 清理模块内部统计信息(CLEAR DEBUG INFO) 


功能说明 

该命令用于清理其归属NFS内模块的调测信息。当需要获取新的调测信息前，先执行该命令。 


注意事项 

获取新的调测信息前可以先执行该命令，该命令返回的“失败数量”为非0则需要联系中兴通讯技术人员支持；为0则可获取新的调测信息。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名称|参数可选性: 任选参数类型: 字符串参数范围: 1-47|该参数用于表示需要清除调测信息的模块名称。该参数选项的含义是：默认为空：表示清除NFS内所有的调测信息。非空：表示清除指定模块的调测信息，可由 SHOW DEBUG MODULELIST命令获取模块名称。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
MODULE_NUMBER|模块实例数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理的模块实例总数量。
SUCCESS_NUMBER|成功数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理成功的模块实例数量。
FAILED_NUMBER|失败数量|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示清理失败的模块实例数量。




命令举例 


`
清理名称为ROSNG_ADAPT的模块的调测信息。

CLEAR DEBUG INFO:MODULE_NAME="ROSNG_ADAPT"
` 


### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 
### 查询含有Debug信息的模块列表(SHOW DEBUG MODULELIST) 


功能说明 

该命令用于查询其归属的NFS内含有调测信息的模块列表。当运维人员需要收集或者清除指定模块的调试信息时，可以执行该命令查询含有调测信息的模块名称。 


注意事项 

无。 


输出参数说明 


标识|名称|类型|说明
---|---|---|---
MODULE_NAME|模块名|参数可选性: 必选参数类型: 字符串参数范围: 1-47|该参数用于表示支持统计信息的模块名称。
MODULE_INST|模块实例数|参数可选性: 必选参数类型: 数字参数范围: 0-4294967295|该参数用于表示支持统计信息的模块实例数。




命令举例 


`
查询某个NFS中含有调试统计信息的模块列表。
 SHOW DEBUG MODULELIST

------CommonS_TMSP_0--------
模块名         模块实例数
ROSNG_ADAPT    1
ROSNG_ARCH     1
记录数：2

执行成功耗时: 0.259 秒

` 


## 查看数据区占用率 
## 查看数据区占用率 


背景知识 


查询AMF Communication服务的资源使用率。 




功能说明 


查询AMF Communication服务的资源使用率。 




子主题： 






### 数据区占用率查询(SHOW COMM DATAUSAGE) 
### 数据区占用率查询(SHOW COMM DATAUSAGE) 


功能说明 

查询AMF Communication服务的资源使用率。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
searchResult|查询结果|参数可选性: 必选参数类型: 枚举，参见枚举定义默认值: SUCCESS|查询结果
scName|SC ID|参数可选性: 必选参数类型: 字符串参数范围: 0-100|内部显示参数，暂不提供说明。
scheduler|Scheduler|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
schedulerBuffer|Scheduler Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
transactionBuffer|Transaction Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
smallcacheEventQueueBuffer|SmallCacheEventQueue Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
mediumcacheEventQueueBuffer|MediumCacheEventQueue Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
largecacheEventQueueBuffer|LargeCacheEventQueue Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
httpLinkRetranQueueBuffer|HttpLinkRetranQueue Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
mediumBuffer|Medium Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
smallBuffer|Small Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
sonCfgTransferBuffer|SonCfgTransfer Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
ulNonUeNrppaTransferBuffer|UlNonUeNrppaTransfer Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
dnsServiceDataBuffer|Dns Service Data Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
dnsCacheBuffer|Dns Cache Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
sigTraceBuffer|Signal Trace Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
nfSelectBuffer|NF Select Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。
singleNfRouteSelBuffer|Single NF Route Select Buffer|参数可选性: 必选参数类型: 字符串参数范围: 0-20|内部显示参数，暂不提供说明。按照百分比进行显示。




命令举例 


`
查询AMF Communication服务的资源使用率。
SHOW COMM DATAUSAGE

(No.3) : SHOW COMM DATAUSAGE:
-----------------Namf_Communication_0----------------
查询结果 
---------
成功     
---------
记录数：1
SC ID         Scheduler Scheduler Buffer Transaction Buffer SmallCacheEventQueue Buffer MediumCacheEventQueue Buffer LargeCacheEventQueue Buffer HttpLinkRetranQueue Buffer Medium Buffer Small Buffer SonCfgTransfer Buffer UlNonUeNrppaTransfer Buffer Dns Service Data Buffer Dns Cache Buffer Signal Trace Buffer NF Select Buffer Single NF Route Select Buffer
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
sc-amf-comm-1 0         0                0                  0                           0                            0                           0                          0             0            0                     0                           0                       0                0                   0                0                            
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
记录数：1
执行成功开始时间:2020-12-12 15:05:41 耗时: 0.153 秒

` 


## 查询本地数据库表 
## 查询本地数据库表 


背景知识 


AMF本地SC使用本地数据库存储信息，在系统调测或者运维观测时，调测人员或者运维人员查询数据库表情况，以便了解系统数据库运行情况，为系统调测、运维观测提供方便。 




功能说明 


本功能用于查询本地数据库表情况。 




子主题： 






### 查询本地数据库表(SHOW COMMU LOCAL DATABASE TABLE) 
### 查询本地数据库表(SHOW COMMU LOCAL DATABASE TABLE) 


功能说明 

该命令用于查询AMF本地数据库表情况。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，显示成功或失败。




命令举例 


`
查询AMF本地数据库表情况。
SHOW COMMU LOCAL DATABASE TABLE

(No.1) : SHOW COMMU LOCAL DATABASE TABLE:
-----------------Namf_Communication_0----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


## 查询UDSF数据库表 
## 查询UDSF数据库表 


背景知识 


AMF将本地数据同步存储到UDSF数据库上，在系统调测或者运维观测时，调测人员或者运维人员可以查询UDSF数据库表情况，为系统调测、运维观测提供方便。 




功能说明 


本功能用于查询UDSF数据库表情况。 




子主题： 






### 查询UDSF数据库表(SHOW COMMU UDSF DATABASE TABLE) 
### 查询UDSF数据库表(SHOW COMMU UDSF DATABASE TABLE) 


功能说明 

该命令用于查询UDSF数据库表情况。 


注意事项 

无。


输出参数说明 


标识|名称|类型|说明
---|---|---|---
RESULT|执行结果|参数可选性: 任选参数类型: 枚举，参见枚举定义参数范围: 0-1默认值: SUCCESS|该参数用于显示本命令的执行结果，显示成功或失败。




命令举例 


`
查询UDSF数据库表情况。
SHOW COMMU UDSF DATABASE TABLE

(No.1) : SHOW COMMU UDSF DATABASE TABLE:
-----------------Namf_Communication_0----------------正在执行一个异步命令，请到操作记录中查看执行结果。

` 


# 异常信令管控 
# 异常信令管控 


背景知识 


信令风暴是由于网络收到的终端信令请求超过了网络各项信令资源的处理能力，引发网络拥塞甚至雪崩效应，导致网络不可用。异常信令管控是网络侧采取一定的措施，减少网络侧要处理的信令，避免网络拥塞，化解信令风暴。 




功能说明 


本功能用于查询某个用户是否在信令管控的黑名单中，以及目前在黑名单中的用户有哪些。当运营商不想管控某个用户时，可以使用该功能把用户从黑名单中移除。 




子主题： 






## 查询用户的异常信令管控状态(SHOW USERSIGNALCONTROLSTATE) 
## 查询用户的异常信令管控状态(SHOW USERSIGNALCONTROLSTATE) 


功能说明 

该命令用于AMF查询指定用户的异常信令管控状态，包括用户在黑名单中、用户在白名单中
。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于设置查询异常信令管控状态的用户的SUPI（Subscriber Permanent Identifier，用户永久标识），表示用户的身份信息。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于设置查询异常信令管控状态的用户的SUPI（Subscriber Permanent Identifier，用户永久标识），表示用户的身份信息。
result|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于显示本命令的操作结果，包括用户在黑名单中、用户在白名单中。




命令举例 


`
AMF查询SUPI为460110123456789的用户的异常信令管控状态。
SHOW USERSIGNALCONTROLSTATE:SUPI="460110123456789"
(No.1) : SHOW USERSIGNALCONTROLSTATE:SUPI="460011234567890"
-----------------Namf_Communication_0_A----------------
SUPI
460011234567890

操作结果
用户在白名单中

执行成功耗时: 0.162 秒

` 


## 把用户从异常信令管控黑名单中删除(DELETE USERSIGNALCONTROLBLACKLIST) 
## 把用户从异常信令管控黑名单中删除(DELETE USERSIGNALCONTROLBLACKLIST) 


功能说明 

用户在一定周期内频繁执行某个业务流程，冲击AMF时，AMF将进行异常管控措施，将用户加入黑名单中。该命令用于将指定用户从异常管控黑名单中删除。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于设置需要从异常信令管控黑名单列表中删除的用户的SUPI（Subscriber Permanent Identifier，用户永久标识），表示用户的身份信息。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于设置需要从异常信令管控黑名单列表中删除的用户的SUPI（Subscriber Permanent Identifier，用户永久标识），表示用户的身份信息。
result|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于显示本命令的操作结果。




命令举例 


`
AMF把SUPI为460110123456789的用户从异常信令管控黑名单中删除。
DELETE USERSIGNALCONTROLBLACKLIST:SUPI="460110123456789"
` 


## 查询信令黑名单用户(SHOW SIGNALBLACKUSER) 
## 查询信令黑名单用户(SHOW SIGNALBLACKUSER) 


功能说明 

该命令用于AMF查询指定SC上所有异常信令管控的黑名单用户。 


注意事项 

每一次查询最多显示200条记录，当总的黑名单用户数大于200个时，为了查出所有黑名单用户，需要进行多次查询。 

每次查询都会显示黑名单用户总数、当前查询数、已查询数，具体黑名单用户及提示信息。 

当黑名单用户数很多时，如果只是想获知黑名单用户的总数，并不需要知道每个黑名单用户的supi，只需一次查询即可。 


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数用于设置SC（Service Component，服务组件）的编号。用于指定查询该AMF的某个SC上的黑名单用户列表。可通过"查询SC信息"命令来查询当前可用的SC，具体命令格式为：SHOW SCINFO:SC_TYPENAME="sc-amf-comm"




输出参数说明 


标识|名称|类型|说明
---|---|---|---
SCLOGICNO|SC逻辑编号|参数可选性: 必选参数类型: 数字参数范围: 1-1000|该参数显示SC（Service Component，服务组件）的编号。该参数的作用是指定查询该AMF的某个SC上的黑名单用户列表，与请求保持一致。
TOTALNUM|黑名单用户总数|参数可选性: 必选参数类型: 数字|该参数显示当前SC异常信令管控的黑名单用户总数。
CURRENTNUM|本次查询用户数|参数可选性: 必选参数类型: 数字|该参数显示查询当前SC异常信令管控的黑名单用户时，本批次显示的用户数。
QUERIEDNUM|已查询数|参数可选性: 必选参数类型: 数字|该参数显示查询当前SC异常信令管控的黑名单用户时，已经查询过的用户数。
RESULT|查询结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|该参数表示查询结果，提示操作者的查询进度。
SUPIINFO|黑名单用户信息|参数可选性: 任选参数类型: 字符串参数范围: 5-30|该参数表示黑名单用户的具体信息，格式为“supi[触发进入黑名单的流程]”，例：460011122000000[SERVICEREQ]。




命令举例 


`
查询信令管控所有黑名单用户信息。
SHOW SIGNALBLACKUSER:SCLOGICNO=1

(No.1) : SHOW SIGNALBLACKUSER:SCLOGICNO=1
-----------------Namf_Communication_0_A----------------
黑名单用户信息
460011122011000[REGISTER]
460011122011001[REGISTER]
460011122011002[SERVICEREQ]
460011122011003[SERVICEREQ]
460011122011004[PDU_ESTABLISH]
460011122011005[PDU_ESTABLISH]

SC逻辑编号 黑名单用户总数 本次查询用户数 已查询数 查询结果
1         6              6             6       查询结束
记录数：1

执行成功耗时: 0.513 秒

` 


## 把用户添加到异常信令管控黑名单中(PUT USERSIGNALCONTROLBLACKLIST) 
## 把用户添加到异常信令管控黑名单中(PUT USERSIGNALCONTROLBLACKLIST) 


功能说明 

用户在一定周期内频繁执行某个业务流程，冲击AMF时，AMF将进行异常管控措施，将用户加入黑名单中。该命令用于将指定用户加入到异常管控黑名单中。 


注意事项 

无。


输入参数说明 


标识|名称|类型|说明
---|---|---|---
SUPI|SUPI|参数可选性: 必选参数类型: 字符串参数范围: 5-15|该参数用于设置向异常信令管控黑名单列表中添加的用户的SUPI（Subscriber Permanent Identifier，用户永久标识），表示用户的身份信息。




输出参数说明 


标识|名称|类型|说明
---|---|---|---
result|操作结果|参数可选性: 必选参数类型: 字符串参数范围: 0-200|该参数用于显示本命令的操作结果。




命令举例 


`
把SUPI为460110123456789的用户添加到异常信令管控黑名单中。
PUT USERSIGNALCONTROLBLACKLIST:SUPI="460110123456789"
` 


# EMS+管理 
# EMS+管理 


背景知识 


AMF支持和EMS+服务器对接，将业务日志上报给EMS+服务器。 




功能说明 


本节点用于进行EMS+管理，比如可以通过动态命令，查询AMF和EMS+服务器之间的链路状态。 




子主题： 






## 查询EMS+链路状态 
## 查询EMS+链路状态 


背景知识 


AMF和EMS+服务器对接，将业务日志发送给EMS+服务器。AMF会和EMS+服务器进行链路状态检活，维护着AMF和EMS+服务器之间的链路状态。 




功能说明 


该节点用于查询AMF和EMS+服务器之间的链路状态，包括与主用EMS+服务器和备用EMS+服务器之间的链路状态。 




子主题： 






### 查询EMS+链路状态(SHOW EMSPLUS LINK STATUS) 
### 查询EMS+链路状态(SHOW EMSPLUS LINK STATUS) 


功能说明 

该命令用于查询AMF和EMS+服务器之间的链路状态，包括与主用EMS+服务器和备用EMS+服务器之间的链路状态。 


注意事项 

无


输出参数说明 


标识|名称|类型|说明
---|---|---|---
link|链路|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|表示链路是主用或备用。
remoteip|远端IP|参数可选性: 必选参数类型: 字符串|远端Ems+服务器的IP地址。
remoteport|远端端口号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|远端Ems+服务器的端口号。
localip|本端IP|参数可选性: 必选参数类型: 字符串|本端与Ems+服务器对接的IP地址。
localport|本端端口号|参数可选性: 必选参数类型: 数字参数范围: 0-65535|本端与Ems+服务器对接的端口号。
vrf|VRF ID|参数可选性: 必选参数类型: 数字参数范围: 0-254|本端与Ems+服务器对接的地址关联的VRF。
status|链路状态|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 0-1|主用或备用链路的状态。




命令举例 


`
查询AMF和EMS+服务器之间的链路状态。

(No.1) : SHOW EMSPLUS LINK STATUS:
-----------------Namf_Communication_0_A----------------
链路  远端IP    远端端口号   本端IP   本端端口号       VRF  状态
---------------------------------------------
主用链路  1.2.3.4       5088         1.2.3.5   15000   0    激活
备用链路  10.20.30.40   5088         1.2.3.5   15000   0    未激活
-------------------------------------
记录数：2

执行成功耗时: 1.046 秒

` 


# ACL规则管理 
# ACL规则管理 


背景知识 


ACL规则包括IP地址、端口、VRF ID以及协议类型等关键信息。 

基于配置的ACL规则，接口将收到的消息分发给正确的处理单元。当ACL规则异常时，接口无法将消息投递给正确处理单元，导致业务无法正常进行。 




功能说明 


当发现接口配置的ACL规则异常时，通过该节点下的动态命令，恢复接口通信服务相关的ACL规则。 




子主题： 






## 刷新AMF GTPC ACL规则(SET AMFGTPCACL) 
## 刷新AMF GTPC ACL规则(SET AMFGTPCACL) 


功能说明 

该命令用于重新刷新AMF GTPC ACL规则。 


注意事项 

无


输出参数说明 


标识|名称|类型|说明
---|---|---|---
operationResult|执行结果|参数可选性: 必选参数类型: 枚举，参见枚举定义参数范围: 1-2|该命令的执行结果：“刷新成功”或者“刷新失败”




命令举例 


`
刷新AMF GTPC ACL规则。
SET AMFGTPCACL

(No.2) : SET AMFGTPCACL:
-----------------Namf_Communication_0----------------
执行结果 
---------
刷新成功 
---------
记录数：1
执行成功开始时间:2020-12-16 09:49:29 耗时: 0.287 秒

` 


