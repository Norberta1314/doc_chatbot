# 操作与维护 
## 用户指南 
### 操作指南 
#### 资源纳管场景操作 
Resource Management 
资源纳管是物理上分布的资源构建成逻辑上统一的云资源池，进行资源统一管理和监控。 
TECS Director系统提供如下资源纳管功能：
数据中心生命周期管理，包括创建数据中心、删除数据中心、数据中心资源管理和监控等。 
云环境生命周期管理，包括添加云环境、删除云环境、编辑标签、云环境资源管理和监控等。 说明：云环境资源包括计算资源、存储资源和网络资源三部分。 
VDC生命周期管理，包括创建VDC、修改VDC、查看VDC和删除VDC等。 
虚拟机生命周期管理。 
公有云的接入纳管。 
针对资源提供方和使用方角色的资源纳管详细操作，参见配置指南
。
#### 监控场景操作 
Monitoring Operations 
本节操作的统一前提为：已经获得统一云管领域管理员账号的用户名和密码。 
##### 监控仪表盘 
director-monitorcenter-dashboard 
###### 摘要 
仪表盘以域管理员视角，呈现多个数据中心汇总统计的告警及服务水平报告，用户能够通过各种报告来实现主动管理。 
呈现异常资源数量，并可链接到告警详情页面查看告警详细信息。 
监控资源状态，如异常云环境数、异常主机数、异常虚机数及异常云硬盘数，并可链接到异常资源页面查看详细信息。 
监控重要资源的利用率，如内核利用率、内存利用率、本地存储和共享存储利用率。 
监控虚机健康状况、主机健康状况和容量状况。 
###### 步骤 
查看异常资源
登录云管统一平台后，单击导航菜单，选择运维→仪表盘
，打开仪表盘页面，如[图1](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__98fdebb6-d047-48c6-8fd4-e76a8c2972a4)所示。
图1  仪表盘页面
[]images/1591260453971.png)
 说明： 
在整系统概览页面查看异常资源和资源利用率信息。
在资源统计一栏，资源以Tab的形式显示。
单击异常资源图标，将显示异常资源的详细信息，如[图2](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A73-A9BAE801)所示（以查看异常虚机为例）。
图2  异常虚机监控页面
[]images/2018-11-19%2010-14-38.png)
查看虚机健康状态
在仪表盘页面，单击虚机健康状况页签，查看数据中心和云环境的虚机健康状况分布，如[图3](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__4564bcf0-31d1-444d-9381-feb36acc1d70)所示。
图3  虚机健康状况页面
[]images/1618212699969.png)
（可选）单击右上角的按钮，打开选择对象页面，选择监控的数据中心和云环境，如[图4](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__%E9%80%89%E6%8B%A9%E5%AF%B9%E8%B1%A1%E9%A1%B5%E9%9D%A2-1A9E8B6F)所示。
图4  选择对象页面
[]images/2018-07-03%2016-56-50.png)
单击确认按钮。
查看主机健康状态
单击主机健康状况页签，查看数据中心和云环境的主机健康状况分布，如[图5](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__%E4%B8%BB%E6%9C%BA%E5%81%A5%E5%BA%B7%E7%8A%B6%E5%86%B5%E9%A1%B5%E9%9D%A2-1A9ED141)所示。
图5  主机健康状况页面
[]images/2018-07-03%2016-57-29.png)
（可选）单击右上角的按钮，打开选择对象页面，选择监控的数据中心和云环境，如[图4](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__%E9%80%89%E6%8B%A9%E5%AF%B9%E8%B1%A1%E9%A1%B5%E9%9D%A2-1A9E8B6F)所示。
查看组织虚机健康状况
单击组织虚机健康状况页签，查看数据中心和云环境的组织虚机健康状况分布，如[图6](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__915aed72-2a1f-4927-a76c-ab39bf701d83)所示。
图6  组织虚机健康状况
[]images/1618213006502.png)
（可选）单击右上角的按钮，打开选择对象页面，选择监控的组织和子组织。
单击健康状况优的虚机列表区域的导出按钮，弹出导出对话框，如[图7](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__e5bcca82-f078-4589-811e-822b889f7cd0)所示。
图7  导出
[]images/1618213072326.png)
填写导出文件名，单击导出，完成虚机列表导出。
查看容量状况
单击容量概览页签，查看数据中心和云环境的容量信息，如[图8](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__%E5%AE%B9%E9%87%8F%E6%A6%82%E8%A7%88%E9%A1%B5%E9%9D%A2%E4%B8%80-1A9F9505)、[图9](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__%E5%AE%B9%E9%87%8F%E6%A6%82%E8%A7%88%E9%A1%B5%E9%9D%A2%E4%BA%8C-1A9F9B2A)所示。
图8  容量概览页面（一）
[]images/2018-07-03%2017-15-34.png)
图9  容量概览页面（二）
[]images/2018-07-03%2017-15-51.png)
（可选）单击容量利用率评估区域的下拉列表框，可选择不同的评估指标，如[图10](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__fig_-1628731-1AA0769C)所示。
图10  选择评估指标
[]images/2018-07-03%2017-17-28.png)
（可选）单击右上角的按钮，打开选择对象页面，选择监控的数据中心和云环境。
全屏显示监控信息（需要准备具有大屏功能的License文件）
在仪表盘页面，单击右上角的大屏显示按钮，全屏查看数据中心和云环境的监控信息，如[图11](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__61f7b393-f45c-4526-9c9f-13ecf2e40ef2)所示。
图11  大屏显示
[]images/%E5%A4%A7%E5%B1%8F.PNG)
单击编辑当前屏按钮，进入编辑模式，单击各区域右上角的[]images/%E6%8C%89%E9%92%AE.PNG)按钮，可以对各区域显示内容进行编辑。
 说明： 
左上角整系统资源概览区域显示对象必须为8个，否则无法保存。 
右上角虚机资源的3部分必须从CPU、内存、共享存储、本地存储和存储5个中选择3个，否则无法保存。 
下方区域可设置VDCTOP5的门限。 
整系统资源总览最上方的大屏名字可以进行编辑（<=50个字符）。 
单击恢复默认按钮，可将显示区域恢复成默认状态。 
单击显示设置，可对大屏显示的三个页面进行设置，如[图12](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__50b13c20-552b-4809-919f-48c7f1444a16)所示。当设置了多个页面时，单击页面上方的小圆点即可切换页面。
图12  显示设置
[]images/%E5%A4%A7%E5%B1%8F%E6%98%BE%E7%A4%BA%E8%AE%BE%E7%BD%AE.png)
查看能耗
单击节能降耗页签，可以查看物理服务器和主机的能耗信息，如[图13](%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7.html#%E4%BB%AA%E8%A1%A8%E7%9B%98%E7%9B%91%E6%8E%A7-A6416566__c388fe0b-6413-49f4-913e-7a10d2113a91)所示。
图13  节能降耗
[]images/snap15.png)
##### 管理告警 
ngict-fm-currentAlarm 
###### 摘要 
统一云管平台提供集中的告警管理功能。 
支持告警分级管理，按严重程度分为严重、主要、次要和警告四级。 
支持历史告警。告警恢复后从当前告警列表中删除，同时保存到历史告警。 
支持按照告警级别、告警对象和告警产生时间等对告警进行筛选。 
统一云管平台提供智能告警管理功能。 
支持根因告警分析及拓扑呈现。根因告警模型描述告警之间的推导关系：A OR B → C。告警A发生或者告警B发生，可以推导告警C发生。 
支持关联告警分析及生成智能告警。关联告警模型描述相互关联的告警按照一定逻辑关系（与，或）出现时产生的运维事件：A OR B → R。告警A发生或者告警B发生，则产生关联事件R。这里R不是实际告警，而是根据运维需要定义的运维事件名称。 
告警的处理方法参见告警处理
。
###### 步骤 
过滤告警
登录统一云管平台后，单击导航菜单，选择运维→告警管理→当前告警
，默认打开告警监控页面，查看当前存在的告警，如[图1](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__92d57b3c-83c0-4661-877d-ab31a71d87dc)所示。
图1  告警监控页面
[]images/1649751885877.png)
单击条件查询按钮，展开告警过滤区域，根据需要过滤告警，如[图2](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__0262ea8d-c7a1-4b95-9f69-3f0123d35f31)所示。设置告警级别、发生时间、告警码、确认状态、可见性、资源等，单击查询按钮。
图2  条件查询区域
[]images/1649751958356.png)
维护智能分析模板
登录云管统一平台后，单击导航菜单，选择运维→告警管理→告警设置
。
单击左侧菜单栏的告警分析设置，告警分析设置页面如[图3](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__%E6%99%BA%E8%83%BD%E5%88%86%E6%9E%90%E6%A8%A1%E6%9D%BF%E9%A1%B5%E9%9D%A2-1B1120FC)所示。
图3  智能分析模板页面
[]images/2018-07-04%2011-00-58.png)
勾选模板，单击导出，将模板文件保存到本地。
本地编辑模板文件。 
单击添加模板，添加编辑后的模板文件。
将模板的当前状态设置为启用。
单击查看根因告警按钮，打开根因告警页面，如[图4](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__0c425bfe-a512-4d9b-86b2-a0927fc3f555)所示。
图4  根因告警页面
[]images/snap086.png)
在[图4](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__0c425bfe-a512-4d9b-86b2-a0927fc3f555)中查看导入模板中的告警是否存在。
如果查看导入模板中的告警不存在，在请输入选择告警名称或告警码输入框中输入告警码找到对应的告警，单击添加根因告警按钮，完成根因告警添加。
自动定位虚机磁盘IO读写时延异常问题
登录云管统一平台后，单击导航菜单，选择运维→告警管理→告警设置→QoS告警设置
，打开QoS告警设置页面，如[图5](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__98cbbcb3-528e-4dd7-8a4b-e945fce9570a)所示。
图5  QoS告警设置页面
[]images/1619577304819.png)
改变虚机磁盘IO读写时延的值，使其可以上报告警。 
进入告警管理→当前告警→告警监控
，确认已经产生告警，如[图6](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__286246d8-4760-4352-b22d-ec425e657f2c)所示。
图6  告警监控页面
[]images/1619577358120.png)
进入运维→运维分析→故障分析
页面，会自动对虚机磁盘IO读写时延的告警进行故障分析并显示，如[图7](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__09fc191f-368b-4ed8-9156-e2dfbd9c7ab4)所示。
图7  故障分析页面
[]images/1619577421835.png)
单击告警名称，可以看到该告警的详细信息，包括故障概览和分析依据，如[图8](%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86.html#%E5%91%8A%E8%AD%A6%E7%AE%A1%E7%90%86-A6407EF7__1060bc12-f2d4-4696-942b-bfc555004cbe)所示。
图8  告警详细信息
[]images/1619577455543.png)
###### 相关任务 
如果...|那么...
---|---
导出告警|在告警监控页面，单击导出下拉列表框，选择导出已选或导出全部。设置名字和导出文件类型，单击确定按钮，导出当前告警。
实时刷新告警|在告警监控页面，单击按钮，展开实时刷新开关。
智能分析告警|单击导航菜单，选择告警管理→当前告警→告警分析，系统自动显示分析结果。单击某一问题分析条目，打开具体告警分析页面。
##### 管理对象 
director-monitorcenter-object-infrastructure-inventory 
###### 摘要 
TECS Director系统支持所有云环境的主机和虚机对象详情及DomainAdmin账户创建的VDC的对象详情的清单查看。
TECS Director系统支持各数据中心内的物理资源和逻辑资源的拓扑管理，且支持拓扑图节点的当前告警管理。
物理拓扑的显示规则为：选择基础设施→数据中心→云环境，单击云环境名称，进入详细信息页面，单击物理资源子页面，如图1所示，查看POD、机架、机框、刀片、磁阵、交换机、机架式服务器、路由器、防火墙、负载均衡等信息。图1  物理资源页面 
逻辑拓扑的显示规则为：选择基础设施→数据中心→云环境，单击云环境名称进入详细信息页面，单击虚拟资源子页面，如图2所示，查看可用域、主机集群、主机、虚机、裸金属、裸金属服务器等信息。图2  虚拟资源页面可用域（AZ）：通常是一组具有独立电力设备供电的节点集合。主机集群：通常将具有某一相同硬件资源属性的主机（如固态硬盘的主机、内存超过32 G的主机）划分为一个主机集群。在部署虚机时，云管平台会根据虚机的属性自动选择合适的主机集群。 
###### 步骤 
查看清单
登录云管统一平台后，单击导航菜单，选择运维→运维分析→资源对象
，打开基础设施清单页面，如[图3](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__0afac56e-f154-4660-a6a3-43c98bef5b81)所示。
图3  基础设施清单页面
[]images/1649752141184.png)
单击某一对象名称（以主机对象为例），打开概述页面，查看该对象的健康状况、风险、效率及告警信息，如[图4](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E4%B8%BB%E6%9C%BA%E6%B8%85%E5%8D%95%E9%A1%B5%E9%9D%A2-1AA4F184)所示。
 说明： 
单击高级筛选按钮，展开筛选区域框，可选择各个筛选项来筛选出需要的清单。例如：
对象类型选择容器POD，单击筛选按钮可以筛选出所有对象类型为容器POD的对象。 
对象类型选择主机，单击筛选按钮可以筛选出所有对象类型为主机的对象。 
图4  主机清单页面
[]images/V21-%E6%B8%85%E5%8D%95-1.png)
（可选）切换到综合指标、时间轴、网络拓扑、虚机页面，查看详细信息。
 说明： 
在网络拓扑页签，支持虚拟网络与物理网络拓扑可视化。
单击主机承载的物理设备，如[图5](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__eaa2965e-d7d4-4756-bc3b-17ccea0eeb6c)所示，可跳转到物理设备信息页面，如[图6](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__36b2c642-ee63-4a8c-a871-3a03d8fc7bd3)所示。
图5  主机的网络拓扑页签举例
[]images/snap363-.png)
图6  物理设备页面
[]images/snap364.png)
管理行政归属拓扑
登录云管统一平台后，单击导航菜单，选择拓扑→行政归属拓扑
，打开行政归属拓扑页面，如[图7](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E8%A1%8C%E6%94%BF%E5%BD%92%E5%B1%9E%E6%8B%93%E6%89%91%E9%A1%B5%E9%9D%A2-A7BC67EA)所示。
图7  行政归属拓扑页面
[]images/2018-07-12%2015-18-40.png)
单击页面右上角编辑行政关系按钮，打开编辑行政归属拓扑页面，可以对行政归属拓扑进行编辑。
将鼠标置于根节点上，可以对根节点进行重命名、添加子单位操作，如图8所示。图8  编辑根节点 
将鼠标置于子节点上，可以对子节点进行重命名、添加子单位、删除操作，如图9所示。图9  编辑子节点 
单击退出编辑按钮，结束编辑状态。
将鼠标置于子节点上，如[图10](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__46f0594c-5c83-4e54-a45d-25e5435684e1)所示，单击关联云环境按钮，弹出关联云环境对话框，如[图11](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__aad7980a-bbdc-44f9-859c-998c3477a301)所示。
图10  关联云环境
[]images/1591259179331.png)
图11  关联云环境对话框
[]images/1591259179381.png)
选择需要关联的云环境，单击确认按钮。
（可选）将鼠标置于子节点上，可以看到已经关联的云环境信息，如[图12](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__235de0cd-18c6-4656-a568-0f6c8a033567)所示，单击云环境名称可以跳转到云环境概览页面。
图12  关联云环境
[]images/1591259240003.png)
管理虚拟计算拓扑
单击左侧菜单栏的虚拟计算拓扑，打开虚拟计算拓扑页面，如[图13](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E8%99%9A%E6%8B%9F%E6%8B%93%E6%89%91%E8%A7%86%E5%9B%BE%E9%A1%B5%E9%9D%A2-7BF8DC2B)所示。
图13  虚拟计算拓扑页面
[]images/2018-07-04%2011-28-58.png)
单击数据中心节点的展开按钮，将鼠标移到拓扑图上的节点上，显示该节点的当前告警信息，如[图14](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%863-AE01CFA3)所示。
图14  查看节点状态
[]images/2018-07-04%2011-32-29.png)
若存在告警，单击告警条目，系统显示告警详细信息，用户可根据告警信息操作处理。 
管理组织拓扑
单击左侧菜单栏的组织拓扑，打开组织拓扑页面，如[图15](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__3019d80e-ee2a-4fd9-9309-00b4dbcfcd7a)所示。
图15  组织拓扑页面
[]images/1572426201012.png)
将鼠标移到拓扑图上的节点上，显示该节点的当前告警信息，如[图16](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__5e5d551d-b504-4058-a607-6a80682e0a59)所示。
图16  查看节点状态
[]images/snap073.png)
管理物理设备拓扑
单击左侧菜单栏的物理设备拓扑，打开物理设备拓扑页面，如[图17](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E7%89%A9%E7%90%86%E6%8B%93%E6%89%91%E9%A1%B5%E9%9D%A2-7BF9EFEE)所示。
图17  物理设备拓扑页面
[]images/2018-07-04%2011-42-06.png)
单击数据中心节点的展开按钮，将鼠标移到拓扑图上的节点上，显示该节点的当前告警信息，如[图18](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E6%9F%A5%E7%9C%8B%E8%8A%82%E7%82%B9%E7%8A%B6%E6%80%81-7BFA509A)所示。
图18  查看节点状态
[]images/2018-07-04%2011-43-57.png)
若存在告警，单击告警条目，系统显示告警详细信息，用户可根据告警信息操作处理。 
物理网络拓扑
单击左侧菜单栏的物理网络拓扑，打开物理网络拓扑页面，如[图19](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__22554ea6-fdcc-4f90-a042-592c763af9fe)所示。
图19  物理网络拓扑
[]images/snap062.png)
将鼠标置于物理网络的节点上，显示该节点的详细信息，如[图20](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__43ce9123-5741-4134-bdb6-42b87f49b6eb)所示。
图20  物理网络拓扑节点详细信息
[]images/snap078.png)
单击物理网络拓扑节点，进入数据中心网络拓扑页面，将鼠标移到拓扑图上的节点上，显示该节点的详细信息，如[图21](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__a2d63721-b739-4369-9b5b-abebbfa7188c)所示。
图21  物理网络拓扑详细信息
[]images/snap079.png)
单击页面右上角配置物理网络拓扑按钮，进入配置网络拓扑页面，如[图22](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__a94809af-0880-41db-805b-0f8ce575f410)所示。
图22  配置网络拓扑页面
[]images/snap080.png)
在网络链路子页面， 单击创建网络链路按钮，弹出创建网络链路对话框，如[图23](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__b4af80ea-ecfd-421f-a207-8fd91eb226fe)所示。
图23  创建网络链路对话框
[]images/1591259546550.png)
 说明： 
也可以选择单击导入网络链路按钮，通过导入方式创建网络链路。
配置网络链接参数，单击创建按钮，创建网络链路。
（可选）勾选中网络链路（1个或多个），单击删除按钮，在弹出的删除提示框中单击删除按钮，可以批量删除网络链路。
管理虚拟存储拓扑
单击左侧菜单栏的虚拟存储拓扑，打开虚拟存储拓扑页面，如[图24](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E5%AD%98%E5%82%A8%E6%8B%93%E6%89%91%E9%A1%B5%E9%9D%A2-A7C173EB)所示。将鼠标置于拓扑图上的节点上，显示该节点的当前告警信息，如[图25](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E6%9F%A5%E7%9C%8B%E8%8A%82%E7%82%B9%E7%8A%B6%E6%80%81-A7C19DD8)所示。
图24  虚拟存储拓扑页面
[]images/2018-07-12%2016-13-54.png)
图25  查看节点状态
[]images/2018-07-12%2016-14-06.png)
管理分布式存储拓扑
单击左侧菜单栏的分布式存储拓扑→逻辑拓扑
，打开逻辑拓扑页面，如[图26](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__e8c333aa-50b0-43ba-87df-3666c3624a1e)所示。将鼠标置于拓扑图上的节点上，显示该节点的当前告警信息，如[图27](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__c043e73c-e985-41f7-a2d1-fc7a00a2eb9e)所示。
图26  逻辑拓扑页面
[]images/snap051.png)
图27  查看节点状态
[]images/snap052.png)
单击左侧菜单栏的分布式存储拓扑→物理拓扑
，打开物理拓扑页面，如[图28](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__d212f94e-e67b-4365-b43f-496dc80017d0)所示。将鼠标置于拓扑图上的节点上，显示该节点的当前告警信息，如[图29](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__24ed8958-5ba0-4323-b8a8-c3ed22e713be)所示。
图28  物理拓扑页面
[]images/snap053.png)
图29  查看节点状态
[]images/snap054.png)
管理自定义组
选择监控中心→资源对象→自定义组
，打开自定义组页面，如[图30](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2-7BFB9EA4)所示。
图30  自定义组页面
[]images/2018-11-21%2014-17-39.png)
单击+创建自定义组，打开创建自定义组页面，如[图31](%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86.html#%E6%8B%93%E6%89%91%E7%AE%A1%E7%90%86-AD794CCB__%E6%96%B0%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84-7BFBDD3E)所示。
图31  创建自定义组
[]images/2018-11-21%2014-17-57.png)
根据规划，填写组名称、筛选对象，单击创建，完成自定义组创建。
###### 相关任务 
在主机时间轴中查看发起的主机/物理服务器操作辅助故障分析。单击导航菜单，选择基础设施→计算→主机，打开主机页面。在主机列表中，单击主机名称，切换到主机时间轴页签，如图32所示。图32  时间轴页签单击选择对象按钮，选择主机对应的服务器信息，如图33所示。图33  选择对象单击确定按钮，显示主机和对应服务器的告警细节。拖拽时间轴到服务器的告警的时间点处，会显示服务器的告警信息。 
在虚机时间轴中查看虚机操作辅助故障分析。单击导航菜单，选择基础设施→计算→虚机，打开虚机页面。在虚机列表中，单击虚机名称，切换到虚机时间轴页签，如图34所示。图34  时间轴页签拖拽时间轴到有操作日志的时间点处（蓝色图标处），会显示虚机的操作日志信息。单击导航菜单，选择基础设施→计算→主机，打开主机页面。在主机列表中，单击主机名称，切换到主机时间轴页签，单击选择对象按钮，选择虚机，如图35所示。图35  选择虚机单击确定按钮，显示虚机和主机的操作日志，如图36所示。图36  显示操作日志拖拽时间轴到虚机的操作日志的时间点处，会显示虚机的操作日志信息。单击查看当前时刻，可以看到当前虚机的操作日志信息，如图37所示。图37  当前虚机的操作日志信息 
##### 监控服务 
director-monitorcenter-sysmonitor-cloudenvservice 
###### 摘要 
云管平台系统提供TECS OpenStack基本服务组件以及TECS Director服务模块的运行状态监控信息，提供用户了解当前系统的实时运行状态信息。
监控对象及信息包括：TECS Openstack的nova、cinder、neutron等组件服务状态以及TECS Director的backup、dci等服务状态。
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→系统自监控→云环境系统
，打开云环境系统页面。
在云环境系统页面，查看TECS OpenStack基本服务（VIM服务、计算服务、存储服务和网络代理）组件的状态信息，如[图1](%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html#%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7-A641E2D9__3c29b981-8066-4dc8-88b3-aab7365f35c6)所示。
图1  云环境系统页面
[]images/1649752219458.png)
单击某一云环境名称，打开该环境监控信息页面，如[图2](%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html#%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7-A641E2D9__VIM%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7%E9%A1%B5%E9%9D%A2-86C3FA09)~[图5](%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html#%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7-A641E2D9__%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86%E7%9B%91%E6%8E%A7%E9%A1%B5%E9%9D%A2-86C42C40)所示。
图2  VIM服务监控页面[]images/snap393.png)
图3  计算服务监控页面
[]images/2018-11-21%2016-16-51.png)
图4  存储服务监控页面
[]images/2018-11-21%2016-16-58.png)
图5  网络服务监控页面
[]images/2018-11-21%2016-17-06.png)
 说明： 
启用状态为启用表示该组件服务进程为工作状态。 
状态为正常表示该组件服务进程允许投入使用。 
关于各组件的含义和详细说明参见TECS OpenStack相关文档。 
在左侧导航树中选择Director服务，打开Director服务页面，查看TECS Director服务运行状态，如[图6](%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html#%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7-A641E2D9__9b229261-7832-41ec-ae3a-e5a7a010d780)所示。
图6  查看TECS Director服务运行状态
[]images/snap088.png)
##### 管理性能 
ngict-pm-commonQuery 
###### 摘要 
统一云管管理端可通过TECS Director性能管理监控接入的资源池的物理资源及虚拟资源的状态和使用情况。
支持实时和历史性能数据查询，最多可查询360天的历史性能数据。 
查询支持5分钟、10分钟、15分钟钟、30分和1小时的查询粒度。历史查询还支持1天、1周和1月的查询粒度。 
支持数据中心、云环境、虚机、虚机网络、磁盘、主机、主机集群、主机网络、防火墙、防火墙端口、负载均衡、负载均衡服务器、负载均衡池成员、磁阵、虚拟数据中心、容器节点、容器应用、阿里云虚机的查询对象类型。 
支持各查询对象类型下的各类指标查询。各指标的详细说明参见性能计数器参考。 
###### 前提 
已经获得统一云管Domain管理员账号或组织管理员账号的用户名和密码。 
###### 步骤 
查询性能指标
登录云管统一平台后，单击导航菜单，选择运维→性能→性能查询
，打开历史查询页面，如[图1](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__287cb13f-61ed-422c-b51f-accc1efbe724)所示。
图1  历史查询页面
[]images/1635403399484.png)
单击新建按钮，新建临时查询，如[图2](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__e5bfc684-d8be-4d55-b860-6e41d4ac3623)所示。
图2  临时查询
[]images/1635403399524.PNG)
单击选择指标/计数器按钮，在弹出的窗口中选择网元类型和计数器/指标，如[图3](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__2752168c-e32b-4c0f-b916-c2bff5fcd46d)所示。
图3  选择页面
[]images/1635403399574.png)
单击确定按钮，选择对象汇总、对象范围和时间粒度/时区/范围，对象范围可选择全部或部分对象，单击查询按钮，页面显示查询结果，如[图4](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__358a2745-5590-4f2f-958b-8249062c7c53)所示。
图4  查询结果
[]images/1635403399384.PNG)
根据需要进行后续操作。 
如果...|那么...
---|---
以图形方式显示查询结果|单击显示图形按钮。
导出查询结果|单击导出按钮，根据需要选择导出图形/导出表格/导出图形和表格。在弹出的对话框中输入文件名，单击导出按钮。
关闭查询|单击关闭查询按钮。
保存查询模板|单击保存模板按钮，弹出保存查询模板对话框。输入名称，选择访问控制、所属分组，单击确定按钮。
 说明： 
查询粒度可以在性能管理设置页面中进行修改设置，如[图5](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__ba1341be-3911-4853-8ff5-d9f619d8d486)所示。
选择监控中心→监控设置→性能管理设置
。
单击修改按钮，在性能数据支持粒度勾选支持的粒度。
单击确认按钮。
图5  设置性能数据支持粒度
[]images/1635403402904.png)
新建门限任务
选择性能→性能任务
，打开门限任务页面，如[图6](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__1be1897e-fbcb-4ee7-9cc5-98edf01dde3c)所示。
图6  门限任务
[]images/1635403400944.PNG)
单击新建按钮，打开新建页面，如[图7](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__91e7f730-bf33-4bd3-acd5-b0910e5fa313)所示。
图7  新建门限任务
[]images/1635403401214.png)
选择网元类型，单击新建普通门限按钮，弹出新建普通门限窗口，如[图8](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__b5f17cf5-dc69-430f-99fd-86c2daedf024)所示。
图8  新建普通门限页面
[]images/1635403401524.PNG)
选择要监控的指标/计数器并设置门限级别，单击新建按钮。单击下一步按钮，进入选择对象页面，如[图9](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__e7138eb9-df64-4a4b-9ef8-cbfc8a3bd239)所示。
图9  选择对象
[]images/1635403401254.PNG)
选择对象汇总和对象范围，对象范围可选择全部对象或部分对象，单击下一步按钮，进入选择时间页面，如[图10](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__d20ef29f-6b05-406e-b59c-ba2c14ab746d)所示。
图10  选择时间
[]images/1635403401484.PNG)
选择粒度、时间范围、有效时段和日期，单击新建按钮，完成添加门限任务。
管理指标
选择性能→指标管理
，打开指标管理页面，如[图11](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__5f555168-39aa-4cae-b4c1-443c79147e78)所示。
图11  指标管理
[]images/1635403402644.PNG)
单击新建按钮，打开新建指标页面，如[图12](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__b32e7ebb-987c-4f0f-83bb-47d39d291e88)所示。
图12  新建指标
[]images/1635403403044.PNG)
填写名称、指标类型等参数，单击新建按钮，完成指标添加。
###### 相关任务 
在时间轴中查询性能指标（以主机为例，支持时间轴的其他选项皆可查询）： 
登录云管统一平台后，单击导航菜单，选择基础设施→计算→主机
，打开主机页面。
单击主机名，进入主机的概述页面，单击时间轴，进入时间轴页面，如[图13](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__06343c9e-4b6c-44b2-bc78-4f13b58f204f)所示。
图13  时间轴
[]images/1619578647202.png)
在性能指标区域，单击选择指标，弹出选择性能指标，如[图14](%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86.html#%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86-A640783C__40aa9774-6e01-40a6-bc00-76a025f878c5)所示。
图14  选择性能指标
[]images/1619578720943.png)
选择其中的指标，单击确定按钮，页面开始查询指标信息，在性能指标区域将查询到的信息展示出来。
按格式提供指定物理主机实时性能数据： 
进入northbridge 容器。 
`docker exec -it 
k8s_northbridge_northbridge-northbridge-1-pb89h_director_a034e1c1-245a-4ce6-83f6-
ac093978e119_1 sh` 
输入命令将接口打开。 
`curl -X PUT 127.0.0.1:8379/api/v1.0/northbridge/systemconfig/irosswitch/on
` 
通过浏览器访问[https://Director_VIP:18443/uniportal/rest/osrms/statistics/host](https://Director_VIP:18443/uniportal/rest/osrms/statistics/host)（Director_VIP为TECS Director的web地址）。
##### 管理日志 
director-log-analysis 
###### 摘要 
统一云管平台提供统一的日志管理功能。 
支持对操作类、安全类和系统日志信息的查看。操作类日志是引起系统关键变动的操作记录，如对系统的配置、资源的发放和对资源的操作等。操作日志的信息包括哪个操作用户对哪个对象执行的什么操作、操作的结果如何、在什么时间执行操作等。安全类日志指用户登录、登出等涉及用户信息确认、鉴权相关的日志信息。系统日志指系统各模块异常处理的记录。 
支持多种方式筛选日志信息。 
支持日志提醒规则的设置。 
支持日志管理规则设置：可以对操作日志、安全日志、系统日志的最大存储时间进行设置，对每个云环境的日志采集进行单独控制，对日志备份信息设置。 
###### 步骤 
筛选查看日志
登录云管统一平台后，单击导航菜单，选择运维→日志→日志分析
，打开日志分析页面，如[图1](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__049c700e-6acb-4707-a792-cc1bdbcbacff)所示。
图1  日志分析页面
[]images/1591252089323.png)
可采用以下方式对日志进行筛选。 
按照字段筛选：单击添加筛选条件按钮，展开筛选条件，选择字段、逻辑关系单击查询进行筛选，如图2所示。图2  添加筛选条件 
按照关键字筛选：在搜索框中填写需要搜索的值，单击查询，搜索结果会在下方高亮显示。 
查看日志总览
单击导航菜单，选择日志→日志总览
，打开日志总览页面，如[图3](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__46b42b46-4dcc-49ba-84ed-bd63f1a79efd)所示。
图3  日志总览页面
[]images/1591252579533.png)
 说明： 
鼠标放在环形图上，可以查看各类日志所占百分比。 
单击某个日志分布区域右上角的图标，可以跳转至关联的日志分析页面，如[图4](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__c0b636dd-2762-4d93-974a-a75b3949dd35)所示（以按主机的日志分布为例）。
图4  按主机名进行日志计数
[]images/1591252684647.png)
查看操作日志
单击导航菜单，选择日志→审计日志
，打开日志查询页面，如[图5](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__249c8fb2-5395-40ae-a7be-fd3505ef1e1a)所示。
 说明： 
安全日志查看方式相似。 
图5  操作日志页面
[]images/1591253464899.png)
设置操作日志查询时间范围，单击查询按钮。
（可选）单击详情列的按钮，查看日志的详细信息。
创建日志提醒规则
在日志分析页面，输入过滤条件（即上报哪些日志的时候进行提醒），单击创建日志提醒规则按钮，弹出规则设置对话框如[图6](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__83558bbd-4116-4cbf-95fe-76b434d81f03)所示。
图6  创建日志提醒规则对话框
[]images/1591254191194.png)
根据规划，输入名称，级别等信息，单击创建按钮。
单击导航菜单，选择日志→日志提醒
，打开日志提醒页面，如[图7](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__0a29e7bb-1389-4359-b3a0-6c4c0f848323)所示。
图7  日志提醒页面
[]images/1591254256419.png)
单击日志提醒规则管理按钮，打开日志提醒规则管理页面，如[图8](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__df23c12f-597c-4705-8659-40f43ca93bdb)所示，显示创建的提醒规则。
图8  日志提醒规则管理页面
[]images/1591254302317.png)
在活动状态列，单击禁用/启用，设置规则为启用/禁用。
启用日志提醒规则后，在日志提醒页面，可以看到符合条件日志上报后产生的日志提醒消息，如[图9](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__6bd0f8da-d36b-4e94-ac26-bd8c6491542a)所示。
图9  日志提醒消息
[]images/1591254348304.png)
（可选）勾选日志提醒列表中的消息，单击删除按钮，在弹出的删除提示框中，单击删除按钮可删除日志提醒信息。
（可选）在日志提醒页面，操作列单击查看按钮，可以查看到消息详细信息。
 说明： 
在详细信息页面，单击查看日志详情按钮，可以看到是哪些日志触发了此条日志提醒消息上报。
设置日志管理规则
单击导航菜单，选择日志→日志管理设置
，打开日志管理设置页面，如[图10](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__bb8c3220-99c8-4802-b7cc-73a7bf1d1848)所示。
图10  日志管理设置页面
[]images/1591254532678.png)
单击修改设置按钮，对全局设置参数进行修改，修改完成后单击保存按钮。
修改云环境设置信息。
单击云环境设置，打开云环境设置页签，如[图11](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__ed630f59-3faa-417d-8a53-c4e6d69731f5)所示。
图11  云环境设置页面
[]images/1591254806369.png)
单击编辑按钮，对每个云环境的操作日志、系统日志以、硬件日志、容器服务器日志进行采集，如[图12](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__b9cffd47-6cc1-4c14-827f-754507505d4f)所示。
图12  编辑对话框
[]images/1591254864571.png)
设置云环境的操作日志采集开关、虚拟资源系统日志采集开关、硬件日志采集开关、容器服务器日志采集开关，单击确定按钮。
修改日志备份设置。 
单击日志备份设置，打开日志备份设置页签，如[图13](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__3b53ec6a-4221-45b0-9afd-2f6afd0a073b)所示。
图13  日志备份设置页面
[]images/1591254956913.png)
单击修改按钮，修改日志备份设置信息，如[图14](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__4d315cb8-3616-46a9-bdbc-1a8f114d3f24)所示，单击保存按钮保存修改结果。
图14  修改日志备份设置对话框
[]images/1591255001369.png)
收藏管理
选择日志→收藏管理
，进入收藏管理页面，如[图15](%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86-A64081FE__4e026594-ecc6-468d-85d6-0656dfc794be)所示。
图15  收藏管理
[]images/%E6%94%B6%E8%97%8F%E7%AE%A1%E7%90%86.PNG)
将鼠标移动至收藏夹内容上方，单击右侧按钮可以对收藏夹进行编辑、导入、导出、删除等操作。 
###### 相关任务 
导出日志： 
在日志查看结果页面，单击导出按钮。
在日志导出对话框中，选择导出日志范围，设置导出文件名。
单击导出按钮。
##### 诊断网络 
director-monitorcenter-netDisagnosis 
###### 摘要 
网络端口诊断功能用于诊断位于同一个云环境中的两个虚机之间的通讯故障。可以快速诊断出网络中的故障点，并给出诊断建议，从而节省人工排查时间。 
目前网络端口诊断支持的虚机网络类型为SR-IOV、DVS。
###### 前提 
TECS Director和provider通讯正常。 
已经在云环境上创建虚机规格上传镜像。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→诊断工具
，打开通讯故障诊断页面，如[图1](%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD.html#%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD-EC45C2E1__%E7%BD%91%E7%BB%9C%E7%AB%AF%E5%8F%A3%E8%AF%8A%E6%96%AD%E9%A1%B5%E9%9D%A2-EC468FEB)所示。
图1  通讯故障诊断页面
[]images/2018-05-08%2014-22-27.png)
单击选择诊断虚机网络，打开选择诊断对象对话框，如[图2](%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD.html#%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD-EC45C2E1__62b9e4c5-294b-481c-b728-bd0f19ee704b)所示。
图2  选择诊断对象对话框
[]images/snap704.png)
在选择诊断对象对话框中，选择诊断对象，单击确认按钮，如[图3](%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD.html#%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD-EC45C2E1__eaaa1d89-c4ef-473b-adcf-4e391a8120f8)所示。
图3  通讯故障诊断页面（已选诊断对象）
[]images/snap705.png)
获取到相关信息后，开始诊断按钮变亮，单击开始诊断。
等待2~3分钟后，可以获得诊断的结果。 
鼠标靠近诊断结果中的红色感叹号标记可以看到相对应的诊断建议。 
##### 管理报表 
director-monitorcenter-report 
###### 摘要 
TECS Director云管平台提供资源、性能和资产的报表。可以更方便直观的获取和查看系统的当前或历史的资源、性能和资产情况。
用户可以自定义报表模板，只查询关心的指标和对象。例如，性能指标top10、top100等。 
支持报表以图形展示，例如趋势图、柱状图、饼图等，更直观的反应系统状况。 
报表支持Excel、CSV、TXT三种生成方式，以供下载。 
###### 步骤 
添加新的报表
登录云管统一平台后，单击导航菜单，选择运维→报表
→报表
，打开报表页面，如[图1](%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86.html#%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86-FDAF483E__2fdd93b5-ece5-43c0-86b1-80686762393c)所示。
图1  报表页面
[]images/1591261955298.png)
在报表页面，单击添加报表按钮，打开添加报表页面，如[图2](%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86.html#%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86-FDAF483E__c07bbe81-8a2d-4d23-a07e-5a3949406de5)所示。
图2  添加报表页面
[]images/1591261982142.png)
设置报表报表名称，选择访问控制、、状态、报表周期
、报表粒度、导出方式、报表数据集、根据需求设定邮件接收人（可选项）。
 说明： 
访问控制说明： 
私有：只有创建者有查看、修改、删除权限。 
共享只读：只有创建者有修改和删除权限，其他人可查看。 
共享可修改：任何人均可查看、修改、删除。 
状态说明： 
激活状态下，报表定期生成报表实例。 
冻结状态下，不生成报表实例 
报表周期选择周和月时，可以自定义开始时间或选择默认时间。 
单击添加按钮。
管理报表模板
在报表页面，单击报表模板按钮，打开报表模板页面，如[图3](%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86.html#%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86-FDAF483E__6a1bfd7d-2820-4efe-bc45-384fb0a62552)所示。
图3  报表模板页面
[]images/1591262150135.png)
根据需要，对报表模板进行添加、编辑、删除、导出、导入和克隆自定义模板等操作。 
如果...|那么...
---|---
添加报表模板|单击添加报表模板按钮，打开报表模板设置页面。填写基本信息，单击下一步按钮。设置报表内容展示方式信息，指标可选选择系统预定义指标或自定义指标（自定义指标参见添加自定义指标）。单击添加按钮。
编辑报表模板|单击待编辑报表模板操作列的下拉列表框，选择编辑。在编辑页面，修改报表模板信息。单击确定按钮 。
添加自定义指标|在自定义指标页面，单击添加自定义指标按钮。在添加自定义指标页面，填写指标名称、选择指标单位、是否空间汇聚、空间汇聚来源、选择指标等参数。单击添加按钮。
克隆报表模板|单击待编辑报表模板操作列的下拉列表框，选择克隆。在克隆页面，修改报表模板信息。单击确定按钮 。
删除报表模板|单击待编辑报表模板操作列的下拉列表框，选择删除。在删除确认提示框，单击删除按钮。
导出报表模板|单击待导出报表模板操作列的下拉列表框，选择导出。
导入报表模板|单击导入按钮，打开导入页面。在导入页面，填写模板名称。单击上传文件按钮，选择待导入的报表模板文件，单击打开按钮。在导入页面，单击导入按钮。
 说明： 
系统预定义报表模板不可以进行编辑、删除、克隆操作。 
查看当前文件
在报表页面，单击某个报表的报表名称，打开报表预览页面，如[图4](%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86.html#%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86-FDAF483E__c9bd2c57-4d13-4680-bbc8-472df621aeeb)所示。
图4  报表预览页面
[]images/1591262258098.png)
单击下载按钮，本地保存报表。
查看报表任务
在报表页面，单击某个报表操作栏的查看任务，如[图5](%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86.html#%E6%8A%A5%E8%A1%A8%E7%AE%A1%E7%90%86-FDAF483E__911653e9-9302-40d2-b3fa-397684ecc3b9)所示。
图5  查看任务页面
[]images/1648692632981.png)
###### 相关任务 
根据需要，对报表进行编辑、删除操作。 
如果...|那么...
---|---
编辑报表|单击待编辑报表操作列的下拉列表框，选择编辑。在编辑页面，修改报表信息。单击确定按钮 。
删除报表|单击待编辑报表操作列的下拉列表框，选择删除。在删除确认提示框，单击删除按钮。
冻结/激活报表|单击待编辑报表操作列的下拉列表框，选择冻结（对于状态为激活的报表）或者激活（对于状态为冻结的报表）。在弹出的确认提示框中，输入验证码，单击确认按钮。
##### 管理策略 
director-monitorcenter-setting-strategy 
###### 摘要 
TECS Director策略管理提供策略的添加、查询、修改、克隆和删除功能。通过策略管理，用户可实现对主机、虚机、VDC、主机集群的主动管理。
策略管理包括如下内容： 
工作负载：最关键的几个资源（CPU、内存、网络、磁盘）所消耗容量的直接百分比。 
剩余容量：尚未消耗的资源百分比，可以使用观察窗内的峰值、平均值。 
可回收容量：可回收的容量占总容量的百分比。 
压力：工作负载在超出压力线后累计。压力评分是观察窗口内，存在压力的压力区域的百分比。 
用户可设置调度阈值，定义策略生效时间段。在策略生效的时间段内，根据系统的负载情况，对资源进行智能调度，达到系统的负载均衡。 
###### 步骤 
添加策略
登录云管统一平台后，单击导航菜单，选择运维→运维分析→资源对象→策略设置
，打开策略设置页面，如[图1](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__f0cce6d4-5633-4a43-bc69-31505e42329a)所示。
图1  策略设置页面
[]images/1640229042906.png)
单击添加策略按钮，打开添加策略页面，如[图2](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__a249415b-091a-433f-8285-6f445ab70d8e)所示。
图2  添加策略页面
[]images/1657161622844.png)
填写策略名称，选择策略来源，对象类型为虚机，单击下一步按钮，打开评估设置页面，如[图3](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__f2f9547e-1a16-4051-b3d1-dd6dc4fc4cfc)所示。
图3  综合指标设置页面
[]images/1657161665075.png)
单击虚机右侧的按钮，展开已选对象评估设置，如[图4](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__ce54e493-a540-46a8-a605-a4b38a931b90)所示。
图4  已选对象综合指标设置
[]images/1657161715368.png)
选择参与健康状况评估项，单击保存，完成健康评估配置。
选择其他要修改的对象类型，单击下一步，打开综合指标设置页面，如[图5](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__dbe84207-3628-44d2-930e-0a97ecb211be)所示。
图5  综合指标告警阈值设置页面
[]images/1657161831408.png)
单击虚机右侧的按钮，展开已选对象综合指标设置，如[图6](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__6e3e79cb-bcaf-4b22-96e1-22dbbf57f648)所示。
图6  已选对象综合指标设置
[]images/1657162125747.png)
修改综合指标设置，单击下一步，打开综合指标告警阈值设置页面，如[图7](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__62cc0bc3-e544-4123-a377-5caef6ae8d03)所示。
图7  综合指标告警阈值设置
[]images/1657162218738.png)
修改综合指标告警阈值设置，单击下一步，打开使用本策略的对象页面，如[图8](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__f90e38df-018a-406a-a9df-4ac8233bfa67)所示。
图8  使用本策略的对象页面
[]images/1657162280182.png)
勾选使用本策略的对象，单击保存按钮。
修改策略
在运维策略设置页面，单击策略的名称，打开Default（默认策略名称）页面，如[图9](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__462e5a50-279a-4864-b3ab-a08662ff5c1a)所示。
图9  Default页面
[]images/1591267264266.png)
单击某个对象（主机、虚机、VDC或主机集群），打开编辑页面，如[图10](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__90edf359-c542-4450-8eec-28f97c192bcf)所示。
图10  主机编辑页面
[]images/1591267397664.png)
将鼠标置于各个监控策略指标区域，出现编辑按钮，单击编辑按钮，如[图11](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__a4f26b70-1ca7-4df1-8fb2-808c2e17bc83)所示。
图11  主机编辑页面（二）
[]images/1591267484710.png)
编辑具体监控策略，单击保存按钮。
 说明： 
风险评估分为高、中、低三级，分别用红色、黄色和绿色表示。可以设置各级别的评分阈值。 
设置综合指标告警阈值。 
在综合指标告警阈值设置页签，单击操作列的编辑按钮，如[图12](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__c6a49290-1fe2-47ba-b2ac-662ecd922f6b)所示。
图12  单击编辑按钮
[]images/1591267620378.png)
在弹出的编辑告警阈值对话框中，修改告警阈值，单击确定按钮，如[图13](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__9c69d980-9227-4448-a86e-5e69682b2ace)所示。
图13  编辑告警阈值对话框
[]images/1591267666346.png)
（可选）单击使用本策略的虚机对象页签，如[图14](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__862a90f4-2089-4530-82e9-858c36b6ad1a)所示，可以查看使用当前策略的虚机对象和对象组信息。
图14  使用本策略的虚机对象页面
[]images/1591267970318.png)
克隆策略
运维策略设置页面，单击某个策略的操作列的克隆按钮，打开克隆对话框，如[图15](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__cf0acaf0-defd-4bac-97ec-10180613856d)所示。
图15  克隆对话框
[]images/snap707.png)
填写策略名称和描述。
单击创建按钮。
删除策略
在运维策略设置页面，单击某个策略的操作列的下拉列表框，选择删除或者勾选待删除策略，单击上方的删除按钮，弹出确认对话框，如[图16](%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E.html#%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-V5.16.10.15%E6%96%B0%E5%A2%9E-D999CE8A__996040c1-a0fa-4f33-a475-c198ffe3a9eb)所示。
图16  删除提示框
[]images/snap708.png)
单击删除按钮。
##### 管理系统自监控 
director-monitorcenter-sysmonitor-directorservice 
###### 摘要 
系统自监控提供对云管系统告警和服务状态的监控功能。本节介绍如何查看系统自监控。 
###### 步骤 
登录TECS Director，选择运维→系统自管理→总览
，打开总览页面，如[图1](1648171804298.html#zbabf7cde46d14c78a2ffa30b5d0d0574__aa8f920d-545a-452f-a897-0e22433c674a)所示。在此页面可查看告警、应用状态、CPU内存占用率等。
图1  总览页面
[]images/20748a8b4533454b8ab60e0505dd03af.png)
在左侧导航树中，选择对象→应用
，打开应用页面，如[图2](1648171804298.html#zbabf7cde46d14c78a2ffa30b5d0d0574__87d960eb-5354-405f-bf9b-859d233abc56)所示。在此页面可查看正在运行的应用。
图2  应用页面
[]images/f2c6af62a40449369e836279dd199a7b.png)
单击应用名称，打开应用详情页面，如[图3](1648171804298.html#zbabf7cde46d14c78a2ffa30b5d0d0574__60d23b68-4bc3-4cc1-84fa-5704174be2b8)所示。可以查看应用详情、应用包含的服务及状态。
图3  应用详情页面
[]images/61a7a62ca3354bc1999172572237e1cc.png)
#### 物理设备管理操作 
Physical Device Management Operations 
TECS Director云管平台从TECS OpenStack获取数据中心机架、服务器、磁阵、路由器、交换机等物理设备的信息，并在云管平台进行设备状态呈现和管理。
 说明： 
本节操作的统一前提为：已经获得统一云管Domain管理员账号的用户名和密码。 
##### 管理服务器 
Director_PIM_physical-device-server 
###### 摘要 
服务器是数据中心的计算资源，包括刀片式服务器和机架式服务器两种形态。两种服务器不同之处在于刀片式服务器需要通过机框才能安装在机架上，而架式服务器直接安装在机架上。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择基础设施→物理资源→服务器
，如[图1](%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86-AE689F4F__0d23676c-b201-432e-aeb0-d446204b6d6b)所示。
 说明： 
在显示的概览页面可以查看云管平台下数据中心的服务器信息和运行状态。
图1  概览页面
[]images/snap435.png)
（可选）单击操作列的重启或下电/上电按钮，对服务器进行远程控制。
单击功能导航树中的刀片式服务器或机架式服务器，可查看云管平台下数据中心内刀片式服务器或机架式服务器的详细信息和运行状态，如[图2](%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86-AE689F4F__%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%863-AE7CB235)、[图3](%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86-AE689F4F__%E6%9C%BA%E6%A1%86%E5%BC%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%A1%B5%E9%9D%A2-1B0E8ABA)所示。
图2  刀片式服务器页面
[]images/2018-11-22%2014-43-49.png)
图3  机架式服务器页面
[]images/2018-11-22%2014-44-10.png)
（可选）单击操作列的重启或下电/上电按钮，对刀片式服务器或机架式服务器进行远程控制。
（可选）单击机架式服务器名称，可以查看机架式服务器详细信息，如[图4](%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86-AE689F4F__f711c258-3273-45ca-85c1-1cb7609c38a0)所示。
图4  机架式服务器详细信息举例
[]images/1618388269636.png)
（可选）选择有GPU信息的设备，单击GPU信息页签，查看GPU信息，如[图5](%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86-AE689F4F__d0ef58d3-6fa5-486b-89f6-aafd300ae255)所示。
图5  GPU信息
[]images/1.bmp)
##### 管理存储 
Director_PIM_physical-device-storageMent 
###### 摘要 
云管平台支持数据中心机房内的磁阵、分布式存储设备管理，实现存储资源使用情况的查看和监控。 
###### 步骤 
查看磁阵
登录云管统一平台后，单击导航菜单，选择基础设施→物理资源→存储→磁阵
，打开磁阵页面，如[图1](%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86.html#%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86-AE6898E5__e65662ef-cb30-414c-b399-2ec7b508d4d6)所示。
 说明： 
在磁阵页面可以查看云管平台下数据中心磁阵资源的信息和状态。
图1  磁阵页面
[]images/1591271686510.png)
单击某行磁阵的磁阵名称，查看该磁阵下的资源池信息和磁盘信息，如[图2](%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86.html#%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86-AE6898E5__2a188ef2-9b34-43d3-aac3-3c549de9d709)所示。
图2  存储资源信息页面
[]images/1591271712694.png)
查看分布式存储
选择物理设备→存储→分布式存储
，打开分布式存储页面，如[图3](%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86.html#%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86-AE6898E5__17f46e14-4033-4080-9989-ff87962763ba)所示。
图3  分布式存储页面
[]images/1591271815515.png)
单击某分布式存储名称，查看该分布式存储下的详细信息，如[图4](%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86.html#%E7%A3%81%E9%98%B5%E7%AE%A1%E7%90%86-AE6898E5__5cdca537-3c4d-40b1-8c4f-7f1b106d585f)所示。
图4  分布式存储详细信息页面
[]images/1591271838048.png)
##### 管理网络设备 
Director_PIM_physical-device-network 
###### 摘要 
网络设备包括交换机、路由器、负载均衡、和网安设备。网安设备包括防火墙、WAF、抗DDoS设备和IS（即IPS/IDS）。
###### 步骤 
登录云管统一平台后，单击导航菜单，选择基础设施→物理资源→网络设备
，如[图1](%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86.html#%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-AE68949A__%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%862-AE794FB4)~[图4](%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86.html#%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-AE68949A__6894c90f-c6a5-493c-bc33-f16445ff7023)所示。
系统将显示云管平台下数据中心的交换机、路由器、负载均衡、和网安设备详细信息和运行状态。 
图1  交换机页面
[]images/2018-11-22%2015-42-20.png)
图2  路由器页面
[]images/2018-11-22%2015-42-56.png)
图3  负载均衡页面
[]images/2018-07-05%2010-23-40.png)
图4  网安设备页面
[]images/snap297.png)
在交换机页面，单击某行网络设备的交换机名称，查看该网络设备的基本信息和端口使用情况，如[图5](%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86.html#%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-AE68949A__%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%863-AE7A0194)和[图6](%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86.html#%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-AE68949A__%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF%E9%A1%B5%E9%9D%A2-EC3DA78E)所示。
 说明： 
防火墙/WAF/DDoS/IS的基本信息和端口使用情况查看方法同交换机。
图5  交换机网络设备基本信息页面
[]images/2018-11-22%2015-51-23.png)
图6  交换机网络设备端口信息页面
[]images/2018-11-22%2015-51-37.png)
 说明： 
红色端口表示未连接网线的网口，绿色端口表示已连接网线的网口。 
##### 管理机架 
Director_PIM_physical-device-rack 
###### 摘要 
在实际的数据中心机房中，会将服务器/交换机/路由器/磁阵等计算、网络和存储资源安装布放在机架上，这样具有美观、抗震性好、散热好等优点，同时也能实现统一供电、接地和电磁屏蔽的功能，方便维护。 
TECS Director支持机架信息查看功能。
###### 步骤 
登录云管统一平台后，单击导航菜单，选择基础设施→物理资源→机架
，打开机架页面，如[图1](%E6%9C%BA%E6%9E%B6%E7%AE%A1%E7%90%86.html#%E6%9C%BA%E6%9E%B6%E7%AE%A1%E7%90%86-AE688E8F__031776eb-fc88-44fe-8066-8134b22eb16d)所示。
 说明： 
在机架页面可以查看云管平台下数据中心的机架信息。
图1  机架页面（机架列表）
[]images/1591272447128.png)
单击按钮，可对机架信息进行可视化查看，如[图2](%E6%9C%BA%E6%9E%B6%E7%AE%A1%E7%90%86.html#%E6%9C%BA%E6%9E%B6%E7%AE%A1%E7%90%86-AE688E8F__%E6%9C%BA%E6%9E%B6%E7%AE%A1%E7%90%863-AE775355)所示。
图2  机架页面（机架图）
[]images/2018-07-05%2011-01-51.png)
##### 管理POD 
Director_PIM_physical-device-pod 
###### 摘要 
POD是数据中心资源的逻辑集合，包括计算、存储和网络物理设备。按POD组进行管理，用户可以模块化进行物理设备的维护、扩容和升级。
###### 步骤 
登录云管统一平台后，单击导航菜单，选择基础设施→物理资源→POD
，打开POD页面，如[图1](POD%E7%AE%A1%E7%90%86.html#POD%E7%AE%A1%E7%90%86-AE688835__6882b36b-0b87-488f-8712-2b0291858391)所示。
 说明： 
在POD页面可以查看运管平台下数据中心的POD资源信息。
图1  POD页面
[]images/1591272628763.png)
单击某个POD名称，可查看POD详情，如[图2](POD%E7%AE%A1%E7%90%86.html#POD%E7%AE%A1%E7%90%86-AE688835__POD%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2-1B10143B)所示。
图2  POD详情页面
[]images/2018-07-05%2011-09-16.png)
#### 脚本设计器操作 
Script Designer Operations 
##### 概述 
OSD是一款基于Python的在线脚本编辑器，提供以下功能。
支持Python V3.6版本语法。 
支持按照业务来自定义SDK函数库。比如调用RESTful接口、操作MML命令等。 
支持编写脚本功能，实现定制化脚本的需求。比如编写批量修改配置参数的脚本、编写生成数据报表文件的脚本、编写定时清理文件目录的脚本等。 
支持工作流在线编辑功能，通过编辑可将零散脚本编排为一个脚本工程。比如将多个零散的定位故障脚本编排为一个全流程定位故障的脚本。 
##### 支持的操作 
脚本应用工程/设备运维应用工程： 
支持对脚本应用工程/设备运维应用工程进行搜索、新建、修改、删除、导入和导出等操作。 
支持对脚本应用工程/设备运维应用工程进行编写、调试、发布、语法检查等操作。 
工作流工程： 
支持对工作流工程进行搜索、新建、编辑、删除、导入和导出等操作。 
支持对工作流工程进行格式化、发布等操作。 
##### 管理脚本工程 
Script_project 
###### 摘要 
在脚本设计器页面显示脚本设计列表，可查看当前的脚本工程。
使用者可以新建脚本工程，对当前脚本工程进行修改和删除操作，在脚本设计器页面还提供对脚本工程进行搜索、按列搜索和列定制功能。
###### 步骤 
登录云管统一平台后，单击导航菜单，选择更多→应用中心→脚本设计器
，默认打开脚本设计器页面的脚本应用工程子页面，如[图1](4-%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86.html#%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86-C722028E__4707ffb7-123f-4703-8545-0479c81273f8)所示。
图1  脚本应用工程页面
[]images/1599810065481.png)
选择要执行的操作，执行相应步骤。 
如果...|那么...
---|---
新建脚本工程|单击新建工程按钮，打开新建工程对话框。配置工程名、模板、描述，单击新建按钮。
导入脚本工程|单击导入工程按钮，选择脚本工程文件导入。文件的格式为*.oad，文件大小限制为20 M。导入的脚本工程文件的settings文件里面的工程名属性值，不能与工程列表中已有的脚本工程一样。
编辑脚本工程|单击操作列的编辑，在打开的编辑窗口中对脚本工程进行修改和保存。
删除脚本工程|单击操作列的删除，在提示框中再次单击删除按钮。
导出脚本工程|单击操作列的导出，对应的脚本工程将导出到本地保存，保存的文件格式为*.oad。
##### 使用脚本设计器 
script-application-project 
###### 脚本应用工程/设备运维应用工程页面介绍 
####### 新建脚本工程 
在脚本应用工程或设备运维应用工程页面，单击新建工程按钮，打开新建工程对话框，如[图1](%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E4%BB%8B%E7%BB%8D.html#%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E4%BB%8B%E7%BB%8D-F78E2477__%E6%96%B0%E5%BB%BA%E5%B7%A5%E7%A8%8B%E5%AF%B9%E8%AF%9D%E6%A1%86-F7897D8F)所示。
图1  新建工程对话框
[]images/2018-12-14_142201(%E9%87%8D%E7%94%A81).png)
 说明： 
若不选择模板，则为默认模板。 
脚本应用工程模板为默认模板。 
设备运维应用工程模板下拉框包括默认模板和shell模板。 
输入工程名和描述信息，并选择相应的模板，单击新建按钮，打开资源管理器页面，如[图2](%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E4%BB%8B%E7%BB%8D.html#%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E4%BB%8B%E7%BB%8D-F78E2477__%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E9%A1%B5%E9%9D%A2-C8102E0C)所示。
图2  脚本工程资源管理器页面
[]images/11111111(%E9%87%8D%E7%94%A81).png)工程目录 
脚本输入区 
####### 工程目录 
工程目录以节点的形式显示当前脚本工程的所有脚本文件。 
新建脚本工程时，OSD已定义了__init__.py、main.py和settings文件，文件说明参见“[脚本应用工程文件说明](6-%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E.html)”。
在工程目录上，可添加文件，具体操作可参见“[（可选）创建新文件或者文件夹](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__75f33423-d8c5-4522-a66d-c38e4adc1a85)”。
####### 按钮说明 
脚本输入区的按钮说明参见[表1](%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E4%BB%8B%E7%BB%8D.html#%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2%E4%BB%8B%E7%BB%8D-F78E2477__%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E6%A1%86%E6%8C%89%E9%92%AE%E8%AF%B4%E6%98%8E-C7A307E0)。
操作|按钮|说明
---|---|---
保存||单击该按钮，可将当前脚本工程保存。
另存为||通过另存为功能，将脚本复制成另一个脚本，并保存在工程列表中。单击该按钮，打开另存为对话框。在新工程名输入框中输入另存为的工程名称。单击保存按钮，在工程列表中可以看到另存为的工程。
撤销||在脚本编写过程中，可支持编写记录回退，单击该按钮，能够撤销上一步的操作。
恢复||在脚本编写过程中，可支持编写记录恢复，单击该按钮，能够恢复上一步的操作。
设置||单击该按钮，显示settings页面，用户可根据需要设置工程、参数以及国际化信息。
显示/隐藏控制台|/|单击该按钮，显示或隐藏脚本执行结果以及语法检查结果。
调试||单击该按钮，输入相应脚本参数（无参数脚本不弹出参数输入框），能看到当前脚本的运行结果。
语法检查||单击该按钮，系统将自动校验当前脚本编写是否正确。
终止||在调试过程中，单击该按钮，终止调试该脚本，终止后运行中的脚本进程将被杀死。使用此功能会导致数据不一致，请谨慎使用。
发布||单击该按钮，将脚本发布成*.oap格式的文件。发布后的脚本，可以在OSE APP的业务包管理功能中查看到。
帮助||编辑脚本工程页面提供了界面帮助，帮助使用者快速进行脚本设计。单击该按钮，打开帮助页面。
返回||单击该按钮，返回OSD页面。
###### 脚本应用工程文件说明 
创建一个脚本应用工程默认包含__init__.py、settings、main.py三个文件。
main.py文件说明
main.py文件用于脚本代码的编写，main.py文件是工程的主入口，脚本设计器会自动从此文件开始执行脚本，main.py文件内必须定义一个execute(**kw)函数作为脚本程序的主入口，此函数不可修改。
如[图1](6-%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E.html#%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E-C8144BC4__%E5%AE%9A%E4%B9%89%E4%B8%BB%E5%85%A5%E5%8F%A3-C81703D6)所示定义execute(**kw)函数作为脚本程序的主入口。
图1  定义主入口
[]images/a-2.png)
settings文件说明
settings文件可以设置脚本工程的描述、脚本输入参数以及国际化等信息。
单击设置[]images/1623143690491(%E9%87%8D%E7%94%A82).png)按钮，显示settings页面，如[图2](6-%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E.html#%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E-C8144BC4__daa88559-c599-4de5-82f9-f885e52212de)所示。
图2  settings文件--工程信息
[]images/%E5%B7%A5%E7%A8%8B%E4%BF%A1%E6%81%AF.PNG)
settings页面由工程信息、参数信息、国际化以及输出设置四部分组成。
工程信息工程信息包含工程名、描述信息、说明文档、输出样例和重要操作提示，用户除不能修改工程名外，其他信息可根据自己的需求完成修改。说明文档主要帮助用户更好的使用工程，其中包括工程的背景说明、参数设置、限制说明等信息，用户可根据其内容更深层次地了解该工程的作用。其中说明文档大小限制为20 M，上传的文档命名长度不超过30个字符。输出样例为用户提供可视化的输出结果模板，方便用户可以直观地了解到工程的运行结果。其中模板大小限制为20 M，上传的模板命名长度不超过30个字符。用户可根据需求上传说明文档和输出样例并发布至OSE中，方便使用者使用。 
参数信息此处设置的参数即为脚本的输入参数，根据脚本设计需求在此新建参数，在脚本中可通过参数名称获取参数值。详细介绍参见“管理参数”。 
国际化此页签用于用户自定义工程名称、工程描述、重要操作提示、参数名称以及参数描述的对应中英文。 
输出设置此页签用于用户自定义工程的输出类型，这个设置决定了运行脚本时的展示形式。 
###### 管理参数 
####### 摘要 
用户在编写脚本时，如果需要新建参数，可参考本节内容（以新建Number类型参数为例）。对于新建成功的参数，支持对参数进行修改、删除、分组及设置关联参数。 
####### 步骤 
打开settings页签，切换到参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1608799344055.html#zfd3fb39bfc244b6eabfe8b0af8b524c0__45cc945d-faea-43f1-870b-aaba4ed4ea54)所示。
图1  新增参数对话框
[]images/1608799372737.png)
根据需要填写参数信息。参数设置项说明参见[表1](1608799344055.html#zfd3fb39bfc244b6eabfe8b0af8b524c0__509813fe-5aab-4692-bda5-d28ef0011c38)。
属性|名称|说明
---|---|---
基本属性|参数名|参数名称，在脚本中可通过此名称获取参数的值，不能重复。必填项。
类型|基本属性|根据需要选择不同类型的参数。在OSE中执行脚本时会根据所选类型显示不同的效果。必填项。
可选|基本属性|设置参数为可选项或必选项。脚本执行前会进行空校验，如果不是可选参数则不能为空，否则无法执行。选填项。
描述|基本属性|对设置的参数进行描述。必填项。
扩展属性|约束|通过约束对参数的输入进行校验。选填项。
默认值|扩展属性|给参数设定的一个参考值。选填项。
扩展字段|扩展属性|为不同类型的参数设置附加功能。选填项。
单击新建按钮，新增的参数信息显示在参数信息页面中，如[图2](1608799344055.html#zfd3fb39bfc244b6eabfe8b0af8b524c0__de679d99-26ec-47ae-a962-8a1d58615aff)所示。Number类型参数新建成功。
图2  新增的参数信息
[]images/1608799372627.png)
（可选）如果需要继续添加其他类型参数，重复步骤[1](1608799344055.html#zfd3fb39bfc244b6eabfe8b0af8b524c0__5f4d1f22-c8ea-4a21-8f6d-b7740cd049b7)~步骤[3](1608799344055.html#zfd3fb39bfc244b6eabfe8b0af8b524c0__194e31a6-72be-45af-9452-8181208cb0a5)。
（可选）对参数信息页面的所有参数，单击设置联动参数按钮，可为参数设置分组和关联参数。
###### 获取在线帮助 
OSD提供脚本编写的帮助文档，帮助使用者快速进行脚本设计。
在脚本编辑器页面，单击脚本输入区的按钮，打开帮助文档界面，如[图1](%E8%8E%B7%E5%8F%96%E5%9C%A8%E7%BA%BF%E5%B8%AE%E5%8A%A9.html#%E8%8E%B7%E5%8F%96%E5%9C%A8%E7%BA%BF%E5%B8%AE%E5%8A%A9-F78ECBCF__cd657512-81e4-40ba-96b0-8c599ea2184b)所示。
图1  帮助文档界面
[]images/2019-08-06_155916.png)
###### 编写脚本 
####### 摘要 
本节介绍如何编写脚本，以及在编写过程中检查脚本编写是否正确和查看脚本的运行结果。 
OSD脚本支持Python 3.6语言，同时支持调用RESTful接口、MML命令等。
####### 步骤 
编写脚本内容
在脚本应用工程页面，单击新建工程按钮，打开新建工程对话框，如[图1](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__5329f6c8-98d4-4b55-ab29-da3a45b9c080)所示。
图1  新建工程对话框
[]images/1559282032483.png)
输入工程名和描述信息，选择相应的模板，单击新建按钮，打开资源管理器页面，如[图2](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B%E9%A1%B5%E9%9D%A2-C8102E0C)所示。
图2  资源管理器页面
[]images/2018-12-14_142700.png)
根据需要编写脚本，例如输出“hello UME!”，即在main.py文件中编写代码print ('hello UME!') 
，如[图3](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC-C7A8A8DD)所示。
图3  编写脚本
[]images/2018-12-14_162813.png)
（可选）新增文件夹、新增文件或导入文件
如[图4](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__%E5%88%9B%E5%BB%BA%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%E6%8C%89%E9%92%AE-D60EC61D)所示鼠标悬放在工程目录的工程名节点上（本次编辑的脚本工程名为demo），根据脚本设计需求，可选择单击按钮新增文件、单击按钮新增文件夹以及单击按钮导入文件。创建成功的文件夹、创建成功的文件、及导入成功的文件会显示在工程目录树上，如[图5](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__5ed2d3c7-5c3b-4fe5-93e0-e89b4c0498d4)所示。
图4  创建脚本文件按钮
[]images/2018-12-14_163420.png)
图5  新增文件夹/新增文件及导入文件结果
[]images/1616241727771.PNG)
 说明： 

导入文件大小限制为20 M。 
将鼠标悬放在文件夹节点上，可新建子文件夹、新建子文件、导入子文件、重命名该文件夹以及删除该文件夹。删除文件夹之后，文件夹下面的所有文件都会被删除。 
将鼠标悬放在文件节点上，可重命名文件以及删除该文件。 
不能修改main.py文件的文件名且不允许删除该文件。 
（可选）检查语法
单击[]images/2-14(%E9%87%8D%E7%94%A82).png)按钮，检查当前脚本编写是否正确，检查结果如[图6](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__%E8%AF%AD%E6%B3%95%E6%A3%80%E6%9F%A5%E7%BB%93%E6%9E%9C-E2586D41)所示。
图6  语法检查结果
[]images/2018-12-14_165030.png)
结果显示区的按钮说明参见[表1](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__%E7%BB%93%E6%9E%9C%E6%98%BE%E7%A4%BA%E5%8C%BA%E6%8C%89%E9%92%AE%E8%AF%B4%E6%98%8E-C7AA483D)。
操作|按钮|说明
---|---|---
清空日志||单击该按钮，清空当前显示的结果。
复制日志||单击该按钮，复制当前显示的结果至粘贴板。
资源监控||单击该按钮，查看脚本执行实例资源监控曲线图。
（可选）查看运行结果
单击[]images/2-13(%E9%87%8D%E7%94%A82).png)按钮，查看当前脚本的运行结果，如[图7](5-%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-C78DA8AC__5da2dcfb-669e-4c85-aee9-972aa10c0e20)所示。
图7  执行结果
[]images/1559525777206.png)
 说明： 
如果新建工程为设备运维应用工程，单击[]images/1641551272197.png)按钮，选择远端执行节点后能看到脚本运行结果。
单击[]images/Snap9.png)按钮，可以将执行结果下载到本地。
保存脚本
单击[]images/2-10(%E9%87%8D%E7%94%A82).png)按钮，保存当前脚本工程。
###### 发布脚本工程 
####### 摘要 
脚本开发完成后，需要将脚本发布成 *.oap。
####### 步骤 
在脚本设计器页面的工程列表中，单击需要发布的脚本工程，进入对应脚本工程的脚本编辑器页面。
单击[]images/2-15(%E9%87%8D%E7%94%A82).png)按钮，打开发布确认框，如[图1](%E5%8F%91%E5%B8%83%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B.html#%E5%8F%91%E5%B8%83%E8%84%9A%E6%9C%AC%E5%B7%A5%E7%A8%8B-F7997758__%E7%A1%AE%E8%AE%A4%E5%AF%B9%E8%AF%9D%E6%A1%86-C7AADC32)所示。
图1  发布确认框
[]images/2-23.png)
单击发布按钮。
发布成功后弹出“脚本发布成功”提示框，可在OSE APP应用管理页面查看当前发布的脚本工程即业务包。
##### 工作流页面介绍 
workflow-application-project 
###### 概述 
工作流应用工程提供工作流的在线编辑功能，可将零散脚本编排为一个脚本工程。 
在工作流工程页面可新建、修改、删除、导入、导出工作流工程，操作与脚本工程类似，具体操作可参见[使用脚本设计器](%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html)的相关描述。
###### 新建工作流工程 
在工作流应用工程页面，单击新建工程按钮，打开新建工程对话框，如[图1](%E4%B8%AD%E6%96%87%E5%89%8D%E8%A8%80-20161102.html#Qy-0440B6F3__249d7f40-e980-4561-aef2-563e91b72039)所示。
图1  新建工作流工程对话框
[]images/1623200176584.png)
输入工程名和描述信息，并选择默认模板，单击新建按钮，打开资源管理器页面，如[图2](%E4%B8%AD%E6%96%87%E5%89%8D%E8%A8%80-20161102.html#Qy-0440B6F3__a421319d-7499-4874-bc92-3c0c239ae4ec)所示。
 说明： 
目前模板下拉框只支持一种模板样例，若不选择，则为默认模板。 
图2  工作流工程资源管理器源码页面
[]images/1623200176714.png)
编辑页面源码开发完成，单击工作流图按钮，切换至工作流图页面，页面展示脚本执行的流程图，如[图3](%E4%B8%AD%E6%96%87%E5%89%8D%E8%A8%80-20161102.html#Qy-0440B6F3__cd6f04f4-a310-4cc3-a307-3306c58a23dd)所示。
图3  工作流工程资源管理器工作流图页面
[]images/1623205910101.png)
###### 工程目录 
工程目录以节点的形式显示当前脚本工程的所有脚本文件。 
新建工作流工程时，OSD已定义了flow_define.json文件。
###### 按钮介绍 
脚本输入区的按钮说明参见[表1](%E4%B8%AD%E6%96%87%E5%89%8D%E8%A8%80-20161102.html#Qy-0440B6F3__3474750e-9c63-4cc9-ae26-59d0ecd00a89)。
操作|按钮|说明
---|---|---
保存||单击该按钮，可保存当前工作流工程。
另存为||通过另存为功能，将工作流工程复制成另一个工作流工程，并保存在工程列表中。单击该按钮，打开另存为对话框。在新工程名输入框中输入另存为的工作流工程名称。单击保存按钮，在工程列表中可以看到另存为的工作流工程。
撤销||在脚本编写过程中，可支持编写记录回退，单击该按钮，能够撤销上一步的操作。
恢复||在脚本编写过程中，可支持编写记录恢复，单击该按钮，能够恢复上一步的操作。
设置||单击该按钮，显示settings页面，可参考脚本应用工程文件说明，帮助使用者设置工程、参数以及国际化信息。
格式化||单击该按钮，将源码中的json串进行格式化处理。
发布||单击该按钮，将脚本发布成*.owf格式的文件。发布后的脚本，可以在OSE APP的应用管理中查询到。
帮助||编辑脚本工程页面提供了界面帮助，帮助使用者快速进行脚本设计。单击该按钮，打开帮助页面。
返回||单击该按钮，返回OSD页面。
##### 编程指南 
###### 脚本应用开发SDK 
开放脚本平台的目标是通过 Python + SDK，达到快速交付用户需求。平台内置了nemo基础 SDK， 并通过 UME 插件包的方式支持 SDK 的扩展。 
另外， 目前支持以 SDK 插件方式导入第三方库，支持模型驱动，任何小产品都可以根据需求和规范开发自己的 SDK 或导入第三方库 。 
####### 基础 SDK 
除了 python 和其扩展包支持的脚本开发能力，平台提供了丰富的基础设施。 
基础SDK 结构
内置的 SDK 结构如下： 
|- nemo # 基础sdk|-- rest|-- file|-- log|-- ftp|-- path|-- util|-- context|-- ucli|-- step|-- ui
nemo
提供基础功能类库，功能描述如下： 
分类|函数说明|示例
---|---|---
RESTful接口调用函数|模块: nemo.rest.client.RestClient函数：get(service_name, uri, body=None, headers={}, timeout=60)描述： 请求RESTful接口的GET操作返回值：返回执行结果|# -*- coding: utf-8 -*-  from nemo.rest.client import RestClientfrom nemo.log import loggerimport jsonlogger = logger()def execute(**kw):    rc = RestClient()    result = rc.get('res', '/mes')    mes = json.loads(result)    logger.info("Total " + str(len(mes)) + " NE")
模块: nemo.rest.client.RestClient函数：post(service_name, uri, body, headers={}, timeout=60)描述： 请求RESTful接口的POST操作返回值：返回执行结果|RESTful接口调用函数|# -*- coding: utf-8 -*- from nemo.rest.client import RestClientfrom nemo.log import loggerlogger = logger()def execute(**kw):    rc = RestClient()    body = {        "terms": {"status": [-1]}    }    result = rc.post(        'ofd-access', '/ose/logs/_search', body)    logger.info(result)
模块: nemo.rest.client.RestClient函数：put(service_name, uri, body, headers={}, timeout=60)描述： 请求RESTful接口的PUT操作返回值：返回执行结果|RESTful接口调用函数|# -*- coding: utf-8 -*- from nemo.rest.client import RestClientfrom nemo.log import loggerlogger = logger()def execute(**kw):    rc = RestClient()    body = {        'projectName': 'Test',        'desc': 'Test project description'    }    result = rc.put('service_name', 'your_url', body)    logger.info(result)
模块: nemo.rest.client.RestClient函数：delete(service_name, uri, body=None, headers={}, timeout=60)描述： 请求RESTful接口的DELETE操作返回值：返回执行结果|RESTful接口调用函数|# -*- coding: utf-8 -*- from nemo.rest.client import RestClientfrom nemo.log import loggerlogger = logger()def execute(**kw):    rc = RestClient()    result = rc.delete('service_name', 'your_url')    logger.info(result)
文件操作函数|CSV 文件操作nemo.file.CsvWriter( file_name )描述：返回csv对象，使用csv对象可以进行csv文件的读写操作，最终文件会保存在用户执行结果目录，生成的文件可以通过脚本任务结果下载链接获取到本地参数：file_name: csv文件前缀名,名称会加时间戳返回值: csv对象文件路径： csv文件可以在任务执行完成后，通过界面的结果文件下载。|# -*- coding: utf-8 -*-from nemo.file import CsvWriterdef execute(**kw):    try:        csv_writer = CsvWriter('test')        csv_writer.writerow(            ['ID', 'Name', 'Description'])        csv_writer.writerow(            [1, 'OSD', 'Open Script Designer'])        csv_writer.writerows((            [2, 'OSE', 'Open Script Execution Engine'],            [3, 'OAS', 'Open API']))    finally:        csv_writer.close()
csv_writer.writerow(row)将参数 row 写入 writer 的文件对象|文件操作函数|# -*- coding: utf-8 -*-from nemo.file import CsvWriterdef execute(**kw):    try:        csv_writer = CsvWriter('test')        csv_writer.writerow(            ['ID', 'Name', 'Description'])        csv_writer.writerow(            [1, 'OSD', 'Open Script Designer'])        csv_writer.writerows((            [2, 'OSE', 'Open Script Execution Engine'],            [3, 'OAS', 'Open API']))    finally:        csv_writer.close()
csv_writer.writerows(rows)将参数 rows 写入 writer 的文件对象|文件操作函数|# -*- coding: utf-8 -*-from nemo.file import CsvWriterdef execute(**kw):    try:        csv_writer = CsvWriter('test')        csv_writer.writerow(            ['ID', 'Name', 'Description'])        csv_writer.writerow(            [1, 'OSD', 'Open Script Designer'])        csv_writer.writerows((            [2, 'OSE', 'Open Script Execution Engine'],            [3, 'OAS', 'Open API']))    finally:        csv_writer.close()
日志记录函数|nemo.log描述: 返回日志记录器（支持info,warn,error级别打印）,日志会保存在用户执行结果目录，生成的文件可以通过脚本任务结果下载链接获取到本地返回值: 日志记录器文件路径： 日志文件可以在任务执行完成后，通过界面的结果文件下载。|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
info(msg)打印info级别日志|日志记录函数|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
warn(msg)打印warning级别日志|日志记录函数|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
error(msg)打印error级别日志|日志记录函数|# -*- coding: utf-8 -*-from nemo.log import loggerlogger = logger() def execute(**kw):    logger.info('hello osd!')    logger.warn('execute exception')    logger.error('execute fail')
FTP操作函数|FtpClient('ip',21,'username','password')描述： 创建Ftp客户端对象，参数为ip、端口、用户名、密码，必填参数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
connect()描述：连接到ftp服务器|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
disconnect()描述：断开ftp连接|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
mkdir(dir)描述：在服务器上创建文件夹，参数为文件夹路径。|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
rmdir(dir)描述：删除服务器上的文件夹，参数为文件夹路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get(remote_path, local_path)描述：下载文件，参数为服务端文件路径、本地文件路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
put(local_path, remote_path)上传文件，参数为本地文件路径、服务端文件路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get_ftp(）描述：返回ftp对象实例，用于对ftp更多的操作|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
exists(remote_path)描述：判断远端的目录是否存在，参数为服务端文件路径|FTP操作函数|# -*- coding: utf-8 -*-from nemo.ftp import FtpClient def execute(**kw):    cli = FtpClient('ip', 21, 'username', 'password')    try:        cli.connect()        cli.mkdir('/report')        # Upload the local file to the server        cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
SFTP操作函数|SftpClient('ip', port, 'username', 'password')描述：创建Sftp客户端对象，参数为ip、端口、用户名、密码，必填参数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
connect()描述：连接到Sftp服务器|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
disconnect()描述：断开Sftp连接|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
mkdir(dir)描述：在服务器上创建文件夹，参数为文件夹路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
rmdir(dir)描述：删除服务器上的文件夹，参数为文件夹路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get(remote_path, local_path)描述：下载文件，参数为服务端文件路径、本地文件路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
put(local_path, remote_path)描述：上传文件，参数为本地文件路径、服务端文件路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
get_sftp(）描述：返回sftp对象实例，用于对sftp更多的操作|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
exists(remote_path)描述：判断远端的目录是否存在，参数为服务端文件路径|SFTP操作函数|# -*- coding: utf-8 -*- from nemo.ftp import SftpClient def execute(**kw):    cli = SftpClient('ip', port, 'username', 'password')    try:        cli.connect()        if not cli.exists('/report'):            cli.mkdir('/report')        # 将本地文件上传到服务器        if not cli.exists('/report/rru.csv'):            cli.put('/tmp/rru.csv', '/report/rru.csv')    finally:        cli.disconnect()
路径获取|get_result_root()描述：获取输出结果的根目录，此目录中的内容会被打包成附件|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
get_parameter_file_path(parameter_value)描述：获取文件类型参数的绝对路径。参数：parameter_value ：文件参数的参数取值|路径获取|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
get_csv_root()描述：获取输出csv的根目录|路径获取|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
get_data_root()描述：获取输出数据的根目录，此目录用于放置用户自定义的输出数据|路径获取|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import pathlogger = logger() def execute(**kw):    logger.info(path.get_csv_root())    logger.warn(path.get_result_root())    logger.error(path.get_data_root())
压缩解压缩接口|compress()描述：压缩文件|# -*- coding: utf-8 -*-from nemo.util.compress.CompressUtil import CompressUtilfrom nemo.util.compress.CompressType import CompressTypedef execute(**kw):    CompressUtil(CompressType.zip).compress(        'logs', 'logs.zip')    CompressUtil(CompressType.tar).compress(        'logs', 'logs.tar')    CompressUtil(CompressType.gz).compress(        'logs.tar', 'logs.tar.gz')
decompress()描述：解压缩文件|压缩解压缩接口|# -*- coding: utf-8 -*-from nemo.util.compress.CompressUtil import CompressUtilfrom nemo.util.compress.CompressType import CompressTypedef execute(**kw):    CompressUtil(CompressType.zip).decompress(        'logs.zip', 'logs_zip_out')    CompressUtil(CompressType.tar).decompress(        'logs.tar', 'logs_tar_out')    CompressUtil(CompressType.gz).decompress(        'logs.tar.gz', 'logs_gz_out')
获取上下文|get_language_option()描述：获取当前语言环境|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_trigger_type()描述：获取触发类型，DEBUG、ONCE等|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_username()描述：获取用户名|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_transaction_id()描述：获取事务 id|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_header_keys()描述：获取header的keys，header是单次执行应用请求传递的header|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
get_header(key)描述：获取header中key的值|获取上下文|# -*- coding: utf-8 -*-from nemo.log import loggerfrom nemo import contextlogger = logger()def execute(**kw):    logger.info("CONTEXT_USERNAME: "         + context.get_username())    logger.info("CONTEXT_LANGUAGE_OPTION: "         + context.get_language_option())    logger.info("CONTEXT_TRIGGER_TYPE: "         + context.get_trigger_type())    logger.info("CONTEXT_TRANSACTION_ID: "         + context.get_transaction_id())    logger.info("CONTEXT_HEADER_KEYS: "        + str(context.get_header_keys()))    logger.info("CONTEXT_HEADER_BY_KEY: "        + str(context.get_header('language-option')))
UCLI|connect_ucli()，ucli_client()描述：建立ucli连接|# -*- coding: utf-8 -*-from nemo.cli import ucli_clientdef execute(**kw):    client = ucli_client()    result = client.send_command('ose help')    client.disconnect()
send_command(self, command)描述：执行ucli命令comman|UCLI|# -*- coding: utf-8 -*-from nemo.cli import ucli_clientdef execute(**kw):    client = ucli_client()    result = client.send_command('ose help')    client.disconnect()
disconnect()描述：断开ucli连接|UCLI|# -*- coding: utf-8 -*-from nemo.cli import ucli_clientdef execute(**kw):    client = ucli_client()    result = client.send_command('ose help')    client.disconnect()
设置关键步骤及执行进度|init(steps)描述：初始化步骤|# -*- coding: utf-8 -*-from nemo.step import ExecuteStepimport timeexecute_step = ExecuteStep()def init_execution_steps():    steps = [        {"number": "1", "name": "start",          "zh": "start", "en": "start"},        {"number": "2", "name": "open_plan_area",          "zh": "open", "en": "open plan area"},        {"number": "3", "name": "end",          "zh": "end", "en": "end"}    ]    execute_step.init(steps)def execute(**kw):     execute_step.run("open_plan_area")    execute_step.run("open_plan_area",         {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})    time.sleep(5)    current_step_detail = {        "name": "open_plan_area",        "status": "Succeed",        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}    }    execute_step.set_result(current_step_detail)
run(name)描述：执行步骤|设置关键步骤及执行进度|# -*- coding: utf-8 -*-from nemo.step import ExecuteStepimport timeexecute_step = ExecuteStep()def init_execution_steps():    steps = [        {"number": "1", "name": "start",          "zh": "start", "en": "start"},        {"number": "2", "name": "open_plan_area",          "zh": "open", "en": "open plan area"},        {"number": "3", "name": "end",          "zh": "end", "en": "end"}    ]    execute_step.init(steps)def execute(**kw):     execute_step.run("open_plan_area")    execute_step.run("open_plan_area",         {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})    time.sleep(5)    current_step_detail = {        "name": "open_plan_area",        "status": "Succeed",        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}    }    execute_step.set_result(current_step_detail)
set_result(current_step_detail)描述：更新步骤|设置关键步骤及执行进度|# -*- coding: utf-8 -*-from nemo.step import ExecuteStepimport timeexecute_step = ExecuteStep()def init_execution_steps():    steps = [        {"number": "1", "name": "start",          "zh": "start", "en": "start"},        {"number": "2", "name": "open_plan_area",          "zh": "open", "en": "open plan area"},        {"number": "3", "name": "end",          "zh": "end", "en": "end"}    ]    execute_step.init(steps)def execute(**kw):     execute_step.run("open_plan_area")    execute_step.run("open_plan_area",         {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})    time.sleep(5)    current_step_detail = {        "name": "open_plan_area",        "status": "Succeed",        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}    }    execute_step.set_result(current_step_detail)
设置聚合表格|set_columns(CustomColumn())描述：设置聚合表格中的自定义列|# -*- coding: utf-8 -*-from nemo.ui.table.workflow_aggregation import WorkflowAggregationTablefrom nemo.ui.table.workflow_aggregation import CustomColumndef execute(**kw):    wg = WorkflowAggregationTable()    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称',                                 order=1, show=True, True,                                  'Shows the workflow name', '展示工作流的名称'),                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度',                                   order=2, show=False)                    CustomColumn('user', 'user_name', '用户名',                                  order=3, show=True, True,                                  'Creator of the workflow application', '工作流应用的创建人')])    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮',                                  description_en='Description of the customized button',                                  description_zh='自定义按钮的描述信息', action_type="ose",                                  ose_action_setting = OseActionSetting("applicationName",                                 "parameterBinding",                                 parameter_template =""))])    results = []    request = ose.__execute_packet(params, '自动入网开站流程')             workflow_execution_id = request['executionId']    # 当工作流正常执行时    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})         wg.add_data(results)    # 当工作流未正常启动时         results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED,                     "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})          wg.add_data(results)
set_buttons(CustomButton())描述：设置聚合表格中的自定义导出按钮|设置聚合表格|# -*- coding: utf-8 -*-from nemo.ui.table.workflow_aggregation import WorkflowAggregationTablefrom nemo.ui.table.workflow_aggregation import CustomColumndef execute(**kw):    wg = WorkflowAggregationTable()    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称',                                 order=1, show=True, True,                                  'Shows the workflow name', '展示工作流的名称'),                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度',                                   order=2, show=False)                    CustomColumn('user', 'user_name', '用户名',                                  order=3, show=True, True,                                  'Creator of the workflow application', '工作流应用的创建人')])    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮',                                  description_en='Description of the customized button',                                  description_zh='自定义按钮的描述信息', action_type="ose",                                  ose_action_setting = OseActionSetting("applicationName",                                 "parameterBinding",                                 parameter_template =""))])    results = []    request = ose.__execute_packet(params, '自动入网开站流程')             workflow_execution_id = request['executionId']    # 当工作流正常执行时    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})         wg.add_data(results)    # 当工作流未正常启动时         results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED,                     "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})          wg.add_data(results)
add_data(rows)描述：为聚合表格添加数据|设置聚合表格|# -*- coding: utf-8 -*-from nemo.ui.table.workflow_aggregation import WorkflowAggregationTablefrom nemo.ui.table.workflow_aggregation import CustomColumndef execute(**kw):    wg = WorkflowAggregationTable()    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称',                                 order=1, show=True, True,                                  'Shows the workflow name', '展示工作流的名称'),                    CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度',                                   order=2, show=False)                    CustomColumn('user', 'user_name', '用户名',                                  order=3, show=True, True,                                  'Creator of the workflow application', '工作流应用的创建人')])    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮',                                  description_en='Description of the customized button',                                  description_zh='自定义按钮的描述信息', action_type="ose",                                  ose_action_setting = OseActionSetting("applicationName",                                 "parameterBinding",                                 parameter_template =""))])    results = []    request = ose.__execute_packet(params, '自动入网开站流程')             workflow_execution_id = request['executionId']    # 当工作流正常执行时    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": ne.get('user')})         wg.add_data(results)    # 当工作流未正常启动时         results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.FAILED,                     "currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})          wg.add_data(results)
ran
提供基础功能类库，功能描述如下： 
分类|函数说明|示例
---|---|---
网元选择器|模块：from ran.util import neutils函数：get_selected_mode(kw, '参数名')描述：获取网元选择器的选择模式|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_ne_list(kw, '参数名')描述：获取不同选择模式下的网元信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_groupids(kw, '参数名')描述：获取不同选择模式下的分组信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_subnetworks(kw, '参数名')描述：获取不同选择模式下的子网信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
模块：from ran.util import neutils函数：get_ne_groups(kw, '参数名')描述：获取分组模式下的详细分组信息|网元选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import neutilslogger = logger()def execute(**kw):    logger.info(neutils.get_selected_mode(kw, 'NE'))    logger.info(neutils.get_ne_list(kw, 'NE'))    logger.info(neutils.get_groupids(kw, 'NE'))    logger.info(neutils.get_subnetworks(kw, 'NE'))    logger.info(neutils.get_ne_groups(kw, 'NE'))
资源选择器|模块：from ran.util import resourceutils函数：get_selected_type(kw, '参数名')描述：获取资源选择器的资源类型|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import resourceutilslogger = logger()def execute(**kw):    logger.info(resourceutils.get_selected_type(kw,     'resource'))    logger.info(resourceutils.get_resource_list(kw,     'resource'))
模块：from ran.util import resourceutils函数：get_resource_list(kw, '参数名')描述：获取资源选择器的资源列表|资源选择器|# -*- coding: utf-8 -*-from nemo.log import loggerfrom ran.util import resourceutilslogger = logger()def execute(**kw):    logger.info(resourceutils.get_selected_type(kw,     'resource'))    logger.info(resourceutils.get_resource_list(kw,     'resource'))
####### 第三方库 
目前平台支持的第三方库如下： 
组件名称|组件版本|组件说明
---|---|---
pandas|1.2.1|Pandas is a fast, powerful, flexible and easy to use open source data analysis and manipulation tool,built on top of the Python programming language.
openpyxl|3.0.9|Openpyxl is a Python library to read/write Excel 2010 xlsx/xlsm/xltx/xltm files.
xlrd|1.2.0|Extract data from Excel spreadsheets (.xls and .xlsx, versions 2.0 onwards) on any platform.
numpy|1.20.3|NumPy is the fundamental package for scientific computing in Python. It is a Python library that provides a multidimensional array object, various derived objects (such as masked arrays and matrices), and an assortment of routines for fast operations on arrays, including mathematical, logical, shape manipulation, sorting, selecting, I/O, discrete Fourier transforms, basic linear algebra, basic statistical operations, random simulation and much more.
XlsxWriter|1.3.7|XlsxWriter is a Python module that can be used to write text, numbers, formulas and hyperlinks to multiple worksheets in an Excel 2007+ XLSX file.
python-docx|0.8.11|python-docx is a Python library for creating and updating Microsoft Word (.docx) files.
scipy|1.6.2|SciPy (pronounced “Sigh Pie”) is open-source software for mathematics, science, and engineering.
###### 脚本应用开发示例 
####### FTP/SFTP操作 
用于连接FTP及SFTP，实现文件的下载和上传，文件夹的相关操作。 
######## 1.FTP 
模块：nemo.ftp 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.ftp import FtpClient
from nemo import path

def execute(**kw):
    cli = FtpClient('ip', port, 'username', 'password')
    try:
        cli.connect()
        if not cli.exists('/report'):
            cli.mkdir('/report')
        remoteFile = '/a/test.txt'
        localFile = path.get_result_root() + '/test_ftp.txt'
        if cli.exists(remoteFile):
            cli.get(remoteFile,  localFile)
        if not cli.exists(localFile):
            cli.put(localFile, '/a/ftp_dest2.txt')
    finally:
        cli.disconnect()` 
接口说明： 
接口名称|说明
---|---
FtpClient('ip', port, 'username', 'password')|创建Ftp客户端对象，参数为ip、端口、用户名、密码，必填参数
connect()|连接到ftp服务器
disconnect()|断开ftp连接
mkdir(dir)|在服务器上创建文件夹，参数为文件夹路径
rmdir(dir)|删除服务器上的文件夹，参数为文件夹路径
get(remote_path, local_path)|下载文件，参数为服务端文件路径、本地文件路径
put(local_path, remote_path)|上传文件，参数为本地文件路径、服务端文件路径
get_ftp(）|返回ftp对象实例，用于对ftp更多的操作
exists(remote_path)|判断远端的目录是否存在，参数为服务端文件路径
######## 2.SFTP 
模块：nemo.ftp 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.ftp import SftpClient
 
def execute(**kw):
    cli = SftpClient('ip', port, 'username', 'password')
    try:
        cli.connect()
        if not cli.exists('/report'):
            cli.mkdir('/report')
         将本地文件上传到服务器
        if not cli.exists('/report/rru.csv'):
            cli.put('/tmp/rru.csv', '/report/rru.csv')
    finally:
        cli.disconnect()` 
接口说明： 
接口名称|说明
---|---
SftpClient('ip', port, 'username', 'password')|创建Sftp客户端对象，参数为ip、端口、用户名、密码，必填参数
connect()|连接到Sftp服务器
disconnect()|断开Sftp连接
mkdir(dir)|在服务器上创建文件夹，参数为文件夹路径
rmdir(dir)|删除服务器上的文件夹，参数为文件夹路径
get(remote_path, local_path)|下载文件，参数为服务端文件路径、本地文件路径
put(local_path, remote_path)|上传文件，参数为本地文件路径、服务端文件路径
get_sftp(）|返回sftp对象实例，用于对sftp更多的操作
exists(remote_path)|判断远端的目录是否存在，参数为服务端文件路径
####### 调用RESTful接口 
实现对UME微服务提供RESTful接口的调用。 
######## 1. 基本操作 
对RESTful接口的基本操作都封装在nemo.rest.client.RestClient中，RestClient使用如下： 
` -*- coding: utf-8 -*- 
  rc = RestClient()` 
或者使用带参数构造函数： 
` -*- coding: utf-8 -*- 
  rc = RestClient(namespace="ranoss", version="v1")` 
GET操作
模块：nemo.rest.client.RestClient 
函数：get(service_name, uri, body=None, headers={}, timeout=10) 
描述： 请求RESTful接口的GET操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
import json
logger = logger()
 
def execute(**kw):
    rc = RestClient() 
    result = rc.get('res', '/mes')
    mes = json.loads(result) 
    logger.info("总计" + str(len(mes)) + "个网元")` 
POST操作
模块：nemo.rest.client.RestClient 
函数：post(service_name, uri, body, headers={}, timeout=10) 
描述： 请求RESTful接口的POST操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    rc = RestClient()
    body = {
        'projectName': 'Test',
        'desc': 'Test project description'
    }
    result = rc.post('ofd-access', '/ose/logs/_search', body)
    logger.info(result)` 
PUT操作
模块：nemo.rest.client.RestClient 
函数：put(service_name, uri, body, headers={}, timeout=10) 
描述： 请求RESTful接口的PUT操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    rc = RestClient()
    body = {
        'projectName': 'Test',
        'desc': 'Test project description'
    }
    result = rc.put('service_name', 'your_url', body)
    logger.info(result)` 
DELETE操作
模块：nemo.rest.client.RestClient 
函数：delete(service_name, uri, body=None, headers={}, timeout=10) 
描述： 请求RESTful接口的DELETE操作 
返回值：返回执行结果 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import RestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    rc = RestClient()
    result = rc.delete('service_name', 'your_url')
    logger.info(result)` 
######## 2.并发操作 
对RESTful接口的并发操作都封装在 nemo.rest.client.ParallelRestClient中，默认并发数为10，并发数限制在1~100之间，RestClient使用如下： 
` -*- coding: utf-8 -*- 
  rc = ParallelRestClient()` 
或者使用带参数构造函数： 
` -*- coding: utf-8 -*- 
  rc = ParallelRestClient(namespace="ranoss", version="v1")` 
并发GET操作
模块：nemo.rest.client.ParallelRestClient 
函数：get(service_name, uris, headers=None, timeout=10, parallel_num=10) 
描述： 并发请求RESTful接口的GET操作，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()

def execute(**kw):
    prc = ParallelRestClient()
    your_uris = ["/order/1", "/order/2", "/order/3"]
    results = prc.get('service_name', your_uris, timeout=30, parallel_num=10)
    for r in results:
        logger.info(r)` 
并发POST操作
模块：nemo.rest.client.ParallelRestClient 
函数：post(service_name, uri, bodies, headers=None, timeout=10, parallel_num=10) 
描述： 并发请求RESTful接口的POST操作，只支持对同一微服务的同一URL请求不同的body，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    prc = ParallelRestClient()
    your_bodies = [{"a": "1"}, {"a": "2"}]
    results = prc.post('service_name', 'your_url', your_bodies)
    for r in results:
        logger.info(r)` 
并发PUT操作
模块：nemo.rest.client.ParallelRestClient 
函数：put(service_name, requests, headers=None, timeout=10, parallel_num=10) 
描述：并发请求RESTful接口的PUT操作，只支持对同一微服务的不同请求，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw):
    prc = ParallelRestClient()
    request = [{
        'uri': 'your_url1',
        'body': {}
    },
    {
        'uri': 'your_url2',
        'body': {}
    }]
    results = prc.put('service_name', requests)
    for r in results:
        logger.info(r)` 
2.4 并发DELETE操作
模块：nemo.rest.client.ParallelRestClient 
函数：delete(service_name, uris, headers=None, timeout=10, parallel_num=10) 
描述：并发请求RESTful接口的DELETE操作，只支持对同一微服务的请求，timeout为每一次并发的超时时间，默认为10s，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw): 
    prc = ParallelRestClient()
    logger = logger()
    results = prc.delete('service_name', your_uris)
    for r in results:
        logger.info(r)` 
通用的并发操作
模块：nemo.rest.client.ParallelRestClient 
函数：request(requests, parallel_num=10) 
描述：支持对完全不同的请求进行并发处理，parallel_num为并发数设置，默认为10并发 
返回值：返回结果列表，结果在列表中的顺序和请求顺序一致 
示例： 
` -*- coding: utf-8 -*-
 
from nemo.rest.client import ParallelRestClient
from nemo.log import logger
logger = logger()
 
def execute(**kw): 
    prc = ParallelRestClient()
    reqs = [
        {
            'service_name': 'your_service_name',
            'method': 'GET',
            'uri': 'your_uri',
            'body': None,
            'headers': {},
            'timeout': 10
        },
        {
            'service_name': 'your_service_name',
            'method': 'DELETE',
            'uri': 'your_uri'
        }
    ]
    results = prc.request(reqs)
    for r in results:
        logger.info(r)` 
注：request支持的字段如下 
字段名|必填参数|说明
---|---|---
service_name|是|需要请求的服务名称
method|是|需要请求的方法名称： GET DELETE PUT POST等
uri|是|接口的相对路径
body|否|请求体,默认为None
headers|否|请求头,默认为{}
timeout|否|超时时间，默认为10
response_status|否|是否返回状态码，默认为False
####### 调用UCLI命令 
实现UCLI命令的下发。 
######## 1.UCLI操作 
建立UCLI连接
模块 : nemo.cli 
函数 ：connect_ucli()，ucli_client() 
描述 ： 连接UCLI并返回客户端 
返回值 ： UCLI客户端 
示例一： 
` -*- coding: utf-8 -*-

from nemo.cli import connect_ucli

def execute(**kw):
     需要输入用户名和密码
    client = connect_ucli('user', 'password')` 
示例二： 
` -*- coding: utf-8 -*-

from nemo.cli import ucli_client

def execute(**kw):
     无需输入用户名和密码
    client = ucli_client()` 
发送UCLI命令
模块 : nemo.cli 
函数 ：send_command(command) 
描述 ： 利用1.1建立UCLI连接返回的客户端发送UCLI命令 
返回值 ： UCLI命令的执行结果 
示例一： 
` -*- coding: utf-8 -*-

from nemo.cli import connect_ucli

def execute(**kw):
    client = connect_ucli('user', 'password')
    result = client.send_command('ose help')` 
示例二： 
` -*- coding: utf-8 -*-
  
from nemo.cli import ucli_client
  
def execute(**kw):
    client = ucli_client()
    result = client.send_command('ose help')` 
断开UCLI连接
模块 : nemo.cli 
函数 ：disconnect() 
描述 ： 利用1.1建立UCLI连接返回的客户端断开UCLI连接 
返回值 ： 无 
示例一： 
` -*- coding: utf-8 -*-

from nemo.cli import connect_ucli

def execute(**kw):
    client = connect_ucli('user', 'password')
    client.disconnect()` 
示例二： 
` -*- coding: utf-8 -*-
  
from nemo.cli import ucli_client
  
def execute(**kw):
    client = ucli_client()
    client.disconnect()` 
####### 读写文件 
提供CSV的写操作 
######## CsvWriter 
模块 : nemo.file 
示例 ： 
` -*- coding: utf-8 -*-
 
 
from nemo.file import CsvWriter
 
def execute(**kw):
    try:
        csv_writer = CsvWriter('test')
        csv_writer.writerow(['ID', 'Name', 'Description'])
        csv_writer.writerow([1, 'OSD', 'Open Script Designer'])
        csv_writer.writerows((
            [2, 'OSE', 'Open Script Execution Engine'],
            [3, 'OAS', 'Open API']))
    finally:
        csv_writer.close()` 
接口说明： 
接口名称|说明
---|---
CsvWriter('file_name')|创建CsvWriter对象，参数为文件名称
writerow(['ID', 'Name', 'Description'])|写入一行数据
writerows((['ID', 'Name', 'Description']))|写入多行数据
path()|返回CSV文件路径
close()|关闭写对象
####### 获取路径 
用于查询各种输出路径。 
######## 1.path 
模块: nemo.path 
示例 
` -*- coding: utf-8 -*-

from nemo.log import logger
from nemo import path
logger = logger()

def execute(**kw):
    logger.info(path.get_csv_root())
    logger.info(path.get_result_root())
    logger.info(path.get_data_root())` 
接口说明： 
接口名称|说明
---|---
path.get_result_root()|获取输出结果文件的根目录，此目录中的内容会在执行完成之后被打包为附件
path.get_csv_root()|获取输出CSV文件的根目录
path.get_data_root()|获取输出数据文件的根目录，此目录用于放置用户自定义的输出数据
path.get_parameter_file_path()|获取文件参数的路径，此路径用于放置用户上传的文件
####### 获取上下文 
用于查询脚本执行上下文信息，包括用户名，语言环境，执行方式，事物ID和客户端IP。 
######## 1.context 
模块: nemo.context 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.log import logger
from nemo import context
logger = logger()


def execute(**kw):
    logger.info("CONTEXT_USERNAME: " + context.get_username())
    logger.info("CONTEXT_LANGUAGE_OPTION: " + context.get_language_option())
    logger.info("CONTEXT_TRIGGER_TYPE: " + context.get_trigger_type())
    logger.info("CONTEXT_TRANSACTION_ID: " + context.get_transaction_id())
    logger.info("CONTEXT_TRANSACTION_ID: " + context.get_client_ip())` 
接口说明: 
接口名称|描述
---|---
context.get_username(True)|获取脚本执行的用户名，默认返回编码后的字符串True：返回编码后的字符串False：返回编码前的字符串
context.get_language_option()|获取脚本从用户界面透传的执行语言，例如"en-US"
context.get_trigger_type()|获取脚本执行方式，为ONCE, TIMING, DEBUG中的其中一个
context.get_transaction_id()|获取脚本执行的事物id
context.get_client_ip()|获取触发脚本执行的客户端IP
####### 记录日志 
用于记录日志，日志可以在脚本运行时实时回显，也可以在执行结果附件中查看。 
######## 1. log 
模块 : nemo.log 
示例 ： 
` -*- coding: utf-8 -*-
 
from nemo.log import logger
 
logger = logger()
 
def execute(**kw):
    logger.info('hello osd!')` 
接口说明： 
接口名称|说明
---|---
logger.info('info')|打印info级别日志
logger.error('error')|打印error级别日志
logger.warn('warn')|打印warn级别日志
####### 压缩与解压缩文件 
用于文件的压缩和解压缩。 
######## 1.压缩与解压缩 
模块: nemo.util 
示例 
` -*- coding: utf-8 -*-

from nemo.util.compress.CompressUtil import CompressUtil
from nemo.util.compress.CompressType import CompressType

def execute(**kw):
    CompressUtil(CompressType.zip).compress('logs', 'logs.zip')
    CompressUtil(CompressType.tar).compress('logs', 'logs.tar')
    CompressUtil(CompressType.gz).compress('logs.tar', 'logs.tar.gz')
    CompressUtil(CompressType.zip).decompress('logs.zip', 'logs_zip_out')
    CompressUtil(CompressType.tar).decompress('logs.tar', 'logs_tar_out')
    CompressUtil(CompressType.gz).decompress('logs.tar.gz', 'logs_gz_out')` 
####### 设置关键步骤及执行进度 
提供脚本的执行步骤 
######## ExecuteStep 
模块 : nemo.step 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.step import ExecuteStep
import time
execute_step = ExecuteStep()
def init_execution_steps():
    steps = [
        {"number": "1", "name": "start", "zh": "start", "en": "start"},
        {"number": "2", "name": "open_plan_area", "zh": "open", "en": "open plan area"},
        {"number": "3", "name": "end", "zh": "end", "en": "end"}
    ]
    execute_step.init(steps)
def execute(**kw): 
    execute_step.run("open_plan_area")
    execute_step.run("open_plan_area", 
        {"zh": "第一次打开规划区", "en": "Opening the Plan Area for the First Time"})
    time.sleep(5)
    current_step_detail = {
        "name": "open_plan_area",
        "status": "Succeed",
        "detail": {"zh": "规划区已打开", "en": "The plan area is opened"}
    }
    execute_step.set_result(current_step_detail)` 
接口说明： 
接口名称|说明
---|---
init(steps)|初始化步骤
run(name)|执行步骤
set_result(current_step_detail)|更新步骤
####### 网元选择器 
在网元选择器不同选择模式下，为用户提供网元、分组和子网信息 
######## Neutils 
模块 ：ran.util 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.log import logger
from ran.util import neutils
logger = logger()

def execute(**kw):
    logger.info(neutils.get_selected_mode(kw, 'NE'))
    logger.info(neutils.get_ne_list(kw, 'NE'))
    logger.info(neutils.get_groupids(kw, 'NE'))
    logger.info(neutils.get_subnetworks(kw, 'NE'))
    logger.info(neutils.get_ne_groups(kw, 'NE'))` 
接口说明： 
接口名称|说明
---|---
get_selected_mode(kw, '参数名')|获取网元选择器的选择模式
get_ne_list(kw, '参数名')|获取不同选择模式下的网元信息
get_groupids(kw, '参数名')|获取不同选择模式下的分组信息
get_subnetworks(kw, '参数名')|获取不同选择模式下的子网信息
get_ne_groups(kw, '参数名')|获取分组模式下的详细分组信息
####### 资源选择器 
在资源选择器的不同选择模式下，为用户提供网元、分组、子网以及小区信息。 
######## Resourceutils 
模块 ：ran.util 
示例 ： 
` -*- coding: utf-8 -*-
from nemo.log import logger
from ran.util import resourceutils
logger = logger()

def execute(**kw):
    logger.info(resourceutils.get_selected_type(kw, 'resource'))
    logger.info(resourceutils.get_resource_list(kw, 'resource'))` 
接口说明： 
接口名称|说明
---|---
get_selected_type(kw, '参数名')|获取资源选择器的资源类型
get_resource_list(kw, '参数名')|获取资源选择器的资源列表
####### 聚合表格 
为聚合表格设置自定义列以及添加数据 
######## ui 
模块 ：ui.table.workflow_aggregation 
示例 ： 
` -*- coding: utf-8 -*-

from nemo.ui.table.workflow_aggregation import WorkflowAggregationTable
from nemo.ui.table.workflow_aggregation import CustomColumn

def execute(**kw):
    wg = WorkflowAggregationTable()
    wg.set_columns([CustomColumn('name', 'workflow_name', '工作流名称', order=1, show=True, 
                  True, 'Shows the workflow name', '展示工作流的名称'),
                  CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度', order=2,
                  show=False)
                  CustomColumn('user', 'user_name', '用户名', order=3, show=True, True, 
                               'Creator of the workflow application', '工作流应用的创建人')])
    wg.set_buttons([CustomButton(name_en='Customize Button', name_zh='自定义按钮', 
                               description_en='Description of the customized button',
                               description_zh='自定义按钮的描述信息', action_type="ose", 
                               ose_action_setting = OseActionSetting("关联应用的名称", 
                               "关联应用的参数名称",parameter_template = {"扩展参数":'xxx'}))])
    results = []
    request = ose.__execute_packet(params, '自动入网开站流程')         
    workflow_execution_id = request['executionId']
     当工作流正常执行时
    results.append({"id": workflow_execution_id, "name": ne.get('name'), "user": 
    ne.get('user')})
    wg.add_data(results)
     当工作流未正常启动时     
    results.append({"name": ne.get('name'), "user": ne.get('user'), "status": executeResult.
    FAILED,"currentStep": {"en": "check fail", "zh": "数据合法性检查失败"}})      
    wg.add_data(results)
` 
接口说明： 
接口名称|说明
---|---
set_columns(CustomColumn(key, title_en, title_zh, order=1, show=True, is_filter=False, pop_over_title_en=' ', pop_over_title_zh=' '))set_columns(CustomColumn(ReservedColumn.PROGRESS, 'whole process', '全部进度'))|设置聚合表格中的自定义列key：自定义列的标识title_en：自定义列的英文名称title_zh：自定义列的中文名称order：设置列的顺序show：是否显示is_filter：是否包含过滤器pop_over_title_en：自定义列的英文描述信息pop_over_title_zh：自定义列的中文描述信息ReservedColumn.PROGRESS, 'en', 'zh'：设置固定列的中英文名称
set_buttons([CustomButton(name_en=' ', name_zh=' ',                                  description_en=' ', description_zh=' ', action_type="ose", ose_action_setting = OseActionSetting("applicationName", "parameterBinding", parameter_template = " "))])|设置聚合表格中的自定义导出按钮name_en：自定义按钮的英文名称name_zh：自定义按钮的中文名称description_en：自定义按钮的英文描述信息description_zh：自定义按钮的中文描述信息action_type：触发类型，固定为oseapplicationName：关联应用的名称parameterBinding：关联应用的参数名称parameter_template：扩展参数
add_data(rows)|为聚合表格添加数据id：工作流应用的执行IDname：自定义列的key值，用于关联数据与自定义列status：自定义执行结果列中的内容，其中包括三种状态，分别为：'COMPLETED'，'FAILED' 以及 'RUNNING'currentStep：自定义当前步骤列中的内容
###### 脚本参数设置指南 
####### 新建String类型参数 
######## 摘要 
参数描述：字符串类型，用户可以输入任何文本字符串。 
参数约束：可以通过配置constraints属性对输入值进行校验，如constraints = ''d+"，则输入参数必须为数字。 
使用场景：常用参数类型，兼容各种场景。使用最普遍，这里不做赘述。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615806992114.html#Qy-0440B6F3__bf60d2f3-f436-4999-a8eb-23ca9a2795df)所示。
图1  新建String类型参数
[]images/string11.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615806992114.html#Qy-0440B6F3__ea5ca4bd-d3bf-428b-a50a-0ec9d0b0d502)。
扩展属性|说明|选填项|示例
---|---|---|---
约束|正则表达式|选填|^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$
默认值|符合约束字段的值|选填|username@zte.com.cn
提示信息|参数的提示信息，zh：中文；en：英文（中英文为选填项）|选填|{     "zh": "username@zte.com.cn",     "en": "username@zte.com.cn"}
前缀|参数是否显示前缀|选填|Touch
是否只读|参数是否仅具有读权限True：参数信息仅具有读权限False：参数信息具有编辑权限|选填|关闭
单击新建按钮，String类型的参数新建成功，如[图2](1615806992114.html#Qy-0440B6F3__1d8f12db-2539-46ad-8292-dd5fb5cb79da)所示。
图2  String类型的参数
[]images/1624432598894.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite 
 Created: 2020-10-28 
 Purpose: String 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    string = kw['String']
    logger.info('Touch: ' + string)` 
单击[]images/1624432598844.png)按钮，打开调试窗口，输入参数，如[图3](1615806992114.html#Qy-0440B6F3__d69e863c-f58e-475a-a13f-a24ffe57534a)所示。
图3  String参数显示
[]images/string13.png)
单击确认按钮，执行结果如[图4](1615806992114.html#Qy-0440B6F3__15e39fcd-099a-4f6b-9adb-3508aa285584)所示。
图4  String参数执行结果
[]images/string%E8%B0%83%E8%AF%95%E7%BB%93%E6%9E%9C.png)
####### 新建Number类型参数 
######## 摘要 
参数描述：数字类型，支持整数、浮点数、正负数。 
参数约束：可以通过配置constraints属性对输入值进行校验，如constraints="[0,120]"，输入122则校验不通过。 
使用场景：常用参数类型，兼容各种场景。常用来做阈值判断，如清理类脚本，当达到设定的阈值后，执行清理操作。这里不做赘述。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807198142.html#Qy-0440B6F3__0106eca0-ba8a-441c-b94f-98ad765acfc9)所示。
图1  新建Number类型参数
[]images/%E6%96%B0%E5%BB%BANumber%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807198142.html#Qy-0440B6F3__8123ce09-d9b0-40fc-951e-e0bb1baa7be7)。
扩展属性|说明|选填项|示例
---|---|---|---
约束|数据的取值范围|选填|[1,60]
默认值|符合约束字段的值|选填|30
小数位数|为参数设定小数点后最多保留的位数，若不设置该字段，则取默认值为：0|选填|3
步长|为参数设定增减值，若不设置该字段，则取默认值为：1；若设置步长，在调试过程中，可通过输入框右侧的“上下按钮”增减参数的值|选填|3
单位|参数是否显示单位|选填|s
提示信息|参数的提示信息，zh：中文；en：英文|选填|{    "zh": "时间间隔",    "en": "Time Interval"}
单击新建按钮，Number类型的参数新建成功，如[图2](1615807198142.html#Qy-0440B6F3__be705879-9085-4cd9-8e67-147eea3ce723)所示。
图2  Number类型的参数
[]images/1624434737951.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: Number 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    Number = kw['Number']
    logger.info('Time Interval is ' + Number)` 
单击[]images/1624434737771.png)按钮，打开调试窗口，输入参数，如[图3](1615807198142.html#Qy-0440B6F3__dc28c7a6-0f1b-42da-a22d-f22eea60e551)所示。
图3  Number参数显示
[]images/1624434737891.png)
单击确定按钮，执行结果如[图4](1615807198142.html#Qy-0440B6F3__74b636a1-1cca-4a04-96ec-18c870227590)所示。
图4  Number参数执行结果
[]images/1624434738121.png)
####### 新建Password类型参数 
######## 摘要 
参数描述：密码类型，为满足安全需求，界面上统一显示为“..”。 
参数约束：密码参数不能设置默认值。 
使用场景：很多业务脚本使用的接口需要鉴权后才能调用。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807254834.html#Qy-0440B6F3__4836bec3-9f74-408f-b5e9-7746078b109a)所示。
图1  新建Password类型参数
[]images/1624436914456.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807254834.html#Qy-0440B6F3__20cdf815-6b9c-4870-9607-92885e252589)。
扩展属性|说明|选填项|示例
---|---|---|---
开启密码确认|参数是否展示确认密码框|选填|打开
单击新建按钮，Password类型的参数新建成功，如[图2](1615807254834.html#Qy-0440B6F3__6d96e9de-a1e6-455e-8df8-f315959d2a4c)所示。
图2  Password类型的参数
[]images/1624436914506.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite 
 Created: 2020-10-28 
 Purpose: Password 类型
 ---------------------------------------------------------
from nemo.log import logger
from nemo import context
logger = logger()

def execute(**kw):
    username = context.get_username()
    password = kw['Password']
    logger.info('username: '+username)
    logger.info('password: '+password)` 
单击[]images/1624436914356.png)按钮，打开调试窗口，输入参数，如[图3](1615807254834.html#Qy-0440B6F3__51218302-5665-4f9b-b795-c6fcdc267046)所示。
图3  Password参数显示
[]images/1624436914406.png)
单击确定按钮，执行结果如[图4](1615807254834.html#Qy-0440B6F3__6f949165-a918-4b52-9c93-0ef4ea0ef3e6)所示。
图4  Password参数执行结果
[]images/1624436914556.png)
####### 新建Switch类型参数 
######## 摘要 
参数描述：切换参数，用户在两个备选项中选中单个状态。 
参数约束：取值：1或0，1为打开，0为关闭。可设置默认值，如果不更改，则默认为0。 
使用场景：常用参数类型，用户可设置初始状态，在一定条件下，用户可手动切换至另一状态。如能力开放大赛获奖作品展播4：NR侧PowerSaving节能配置工具，反复使用此类型参数，其中包括是否配置符号关断、通道关断、载波关断、深度休眠和Qcell定时上下电参数信息。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807236601.html#Qy-0440B6F3__0932805a-17f9-4241-b4a4-f4c09049292e)所示。
图1  新建Switch类型参数
[]images/1624436412695.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807236601.html#Qy-0440B6F3__ac311688-a4a8-4d2f-a124-7867300efc4c)。
扩展属性|说明|选填项|示例
---|---|---|---
默认值|选则打开或关闭按钮|选填|打开
中文标题（开）|与“打开”按钮相对应的中文标题|选填|连接
英文标题（开）|与“打开”按钮相对应的英文标题|选填|Connect
中文标题（关）|与“关闭”按钮相对应的中文标题|选填|断开
英文标题（关）|与“关闭”按钮相对应的英文标题|选填|Disconnect
单击新建按钮，Switch类型的参数新建成功，如[图2](1615807236601.html#Qy-0440B6F3__89ab9337-b2ab-4618-b57a-ded95d21ea6e)所示。
图2  Switch类型的参数
[]images/1624436412065.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: Switch 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    switch = kw['Switch']
    if switch == "0":
        logger.info('Data link status is connect')
    else:
        logger.info('Data link status is disconnect')` 
单击[]images/1624436412015.png)按钮，打开调试窗口，输入参数，如[图3](1615807236601.html#Qy-0440B6F3__df3852bb-5101-426b-a582-307b899556e8)所示。
图3  Switch参数显示
[]images/1624436412125.png)
单击确认按钮，执行结果如[图4](1615807236601.html#Qy-0440B6F3__336d0e97-75d1-4666-b4f8-d3a1ed575a42)所示。
图4  Switch参数执行结果
[]images/1624436412645.png)
####### 新建Enum类型参数 
######## 摘要 
参数描述：下拉单选，根据用户给出的参数取值范围选择某一个参数。 
参数选项：只能选择一个值，必须为键值对，如{"0":"断链","1":"正常"}。 
使用场景：很多脚本给用户展示的参数内容较多而复杂且用户只能选择其一，但是写在脚本里又不简洁，开发人员可用此参数解决此问题。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807274565.html#Qy-0440B6F3__e2eb162d-a6c5-4a1e-a768-a5df130a95b3)所示。
图1  新建Enum类型参数
[]images/1624437993830.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807274565.html#Qy-0440B6F3__d92863d7-9d52-472f-ad97-2882d386e57e)。
扩展属性|说明|选填项|示例
---|---|---|---
约束|下拉列表的选项定义，输入内容需符合特定的JSON格式|必填|{   "0":{ "zh":"允许连接","en":"Connected Allowed" },   "1":{ "zh":"禁止连接","en":"Connected Forbidden"}}
默认值|符合约束字段的值|选填|0
单击新建按钮，Enum类型的参数新建成功，如[图2](1615807274565.html#Qy-0440B6F3__92e8b840-fa37-4e0f-9ff1-762e76d611c6)所示。
图2  Enum类型的参数
[]images/1624437993730.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: Enum 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    re_conn_state = kw['reConnState']
    logger.info('The selected status is ' + re_conn_state)` 
单击[]images/1624437993680.png)按钮，打开调试窗口，输入参数，如[图3](1615807274565.html#Qy-0440B6F3__241fa7be-043a-46cd-ac52-8c85c656a9b5)所示。
图3  Enum参数显示
[]images/1624437993780.png)
单击确认按钮，执行结果如[图4](1615807274565.html#Qy-0440B6F3__2f39f971-5687-418b-8ab0-8acbdd549d7d)所示。
图4  Enum参数执行结果
[]images/1624437993940.png)
####### 新建List类型参数 
######## 摘要 
参数描述：下拉多选，根据用户给出的参数取值范围选择多个参数。 
参数选项：支持选择多个值，必须为键值对，如[{"value":"0","zh":"断链","en":"Broken"},{"value":"1","zh":"建链","en":"Connected"}]。 
使用场景：很多脚本给用户展示的参数内容较多而复杂，脚本编写较为复杂，为方便用户自行选取所需的参数，开发人员可用此参数解决此问题。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807312649.html#Qy-0440B6F3__e3eb85cb-b7e1-4c6f-96e3-9c7254e3d18d)所示。
图1  新建List类型参数
[]images/1624440411163.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807312649.html#Qy-0440B6F3__9807aaff-3063-4989-8806-7abe439c5caa)。
扩展属性|说明|选填项|示例
---|---|---|---
约束|下拉列表的选项定义，输入内容需符合特定的JSON格式|必填|[{        "value": "0",        "zh": "断链",	"en": "Broken"  },  {	"value": "1",	"zh": "建链",	"en": "Connected"}]
默认值|符合约束字段的值|选填|["0","1"]
单击新建按钮，List类型的参数新建成功，如[图2](1615807312649.html#Qy-0440B6F3__5031d69e-13c6-4c9f-a3cc-77f76ed36c0a)所示。
图2  List类型的参数
[]images/1624440411208.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: List 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    ConnentState = kw['ConnectState']
    logger.info('The selected status is ' + ConnentState)` 
单击[]images/1624440411073.png)按钮，打开调试窗口，输入参数，如[图3](1615807312649.html#Qy-0440B6F3__c79de6a5-e7dc-4803-8f78-c56cb858da28)所示。
图3  List参数显示
[]images/1624440411120.png)
单击确认按钮，执行结果如[图4](1615807312649.html#Qy-0440B6F3__203e4db9-bae8-4918-a331-8b1b762f10d6)所示。
图4  List参数执行结果
[]images/1624440411250.png)
####### 新建IP类型参数 
######## 摘要 
参数描述：为用户提供IP地址的输入参数。 
默认值：只支持IPV4或IPV6格式。 
使用场景：很多业务脚本需要配置IP地址，并且支持IPV4和IPV6双站的场景。所以提供IP类型参数统一设置IP地址，无需全脚本编写IP地址。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807327945.html#Qy-0440B6F3__b3da95af-d9f0-4642-9158-f2647fb85fe5)所示。
图1  新建Ip类型参数
[]images/1624498911999.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807327945.html#Qy-0440B6F3__ea5daa3a-8938-457d-9ed1-8c5835807674)。
扩展属性|说明|选填项|示例
---|---|---|---
默认值|支持IPV4或IPV6地址|选填|127.0.0.1
单击新建按钮，Ip类型的参数新建成功，如[图2](1615807327945.html#Qy-0440B6F3__0afd03a2-ce9f-4766-bec4-45d02e1dca40)所示。
图2  Ip类型的参数
[]images/1624498912099.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: IP 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    IP = kw['IP']
    logger.info('The ip is ' + IP)` 
单击[]images/1624498911879.png)按钮，打开调试窗口，输入参数，如[图3](1615807327945.html#Qy-0440B6F3__c678e2e0-5ac3-4f4c-80b4-cc651f876b8a)所示。
图3  Ip参数显示
[]images/1624498911929.png)
单击确认按钮，执行结果如[图4](1615807327945.html#Qy-0440B6F3__c7b66adb-27fe-4e11-ad71-94a89574a7a4)所示。
图4  Ip参数执行结果
[]images/1624498912049.png)
####### 新建NE类型参数 
######## 摘要 
参数描述：网元类型参数支持用户选取全部网元或者指定网元。 
扩展属性：支持两种显示模式，（如：仅选择网元和选择全网或网元）；过滤条件：网元选择器的过滤条件，（如：moc=ITBBU AND connectionState=0）。 
使用场景：为降低用户在采集网元信息时操作的复杂性，开发人员提供两种显示网元的方式，用户可根据自己的需求选择全部网元或者指定网元来完成基站数据的采集。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807346331.html#Qy-0440B6F3__de0edfc7-1173-441c-9535-6ffabff90e22)所示。
图1  新建NE类型参数
[]images/ne81.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807346331.html#Qy-0440B6F3__b53ab18f-b837-4b3e-aafc-c96d08fe531a)。
扩展属性|说明|选填项|示例
---|---|---|---
模式|网元选择器的显示模式|选填|选择全网或网元
过滤条件|网元选择器的过滤条件|选填|moc=ITBBU AND connectionState=0
最大网元个数|最大网元个数限制|选填|100
单击新建按钮，NE类型的参数新建成功，如[图2](1615807346331.html#Qy-0440B6F3__b366ad8a-c782-4618-86db-a09b16ebdeb9)所示。
图2  NE类型的参数
[]images/ne82.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: NE 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    NE = kw['NE']
    logger.info('The network elements selected in the complex mode are' + NE)

    ne = kw['ne']
    logger.info('The network elements selected in the simple mode are ' + ne)` 
单击[]images/1624499658095(%E9%87%8D%E7%94%A81).png)按钮，打开调试窗口，输入参数，如[图3](1615807346331.html#Qy-0440B6F3__a481b2c6-7c12-4e06-bd61-884451994a5c)所示。
图3  NE参数显示
[]images/ne%E8%B0%83%E8%AF%95.png)
单击确认按钮，执行结果如[图4](1615807346331.html#Qy-0440B6F3__c3e65737-9dc8-43a7-ac69-8c455bb00671)所示。
图4  NE参数执行结果
[]images/ne%E8%B0%83%E8%AF%95%E7%BB%93%E6%9E%9C.png)
####### 新建Resource类型参数 
######## 摘要 
参数描述：资源类型，支持获取网元、分组、子网和小区的资源信息。 
扩展属性：资源类型下拉框中的属性由集成的插件包决定。 
使用场景：用户可通过资源选择器来获取小区资源的数据。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1637571360772.html#z9271e3a5df7f41e39e4395d227004cd5__df827b14-b9a0-4557-819b-bb4ffd55c6ee)所示。
图1  新建Resource类型参数
[]images/1624499658255.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1637571360772.html#z9271e3a5df7f41e39e4395d227004cd5__30664da8-b2d8-4269-9f50-ce93e5bc94c1)。
扩展属性|说明|选填项|示例
---|---|---|---
资源类型|资源选择器的资源类型|必填|选择网元、分组、子网、小区
单击新建按钮，Resource类型的参数新建成功，如[图2](1637571360772.html#z9271e3a5df7f41e39e4395d227004cd5__8494fa9b-36ba-4427-8d65-3dc14f068362)所示。
图2  Resource类型的参数
[]images/1624499658355.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2021-11-23
 Purpose: Resource 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    cell = kw['cell']
    logger.info('Cell resource data:' + cell)    

    group = kw['group']
    logger.info('Group resource data:' + group)    

    subnetwork = kw['subnetwork']
    logger.info('Subnetwork resource data:' + subnetwork)    

    NE = kw['NE']
    logger.info('NE resource data:' + NE)` 
单击[]images/1624499658095.png)按钮，打开调试窗口，输入参数，如[图3](1637571360772.html#z9271e3a5df7f41e39e4395d227004cd5__df60101e-502b-49c6-bcef-6981dfa0e405)所示。
图3  Resource参数显示
[]images/1624499658305.png)
单击确认按钮，执行结果如[图4](1637571360772.html#z9271e3a5df7f41e39e4395d227004cd5__3026bee5-d8b8-4d77-b525-eb94d1e4da39)所示。
图4  Resource参数执行结果
[]images/1624499658205.png)
####### 新建Date类型参数 
######## 摘要 
参数描述：为用户提供日期的输入参数。 
扩展属性：Date参数在调试中提供选择日期下拉框，支持3种日期类型：date，time，datetime以供用户选择，不填默认为date类型。 
使用场景：很多业务脚本需要查看其执行日期，而且对日期的编写格式不统一，正则表达式对于新手用户不易用。所以提供Date类型参数统一设置日期格式，而且提供可视化的选择下拉框方便用户设置日期。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807363976.html#Qy-0440B6F3__81dca8f2-d33c-462b-a66f-715348ace39f)所示。
图1  新建Date类型参数
[]images/1624500888917.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807363976.html#Qy-0440B6F3__451f2674-3889-4e6f-810f-5c45abe2345f)。
扩展属性|说明|选填项|示例
---|---|---|---
日期类型|参数支持的3种日期类型|选填|date
单击新建按钮，Date类型的参数新建成功，如[图2](1615807363976.html#Qy-0440B6F3__8bedcde9-0b46-4685-9ce6-cf38cefd89ef)所示。
图2  Date类型的参数
[]images/1624500888828.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: Date 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    date = kw['Date']
    time = kw['Time']
    datetime = kw['DateTime']
    
    logger.info('---------1：select date-----------')
    logger.info('The selected date is: ' + date)
    logger.info('---------2: select time-----------') 
    logger.info('The selected time is: ' + time)
    logger.info('---------3: select datetime-----------')  
    logger.info('The selected datetime is: ' + datetime)` 
单击[]images/1624500888514.png)按钮，打开调试窗口，输入参数，如[图3](1615807363976.html#Qy-0440B6F3__aaef3832-2c7d-4ea6-a942-ac08666c5ac5)所示。
图3  Date参数显示
[]images/1624500888559.png)
单击确认按钮，执行结果如[图4](1615807363976.html#Qy-0440B6F3__8463ba9a-781c-45c5-83eb-5b0cdac71602)所示。
图4  Date参数执行结果
[]images/1624500888872.png)
####### 新建DateRange类型参数 
######## 摘要 
参数描述：为用户提供开始时间与结束时间的输入参数。 
参数展示：DateRange参数在调试中支持时间范围的设置，在开始时间和结束时间中提供选择日期下拉框。 
使用场景：很多业务脚本需要设置脚本的执行时间范围，起止时间需使用正则表达式编写，对于新手用户不易用。所以开发DateRange类型参数统一设置时间范围，而且提供可视化的选择下拉框方便用户设置日期。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807384339.html#Qy-0440B6F3__04341130-9ded-4f08-8dce-46b0bb908f86)所示。
图1  新建DateRange类型参数
[]images/1624502039835.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：目前DateRange类型的参数不支持扩展字段。
单击新建按钮，DateRange类型的参数新建成功，如[图2](1615807384339.html#Qy-0440B6F3__580dbb5b-c84f-4bbb-8a3a-6a30c39ecb81)所示。
图2  DateRange类型的参数
[]images/1624502039885.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elie
 Created: 2020-10-28
 Purpose: DateRange 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    DateRange = kw['DateRange']
    logger.info('The time range is ' + DateRange)` 
单击[]images/1624502039685.png)按钮，打开调试窗口，输入参数，如[图3](1615807384339.html#Qy-0440B6F3__147fdf6e-c224-4d79-ba1a-fd31933911e4)所示。
图3  DateRange参数显示
[]images/1624502039735.png)
单击确定按钮，执行结果如[图4](1615807384339.html#Qy-0440B6F3__344b3c9f-1889-4d81-9e64-7395af9d385a)所示。
图4  DateRange参数执行结果
[]images/1624502039785.png)
####### 新建File类型参数 
######## 摘要 
参数描述：File参数，用户可使用本参数将本地文件上传到服务器中供脚本调用。 
文件模板：上传文件大小不超过20 M。 
使用场景：很多业务脚本需要处理各种复杂的参数请求，比如：使用csv文件作为动态参数，使用json或者xml文件作为复杂的结构化参数，这些复杂的文件信息通常在本地存放，需要将文件上传到服务器中。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807290831.html#Qy-0440B6F3__1c6c960b-6f99-43a4-97c1-34ef76b18afb)所示。
图1  新建File类型参数
[]images/1624439141433.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807290831.html#Qy-0440B6F3__4146ff2b-a849-4e20-ab42-0ddee436e99b)。
扩展属性|说明|选填项|示例
---|---|---|---
文件类型|参数默认指定可选择的文件类型|选填|zip,png
最小文件大小（Byte）|参数可上传的最小文件大小1MB=1024KB，1KB=1024B|选填|0
最大文件大小（Byte）|参数可上传的最大文件大小1MB=1024KB，1KB=1024B|选填|20971520
自定义上传接口|是否自定义上传文件的接口信息|选填|打开
接口URL|自定义接口的上传路径|选填|/api/ofd-access/v1/ose/executions/parameter-files
请求类型|自定义接口的请求类型|固定值|POST
请求参数|自定义接口的请求参数|选填|{   "key":"test"}
上传失败响应|自定义文件上传失败的提示信息|选填|{   "zh": "response.data.zh",   "en": "response.data.en"}
传递响应|是否传递接口的响应信息若“打开”开关，则传递到后端参数值格式为json；若“关闭”开关，则传递到后端参数值格式为字符串|选填|打开
 说明： 
新增file参数中提供上传模板功能，为用户提供配置参数，方便用户更好的使用数据开放平台。其中，file模板支持的文件类型包括（csv、xlsx、json、xml、yml、zip），大小限制为20 M，模板命名长度不超过30个字符。 
单击新建按钮，File类型的参数新建成功，如[图2](1615807290831.html#Qy-0440B6F3__2f7b897a-dc40-4536-9552-518aecfe0459)所示。
图2  File类型的参数
[]images/1624439141391.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: File 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    file = kw['File']
    logger.info('Uploaded files: ' + file)` 
单击[]images/1624439141232.png)按钮，打开调试窗口，输入参数，如[图3](1615807290831.html#Qy-0440B6F3__6f8cb172-749e-4606-b127-1f5d4e0c4083)所示。
图3  File参数显示
[]images/1624439141298.png)
单击确认按钮，执行结果如[图4](1615807290831.html#Qy-0440B6F3__e9e64257-c29a-4ced-8a9d-739bddffec6e)所示。
图4  File参数执行结果
[]images/1624439141349.png)
####### 新建RestDynamic类型参数 
######## 摘要 
参数描述：RestDynamic类型参数提供下拉框的组件参数来实现对规划区ID的选择操作。 
参数约束：其通过访问RESTful接口，返回查询的规划区，如{"mutiple":false,"method":"GET","url":"/api/pm-model/v1/templates/list","body":null,"func":"response.map(res => {return {value: res.id, zh: res.name, en: res.name}});"} 
使用场景：在很多场景，对于配置数据的操作都需要打开规划区，目前只能通过输入组件来输入规划区ID，使用上很不友好。故开发RestDynamic组件来实现对规划区ID的选择操作，提升易用性。 
######## 参数的设置 
参数信息页面，单击新建参数按钮，打开新建参数对话框，如[图1](1615807407597.html#Qy-0440B6F3__1202ac4b-76bb-460a-9a7f-b1bde2078751)所示。
图1  新建RestDynamic类型参数
[]images/1624503166525.png)
基本属性：参数的基本属性可参考新建参数章节。
扩展属性：参数的扩展属性说明参见[表1](1615807407597.html#Qy-0440B6F3__f07589f2-8a3b-41a9-a730-b0fa6ba2f698)。
扩展属性|字段|说明|选填项|示例
---|---|---|---|---
约束|mutiple|true：表示多选false：表示单选|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
method|约束|请求的方法类型|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
url|约束|完整注册的url|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
body|约束|请求的RESTful接口的参数，若不填写该字段，则取默认值（"body": null）|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
func|约束|将返回的请求进行转换，response字段代表完整的响应体，为Json对象|选填|{   "mutiple": false,   "method": "GET",   "url": "XXX",   "body": null,   "func": "response.planAreaInfoList.map(area=>{return{value: area.ID}});"}
单击新建按钮，RestDynamic类型的参数新建成功，如[图2](1615807407597.html#Qy-0440B6F3__1005d2ae-f1c2-4841-a984-585fe12f0c58)所示。
图2  RestDynamic类型的参数
[]images/1624503166607.png)
######## 在脚本设计器中使用参数 
在main.py页签，输入脚本，主要代码如下：
` -*- coding: utf-8 -*-
 ---------------------------------------------------------
 Author : elite
 Created: 2020-10-28
 Purpose: RestDynamic 类型
 ---------------------------------------------------------
from nemo.log import logger
logger = logger()

def execute(**kw):
    RestDynamic = kw['RestDynamic']
    logger.info('The selected plan area is ' + RestDynamic)` 
单击[]images/1624503166427.png)按钮，打开调试窗口，输入参数，如[图3](1615807407597.html#Qy-0440B6F3__9c9e99de-ccb9-4bc8-a369-f3aca83f81b9)所示。
图3  RestDynamic参数显示
[]images/1624503166472.png)
单击确认按钮，执行结果如[图4](1615807407597.html#Qy-0440B6F3__915ddb07-c996-4b6c-860f-288505ab1add)所示。
图4  RestDynamic参数执行结果
[]images/1624503166566.png)
###### 脚本参数设置联动效果 
####### 功能介绍 
用户在OSD中编写脚本时，当脚本参数设置过多时，调试页面不利于参数的查询和输入，因此在设置联动参数页面新增参数分组和参数关联的功能。具体包括：
设置参数分组 
设置参数关联 
设置参数值关联 
####### 分组的设置 
在参数页面新建多个参数，新建参数的具体操作可参见“[脚本参数设置指南](1615800298263.html)”，如[图1](1641366981673.html#zd08bf07099b94a34819005a25976fc70__0550230d-c869-4f77-bd4f-79b69870a7f1)所示。
图1  新建参数
[]images/1624432598984.png)
为参数添加分组设置，单击新设置联动参数按钮，在参数分组页面，单击添加分组链接，设置分组信息，如[图2](1641366981673.html#zd08bf07099b94a34819005a25976fc70__b691382b-53d6-478f-ac08-869a43858822)所示。
图2  设置分组
[]images/%E8%AE%BE%E7%BD%AE%E5%88%86%E7%BB%84.png)
如果需要继续添加分组信息，可重复单击添加分组链接，单击预览页面的[]images/1641367967270.png)按钮，参数分组的展示效果如[图3](1641366981673.html#zd08bf07099b94a34819005a25976fc70__7822009f-1c50-4d2e-9190-c231c6602d7a)所示。
图3  分组预览
[]images/%E9%A2%84%E8%A7%88%E9%A1%B5%E9%9D%A2.png)
分组信息设置成功，单击[]images/%E8%B0%83%E8%AF%95%E6%8C%89%E9%92%AE.png)按钮，打开调试窗口，参数分组的展示效果与预览页面相同，如[图4](1641366981673.html#zd08bf07099b94a34819005a25976fc70__ab2d9b8e-935a-4088-9c45-101fe87a3acf)所示。
图4  分组展示
[]images/1641371602543.png)
OSE中运行应用、新建任务以及修改任务页面，参数分组的展示效果与调试调试页面相同。
####### 参数关联的设置 
在参数页面新建多个参数，其中包括Switch、Enum、List等类型的参数，新建参数的具体操作可参见“[脚本参数设置指南](1615800298263.html)”，如[图5](1641366981673.html#zd08bf07099b94a34819005a25976fc70__523862c9-bff0-44d5-9f15-e530ef668c47)所示。
图5  新建枚举类型的参数
[]images/%E5%85%B3%E8%81%94%E5%8F%82%E6%95%B0%E7%9A%84%E6%89%80%E6%9C%89%E5%8F%82%E6%95%B0.png)
为参数添加参数关联的设置，单击设置联动参数按钮，进入参数关联页面，单击添加条件链接，在参数下拉框中选择参数（只支持枚举类型的参数，如：switch、enum、list类型的参数），单击[]images/%E5%8F%82%E6%95%B0%E5%85%B3%E8%81%94.png)按钮，添加关联参数，如[图6](1641366981673.html#zd08bf07099b94a34819005a25976fc70__38e5954d-810a-4444-bf14-7bdefafce075)所示。
图6  设置参数联动
[]images/1624432598944.png)
如果需要继续添加关联参数信息，可重复单击添加条件链接。单击预览页面的[]images/%E5%88%B7%E6%96%B0%E6%8C%89%E9%92%AE.png)按钮。
当enum参数选择“允许连接”时，页面展示参数（A,B,C,switch,D），参数的关联效果如图7所示。图7  参数联动预览 
当enum参数选择“禁止连接”时，页面展示参数（list,E,F,G,H），参数的关联效果如图8所示。图8  参数联动预览 
参数关联设置成功，单击[]images/1641369818987.png)按钮，打开调试窗口，参数的关联效果与预览页面相同。
当enum参数选择“允许连接”时，参数的关联效果如图9所示。图9  参数联动展示 
当enum参数选择“禁止连接”时，参数的关联效果如图10所示。图10  参数联动展示 
OSE中运行应用、新建任务以及修改任务页面，参数关联的展示效果与调试调试页面相同。
####### 参数值关联的设置 
在参数页面新建多个参数，新建参数的具体操作可参见“[脚本参数设置指南](1615800298263.html)”。
为参数添加参数值关联的设置，单击设置联动参数按钮，在参数关联页面，单击添加条件链接，在参数下拉框中选择参数（只支持枚举类型的参数，如：switch、enum、list类型的参数），单击[]images/%E5%8F%82%E6%95%B0%E5%80%BC%E5%85%B3%E8%81%94.png)按钮，设置参数值关联，如[图11](1641366981673.html#zd08bf07099b94a34819005a25976fc70__c8c2c0a9-0993-479b-81db-a83501a06d9f)所示。
图11  设置参数值联动
[]images/%E5%8F%82%E6%95%B0%E5%80%BC%E5%85%B3%E8%81%941.png)
如果需要继续添加关联参数信息，可重复单击添加条件链接，用户也可在设置完参数值关联的基础上，继续设置参数关联或参数值关联，目前最多提供三层参数关联的效果。如[图12](1641366981673.html#zd08bf07099b94a34819005a25976fc70__e3cb69aa-d6ee-4a79-bb36-fc632719bef4)所示。
图12  三层参数关联
[]images/%E4%B8%89%E5%B1%82%E5%85%B3%E8%81%94.png)
单击预览页面的[]images/1641370436660.png)按钮。
当enum参数选择“允许连接”时，list参数仅展示状态值“建链”，参数的关联效果如图13所示。图13  参数值联动预览 
当enum参数选择“禁止连接”时，list参数仅展示状态值“断链”，参数的关联效果如图14所示。图14  参数值联动预览 
参数值关联设置成功，单击[]images/1641370770439.png)按钮，打开调试窗口，参数的关联效果与预览页面相同。
当enum参数选择“允许连接”时，参数的关联效果如图15所示。图15  参数值联动展示 
当enum参数选择“禁止连接”时，参数的关联效果如图16所示。图16  参数值联动展示 
OSE中运行应用、新建任务以及修改任务页面，参数值关联的展示效果与调试调试页面相同。
###### 脚本应用开发快捷键 
####### 功能介绍 
为了提高开发人员编写代码的效率，脚本编辑器新增快捷键和语法提示功能，放便用户使用。 
####### 快捷键 
脚本编辑器提供如下快捷键的使用，具体功能参见[表1](%E4%B8%AD%E6%96%87%E5%89%8D%E8%A8%80-20161102%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#Qy-0440B6F3__fee14863-6c5c-4184-a70d-5ee856e143d5)。
分类|快捷键|功能说明
---|---|---
通用快捷键|F1|命令输入框
Ctrl + S|通用快捷键|保存文件
Ctrl + Shift + S|通用快捷键|另存为文件
F4|通用快捷键|设置
Ctrl + `|通用快捷键|打开 / 关闭控制台
F7|通用快捷键|语法检查
Ctrl + F8|通用快捷键|调试
F9|通用快捷键|终止
F10|通用快捷键|发布
文本编辑|Ctrl + C|拷贝。注：若选中文本，则复制文本；若光标停留在某一行，则复制该行。
Ctrl + X|文本编辑|剪切。注：若选中文本，则剪切文本；若光标停留在某一行，则剪切该行。
Ctrl + V|文本编辑|粘贴
Ctrl + Z|文本编辑|撤销
Ctrl + Shift + Z|文本编辑|恢复
Alt + ↑|文本编辑|上移一行
Alt + ↓|文本编辑|下移一行
Ctrl + Shift + K|文本编辑|删除一行
Ctrl + Enter|文本编辑|后面插入一行
Ctrl + Shift + Enter|文本编辑|前面插入一行
Ctrl + Shift + \|文本编辑|跳转到匹配括号
Ctrl + ] 或 tab|文本编辑|增加缩进
Ctrl + [ 或 shift + tab|文本编辑|减少缩进
Home|文本编辑|跳到一行的开始
End|文本编辑|跳到一行的结束
Ctrl + Home|文本编辑|跳到文件的开始
Ctrl + End|文本编辑|跳到文件的结束
Ctrl + ↑|文本编辑|向上滚动一行
Ctrl + ↓|文本编辑|向下滚动一行
Alt + PgUp|文本编辑|向上滚动一页
Alt + PgDn|文本编辑|向下滚动一页
Ctrl + Shift + [|文本编辑|折叠区域
Ctrl + Shift + ]|文本编辑|展开区域
Ctrl + K Ctrl + C|文本编辑|添加行注释
Ctrl + K Ctrl + U|文本编辑|删除行注释
Ctrl + K Ctrl + F|文本编辑|选中文本，支持脚本的格式化处理
Shift + Alt + F|文本编辑|脚本格式化
Ctrl + /|文本编辑|行注释
Ctrl + Shift + A|文本编辑|块注释
搜索与替换|Ctrl + F|搜索
Ctrl + H|搜索与替换|替换
F3|搜索与替换|查找下一个字符
Shift + F3|搜索与替换|查找前一个字符
Alt + Enter|搜索与替换|选中搜索框中所有匹配的词
光标与选择|Shift + Alt + ↑|之前插入光标
Shift + Alt + ↓|光标与选择|之后插入光标
Ctrl + U|光标与选择|撤销最后一次光标操作
Shift + Alt + I|光标与选择|插入光标到选中的每一行之后
Ctrl + L|光标与选择|选中当前行
Ctrl + Shift + L|光标与选择|选中当前选择的所有匹配项
Ctrl + F2|光标与选择|选中当前单词的所有匹配项
Shift + Alt + →|光标与选择|扩大选择区域
Shift + Alt + ←|光标与选择|缩减选择区域
导航|Ctrl + G|跳转到某行
###### 工作流应用开发指南 
####### 1 工作流应用创建 
工作流应用文件目录结构及文件内容定义
|--.config 

|--project.yml 

|--parameter.yml 
|--flow_define.json 
如图[图1](1614858738697.html#z2264932f722644238094870f37b4d9d9__c695329e-27a8-4254-a5a0-607c391fac81)：
图1  图示1
[]images/1(%E9%87%8D%E7%94%A81).png)
目录文件详细说明： 
Application|文件名|说明|注意事项
---|---|---|---
工作流|.config|应用配置文件目录，包含project.yml、parameter.yml和i18n.json三个文件|windows环境创建.config文件需要通过命令行：md .config即可创建
project.yml|工作流|工程应用配置文件，定义应用名称，描述等信息|-
parameter.yml|工作流|工程应用参数配置文件，定义参数字段，类型，描述等信息|-
i18n.json|工作流|工程应用国际化配置文件，定义应用名称，参数名称，描述等国际化信息|-
flow_define.json|工作流|工作流配置文件，定义工作流执行逻辑|-
project.yml 工程应用配置文件
`name: work_flow_package_with_important
description: work_flow_package_with_important
importantOperation:
  isImportant: true
  prompt: 该脚本包含危险操作` 
project.yml参数说明 
字段|说明|约束|注意事项
---|---|---|---
name|工作流应用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|必须与flow_define.json中的name字段保持一致
description|工作流应用描述|10到1000个字符，不能包含非法字符：< ' " & / >|-
importantOperation|重要操作配置字段|-|-
importantOperation参数说明 
字段|说明|约束
---|---|---
isImportant|是否展示重要操作提示信息|true或false
prompt|重要操作的提示信息|10到1000个字符，不能包含非法字符：< ' " & / >
parameter.yml 工程应用参数配置文件
`- name: path
  type: String
  value: test
  constraints: ""
  optional: false
  description: 输入清理目标文件的路径
- name: value
  type: Number
  value: 3
  constraints: ""
  optional: false
  description: 循环次数` 
parameter.yml参数说明 
字段|说明|约束
---|---|---
name|参数名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"
type|参数类型|只允许输入：String,Number,Password,Switch,File,EMS,OMM,NE,DateRange,RestDynamic,Enum,List,Ip,Date,Boolean
value|默认值|不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"
constraints|约束|正则表达式
optional|是否选填|只允许输入：true或false
description|参数描述|10到1000个字符，不能包含非法字符：< ' " & / >
i18n.json 工程应用国际化配置文件（选填）
`{
    "en": {
        "displayName": "Internationalization Workflow",
        "description": "Internationalization test of Workflow",
        "parameters": {
            "path": {
                "displayName": "path 英文",
                "description": "path 英文 描述"
            }
        }
    },
    "zh": {
        "displayName": "国际化工作流",
        "description": "关于工作流的国际化测试",
        "parameters": {
            "path": {
                "displayName": "path 中文",
                "description": "path 中文 描述"
            }
        }
    }
}` 
i18n.json参数说明 
字段|说明|约束
---|---|---
displayName|应用国际化名称|0到30个字符
description|应用国际化描述|0到1000个字符
parameters-displayName|参数国际化名称|0到30个字符
parameters-description|参数国际化描述|0到1000个字符
flow_define.json 工作流定义文件
`{
  "name": "workflow_demo",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf",
      "inputParameters": {
        "applicationName": "script_for_wf",
        "parameters": {
          "path": "${workflow.input.path}"
        }
      },
      "type": "SIMPLE"
    }
  ],
  "inputParameters": [
    "path"
  ],
  "outputParameters": {
  }
}` 
flow_define.json参数说明 
字段|说明|约束|注意事项
---|---|---|---
name|工作流名称|非空，不允许输入算数运算符|必填，必须与project.yml文件中的name.value值相同
tasks|工作流任务|非空|
inputParameters|工作流入参|-|入参字段必须与parameter.yml中的name字段值保持一致
outputParameters|工作流输出|-|如果不填写，默认为最后一个task输出结果。例子："neId": "${script1.output.neId}"
tasks参数说明 
字段|说明|约束|注意事项
---|---|---|---
name|任务名称|非空，不允许输入算数运算符|必填，如果任务是脚本应用，该值必须为：ose_script_task
taskReferenceName|任务引用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|必填，如果是脚本应用，填写脚本名称
inputParameters|任务入参|-|key-value,也可以是json格式，例如："path": "${workflow.input.path}"
applicationName|脚本应用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|脚本应用必填，且必须为脚本名称，建议与taskReferenceName值保持一致
inputParameters参数说明 
字段|说明|约束|注意事项
---|---|---|---
path|脚本入参示例|-|json-path格式，例如：${workflow.input.path}意思是取workflow定义入参中的path值。
parameters|脚本入参|-|-
applicationName|脚本应用名称|1到30个字符，不允许包含特殊字符和空格，只支持中文、英文字母、数字、"_"|脚本应用必填，且必须为脚本名称，建议与taskReferenceName值保持一致
####### 2 生成工作流应用 
将文件目录压缩成zip包，并修改后缀名为.owf即可在应用管理中导入 
图2  图示2
[]images/2.png)
###### 工作流应用开发示例 
####### 顺序任务 
工作流支持脚本应用类型的任务，适用于串行脚本任务执行，效果图如[图1](1614858660016.html#zdb864575ad7c4d07a7e7ee46ba0e00f3__d61fd212-e662-4a07-a787-a8bc8ee8881e)所示。
脚本应用script_for_wf和script_for_wf1按序执行。 
图1  分支任务
[]images/1615000685015.png)
flow_define.json文件示例如下： 
`{
  "name": "workflow_demo",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf",
      "inputParameters": {
        "applicationName": "script_for_wf",
        "parameters": {
          "path": "${workflow.input.path}"
        }
      },
      "type": "SIMPLE"
    },
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf1",
      "inputParameters": {
        "applicationName": "script_for_wf1",
        "parameters": {
          "count": "${script_for_wf.output.result.count}"
        }
      },
      "type": "SIMPLE"
    }
  ],
  "inputParameters": [
    "path"
  ],
  "outputParameters": {
	"result_count1": "${script_for_wf.output.result.count}",
	"result_count2": "${script_for_wf1.output.result.count}"
  }
}` 
说明： 
脚本应用script_for_wf入参为工作流应用输入参数“path”。 
脚本应用script_for_wf1入参为script_for_wf脚本的输出参数count的值，script_for_wf输出json格式，例如：{'count': count}。 
工作流输出结果为script_for_wf，script_for_wf1脚本应用输出的counter值。 
####### 分支任务 
######## 分支任务 
工作流支持分支任务。可以按照不同的策略，执行不同场景的任务。效果图如[图1](1614860833121.html#z48cd331039aa409787621e5ca996876d__740f8898-c397-4f20-8ef9-b3858fe90ac8)所示：
图1  分支任务
[]images/1615000609648.png)
flow_define.json示例如下： 
`{
  "name": "wf_decision_2",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf1",
      "inputParameters": {
        "applicationName": "script_for_wf1",
        "parameters": {
          "path": "${workflow.input.path}"
        }
      },
      "type": "SIMPLE"
    },
	{
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf2",
      "inputParameters": {
        "applicationName": "script_for_wf2",
        "parameters": {
        },
		"case_count": "${script_for_wf1.output.result.count}"
      },
      "type": "DECISION",
      "caseValueParam": "case_count",
      "decisionCases": {
		"0": [
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf3",
				  "inputParameters": {
					"applicationName": "script_for_wf3",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				},
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf4",
				  "inputParameters": {
					"applicationName": "script_for_wf4",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				}
		],
		"1": [
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf5",
				  "inputParameters": {
					"applicationName": "script_for_wf5",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				},
				{
				  "name": "ose_script_task",
				  "taskReferenceName": "script_for_wf6",
				  "inputParameters": {
					"applicationName": "script_for_wf6",
					"parameters": {}
				  },
				  "type": "SIMPLE"
				}
		]
	  },
      "defaultCase": [
		{
		  "name": "ose_script_task",
		  "taskReferenceName": "script_for_wf7",
		  "inputParameters": {
			"applicationName": "script_for_wf7",
			"parameters": {}
		  },
		  "type": "SIMPLE"
		}
	  ]
    }
  ],
  "inputParameters": [
    "path"
  ]
}` 
分支任务关键点说明： 
1）分支任务类型type字段必须为DECISION。 
2）分支任务决策字段：caseValueParam，该字段值需要在任务的inputParameters中定义。 
3）分支场景：decisionCases字段，当caseValueParam字段不同的值，执行不同的任务列表. 
####### 循环任务 
######## 循环任务 
工作流支持循环类型的任务，先执行一次循环任务，根据循环条件，轮询任务列表，执行效果图如下[图1](1656296917871iKbThC.html#zea408b8c60764b088a2581430305c28d__faa2be87-cc38-4f0c-8a87-1033017f8bfb)。图1  循环任务效果图
[]images/2d8fb48fbd6e4b648aa56bebd35f5bba.png)
flow_define.json定义示例如下： 
`{
  "name": "work_flow_loop",
  "tasks": [
    {
      "name": "ose_script_task",
      "taskReferenceName": "script_for_wf1",
      "inputParameters": {
        "applicationName": "script_for_wf1",
        "parameters": {
          "path": "${workflow.input.path}",
		  "time_value": "${workflow.input.value}"
        }
      },
      "type": "SIMPLE"
    },
	{
      "name": "Loop Task",
      "taskReferenceName": "LoopTask",
      "inputParameters": {
		"time_value": "${workflow.input.value}"
      },
      "type": "DO_WHILE",
      "startDelay": 3,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "defaultExclusiveJoinTask": [],
      "asyncComplete": false,
      "loopCondition": "if ($.LoopTask['iteration'] < $.time_value) { true; } else { false; }",
      "loopOver": [
		{
			"name": "ose_script_task",
            "taskReferenceName": "workflow_loop1",
            "inputParameters": {
				"applicationName": "workflow_loop1",
				"parameters": {
					"path": "${workflow.input.path}",
					"time_value": "${workflow.input.value}"
				}
            },
            "type": "SIMPLE"
		},
		{
			"name": "ose_script_task",
            "taskReferenceName": "workflow_loop2",
            "inputParameters": {
				"applicationName": "workflow_loop2",
				"parameters": {
					"path": "${workflow.input.path}"
				}
            },
            "type": "SIMPLE"
		},
		{
			"name": "ose_script_task",
            "taskReferenceName": "workflow_loop3",
            "inputParameters": {
				"applicationName": "workflow_loop3",
				"parameters": {
					"path": "${workflow.input.path}"
				}
            },
            "type": "SIMPLE"
		}
	  ]
    }
  ],
  "inputParameters": [
    "path","value"
  ],
  "outputParameters": {
  }
}` 
说明： 
loopCondition字段只为true表示执行循环体，false跳出循环。语句为javascript语法。 
例子中："loopCondition": "if ($.LoopTask['iteration'] < $.time_value) { true; } else { false; }",解释如下： 
1）$.LoopTask['iteration'] 表示循环开始下标，初始值为1，$.time_value在inputParameters中定义为工作流输入参数。 
2）loopCondition判断条件中也可以使用循环任务结果作为条件，例如："loopCondition": "if (($.LoopTask['iteration'] < $.time_value) || $.workflow_loop1.output.result.count > 2) { true; } else { false; }"，表示当迭代次数小于输入参数 或 workflow_loop1任务的输出结果大于2时，执行循环，否则跳出循环。 
#### 脚本执行引擎操作 
Script Execution Engine Operations 
##### 概述 
脚本执行引擎简称OSE（Open Script Execution Engine），用于执行由OSD制作的脚本文件。OSD是一款基于Python脚本的在线脚本编辑器，用户可以用该编辑器编写脚本，实现脚本定制。例如，可以编写批量修改配置参数的脚本、生成数据报表文件的脚本、定时清理文件目录的脚本等。用户还可以存储在调试过程中的脚本程序，方便外场测试。
在OSE中，由OSD制作的脚本文件统称为“应用”。应用按照来源分为以下3类。
随软件版本发布的内置默认应用。 
通过在线OSD脚本编辑器生成的应用。 
用户导入的通过校验的应用。 
##### 功能实现 
脚本执行引擎提供以下功能： 
增加、删除、更新、查看应用，并支持应用导出，可以多环境共用。 
单次运行应用或创建应用的定时任务。 
查询应用的执行结果。 
##### 打开脚本执行引擎主页面 
登录云管统一平台后，单击导航菜单，选择更多→应用中心→脚本执行引擎
，默认打开脚本执行引擎页面的首页，如[图1](1641432449412.html#z4416164b36854c6b821ee923cc7980d9__89584271-582d-4378-8cc5-1dacb3ceb4b8)所示。脚本执行引擎主页面展示应用总数、任务总数、日均执行数的统计信息和用户最近7天执行的Top应用。
图1  脚本执行引擎主页面
[]images/1641432666535.png)功能导航树 
操作区 
##### 管理应用 
application-management 
###### 摘要 
应用管理页面提供导入应用的功能。应用导入后，可单次执行应用，也可创建应用的定时任务。另外，用户可对应用进行更新、删除、导出、添加标签等操作。
###### 相关信息 
导入OSE的应用按照类型可分为脚本应用、采集应用、UniCare应用、工作流应用。 
脚本应用：为*.oap文件，支持导入及导出操作。脚本应用是按照实际需求定制的脚本，包括批量修改配置参数的脚本、生成数据报表文件的脚本、定时清理文件目录的脚本等。 
采集应用：为*.oap文件，支持导入及导出操作。采集应用用于采集数据信息，包括基站故障时的数据信息、远程监控场景需要采集的数据信息等。 
Unicare应用：为*.eoap文件，导入前需输入密码，不支持导出操作。 
工作流应用：为*.owf文件，支持导入及导出操作。工作流应用由编排好的多个应用组成，该应用定义了多个应用之间的执行规则，用于满足复杂场景下的需求。 
###### 步骤 
在脚本执行引擎主页面，单击功能导航树中的应用管理节点，进入应用管理页面，如[图1](1537150435526.html#topic1__6240a160-8d6b-4094-8817-e67d3cb73b69)所示。
图1  应用管理页面
[]images/%E5%BA%94%E7%94%A8%E7%AE%A1%E7%90%86.png)
单击导入，弹出打开对话框。
选择需要导入的应用，单击打开，应用导入完成。
 说明： 
支持导入的文件类型有*.oap文件、*.eoap文件及*.owf文件。
支持导入的文件大小限制为20 M。 
应用导入成功后，应用卡片会带有“新上线”标识，该标识一天后自动消失。 
###### 相关任务 
导入应用后，可执行以下操作。 
如果...|那么...
---|---
单次执行应用|在应用管理页面，选择目标应用，单击按钮，打开运行应用页面。输入应用参数，单击运行。应用执行完成后，在本页面可查看应用的执行结果及下载应用的执行日志。对于工作流应用，在本页面可查看工作流图和日志，便于用户了解应用的执行过程及执行状态。
创建应用的定时任务|在应用管理页面，选择目标应用，单击按钮，进入新建任务页面。具体操作参见管理任务。
查看某个应用创建了哪些定时任务|在应用管理页面，选择目标应用，单击，选择下拉框中的查看关联任务按钮，页面跳转至任务管理页面，显示该应用的关联任务。
新增标签|在应用管理页面上方的标签栏，单击+可添加新标签，最大可输入10个字符，不支持输入特殊字符。每个用户只能看到自己创建的标签。单击标签后，页面会显示所有被标记的应用，方便用户快速查找自己需要的应用。
删除标签|在应用管理页面上方的标签栏，选中不需要的标签，单击X删除。日常运维、数据导出及数据清理为内置标签，不允许删除。
为应用标记标签|在应用管理页面，选择目标应用，单击，选择下拉框中的标签按钮，弹出标记对话框，对话框中显示标签栏中的标签。选择目标标签，单击确认。
查看应用详情|在应用管理页面，选择目标应用，单击，打开应用详情对话框。页面显示该应用的基本描述和输入参数信息。若该应用含说明文档和输出样例，可单击说明文档和输出样例按钮进行下载。
更新应用|在应用管理页面，选择目标应用，单击，选择下拉框中的更新按钮，打开更新对话框。选择要导入的新应用，单击确认。应用更新成功后，应用卡片会带有“已更新”标识，该标识一天后自动消失。内置应用不支持更新操作。内置应用的图标左下方有锁型图案。
删除应用|在应用管理页面，选择目标应用，单击，选择下拉框中的删除按钮，打开删除对话框。单击确定。内置应用不支持删除操作。
导出应用|在应用管理页面，选择目标应用，单击，选择下拉框中的导出按钮，导出该应用到本地。UniCare应用不支持导出。
查看执行记录|在应用管理页面，选择目标应用，单击，选择下拉框中的查看执行记录按钮，页面跳转至历史查询页面，显示该应用的执行记录。
##### 管理任务 
task-management 
###### 摘要 
任务管理页面可以进行任务的创建、激活、挂起、修改、删除和日志下载。
通过创建任务，可实现应用的周期性调度。任务创建成功后，默认状态为已激活。任务过期后，状态会显示为失效。 
下面以"oap_es_clean"应用为例介绍如何创建任务。 
###### 前提 
在创建任务前已确定任务名称，便于回溯。 
已确定任务的执行周期。 
###### 步骤 
在脚本执行引擎主页面单击功能导航树中的任务管理节点，进入任务管理页面，如[图1](1561096848633.html#z26ed6b48840645fe800a1b10e9f2ff46__a849b547-4250-4818-852a-062a72b46ed7)所示。
图1  任务管理页面
[]images/%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2.png)
在任务管理页面，单击新建任务按钮，进入新建任务页面。如[图2](1561096848633.html#z26ed6b48840645fe800a1b10e9f2ff46__f0ffd282-01a1-46be-8b97-ae368326e811)所示。
图2  新建任务页面
[]images/%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1.png)
在新建任务页面，左侧选择应用名称"oap_es_clean"，右侧出现该任务的参数信息填写页面，如[图3](1561096848633.html#z26ed6b48840645fe800a1b10e9f2ff46__43c2e22c-82af-4d5a-ada1-98fa7c2bd68a)所示。
图3  参数信息填写页面
[]images/1568807569819.PNG)
设置参数信息，单击新建按钮，完成任务的创建操作。
 说明： 
鼠标指针放置到[]images/1589181813115.PNG)位置会自动浮现出对应参数的描述，可根据该描述填写应用参数信息。
###### 相关任务 
创建任务完成后，可执行以下操作。 
如果...|那么...
---|---
激活任务|在任务管理页面单击操作列的激活按钮，启动已挂起的任务。
挂起任务|在任务管理页面单击操作列的挂起按钮，停止正在运行中的任务。
修改任务|在任务管理页面，在操作列的更多下拉菜单中选择修改，修改已挂起的任务。
删除任务|在任务管理页面单击操作列的删除按钮，删除已挂起的任务。
快速查询任务的执行结果|在任务管理页面，选择目标任务，在操作列的更多下拉菜单中选择执行记录，跳转到该任务的历史查询页面。用户可下载该任务的日志及执行过程中生成的数据信息，具体操作参见“查询结果”。
##### 查询结果 
result-query 
###### 摘要 
在历史查询页面，可以查询应用的执行结果，下载应用执行过程中生成的日志信息及数据信息。若应用执行失败，可结合应用的执行日志与脚本定位具体问题。
###### 相关信息 
脚本语法错误，脚本依赖的接口调用失败或依赖的APP异常可能导致应用执行失败，可结合应用的执行日志与脚本定位具体问题。 
脚本逻辑复杂，数据量大可能导致应用长期处于执行中，需通过脚本定位具体问题。 
###### 步骤 
在脚本执行引擎主页面单击功能导航树中的历史查询节点，进入历史查询页面，如[图1](1595387922966.html#z2f12473b07024e25ae5b301011f2219c__1d3e6b84-beae-4603-a43a-cb56ecca305f)所示。页面显示应用的执行结果信息。
图1  历史查询页面
[]images/%E5%8E%86%E5%8F%B2%E6%9F%A5%E8%AF%A2.png)
（可选）单击高级查询按钮，页面展示条件查询框，如[图2](1595387922966.html#z2f12473b07024e25ae5b301011f2219c__dba2c489-6ee0-4d38-a0af-9d2fa3790d05)所示。
图2  高级查询条件框
[]images/%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6.png)
用户可根据需要选择查询条件 ，单击查询按钮进行高级查询。（若用户未选择高级查询条件，搜索结果以默认值为全部的搜索条件进行查询。）高级查询条件设置参见[表1](1595387922966.html#z2f12473b07024e25ae5b301011f2219c__fd4679dc-51fe-48f9-b0ad-af084e3e4736)。
查询条件|说明
---|---
应用类型|选择后按选择的应用类型查询。
执行人|选择后按选择的执行人查询，可查询某一用户的执行结果。
执行结果|选择后按应用的执行结果查询。
任务类型|选择后按应用的执行方式查询。
应用名称|选择后按应用名称查询某一应用的执行结果。
定时任务名称|选择后按任务名称查询某一任务的执行结果。当任务类型选择单次时，定时任务名称下拉列表框置灰。
执行时间|按应用的执行时间统计。统计结果可以按照全部、近1天、近7天、近30天和自定义进行分类查看。
###### 相关任务 
查询结果完成后，可执行以下操作。 
如果...|那么...
---|---
下载应用的执行日志|在历史查询页面，单击该应用对应操作列的下载日志按钮。
下载应用在执行过程中生成的数据信息|在历史查询页面，单击该应用对应操作列的下载附件按钮。若该应用在执行过程中不生成数据信息，则下载附件按钮置灰。
##### 管理资源 
director-resource-manage 
###### 摘要 
资源管理用于管理执行的IP，用户名和密码。
当远程执行的目标是TECS Director时，IP应该为TECS Director的浮动IP。需要用户手工添加。 
当执行的目标是TECS OpenStack云环境，IP为TECS OpenStack管理IP。目前作业自动化已经自动添加了TECS OpenStack IP，但需要用户手工指定用户名和密码。 
当远程执行的目标是容器云时，IP应该为容器云的浮动IP。需要用户手工添加。 
当远程执行的目标是公有云时，IP应该为公有云IP。需要用户手工添加。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择更多→应用中心→脚本执行引擎
，进入脚本执行引擎首页。在左侧的导航树单击资源管理，打开资源管理页面，如[图1](1598239444612.html#zc9b036d90e4c4057a421c7219736f8a4__54978235-e23b-4d54-9cf0-7f7d9d55877e)所示。
图1  资源管理页面
[]images/snap140.png)
单击添加节点按钮，如[图2](1598239444612.html#zc9b036d90e4c4057a421c7219736f8a4__bced1d16-2030-48ea-bf8f-c8c585f09d88)所示。
图2  添加节点对话框
[]images/snap141.png)
根据实际情况配置节点参数，单击连接测试按钮。
 说明： 
添加标签后，设置工作流、操作的执行节点时，可以快速定位、搜索相关节点。 
如果连接测试通过，[图2](1598239444612.html#zc9b036d90e4c4057a421c7219736f8a4__bced1d16-2030-48ea-bf8f-c8c585f09d88)中保存按钮由灰色变为蓝色。
如果连接测试不通过，则无法保存。失败的可能原因，包括SSH用户名、SSH密码错误等。
单击保存按钮。
 说明： 
保存后，节点信息可以在资源管理页面中查看到。
名称表示IP对应的主机名。
连接状态显示为正常才允许作为工作流、操作的执行节点。
###### 相关操作 
添加节点完成后，可以对节点进行以下操作。 
如果...|那么...|说明
---|---|---
刷新节点|单击刷新节点按钮，更新节点状态。|添加节点后，如果连接状态不是正常，可单击刷新节点按钮，更新节点状态。
编辑节点|在资源管理页面，单击待编辑节点操作列的编辑按钮。在弹出的编辑节点对话框中，编辑节点信息。单击连接测试按钮。单击保存按钮。|添加节点后，如果连接状态不是正常，刷新节点后仍然显示不是正常连接状态，需要对节点信息进行编辑修改。
删除节点|在资源管理页面，勾选中待删除的节点。单击删除按钮。在删除提示框中，单击删除按钮。|删除手工添加的节点（比如TECS Dirctor）后，需要重新编辑任务中的执行节点信息，否则无法执行。删除TECS OpenStack浮动IP后，系统会再次添加。
##### 管理插件 
ngict-pluginmng 
###### 摘要 
本节介绍扩展插件的导入方法。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择更多→应用中心→脚本执行引擎
，进入脚本执行引擎首页。在左侧的导航树单击插件管理，打开插件管理页面，如[图1](1641547183311.html#z5a4f8ce00bd04f22a299b6148bdd5e1b__1a1763c4-024a-43e3-9eb8-f57301afb526)所示。
图1  插件管理页面
[]images/1648694123670.png)
单击导入插件按钮，弹出导入插件对话框，如[图2](1641547183311.html#z5a4f8ce00bd04f22a299b6148bdd5e1b__5d132a44-2c37-47c2-b394-e46e306e0fb1)所示。
图2  导入插件对话框
[]images/1648694124023.png)
单击选择按钮，选择要导入的文件，等待页面显示导入成功，如[图3](1641547183311.html#z5a4f8ce00bd04f22a299b6148bdd5e1b__e5009410-ed53-418f-8114-1fb62e6f10dd)所示。
图3  导入成功
[]images/1648694123944.png)
单击关闭按钮，可在插件管理页面查看已导入的插件。
#### 智能运维分析 
Intelligent O&M Analysis 
##### 查看故障分析 
director-intelligentAnalysis-faultAnalysis 
###### 摘要 
故障分析功能实现对计算节点的故障和虚机的故障进行相关关联分析，帮助运维人员迅速定位故障。 
###### 前提 
已经获得统一云管admin管理员账号或者具有智能运维分析权限账号的用户名和密码。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→故障分析
，打开故障分析列表页面，如[图1](1610621696695.html#z4d71be9c5ae9464baddd56fea6fff9cc__967779b7-5bfc-432c-9062-9b88cc87def4)所示。
图1  故障分析列表页面
[]images/snap668.png)
选择查询时间范围，单击查询按钮。
单击告警名称为计算节点服务不可用的告警，查看计算节点服务不可用的相关信息，如[图2](1610621696695.html#z4d71be9c5ae9464baddd56fea6fff9cc__b2472e0b-9e48-4344-9ef4-8e0d7869fdee)所示。
图2  计算节点服务不可用的相关信息
[]images/snap669.png)
单击告警名称为虚机状态error的告警，查看虚机error可能的原因，如[图3](1610621696695.html#z4d71be9c5ae9464baddd56fea6fff9cc__b0926017-f287-4448-80bb-cc516a1949f8)所示。
图3  查看虚机error可能的原因
[]images/snap670.png)
单击告警名称为虚机读写磁盘时延高的告警，可以看到该告警的故障概览和分析依据，如[图4](1610621696695.html#z4d71be9c5ae9464baddd56fea6fff9cc__c2fc199a-f570-49a1-abc2-1235d432437f)所示。
图4  详细信息
[]images/1619577555756.png)
##### 新建容量预测 
director-intelligentAnalysis-capacityPrediction 
###### 摘要 
容量预测功能是对云环境资源进行有效预测及时提示云环境和VDC的CPU和内存等物理资源使用趋势，提示相关风险。
###### 前提 
已经获得统一云管admin管理员账号的用户名和密码。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→容量预测
，打开历史预测列表页面，如[图1](1610622554140.html#z0941be24c9c64d23a2267a18ed65f5b0__aff4237c-dc3a-4973-a20c-0db33c0a07f7)所示。
图1  历史预测列表页面
[]images/snap671.png)
单击新建预测按钮，打开新建预测对话框，如[图2](1610622554140.html#z0941be24c9c64d23a2267a18ed65f5b0__ad0b6824-7df6-468c-b0ad-a9005eec00be)所示。
图2  新建预测对话框
[]images/snap672.png)
选择需要预测的对象类型、对象名称和预测项。 
单击确认按钮，完成新建预测。系统会根据历史数据计算出当天往后三个月的预测数据，以折线图的方式展示预测结果，如[图3](1610622554140.html#z0941be24c9c64d23a2267a18ed65f5b0__9f486516-00d6-4a98-9a26-fd43a28d1b97)所示。
图3  预测完成
[]images/snap673.png)
（可选）单击填写用户反馈按钮，弹出用户反馈对话框，选择预测是否正确，单击确认按钮，反馈预测是否正确。
图4  用户反馈
[]images/1625469197164.png)
###### 相关任务 
查看历史预测：历史预测列表，按照对象类型分别展示，历史预测按照“对象名称-预测项-日期”的规则命名。可以通过删除键清除不需要的历史预测项。可以在搜索框输入关键字进行模糊匹配，找到需要查看的项后，单击名称，即可展示预测结果。 
重新预测：若需要再次针对该对象进行预测，单击预测结果上方的重新预测按钮。系统会重新读取数据，并计算预测结果。 
##### 配置异常检测 
###### 摘要 
异常检测用于分析异常指标的设备信息，本节介绍如何配置异常检测。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→指标分析→配置
，打开配置页面，如[图1](1656315639472.html#z642af0d7bc0143f480f4def6a75fd8cd__4bd47857-c28d-4fda-9607-38b89610d66e)所示。
图1  配置页面
[]images/1656315733312.png)
单击修改按钮，页面进入修改模式，如[图2](1656315639472.html#z642af0d7bc0143f480f4def6a75fd8cd__62bd44eb-96c5-4a1a-8150-69c75a7c0a27)所示。
图2  修改配置
[]images/1656315789953.png)
打开功能开关和是否上报告警，并在下方选择左侧设备添加到右侧列表中，单击确认按钮。
在左侧导航树选择指标分析→异常检测
，打开异常检测页面，在页面中可以查看异常设备的信息，如[图3](1656315639472.html#z642af0d7bc0143f480f4def6a75fd8cd__37552674-4e46-4e27-b78d-57b705c9bac8)所示。
图3  异常检测页面
[]images/1656315911368.png)
##### 查看能耗分析 
###### 摘要 
介绍如何查询对象的能耗情况。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→节能降耗
，默认打开能耗分析页面，如[图1](1656315130145.html#zae51edb8ce2c49f0ba599c88058504c3__9e2ade57-44dd-4dae-b14d-cdf664842de1)所示。
图1  能耗分析页面
[]images/1656315237525.png)
选择对象类型、对象、能耗、时间范围和时间粒度，单击查询按钮，查看能耗情况，如[图2](1656315130145.html#zae51edb8ce2c49f0ba599c88058504c3__a3ef261b-6cd7-46cb-8760-aba8a8b1d0ae)所示。
图2  查询能耗
[]images/1656315319128.png)
##### 新建节能任务 
###### 摘要 
介绍如何为服务器设置节能任务。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→节能降耗→节能任务
，打开节能任务页面，如[图1](1656315326518.html#z1cb48d52f7c14e87b55546bae51a9b18__3ae880ca-5b18-4f47-8e36-6873959bb976)所示。
图1  节能任务页面
[]images/1656315433479.png)
单击新建任务按钮，打开新建任务页面，如[图2](1656315326518.html#z1cb48d52f7c14e87b55546bae51a9b18__f27322e3-3c5c-4512-be9c-22f6468ff860)所示。
图2  新建任务页面
[]images/1656315470412.png)
输入名称，选择任务类型并设置执行策略和执行的对象，单击创建按钮。
##### 新建云环境评分 
###### 摘要 
介绍如何进行云环境评分。 
###### 步骤 
登录云管统一平台后，单击导航菜单，选择运维→运维分析→云环境评分
，打开评分模板页面，如[图1](1672107714658.html#z10046d29eaac41cebceded2494c392a9__ecf9a22d-351a-4c91-96c6-66ff801095b0)所示。
图1  评分模板页面
[]images/db357ed17b344a9eaa70667fe1ebc27c.png)
单击系统内置模板，如[图2](1672107714658.html#z10046d29eaac41cebceded2494c392a9__ed76d167-4844-4d35-a2f5-fa70636a2634)所示。
图2  系统内置模板页面
[]images/5da048da2ea84340b01e155e8359f43f.png)
单击编辑按钮，根据需要进行选择。
单击确定按钮，完成系统内置模板的编辑。
单击评分概览，打开评分概览页面，如[图3](1672107714658.html#z10046d29eaac41cebceded2494c392a9__42ba5655-1b26-4c9c-a940-813e5936f827)所示。
图3  评分概览页面
[]images/3.png)
选择需要导出的模板，单击导出按钮，可把评分结果导出为xls文件。
### 租户操作指南 
#### 概述 
TECS_Director_Tenant_Operation_Guide 
TECS Director作为云管理平台，可以部署在MEC的编排器中。TECS Director支持以IaaS资源分发方式在MEC中部署APP，如[图1](ece6bc7413ed4c09afd645d1bbdce9ef.html#z5e6b216002b1449cb3e1495ecb15e405__ca7840b9-27a2-4bf5-b627-6952c20874c3)所示。该方式需要用户手工创建APP拓扑中的资源。
图1  以IaaS资源分发方式部署APP
[]images/%E4%BB%A5IaaS%E8%B5%84%E6%BA%90%E5%88%86%E5%8F%91%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2APP.png)
APP拓扑包含计算、存储、网络等资源，用户通过资源映射关系在TECS Director上创建对应资源，映射关系参见[表1](ece6bc7413ed4c09afd645d1bbdce9ef.html#z5e6b216002b1449cb3e1495ecb15e405__b4b2bb47-fa0e-46ac-8e28-075638f87aa3)。
APP拓扑|TECS Director映射|TECS Director操作
---|---|---
资源池|云环境|前置操作：添加数据中心添加云环境
租户|VDC|前置操作：添加主机集群创建VDC后置操作：添加组织添加组织管理员绑定组织和VDC
APP外部网络|云网络（网络属性勾选外部网络）+子网等|添加云环境网络添加云环境子网池添加VLAN池
APP内部网络|云网络+子网等|添加虚机云网络
APP中虚机镜像|镜像|上传公共镜像（可选）上传VDC镜像（可选）
APP中虚机|虚机（创建虚机过程中挂载网络、创建数据盘）|虚机规格管理（可选）添加云硬盘类型发布虚机
#### TECS 云管系统资源创建流程 
组织用户创建资源前，需要超级管理员做好资源规划。超级管理员需要了解资源池配置属性和能力，并根据项目使用情况，收集项目网络、存储、计算等资源需求，分配给组织使用。 
图1  资源创建流程
[]images/%E6%B5%81%E7%A8%8B%E5%9B%BE.png)
#### 超级管理员操作指南 
##### 资源配置管理 
###### 登录云管平台 
####### 摘要 
本节介绍如何在客户端使用Google Chrome浏览器登录TECS Director。
####### 步骤 
在Google Chrome浏览器地址栏中输入管理门户网站网址https://*.*.*.*/uportal（*应修改为现场实际TECS Director浮动IP），打开TECS Director管理门户网页。
输入用户名、密码和验证码，单击登录按钮。
 说明： 
系统预设的超级管理员账户默认登录名为admin，默认密码为Zenap_123!@#。 
用户第一次登录系统时将被要求修改密码。 
用户第一次登录系统后，需导入许可证，操作步骤参见“导入许可证”。 
###### 添加数据中心 
####### 摘要 
数据中心是为一个或多个组织安置、管理、支持那些被认为至关重要的计算、网络和存储资源的设施。 
本节描述添加数据中心的配置过程。 
####### 前提 
使用超级管理员账户登录TECS Director。
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572934755338.png)按钮，选择基础设施→数据中心
，打开数据中心页面，如[图1](10-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83.html#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83-65E75BDE__60ac6f72-93a5-4a8f-8e51-8641c9b628de)所示。
图1  数据中心页面
[]images/1604740989649.png)
单击+添加数据中心按钮，打开添加数据中心页面，如[图2](10-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83.html#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83-65E75BDE__ee11ed4c-da78-4e3a-b1c5-5a6898572262)所示。
图2  添加数据中心页面
[]images/1604741015918.png)
根据规划填写相关参数。 
 说明： 
位置为数据中心所在城市名字的全拼。 
系统默认的数据中心组为default，如需添加新的数据中心组，参见“添加DC域/VDC域”。 
单击添加按钮提交信息，等待数秒，在返回的数据中心页面显示新增的数据中心。
单击已添加的数据中心名称，打开数据中心详情页面，如[图3](10-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83.html#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83-65E75BDE__82f9acc4-9ef8-4265-a440-8ea372e12de1)所示。
图3  数据中心详情
[]images/1610783964775.png)
在数据中心详情页面，可查看该如下5个子页面，参见[表1](10-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83.html#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83-65E75BDE__20b405fc-54f9-42c8-a7fe-0e7965203d0c)。
页面名称|说明
---|---
概览|查看该DC下的资源信息、基本信息、资源统计和用户信息。
云环境|单击云环境名称，可以查看云环境的虚拟资源和物理资源详情。
容器云|查看该DC下的容器云详情。
物理环境|查看该DC下的物理环境详情，包括服务器、磁阵、网络设备等物理资源的合集。
虚拟资源|查看该DC下的虚拟资源详情。
####### 相关任务 
在数据中心详情页面，单击基本信息栏中的[]images/1563245377216.png)，可编辑数据中心的基本信息，如[图4](10-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83.html#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83-65E75BDE__66c9f298-638b-40ac-b483-2bb45d51520d)所示。
图4  编辑数据中心
[]images/1603351580667.png)
###### 添加云环境 
####### 摘要 
云环境是指能够从虚拟化的资源池中向用户或者各种应用系统按需提供计算能力、存储能力或者虚拟机服务等的数据环境。用户创建主机集群或虚机前必须先创建云环境。 
本节描述添加云环境的配置过程。 
####### 前提 
使用超级管理员账户登录TECS Director。 
已在OpenStack端创建对接用户。具体操作参见“在TECS OpenStack创建对接用户”。 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572572359743.png)按钮，选择基础设施→数据中心→云环境
，打开云环境页面，如[图1](11-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83.html#%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83-65E774CA__30615bfb-9201-44d1-abdc-8aa38a668fd4)所示。
图1  云环境页面
[]images/%E4%BA%91%E7%8E%AF%E5%A2%83%E9%A1%B5%E9%9D%A2.png)
单击+添加云环境按钮，打开添加云环境页面，如[图2](11-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83.html#%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83-65E774CA__fig_-141621-66D45C3E)所示。
图2  添加云环境页面
[]images/Snap107.png)
根据规划填写相关参数，参数说明参见[表1](11-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83.html#%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83-65E774CA__cbc39d84-9eec-42d0-8ff6-5d637ad23b97)。
参数|说明
---|---
云环境名称|根据规划填写。
物理位置|云环境所在的物理位置。
类型|包括openstack+kvm、openstack+vcenter、openstack+cas、openstack+vsuite和openstack+k8s。其中，openstack+kvm、openstack+vcenter、openstack+vsuite为ZTE TECS产品，openstack+cas为华三产品。
供应商|云环境的供应商。
数据中心名称|该云环境所属数据中心名称。
可用区|候选可用区列表是数据中心规划创建且未被其他云环境使用的可用区，若无空闲可用区，请编辑数据中心进行增加。
Openstack认证URL|与底层TECS OpenStack对接的URL地址。对接参数，由TECS OpenStack对接方提供。端口号5000。
Provider认证URL|与底层TECS OpenStack对接的URL地址。对接参数，由TECS OpenStack对接方提供。端口号5000。
Provider门户URL|用户从TECS Director跳转到Provider所用的URL地址。端口号443。
Keystone版本|底层Keystone的版本号，由对接方提供
默认租户|一般默认为admin，由TECS OpenStack侧提供。
用户名|TECS OpenStack的登录用户名。对接参数，由TECS OpenStack侧提供。
密码|TECS OpenStack的登录密码。对接参数，由TECS OpenStack侧提供。
描述|根据规划填写。
 说明： 
填写内容应与OpenStack中的设置相符。 
单击添加按钮提交信息，等待数秒，在返回的云环境页面显示新增的云环境。
####### 相关任务 
在云环境页面的云环境列表中，可对云环境进行如下操作：
单击云环境名称，打开云环境详情页面，支持查看云环境的概览、虚拟资源和物理资源等详情。对于Keystone版本为V3的云环境，还支持查看云环境的项目详情及绑定的用户情况。 
在操作列中，选择相应的下拉菜单项可对云环境进行删除、编辑、编辑标签、设置部署策略、单点登录和重置密码操作。 说明：当对接的云环境密码发生变更后，需要在TECS Director上重置该云环境的密码。 
在操作列中，单击配置中心，可为云环境设置云硬盘类型、资源等级、网络、功能开关及证书，如图3所示。图3  云环境配置中心 说明：其中，云环境和TECS Director对接时，可以配置认证方式为单向认证或双向认证。单向认证为TECS Director认证云环境的根证书。双向认证为TECS Director和云环境互相认证双方证书。证书管理的具体操作参见“管理证书”。 
###### 添加主机集群 
####### 摘要 
主机集群是指多台主机集合在一起的一个群组，对外表现为一个整体的资源实体。当需要调用主机集群内的资源时，这些资源由集群内的主机共同承担。 
本节描述添加主机集群的配置过程。 
 小心！ 
VMware环境不能移入移出集群。 
####### 前提 
使用超级管理员账户登录TECS Director。
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572503844130.png)按钮，选择基础设施→虚拟资源→计算
，默认打开可用域页面，在左侧导航树中选择计算→主机集群
，打开主机集群页面，如[图1](12-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4.html#%E6%B7%BB%E5%8A%A0%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4-65E78D5F__eec2fd38-2442-4abe-b37d-05c2966b8f23)所示。
图1  主机集群页面
[]images/%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%A1%B5%E9%9D%A2.png)
单击+添加主机集群按钮，打开添加主机集群页面，如[图2](12-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4.html#%E6%B7%BB%E5%8A%A0%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4-65E78D5F__fig_-141321-66EEA346)所示。
图2  添加主机集群页面
[]images/Snap109.png)
根据规划选择或填写相关信息，单击添加按钮，添加主机集群。
在数据中心页面中单击某个待查看的主机名称，进入该主机的信息页面，查看主机是否归属于某个主机集群，即所属主机集群是否为空。
（可选）为主机集群选择物理网络。 
在主机集群列表的操作列选择下拉菜单项编辑，打开编辑主机集群对话框，如[图3](12-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4.html#%E6%B7%BB%E5%8A%A0%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4-65E78D5F__59384698-2121-4423-a4d4-0bdfc5f002c0)所示。
图3  编辑主机集群
[]images/1603267178244.png)
根据规划设置物理网络参数，单击确认按钮。
####### 相关任务 
在主机集群页面中，单击操作列中的设置预留比例，可以对该集群的CPU和内存设置预留比例，保证CPU和内存在繁忙时，该主机集群能有更高的优先级获取资源，如图4所示。图4  设置预留比例 
在左侧功能导航树中，选择计算→主机，打开主机页面，可进行如下操作。如果...那么...查看主机信息单击某个主机名称，进入该主机的信息页面，可查看主机是否归属于某个主机集群。将主机移入主机集群在操作下拉列表框中单击移入/移出集群按钮，打开移入/移出集群页面。在主机集群下拉框中选择需要移入的主机集群。单击确认按钮。将主机移出主机集群在操作下拉列表框中单击移入/移出集群按钮，打开移入/移出集群页面。在主机集群下拉框中删除已有的主机集群。单击确认按钮。 说明：移入集群功能只适用于支持openstack的云环境。 
###### 虚机规格管理（可选） 
虚机规格用于创建虚机，虚机规格包括虚拟内核个数、内存大小、磁盘空间大小、元数据等。 
云环境一般存在默认的虚机规格，如果默认的虚机规格无法满足要求，需要云管理员创建虚机规格，并发布到云环境中。 
####### 创建虚机规格 
######## 摘要 
本节描述创建虚机规格的操作步骤。 
######## 前提 
使用超级管理员账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1591083384054.png)按钮，选择基础设置→虚拟资源→计算→规格
，打开规格页面，如[图1](2901139.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__61653538-cb4c-45e4-963b-a791d7d3a02a)所示。
图1  规格页面
[]images/1640227780996.png)
单击创建本地规格按钮，打开创建本地规格页面，如[图2](2901139.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__c215f5d7-5d36-4bbf-917e-0af097eaa44d)所示。
图2  创建本地规格
[]images/1591083980961.png)
根据规划设置参数，单击创建按钮。
######## 相关任务 
如果…|那么…
---|---
删除虚机规格|在虚机规格列表的操作列中单击删除按钮，可删除已创建的虚机规格。
发布虚机规格|参见发布虚机规格。
####### 发布虚机规格 
######## 摘要 
TECS Director支持向指定云环境发布虚机规格。
本节描述发布虚机规格的操作步骤。 
######## 前提 
使用超级管理员账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1572519402460.png)按钮，选择基础设置→虚拟资源→计算→规格
，打开规格页面。
（可选）单击列表中某个虚机规格名称，可查看该虚机规格的详细信息，包括基本信息和已发布云环境列表，如[图1](1542607058976.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__cc1cabda-5efc-4894-a49f-5b712db90a2f)所示。
图1  查看某个虚机规格信息
[]images/3.8-2%E6%9F%A5%E7%9C%8B%E6%9F%90%E4%B8%AA%E8%99%9A%E6%9C%BA%E8%A7%84%E6%A0%BC%E7%9A%84%E4%BF%A1%E6%81%AF.png)
在本地规格列表中，对于需要发布的虚机规格，单击操作列下的发布，打开发布页面，如[图2](1542607058976.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__3e3e3373-07d9-4e2b-a06c-071a32f5e65a)所示。
图2  发布虚机规格页面
[]images/3.8-3%E5%8F%91%E5%B8%83%E9%A1%B5%E9%9D%A2.png)
选择发布虚机规格的云环境，已选择的云环境会呈现在右侧已选云环境区域框中，单击确认完成发布，如[图3](1542607058976.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__33a7dde7-5c1c-4446-8066-280621a0057e)所示。
图3  选择云环境
[]images/3.8-4%E9%80%89%E6%8B%A9%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA%E8%A7%84%E6%A0%BC%E7%9A%84%E4%BA%91%E7%8E%AF%E5%A2%83.png)
######## 相关任务 
在左侧功能导航树中，选择虚机规格→云规格，打开云规格页面，可查询发布的虚机规格情况，如图4所示。图4  云规格页面 
在本地规格页面，对于某个虚机规格，单击操作列下的删除，可删除该虚机规格，同时可以选择是否删除云上的虚机规格，如图5所示。图5  删除虚机规格 
在本地规格页面，对于某个虚机规格，单击操作列下的配置扩展属性按钮，可对虚机规格的属性进行编辑，如图6所示。本地规格的修改会同步到已发布云环境的云规格。图6  配置扩展属性 
在本地规格页面，单击右上角的查看历史任务按钮，可查看发布虚机规格、删除本地规格、配置扩展属性的操作记录及完成情况，如图7所示。图7  查看历史任务 
###### 上传公共镜像（可选） 
####### 摘要 
镜像用于创建虚机，镜像分为公共镜像与私有镜像，公共镜像由云管理员统一上传。通过此操作上传的镜像可被各个组织使用。 
如果不存在公共镜像，可以跳过此节。 
本节介绍上传镜像的操作步骤。 
####### 前提 
使用超级管理员账户登录TECS Director。
####### 相关信息 
TECS Director中超级管理员和组织管理员都支持上传镜像操作，超级管理员上传的镜像支持所有组织使用；组织管理员上传的VDC镜像只支持本组织使用。组织管理员上传VDC镜像的操作步骤参见[上传VDC镜像（可选）](40-%E4%B8%8A%E4%BC%A0VDC%E9%95%9C%E5%83%8F.html)。
镜像源文件支持本地文件、ftp网络文件和http(s)网络文件上传三种方式。 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572511862617.png)按钮，选择基础设置→虚拟资源→镜像
，默认打开云镜像页面。在左侧功能导航树中选择镜像→文件仓库
，打开文件仓库页面。
单击+上传镜像按钮，打开上传镜像页面，如[图1](20-%E4%B8%8A%E4%BC%A0%E9%95%9C%E5%83%8F.html#task1__fig_-143331-719C9A1C)所示。
图1  上传镜像
[]images/Snap120.png)
根据不同的上传方式，选择执行如下操作。 
如果...|那么...
---|---
选择本地文件方式|在镜像源中单击本地文件。根据规划设置镜像参数，单击上传按钮。
选择ftp网络文件方式|在镜像源中单击ftp网络文件，弹出FTP参数配置对话框，如图2所示。根据规划配置FTP参数，单击确认按钮。根据规划配置剩余的镜像参数，单击上传按钮。
选择http(s)网络文件方式|在镜像源中单击http(s)网络文件，弹出HTTP/HTTPS参数配置对话框，如图3所示。根据规划配置HTTP或HTTPS参数。（可选）单击URL检测按钮，可检查填写的URL是否连通。单击确认按钮。根据规划配置剩余的镜像参数，单击上传按钮。
图2  FTP参数配置
[]images/1611285832415.png)
图3  HTTP/HTTPS参数配置
[]images/1611294915647.png)
####### 相关任务 
镜像上传完成后可执行如下操作： 
如果...|那么...
---|---
发布镜像|在左侧导航树中选择镜像→云镜像节点，打开云镜像页面。单击发布镜像按钮，打开发布镜像页面。选择需发布的镜像和云环境，单击发布按钮。
删除镜像|在云镜像列表中单击需删除镜像所在行的删除按钮，删除镜像的同时即取消发布该镜像。
查看镜像详情|在云镜像或文件仓库页面中单击镜像名称，可查看镜像详情和镜像发布信息。
编辑镜像|在文件仓库页面中，单击某个镜像操作列下拉菜单中的编辑按钮，可编辑镜像名称、最小磁盘、最小内存、元数据等参数。
###### 添加云硬盘类型 
####### 摘要 
云硬盘类型代表云硬盘的一种类型，用户创建云硬盘时需要制定云硬盘类型才能创建。 
本节描述添加云硬盘类型的操作步骤。 
####### 前提 
使用超级管理员账户登录TECS Director。
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572520047009.png)按钮，选择基础设施→虚拟资源→存储
，默认打开云硬盘页面。
在左侧功能导航树中，选择存储下的云硬盘类型，打开云硬盘类型页面，如[图1](22-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%A1%AC%E7%9B%98%E7%B1%BB%E5%9E%8B.html#task1__a3bcc03a-002e-4977-bdc9-7420e2df47ae)所示。
图1  云硬盘类型页面
[]images/1602639480777.png)
单击+添加云硬盘类型按钮，打开添加云硬盘类型页面，如[图2](22-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%A1%AC%E7%9B%98%E7%B1%BB%E5%9E%8B.html#task1__fig_-142331-9EEA6223)所示。
图2  添加云硬盘类型
[]images/Snap121.png)
根据规划设置参数，单击添加按钮。
####### 相关任务 
在云硬盘类型列表的操作列中单击删除按钮，可删除已创建的云硬盘类型。 
在云硬盘类型列表的操作列中单击配置存储QoS，可为云硬盘类型配置存储QoS。添加存储QoS的方法参见“添加存储QoS”。 
在左侧功能导航树中，选择存储下的云硬盘，打开云硬盘页面，可查看所有云环境中的云硬盘。 
在云硬盘页面，切换至云硬盘快照标签页，可查看云硬盘快照信息。 
###### 添加外部网络（可选） 
云网络分为外部网络与内部网络。 
外部网络用于虚机访问云环境之外网络、租户之间互相访问或外部访问虚机，外部网络由云管理员统一规划。 
内部网络用于租户内的虚机互相访问，由租户负责。 
如果云环境的虚机无外部访问等需求，则不需要创建外部网络。外部网络创建包括添加云网络、子网池、路由、VLAN池等。
####### 添加云环境网络 
######## 摘要 
TECS Director的云环境网络包括添加云环境网络、添加云环境子网和添加云环境端口。
本节描述添加网络的操作步骤。 
######## 前提 
云环境已配置物理网络。 
登录TECS Director。 
######## 步骤 
添加网络
单击TECS Director顶部菜单栏中的[]images/1572508489184(%E9%87%8D%E7%94%A81).png)按钮，选择基础设施→虚拟资源→网络
，默认打开SDN页面。在左侧导航树中选择网络→云网络
，打开云网络页面，如[图1](15-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E7%BD%91%E7%BB%9C.html#task1__a1f05f7a-9cf2-4bfc-9122-17e506776fc0)所示。
图1  云网络页面
[]images/%E4%BA%91%E7%BD%91%E7%BB%9C%E9%A1%B5%E9%9D%A2(%E9%87%8D%E7%94%A81).png)
在网络页签下，单击+添加网络按钮，打开添加网络页面，如[图2](15-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E7%BD%91%E7%BB%9C.html#task1__ce876684-adc5-4f01-82b7-5047307b05ed)所示。
图2  添加网络
[]images/%E4%BA%91%E7%BD%91%E7%BB%9C-%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%BB%9C(%E9%87%8D%E7%94%A81).png)
单击显示高级设置，显示更多可填参数，如[图3](15-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E7%BD%91%E7%BB%9C.html#task1__fda9087f-904d-4d05-a11a-33b2ae984300)所示。
图3  显示高级设置
[]images/1596094738886(%E9%87%8D%E7%94%A81).png)
 说明： 
如果全局安全组开关打开，可以设置端口安全组开关，此开关可以打开或者关闭。 
如果全局安全组开关关闭，则端口安全组开关不能进行打开设置。 
全局安全组开关在daisy中进行设置。 
（可选）如果添加的是外部网络，勾选外部网络选项。
图4  勾选外部网络
[]images/1599031116959(%E9%87%8D%E7%94%A81).png)
根据规划填写其他参数，单击添加按钮。
添加子网
在网络页签下，单击网络列表中的网络名称，打开该网络的详情页面，默认显示基本信息页签，如[图5](15-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E7%BD%91%E7%BB%9C.html#task1__6e193fcd-8844-469b-a017-176b200d067f)所示。
图5  网络详情页面
[]images/%E4%BA%91%E7%BD%91%E7%BB%9C-%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF(%E9%87%8D%E7%94%A81).png)
单击子网，进入子网页签。
单击添加子网按钮，打开添加子网页面，如[图6](15-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E7%BD%91%E7%BB%9C.html#task1__7cd9069b-2973-40b7-a484-f90add0338d8)所示。
图6  添加子网
[]images/%E4%BA%91%E7%BD%91%E7%BB%9C-%E6%B7%BB%E5%8A%A0%E5%AD%90%E7%BD%91(%E9%87%8D%E7%94%A81).png)
根据规划填写参数，单击添加按钮。
添加云环境端口
在网络页签下，单击网络列表中的网络名称，打开该网络的详情页面，切换至端口页签。
单击添加端口按钮，打开添加端口页面，如[图7](15-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E7%BD%91%E7%BB%9C.html#task1__%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%BB%9C-6F19BEA3)所示。
图7  添加端口
[]images/3.5.1%E6%B7%BB%E5%8A%A0%E7%AB%AF%E5%8F%A3(%E9%87%8D%E7%94%A81).png)
 说明： 
如果全局安全组开关打开，可以设置端口安全组开关，此开关可以打开或者关闭。端口安全组开关打开时，可选择安全组。
如果全局安全组开关关闭，则端口安全组开关不能进行打开设置。
全局安全组开关在daisy中进行设置。 
根据规划填写参数，单击添加按钮。
####### 添加云环境子网池 
######## 摘要 
本节描述添加云环境子网池的操作步骤。 
######## 前提 
使用获得相应操作权限的账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1572509646751.png)按钮，选择基础设施→虚拟资源→网络
，默认打开SDN页面。在左侧导航树中选择网络→云网络
，打开云网络页面。
单击子网池，切换至子网池页签，如[图1](16-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E5%AD%90%E7%BD%91%E6%B1%A0.html#task1__dc10145d-005a-4941-a4ad-86a7e36f9470)所示。
图1  子网池
[]images/%E4%BA%91%E7%BD%91%E7%BB%9C-%E5%AD%90%E7%BD%91%E6%B1%A0.png)
单击+添加子网池按钮，打开添加子网池页面，如[图2](16-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E5%AD%90%E7%BD%91%E6%B1%A0.html#task1__fig_-14211131-9D787732)所示。
图2  添加子网池
[]images/Snap116.png)
根据规划填写参数，单击添加按钮。
####### 添加云环境路由器 
######## 摘要 
路由是指云环境使用的路由器，包括相应网络的网关和端口等。 
本节描述添加云环境路由器的操作步骤。 
######## 前提 
使用获得相应操作权限的账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1572510426188.png)按钮，选择基础设施→虚拟资源→网络
，默认打开SDN页面。在左侧导航树中选择网络→云网络
，打开云网络页面。
单击路由器，切换至路由器页签。
单击+添加路由器按钮，打开添加路由器页面，如[图1](17-%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%8E%AF%E5%A2%83%E8%B7%AF%E7%94%B1%E5%99%A8.html#task1__fig_-1421231-77441229)所示。
图1  添加路由器
[]images/Snap117.png)
根据规划填写参数，单击添加按钮。
####### 添加VLAN池 
######## 摘要 
VLAN池是指VLAN的集合，一个VLAN池包含多个VLAN。
本节描述添加云网络中VLAN池的操作步骤。
######## 前提 
使用获得相应操作权限的账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1586252555861.png)按钮，选择基础设施→虚拟资源→网络
，默认打开SDN页面。在左侧导航树中选择网络→云网络
，打开云网络页面。
单击VLAN池，切换至VLAN池页签。
单击+添加VLAN池按钮，打开添加VLAN池页面，如[图1](18-%E6%B7%BB%E5%8A%A0VLAN%E6%B1%A0.html#task1__%E6%B7%BB%E5%8A%A0VLAN%E6%B1%A0-CA4E05A5)所示。
图1  添加VLAN池
[]images/Snap118.png)
根据规划填写参数，单击添加按钮。
###### 配置虚机备份 
####### 摘要 
本节介绍虚机备份的操作步骤。 
####### 前提 
已创建数据中心 
已对接云环境及创建VDC 
对接的云环境具备后端存储，可以创建云硬盘虚机 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1634716498624.png)按钮，选择基础设施→数据中心→云环境
，打开云环境页面。
单击操作列的配置中心，并在弹出的窗口中切换至对接信息页签，单击虚机备份配置按钮，显示配置信息，如[图1](1634716380608.html#zf211e64be0ea40f1aca685d2f829235b__41f048a9-ae45-4ea7-b803-0ce5a1efaa3f)所示。
图1  虚机备份配置
[]images/%E8%99%9A%E6%9C%BA%E5%A4%87%E4%BB%BD%E9%85%8D%E7%BD%AE.png)
打开备份开关，提供者选择Freezer，单击确认。
单击TECS Director顶部菜单栏中的[]images/1634716797398.png)按钮，选择租户资源管理→组织
，打开组织页面。
单击组织名称，进入组织详情页面，如[图2](1634716380608.html#zf211e64be0ea40f1aca685d2f829235b__3cdd81f3-1546-401a-bc17-f7705d276ba0)所示。
图2  组织详情
[]images/%E7%BB%84%E7%BB%87%E8%AF%A6%E6%83%85.PNG)
单击虚拟机，打开虚拟机页面，如[图3](1634716380608.html#zf211e64be0ea40f1aca685d2f829235b__0ff16915-1f32-44a9-9d57-d61cb2667cc6)所示。
图3  虚拟机
[]images/%E8%99%9A%E6%8B%9F%E6%9C%BA.PNG)
单击操作列下拉列表中的虚机备份，弹出创建备份任务对话框，如[图4](1634716380608.html#zf211e64be0ea40f1aca685d2f829235b__b39ba29f-f2c3-49de-9cc7-b446e3982ff0)所示。
图4  备份任务
[]images/%E8%99%9A%E6%9C%BA%E5%A4%87%E4%BB%BD.PNG)
选择备份类型、备份方式、保留天数，单击确定按钮。
 说明： 
备份类型选择立即备份，创建任务的同时会开始备份；备份类型选择周期备份，则需要选择备份周期和开始时间。 
单击页面上方虚机备份按钮，打开虚机备份页面，选择Freezer备份页签，可以查看备份任务。
单击操作列的恢复按钮，弹出备份恢复对话框。
单击确认按钮，成功创建恢复任务。单击恢复任务列表，可以查看恢复任务。
回到组织详情页面，单击云硬盘，可以对云硬盘进行备份及恢复。
##### 组织与VDC规划 
超级管理员组织与VDC规划的流程如[图1](1595924199444.html#z5d7fc64625034ae5ad3ac52b0c7ce4c3__6636bb27-4675-4052-925f-ba808f14825c)所示。
图1  超级管理员组织规划流程
[]images/%E4%BA%91%E7%AE%A1%E7%90%86%E5%91%98%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86.png)
###### 登录云管平台 
关于登录云管平台的操作，参见“[登录云管平台](%E6%93%8D%E4%BD%9C%E4%BB%BB%E5%8A%A1%EF%BC%88%E7%A9%BA%EF%BC%89.html)”。
###### 新建组织管理员角色（可选） 
系统中已经预置组织管理员角色。如果已有的组织管理员角色权限等不满足要求，可以新创建一个组织管理员角色，并赋予期望的权限。一般操作流程包括新建操作集，新建角色。  
####### 新建操作集 
######## 摘要 
操作集为角色具有的操作权限，是组成角色的一部分。 
本节介绍新建操作集的步骤。 
######## 前提 
使用超级管理员账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏的[]images/1572317744771.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面，如[图1](1572316765687.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__ca13c7c3-4236-46b8-a4de-fd251e16e97c)所示。
图1  角色管理页面
[]images/1572317783223.png)
单击操作集，切换到操作集页签，如[图2](1572316765687.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__d8937dbe-0aab-4f96-a35d-283bea935975)所示。
图2  操作集页签
[]images/%E6%93%8D%E4%BD%9C%E9%9B%86%E9%A1%B5%E7%AD%BE-%E5%8A%A0%E6%A1%86.png)
单击+新建操作集按钮，打开新建操作集页面，如[图3](1572316765687.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__6b7f4a7a-500d-4b69-9eeb-005b99288ee1)所示。
图3  新建操作集页面
[]images/%E6%96%B0%E5%BB%BA%E6%93%8D%E4%BD%9C%E9%9B%86%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
在基本信息中填写操作集名等信息，在操作集分配情况中分配该操作集具备的权限。
单击新建按钮，完成操作集的创建。
######## 结果 
新建完成的操作集出现在角色管理页面中操作集页签下的操作集列表中。
####### 新建角色 
######## 摘要 
根据设定的安全管理规划，创建需要的角色。 
本节介绍新建角色的步骤。 
######## 前提 
使用超级管理员账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏的[]images/1572257084763.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面，如[图1](1572256853463.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__312d6947-ae49-4a87-88ce-0b1167a84fd7)所示。
图1  角色管理页面
[]images/1572259387686.png)
单击角色页签下的+新建角色按钮，打开请选择您要创建的角色窗口，如[图2](1572256853463.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__8714f503-ff8e-4ac1-a6b8-f801d3efc00a)所示。
图2  选择创建的角色
[]images/%E8%AF%B7%E9%80%89%E6%8B%A9%E6%82%A8%E8%A6%81%E5%88%9B%E5%BB%BA%E7%9A%84%E8%A7%92%E8%89%B2.png)
根据规划选择要创建的角色。 
创建区域安全管理员角色。选中区域安全管理员角色前的单选框，单击确定按钮，打开新建角色页面，如图3所示。图3  新建区域安全管理员填写角色名称等基本信息，并选择分配给该角色的权限。 说明：其中，如果勾选锁定该角色右侧的复选框，该角色中设置的权限对用户不生效。单击新建按钮，完成区域安全管理员的创建。 
创建其他角色选中其他角色前的单选框，单击确定按钮，打开新建角色页面，如图4所示。图4  新建其他角色在基本信息中，填写角色名称等信息。 说明：其中，如果勾选锁定该角色右侧的复选框，该角色中设置的权限对用户不生效。权限分配中的两个信息框，左侧为资源列表，右侧为操作集列表（安全管理员权限除外）。在左侧资源列表中选中待分配操作集的资源，在右侧操作集列表中选择分配的操作集。（可选）将鼠标移动到某个资源右侧，将出现两个按钮，如图5所示，可以为该资源快捷设置权限。图5  快捷设置权限按钮按钮说明设置当前资源的权限与其上级节点一致。同步当前资源的下级节点权限与当前资源一致。每个资源左侧的图标含义如下：图标说明当前资源的权限设置已跟随上级节点。当前资源的权限设置未跟随上级节点。单击新建按钮，完成其他角色的创建。 
######## 结果 
新建完成的角色显示在角色管理页面中角色页签下的角色列表里。
###### 添加组织 


组织是指VDC使用人，即云资源和服务的使用方，可以是一个单位或一个单位的一个组织，一个组织可以关联多个VDC，组织由组织管理员来管理。


用户可以在TECS Director门户在线添加组织，或者使用模板批量导入组织。


####### 在线添加组织 
######## 摘要 
本节描述在线添加组织的步骤。 
######## 前提 
已创建资源组。 
登录TECS Director。 
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/b32adf83b8454341b9af7965e30c5ea7.png)按钮，选择运营→租户资源管理→组织管理
，打开组织管理页面，如[图1](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__a3b8da11-7b7b-4166-834f-8b3072ae3e36)所示。
图1  组织管理页面
[]images/707a502e62b348d2bc838630a281ab3f.png)
单击添加组织按钮，打开添加组织-基本信息页面，填写组织名称和组织域，并选择至少一个已有用户作为组织管理员，如[图2](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__7e2d888d-fbff-4771-ba0a-8380cec7f342)所示。
图2  添加组织-基本信息
[]images/%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF.png)
单击下一步按钮，切换至添加组织-选择可用区页签，为组织设置可用区，如[图3](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__463bce70-5590-4b7f-b58e-2af0dfc39637)所示。
图3  添加组织-选择可用区
[]images/2154bae972c44a268450ddc45fb9e793.png)
单击下一步按钮，切换至添加组织-设置配额页签，根据规划设置配额，如[图4](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__1a5de456-d17a-416e-8691-7a05720ef888)所示。
图4  添加组织-设置配额
[]images/33e59bd22f49497682ad8bcd2c2d5ef3.png)
 说明： 
设置组织配额之前需要注册和发布相应产品，参见注册和发布产品
。
单击下一步按钮，切换至添加组织-分配VDC（可选）页签，可以为组织分配VDC，如[图5](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__08592e1d-caee-4eea-a582-0110d52d4d6a)所示。
图5  添加组织-分配VDC（可选）
[]images/17fa9db6c2b348179c69bd8bb6b03177.png)
单击下一步按钮，切换至添加组织-检查确认页签，确认之前设置是否正确，如[图6](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__8221a765-b5b7-4596-9b0a-062884749afe)所示。
图6  添加组织-检查确认
[]images/223064e6b871448591c93a49b8392e7f.png)
单击确认按钮，完成组织的创建。
######## 相关任务 
在组织列表的操作列中，选择菜单项删除，打开确认提示框。单击删除按钮，可删除已创建的组织。
####### 批量导入组织 
######## 摘要 
TECS Director支持领域管理员通过导入文件的方式，批量导入组织。
本节介绍批量导入组织的步骤。 
######## 前提 
使用领域管理员账户登录TECS Director。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1602661238113(%E9%87%8D%E7%94%A82).png)按钮，选择运营→租户资源管理→组织管理
，打开组织管理页面，如[图1](0494325.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__ac6502fe-d9b2-40e4-a896-ae76265923cb)所示。
图1  组织管理页面
[]images/1640225514745.png)
单击导入组织按钮，打开导入组织页面，如[图2](0494325.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__8eee21a7-ddcd-4ed2-9e43-722eaaa54c06)所示。
图2  导入组织页面
[]images/1602662484822(%E9%87%8D%E7%94%A82).png)
（可选）如果没有组织数据文件，用户可下载组织模板，自定义后导入。 
单击下载组织模板，下载组织模板文件。
打开组织模板文件，根据提示填写相关参数，如[图3](0494325.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__710e6b92-169a-479d-89be-9028ef42ef0a)所示。
图3  组织模板文件
[]images/1602664014079(%E9%87%8D%E7%94%A82).png)
 说明： 
一个模板内可填写多条组织信息，一行数据即为一条组织信息。 
保存编辑好的模板文件。 
单击上传文件，在弹出的对话框中选择已有的组织模板文件。
 说明： 
模板文件仅支持.xlsx格式，一次只能上传一个文件。
单击对话框中的打开按钮，上传组织模板文件。
根据规划选择是否打开重复数据覆盖开关。
如果...|那么...
---|---
不打开重复数据覆盖开关|如果模板中组织名称和系统中已有组织重复，则导入失败，失败原因为组织已存在。
打开重复数据覆盖开关|如果模板中组织名称和系统中已有组织重复，则导入成功，系统自动将模板中的组织覆盖原有组织。
单击导入按钮，完成组织的导入，系统提示导入组织完成，并显示组织的导入情况，如[图4](0494325.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__bc6b3b88-0491-4fdf-a78a-1dffe71f2ac5)所示。
图4  导入组织完成提示
[]images/1602665475037(%E9%87%8D%E7%94%A82).png)
######## 相关任务 
在导入组织页面，可在组织数据导入结果区域查看导入组织的状态及结果。
###### 添加组织管理员 
####### 摘要 
系统在创建组织管理员时绑定相应组织。 
本节描述为组织添加管理员的操作步骤。 
####### 前提 
使用获得相应操作权限的账户登录TECS Director。 
已创建组织。 
####### 相关信息 
TECS Director支持批量导入组织管理员，具体步骤参见[批量导入组织](0494325.html)。
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1602641268853(%E9%87%8D%E7%94%A82).png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面，如[图1](29-%E6%B7%BB%E5%8A%A0%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86%E5%91%98.html#%E6%B7%BB%E5%8A%A0ORG%E7%AE%A1%E7%90%86%E5%91%98-65E8365A__00f0467a-62c9-46b0-a1b2-40b871d35e24)所示。
图1  用户管理页面
[]images/1602641268773(%E9%87%8D%E7%94%A82).png)
单击+新建用户按钮，打开新建用户页面，默认显示基本信息页签，如[图2](29-%E6%B7%BB%E5%8A%A0%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86%E5%91%98.html#%E6%B7%BB%E5%8A%A0ORG%E7%AE%A1%E7%90%86%E5%91%98-65E8365A__61c9bac6-bdf8-4c2e-a3d2-4d89e8e6c073)所示。
图2  新建用户-基本信息
[]images/1602641398977(%E9%87%8D%E7%94%A82).png)
根据规划填写参数，具体说明参见“新建用户”。 
单击下一步按钮，切换到权限分配页签，如[图3](29-%E6%B7%BB%E5%8A%A0%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86%E5%91%98.html#%E6%B7%BB%E5%8A%A0ORG%E7%AE%A1%E7%90%86%E5%91%98-65E8365A__804e174f-7a55-4026-ac1d-3e9c6d100c78)所示。
图3  新建用户-权限分配
[]images/1602641479439(%E9%87%8D%E7%94%A82).png)
在系统选择框中删除本地系统/默认租户，在系统下拉框中选择需要绑定的组织，在角色选择框中勾选组织管理员、安全管理员和工单处理人。
单击新建按钮，完成组织管理员的添加。
####### 相关任务 
在用户管理页面，单击操作列下的操作按钮，可对该组织管理员进行修改、删除、复制、查看用户权限和设置日志查看范围操作。
###### 创建VDC 
####### 摘要 
VDC（Virtual Data Centers）是一组虚拟资源的容器，是IaaS云向租户（组织）提供资源的基本单位。
本节描述如何创建VDC。
####### 前提 
使用领域管理员账户登录TECS Director。
####### 相关信息 
VDC具备以下特征：
VDC是独立的实体，具备自身的IP地址、自身的通信网络、甚至有自身的管理系统等。 
1个物理DC可以被多个VDC共享。 
1个VDC可以跨多个物理DC。 
VDC包含资源和服务两方面内容。 
VDC能提供端到端的业务。 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572574195184(%E9%87%8D%E7%94%A82).png)按钮，选择运营→租户资源管理→VDC
，打开VDC页面，如[图1](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__fig_-142331-664B771E)所示。
图1  VDC页面
[]images/Snap123(%E9%87%8D%E7%94%A82).png)
单击+创建VDC按钮，打开创建VDC页面，在基本信息选项卡页面中，填写配置参数，如[图2](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__9baa4ddf-9602-43be-954d-0d537bda0149)所示。
图2  创建VDC-基本信息
[]images/1551061514763(%E9%87%8D%E7%94%A82).png)
单击下一步按钮，进入选择云环境选项卡，为VDC选择云环境，如[图3](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__fig_-142531-664C5682)所示。
图3  创建VDC-选择云环境
[]images/4.3-3%E9%80%89%E6%8B%A9%E4%BA%91%E7%8E%AF%E5%A2%83(%E9%87%8D%E7%94%A82).png)
单击下一步按钮，进入资源配置选项卡页面，依次配置云环境下的配额、计算资源、存储资源、网络资源和项目名称参数，如[图4](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__33b6b0f0-4bb0-4121-9c9b-6cc9da6c77d1)所示。
图4  创建VDC-资源配置
[]images/1563785122846(%E9%87%8D%E7%94%A82).png)
 说明： 
其中，网络资源中可添加的物理网络为云环境侧已配置的物理网络。 
单击项目名称设置下的开关[]images/1563781124850(%E9%87%8D%E7%94%A82).png)，选择云环境上已有租户，可以将已有的项目纳管进来，如[图5](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__5c9eeef5-7099-4449-82a3-40b143e735bf)所示。
图5  设置项目名称
[]images/1563785055362(%E9%87%8D%E7%94%A82).png)
 说明： 
使用已建租户创建VDC，设置修改的配额会同步更改到对应租户上。
单击下一步按钮，进入检查确认选项卡页面，检查创建VDC的参数是否正确。
单击创建按钮，完成VDC的创建。
####### 相关任务 
VDC创建完成后，在VDC页面可对其执行如下操作：
如果…|那么…
---|---
查看VDC详情|在VDC列表中单击VDC名称，打开VDC详情页面。可以查看基本信息和资源配置信息。在配额和资源信息区域框中单击调整配额按钮，可修改该VDC的资源及配额信息。
删除VDC|在VDC列表中单击操作列中的删除按钮，打开确认提示框。单击确认按钮。
绑定项目|选择未绑定项目的VDC，在VDC列表中单击操作列中的绑定&解绑项目按钮，打开绑定&解绑项目页面。单击绑定按钮，选择项目上已有的租户，对云环境上已有租户进行绑定。
解绑项目|选择已有绑定项目的VDC，在VDC列表中单击操作列中的绑定&解绑项目按钮，打开绑定&解绑项目页面。单击解绑对现在绑定租户解绑。
###### 绑定组织和VDC 
####### 摘要 
本节介绍为组织绑定VDC的步骤。
####### 前提 
已创建组织。 
已创建VDC。 
使用获得相应操作权限的账户登录TECS Director。 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572935632094(%E9%87%8D%E7%94%A82).png)按钮，选择运营→租户资源管理→组织管理
，打开组织管理页面。
单击要绑定VDC的组织名称，进入组织详情页面，切换到VDC子页面，如[图1](1563178123213.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__4e077c48-2287-4a39-9d51-768d3373f318)所示。
图1  组织详情页面
[]images/1648884474767.png)
单击+绑定VDC按钮，打开绑定VDC页面，页面显示了可绑定的VDC列表，如[图2](1563178123213.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__bc73293f-1011-468c-b15c-4f35ea13984d)所示。
图2  绑定VDC页面
[]images/1652771146617.png)
单击绑定按钮，完成组织和VDC的绑定。
#### 组织管理员操作指南 
##### 虚机发布管理 
组织管理员虚机发布管理的流程如[图1](1595991355671.html#zcf1a5a4e189e455ca55cfb3adb78fa7e__eccf5d8b-bc00-422d-944a-892cc1975df3)所示。
图1  组织管理员虚机发布管理流程
[]images/1595991359642.png)
###### 登录云管平台 
使用组织管理员登录运管平台。关于登录云管平台的操作，参见“[登录云管平台](%E6%93%8D%E4%BD%9C%E4%BB%BB%E5%8A%A1%EF%BC%88%E7%A9%BA%EF%BC%89.html)”。
###### 准备虚机启动源：镜像启动或云盘启动 
虚机支持通过镜像、云硬盘、云硬盘快照三种方式创建。 
镜像：镜像分为公有镜像与私有镜像，公有镜像由云管理员上传，私有镜像由组织用户上传，具体操作参见上传VDC镜像（可选）。 
云硬盘：通过已有的云硬盘创建虚机。 
云硬件快照：对云硬盘进行快照，然后使用云硬盘快照启动虚机。 
####### 上传VDC镜像（可选） 
######## 摘要 
在TECS Director中组织管理员除了可以使用公共镜像外，也可以上传、查询本组织专用的VDC镜像文件。在镜像管理列表中可以查看来源，状态，云环境等相关信息。
本节介绍上传VDC镜像的步骤。
######## 前提 
使用组织管理员账户登录TECS Director。
######## 相关信息 
镜像源文件支持本地文件、FTP网络文件和http（s）网络文件三种方式上传。
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1572589352946.png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面，如[图1](40-%E4%B8%8A%E4%BC%A0VDC%E9%95%9C%E5%83%8F.html#%E6%9F%A5%E8%AF%A2%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8-65EAD9FA__025b3e6f-a286-4c02-9628-06a80077c15a)所示。
图1  组织资源管理页面
[]images/1652353758348.png)
单击详情页面中的镜像图标，打开镜像页面，默认显示私有镜像页签，如[图2](40-%E4%B8%8A%E4%BC%A0VDC%E9%95%9C%E5%83%8F.html#%E6%9F%A5%E8%AF%A2%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8-65EAD9FA__fig_-142331-70939FB3)所示。
图2  镜像页面
[]images/Snap155.png)
单击镜像仓库，切换至镜像仓库页签，如[图3](40-%E4%B8%8A%E4%BC%A0VDC%E9%95%9C%E5%83%8F.html#%E6%9F%A5%E8%AF%A2%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8-65EAD9FA__f9b9c820-ba0a-4aa8-8622-fc144c76268a)所示。
图3  文件仓库
[]images/%E7%BB%84%E7%BB%87-%E9%95%9C%E5%83%8F-%E6%96%87%E4%BB%B6%E4%BB%93%E5%BA%93.png)
单击+上传镜像按钮，打开上传镜像页面。
根据规划选择镜像源文件并填写相关参数。 
单击上传按钮，完成VDC镜像的上传。
######## 相关任务 
在镜像页面的镜像列表中，已上传的VDC镜像支持以下操作：
在操作列中选择不同的下拉菜单项，可对该镜像进行删除/编辑等操作。 
单击某个镜像名称，可查看该镜像详情。 
####### 创建云硬盘 
######## 摘要 
TECS Director支持创建云硬盘，通过自定义云硬盘的大小和相关属性，提供一个完整的存储系统。
本节介绍创建云硬盘的步骤。 
######## 前提 
使用组织管理员账户登录TECS Director。 
对应VDC和云环境下已存在云硬盘类型。 
######## 步骤 
单击TECS Director顶部菜单栏中的[]images/1572860324206.png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面。
单击详情页面中的云硬盘图标，打开云硬盘页面，如[图1](43-%E5%88%9B%E5%BB%BA%E4%BA%91%E7%A1%AC%E7%9B%98.html#task1__%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2-AADE5851)所示。
图1  云硬盘页面
[]images/7.4%E4%BA%91%E7%A1%AC%E7%9B%98%E9%A1%B5%E9%9D%A2.png)
单击创建云硬盘按钮，打开创建云硬盘页面，如[图2](43-%E5%88%9B%E5%BB%BA%E4%BA%91%E7%A1%AC%E7%9B%98.html#task1__%E6%B7%BB%E5%8A%A0%E4%BA%91%E7%A1%AC%E7%9B%98-AAE06E22)所示。
图2  添加云硬盘
[]images/7.4%E5%88%9B%E5%BB%BA%E4%BA%91%E7%A1%AC%E7%9B%98%E9%A1%B5%E9%9D%A2.png)
根据规划填写云硬盘参数，单击创建按钮。
######## 相关任务 
云硬盘页面中，在云硬盘列表的操作列下，可选择下拉菜单项对创建完成的云硬盘进行以下操作：
如果...|那么...
---|---
删除云硬盘|单击操作列的删除按钮。在弹出的删除云硬盘对话框中再次单击删除。
挂载云硬盘到虚机|单击操作列的下拉按钮并选择挂载。在弹出的挂载虚机对话框中选择一个虚机，单击确认按钮。
从虚机卸载云硬盘|单击操作列的下拉按钮并选择卸载。在弹出的卸载虚机对话框中，单击确认按钮。
调整云硬盘容量|单击操作列的下拉按钮并选择调整容量。在弹出的调整容量对话框中，输入新的大小，单击确认按钮。
编辑云硬盘|单击操作列的下拉按钮并选择编辑。在弹出的编辑对话框中，输入新的名称和描述，单击保存按钮。
编辑云硬盘总线类型|单击操作列的下拉按钮并选择编辑总线类型。在弹出的编辑总线类型对话框中，选择一个总线类型，单击保存按钮。
创建云硬盘快照|单击操作列的下拉按钮并选择创建快照。在弹出的创建快照对话框中，输入云硬盘快照名称，单击确认按钮。
云硬盘类型迁移|单击操作列的下拉按钮并选择云盘迁移。在弹出的云盘迁移对话框中，选择云硬盘类型，单击保存按钮。
转换云硬盘为镜像|单击操作列的下拉按钮并选择转换为镜像。在弹出的转换为镜像对话框中，输入镜像名称，单击确认按钮。
备份云硬盘|单击操作列的下拉按钮并选择云硬盘备份。在弹出的创建备份任务对话框中，输入名称，选择备份类型和全量保留个数，单击确定按钮。
###### 添加虚机云网络 
####### 摘要 
创建虚机前，需要添加云网络。 
本节介绍添加虚机云网络的步骤。 
####### 前提 
使用组织管理员账户登录TECS Director。
####### 步骤 
添加云网络
单击TECS Director顶部菜单栏中的[]images/1598517454400(%E9%87%8D%E7%94%A81).png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面，如[图1](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__e5202b01-5a05-42ff-9106-2e8d00142e08)所示。
图1  组织资源管理页面
[]images/1652353803009.png)
单击详情页面中的云网络图标，打开云网络页面，默认显示网络页签，如[图2](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__ad95b74e-5ba2-4ab0-966f-07847a4bd942)所示。
图2  云网络页面
[]images/1598518110482(%E9%87%8D%E7%94%A81).png)
单击添加网络按钮，打开添加网络页面，如[图3](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__5eef9be3-c6c5-42bb-bf50-3a65e0d03393)所示。
图3  添加云网络
[]images/1598518168546(%E9%87%8D%E7%94%A81).png)
单击显示高级设置，显示更多可填参数，如[图4](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__9bab7a7b-d70e-4b69-b0ac-f5539624f19c)所示。
图4  显示高级设置
[]images/1598519390416(%E9%87%8D%E7%94%A81).png)
 说明： 
如果全局安全组开关打开，可以设置端口安全组开关，此开关可以打开或者关闭。 
如果全局安全组开关关闭，则端口安全组开关不能进行打开设置。 
全局安全组开关在daisy中进行设置。 
（可选）如果添加的是外部网络，勾选外部网络选项。
根据规划填写其他参数，单击添加按钮。
添加子网
在网络页签下，单击网络列表中的网络名称，打开该网络的详情页面，默认显示基本信息页签，如[图5](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__03ce133d-83b4-44d7-a561-54a9d6dc8b80)所示。
图5  网络详情页面
[]images/1598520076541(%E9%87%8D%E7%94%A81).png)
单击子网，进入子网页签。
单击添加子网按钮，打开添加子网页面，如[图6](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__98c6f526-b4c9-42e1-bea0-d6391110c0b2)所示。
图6  添加子网
[]images/1598520179887(%E9%87%8D%E7%94%A81).png)
根据规划填写参数，单击添加按钮。
添加云网络端口
在网络页签下，单击网络列表中的网络名称，打开该网络的详情页面，切换至端口页签。
单击添加端口按钮，打开添加端口页面，如[图7](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__d2c55dfe-f2be-4d2d-b22e-b5095c5e0d7a)所示。
图7  添加端口
[]images/1610522910188.png)
 说明： 
如果全局安全组开关打开，可以设置端口安全组开关，此开关可以打开或者关闭。端口安全组开关打开时，可选择安全组。 
如果全局安全组开关关闭，则端口安全组开关不能进行打开设置。 
全局安全组开关在daisy中进行设置。 
根据规划填写参数，单击添加按钮。
添加浮动IP
在网络页签下，单击网络列表中的网络名称，打开该网络的详情页面，切换至浮动IP页签，如[图8](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__fbf9663b-d462-4d54-8006-4789672f616b)所示。
图8  浮动IP
[]images/%E6%B5%AE%E5%8A%A8IP.PNG)
 说明： 
创建网络时，需要勾选“是否共享”。 
单击添加浮动IP按钮，打开添加浮动IP页面，如[图9](7093386%EF%BC%88%E9%87%8D%E7%94%A81%EF%BC%89.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__b83359fb-468f-4160-8d70-33108fdfb7d0)所示。
图9  添加浮动IP
[]images/%E6%B7%BB%E5%8A%A0%E6%B5%AE%E5%8A%A8IP.png)
选择所属VDC、Qos带宽，单击添加按钮。
###### 添加安全组 
####### 摘要 
一个DC内，有些网元应用需要启用安全组，通过规则控制实现虚机间的互通。
本节描述添加安全组的步骤。 
####### 前提 
使用组织管理员账户登录TECS Director。 
daisy中全局安全组开关已打开。 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1595918753199(%E9%87%8D%E7%94%A81).png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面，如[图1](7774156.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__64b03fc1-9705-45f0-9c87-0398b68ee4e8)所示。
图1  组织资源管理页面
[]images/1652353823534.png)
单击安全组图标，打开安全组页面，如[图2](7774156.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__08671836-4781-4693-bf84-e0f9f07af8d6)所示。
图2  安全组页面
[]images/1595919503356.png)
单击添加安全组按钮，打开添加安全组页面，如[图3](7774156.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__b0f0e8af-7901-4a35-9a75-427e807a9d34)所示。
图3  添加安全组页面
[]images/1595919622950.png)
根据规划填写相关参数，单击添加按钮，完成安全组的添加。
####### 相关任务 
在安全组页面的列表中，已添加的安全组可进行如下操作：
单击安全组的名称，进入该安全组的详情页面，查看该安全组的详细信息。 
在操作列中选择不同的下拉菜单项，可对该安全组进行编辑/删除等操作。 
###### 发布虚机 
####### 摘要 
本节介绍发布虚机的操作步骤。 
####### 前提 
使用组织管理员账户登录TECS Director。 
已上传并发布镜像。 
已创建网络。 
已创建虚机规格。 
####### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572860910286.png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面。
单击详情页面中的虚拟机图标，打开虚拟机页面，如[图1](44-%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA.html#%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA%E5%88%97%E8%A1%A8-65EAE69E__9fcfeaf0-3fb1-44e5-8467-920493da01fc)所示。
图1  虚拟机页面
[]images/1572861042261.png)
单击+发布虚机按钮，打开发布虚机-基本信息页面，根据规划填写相应参数，如[图2](44-%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA.html#%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA%E5%88%97%E8%A1%A8-65EAE69E__fig_-141431-70A719CD)所示。
图2  发布虚机-基本信息
[]images/Snap159.png)
 说明： 
组织管理员批量创建虚机的个数上限为50。 
选择不同的部署策略需设置不同的参数。
如果…|那么…
---|---
按云环境部署|根据需求选择云环境和虚机规格。
按VDC部署|根据需求选择VDC和虚机规格。
单击下一步按钮，打开发布虚机-启动源页面，为虚机选择启动源，如[图3](44-%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA.html#%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA%E5%88%97%E8%A1%A8-65EAE69E__017cb00f-1cd1-4e89-8d19-0683116e36cc)所示。
图3  发布虚机-启动源
[]images/1587538703320.png)
单击下一步按钮，打开发布虚机-云硬盘页面，为虚机选择是否增加云硬盘，如[图4](44-%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA.html#%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA%E5%88%97%E8%A1%A8-65EAE69E__e5f3f67d-a761-4d03-9788-f62efd1f8bdd)所示。
图4  发布虚机-云硬盘
[]images/1587539174866.png)
单击下一步按钮，打开发布虚机-网络页面，为虚机增加网卡，如[图5](44-%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA.html#%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA%E5%88%97%E8%A1%A8-65EAE69E__818a5cc5-9100-42f0-a83d-0ad0045d179f)所示。
图5  发布虚机-网络
[]images/1587539205426.png)
单击下一步按钮，打开发布虚机-高级配置页面，如[图6](44-%E5%8F%91%E5%B8%83%E8%99%9A%E6%9C%BA.html#%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA%E5%88%97%E8%A1%A8-65EAE69E__112c96c3-e7a2-410b-8721-551a944addf8)所示。
图6  发布虚机-高级配置
[]images/1587538632599.png)
根据规划填写相应配置参数，用户可根据需要勾选秘钥对配置虚机，秘钥对的创建步骤参见“创建秘钥对
”。
单击发布虚机按钮。
####### 相关任务 
发布完成的虚机可在虚机列表中进行以下操作： 
如果...|那么...
---|---
打开虚机控制台|单击操作列的控制台按钮。在弹出的窗口中输入密码进入控制台。
关闭虚机|单击操作列的下拉按钮，选择关机。在弹出的关机对话框中，再次单击关机按钮。
重启虚机|硬重启：单击操作列的下拉按钮，选择硬重启。在弹出的硬重启对话框中，输入验证码，单击重启按钮。软重启：单击操作列的下拉按钮，选择软重启。在弹出的软重启对话框中，输入验证码，单击重启按钮。
删除虚机|单击操作列的下拉按钮，选择删除。在弹出的删除对话框中，如果需要删除虚机挂载的云硬盘，可以一并勾选，单击确认按钮。
暂停虚机|单击操作列的下拉按钮，选择暂停。在弹出的暂停对话框中，再次单击暂停按钮。
挂起虚机|单击操作列的下拉按钮，选择挂起。在弹出的挂起对话框中，再次单击挂起按钮。
锁定虚机|单击操作列的下拉按钮，选择锁定。在弹出的锁定对话框中，再次单击锁定按钮。
修改虚机名称|单击操作列的下拉按钮，选择修改名称。在弹出的修改名称对话框中，输入新名称，单击保存按钮。
修改虚机类型|单击操作列的下拉按钮，选择修改类型。在弹出的修改类型对话框中，选择新类型，单击保存按钮。
调整虚机规格|单击操作列的下拉按钮，选择规格调整。在弹出的规格调整对话框中，选择新的规格，单击保存按钮。
在线扩容虚机|单击操作列的下拉按钮，选择在线扩容。在弹出的在线扩容对话框中，选择新的规格，单击保存按钮。
创建镜像快照|单击操作列的下拉按钮，选择创建镜像快照。在弹出的创建镜像快照对话框中，选择创建方式，输入快照名称，单击确认按钮。
配置CPU|单击操作列的下拉按钮，选择CPU配置。在弹出的CPU配置对话框中，输入频率上限和频率下限，单击保存按钮。
配置内存|单击操作列的下拉按钮，选择内存配置。在弹出的内存配置对话框中，输入内存上限和内存下限，单击保存按钮。
重建虚机|单击操作列的下拉按钮，选择重建。在弹出的重建对话框中，选择镜像和磁盘分区方式，单击确认按钮。
备份虚机|单击操作列的下拉按钮，选择虚机备份。在弹出的创建备份任务对话框中，输入名称，选择备份类型、备份方式、保存天数，单击确定按钮。
迁移/热迁移虚机|单击操作列的下拉按钮，选择迁移或热迁移。在弹出的迁移或热迁移对话框中，选择可用域和主机，单击确认按钮。
##### 设置标签分组 
###### 摘要 
组织管理员可以为虚机添加标签，可以通过标签分组查看虚机。 
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1634700092431.png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面。
单击标签分组，打开标签分组页面，如[图1](1634698972991.html#zc39d8c63c9ff4480a60253dc8f6b27ad__ade48e73-f8cf-4944-8ae4-fc7f250f77ab)所示。
图1  标签分组
[]images/1634700559287.PNG)
资源类型选择vm，单击查询按钮，显示所有虚机列表，如[图2](1634698972991.html#zc39d8c63c9ff4480a60253dc8f6b27ad__80b5c81f-a039-4294-a9c6-8f89a2763885)所示。
图2  查询虚机列表
[]images/%E6%9F%A5%E8%AF%A2%E8%99%9A%E6%9C%BA.PNG)
单击操作列的管理标签，弹出管理标签对话框，如[图3](1634698972991.html#zc39d8c63c9ff4480a60253dc8f6b27ad__60e18bf2-d906-4ff6-a123-2e3bc9db87bb)所示。
图3  管理标签
[]images/%E7%AE%A1%E7%90%86%E6%A0%87%E7%AD%BE.PNG)
填写标签键和标签值，单击确认按钮，完成添加。此时可以通过标签查询到对应虚机。
##### 设置垂直弹缩 
###### 摘要 
垂直弹缩允许虚机根据实际使用情况对CPU和内存资源进行升配或降配。本节介绍如何设置垂直弹缩。 
###### 前提 
组织已发布虚机 
主机超分要求：cpu、内存、磁盘均不能超分，即主机集群的超分比为1 
镜像要求：linux镜像、镜像大小在100 MB以内、最好qcow2格式（可选择cirros镜像） 
虚机规格要求：不要绑核、巨页，必须带扩展特性hw_max_vcpus: 32、hw_max_memory_mb: 131072 
已查询虚机的性能数据（CPU平均使用率和内存平均使用率） 
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1634704782880.png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面。
单击垂直弹缩，打开垂直弹缩页面，如[图1](1634701249966.html#zf9095bcbb7d846aeb1a53d1cea80ceb4__4e82649d-fb13-4ccd-8df8-d91de17a9431)所示。
图1  垂直弹缩
[]images/%E5%9E%82%E7%9B%B4%E5%BC%B9%E7%BC%A9.PNG)
切换到垂直弹缩策略页签，单击新建策略按钮，打开新建策略页面，如[图2](1634701249966.html#zf9095bcbb7d846aeb1a53d1cea80ceb4__6bbd6732-eca8-40d8-93fb-8e8bc55d872f)所示。
图2  新建策略
[]images/%E6%96%B0%E5%BB%BA%E7%AD%96%E7%95%A5.PNG)
填写参数，参数说明参见[表1](1634701249966.html#zf9095bcbb7d846aeb1a53d1cea80ceb4__6a7a3cd6-540e-4f26-8ee9-9b2aa0192fff)。
参数|说明
---|---
适用云环境|选择之前发布的虚机所在环境
弹缩规则|可根据虚机CPU平均使用率和虚机平均内存使用率进行升配或降配查询粒度可设置5分钟/15分钟/1小时观察周期可设置持续1/3/5/10/30/60/90个周期阈值可根据实际情况进行设置（1-100整数）
冷却时间|可设置15分钟/30分钟/1小时/3小时/6小时/12小时
目标规格|需要全部满足前提中的虚机规格要求
单击新建按钮。
切换到垂直弹缩对象页签，单击添加对象按钮，打开添加对象页面，如[图3](1634701249966.html#zf9095bcbb7d846aeb1a53d1cea80ceb4__2b7e89ca-02e0-4802-a5c2-203800c5e0a1)所示。
图3  垂直弹缩对象
[]images/%E5%9E%82%E7%9B%B4%E5%BC%B9%E7%BC%A9%E5%AF%B9%E8%B1%A1.png)
选择对应的云环境、虚机对象和垂直弹缩策略，单击添加按钮。
单击操作列的启用按钮，启用垂直弹缩。当虚机满足垂直弹缩策略中设置的弹缩规则的时候（即指标达到设置的阈值，持续设置的数个观察周期时，即可触发垂直弹缩），在告警管理→通知
中可以查询到相应的通知。
##### 设置共享文件 
###### 摘要 
TECS Director支持创建共享文件，通过自定义共享文件大小和相关属性，提供一个完整的文件存储系统。
本节介绍创建共享文件的步骤。 
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1640312219012.png)按钮，选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，单击组织名称，打开组织的详情页面。
单击共享文件，打开共享文件页面，如[图1](1640312206538.html#z15cee0cec1934702973bf9ce09fc87c6__d9710196-1e5f-4050-8054-cd7b997d5af0)所示。
图1  共享文件页面
[]images/1640312288185.png)
单击创建共享文件按钮，打开创建共享文件页面，如[图2](1640312206538.html#z15cee0cec1934702973bf9ce09fc87c6__ecc7c9cc-ad51-4ca5-b444-2f2ac32620f3)所示。
图2  创建共享文件页面
[]images/1640312338398.png)
填写参数，单击添加按钮，完成创建。
选择刚创建的共享文件，单击操作列的下拉按钮，选择创建快照，弹出创建快照对话框，如[图3](1640312206538.html#z15cee0cec1934702973bf9ce09fc87c6__dcd87c78-9512-47bc-95df-b518b5a1a031)所示。
图3  创建快照
[]images/1640312494510.png)
填写名称，单击创建按钮。
###### 相关任务 
在共享文件页面中，在共享文件列表的操作列下，可选择下拉菜单项对创建完成的共享文件进行删除。 
在共享文件页面中，在共享文件列表的操作列下，可选择下拉菜单项对创建完成的共享文件设置访问规则设置。 
##### 创建弹缩组 
###### 摘要 
本节描述创建弹缩组的操作步骤。 
###### 步骤 
选择运营→租户资源管理→组织资源管理
，打开组织资源管理页面，如[图1](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__05bb4950-df22-4806-be87-3f6f0867cb5e)所示。
图1  组织资源管理页面
[]images/1648091481405.png)
选择要操作的组织名称，单击弹缩组，打开弹缩组页面，如[图2](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__af29df63-f52d-4832-ae91-aeadde839246)所示。
图2  弹缩组页面
[]images/1648091555903.png)
单击切换至弹缩配置页签，如[图3](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__4e22ef6c-cd56-4a81-ae3e-65f5bda38fa4)所示。
图3  弹缩配置页签
[]images/1648091728654.png)
单击创建弹缩配置按钮，打开创建弹缩配置页面，如[图4](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__def3f827-e7f9-49c5-8f04-99ac47339b37)所示。
图4  创建弹缩配置页面
[]images/1648091780821.png)
按规划填写参数，单击添加按钮，完成弹缩配置的创建。
切换至弹缩组页签，单击创建弹缩组按钮，打开创建弹缩组页面，如[图5](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__3fc5e7a4-b4fa-4840-b74e-c372076d16d9)所示。
图5  创建弹缩组页面
[]images/1648092012126.png)
按规划填写参数，单击添加按钮，完成弹缩组的创建。
单击创建好的弹缩组名称，打开该弹缩组的详情页面，如[图6](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__17238f21-4a69-4746-9f89-48e4711d9c07)所示。
图6  弹缩组详情页面
[]images/1648092102975.png)
切换至弹缩策略页签，单击创建弹缩策略按钮，打开创建弹缩策略页面，如[图7](1648091357315.html#z3ece218072fa46f78bed3d92994e11c7__48a5bc8a-9c75-4759-9ea8-298f02b101fe)所示。
图7  创建弹缩策略页面
[]images/1648092160581.png)
按规划填写参数，单击添加按钮，完成弹缩策略的创建。
回到弹缩组页面，单击操作列的启用，可以启用弹缩组。
###### 相关任务 
弹性伸缩服务：
弹缩组1启动成功后，弹缩组默认创建3个虚机，如图8所示。图8  创建虚机 
弹缩组中会陆续弹出虚机，最终虚机变成5个，如图9所示。图9  虚机增加 
弹缩组中会陆续缩减虚机，最终虚机变成1个，如图10所示。图10  虚机减少 
### 中兴云操作指南 
#### 产品相关设置 
##### 注册和发布产品 
###### 摘要 
介绍如何注册和发布产品。 
###### 步骤 
在浏览器中输入网址[https://10.229.124.129/uportal](https://10.229.124.129/uportal)，打开中兴云管理门户登录页面，如[图1](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__f82faf79-2d2b-4e1d-a352-2b53b0718d5b)所示。
图1  登录页面
[]images/1625557931719.png)
输入用户名（admin）和密码（首次登录系统需要修改密码），单击登录按钮。登录成功后，单击顶部菜单栏的  按钮，选择运营→产品中心→产品目录
，打开产品目录页面，如[图2](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__c6b607d9-e43e-40e9-be9f-75bd758484aa)所示。
图2  产品目录
[]images/%E4%BA%A7%E5%93%81%E7%9B%AE%E5%BD%95.PNG)
单击产品注册按钮，打开产品注册页面，如[图3](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__6ac658a0-0103-41ce-aac9-18bac465a072)所示。
图3  产品注册
[]images/1634609649049.png)
参考[产品注册信息](1625558251896.html)，填写产品信息。
填写完成后单击提交按钮，回到产品目录页面，如[图4](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__7b46612b-cb6f-4394-9f89-fb35f1f60e8a)所示。在列表中可以看到注册的产品，产品状态为未发布。
图4  产品目录
[]images/1625558323304.png)
（可选）单击该产品的中的...→预览
，可以查看系统根据注册信息自动生成的产品介绍页，如[图5](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__a0769101-6492-44db-a011-f021729f424b)所示。
图5  预览
[]images/1625558464843.png)
回到产品目录页面，单击该产品的操作栏中的...→资源类型设置
，进入资源类型设置页面，如[图6](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__6831e0d1-9f6e-4760-b95d-56bffbee5c29)所示。
图6  设置资源类型
[]images/1625558521509.png)
单击创建按钮，弹出新增资源类型对话框，如[图7](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__91d7b1de-f773-4fa6-8c7f-24adde7dfe50)所示。
图7  新增资源类型对话框
[]images/1625558579347.png)
填写资源类型编码、中文名称、英文名称，单击确定按钮。资源类型编码要和产品上报资源信息时携带的资源类型保持一致。
回到产品目录页面，单击该产品的操作栏中的...→配额
，打开配额页面，如[图8](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__e62d4495-902a-4f8d-b9ef-58134f366e20)所示。
图8  配额设置
[]images/1625558706080.png)
单击编辑按钮，如[图9](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__defcc4bc-1809-4c82-937a-ef3ea9c9d1ba)所示，参考[产品注册信息](1625558251896.html)填写配额项。配额项的key值要和订购/变更产品下单时携带的配额标识保持一致，否则系统无法正确控制和统计本产品的配额占用情况。
图9  添加配额
[]images/1625558767751.png)
回到产品目录页面，单击该产品的操作栏中的发布，打开发布页面，如[图10](1625557840756.html#z97a97b5551fe4540a431fae9acce318f__52caa73f-1cf5-45f2-bc1c-bb3167c7bb52)所示。
图10  发布
[]images/1625558849388.png)
设置该产品的可见范围，单击发布按钮，该产品状态变为已上架。
 说明： 
可见范围可以选择全部组织或部分组织。选择全部组织，表示该产品对系统内所有组织下的用户可见；选择部分组织，则该产品只对选中的组织下的用户可见。 
###### 相关任务 
删除云产品：选择产品操作栏中的...→删除，在弹出的提示框中单击确定按钮，如图11所示，即可删除云产品。云产品将从产品目录和首页板块中删除，删除后的云产品会显示在产品回收页面的列表中。图11  删除产品 
还原云产品：选择产品中心→产品回收，打开产品回收页面，单击操作栏中的还原按钮，即可对删除的云产品进行还原。还原后的产品状态变为未发布。 
管理云产品可用区：选择产品操作栏中的...→可用区管理，打开可用区管理页面，如图12所示。图12  可用区管理页面单击选择可用区按钮，弹出选择可用区对话框，如图13所示。图13  选择可用区对话框勾选要添加的可用区，单击确定按钮。 
##### 新增云产品到滚动版块 
###### 摘要 
新增云产品到首页滚动板块可以增加产品曝光率。本节介绍如何新增云产品到滚动板块。 
###### 前提 
已使用超级用户admin或者具有域管理员角色的用户登录TECS Director。 
已完成云产品的注册，参考注册和发布产品。 
###### 步骤 
打开中兴云管理门户，单击顶部菜单栏的  按钮，选择运营→门户定义→报名管理
，打开报名管理页面，如[图1](1625559086300.html#zeea6e8133a574bbeb6a41b2baf7beac2__26b513c3-7600-4616-be67-353f1d8907b4)所示。
图1  报名管理
[]images/1625559269545.png)
单击产品板块报名按钮，打开产品板块报名页面，如[图2](1625559086300.html#zeea6e8133a574bbeb6a41b2baf7beac2__ca0322ae-e8f1-488f-ae5c-a2c9c208f0dd)所示。
图2  产品板块报名
[]images/%E9%A6%96%E9%A1%B5%E6%8A%A5%E5%90%8D2.png)
从产品名称下拉框选择要添加到滚动版块的产品，版块名称选择滚动版块。系统自动加载产品注册时填写的信息到页面上，如[图3](1625559086300.html#zeea6e8133a574bbeb6a41b2baf7beac2__8593babc-9fff-49de-a512-4c9633d35692)所示。
图3  首页报名
[]images/%E9%A6%96%E9%A1%B5%E6%8A%A5%E5%90%8D3.png)
根据需要修改背景图片、产品主题、产品描述，页面顶部会根据修改的结果显示该产品在滚动版块的显示效果。 
单击提交按钮，完成云产品添加到滚动版块的报名。
##### 审批版块报名 
###### 摘要 
介绍如何审批版块报名。 
###### 前提 
已登录超级用户admin或者具有域管理员角色的用户。 
已完成云产品的版块报名，参考新增云产品到滚动版块。 
###### 步骤 
打开中兴云管理门户，单击顶部菜单栏的  按钮，选择运营→门户定义→报名审批
，打开报名审批页面。
单击版块名称下拉列表，选择要审批的版块。其中layoutBulletin为小版块，layoutRolling为滚动版块，这里选择layoutRolling选项，如[图1](1625557640891.html#zd1d5d31f49034db287480405bfc3501d__b3554920-c4e5-47b4-9494-dc424332f052)所示。
图1  版块列表
[]images/1625559969704.png)
单击列表中的版块标题，进入审批页面，如[图2](1625557640891.html#zd1d5d31f49034db287480405bfc3501d__62583758-90dd-4a65-9ae1-c659a5abccf0)所示。
图2  审批页面
[]images/1625560001555.png)
在权重值一栏填写大于0的数字，单击确定按钮。完成审批后，在报名管理页面能看到已经审批通过的产品信息，在中兴云运营首页的滚动版块，能看到审批通过的产品信息。
 说明： 
首页滚动版块会根据产品的权重值从大到小排列产品。产品数目超过版块的最大显示数量时，排在后面的产品将不会显示。 
##### 删除首页版块的云产品 
###### 摘要 
介绍如何将云产品从首页版块删除。 
###### 前提 
已登录超级用户admin或者具有域管理员角色的用户。 
已添加云产品到首页版块。 
###### 步骤 
打开中兴云管理门户，单击顶部菜单栏的  按钮，选择运营→门户定义→报名管理
，打开报名管理页面，如[图1](1625560162680.html#zdec5a5c3045944ac98bef32ebf432d4c__3fa0f4d5-b977-4671-a226-99a71f86dddf)所示。
图1  报名管理
[]images/1625560494228.png)
根据产品名称，单击该产品操作栏的删除按钮，在弹出的确认对话框中单击确定按钮，完成删除。
##### 管理产品类别 
###### 摘要 
本节介绍如何设置产品类别。设置完成后，注册产品时可以选择相应的产品大类和产品小类。 
###### 前提 
已登录超级用户admin或者具有域管理员角色的用户。 
###### 步骤 
打开中兴云管理门户，单击顶部菜单栏的  按钮，选择运营→产品中心→产品类别管理
，打开产品类别管理页面，如[图1](1634612527751.html#z8ae5f8d7958a4f69b1ff61d6eecc57f4__ba1c22a4-aeb2-4603-acdb-0b4fb48dc269)所示。
图1  产品类别管理
[]images/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%88%AB%E7%AE%A1%E7%90%86.png)
单击新增按钮，弹出新增类别对话框，如[图2](1634612527751.html#z8ae5f8d7958a4f69b1ff61d6eecc57f4__a8f41574-85f1-45da-95af-8efb69b2bf92)所示。
图2  新增类别
[]images/%E6%96%B0%E5%A2%9E%E7%B1%BB%E5%88%AB.PNG)
填写类别编码、中文名称、英文名称，单击确定按钮，完成产品类别新增。
单击操作栏中的子类管理，打开产品子类别管理页面，如[图3](1634612527751.html#z8ae5f8d7958a4f69b1ff61d6eecc57f4__712b21fd-c9b2-4fc4-af3c-291ac55f8cff)所示。
图3  子类别管理
[]images/%E4%BA%A7%E5%93%81%E5%AD%90%E7%B1%BB%E5%88%AB%E7%AE%A1%E7%90%86.png)
单击新增按钮，弹出新增类别对话框，填写类别编码、中文名称、英文名称，单击确定按钮，完成产品子类别新增。
##### 管理产品定价 
###### 摘要 
Director支持定价与计费服务，只有在需要对需要的云产品进行计价的时候配置，如VPN、容器集群等服务。启用计价时，需要云产品开发商分别提供云产品相关的规格、属性和定价信息，通常为json文件。 
###### 前提 
已使用超级用户admin或者具有域管理员角色的用户登录中兴云管理门户。 
###### 步骤 
属性管理
单击顶部菜单栏中的[]images/9bcaa73d5a8b48519365f4cb2fa43e4f.png)按钮，选择运营→产品中心→产品目录→全部产品
，打开全部产品页面。
找到需要的产品，单击操作列的...→属性管理
，打开属性管理页面，如[图1](1672189101620.html#zf2fa48cd17d94e1a9b13a6319bb206b0__44157aed-f13d-4909-8e0a-61e19cb66256)所示。
图1  属性管理页面
[]images/f5c86eff82714ec9a2071f526fd049a1.png)
单击属性导入按钮，打开导入文件对话框，如[图2](1672189101620.html#zf2fa48cd17d94e1a9b13a6319bb206b0__38d1c8f4-e3c6-45d6-8039-1abb6942a0d6)所示。
图2  属性导入文件对话框
[]images/2%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
根据需要导入文件，单击导入完成文件导入。
规格管理
单击顶部菜单栏中的[]images/d17a4b41fc384c2190c61dc0ea4c3f13.png)按钮，选择运营→产品中心→产品目录→全部产品
，打开全部产品页面。
找到需要的产品，单击操作列的...→规格管理
，打开规格管理页面，如[图3](1672189101620.html#zf2fa48cd17d94e1a9b13a6319bb206b0__9355d141-de06-47f3-acaa-f71f10586035)所示
图3  规格管理页面
[]images/79a6ab6532ff4385a71c15c54568be99.png)
单击规格导入按钮，打开导入文件对话框，如[图4](1672189101620.html#zf2fa48cd17d94e1a9b13a6319bb206b0__83865ad3-1d52-49ae-a344-efe279939205)所示。
图4  规格导入文件对话框
[]images/4%E8%A7%84%E6%A0%BC%E5%AF%BC%E5%85%A5%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
根据需要导入文件，单击导入完成文件导入。
定价管理
单击顶部菜单栏中的[]images/54bb320b7f4143199992939de1539599.png)按钮，选择运营→产品中心→产品目录→全部产品
，打开全部产品页面。
找到需要的产品，单击操作列的...→定价管理
，打开定价管理页面，如[图5](1672189101620.html#zf2fa48cd17d94e1a9b13a6319bb206b0__d10b8cc3-aaad-45da-823f-a0f6c5f22b73)所示。
图5  定价管理页面
[]images/f7a7370106054065a318b5dd41ce1f44.png)
 说明： 
如果没有价格文件，也可以直接在页面进行价格设置。 
单击价格导入按钮，打开导入文件对话框，
根据需要导入文件，单击导入完成文件导入。
价格信息设置成功后，点击启用计价按钮，后面申请该云产品时进行计价。
 说明： 
点击启用计价信息后，页面会提示并二次确认，如果确定要计价，点击确定按钮。
##### 查看产品订单详情 
###### 摘要 
在订单列表中可以查看本产品的全部订单，本节介绍查看订单列表和订单详情的方法。 
###### 前提 
已使用超级用户admin或者具有产品管理员角色的用户登录中兴云管理门户。 
###### 步骤 
单击顶部菜单栏的  按钮，选择运营→产品中心→产品目录
，打开产品目录页面。
单击操作列的...→订单列表
，打开订单列表页面，如[图1](1640072064691.html#z86d343d16c6642fdb3064e5869b43dba__22e18179-b333-456e-b67f-5c8b28ceca9d)所示。
图1  订单列表页面
[]images/1640144175693.png)
单击相应订单的订单号，打开订单详情页面，如[图2](1640072064691.html#z86d343d16c6642fdb3064e5869b43dba__d49dad12-d114-4c25-b8f9-ac1c3e1554c9)所示。
图2  订单详情页面
[]images/1640144207113.png)
##### 查看产品费用统计 
###### 摘要 
在费用统计中可以查看本产品的费用趋势、账单统计等信息，本节介绍查看费用统计的方法。 
###### 前提 
已使用超级用户admin或者具有产品管理员角色的用户登录中兴云管理门户。 
###### 步骤 
单击顶部菜单栏的  按钮，选择运营→产品中心→产品目录
，打开产品目录页面。
找到相应产品，单击操作列的...→费用统计
，打开费用统计页面，如[图1](1640072375175.html#z22b7c5956b4845b2ad0712d37720cb49__4d7bf989-366d-48ee-8a85-29745eeaa775)所示。
图1  费用统计页面
[]images/1640144267409.png)
选择账期、账户，查看费用趋势折线图、柱状图。
##### 设置产品负责人 
###### 摘要 
可以设置产品的负责人，本节介绍产品负责人的设置方法。 
###### 前提 
已使用超级用户admin或者具有产品管理员角色的用户登录中兴云管理门户。 
###### 步骤 
单击顶部菜单栏的  按钮，选择运营→产品中心→产品目录
，打开产品目录页面。
找到需要设置负责人的产品，单击操作列的...→产品负责人管理
，打开产品负责人管理页面，如[图1](1640071600269.html#zcb40bb4ec99242aeb42f848001d11cf5__c2d43083-496e-4f61-bca7-b58b2ce7e808)所示。
图1  产品负责人管理页面
[]images/1640144316878.png)
单击添加用户按钮，弹出添加用户对话框。
输入用户名，单击确定按钮，完成添加负责人。
##### 设置产品运营能力 
###### 摘要 
可以设置产品的运营能力，本节介绍产品运营能力的设置方法。 
###### 前提 
已使用超级用户admin或者具有产品管理员角色的用户登录中兴云管理门户。 
###### 步骤 
单击顶部菜单栏的  按钮，选择运营→产品中心→产品目录
，打开全部产品页面，如[图1](1674007652668.html#z4740f2c68ac84594a3a0fdcd56f5516a__00b40b58-f43f-4c3e-ba77-2e720f7d3b09)所示。
图1  产品目录页面
[]images/91c20c795659408690b432a2f87da972.png)
找到需要设置运营能力的产品，单击操作列的...→运营能力管理
，打开运营能力管理页面，如[图2](1674007652668.html#z4740f2c68ac84594a3a0fdcd56f5516a__8095c255-1797-4fbb-85de-7af9aaa0184f)所示。
图2  能力运营管理页面
[]images/4d07c641d1f147bc84b0a98c65942295.png)
根据规划对订购设置、添加用户、设置和计量进行设置。单击确定按钮，完成产品运营能力的设置。
#### 门户页面设置 
##### 设置首页顶栏菜单 
###### 摘要 
用户在中兴云运营门户的首页可以看到顶部菜单栏，菜单显示的链接可实时变更，在中兴云管理门户可设置中兴云运营门户首页顶部菜单栏显示的内容。 
###### 前提 
已使用超级管理员用户admin登录中兴云管理门户。 
###### 步骤 
在中兴云管理门户，单击顶部菜单栏中的[]images/1640314020655.png)按钮，选择运营→门户定义→首页顶栏菜单设置
，打开首页顶栏菜单设置页面，如[图1](1640313858317.html#z23b069f78f614ce8bf9b83df21752b20__69dc3209-1dd5-4835-b648-56c1a3eba1e4)所示。
图1  首页顶栏菜单设置页面
[]images/1640314069594.png)
设置首页顶栏菜单的内容，可进行上移、下移、新增、删除等操作。 
单击编辑子菜单按钮，可以依次设置二级菜单、三级菜单、四级菜单。
设置完成后，单击保存按钮。
##### 设置首页版块 
###### 摘要 
用户在中兴云运营门户的首页可以各种版块，包括滚动版块、小版块、产品展示版块，在中兴云管理门户可以更改首页版块的内容。 
###### 前提 
已使用超级管理员用户admin登录中兴云管理门户。 
###### 步骤 
登录中兴云管理门户，单击顶部菜单栏中的[]images/1640314290378.png)按钮，选择运营→门户定义→版块管理
，打开版块管理页面，如[图1](1640314272665.html#zbe86aaf12cd94dfdaa53c3898c46fb98__f14238d4-a621-4c28-aba4-30f1c7757eb7)所示。
图1  版块管理页面
[]images/1640314426025.png)
单击新增版块按钮，打开版块信息页面，如[图2](1640314272665.html#zbe86aaf12cd94dfdaa53c3898c46fb98__20482e88-259e-490b-a91a-abb0f0627bba)所示。
图2  版块信息页面
[]images/1640314584177.png)
 说明： 
目前门户主要支持3种类型的版块，分别是layoutRolling滚动版块、layoutBulletin小版块、layoutExhibition1-6产品分类展示版块，其中layoutExhibition1-6为表示最大支持6个分类，需要注意版块名称必须按上述名称命名。 
填写版块名称、最大展示数、版块标题以及参数信息，参数名称必须与版块类型对应。
单击确定按钮。
##### 设置首页页尾链接 
###### 摘要 
用户在中兴云运营门户的首页可以看到各种推荐的链接，页尾链接可实时变更，在中兴云管理门户可设置中兴云运营门户首页页尾链接显示的内容。 
###### 前提 
已使用超级管理员用户admin登录中兴云管理门户。 
###### 步骤 
登录中兴云管理门户，单击顶部菜单栏中的[]images/1640314863477.png)按钮，选择运营→门户定义→首页页尾链接设置
，打开首页页尾链接设置页面，如[图1](1640314849165.html#z0307d821a5a0415b968cc3dd5c520092__52453c7b-326e-4214-b9a4-8ae8e84c4270)所示。
图1  首页页尾链接设置
[]images/1640314951695.png)
设置首页页尾链接的内容，可进行上移、下移、新增、删除等操作。 
单击编辑子菜单按钮，可以设置二级菜单。
设置完成后，单击保存按钮。
##### 设置控制台帮助栏链接 
###### 摘要 
用户在中兴云运营门户的控制台页面可以看到帮助栏版块，帮助栏显示的链接可实时变更，在中兴云管理门户可设置中兴云运营门户控制台帮助栏的链接。 
###### 前提 
已使用超级管理员用户admin登录中兴云管理门户。 
###### 步骤 
登录中兴云管理门户，单击顶部菜单栏中的[]images/1640315100311.png)按钮，选择运营→门户定义→控制台帮助栏链接设置
，打开控制台帮助栏链接设置页面，如[图1](1640315087749.html#zda50a10db6bc4fb8a65a1e6e09e29e84__df306835-fcff-468a-a059-fa151a4ab90d)所示。
图1  控制台帮助栏链接设置页面
[]images/1640315220116.png)
设置控制台帮助栏链接的内容，可进行上移、下移、新增、删除等操作。 
设置完成后，单击保存按钮。
#### 创建组织 
##### 摘要 
本节描述在线添加组织的步骤。 
##### 前提 
已创建资源组。 
使用获得相应操作权限的账户登录TECS Director。 
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1656037970120.png)按钮，选择运营→租户资源管理→组织管理
，打开组织管理页面，如[图1](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__96548ebb-8311-46ef-87fe-d3f090ae91af)所示。
图1  组织管理页面
[]images/1640225208589.png)
单击添加组织按钮，打开添加组织-基本信息页面，填写名称和组织域，并选择至少一个已有用户作为组织管理员，如[图2](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__2a50e2e1-cc4b-4c28-a883-21d6a1f7b493)所示。
图2  添加组织-基本信息
[]images/1640225264232.png)
单击下一步按钮，切换至添加组织-选择可用区页签，为组织设置可用区，如[图3](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__40a55632-48ee-4ba4-a6c3-ffddbac0bbaa)所示。
图3  添加组织-选择可用区
[]images/1640225308176.png)
单击下一步按钮，切换至添加组织-设置配额页签，根据规划设置配额，如[图4](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__e9c19704-3736-40f3-9b34-68e552600940)所示。
图4  添加组织-设置配额
[]images/1640225348962.png)
 说明： 
设置组织配额之前需要注册和发布相应产品，参见注册和发布产品
。
单击下一步按钮，切换至添加组织-分配VDC（可选）页签，可以为组织分配VDC，如[图5](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__05743e06-0a38-4477-b91b-e3abd076edb0)所示。
图5  添加组织-分配VDC（可选）
[]images/1656037910144.png)
单击下一步按钮，切换至添加组织-检查确认页签，确认之前设置是否正确，如[图6](27-%E5%88%9B%E5%BB%BA%E7%BB%84%E7%BB%87.html#%E5%88%9B%E5%BB%BAORG-65E8299D__ae8750b6-f6e3-4ae8-b7db-b5f0542c4f27)所示。
图6  添加组织-检查确认
[]images/1640225408540.png)
单击确认按钮，完成组织的创建。
##### 相关任务 
在组织列表的操作列中，选择菜单项删除，打开确认提示框。单击删除按钮，可删除已创建的组织。
#### 创建VDC 
##### 摘要 
VDC（Virtual Data Centers）是一组虚拟资源的容器，是IaaS云向租户（组织）提供资源的基本单位。
本节描述如何创建VDC。
##### 前提 
使用领域管理员账户登录TECS Director。
##### 相关信息 
VDC具备以下特征：
VDC是独立的实体，具备自身的IP地址、自身的通信网络、甚至有自身的管理系统等。 
1个物理DC可以被多个VDC共享。 
1个VDC可以跨多个物理DC。 
VDC包含资源和服务两方面内容。 
VDC能提供端到端的业务。 
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572574195184.png)按钮，选择运营→租户资源管理→VDC
，打开VDC页面，如[图1](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__fig_-142331-664B771E)所示。
图1  VDC页面
[]images/Snap123.png)
单击+创建VDC按钮，打开创建VDC页面，在基本信息选项卡页面中，填写配置参数，如[图2](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__9baa4ddf-9602-43be-954d-0d537bda0149)所示。
图2  创建VDC-基本信息
[]images/1551061514763.png)
单击下一步按钮，进入选择云环境选项卡，为VDC选择云环境，如[图3](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__fig_-142531-664C5682)所示。
图3  创建VDC-选择云环境
[]images/4.3-3%E9%80%89%E6%8B%A9%E4%BA%91%E7%8E%AF%E5%A2%83.png)
单击下一步按钮，进入资源配置选项卡页面，依次配置云环境下的配额、计算资源、存储资源、网络资源和项目名称参数，如[图4](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__33b6b0f0-4bb0-4121-9c9b-6cc9da6c77d1)所示。
图4  创建VDC-资源配置
[]images/1563785122846.png)
 说明： 
其中，网络资源中可添加的物理网络为云环境侧已配置的物理网络。 
单击项目名称设置下的开关[]images/1563781124850.png)，选择云环境上已有租户，可以将已有的项目纳管进来，如[图5](28-%E6%B7%BB%E5%8A%A0VDC.html#%E6%B7%BB%E5%8A%A0VDC-65E7F967__5c9eeef5-7099-4449-82a3-40b143e735bf)所示。
图5  设置项目名称
[]images/1563785055362.png)
 说明： 
使用已建租户创建VDC，设置修改的配额会同步更改到对应租户上。
单击下一步按钮，进入检查确认选项卡页面，检查创建VDC的参数是否正确。
单击创建按钮，完成VDC的创建。
##### 相关任务 
VDC创建完成后，在VDC页面可对其执行如下操作：
如果…|那么…
---|---
查看VDC详情|在VDC列表中单击VDC名称，打开VDC详情页面。可以查看基本信息和资源配置信息。在配额和资源信息区域框中单击调整配额按钮，可修改该VDC的资源及配额信息。
删除VDC|在VDC列表中单击操作列中的删除按钮，打开确认提示框。单击确认按钮。
绑定项目|选择未绑定项目的VDC，在VDC列表中单击操作列中的绑定&解绑项目按钮，打开绑定&解绑项目页面。单击绑定按钮，选择项目上已有的租户，对云环境上已有租户进行绑定。
解绑项目|选择已有绑定项目的VDC，在VDC列表中单击操作列中的绑定&解绑项目按钮，打开绑定&解绑项目页面。单击解绑对现在绑定租户解绑。
#### 绑定组织和VDC 
##### 摘要 
本节介绍为组织绑定VDC的步骤。
##### 前提 
已创建组织。 
已创建VDC。 
使用获得相应操作权限的账户登录TECS Director。 
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572935632094.png)按钮，选择运营→租户资源管理→组织管理
，打开组织管理页面。
单击要绑定VDC的组织名称，进入组织详情页面，切换到VDC子页面，如[图1](1563178123213.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__57b7c39c-3a8e-490d-9216-e07e99ad9967)所示。
图1  组织详情页面
[]images/2.png)
单击+添加VDC按钮，打开添加VDC页面，页面显示了可绑定的VDC列表，如[图2](1563178123213.html#%E6%96%B0%E5%BB%BAXX-0B9872C5__05511b5b-dac7-4f10-bdff-018a198b8e2a)所示。
图2  添加VDC页面
[]images/3.png)
选择一个VDC，单击添加按钮，完成组织和VDC的绑定。
#### 添加组织管理员 
##### 摘要 
系统在创建组织管理员时绑定相应组织。 
本节描述为组织添加管理员的操作步骤。 
##### 前提 
使用获得相应操作权限的账户登录TECS Director。 
已创建组织。 
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1602641268853.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面，如[图1](29-%E6%B7%BB%E5%8A%A0%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86%E5%91%98.html#%E6%B7%BB%E5%8A%A0ORG%E7%AE%A1%E7%90%86%E5%91%98-65E8365A__00f0467a-62c9-46b0-a1b2-40b871d35e24)所示。
图1  用户管理页面
[]images/1602641268773.png)
单击+新建用户按钮，打开新建用户页面，默认显示基本信息页签，如[图2](29-%E6%B7%BB%E5%8A%A0%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86%E5%91%98.html#%E6%B7%BB%E5%8A%A0ORG%E7%AE%A1%E7%90%86%E5%91%98-65E8365A__61c9bac6-bdf8-4c2e-a3d2-4d89e8e6c073)所示。
图2  新建用户-基本信息
[]images/1602641398977.png)
根据规划填写参数。 
单击下一步按钮，切换到权限分配页签，如[图3](29-%E6%B7%BB%E5%8A%A0%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86%E5%91%98.html#%E6%B7%BB%E5%8A%A0ORG%E7%AE%A1%E7%90%86%E5%91%98-65E8365A__804e174f-7a55-4026-ac1d-3e9c6d100c78)所示。
图3  新建用户-权限分配
[]images/1602641479439.png)
在系统选择框中删除本地系统/默认租户，在系统下拉框中选择需要绑定的组织，在角色选择框中勾选组织管理员、安全管理员和工单处理人。
单击新建按钮，完成组织管理员的添加。
##### 相关任务 
在用户管理页面，单击操作列下的操作按钮，可对该组织管理员进行修改、删除、复制、查看用户权限和设置日志查看范围操作。
#### 授权产品访问策略 
##### 摘要 
介绍如何新建端用户并为端用户授权产品访问策略。 
##### 前提 
已登录组织管理员角色的用户。 
##### 步骤 
 说明： 
需要使用拥有用户管理权限的角色创建组织的端用户，若已创建该组织的端用户，跳过步骤1~步骤4。 
打开中兴云运营门户，单击顶部菜单栏的  按钮，选择更多→安全管理→用户管理
，打开用户管理页面，如[图1](1625562841634.html#zc253ca4e53ce449fbd25f3f3ce018f61__df368587-ed58-4fbe-b39d-0da03dcab10b)所示。
图1  用户管理
[]images/1625562882164.png)
单击新建用户按钮，进入新建用户页面，如[图2](1625562841634.html#zc253ca4e53ce449fbd25f3f3ce018f61__8cfbda3a-de76-4f68-9a51-5829faf7e0b1)所示。
图2  新建用户
[]images/1625562971057.png)
填写基本信息，其中账户规则选择EndUserRule，单击下一步，进入权限分配页面，如[图3](1625562841634.html#zc253ca4e53ce449fbd25f3f3ce018f61__28b554c6-8f46-40d4-97bb-4add87c3bb84)所示。
图3  权限分配
[]images/1625563323203.png)
在系统下拉框中选择该用户所属的组织，在角色列表框中勾选该组织下的“端用户”角色，单击新建按钮，用户创建成功。
选择运营→租户资源管理→人员权限管理
，默认打开组织用户页面，单击左侧菜单栏的授权，进入授权页面，如[图4](1625562841634.html#zc253ca4e53ce449fbd25f3f3ce018f61__05ce3f52-aee4-4de2-922a-5049b10f5281)所示。
图4  授权
[]images/1625563427933.png)
单击新增授权按钮，进入新增授权页面，如[图5](1625562841634.html#zc253ca4e53ce449fbd25f3f3ce018f61__8e993800-f491-49e3-84fd-49f153a1dd8f)所示。在授权用户的下拉列表框中，选择刚才创建的端用户，勾选一条要为其授予的权限策略。
图5  新增授权
[]images/1625563448549.png)
单击确认，授权成功，返回授权列表，可以看到新增一条授权记录。
（可选）若要解除授权，单击操作栏的移除授权按钮。
#### 订购云产品资源 
##### 摘要 
介绍如何订购云产品资源。 
##### 前提 
已登录组织管理员或端用户。 
组织必须是云产品A发布时设置可见的范围内，并且该组织必须有该云产品A足够的配额。 
若是端用户账号，需要组织管理员授权所要购买云产品A的权限策略。 
##### 步骤 
在浏览器中输入https://IP:40446/userportal，打开中兴云运营门户登录页面，如[图1](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__dde78c3c-e714-4489-9522-747aea88b7bf)所示。
图1  中兴云运营门户
[]images/1625564062828.png)
输入用户名和密码，单击登录按钮，登录成功后，在中兴云运营门户首页右上角选择当前登录用户所属的组织，如[图2](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__6ad43f25-0e54-45cd-a9cb-f54fd78c809b)所示。
图2  选择组织
[]images/1625568432744.png)
 说明： 
登录用户属于多个组织时，下拉框会列出所有组织名称以便用户选择。 
选择组织之后（如选择了xuhaoOrg），则后续订购的资源就属于该组织的资源，每订购一个资源，都会消费该组织的配额。 
在首页的滚动版块浏览云产品，找到要购买的云产品，单击立即购买按钮，打开订购页面，如[图3](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__a32bc6fd-44a2-42cb-b895-cd8d6ece9ddb)所示。
图3  资源购买
[]images/1625568527215.png)
根据云产品的特性和页面的指引，填写资源参数。如购买ECS产品，需要填写基本信息、启动源、云硬盘、网络、高级配置等参数。填写完成后如[图4](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__301c1ea4-f9ba-41af-bebf-5d3173758d39)所示。
图4  填写参数
[]images/1625568772559.png)
单击提交申请按钮，打开订单详情页面，如[图5](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__c5dd9bb3-3b5d-4e15-b37a-c731f417e61f)所示。
图5  订单详情页面
[]images/1640144864991.png)
单击支付订单按钮，打开支付对话框，如[图6](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__22e8b2c3-c9f4-463e-9870-d146cb099792)所示。选择支付账户，单击确定，完成订单提交，进入当前组织的订单列表页面，可以查看该订单状态，如[图7](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__1956fa96-32cd-4cb1-a00c-c792cde5f620)所示。
图6  支付
[]images/1640144900820.png)
图7  订单列表
[]images/1625568879130.png)
 说明： 
若组织管理员配置当前组织购买资源需要审批，则提交订单之后，系统先进行审批流程（向相关审批人发送邮件，提示审批），审批通过之后，自动根据订单中对云产品资源的参数创建云资源，分配给当前组织。审批订单的步骤，参考审批云产品资源订单。 
若组织管理员配置当前组织购买资源无需审批，则提交订单之后，系统自动根据订单中对云产品资源的参数创建云资源，分配给当前组织。 
单击对应订单的订单号，打开订单详情页面，查看订单详情以及审批信息，如[图8](1625563741023.html#z709c1c650e564abcb8a069ce8748d0a4__28288647-c224-4c6d-9d7b-b6ec97fe9902)所示。
图8  订单详情
[]images/1625568978333.png)
##### 相关任务 
虚机划拨： 
在控制台页面已开通的服务区域，单击任意一个产品名称，打开已购买产品的控制台。
单击弹性云服务器，打开弹性云服务器控制台。
在弹性云服务器列表中，单击操作列的下拉按钮，选择划拨。
输入接收人，单击确认按钮。
##### 订购弹性云服务器 
###### 摘要 
介绍如何订购弹性云服务器。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__8e7b04e8-abc3-4c20-8742-4aa8dfb976d0)所示。
图1  控制台页面
[]images/1640740965221.png)
在控制台单击弹性云服务器，打开该产品的展示页面，如[图2](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__4d7178e3-8cf2-4c6e-a54c-d44eb406fadb)所示。
图2  弹性云服务器
[]images/1640741021214.png)
单击立即购买，打开订购-基础配置页面，根据规划配置部署位置、规格、镜像等参数，如[图3](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__f3aae8fe-ba73-4754-a433-f5d51000939e)所示。
图3  订购-基础配置页面
[]images/1647938603486.png)
并选择单击下一步按钮，进入订购-网络配置页面，为虚机配置VPC、子网等参数，如[图4](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__847520e1-26e5-4845-ba75-7d95dc88ae2f)所示。
图4  订购-网络配置页面
[]images/1647939945255.png)
单击下一步按钮，进入订购-高级配置页面，为虚机配置相关参数，如[图5](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__9a9d5055-2357-47df-a1ed-b6ae1c3a5a8f)所示。
图5  订购-高级配置页面
[]images/1648001660549.png)
单击下一步按钮，进入订购-确认配置页面，如[图6](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__bbda4599-f24b-4061-b635-b755af17af43)所示。
图6  订购-确认配置页面
[]images/1648001787313.png)
检查虚机申请相关参数配置是否正确，单击确认订购按钮，打开订单详情页面，如[图7](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__0e0573d6-eba3-4456-99fe-51b5de9e0d55)所示。
图7  订单详情页面
[]images/1640742016774.png)
单击立即支付按钮，在弹出的支付对话框选择账户，单击确定按钮，完成订购。
###### 相关任务 
管理镜像： 
在控制台页面，单击已开通服务区域中的弹性云服务器，打开云服务器控制台页面，如[图8](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__b03a1a5f-d3aa-4a70-a560-3b4d627fb98e)所示。
图8  云服务器控制台页面
[]images/1656575998237.png)
在左侧导航树中选择镜像，打开镜像页面，如[图9](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__d5b667af-164a-4024-908a-70d52f15e5ac)所示。
图9  镜像页面
[]images/1656576040820.png)
在此页面可进行云服务器镜像管理，包括发布私有镜像、查看公共镜像、上传镜像到镜像仓库等。 
创建虚拟快照： 
在控制台页面，单击操作列的创建虚机快照，如[图10](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__f7587254-7b8d-49fa-afa4-1b4576dd17ce)所示。
图10  产品控制台页面
[]images/1.png)
选择创建方式和静默状态，配置完后单击确认按钮，如[图11](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__9a239fa6-1182-490e-a827-694591ea14bb)所示。
图11  创建虚机快照
[]images/17d6d36f32f44221a6b446ba7f4ce054.png)
在控制台页面，查看云服务器状态，如[图12](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__7940e6c3-a704-4bb1-8d0c-b123fc8f0acc)、[图13](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__0413b2bd-16a9-464d-9a07-5c78c26d1af7)所示。
图12  快照创建前云服务器状态
[]images/7074d9fd4f6d48f493dfab1e5e0b0377.png)
图13  快照创建后云服务器状态
[]images/4.png)
单击需要的云服务器，进入云服务器详情页面，查看创建好的快照，如[图14](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__3d184b12-ddc7-4ddc-92a6-8c0caab03107)所示。
图14  查看云服务器快照
[]images/5.png)
单击虚机快照区域操作列的恢复按钮，对虚机快照进行恢复，如[图15](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__5ed9e4a3-1424-4152-b0fa-64b82899b86e)所示。
图15  虚机快照恢复
[]images/6.png)
迁移虚机历史记录： 
在控制台页面，单击操作列的迁移按钮，如[图16](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__92aadf59-ee5b-42b9-bb22-5fd03b09d3e2)所示。
图16  产品控制台页面
[]images/16e93ff57d3944f595f921f2a1254d91.png)
在迁移详情页面，选择可用域和主机，单击确认按钮，如[图17](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__706194f9-c5be-4f3f-9af2-af9226e45ae1)所示。
图17  迁移对话框
[]images/44372f513d184849bc6d069577160282.png)
迁移结束后，在控制台页面，查看云服务器状态，如[图18](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__b1f640f2-fd00-4685-9590-fc9ac71997e4)、[图19](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__c5b02dec-030d-44ff-a554-becd1724d2fb)所示。
图18  迁移前云服务器状态
[]images/e1d710ae8b9244d99e463f6a0abed16a.png)
图19  迁移后云服务器状态
[]images/5cdd33d98e864b19922ebf06a4ffd743.png)
单击查看历史任务，如[图20](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__dfa6652b-3572-4d01-a464-fc55e9a6b063)所示。
图20  查看历史任务
[]images/0069afb33e8948af94f3bb9583010a7e.png)
在历史任务详情页面，可以查看任务类型、开始时间、结束时间、耗时、源主机和目的主机，如[图21](1640740833690.html#zbbb0e17c32e4468dac078f2646c72d58__897a13be-264c-4377-b30b-ea802da7e6b9)所示。
图21  历史任务详情页面
[]images/79f62756072b4d12820a23ebe124d4ed.png)
##### 订购裸金属服务器 
###### 摘要 
介绍如何订购裸金属服务器。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1650766100999.html#z0a53821d4ce74fac8a1c50b47c08466d__c016971a-149c-4f5b-826c-80bf268a18c0)所示。
图1  控制台页面
[]images/1650767491015.png)
单击裸金属服务器，打开该产品的展示页面。
单击立即购买，打开订购-基础配置页面，如[图2](1650766100999.html#z0a53821d4ce74fac8a1c50b47c08466d__b140dd46-c8ca-42f6-b891-538c09b46ba0)所示。
图2  订购-基础配置页面
[]images/1650767546783.png)
按规划填写部署位置、规格、镜像、系统盘等参数，单击下一步按钮，打开订购-网络配置页面，如[图3](1650766100999.html#z0a53821d4ce74fac8a1c50b47c08466d__cf7402e0-fa7c-4277-9423-be139e1ac0df)所示。
图3  订购-网络配置页面
[]images/1650767810882.png)
配置VPC和子网，单击下一步按钮，打开订购-高级配置页面，如[图4](1650766100999.html#z0a53821d4ce74fac8a1c50b47c08466d__031d9f39-b544-4618-9cd9-342777257aec)所示。
图4  订购-高级配置页面
[]images/1650767899989.png)
填写云服务器名称，单击确认申请按钮，打开订购-确认配置页面，如[图5](1650766100999.html#z0a53821d4ce74fac8a1c50b47c08466d__ed37d615-5817-4d9a-9dd5-fa2e8f1ef773)所示。
图5  订购-确认配置页面
[]images/1650767961785.png)
单击确认订购按钮，打开订单详情页面，如[图6](1650766100999.html#z0a53821d4ce74fac8a1c50b47c08466d__5de86679-4db3-4362-b177-63a4b4113b13)所示。
图6  订单详情页面
[]images/1650768009403.png)
单击立即支付按钮，完成订购。
###### 相关任务 
在线重置密码：
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面。
单击需要的产品，进入裸金属服务器详情页面。 
单击操作列的更多→修改管理员密码
，进入密码重置页面。
根据需要在密码重置页进行密码重置。 
##### 订购云硬盘 
###### 摘要 
介绍如何订购云硬盘。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1640742127816.html#z58b0c18e4290495ea81f7546cba5ee05__ca6e6a2f-dac6-4d31-a9fe-726d91233811)所示。
图1  控制台页面
[]images/1640742134066.png)
在控制台单击云硬盘，打开该产品的展示页面，如[图2](1640742127816.html#z58b0c18e4290495ea81f7546cba5ee05__34f0604c-3da0-45e0-8dec-abcc2361c8e4)所示。
图2  云硬盘
[]images/1640742173237.png)
单击立即购买，打开订购页面，根据规划填写相应参数，如[图3](1640742127816.html#z58b0c18e4290495ea81f7546cba5ee05__080dd46b-bd8f-42a8-a4b0-b7e82666f7e9)所示。
图3  订购页面
[]images/1640742225017.png)
单击确认申请按钮，打开订单信息确认页面，如[图4](1640742127816.html#z58b0c18e4290495ea81f7546cba5ee05__ffaa1796-8ee5-4416-8921-d67f35595f7d)所示。
图4  确认申请
[]images/1640742322870.png)
单击提交申请，打开订单详情页面，如[图5](1640742127816.html#z58b0c18e4290495ea81f7546cba5ee05__ad6ab701-4dec-4d9a-8071-b8f55ee9f865)所示。
图5  订单详情页面
[]images/1640742360275.png)
单击立即支付按钮，在弹出的支付对话框选择账户，单击确定按钮，完成订购。
##### 订购虚拟私有云 
###### 摘要 
介绍如何订购虚拟私有云。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1640742442953.html#z7df9ad06f42c47939eb51a8d4edff20e__861c7fdd-e7d8-4db8-84bb-91de923a10e6)所示。
图1  控制台页面
[]images/1640742448854.png)
在控制台单击虚拟私有云，打开该产品的展示页面，如[图2](1640742442953.html#z7df9ad06f42c47939eb51a8d4edff20e__395d43f9-94d2-45b4-b7ca-f27701bee900)所示。
图2  虚拟私有云
[]images/1640742485271.png)
单击立即购买，打开订购虚拟私有云页面，根据规划填写相应参数，如[图3](1640742442953.html#z7df9ad06f42c47939eb51a8d4edff20e__0df54d28-640c-491f-93d9-befa0dd418d0)所示。
图3  订购虚拟私有云页面
[]images/1640742519613.png)
单击确认申请按钮，打开订单信息确认页面，如[图4](1640742442953.html#z7df9ad06f42c47939eb51a8d4edff20e__ff4116ea-23c3-4cc7-a12c-3c95b09eb83f)所示。
图4  确认申请
[]images/1640742577232.png)
单击提交申请，打开订单详情页面，如[图5](1640742442953.html#z7df9ad06f42c47939eb51a8d4edff20e__eac1eb95-eb09-4b97-bb97-7fd1fe75315d)所示。
图5  订单详情页面
[]images/1640742606405.png)
单击立即支付按钮，在弹出的支付对话框选择账户，单击确定按钮，完成订购。
##### 添加安全组 
###### 摘要 
TECS Director提供安全组服务，用户可以根据需要添加。
###### 步骤 
以admin用户登录中兴云运营门户，单击右上角的控制台，打开控制台页面，如[图1](1634693754607.html#z9e3803fbcf4144f1a65b7c634314425c__dba4df62-423c-43e2-b70b-5a7e7306daec)所示。
图1  控制台页面
[]images/%E6%8E%A7%E5%88%B6%E5%8F%B0.PNG)
在组织已购买的产品区域，选择虚拟私有云，打开云网络控制台页面，如[图2](1634693754607.html#z9e3803fbcf4144f1a65b7c634314425c__c641e286-7e4f-406f-bedd-a36074ccfb9e)所示。
图2  云网络控制台
[]images/%E4%BA%91%E7%BD%91%E7%BB%9C%E6%8E%A7%E5%88%B6%E5%8F%B0.png)
在左侧产品列表中选择安全组，打开安全组页面，如[图3](1634693754607.html#z9e3803fbcf4144f1a65b7c634314425c__e8f42cdd-293d-42b9-8064-ac2cede815d4)所示。
图3  安全组
[]images/%E5%AE%89%E5%85%A8%E7%BB%84.PNG)
单击添加安全组按钮，打开添加安全组页面，如[图4](1634693754607.html#z9e3803fbcf4144f1a65b7c634314425c__0ebfe9ae-b9ab-4aa2-a3eb-543a1fc1f33a)所示。
图4  添加安全组
[]images/%E6%B7%BB%E5%8A%A0%E5%AE%89%E5%85%A8%E7%BB%84.png)
填写参数，单击添加按钮。
###### 相关任务 
修改安全组：单击操作列的编辑按钮，打开编辑安全组页面，如图5所示。填写参数，单击编辑按钮完成编辑。图5  编辑安全组 
删除安全组：单击操作列的删除按钮，弹出删除安全组对话框，如图6所示。单击删除按钮完成删除。图6  删除安全组 
##### 添加安全组规则 
###### 摘要 
介绍如何添加安全组规则。 
###### 前提 
已添加安全组。 
###### 步骤 
单击安全组名称，打开安全组详情页面，如[图1](1634699071864.html#z0e0c8b8e9e7843a68fb802f86fe1fb24__b0060e38-f9cb-4899-8254-27a0b3463131)所示。
图1  安全组详情
[]images/%E5%AE%89%E5%85%A8%E7%BB%84%E8%AF%A6%E6%83%85.png)
切换到安全组规则页签，单击添加安全组规则按钮，打开添加安全组规则页面，如[图2](1634699071864.html#z0e0c8b8e9e7843a68fb802f86fe1fb24__ff5699d3-5b94-481c-8e04-167065df91f1)所示。
图2  添加安全组规则
[]images/%E6%B7%BB%E5%8A%A0%E5%AE%89%E5%85%A8%E7%BB%84%E8%A7%84%E5%88%99.png)
填写参数，单击添加按钮。
###### 相关任务 
编辑安全组规则：单击操作列的编辑按钮，打开编辑页面，填写参数，单击编辑按钮。 
删除安全组规则：单击操作列的删除按钮，弹出确认对话框，单击确认按钮。 
##### 订购负载均衡 
###### 摘要 
介绍如何订购和配置负载均衡。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__3b12bfd7-0c13-4261-9e26-1c56a86a4c21)所示。
图1  控制台页面
[]images/Snap1.png)
在控制台单击负载均衡，打开该产品的展示页面，如[图2](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__e218d089-3e78-4203-a5ff-ed6b0960cb5c)所示。
图2  负载均衡
[]images/1638325293136.png)
单击立即购买，打开订购页面，如[图3](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__ebd833aa-b1ca-4024-96cd-0be685072c6d)所示。
图3  订购负载均衡
[]images/1638325332456.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
名称|自定义，输入负载均衡的名称
VDC|选择租户信息
云环境|选择云环境信息
私有网络|选择子网信息
VIP|输入负载均衡vip，通过vip统一对外提供服务
提供者|选择负载均衡厂家
单击确认申请按钮，审批完成后，在负载均衡页面可以看到订购的产品。
图4  完成订购
[]images/Snap4.png)
在负载均衡页面，单击刚才订购的负载均衡名称，打开监听器页面，如[图5](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__21a9317b-e52a-475e-b1f7-0185245f510f)所示。
图5  监听器
[]images/Snap5.png)
单击添加监听器按钮，打开添加监听器页面，如[图6](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__614dfc95-b724-404e-814c-baebc4dc4e0d)所示。
图6  添加监听器
[]images/Snap6.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
名称|自定义监听器名称
描述|自定义监听器描述信息
协议类型|当前支持4种监听协议：TCP/UDP/HTTP/HTTPS，其中TCP/UDP为L4监听器，HTTP/HTTPS为L7监听器
协议端口|自定义协议端口，用来接收请求并向后端服务器转发请求的端口，监听器端口不可重复
最大连接数|自定义
管理状态|勾选，管理状态为false时，server端正常创建 ，但是agent端不落地。
Key|HTTPS监听器支持，需在“证书管理”中创建，创建步骤见章节3
获取客户端IP|当协议类型为TCP/UDP时支持
单击创建按钮，完成监听器的添加。
在监听器页面，单击刚才创建的监听器名称，打开监听器详情页面，如[图7](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__9328028f-e008-4fc4-b0f0-0a1a9d1e4b8d)所示。
图7  监听器详情页面
[]images/Snap7.png)
单击添加资源池，弹出添加资源池对话框，如[图8](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__2dbcf7b6-96af-4697-80fe-0eaca837a619)所示。
图8  添加资源池
[]images/Snap8.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
名称|自定义
算法|支持以下4种：ROUND_ROBIN：轮转算法，依次将访问请求分发到不同的后端服务器上，使得各个后端服务器平均分担用户的连接请求。如：后端服务器资源池中包含三个成员A、B、C，假设各实服务均未达到连接上限，最后分发给A、B、C的连接数之比为1：1：1。适用场景：后端服务器资源池中各成员性能相当，无优劣之分。SOURCE_IP：源IP哈希算法，通过一个散列（Hash）函数将来自同一个源IP的请求映射到一台后端服务器上。适用场景：需要保证来自同一个用户的请求分发到同一个后端服务器。LEAST_CONNECTIONS：最小连接数算法，负载均衡根据当前各后端服务器连接数来估计后端服务器的负载情况，把新的连接分配给连接数最小的后端服务器或链路。该算法能把负载差异较大的请求平滑分发到各个后端服务器上。适用场景：后端服务器资源池中各服务器性能，无优劣之分，不同用户发起的连接保存时长差异较大。SOURCE_IP_PORT：源IP源Port哈希算法，通过一个散列（Hash）函数将来自同一个源IP和源Port的请求映射到一台后端服务器上。适用场景：需要保证来自同一个用户且源端口相同的的请求分发到同一个后端服务器。
会话保持类型|一次业务交互可能包括多个TCP连接，如FTP应用包含一个控制通道和多个数据通道，如HTTP网络购物，多条连接组成一次业务应用，且多个连接并不像FTP应用一样有“父子”之分，但所有该业务的请求应发给同一服务器，否则可能造成无法完成所请求的功能，因为其数据报文中携带隐含关联信息，如Cookie。将属于同一个应用层会话的多个连接定向到同一服务器的功能，就是会话保持。根据会话保持类型，建立会话保持表项，保证后续业务报文都送往同一个服务器处理。会话保持类型支持以下3种：HTTP_COOKIE：基于负载均衡生成cookie的会话保持，仅用于L7负载均衡应用。后端服务器的应答报文中不携带含有服务器信息的Set-Cookie字段，负载均衡设备会在报文中添加含有服务器信息的Set-Cookie字段。这样，客户端就会在请求报文中携带含有该服务器信息的Cookie字段，负载均衡设备按照Cookie字段中的服务器信息将请求报文发给相应的实服务。APP_COOKIE：基于应用cookie的会话保持，仅用于L7负载均衡应用。后端服务器的应答报文中携带Set-Cookie字段，负载均衡设备根据用户配置的Cookie标识截取应答报文中的Cookie值。对于后续客户端的请求报文，如果匹配保存的Cookie值，则直接将请求报文发给相应的实服务。SOURCE_IP：基于源IP的会话保持，仅用于L4负载均衡应用，可以确保同一个客户端的业务能分配到同一个后端服务器。负载均衡设备接收到某一客户端的某一业务的首次请求时，建立会话保持表项，记录为该客户分配的后端服务器情况，在会话保持表项生存周期内，后续相同源IP地址的业务报文都将发往该后端服务器处理。
会话名称|会话保持类型为APP_COOKIE时填写，与后端服务应用生成的cookie匹配。
模式|支持以下2种：NAT：网络地址转换模式，客户端请求报文的IP地址会被做NAT修改后再发送给后端服务器，后端服务器的应答报文需要回到负载均衡器上处理。DR：直接路由模式，客户端请求报文的IP地址不会被做NAT修改，而是直接发送给后端服务器，后端服务器的应答报文不再经过负载均衡器处理。注：L4监听器使用DR模式，成员服务器中需要将回环地址配置为负载均衡的VIP。
单击确认按钮，完成资源池创建。
切换至L7转发策略页签，如[图9](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__d0b81d67-7323-4378-b49e-16b36ef17b7b)所示。
图9  L7转发策略
[]images/Snap9.png)
单击添加L7转发策略按钮，打开添加L7转发策略页面，如[图10](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__56d0bacf-42b2-4380-bf3c-e2c4105cf26d)所示。
图10  添加L7转发策略
[]images/Snap10.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
名称|自定义
描述|自定义
动作|支持以下3种REDIRECT_TO_POOL：重定向到指定poolREDIRECT_TO_URL：重定向到指定urlREJECT：拒绝
位置|-
管理状态|勾选
单击确认按钮，完成添加L7转发策略。
单击刚才添加的L7转发策略名称，打开L7 Policy页面，如[图11](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__81e84d66-cb38-4699-a421-61b8105fd2bb)所示。
图11  L7 Policy
[]images/Snap11.png)
单击添加规则按钮，打开添加规则页面，如[图12](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__1b281029-b1fc-4f91-b03c-a8d84bc0a950)所示。
图12  添加规则
[]images/Snap12.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
Compare_type|支持以下5种，按字面意义理解（当前版本仅支持STARTS_WITH）：CONTAINSENDS_WITHEQUAI_TOREGEXSTARTS_WITH
类型|包括以下5种（当前版本仅支持1种）：COOKIE：对http请求中的特定Cookie进行匹配FILE_TYPE：对http请求中的特定文件类型进行匹配HEADER：对http请求中的特定header field进行匹配HOST_NAME：对http请求中url的特定主机名进行匹配PATH：对http请求中url的path信息进行匹配
Value|填写根据类型需要匹配的值
Key|仅当类型为 header和 cookie时，需要指定 header或 cookie的name，具体内容与http请求里面的该字段类型匹配
Invert|逻辑取反（当前版本不支持）
管理状态|勾选
单击确认按钮，完成添加规则。
回到监听器详情页面，单击添加成员按钮，打开添加成员页面，如[图13](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__6c96ccfc-6c37-41c6-a12d-1213ea9bb30c)所示。
图13  添加成员
[]images/Snap14.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
成员来源|支持以下2种类型：指定成员的IP地址从可用实例选择
子网名称/实例名称|选择对应的子网或者云主机实例
成员地址|选择实例的对外提供服务的IP地址
协议端口|填写实例的对外提供服务的端口
权重|0~256，值越大权重越高，被调度频率越高
单击确认按钮，完成添加成员。
回到监听器详情页面，切换至监控页签，如[图14](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__126b5af5-8093-4a24-bbc9-2c91c0285848)所示。
图14  监控页签
[]images/Snap15.png)
单击添加监控按钮，弹出添加监控对话框，如[图15](1638320747152.html#ze3c482d9d24145a68d3d1acf76d4f14c__7601c603-01ac-4301-a12b-b22d728bfd2c)所示。
图15  添加监控
[]images/Snap16.png)
填写参数，参数说明参见下表。 
参数|说明
---|---
类型|支持以下5种类型：PING/TCP/UDP/HTTP/HTTPS
超时|如果后端云服务器在超时时间内没有正确响应，则判定为健康检查异常。
延迟|负载均衡进行健康检查的时间间隔。
重试次数|如果连续 n 次（n 为填写的数值）收到的健康检查结果为成功，则识别为健康，控制台显示为健康。
ERROR重试次数|如果连续 n 次（n 为填写的数值）收到的健康检查结果失败，则识别为不健康，控制台显示为异常。
单击确认按钮，完成添加监控。
##### 订购云备份 
###### 摘要 
云备份用于对云服务器进行备份。本节介绍如何订购和配置云备份。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面。
单击云备份，打开该产品的展示页面。
单击立即购买，打开订购-选择云服务器页面，如[图1](1648111199867.html#z32abb627fb1349e599c07075725353e0__cef6075e-8087-49af-a7f1-024f7754fc3e)所示。
图1  订购-选择云服务器页面
[]images/1648625998061.png)
填写名称、部署位置、云服务器等参数，单击下一步，打开订购-配置备份数据页面，如[图2](1648111199867.html#z32abb627fb1349e599c07075725353e0__5af798cf-065c-460b-88f7-1514c58a5644)所示。
图2  订购-配置备份数据页面
[]images/1648626070180.png)
配置参数，单击订购按钮，打开订单详情页面，如[图3](1648111199867.html#z32abb627fb1349e599c07075725353e0__3b6a44df-cd48-44d0-8dc5-4b3026d336ca)所示。
图3  订单详情页面
[]images/1648626096906.png)
单击立即支付按钮，完成云备份服务的订购。
###### 相关任务 
还原误删的云备份： 
单击在顶部菜单栏的订单→全部订单
，打开全部订单页面。
根据需要的订单号，选择退货，如[图4](1648111199867.html#z32abb627fb1349e599c07075725353e0__c9616f5d-cad2-4289-88e6-c3cd2d675afc)所示。
图4  订单退货页面
[]images/06264a6f60c7474cb4d4a837618cf395.png)
单击顶部菜单栏中的[]images/cdfaeaac5f8d446ea033371f9bc2368d.png)按钮，选择产品目录→云基础计算→计算→弹性云服务器
，进入弹性云服务器页面，查看虚拟机已删除，如[图5](1648111199867.html#z32abb627fb1349e599c07075725353e0__97366cfb-0017-4035-9652-77c6e1158c21)所示。
图5  虚拟机已删除
[]images/564cb5aaa75d4dcda25be0021ef196dd.png)
单击顶部菜单栏中的[]images/fa571104d9554f9893c82c1722abca90.png)按钮，选择产品目录→云基础计算→管理工具→云备份
，进入产品控制台页面。
进入备份列表页面，找到虚拟机，单击操作列的更多→恢复至新的云服务器
，如[图6](1648111199867.html#z32abb627fb1349e599c07075725353e0__288936db-dfb3-42c1-8eb9-48038fe34549)所示。
图6  备份列表页面
[]images/fa6a2b94bb8a4ca9b636404f1620c510.png)
进入恢复任务列表页面，查看恢复任务状态，执行中是operating状态，如[图7](1648111199867.html#z32abb627fb1349e599c07075725353e0__b74f0bc6-ed66-4e00-ae29-e1735eb3d16e)所示，恢复后是completed状态，如[图8](1648111199867.html#z32abb627fb1349e599c07075725353e0__6c2d2a48-8b6d-40e4-a162-186b0804e386)所示。
图7  执行中状态
[]images/e3560095407548e098a5b6e66fa3c8bc.png)
图8  恢复后状态
[]images/bb4cb57266ad4462a137b4045e72e1bc.png)
单击顶部菜单栏中的[]images/0c5a3bcef75a4846acc2807a8c1f3b60.png)按钮，选择产品目录→云基础计算→计算→弹性云服务器
，进入弹性云服务器页面，查看误删的虚机被恢复，如[图9](1648111199867.html#z32abb627fb1349e599c07075725353e0__35e2cc30-6496-41e4-bacd-2e87dc0a981b)所示。
图9  查看恢复状态
[]images/72ec0b98dd864440915c310ffc99f1ed.png)
##### 订购防火墙v2 
###### 摘要 
本节介绍如何订购和配置防火墙v2。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面。
单击防火墙v2，打开防火墙V2页面。
图1  防火墙V2页面
[]images/1650525427476.png)
切换至防火墙规则页签，单击添加规则按钮，打开添加规则页面，如[图2](1650525317071.html#z5bc11fef9f9049ff86aa43ff3ca26e93__3111aefc-84e8-4023-8a5a-113c1fff79c1)所示。
图2  添加规则页面
[]images/1650525547346.png)
按规划填写参数，单击添加按钮。
切换至防火墙策略页签，单击添加策略按钮，打开添加防火墙策略页面，如[图3](1650525317071.html#z5bc11fef9f9049ff86aa43ff3ca26e93__a9171148-6309-4019-9b51-a083f62e6a1c)所示。
图3  添加防火墙策略页面
[]images/1650525634236.png)
按规划填写参数，防火墙规则选择刚才添加的防火墙规则，单击添加按钮。
切换至防火墙页签，单击订购防火墙按钮，打开订购防火墙页面，如[图4](1650525317071.html#z5bc11fef9f9049ff86aa43ff3ca26e93__4d108661-e7c7-480d-8194-3f4587a47fa0)所示。
图4  订购防火墙页面
[]images/1650525721731.png)
按规划填写参数，入向策略和出向策略选择刚才添加的策略，单击确认申请按钮，打开订单确认页面，如[图5](1650525317071.html#z5bc11fef9f9049ff86aa43ff3ca26e93__716bbced-d03d-4b7a-bfde-0545708484b9)所示。
图5  订单确认页面
[]images/1650525866421.png)
单击提交申请按钮，等待订单审批，防火墙的订购完成。
##### 订购网站应用防火墙 
###### 摘要 
介绍如何订购网站应用防火墙。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1650766667890.html#z22ccf11e87c747d6b7d77be884f7317b__228e08f0-196c-4ae8-ba05-532425d1dc38)所示。
图1  控制台页面
[]images/1650766838060.png)
单击网站应用防火墙，打开该产品的展示页面。
单击立即购买，打开订购Web应用防火墙(WAF)页面，如[图2](1650766667890.html#z22ccf11e87c747d6b7d77be884f7317b__68b6217f-a695-4b7f-aefc-9cc48903f59f)所示。
图2  订购Web应用防火墙(WAF)页面
[]images/1650766907140.png)
按规划填写参数，单击确认申请按钮，打开订单信息确认页面，如[图3](1650766667890.html#z22ccf11e87c747d6b7d77be884f7317b__b6e94816-0a97-485b-8104-a8b31ca58b28)所示。
图3  订单信息确认页面
[]images/1650766999050.png)
单击提交申请按钮，打开订单详情页面，如[图4](1650766667890.html#z22ccf11e87c747d6b7d77be884f7317b__ae6c9c01-dda4-461e-8d32-58c2a63bf5db)所示。
图4  订单详情页面
[]images/1650767072241.png)
单击立即支付按钮，在弹出的支付对话框中选择账户，单击确定按钮，完成订购。
##### 订购堡垒机 
###### 摘要 
介绍如何订购堡垒机。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1650767128497.html#z7ec866bf9e8a4776800762de98c46a79__9d0335a7-dede-4d1e-96ea-3b43e137183f)所示。
图1  控制台页面
[]images/1650767155748.png)
单击堡垒机，打开该产品的展示页面。
单击立即购买，打开订购堡垒机(SOMM)页面，如[图2](1650767128497.html#z7ec866bf9e8a4776800762de98c46a79__7f2507aa-ca73-44bb-84a5-2ef65ddd9c7a)所示。
图2  订购堡垒机页面
[]images/1650767222398.png)
按规划填写参数，单击确认申请按钮，打开订单信息确认页面，如[图3](1650767128497.html#z7ec866bf9e8a4776800762de98c46a79__3e72955d-83c9-4685-a16c-4726b60484e7)所示。
图3  订单信息确认页面
[]images/1650767260056.png)
单击提交申请按钮，打开订单详情页面，如[图4](1650767128497.html#z7ec866bf9e8a4776800762de98c46a79__9219aba9-2603-4876-a2a0-c0d9e66bd800)所示。
图4  订单详情页面
[]images/1650767291359.png)
单击立即支付按钮，在弹出的支付对话框中选择账户，单击确定按钮，完成订购。
##### 订购漏洞扫描 
###### 摘要 
介绍如何订购漏洞扫描。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1650869579200.html#z4db2e2200baf4bb69fa1967075939a3e__1b94bad5-da8b-4aba-bea0-3744a9aa316a)所示。
图1  控制台页面
[]images/1650869731135.png)
单击漏洞扫描，打开该产品的展示页面。
单击立即购买，打开订购NVS页面，如[图2](1650869579200.html#z4db2e2200baf4bb69fa1967075939a3e__0a381cc7-0c28-4f6b-9e85-6f48ba83d68f)所示。
图2  订购NVS页面
[]images/1650869816577.png)
按规划填写参数，单击确认申请按钮，打开订单信息确认页面，如[图3](1650869579200.html#z4db2e2200baf4bb69fa1967075939a3e__d5140c18-5869-44c2-b661-cb1fc93f158c)所示。
图3  订单信息确认页面
[]images/1650869858572.png)
单击提交申请按钮，打开订单详情页面，如[图4](1650869579200.html#z4db2e2200baf4bb69fa1967075939a3e__8a6b3639-ad8e-499b-ac89-a4887aed0452)所示。
图4  订单详情页面
[]images/1650869889720.png)
单击立即支付按钮，在弹出的支付对话框中选择账户，单击确定按钮，完成订购。
##### 订购数据库安全审计 
###### 摘要 
介绍如何订购数据库安全审计。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1650869922704.html#z73b502ad892b4881ae3be5ef9d775b33__78afbb6e-6522-44cc-b86f-17177923ce4c)所示。
图1  控制台页面
[]images/1650869928586.png)
单击数据库安全审计，打开该产品的展示页面。
单击立即购买，打开订购数据库审计(DSA)页面，如[图2](1650869922704.html#z73b502ad892b4881ae3be5ef9d775b33__14dfb764-0ce3-41de-99b5-4e6ba5af9ba4)所示。
图2  订购数据库审计(DSA)页面
[]images/1650869967293.png)
按规划填写参数，单击确认申请按钮，打开订单信息确认页面，如[图3](1650869922704.html#z73b502ad892b4881ae3be5ef9d775b33__0312fce0-1761-4e76-b1c6-6168415cc57c)所示。
图3  订单信息确认页面
[]images/1650870016024.png)
单击提交申请按钮，打开订单详情页面，如[图4](1650869922704.html#z73b502ad892b4881ae3be5ef9d775b33__5cc1257f-7a91-4888-a500-9fa3df942079)所示。
图4  订单详情页面
[]images/1650870046492.png)
单击立即支付按钮，在弹出的支付对话框中选择账户，单击确定按钮，完成订购。
##### 订购日志审计 
###### 摘要 
介绍如何订购日志审计。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1650870066597.html#za0f652d1892a4bb9b80e995a364c7c62__b0a6d5e5-824b-4c31-9f0e-f90ba493d64a)所示。
图1  控制台页面
[]images/1650870071906.png)
单击日志审计，打开该产品的展示页面。
单击立即购买，打开订购日志审计(ISSA)页面，如[图2](1650870066597.html#za0f652d1892a4bb9b80e995a364c7c62__49e2f1fc-1cc6-4bb1-8d15-d4274ba5663f)所示。
图2  订购日志审计(ISSA)页面
[]images/1650870106124.png)
按规划填写参数，单击确认申请按钮，打开订单信息确认页面，如[图3](1650870066597.html#za0f652d1892a4bb9b80e995a364c7c62__e9a1ee09-96f6-499d-915e-899c782761e8)所示。
图3  订单信息确认页面
[]images/1650870152672.png)
单击提交申请按钮，打开订单详情页面，如[图4](1650870066597.html#za0f652d1892a4bb9b80e995a364c7c62__99b119d0-95ec-4b7d-b942-566cd7c21da1)所示。
图4  订单详情页面
[]images/1650870182757.png)
单击立即支付按钮，在弹出的支付对话框中选择账户，单击确定按钮，完成订购。
##### 订购中兴云容器集群 
###### 摘要 
介绍如何订购中兴云容器集群。 
###### 步骤 
单击userportal页面顶部菜单栏中产品目录列表，选择云基础计算→容器→中兴云容器集群
，打开产品控制台页面，如[图1](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__cef21dcf-9588-4e45-be3f-034c7917be1d)所示。
图1  控制台页面
[]images/0aacf88714f84d938b53e5c9e80ad53e.png)
单击立即购买按钮，根据需要依次设置基础配置、网络配置、节点组配置和容器后端存储配置，如[图2](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__454e0ae7-ff4c-4aba-a673-58ceb21a7c42)、[图3](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__ca378517-ed42-41a2-926a-2eb692997d34)、[图4](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__220eefe3-3e27-4730-9f9d-d07dc183d816)、[图5](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__35d72ea7-d941-415e-b4e3-944a52113b3c)所示。
图2  基础配置页面
[]images/cd5993c1aec34919974ecb91a6d320a7.png)
图3  网络配置页面
[]images/42d95bb0804a41e9b067075b14846f4c.png)
图4  节点组配置页面
[]images/7ec63fe12fed430a954ec2dada077499.png)
图5  容器后端存储配置页面
[]images/b1dad029c54149d19019dbe6daf5947b.png)
单击确认订单按钮，完成容器集群的创建，如[图6](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__e0168f37-7a26-4367-87e2-2c3113c34078)、[图7](1673352008778.html#zece9028081df4e68b1cc79c92af3a951__e2173c5f-112c-4239-9281-6f96fc625951)所示。
图6  查看容器集群订单
[]images/69543105dd374c01b0930177f3abd510.png)
图7  容器集群创建成功
[]images/a786e94a70fb4d6f92692698f273881d.png)
##### 订购VPN 
###### 摘要 
介绍如何订购VPN。 
###### 步骤 
单击userportal页面顶部菜单栏中产品目录列表，选择云基础计算→网络→虚拟私有云
，如[图1](1674004940512.html#z9b7e3f273e5d4c86a02db620ba9857ee__43dac5d1-9d81-4046-99f1-da6f17e924ab)所示。
图1  控制台页面
[]images/d5ad5ab2ac4544a7b0acbaae929919c8.png)
进入产品控制台页面，选择VPN，如[图2](1674004940512.html#z9b7e3f273e5d4c86a02db620ba9857ee__6f9ae508-7eec-4419-9c81-a2caf3508510)所示。
图2  VPN页面
[]images/6fd4cd13a58e48cd87f744410cfa2bb4.png)
依次选择VPN服务、IKE策略、IPSec策略和IPSec站点连接，根据需要创建并订购，如[图3](1674004940512.html#z9b7e3f273e5d4c86a02db620ba9857ee__a57035b0-68ce-4d15-b722-fccd94c77c9c)、[图4](1674004940512.html#z9b7e3f273e5d4c86a02db620ba9857ee__185b4a3b-62ab-4dce-8647-fdc6d15fbfe7)、[图5](1674004940512.html#z9b7e3f273e5d4c86a02db620ba9857ee__78fc307e-73fc-4040-9e36-ae3a6ec6f518)、[图6](1674004940512.html#z9b7e3f273e5d4c86a02db620ba9857ee__1f457b6c-6c60-43d3-ba2f-d0314e60f621)所示。
图3  创建VPN服务页面
[]images/ef0fe524698f493faf6edca19821b10f.png)
图4  网络配置页面
[]images/a285049dba05417c9b56197a9a20da74.png)
图5  节点组配置页面
[]images/ff17dcd71a2e4d0884dadf6053fa9f4f.png)
图6  容器后端存储配置页面
[]images/a298490e58874967a5ed9ecac83e6f93.png)
单击确认按钮，完成VPN的订购。
##### 订购消息队列Kafka版 
###### 摘要 
消息队列Kafka版是基于开源社区版Apache Kafka，向用户提供安全、可靠、易维护的消息服务，本节介绍消息队列Kafka版实例订购管理的步骤。 
###### 前提 
需要在1.0-产品注册信息 登记产品注册信息。 
1.0.22-消息队列Kafka版。 
###### 步骤 
使用组织管理员或端用户登录TECS Director运营门户，单击控制台，打开控制台页面，如[图1](1674012036073.html#z350cea842095451abf5a8a592b1d6727__348cdde2-9435-4dc5-94f3-a2ac657d8cea)所示。
图1  控制台页面
[]images/2b74be23afa842bc9ae2e07cff2279cd.png)
在控制台单击消息队列Kafka版，打开该产品的展示页面，单击立即订购按钮，如[图2](1674012036073.html#z350cea842095451abf5a8a592b1d6727__baf5f7ec-493b-4f69-a6b9-8b88ee880dbd)所示。
图2  消息队列Kafka版页面
[]images/3f691188279845a28b139f4f367d4c8a.png)
根据需要选择配置，单击确认订单按钮，完成消息队列Kafka版的订购，如[图3](1674012036073.html#z350cea842095451abf5a8a592b1d6727__884b72e1-a610-44ec-8859-0e55f27bbfd5)所示。
图3  订购消息队列Kafka版
[]images/fffb050a66ff4748b67c27271a9c0491.png)
在消息队列Kafka版的展示页面，单击产品控制台按钮，如[图4](1674012036073.html#z350cea842095451abf5a8a592b1d6727__9b90de35-f3d7-47e6-95a7-2d77bdad4b46)所示。
图4  消息队列Kafka版页面
[]images/20719a7ade994e988a3b9c759439e6fb.png)
查看部署实例列表与部署状态，选择对应的实例集群，获取集群IP地址和端口信息，如[图5](1674012036073.html#z350cea842095451abf5a8a592b1d6727__fd12415f-7f10-42ad-aaea-cada71ae1edc)所示。
图5  查看部署实例列表与部署状态
[]images/cb8b1ebf55cd435194ba4084bf1d0d3a.png)
根据端口和地址信息，连接Kafka集群，进行生产消费操作。 
#### 自运维云产品资源 
##### 摘要 
介绍如何自运维已订购的云产品资源。 
##### 前提 
已登录组织管理员或端用户。 
组织已经订购了云产品的资源，参考订购云产品资源。 
##### 步骤 
打开中兴云运营门户，在首页右上角选择当前登录用户所属的组织，如[图1](1625569027214.html#z8be8df5eac604304a1af527afec8ebec__cf50fe64-43c7-43cb-a386-7133ecd962b1)所示。
图1  选择组织
[]images/1625569243811.png)
 说明： 
登录用户属于多个组织时，下拉框会列出所有组织名称以便用户选择。 
选择组织之后（如选择了xuhaoOrg），则后续自运维的资源就属于该组织的资源。 
单击右上角的控制台，进入中兴云运营门户的控制台，如[图2](1625569027214.html#z8be8df5eac604304a1af527afec8ebec__1b7a8593-5435-4be3-ad05-8ee20873eda3)所示。
图2  控制台
[]images/1625569311312.png)
在组织已购买的产品列表中，选择要自运维的云产品，进入云产品的控制台，如[图3](1625569027214.html#z8be8df5eac604304a1af527afec8ebec__577ad134-8f99-4222-afc5-52cc2d8bed55)所示。
图3  控制台
[]images/1625569375324.png)
在云产品的控制台，可以对该组织已购买的云资源进行自运维操作。 
 说明： 
用户能对该云产品下的云资源进行哪些自运维操作，取决于当前登录用户被授权了哪些权限策略，以及云产品提供了哪些自运维功能。 
#### 审批云产品资源订单 
##### 摘要 
介绍如何审批云产品资源订单。 
##### 前提 
已登录组织管理员。 
组织配置了购买云产品需要审批。 
其他用户订购了云产品，产生了待审批的订单。 
##### 步骤 
打开中兴云运营门户，单击右上角的控制台，打开控制台页面，如[图1](1625569030385.html#z601bb04bdf5a45c785613de51459463b__b203f44a-c264-4b4a-ae62-ef3f682761a5)所示。
图1  控制台
[]images/1625569645011.png)
单击导航按钮，选择审批→待我审批
，打开待我审批页面，如[图2](1625569030385.html#z601bb04bdf5a45c785613de51459463b__8719f41e-8866-4c23-b294-ffce2ecb0101)所示。
图2  待我审批
[]images/1625569702800.png)
找到对应的审批编号，单击操作栏中的审批，打开审批详情页面，如[图3](1625569030385.html#z601bb04bdf5a45c785613de51459463b__7abd8487-1e47-4060-ba7b-51a7f46483d0)所示。
图3  审批详情
[]images/1625569744798.png)
在页面底部，填写审批结果、审批意见，单击提交按钮，完成订单审批。
#### 管理账户 
##### 摘要 
如果产品设置了定价，则订购时需要选择对应账户，账户资金充足时才能完成订购。 
##### 前提 
已使用超级用户admin或者具有域管理员角色的用户登录中兴云管理门户。 
##### 步骤 
单击顶部菜单栏的  按钮，选择运营→费用中心→账户管理
，打开账户管理页面，如[图1](1640073162463.html#z872df6a506824844ba57b02b22db7b2f__11adf456-09d1-423d-a1af-38ea56621c78)所示。
图1  账户管理页面
[]images/1640144962636.png)
单击创建账户按钮，打开创建账户页面，如[图2](1640073162463.html#z872df6a506824844ba57b02b22db7b2f__1450608b-720c-40b7-af59-332ef6874230)所示。
图2  创建账户页面
[]images/1640144988830.png)
输入名称、描述（可选），并根据需求设置账户规则，单击+新增规则，弹出新增规则对话框，如[图3](1640073162463.html#z872df6a506824844ba57b02b22db7b2f__8f6006ab-ea71-446b-a9c0-1ef032a686b3)所示。填写规则，单击确定按钮进行保存。
图3  新增规则
[]images/1640145017055.png)
完成以上配置后，单击确定按钮，完成新建账户。
#### 申请账户和充值资金 
##### 申请账户 
###### 摘要 
如果组织名下没有账户，组织管理员需要申请账户。 
###### 前提 
已使用组织管理员登录中兴云运营门户。 
###### 步骤 
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→费用→账户概览
，打开账户概览页面，如[图1](1640075316993.html#z5142ea0aa46648cebf9e6aa1413d9c95__a80f5885-f942-4047-ae6a-a8c0b44422c0)所示。
图1  账户概览页面
[]images/1640145070381.png)
单击申请账户按钮，打开申请资金页面，如[图2](1640075316993.html#z5142ea0aa46648cebf9e6aa1413d9c95__95705a4e-8297-49db-8656-e586ca499b9f)所示。
图2  申请资金页面
[]images/1640145108401.png)
选择要申请的账户，并填写申请金额和备注，单击确定按钮。
 说明： 
不同组织可以申请同一个账户，账户内余额不共用。 
##### 申请资金 
###### 摘要 
资金不足时，组织管理员可以为组织已有账户申请资金。 
###### 前提 
已使用组织管理员用户登录中兴云运营门户。 
已创建账户。 
###### 步骤 
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→费用→账户概览
，打开账户概览页面。
在已有账户列表中选择一个账户，单击申请资金按钮，打开申请资金页面，如[图1](1640076605506.html#z4d3e9ff3c74b42b78798f1fc6bac909f__bdc89f86-7c68-4509-b2e0-62e68647d4d8)所示。
图1  申请资金页面
[]images/1640145173054.png)
填写申请金额和备注，单击确定按钮。
##### 资金转账 
###### 摘要 
组织管理员可以为其他组织转账。 
###### 前提 
已使用组织管理员用户登录中兴云运营门户。 
###### 步骤 
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→费用→账户概览
，打开账户概览页面。
在已有账户列表中选择一个账户，单击资金转账按钮，打开资金转账页面，如[图1](1640076864153.html#z3a3ac49f06c642feb436bb90b2fbb3f0__2542c3cc-5a51-4f2c-9182-12d2db2128c1)所示。
图1  资金转账页面
[]images/1640145218606.png)
转账账户选择资金转出的账户，并选择要转入的组织名称，填写转账金额和备注，单击确定按钮。
 说明： 
转出资金的账户和转入资金的账户必须是同一个账户。 
如果接受转账的组织没有该转账账户，则转账时自动给接受转账组织申请该账户并转账资金到该账户中。 
如果接受转账的组织有该转账账户，则转账时直接转账资金到该账户中。 
##### 充值资金 
###### 摘要 
超级管理员可以直接为账户充值资金。 
###### 前提 
已创建好账户。 
已使用超级管理员用户admin登录中兴云管理门户。 
###### 步骤 
登录中兴云管理门户，单击顶部菜单栏中的[]images/1640077456553.png)按钮，选择运营→费用中心→资金充值
，打开资金充值页面，如[图1](1640077289774.html#zb4e676d7b6d04991bb8ef38a6020129b__1cb45681-39e1-4882-9a7c-b67ddfcb2ab0)所示。
图1  资金充值页面
[]images/1640145256631.png)
在左侧组织树选择账户所在的组织，右侧显示该组织拥有的账户，单击充值按钮，弹出充值对话框，如[图2](1640077289774.html#zb4e676d7b6d04991bb8ef38a6020129b__a5f74fdc-e948-40ac-92d8-0a1597835ac9)所示。
图2  充值对话框
[]images/1640145282114.png)
选择账户并填写金额和备注，单击确定按钮，该组织的账户自动到账对应金额。
##### 审批账户/资金申请 
###### 摘要 
如果组织设置了资金申请需要审批，则需要对应的审批人审批账户/资金申请。 
###### 前提 
已使用具有审批权限的用户登录中兴云运营门户。 
###### 步骤 
打开中兴云运营门户的控制台页面，在顶部菜单栏，选择审批→待我审批
，打开待我审批页面，如[图1](1640078264048.html#z3a722b569008486d929dea068c82b7f4__74f82d85-fbaf-4d26-bb01-a051fa5b5279)所示。
图1  待我审批页面
[]images/1640145426481.png)
单击相应的资金审批流程的编号，打开审批单详情页面，如[图2](1640078264048.html#z3a722b569008486d929dea068c82b7f4__546b45f5-d0ce-424d-9fe6-9f80a706a981)所示。
图2  审批单详情
[]images/1640145459042.png)
单击审批按钮，弹出审批对话框，如[图3](1640078264048.html#z3a722b569008486d929dea068c82b7f4__444fd90b-c8ca-48e3-aa73-49c8e72e3ee8)所示。
图3  审批对话框
[]images/1640145483978.png)
填写审批结果、审批意见，单击提交按钮，即可完成资金审批。
##### 设置预算规划 
###### 摘要 
组织管理员可以为本组织对于其他组织的转账设置预算规划。 
###### 前提 
已创建好账户。 
已使用组织管理员用户登录中兴云运营门户。 
###### 步骤 
登录中兴云运营门户，单击顶部菜单栏中的[]images/1640133773214.png)按钮，选择运营→费用中心→费用管理→预算规划
，打开预算规划页面，如[图1](1640133603663.html#z424ec2d5f1d945e8a6d24fd91f8bf63d__7378ec46-70a3-44cb-a67d-73937bad4fc4)所示。
图1  预算规划页面
[]images/1640145526772.png)
单击新增预算按钮，打开新增预算页面，如[图2](1640133603663.html#z424ec2d5f1d945e8a6d24fd91f8bf63d__d366cde2-0b30-4801-a2e2-20322667e21f)所示。
图2  新增预算页面
[]images/1640145548905.png)
输入组织名称，账户，预算金额，预算清零日期，单击确定按钮保存。当该组织给预算组织转账时，会显示对应的预算计划。
#### 查看组织账单 
##### 摘要 
介绍如何查看组织账单。 
##### 步骤 
费用账单
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→费用→账单管理
，打开费用账单页面，如[图1](1640145583272.html#z2d167dcb94b44909aff6a0b285eef151__0f7bc0ee-87b2-4eed-ab38-f7424a3681eb)所示。
图1  费用账单页面
[]images/1640154679834.png)
输入查询条件，单击查询按钮，即可查看费用账单。
用量明细
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→费用→账单管理
，打开用量明细页面，如[图1](1640145583272.html#z2d167dcb94b44909aff6a0b285eef151__0f7bc0ee-87b2-4eed-ab38-f7424a3681eb)所示。
图2  用量明细页面
[]images/c206262b27344a95bfe95128d79f9f79.png)
输入需要的产品和使用时间，单击导出按钮，即可导出用量明细。
#### 查看组织订单 
##### 摘要 
介绍如何查看组织订单。 
##### 步骤 
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→订单→全部订单
，打开全部订单页面，如[图1](1640145587204.html#z63d9fa06bb1646bcbb71b7d9c49cade4__b0465664-6bf1-46d8-8c45-63a585ab5f0b)所示。
图1  全部订单页面
[]images/1640154776287.png)
单击订单号，可查看订单详情。 
#### 查看组织收支明细 
##### 摘要 
介绍如何查看组织收支明细。 
##### 步骤 
登录中兴云运营门户，单击右上角控制台按钮，打开控制台。
选择需要操作的组织，单击 图标，选择运营→费用→资金管理→收支明细
，打开收支明细页面，如[图1](1640145591245.html#za5af7ef0b19441c5bebc01bb74011ee8__a0fc1456-922b-4f08-941d-aa1217b49d7d)所示。
图1  收支明细页面
[]images/1640154909868.png)
输入查询条件，单击查询按钮，可按条件进行查询。
#### 创建财务单元 
##### 摘要 
介绍如何创建财务单元。 
##### 前提 
已登录组织管理员角色的用户。 
##### 步骤 
新增财务单元
打开中兴云运营门户，单击顶部菜单栏的  按钮，选择运营→费用→分账管理
，打开财务单元页面，如[图1](1664263194777.html#zf081fa9acac049ff89ba563c8f46421e__53b4b131-4dba-4551-b961-47936ae318aa)所示。
图1  财务单元页面
[]images/59bd0dcd27594cfaa822f9294c971b3c.png)
移动鼠标到财务单元，右侧出现“+”号，单击“+”号，弹出新增单元名称对话框，如[图2](1664263194777.html#zf081fa9acac049ff89ba563c8f46421e__cf581344-4a2a-4953-8b47-5fccf0fcb87e)所示。
图2  新增单元名称对话框
[]images/0cf8254759d64cc5b86f921ba0becd45.png)
输入名称，单击确定按钮，财务单元下子菜单出现新增的单元，单击名称可以查看详情，如[图3](1664263194777.html#zf081fa9acac049ff89ba563c8f46421e__742a7865-e60b-4571-9e2c-dcaeda788580)所示。
图3  财务单元详情
[]images/78b43f4d93724f8db64593a702003812.png)
添加分配规则
单击添加规则，页面新增一个空的规则列表，如[图4](1664263194777.html#zf081fa9acac049ff89ba563c8f46421e__14c0d19e-82c3-4cb6-810a-41ad291c1b02)所示。
图4  添加规则
[]images/2e9c6ac1a2d642d0b09becbb4b6935c9.png)
单击编辑按钮切换至编辑状态，单击左下角的+新增条件，列表中新增一个空白条件，如[图5](1664263194777.html#zf081fa9acac049ff89ba563c8f46421e__fdc39193-9fdb-4ece-810f-a865f4b7154e)所示。
图5  新增条件
[]images/29d31fcbf4dc46e48a36a799750d1f04.png)
选择条件关系、参数、运算符、参数值参数，可以在操作列新增或删除条件，编辑完成后，单击确定按钮。
#### 管理财务单元资源 
##### 摘要 
介绍如何管理财务单元资源。 
##### 前提 
已登录组织管理员角色的用户。 
##### 步骤 
打开中兴云运营门户，单击顶部菜单栏的  按钮，选择运营→费用→分账管理
，打开财务单元页面，如[图1](1664264822180.html#z81f86d6188fc449094341493b5fc3e2d__95b7ba1e-2e12-41c1-94ae-5cc4ad533817)所示。
图1  财务单元页面
[]images/46c81a7e39584de5b37c6dbc5ffb9504.png)
根据要执行的任务，执行相应操作。 
如果...|那么...
---|---
手动分配资源到财务单元|单击所有资源，切换至资源查询页面。找到要分配的资源，单击操作列的分配，或勾选要分配的资源，单击列表左上方的分配按钮，弹出分配对话框。选择一个财务单元，单击确定按钮。
转移资源到另一个财务单元|单击财务单元名称，并切换至资源页签。找到要转移的资源，单击操作列的转移单元，或勾选要转移的资源，单击列表左上方的转移单元按钮，弹出转移单元对话框。选择一个财务单元，单击确定按钮。
移除资源|单击财务单元名称，并切换至资源页签。找到要转移的资源，单击操作列的移除，或勾选要移除的资源，单击列表左上方的移除按钮，弹出移除对话框。单击确定按钮。
#### 参考 
##### 产品注册信息 
本节提供各种产品注册信息示例，产品注册时填写的参数说明参见[表1](1625558251896.html#z179075d50d444d62a794103f30d2543c__60f6b931-742a-433a-9d43-7c7a7db9005c)。
参数类型|参数名称|参数说明
---|---|---
基本信息|产品ID|中兴云运营门户与云服务之间接口交互的主要参数，产品ID不可重复
产品名称|基本信息|云服务的名称
产品标题|基本信息|产品显示的标题
产品描述|基本信息|产品显示的描述内容
产品大类|基本信息|产品的分类
产品小类|基本信息|产品的分类
云环境类型|基本信息|可选openstack或openpalette
页面路由信息|产品申请页面URL|链接到云服务资源申请页面，在云服务介绍页面中使用
产品资源详情页面URL|页面路由信息|支持中兴云运营门户在url后面拼接资源id
产品控制台页面URL|页面路由信息|建议链接到云服务资源列表页面，在云服务介绍页面中使用
产品管理门户页面URL|页面路由信息|链接到云服务的管理页面，若云服务要把管理界面集成到中兴云门户则需要提供该路由地址
资源实施接口信息|微服务名|微服务名，当云服务部署在中兴云内部时需要填写
版本号|资源实施接口信息|版本号，当云服务部署在中兴云内部时需要填写
资源申请接口URL|资源实施接口信息|云服务对外提供的申请资源的接口
资源变配接口URL|资源实施接口信息|云服务对外提供的变配资源的接口
资源释放接口URL|资源实施接口信息|云服务对外提供的释放资源的接口
资源管理接口URL|资源实施接口信息|云服务对外提供的资源状态变更接口
###### 弹性云服务器ECS 
####### 基本信息 
产品大类：云基础计算 
产品小类：计算 
产品名称：弹性云服务器 
产品ID：zte-ecs 
产品标题：弹性云服务器 
产品描述：云服务器 ECS（Elastic Compute Service）是一种弹性可伸缩的计算服务，助您降低IT成本，提升运维效率，使您更专注于核心业务创新。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/ecm-portal/main/zte-ecs/createVm 
产品资源详情页面URL：暂不支持 
产品控制台页面URL：/ecm-portal/main/zte-ecs/list 
产品管理门户页面URL：暂不支持 
####### 资源实施接口信息 
资源申请接口URL：/api/v1.0/zte-ecs/resourcesApplication 
微服务名：zte-ecs 
资源变配接口URL：/api/v1.0/zte-ecs/resourceSpecChange 
资源释放接口URL：POST /api/v1.0/zte-ecs/resourcesRelease 
版本号：v1.0 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
core|vCPU|个
ram|内存|GB
virtual_machine|弹性云服务器实例|个
local_gb|本地存储|GB
###### 云盘EVS 
####### 基本信息 
产品大类：云基础计算 
产品小类：存储 
产品名称：云硬盘 
产品ID：zte-evs 
产品标题：云硬盘 
产品描述：在线企业网盘，用于内部文件存储、备份和共享，对外文件分享、展示和外部文件收集，支持多人协同的网银级安全产品，研发持续投入，云速传输。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/ecm-portal/main/zte-evs/add 
产品资源详情页面URL：- 
产品控制台页面URL：/ecm-portal/main/zte-evs/list 
产品管理门户页面URL：- 
####### 资源实施接口信息 
资源申请接口URL：/api/v1.0/zte-evs/resourcesApplication 
微服务名：zte-evs 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/zte-evs/resourcesRelease 
版本号：v1.0 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
gigabytes|云盘容量|GB
volumes|云盘个数|个
snapshots|云盘快照个数|个
###### 虚拟私有云VPC 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：VPC 
产品ID：zte-vpc 
产品标题：虚拟私有云 
产品描述：虚拟私有云是用户申请的隔离、私密的虚拟网络环境。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-vpc/addVpc 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-vpc/list 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：v1 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
vpc|虚拟私有云|个
###### NAT网关 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：NAT网关 
产品ID：zte-nat-gateway 
产品标题：NAT网关 
产品描述：NAT网关（NAT Gateway）提供默认NAT网关（Default NAT Gateway）和私网NAT网关（Private NAT Gateway）两个功能。 默认NAT网关（Default NAT Gateway）能够构建VPC的公网出入口。 私网NAT网关（Private NAT Gateway）能够为虚拟私有云内的云主机提供网络地址转换服务。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-nat-gateway/add-nat-gateway 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-nat-gateway/list 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
router-interface|私有网关|个
router-gateway|默认网关|个
###### 云专线 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：云专线 
产品ID：zte-direct-connect 
产品标题：云专线 
产品描述：云专线（Direct Connect）用于搭建用户本地数据中心与中兴云VPC之间高速、低时延、稳定安全的专属连接通道，实现灵活一体，可伸缩的混合云计算环境。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-direct-connect/add-direct-connect 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-direct-connect 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
direct-connect|云专线|个
###### 弹性IP 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：弹性IP 
产品ID：zte-eip 
产品标题：弹性IP 
产品描述：提供独立的公网IP资源，包括公网IP地址与公网出口带宽服务。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-eip/AddFloatingip 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-eip/list 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
floatingip|弹性IP|个
###### 对等连接 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：对等连接 
产品ID：zte-vpc-connection 
产品标题：对等连接 
产品描述：- 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-connection-vpc/add-vpc-connection 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-connection-vpc 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
vpc-connection|对等连接|个
###### 防火墙V1 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：虚拟防火墙 
产品ID：zte-vfw 
产品标题：虚拟防火墙 
产品描述：- 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-vfw/firewallOperation/addFirewall 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-vfw/firewall/firewallTable 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
firewall|防火墙V1|个
###### 防火墙V2 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：防火墙v2 
产品ID：zte-firewall-v2 
产品标题：防火墙v2 
产品描述：- 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-firewall-v2/firewalls/add-firewalls 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-firewall-v2/firewalls 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
firewall-v2|防火墙V2|个
###### 负载均衡 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：负载均衡 
产品ID：zte-loadbalance 
产品标题：负载均衡 
产品描述：负载均衡（ Load Balance）将访问流量自动分发到多台云服务器，扩展应用系统对外的服务能力，实现更高水平的应用容错。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-elb/loadBalance/addLB 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-elb/loadBalance 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
loadbalance|负载均衡|个
###### VPN 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：虚拟专用网络 
产品ID：zte-vpn-connection 
产品标题：虚拟专用网络 
产品描述：虚拟专用网络（Virtual Private Network）用于搭建用户本地数据中心与云管平台VPC之间便捷、灵活，即开即用的IPsec加密连接通道，实现灵活一体，可伸缩的混合云计算环境。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-vpn/connection_list/connection_create 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-vpn/connection_list 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
vpn-connection|虚拟专用网络|个
###### 裸金属BMS 
####### 基本信息 
产品大类：云基础计算 
产品小类：计算 
产品名称：裸金属服务器 
产品ID：zte-bms 
产品标题：裸金属服务器 
产品描述：为用户提供专属物理服务器 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/ecm-portal/main/zte-bms/add 
产品资源详情页面URL：- 
产品控制台页面URL：/ecm-portal/main/zte-bms/list 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：zte-bms 
版本号：- 
资源申请接口URL：/api/v1.0/zte-bms/resourcesApplication 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/zte-bms/resourcesRelease 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
bm_core|裸机核数|个
bm_ram|裸机内存|GB
bare_metal|裸机实例|个
bm_local_gb|裸机本地存储|GB
###### 分布式缓存服务Redis 
####### 基本信息 
产品大类：云基础计算 
产品小类：应用中间件 
产品名称：分布式缓存服务Redis 
产品ID：redis 
产品标题：分布式缓存服务Redis 
产品描述：可提供高性能的内存缓存和高速应用程序访问功能。 
云环境类型：openpalette 
####### 页面路由信息 
产品申请页面URL：/csm-broker-portal/main/zte-csm/purchase?productId=redis 
产品资源详情页面URL：- 
产品控制台页面URL：/csm-broker-portal/main/zte-csm/console?productId=redis 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：csm-broker 
版本号：v1.0 
资源申请接口URL：/api/v1.0/csm-broker/applyresources 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/csm-broker/deleteresources 
资源管理接口URL：- 
####### 配额项 
无 
###### 分布式消息服务Kafka 
####### 基本信息 
产品大类：云基础计算 
产品小类：应用中间件 
产品名称：分布式消息服务Kafka 
产品ID：Kafka 
产品标题：分布式消息服务Kafka 
产品描述：分布式流处理平台。 
云环境类型：openpalette 
####### 页面路由信息 
产品申请页面URL：/csm-broker-portal/main/zte-csm/purchase?productId=KAFKA 
产品资源详情页面URL：- 
产品控制台页面URL：/csm-broker-portal/main/zte-csm/console?productId=KAFKA 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：csm-broker 
版本号：v1.0 
资源申请接口URL：/api/v1.0/csm-broker/applyresources 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/csm-broker/deleteresources 
资源管理接口URL：- 
####### 配额项 
无 
###### 安全组 
####### 基本信息 
产品大类：云基础计算 
产品小类：网络 
产品名称：安全组 
产品ID：zte-security_group 
产品标题：安全组 
产品描述：安全组是一种虚拟防火墙，具备有状态的数据包过滤功能，可对实例级别对流控制，是安全组隔离的一种重要方法。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/networkResource/services/zte-security-group/add 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/networkResource/services/zte-security-group 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
security-group|安全组|个
###### 网站应用防火墙 
####### 基本信息 
产品大类：安全 
产品小类：网络安全 
产品名称：网站应用防火墙 
产品ID：zte-waf 
产品标题：网站应用防火墙 
产品描述：通过对HTTP(S)请求进行检测，识别并阻断SQL注入、跨站脚本攻击、网页木马上传、命令/代码注入、文件包含、敏感文件访问、第三方应用漏洞攻击、CC攻击、恶意爬虫扫描、跨站请求伪造等攻击，保护Web服务安全稳定。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/cloud-security/platform/waf/add-waf 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/cloud-security/platform/waf 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
waf|网站应用防火墙|个
###### 堡垒机 
####### 基本信息 
产品大类：安全 
产品小类：网络安全 
产品名称：堡垒机 
产品ID：zte-somm 
产品标题：堡垒机 
产品描述：保障网络和数据不受来自外部和内部用户的入侵和破坏。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/cloud-security/platform/somm/add-somm 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/cloud-security/platform/somm 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
somm|堡垒机|个
###### 漏洞扫描 
####### 基本信息 
产品大类：安全 
产品小类：网络安全 
产品名称：漏洞扫描 
产品ID：zte-nvs 
产品标题：漏洞扫描 
产品描述：通过扫描等手段对指定的远程或者本地计算机系统的安全脆弱性进行检测，发现可利用漏洞的一种安全检测行为。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/cloud-security/platform/nvs/add-nvs 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/cloud-security/platform/nvs 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
nvs|漏洞扫描|个
###### 数据库安全审计 
####### 基本信息 
产品大类：安全 
产品小类：网络安全 
产品名称：数据库安全审计 
产品ID：zte-dsa 
产品标题：数据库安全审计 
产品描述：对用户访问数据库行为的记录、分析和汇报，以便日后查询、分析、过滤，实现加强内外部数据库网络行为的监控与审计，提高数据资产安全。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/cloud-security/platform/dsa/add-dsa 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/cloud-security/platform/dsa 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
dsa|数据库安全审计|个
###### 日志审计 
####### 基本信息 
产品大类：安全 
产品小类：网络安全 
产品名称：日志审计 
产品ID：zte-issa 
产品标题：日志审计 
产品描述：记录信息系统日志并对日志内容进行审计分析。 
云环境类型：openstack 
####### 页面路由信息 
产品申请页面URL：/network-portal/cloud-security/platform/issa/add-issa 
产品资源详情页面URL：- 
产品控制台页面URL：/network-portal/cloud-security/platform/issa 
产品管理门户页面URL：- 
####### 资源实施接口信息 
微服务名：network 
版本号：- 
资源申请接口URL：/api/v1.0/neutronsvc/v2.0/network-order 
资源变配接口URL：- 
资源释放接口URL：POST /api/v1.0/neutronsvc/v2.0/network-order 
资源管理接口URL：- 
####### 配额项 
key|名称|单位
---|---|---
issa|日志审计|个
###### 云安全管理平台 
####### 基本信息 
产品大类：安全 
产品小类：网络安全 
产品名称：云安全管理平台 
产品ID：Venustech-Security 
产品标题：云安全管理平台 
产品描述：面向云计算特点和用户使用场景进行功能开发而打造的一款云中安全管理平台系统产品。 
####### 页面路由信息 
产品申请页面URL：/network-portal/cloud-security/platform/subscription 
产品资源详情页面URL：暂不支持 
产品控制台页面URL：/network-portal/cloud-security/platform/order 
产品管理门户页面URL：暂不支持 
####### 资源实施接口信息 
资源申请接口URL：  http://ip:port/login/nopass，其中，http还是https，根据实际情况填写，ip、port根据实际情况填写。 
微服务名：- 
资源变配接口URL：- 
资源释放接口URL：- 
版本号：- 
资源管理接口URL：  http://ip:port/order/queryOrderInfo，其中，http还是https，根据实际情况填写，ip、port根据实际情况填写。 
####### 配额项 
无 
##### 云产品资源类型登记 
云产品名称|资源类型编码|资源类型名称
---|---|---
弹性云服务器ECS|virtual_machine|虚拟机
云硬盘EVS|volume|云硬盘
裸金属服务器BMS|bare_metal|裸机
虚拟私有云VPC|vpc|虚拟私有云
云专线|direct-connect|云专线
NAT网关|router-interfacerouter-gateway|私有网关默认网关
对等连接|vpc-connection|对等连接
弹性IP|floatingip|浮动IP
防火墙V1|firewall|防火墙V1
防火墙V2|firewall-v2|防火墙V2
负载均衡|loadbalance|负载均衡
安全组|security-group|安全组
VPN|vpn-connection|虚拟专用网络
技术服务|Entity|实体
证书管理|key-manager|证书管理
网站应用防火墙|waf|网站应用防火墙
堡垒机|somm|堡垒机
漏洞扫描|nvs|漏洞扫描
数据库安全审计|dsa|数据库安全审计
日志审计|issa|日志审计
### 技术服务使用指南 
#### 注册技术服务 
##### 摘要 
本节介绍在中兴云运营门户注册技术服务的操作步骤。 
##### 相关信息 
分布式缓存服务Redis产品注册信息： 
参数类型|参数名称|参数值|参数说明
---|---|---|---
基本信息|产品ID|redis|必填
产品名称|基本信息|分布式缓存服务Ｒｅｄｉｓ|必填
产品标题（中文）|基本信息|分布式缓存服务Ｒｅｄｉｓ|必填
产品标题（英文）|基本信息|Distributed Cache Service|必填
产品描述（中文）|基本信息|可提供高性能的内存缓存和高速应用程序访问功能|必填
产品描述（英文）|基本信息|Provides high-performance memory cache and high-speed application program access functions.|必填
产品大类|基本信息|云基础计算|必填
产品小类|基本信息|应用中间件|必填
云环境类型|基本信息|openpalette|取值：openstackopenpalette
页面路由信息|产品申请页面URL|/csm-broker-portal/main/zte-csm/purchase?productId=redis|必填
产品资源详情页面URL|页面路由信息||
产品控制台页面URL|页面路由信息|/csm-brokerr-portal/main/zte-csm/console?productId=redis|必填
产品管理门户页面URL|页面路由信息||
资源实施接口信息|微服务名|csm-broker-broker|
版本号|资源实施接口信息|v1.0|
资源申请接口URL|资源实施接口信息|/api/v1.0/csm-broker/applyresources|必填
资源变配接口URL|资源实施接口信息||
资源释放接口URL|资源实施接口信息|/api/v1.0/csm-broker/deleteresources|必填
资源管理接口URL|资源实施接口信息||
分布式消息服务Kafka注册信息： 
参数类型|参数名称|参数值|参数说明
---|---|---|---
基本信息|产品ID|Kafka|必填
产品名称|基本信息|分布式消息服务Kafka|必填
产品标题（中文）|基本信息|分布式消息服务Kafka|必填
产品标题（英文）|基本信息|Distributed message service KAFKA|必填
产品描述（中文）|基本信息|分布式流处理平台|必填
产品描述（英文）|基本信息|A Distributed Streaming Platform|必填
产品大类|基本信息|云基础计算|必填
产品小类|基本信息|应用中间件|必填
云环境类型|基本信息|openpalette|取值：openstackopenpalette
页面路由信息|产品申请页面URL|/csm-broker-portal/main/zte-csm/purchase?productId=KAFKA|必填
产品资源详情页面URL|页面路由信息||
产品控制台页面URL|页面路由信息|/csm-broker-portal/main/zte-csm/console?productId=KAFKA|必填
产品管理门户页面URL|页面路由信息||
资源实施接口信息|微服务名|csm-broker|
版本号|资源实施接口信息|v1.0|
资源申请接口URL|资源实施接口信息|/api/v1.0/csm-broker/applyresources|必填
资源变配接口URL|资源实施接口信息||
资源释放接口URL|资源实施接口信息|/api/v1.0/csm-broker/deleteresources|必填
资源管理接口URL|资源实施接口信息||
数据库PG注册信息： 
参数类型|参数名称|参数值|参数说明
---|---|---|---
基本信息|产品ID|PostgreSQL|必填
产品名称|基本信息|数据库PG|必填
产品标题（中文）|基本信息|数据库PG|必填
产品标题（英文）|基本信息|Database PG|必填
产品描述（中文）|基本信息|PostgreSQL是一种特性非常齐全的自由软件的对象-关系型数据库|必填
产品描述（英文）|基本信息|PostgreSQL is a free software object-relational database management system with complete features|必填
产品大类|基本信息|云基础计算|必填
产品小类|基本信息|应用中间件|必填
云环境类型|基本信息|openpalette|取值：openstackopenpalette
页面路由信息|产品申请页面URL|/csm-broker-portal/page/purchase?productId=PostgreSQL|必填
产品资源详情页面URL|页面路由信息||
产品控制台页面URL|页面路由信息|/csm-broker-portal/main/zte-csm/console?productId=PostgreSQL|必填
产品管理门户页面URL|页面路由信息|/csm-broker-portal/main/zte-csm/manager?productId=PostgreSQL|
资源实施接口信息|微服务名|csm-broker|
版本号|资源实施接口信息|v1.0|
资源申请接口URL|资源实施接口信息|/api/v1.0/csm-broker/applyresources|必填
资源变配接口URL|资源实施接口信息||
资源释放接口URL|资源实施接口信息|/api/v1.0/csm-broker/deleteresources|必填
资源管理接口URL|资源实施接口信息||
RabbitMQ注册信息： 
参数类型|参数名称|参数值|参数说明
---|---|---|---
基本信息|产品ID|RabbitMQ|必填
产品名称|基本信息|RabbitMQ|必填
产品标题（中文）|基本信息|消息中间件RabbitMQ|必填
产品标题（英文）|基本信息|RabbitMQ|必填
产品描述（中文）|基本信息|消息中间件RabbitMQ|必填
产品描述（英文）|基本信息|RabbitMQ|必填
产品大类|基本信息|云基础计算|必填
产品小类|基本信息|应用中间件|必填
云环境类型|基本信息|openpalette|取值：openstackopenpalette
页面路由信息|产品申请页面URL|/csm-broker-portal/page/purchase?productId=RabbitMQ|必填
产品资源详情页面URL|页面路由信息||
产品控制台页面URL|页面路由信息|/csm-broker-portal/main/zte-csm/console?productId=RabbitMQ|必填
产品管理门户页面URL|页面路由信息|/csm-broker-portal/main/zte-csm/manager?productId=RabbitMQ|
资源实施接口信息|微服务名|csm-broker|
版本号|资源实施接口信息|v1.0|
资源申请接口URL|资源实施接口信息|/api/v1.0/csm-broker/applyresources|必填
资源变配接口URL|资源实施接口信息||
资源释放接口URL|资源实施接口信息|/api/v1.0/csm-broker/deleteresources|必填
资源管理接口URL|资源实施接口信息||
##### 步骤 
使用注册信息注册Redis和Kafka，注册产品的操作参见中兴云操作指南
。
#### 购买技术服务 
##### 摘要 
本节介绍购买技术服务的操作步骤。 
##### 前提 
用户已拥有相应的产品访问权限。 
##### 步骤 
登录中兴云运营门户，单击右上角的控制台，打开控制台页面，如[图1](#z070c014d473445adbd61fa3c2d8e3494__16506345-1ae7-466d-be77-de4642d77a27)所示。
图1  控制台页面
[]images/image.png)
单击要购买的产品（分布式消息服务Kafka/分布式缓存服务Redis/数据库PG/消息中间件RabbitMQ），打开产品展示页面，如[图2](#z070c014d473445adbd61fa3c2d8e3494__8484ebe4-b959-4b90-afce-1a5291e335f1)所示（以分布式消息服务Kafka为例）。
图2  产品展示页面
[]images/1656578669883.png)
单击立即购买按钮，打开该服务的订购页面，如[图3](#z070c014d473445adbd61fa3c2d8e3494__cc6e1dab-11be-4205-ae51-066e7a7b27bf)所示（以分布式消息服务Kafka为例）。
图3  购买服务实体
[]images/1656578732299.png)
填写购买参数，参数说明参见[表1](#z070c014d473445adbd61fa3c2d8e3494__207253e9-8db2-4954-b2cc-28ba71656601)、[表2](#z070c014d473445adbd61fa3c2d8e3494__8c975eb9-5405-48f7-a54e-a2d8cfddbef9)、[表3](#z070c014d473445adbd61fa3c2d8e3494__c6e9d988-358f-44ea-9b16-aea4786ddb31)和[表4](#z070c014d473445adbd61fa3c2d8e3494__ed1ac44d-68cf-4c57-bb4e-a8c7dd4d4d27)。
参数|说明
---|---
数据中心|选择部署Kafka的TCF环境。
可用区-VDC|选择部署Kafka的TCF环境。
实例名称|只支持字母、数字、下划线、中划线，且以字母开头，长度为1~64个字符。
规格|Kafka以集群式部署，每个集群包含3个zookeeper节点，3个Kafka节点。集群规模有2u4g200Gi、4u8g400Gi、8u16g800Gi三种，以2u4g200Gi为例，代表Kafka CPU为2核，Kafka内存为4g，Kafka PVC存储为200Gi。这三种规格对应的zookeeper规格为2u1g1Gi、4u2g2Gi、8u2g2Gi。
自动创建topic|在生产者尚未创建的topic发送消息时，Kafka会创建该topic，并发送消息。
参数|说明
---|---
数据中心|选择部署Redis的TCF环境。
可用区-VDC|选择部署Redis的TCF环境。
实例名称|只支持字母、数字、下划线、中划线，且以字母开头，长度为1~64个字符。
实例类型|包括HA、集群、单机三种。
规格|以2u2g4Gi为例，代表Redis CPU为2核，Redis内存为2g，Redis PVC存储为4Gi。
参数|说明
---|---
数据中心|选择部署数据库PG的TCF环境。
可用区-VDC|选择部署数据库PG的TCF环境。
实例名称|只支持字母、数字、下划线、中划线，且以字母开头，长度为1~64个字符。
规格|以2u4g50Gi为例，代表PG CPU为2核，PG内存为4g，PG PVC存储为50Gi。
参数|说明
---|---
数据中心|选择部署RabbitMQ的TCF环境。
可用区-VDC|选择部署RabbitMQ的TCF环境。
实例名称|只支持字母、数字、下划线、中划线，且以字母开头，长度为1~64个字符。
规格|以4u8g100Gi为例，代表RabbitMQ CPU为4核，RabbitMQ内存为8g，RabbitMQ PVC存储为100Gi。
单击购买按钮，打开订单详情页面，如[图4](#z070c014d473445adbd61fa3c2d8e3494__904d0463-cd00-467d-9f7d-fcf372a8cf1e)所示。
图4  订单详情页面
[]images/1656579775648.png)
单击立即支付按钮，完成购买。返回技术服务控制台，可查看购买的实例的部署状态。
## 例行维护 
### 例行维护概述 
TECS_Director_Routine_Maintenance 
#### 例行维护的分类 


##### 描述 
为了充分发挥设备的性能和作用，减少各种意外事故的发生，需要对运行中的设备进行例行维护。例行维护是一种预防性的维护，能及时发现并消除设备所存在的缺陷或隐患，通过对设备进行定期的检查与保养，确保设备能够长期安全、稳定、可靠地运行。 


##### 分类 
例行维护分为以下两种： 

 
日常维护 

 
定期维护 

 


##### 日常维护 
日常维护是指每天进行的、维护过程相对简单、并可由一般维护人员实施的维护操作。 
日常维护的目的包括： 

 
及时发现TECS系统所发出的告警或已存在的缺陷，并采取适当的措施予以恢复和处理，维持设备的健康水平，降低故障率。 

 
及时发现业务运行过程中各连接状态的异常现象，并采取适当的措施以恢复和处理，确保业务运行正常。 

 
实时掌握TECS系统和网络的运行状况，了解TECS系统或网络的运行趋势，提高维护人员对突发事件的处理效率。 

 


##### 定期维护 
定期维护是指按一定周期（如：每周、每月）进行的、维护过程相对复杂、且多数情况下须由经过专门培训的维护人员实施的维护操作。 
定期维护的目的包括： 

 
通过定期维护，使TECS系统的健康水平长期处于良好状态，确保系统能够安全、稳定、可靠运行。 

 
通过定期检查、备份、测试等手段，及时发现设备在运行过程中所出现的功能失效、性能下降等缺陷，并采取适当的措施及时予以处理，以消除隐患、预防事故的发生。 

 


#### 例行维护注意事项 
#### 例行维护注意事项 



 
建立完善的维护制度，对维护人员的日常工作进行规范。应有详细的值班日志，对系统的日常运行情况、版本情况、数据变更情况、升级情况、问题处理情况等做好详细的记录，便于出现问题后进行分析和处理。应有交接班记录，做到责任分明。 

 
维护人员在上岗前必须接受必要的维护培训，学习必要的维护知识和相关的网络知识，掌握基本操作技能和应急处理技能。维护操作时要按照相关手册的说明来进行，以确保人身安全与系统安全。维护人员应该有严谨的工作态度和较高的维护水平，并通过不断学习提高维护技能。 

 
所有的重大操作（如重启系统、加载软件等）均应作记录，并在操作前仔细确认操作的可行性，在做好相应的备份、应急和安全措施后，方可由有资质的操作人员执行。改动数据前要做数据备份，修改数据后应在一定的时间内（一般为一周）确认系统运行正常，才能删除备份数据。 

 
网管口令应该按级设置、严格管理、定期更改，并只向维护人员发放。 

 
严禁在计算机终端上玩游戏、上网等，禁止在计算机终端中安装、运行、拷贝其他任何与系统无关的软件。 

 
应具备常用的工具和仪表，如螺丝刀（一字、十字）、网线钳、电话线、网线等。 

 
维护过程中可能用到的软件和资料应该指定位置就近存放，在需要使用时能及时获得。 

 
维护人员应每天进行常规检查与测试，并做好记录。 

 
发现故障应及时处理，疑难问题应先详细记录各种原始信息，并及时联系中兴通讯技术支持。 

 
将中兴通讯当地办事处的联络方法放在醒目的地方并周知所有维护人员，以便在需要支持时能及时联络。注意时常更新最新的联络方法。 

 


#### 对维护人员的基本要求 
#### 对维护人员的基本要求 


##### 理论知识 

 
熟悉以太网、TCP/IP等计算机网络基础知识。 

 
熟悉MySQL和MongoDB数据库的基础知识。 

 
熟悉Linux操作系统的基础知识。 

 
熟悉虚拟化相关基础知识。 

 


##### 系统组网和运行环境 

 
熟悉TECS的组网方式和IP规划。 

 
熟悉TECS与网络上其它设备之间的连接关系。 

 


##### 设备操作要求 

 
熟练掌握Linux操作系统中的命令使用方法。 

 
熟练掌握MySQL和MongoDB数据库的命令使用方法。 

 
熟练掌握SSH的使用方法。 

 
熟练掌握TECS Director的操作方法。 

 
熟悉哪些操作能导致部分或全部业务中断。 

 
熟悉哪些操作能造成设备损坏。 

 
熟悉哪些操作能导致用户投诉。 

 
熟悉有哪些应急或备份的措施。 

 


### 日例行维护 
### 日例行维护 
#### 处理系统告警 
##### 维护目的 
对系统的告警进行检查，包括当前告警和历史告警，按照告警的级别，及时排查告警原因，确保系统的正常运行。 
要按告警严重程度的次序及时处理，对于原因不明的告警要及时分析，随时掌握系统的异常情况。 
##### 维护指导 
待处理告警
使用admin账号登录TECS Director管理门户网站。 
将鼠标移动至上方的[]images/Snap9.png)按钮处，出现菜单栏页面。单击菜单栏页面中的告警管理→当前告警→告警监控
按钮，打开告警监控页面。
单击页面中告警级别排序，使待处理告警按照告警级别由高到低排序。
单击每条告警的告警码名称查看告警详情，并按照处理意见进行处理。 
历史告警
使用admin账号登录TECS Director管理门户网站。 
将鼠标移动至上方的[]images/Snap9.png)按钮处，出现菜单栏页面。单击菜单栏页面中的告警管理→历史告警
按钮，打开告警查询页面，默认显示最近一天新增的历史告警。
检查最近一天新增的历史告警，并单击每条告警的操作栏中的[]images/Snap1.png)按钮查看告警详情，分析告警产生的原因。
##### 参考标准 
查询出的当前告警记录为空，或已确认告警原因。 
历史告警均已明确原因，并处理完成。 
##### 异常处理 
发现系统有任何当前告警或未处理的历史告警都应及时分析并尽快解决。告警处理的方法参见告警处理
。如果仍无法消除告警，及时联系中兴通讯技术支持
。
#### 检查通知消息 


##### 维护目的 
对系统的通知消息进行检查，通过阅读通知消息，了解系统发生的事件。 


##### 维护指导 


使用admin账号登录TECS Director管理门户网站。 


将鼠标移动至上方的[]images/Snap9.png)按钮处，出现菜单栏页面。单击菜单栏页面中的告警管理→通知
按钮按钮，打开通知查询页面，默认显示所有通知。


在查询条件中选择最近一天，查询最近一天产生的通知消息。


单击每条通知的操作栏中的[]images/1602208697037.png)按钮查看通知详情，分析通知产生的原因。




##### 异常处理 
一般情况下，通知消息无需处理。特殊情况参见告警处理
。


#### 执行自动化巡检 
##### 维护目的 
使用TECS Inspector工具对Director环境执行巡检，通过触发事先部署好的脚本，从节点、平台、服务和业务等各个层面检查TECS Director系统运行状态是否正常，提早发现潜在的风险。如有问题及时处理，确保Director正常运行。
##### 维护指导 
首次巡检需要安装TECS Inspector工具。下载TECS Inspector工具最新版本，2021年9月发布的V7.20.10.11版本及之后版本支持巡检Director。 
把工具安装到Director节点上。 
使用TECS Inspector对Director环境进行巡检。 
##### 参考标准 
查看巡检报告，没有巡检不通过项，也没有巡检执行报错项，则表示巡检通过。 
##### 异常处理 
若有未通过的巡检项，根据巡检结果中的处理建议进行问题排查。若无法解决，参见故障处理，或者导出巡检报告并联系中兴通讯技术支持。 
若有巡检执行报错项，确认director的admin账户的密码是否配置正确。若确认正确后仍无法解决，导出巡检报告并联系中兴通讯技术支持。 
### 周例行维护 
### 周例行维护 
#### 检查安全日志 
##### 维护目的 
查看系统的登录、登出记录，确认无可疑登录操作。 
##### 维护指导 
使用admin账号登录TECS Director管理门户网站。 
选择菜单运维→日志→审计日志→日志查询
，打开日志查询页面
切换到安全日志页面。
设置查询时间范围为最近一周，单击查询按钮，页面显示查询到的安全日志。
对安全日志的各项信息进行检查，确认有无可疑登录记录。 
##### 参考标准 
安全日志里没有可疑登录记录。 
##### 异常处理 
若出现可疑登录操作，及时排查具体情况，如有需要，联系中兴通讯技术支持
。
#### 检查操作日志 
##### 维护目的 
确保日志功能正常工作，查看操作记录，确认无可疑操作。 
##### 维护指导 
使用admin账号登录TECS Director管理门户网站。 
选择菜单运维→日志→审计日志→日志查询
，打开日志查询页面。
切换到操作日志页面。
设置查询时间范围为最近一周，单击查询按钮，对日志进行查询。
##### 参考标准 
操作日志里没有可疑操作记录。 
##### 异常处理 
若出现可疑操作记录，及时排查具体情况，如有需要，联系中兴通讯技术支持
。
#### 检查云资源分配情况 
##### 维护目的 
查看云环境CPU、内存、共享存储分配情况，资源不足可及时扩容和回收资源。 
##### 维护指导 
使用admin账号登录TECS Director管理门户网站。 
选择菜单运维→仪表盘
，打开仪表盘页面。
单击容量概览页签，以数据中心和云环境为对象，查看资源分配情况。
 说明： 
单击右侧[]images/image.png)按钮，增加查询对象。
##### 参考标准 
资源分配率、使用率处于合理的范围内，具体数值视实际情况而定。 
##### 异常处理 
若资源分配率、使用率已接近上限，需要进行扩容或清理部分资源，具体联系中兴通讯技术支持
。
### 自动化巡检项目 
通过随版本自带的工作流对TECS Director进行自动化巡检，检查系统服务、业务是否正常运行，提早发现潜在的风险。自动化巡检所包含的项目参见[表1](%E5%B7%A1%E6%A3%80%E9%A1%B9.html#%E5%B7%A1%E6%A3%80%E9%A1%B9-A798D79C__1b9fbb16-74fe-41c8-b0d3-9c6a71b8a100)。
序号|巡检项|巡检方法|通过标准|处理指导
---|---|---|---|---
1|检查系统CPU使用率|使用top命令采集节点CPU空闲率，每隔1秒采集一次top、一共采集4次，计算cpu idle平均值。|所有节点的平均CPU空闲 >= 20%|查看巡检不通过的详情，确认哪些节点不通过。登录不通过的节点，执行top命令，采集输出。联系中兴通讯技术支持并发送巡检不通过详情和命令采集结果。
2|检查系统内存使用率|使用free -m命令采集节点内存空闲量。|所有节点的空闲内存 >= 500M|查看巡检不通过的详情，确认哪些节点不通过。登录不通过的节点，执行top、free -m、ps -aux命令采集输出。联系中兴通讯技术支持并发回巡检不通过详情和命令采集结果。
3|检查磁盘分区使用率|使用lvs命令查出所有逻辑卷，使用df -h命令查看卷挂载目录的使用情况（也包括根分区、日志分区、/paasdata在内），根据分区使用率来判断。|所有节点的逻辑卷磁盘使用率<=90%|查看巡检不通过的详情，确认哪些节点不通过。登录不通过的节点，执行df -h命令采集输出。联系中兴通讯技术支持并发回巡检不通过详情和命令采集结果。
4|检查文件系统挂载和只读|使用lvs命令采集所有的逻辑卷。使用mount命令查询挂载情况、挂载卷的读写属性。|所有节点的逻辑卷都挂载、可读可写。|检查存储网络是否不通，如果确认不通，解决网络问题。如果不能解决，联系中兴通讯技术支持。
5|检查系统负荷|使用uptime命令查询系统负荷，取1分钟的负荷，与门限进行比较。|所有节点的负荷 <=50|查看巡检不通过的详情，确认哪些节点不通过。登录不通过的节点，执行uptime、top命令采集输出。联系中兴通讯技术支持并发回巡检不通过详情和命令采集结果。
6|检查磁盘IO使用率|通过top命令查询系统的IO使用率，取3次采集结果的平均值。通过iostat命令查询设备的IO使用率，取3次采集结果的平均值。|所有节点的wa值 <= 50%，且所有设备的ioutil <= 90%|查看巡检不通过的详情，确认哪些节点不通过登录不通过的节点，执行top、iostat -mx 1、lvs、pvs、ls -l /dev/mapper命令采集输出联系中兴通讯技术支持并发回巡检不通过详情和命令采集结果
7|检查节点间网络连通性|通过ping命令测试节点的NET-API网络平面的IP是否能ping通，即正常通信。需要使用普通包（56字节）和大包（例如：3000字节）分别进行测试，连续进行5次测试。|所有节点普通包和大包都能ping通、且无丢包。|检查交换机配置。网线是否松动。bond口主网卡是否故障，倒换主用成员口后再观察。
8|检查时钟同步|查询各个节点的NET-API网络平面的IP地址。通过SSH方式登录各节点。执行date +%s命令，收集各节点的时间，比较最大和最小两个时间。|节点之间最大时间偏差 <= 60秒|检查NTP配置是否正确。手动调整时间到一致。
9|检查kafka服务状态|检查kafka集群中所有容器状态。获取kafka容器内zookeeper上的kafka集群的节点信息。检查kafka容器所在主机节点的服务端口。|同时符合以下条件即为通过：容器状态均为running。集群节点非空。服务端口检测正常。|联系中兴通讯技术支持。
10|检查Cassandra集群状态|进入任意一个cassandra容器，使用nodetool status命令，检查集群状态。|集群中每个节点的状态标志都是UN。|联系中兴通讯技术支持。
11|检查Director服务个数和状态|对比/paasdata/Director*/install-script/bp/director.bp+migration.json和PaaS接口查回来的服务列表，比较服务数量，并查看服务状态。|凡配置文件中有的、服务列表中也有，且服务列表中的服务状态都为running。|如果服务状态异常，则尝试在PaaS portal上重启对应服务。
12|检查是否存在jvm堆栈溢出|查找/var/zte-log/testlog目录下有没有*.hprof格式的jvm堆栈溢出文件。|所有节点上都没有*.hprof文件。|查看巡检不通过的详情，确认哪些节点不通过。联系中兴通讯技术支持，并把dump文件发给中兴通讯进行分析。把dump文件从环境上删除。
13|检查节点标签完整性|使用pdm-cli cluster node list命令查看各种标签，判断有没有缺少和多余。|节点标签完整，不存在多余或缺少的标签。|查看巡检不通过详的情，确认哪些标签多余或缺少。手动添加缺少的，或删除多余的标签。
14|检查自动备份开关|调用rest接口查询自动备份标志。|自动备份标志为True。|登录Director界面，开启自动备份。
15|检查自动备份有效性|调用rest接口查询备份记录，查看每次备份的备份模式和备份状态。|符合其中一条标准即为通过：最近一次自动备份的状态是成功。不存在自动备份记录。|联系中兴通讯技术支持。
16|检查性能数据上报通道|针对每个云环境（不论其状态），查询主机对象的两个计数器：主机CPU使用率、主机CPU数量。|每个云环境的主机都能查到这两个计数器的值。|联系中兴通讯技术支持。
17|检查云环境连接状态|通过ping命令检查云环境Openstack认证URL和Provider认证URL是否能ping通。查看vrm微服务向云环境鉴权和调用云环境业务接口的结果。|同时符合以下条件即为通过：与云环境Openstack认证URL和Provider认证URL能够正常通信。vrm微服务向云环境鉴权成功、调用云环境业务接口成功。|如果IP ping不通，则检查路由配置。如果接口调用超时，检查云环境和Director之间防火墙是否放开相应端口。
18|检查性能北向文件|在性能北向FTP服务器设置中的开关打开的前提下，查看性能北向文件，检查最近的2个生成周期是否产生了性能北向文件，且文件名符合性能北向配置规则。|按照生成周期产生了性能北向文件。|联系中兴通讯技术支持。
19|检查系统日志采集通道|在虚拟资源系统日志采集开关打开的前提下，查询每个云环境（不论其状态）近期的系统日志。|每个云环境在近15分钟内都有系统日志。|检查云环境是否开启了系统日志采集，如果没开启的，则开启。检查云环境是否设置了9092、9093端口的iptables防火墙，需要放开这些端口。
20|检查操作日志采集通道|在操作日志采集开关打开的前提下，查看每个云环境9092、9093端口的连通性。|每个云环境的9092、9093端口都能进行TCP建链。|检查云环境是否设置了9092、9093端口的iptables防火墙，需要放开这些端口。
21|检查告警南向上报通道|分析告警模块的日志，有没有南向告警上来被丢弃的情况。|每个云环境近30分钟内不存在因白名单问题而丢弃告警的情况。|确认云环境是否已接入Director。确认云环境的VIM IP配置和Director接入的云环境IP一致。
## 安全 
### 安全管理 
TECS_Director_Security_Management 


安全管理是TECS Director的重要组成部分。通过安全管理，系统管理员可以管理用户、角色、账户规则，从而实现拥有不同权限的用户对不同网络资源的访问和管理，保障TECS Director系统正常、可靠地持续运行。


#### 安全管理简介 


用户组、用户、角色、操作集和资源分组的关系模型如[图1](#zb089879bb25f45d3856346f7c13a042e__849e4451-2ff7-4021-8b95-31fee14bcb81)所示。


图1  安全管理关系模型


[]images/%E6%A8%A1%E5%9E%8B%E5%9B%BE.png)




 
用户组表示一组用户的集合。 

 
用户是终端用户或者API调用者，用户至少隶属于一个用户组，如果创建时候不分配，则会属于系统的默认用户分组。 

 
角色是系统中权限的范围，包括可以管理的资源范围和操作范围，角色分配给用户后，用户拥有该角色范围内的权限。 

 
操作集是系统中各种增删改查等操作权限组成的集合，是组成角色的一部分。 

 
资源与业务相关，图标、菜单等都可以抽象为资源。 

 


#### 角色管理 
作为电信级云管理平台，TECS Director系统定义了提供方和使用方2大类用户角色。提供方提供资源和服务，使用方使用资源和服务。这2大类用户角色又可以详细划分为如下角色。
角色类别|角色名称|角色功能
---|---|---
提供方|安全管理员|进行安全数据维护、调整资源所属组织,没有业务相关权限。
系统管理员|提供方|不具备维护安全信息的权限,除此之外对管理系统及被管网络有不受限制的完全访问权。
系统维护员|提供方|不具备维护安全信息及管理系统的权限,除此之外具有被管网络的所有权限。
系统操作员|提供方|可进行一般的配置修改,不能对管理系统本身进行备份恢复等维护工作,不能修改敏感的资源配置信息。
系统监控员|提供方|可对网络信息进行浏览。
领域管理员|提供方|接入数据中心的资源，构建和管理云资源池。组织VDC生命周期管理。
业务经理|提供方|组织VDC生命周期管理。
工单指派人|提供方|查看审计日志，查看及指派工单。
工单处理人|提供方|处理工单。
级联云管管理员|提供方|查询报表和云管级联。
使用方|组织管理员/子组织管理员|用户生命周期管理和组织资源管理监控，发布虚机。
端用户|使用方|自服务门户操作、管理。
##### 新建操作集 
###### 摘要 
操作集为角色具有的操作权限，是组成角色的一部分。 
本节介绍新建操作集的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572317744771.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__ca13c7c3-4236-46b8-a4de-fd251e16e97c)所示。
图1  角色管理页面
[]images/1572317783223.png)
单击操作集，切换到操作集页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d8937dbe-0aab-4f96-a35d-283bea935975)所示。
图2  操作集页签
[]images/%E6%93%8D%E4%BD%9C%E9%9B%86%E9%A1%B5%E7%AD%BE-%E5%8A%A0%E6%A1%86.png)
单击+新建操作集按钮，打开新建操作集页面，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__6b7f4a7a-500d-4b69-9eeb-005b99288ee1)所示。
图3  新建操作集页面
[]images/%E6%96%B0%E5%BB%BA%E6%93%8D%E4%BD%9C%E9%9B%86%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
在基本信息中填写操作集名等信息，在操作集分配情况中分配该操作集具备的权限。
单击新建按钮，完成操作集的创建。
###### 结果 
新建完成的操作集出现在角色管理页面中操作集页签下的操作集列表中。
##### 修改操作集 
###### 摘要 
修改已成功创建的操作集，除操作集名以外，操作集相关的其它属性均可以修改。 
本节介绍修改操作集的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建操作集。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572330422231.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面。
单击操作集，切换到操作集页签，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__08b3e5eb-0360-40c3-9a82-e5e8bd6e44a9)所示。
图1  操作集页签
[]images/1572330577509.png)
单击待修改操作集操作列下的修改按钮，打开修改操作集页面，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__118c0f8f-3067-45fb-90ba-fcb9f7328ac3)所示。
图2  修改操作集
[]images/%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C%E9%9B%86%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
根据规划修改对应参数，单击确定按钮，完成操作集修改。
###### 结果 
修改完的操作集信息更新在角色管理页面操作集页签下的操作集列表中。
##### 删除操作集 
###### 摘要 
对于不再需要的操作集，用户可以删除操作集。 
本节介绍删除操作集的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建操作集。 
###### 相关信息 
 小心！ 
删除某个操作集会导致关联该操作集的角色发生权限变化，拥有这些角色的登录用户会被强制注销。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572331137116.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面。
单击操作集，切换到操作集页签，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__2464f4af-9428-4bec-803c-72b4e8a96a87)所示。
图1  操作集页签
[]images/%E6%93%8D%E4%BD%9C%E9%9B%86%E9%A1%B5%E7%AD%BE.png)
单击待删除操作集操作列下的删除按钮，打开删除操作集对话框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__6154561f-1e03-49b6-892a-81a34c1c52f7)所示。
图2  删除操作集
[]images/%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C%E9%9B%86%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
单击删除按钮，完成操作集的删除，系统右上角出现删除成功的提示框。
###### 结果 
已删除的操作集不再显示在角色管理页面操作集页签下的操作集列表中。
##### 新建角色 
###### 摘要 
根据设定的安全管理规划，创建需要的角色。 
本节介绍新建角色的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572257084763.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__312d6947-ae49-4a87-88ce-0b1167a84fd7)所示。
图1  角色管理页面
[]images/1572259387686.png)
单击角色页签下的+新建角色按钮，打开请选择您要创建的角色窗口，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__8714f503-ff8e-4ac1-a6b8-f801d3efc00a)所示。
图2  选择创建的角色
[]images/%E8%AF%B7%E9%80%89%E6%8B%A9%E6%82%A8%E8%A6%81%E5%88%9B%E5%BB%BA%E7%9A%84%E8%A7%92%E8%89%B2.png)
根据规划选择要创建的角色。 
创建区域安全管理员角色。选中区域安全管理员角色前的单选框，单击确定按钮，打开新建角色页面，如图3所示。图3  新建区域安全管理员填写角色名称等基本信息，并选择分配给该角色的权限。 说明：其中，如果勾选锁定该角色右侧的复选框，该角色中设置的权限对用户不生效。单击新建按钮，完成区域安全管理员的创建。 
创建其他角色选中其他角色前的单选框，单击确定按钮，打开新建角色页面，如图4所示。图4  新建其他角色在基本信息中，填写角色名称等信息。 说明：其中，如果勾选锁定该角色右侧的复选框，该角色中设置的权限对用户不生效。权限分配中的两个信息框，左侧为资源列表，右侧为操作集列表（安全管理员权限除外）。在左侧资源列表中选中待分配操作集的资源，在右侧操作集列表中选择分配的操作集。（可选）将鼠标移动到某个资源右侧，将出现两个按钮，如图5所示，可以为该资源快捷设置权限。图5  快捷设置权限按钮按钮说明设置当前资源的权限与其上级节点一致。同步当前资源的下级节点权限与当前资源一致。每个资源左侧的图标含义如下：图标说明当前资源的权限设置已跟随上级节点。当前资源的权限设置未跟随上级节点。单击新建按钮，完成其他角色的创建。 
###### 结果 
新建完成的角色显示在角色管理页面中角色页签下的角色列表里。
##### 修改角色 
###### 摘要 
修改已成功创建的角色，除角色名称以外，角色相关的其它属性均可以修改。 
本节介绍修改角色的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建角色。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572319026725.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面。
在角色页签下的角色列表中，单击待修改角色操作列下的修改按钮，打开修改角色页面，如[图1](#zedd2021217284e59bcebedb82f198b5d__74dd0b6b-8fd3-4c87-a4c6-b988c77773be)所示。
图1  修改角色页面
[]images/%E4%BF%AE%E6%94%B9%E8%A7%92%E8%89%B2%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
根据规划修改对应参数，单击确定按钮，完成角色修改。
###### 结果 
修改完的角色信息更新在角色管理页面角色页签下的角色列表中。
##### 查看角色分配用户 
###### 摘要 
角色管理支持查看分配了当前角色的用户。 
本节介绍查看角色分配用户的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已创建角色。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572320215547.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面。
单击操作列下的查看用户按钮，打开查看用户页面，查看系统默认角色或用户新建角色分配的用户，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__0664fe36-9cc8-4182-8ae5-d10dd1692951)所示。
图1  查看角色分配用户
[]images/%E6%9F%A5%E7%9C%8B%E5%88%86%E9%85%8D%E4%BA%86%E8%AF%A5%E8%A7%92%E8%89%B2%E7%9A%84%E7%94%A8%E6%88%B7-%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E8%A7%92%E8%89%B2.png)
单击关闭按钮，关闭查看页面。
##### 删除角色 
###### 摘要 
对于不再需要的角色，用户可以删除角色。 
本节介绍删除角色的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建角色。 
###### 相关信息 
系统默认角色无法删除。 
如果用户（非上级系统下发）只分配了该角色，则用户会被删除，已登录的用户会被强制注销。如果用户还分配了其他角色或角色集，则只删除该角色。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572320630479.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面。
在角色页签下的角色列表中，单击待删除角色操作列下的更多→删除
按钮，打开删除角色对话框，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__33b77ab9-713f-4a83-a7ee-31f3a2617c28)所示。
图1  删除角色
[]images/%E5%88%A0%E9%99%A4%E8%A7%92%E8%89%B2%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
单击删除按钮，完成角色的删除，系统右上角出现删除成功的提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__43a0a7a8-9874-408c-8b22-1c1f24107679)所示。
图2  删除成功
[]images/%E5%88%A0%E9%99%A4%E8%A7%92%E8%89%B2%E6%88%90%E5%8A%9F.png)
###### 结果 
已删除的角色不再显示在角色管理页面角色页签下的角色列表中。
##### 复制角色 
###### 摘要 
用户可通过复制角色功能创建权限一致的新角色。 
本节介绍复制角色的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建角色。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572329685907.png)按钮，选择更多→安全管理→角色管理
，打开角色管理页面。
在角色页签下的角色列表中，单击被复制角色操作列下的更多→复制
按钮，打开复制角色对话框，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__c5cd921e-07c2-47e6-8e44-956ad30fe2b4)所示。
图1  复制角色
[]images/%E5%A4%8D%E5%88%B6%E8%A7%92%E8%89%B2%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
根据规划填写角色名称等信息。
单击确定按钮，完成角色的复制。
###### 结果 
复制完成后，新的角色信息更新在角色管理页面角色页签下的角色列表中。
#### 用户管理 
通过用户管理，系统管理员可以新建、查询、修改、删除用户，为用户分配权限等。 
实际操作中，可以使用已创建用户的用户名和密码登录TECS Director系统，在其赋予的权限范围内实现配置及操作。
##### 新建用户 
###### 摘要 
安全管理员用户在TECS Director中新建用户后，用户可以使用新创建的账户登录，在其拥有的权限范围内进行操作。
本节介绍新建用户的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 相关信息 
新建领域管理员用户时，在权限分配的角色中需要勾选领域管理员和安全管理员。 
新建组织管理员用户时，在权限分配的角色中需要勾选组织管理员、安全管理员和工单处理人，具体参见添加组织管理员。 
新建子组织管理员用户时，在权限分配中需要勾选子组织管理员和安全管理员，具体参见创建子组织管理员。 
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/%E7%B3%BB%E7%BB%9F%E5%AF%BC%E8%88%AA%E6%8C%89%E9%92%AE.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__0cb47c7b-c911-476f-8b94-79eb9c0342af)所示。
图1  用户管理页面
[]images/%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
单击+新建用户按钮，打开新建用户页面，默认显示基本信息页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f0c89335-ab91-464a-b399-4b0f64ae24eb)所示。
图2  新建用户-基本信息
[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
根据规划填写参数，部分参数说明参见[表1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d0867558-b5f3-40bd-9de6-c37a01316b58)。
参数|说明
---|---
用户名|新建用户的用户名，即该用户的登录名称。
随机密码|如果采用自定义密码，密码和确认密码为必填项。如果采用随机密码。勾选随机密码前的复选框，新建用户页面如图3所示。其中用户名和电子邮箱为必填项，系统生成的随机密码将以邮箱形式通知。
密码|用户登录时必须输入的口令，长度必须满足所选账户规则的要求。
用户规则|选择账户规则，默认使用默认规则。
用户组|选择用户所属用户组，默认为根用户组。
同时登录数限制|设置使用该用户名同时登录TECS Director的用户数量。默认为1个用户，2个用户同时登录就会被限制，用户可根据实际需要进行修改。如果选择全局选项，对该用户的同时登录限制数量和参数配置中的全局配置保持一致。关于同名用户同时登录限制的全局配置，参见“配置参数”。
图3  新建用户-基本信息（采用随机密码）
[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E9%A1%B5%E9%9D%A2%EF%BC%88%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81%EF%BC%89-%E5%8A%A0%E6%A1%86.png)
单击下一步按钮，切换到权限分配页签，如[图4](#%E6%96%B0%E5%BB%BAXX-0B9872C5__fb17bb6e-7497-4c14-94bb-ead3db833d63)所示。
图4  新建用户-权限分配
[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7-%E6%9D%83%E9%99%90%E5%88%86%E9%85%8D-%E5%8A%A0%E6%A1%86.png)
根据规划选择租户和角色。
单击新建按钮，完成新用户的创建，系统弹出新建用户成功的提示，如[图5](#%E6%96%B0%E5%BB%BAXX-0B9872C5__dd0cc380-1303-4808-9794-e452da9b0ebf)所示。
图5  新建用户成功
[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E6%88%90%E5%8A%9F%E6%8F%90%E7%A4%BA.png)
###### 结果 
新建完成的用户将显示在用户管理页面的所有用户列表中。 
创建的用户实际并没有组织管理员或端用户的权限，只有后面添加组织/添加端用户时，将此用户作为组织管理员或端用户后才会默认赋予组织管理员或端用户的角色。 
##### 修改用户 
###### 摘要 
修改已成功创建的用户信息，除用户名以外，用户相关的其它属性均可以修改。 
本节介绍修改用户的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已经创建用户。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572254372104.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__0adb99d1-fb4e-4d25-a33e-5b3e7f6ef079)所示。
图1  用户管理页面
[]images/1572254562703.png)
在所有用户列表中，单击待修改用户操作列下的修改按钮，打开修改用户页面，默认显示基本信息页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__3ae5dd54-b132-419a-9ba7-29040a28bc14)所示。
图2  修改用户-基本信息
[]images/%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7-%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF-%E5%8A%A0%E6%A1%86.png)
根据规划修改对应参数，单击下一步按钮，切换至权限分配页签，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__a4621d19-6096-420b-841c-e4ee4a2148ad)所示。
图3  修改用户-权限分配
[]images/%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7-%E6%9D%83%E9%99%90%E5%88%86%E9%85%8D-%E5%8A%A0%E6%A1%86.png)
根据规划修改对应参数，单击确定按钮，完成用户修改。
###### 结果 
修改完的用户信息将更新在用户管理页面所有用户列表中。
##### 删除用户 
###### 摘要 
对于不需要的用户，系统管理员可以执行删除用户的操作。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建用户。 
###### 相关信息 
系统默认的admin管理员无法删除。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572333295322.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面。
在所有用户列表中，单击待删除用户操作列下的删除按钮，打开删除用户对话框，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__0584a419-d035-4207-8f93-7bde3337949d)所示。
图1  删除用户
[]images/%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
单击删除按钮，完成用户删除，系统右上角出现删除成功的提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d0a27d36-02d0-42d6-81fc-9d22374cc20e)所示。
图2  删除成功
[]images/%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E6%88%90%E5%8A%9F%E6%8F%90%E7%A4%BA.png)
###### 结果 
已删除的角色不再显示在用户管理页面所有用户列表中。
##### 复制用户 
###### 摘要 
用户可通过复制用户功能创建权限相同的新用户。 
本节介绍复制用户的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
已新建用户。 
###### 相关信息 
系统默认的admin管理员无法复制。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572334593703.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面。
在所有用户列表中，单击被复制用户操作列下的更多→复制
按钮，打开复制用户对话框，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__33205d09-6752-4c12-8b7a-1dc1a45e1ccd)所示。
图1  复制用户
[]images/1572400259605.png)
根据规划填写复制用户参数。 
单击复制按钮，完成用户复制，系统右上角出现复制用户成功提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d332d796-e263-420e-a8d6-49dc4b588027)所示。
图2  复制用户成功
[]images/%E5%A4%8D%E5%88%B6%E7%94%A8%E6%88%B7%E6%88%90%E5%8A%9F%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
###### 结果 
复制完成后，新的用户信息更新在用户管理页面所有用户列表中。
##### 查看用户权限 
###### 摘要 
用户管理支持查看所有已创建用户的权限。 
本节介绍查看用户权限的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572336158982.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面。
根据规划查看用户的权限。 
如果...|那么...
---|---
查看系统默认admin用户权限|单击admin操作列下的权限按钮。
查看安全管理员创建的用户权限|选择待查看用户操作列下的更多→权限。
打开查看用户权限对话框，其中显示了该用户具有的权限，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d4645c84-028f-4194-8c19-8be137b545a1)所示。
图1  查看用户权限
[]images/%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90.png)
##### 修改当前用户密码 
###### 摘要 
TECS Director支持修改当前登录系统的用户密码。
本节介绍修改当前用户密码的步骤。 
###### 步骤 
使用正确的账户密码登录TECS Director系统。
单击顶部导航菜单的[]images/1602560343778.png)按钮，在弹出的菜单中选择修改密码，打开当前用户密码设置页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__4e88ac5c-6103-4040-8211-29da1f6503e8)所示。
图1  当前用户密码设置
[]images/1602560547254.png)
根据规划输入相关参数，单击确定按钮，完成密码修改。
##### 批量修改密码 
###### 摘要 
用户管理支持批量修改用户的密码，所有被选用户的密码被修改为同一密码。 
本节介绍批量修改密码的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 相关信息 
只能批量修改不具有系统管理员和安全管理员角色的用户密码。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572337851904.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f0d60c27-4521-40a0-a32f-92aa86536027)所示。
图1  用户管理页面
[]images/1611057755355.png)
在所有用户操作区内，单击批量修改密码按钮，打开批量修改密码页面，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__e3264190-541e-48f2-96a7-4664e7bbd886)所示。
图2  批量修改密码
[]images/%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E9%A1%B5%E9%9D%A2-%E5%8A%A0%E6%A1%86.png)
根据规划填写修改的密码，并勾选待修改密码用户左侧的复选框，将用户添加到右侧已选项列表中。 
单击确定按钮，完成用户密码批量修改，系统右上角出现批量修改密码成功的提示框，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__111961fc-8827-45a6-8442-3892df0e3860)所示。
图3  批量修改密码成功
[]images/%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E6%88%90%E5%8A%9F.png)
##### 新建用户组 
###### 摘要 
用户组可以进行用户的划分。 
本节介绍新建用户组的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572339907594.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面。
单击用户组/个图标，切换至用户组页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__2447618d-5247-4b6b-90e0-6f288b53ad17)所示。
图1  用户组页面
[]images/%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86-%E7%94%A8%E6%88%B7%E7%BB%84-%E5%8A%A0%E6%A1%86.png)
将鼠标移到待添加用户组的根节点上，根节点的右侧出现[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84.png)按钮，单击[]images/1572340860821.png)按钮，打开新建用户组对话框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__246ace7e-0a2d-4c54-bd3d-2bcbb7fa6f73)所示。
图2  新建用户组
[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84%E5%AF%B9%E8%AF%9D%E6%A1%86.png)
根据规划填写用户组相关参数。 
单击新建按钮，完成用户组创建，系统右上角出现新建用户组成功的提示框，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__63eb2ea4-5176-4e4b-8d69-2e91586f1531)所示。
图3  新建用户组成功
[]images/%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84%E6%88%90%E5%8A%9F.png)
###### 相关任务 
在用户组页面，新建完成的用户组支持以下操作： 
如果...|那么...
---|---
修改用户组|单击用户组名称，右侧用户组信息操作区中显示当前用户组的信息。单击修改按钮，用户组信息变为可编辑状态。其中，用户组名称所属用户组不可修改。根据规划修改对应参数，单击确定按钮，完成用户组修改。
删除用户组|单击用户组名称，右侧用户组信息操作区中显示当前用户组的信息。单击删除按钮，打开删除对话框。在删除对话框中单击删除按钮，完成用户组的删除。
##### 管理登录用户 
###### 摘要 
用户管理支持管理登录用户，包括查看登录用户信息、强制退出及设置登录用户告警门限。 
本节介绍管理登录用户的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
当前系统有用户登录。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572348454172.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面。
单击登录用户会话数图标，切换至登录用户会话数页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__57c795a9-b4f8-4f10-b499-a08c2e943745)所示。
图1  登录用户会话数
[]images/%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7%E4%BC%9A%E8%AF%9D%E6%95%B0-%E5%8A%A0%E6%A1%861.png)
登录用户列表中显示了当前登录用户的用户名、客户端IP、登录时间和闲置时间信息。 
（可选）采用以下任一方法强制退出当前用户。 
单击待强制退出用户操作列下的强制退出按钮。 
勾选多个用户左侧的复选框，单击列表上方的强制退出按钮，对用户进行批量强制退出。 
（可选）设置登录用户数告警门限。 
单击登录用户会话数告警门限设置按钮，打开登录用户会话数告警门限设置对话框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__ace9100e-b1b6-4590-8c34-648b2d0421ac)所示。
图2  登录用户会话数告警门限设置
[]images/%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7%E4%BC%9A%E8%AF%9D%E6%95%B0%E5%91%8A%E8%AD%A6%E9%97%A8%E9%99%90%E8%AE%BE%E7%BD%AE.png)
根据规划设置相关参数。登录用户会话数达到告警门限时，系统将产生相应告警。 
单击确定按钮。
##### 解锁用户 
###### 摘要 
用户在某些操作下会被锁定，例如在登录输入的错误密码次数较多时，系统会提示该用户被锁定，当用户锁定超过账号规则中的锁定时长后，用户会自动解锁。如需手动解锁用户，需要安全管理员登录后进行操作。 
本节介绍手动解锁用户的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。 
系统存在被锁定用户。 
###### 步骤 
单击TECS Director顶部菜单栏的[]images/1572350158894.png)按钮，选择更多→安全管理→用户管理
，打开用户管理页面。
单击锁定用户/人图标，切换至当前锁定用户操作区，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__01745d9b-2e4e-4e6f-8906-dce05c5108e7)所示。
图1  当前锁定用户
[]images/%E9%94%81%E5%AE%9A%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C%E5%8C%BA2-%E5%8A%A0%E6%A1%86.png)
当前锁定用户列表中显示了被锁定用户的用户名、锁定者IP和锁定时间信息。
单击待解锁用户操作列下的解锁按钮，完成被锁定用户的解锁，系统右上角出现解锁成功提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__506dfda4-638a-4055-ac71-4f6bd0e98d0a)所示。
图2  解锁成功
[]images/%E8%A7%A3%E9%94%81%E6%88%90%E5%8A%9F%E6%8F%90%E7%A4%BA%E6%A1%86.png)
##### 批量导入组织用户 
###### 摘要 
组织用户包括组织管理员、子组织管理员和端用户。TECS Director支持组织管理员通过导入文件的方式，批量导入组织用户。
本节介绍批量导入组织用户的步骤。 
###### 前提 
使用组织管理员登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1602668675117.png)按钮，选择运维→租户资源管理→组织管理
，打开组织管理页面，选择要添加用户的组织，单击组织名称，打开组织详情页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__426aaf8a-ce93-4e7e-8353-0fe9e539dcb0)所示。
图1  组织详情页面
[]images/1602668643327.png)
单击更多→导入用户
按钮，打开导入用户页面，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__41e0cb3a-245f-4162-a793-2343cd17e363)所示。
图2  导入用户页面
[]images/1602668780628.png)
（可选）如果没有用户数据文件，用户可下载用户模板，自定义后导入。 
单击下载用户模板，下载用户模板文件。
打开用户模板文件，根据提示填写相关参数，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__69d353df-7717-4085-8eb3-617aa4b59323)所示。
图3  用户模板文件
[]images/1602668936019.png)
 说明： 
在角色列下填写组织管理员、子组织管理员或端用户，为组织添加具有相应权限的用户。 
一个模板内可填写多条用户信息，一行数据即为一条用户信息。 
保存编辑好的模板文件。 
单击上传文件，在弹出的对话框中选择已有的子组织模板文件。
 说明： 
模板文件仅支持.xlsx格式，一次只能上传一个文件。
单击对话框中的打开按钮，上传子组织模板文件。
根据规划选择是否打开重复数据覆盖开关。
如果...|那么...
---|---
不打开重复数据覆盖开关|如果模板中用户名称和系统中已有用户重复，则导入失败，失败原因为用户已存在。
打开重复数据覆盖开关|如果模板中用户名称和系统中已有用户重复，则导入成功，系统自动将模板中的用户覆盖原有用户。
根据规划填写用户初始密码和确认初始密码，此密码为导入用户首次登录TECS Director的验证口令。
单击导入按钮，完成用户的导入，系统提示导入用户完成，并显示用户的导入情况，如[图4](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d18e9d87-61c7-4c3c-9515-6c402cc4a572)所示。
图4  导入用户完成提示
[]images/1602670383024.png)
###### 相关任务 
在导入用户页面，可在用户数据导入结果区域查看导入用户的状态及结果。
#### 账户规则 
账户规则规定了账号的密码策略、锁定规则、账号策略及允许登录IP范围等规则。不同账号可以有不同的账号规则，在账户规则页面，安全管理员可以进行账户规则的新建、修改、删除等操作。
##### 新建账户规则 
###### 摘要 
本节介绍新建账户规则的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572398026162.png)按钮，选择更多→安全管理→账户规则
，打开账户规则页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__8a518c5a-6dbd-472d-a978-c047a6de147b)所示。
图1  账户规则页面
[]images/%E8%B4%A6%E6%88%B7%E8%A7%84%E5%88%99%E9%A1%B5%E9%9D%A2.png)
单击+新建规则按钮，打开新建账户规则页面，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__bbeb6c1e-d7fb-4749-a63a-4d542c2bcfe2)所示。
图2  新建账户规则
[]images/1572403026612.png)
根据规划设置账户规则。 
单击新建按钮，完成账户规则的创建，系统右上角出现新建账户规则成功提示框，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__11def692-3e8e-4ae1-8aed-e1ab797cf202)所示。
图3  新建账户规则成功
[]images/%E6%96%B0%E5%BB%BA%E8%B4%A6%E6%88%B7%E8%A7%84%E5%88%99%E6%88%90%E5%8A%9F.png)
###### 结果 
新建完成的账户规则将显示在账户规则页面的账户规则列表中。
###### 相关任务 
在账户规则页面，新建完成的账户规则支持如下操作：
如果...|那么...
---|---
快捷启用强密码检测|打开该账户规则强密码列下的开关。
快捷禁用强密码检测|关闭该账户规则强密码列下的开关。
快捷设置首次登录时必须修改密码|打开该账户规则首次登录时必须修改密码列下的开关。
快捷设置首次登录时不用修改密码|关闭该账户规则首次登录时必须修改密码列下的开关。
快捷设置锁定规则|单击该规则锁定规则列下的菜单，在出现的下拉菜单中选择永不锁定、暂时锁定或永久锁定。
##### 修改账户规则 
###### 摘要 
本节介绍修改账户规则的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director
###### 相关信息 
系统预设的默认规则和API访问规则无法修改。
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572403506303.png)按钮，选择更多→安全管理→账户规则
，打开账户规则页面。
单击待修改账户规则操作列下的修改按钮，打开修改账户规则页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__2d4221b2-c516-416a-b9dc-1c86cb39a5f8)所示。
图1  修改账户规则
[]images/%E4%BF%AE%E6%94%B9%E8%B4%A6%E6%88%B7%E8%A7%84%E5%88%99-%E5%8A%A0%E6%A1%86.png)
修改账户规则页面与新建账户规则页面形式一致，根据规划修改相关参数。其中，规则名称不可修改。 
单击确定按钮，完成账户规则的修改，系统右上角出现修改账户规则成功的提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__60cdc89b-4f43-4247-b943-7fe7ff35e421)所示。
图2  修改账户规则成功
[]images/%E4%BF%AE%E6%94%B9%E8%B4%A6%E6%88%B7%E8%A7%84%E5%88%99%E6%88%90%E5%8A%9F.png)
##### 删除账户规则 
###### 摘要 
本节介绍删除账户规则的步骤。 
###### 前提 
使用安全管理员账户登录TECS Director。
###### 相关信息 
系统预设的默认规则和API访问规则无法删除。 
删除账户规则后，该规则关联的用户，其账户规则都变为默认账户规则。 
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572404422783.png)按钮，选择更多→安全管理→账户规则
，打开账户规则页面。
单击待删除账户规则操作列下的删除按钮，打开删除对话框，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__74eb679a-46f6-414b-81c6-059c9619eba8)所示。
图1  删除账户规则
[]images/%E5%88%A0%E9%99%A4%E8%B4%A6%E6%88%B7%E8%A7%84%E5%88%99.png)
单击确定按钮，完成账户规则的删除，系统右上角出现删除成功的提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__290acf7c-5c59-4fbd-8ab4-76270092cd26)所示。
图2  删除成功
[]images/1572404635081.png)
##### 绑定用户 
###### 摘要 
绑定用户功能可以为用户设置相应的账户规则。 
本节介绍为账户规则绑定用户的步骤。 
###### 前提 
使用安全管理账户登录TECS Director。
###### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572405889654.png)按钮，选择更多→安全管理→账户规则
，打开账户规则页面。
单击绑定用户按钮，打开绑定用户页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__555ce041-e739-476f-8718-e8e8bbf5814f)所示。
图1  绑定用户
[]images/%E8%B4%A6%E6%88%B7%E8%A7%84%E5%88%99%E7%BB%91%E5%AE%9A%E7%94%A8%E6%88%B7-%E5%8A%A0%E6%A1%86.png)
在账户规则下拉菜单中选择待设置的账户规则。
在左侧所有用户列表中选中待绑定的用户，选中的用户出现在右侧已选用户列表中。 
单击确定按钮，完成用户的绑定。系统右上角出现绑定用户成功的提示框，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__1c9c4e67-6d41-4777-b52c-545435c241ef)所示。
图2  绑定用户成功
[]images/%E7%BB%91%E5%AE%9A%E7%94%A8%E6%88%B7%E6%88%90%E5%8A%9F.png)
#### 配置参数 
##### 摘要 
参数配置包括认证相关配置、登录横幅相关配置及接入系统配置。 
本节介绍配置参数的步骤。 
##### 前提 
使用安全管理员账户登录TECS Director。
##### 步骤 
单击TECS Director顶部菜单栏的[]images/1572415494354.png)按钮，选择更多→安全管理→参数配置
，打开参数配置页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__693d557b-184d-43b2-ab38-b49adf7f37ea)所示。
图1  参数配置
[]images/%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2.png)
单击修改按钮，参数配置页面变为可编辑状态，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__56a70fb1-e6ce-46db-bcd2-e4a7c7044903)所示。
图2  编辑参数
[]images/%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2-%E5%8F%AF%E7%BC%96%E8%BE%91.png)
根据规划设置相关参数。 
单击确定按钮，完成参数配置。系统右上角出现修改成功提示框，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__b442a0b3-4243-43c5-8b19-16c719314220)所示。
图3  修改成功
[]images/%E4%BF%AE%E6%94%B9%E6%88%90%E5%8A%9F.PNG)
#### 配置认证方式 
##### 摘要 
认证方式配置包括本地、RADIUS、RADIUS+本地、LDAP/LDAPS、LDAP/LDAPS+本地、4A票据、NFV票据、OTCP票据和天翼云认证，用户可根据规划进行相应的配置。
##### 前提 
使用超级管理员账户登录TECS Director。
##### 相关信息 
认证方式配置默认的认证方式是本地。 
使用RADIUS认证时，登录TECS Director所使用用户的用户名及密码是保存在RADIUS服务器上的，但是服务器上需要同步创建相同用户，以便于为该用户分配TECS Director中的角色。例如，用于登录TECS Director的用户名为test，那么需要在服务器中创建test用户，并为其分配相应角色。 
使用LDAP/LDAPS认证方式，LDAP采用目录方式保存数据。LDAP认证把用户数据放在LDAP服务器上，通过LDAP服务器上的数据对用户进行认证处理。 
使用LDAP/LDAPS+本地认证方式，优先使用LDAP/LDAPS认证方式，如果失败则采用本地认证方式。 
##### 步骤 
单击TECS Director顶部导航菜单的[]images/1572423210059.png)按钮，选择更多→安全管理→认证方式配置
，打开认证方式配置页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__cc258773-dee8-40f2-bba2-8875ee1c6f7e)所示。
图1  认证方式配置页面
[]images/%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2.png)
单击修改按钮，认证方式配置页面的参数变为可编辑状态，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f6c770cd-0075-49fc-aad6-da006865520a)所示。
图2  配置认证方式
[]images/%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE-%E6%9C%AC%E5%9C%B0.png)
根据规划在认证方式下拉菜单中选择相应的认证方式，并配置相关参数。
如果...|那么...
---|---
选择Radius认证方式|参见步骤4.~6.。
选择LDAP/LDAPS认证方式|参见步骤7.~9.。
选择LDAP/LDAPS+本地认证方式|参见步骤10.~12.。
在认证方式下拉列表框中选择Radius，认证方式配置页面如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__9be5dc30-be29-482f-b1c7-fb3ef186bb6b)所示。
图3  Radius认证方式
[]images/1611302995677.png)
根据规划配置相关参数，部分参数说明参见[表1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__489c7911-aff8-4065-8977-cbea7e4eebf8)。
参数|说明
---|---
Radius服务器IP地址|Radius服务器所在机器地址（例如 10.62.106.220）
Radius服务器端口|Radius服务器端口（一般是1812）
Radius密钥|认证服务器的秘钥
单击确定按钮，完成认证方式的配置。系统右上角出现修改认证方式成功的提示框，如[图4](#%E6%96%B0%E5%BB%BAXX-0B9872C5__4c7baa76-4beb-47c4-ab3c-94256e0232a5)所示。
图4  修改认证方式成功
[]images/1611304859126.png)
在认证方式下拉列表框中选择LDAP/LDAPS，认证方式配置页面如[图5](#%E6%96%B0%E5%BB%BAXX-0B9872C5__3632cd5f-4da2-4476-bbba-8aae03b26fa9)所示。
图5  认证方式配置
[]images/1611310455918.png)
根据规划配置相关参数，部分参数说明参见[表2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__ec9a7488-b609-46d0-a5e1-7840b6cd2d0e)。
参数|说明
---|---
用户基底|DC=zte,DC=intra
用户DN后缀|@zte.intra
用户角色|系统监控员
证书文件和密码|证书需要从LDAP服务器获取
单击确定按钮，完成认证方式的配置。系统右上角出现修改认证方式成功的提示框，如[图6](#%E6%96%B0%E5%BB%BAXX-0B9872C5__17883d6e-f151-4729-aa7f-c899582c8917)所示。
图6  修改认证方式成功
[]images/%E4%BF%AE%E6%94%B9%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E6%88%90%E5%8A%9F%E6%8F%90%E7%A4%BA%E6%A1%86.png)
在认证方式下拉列表框中选择LDAP/LDAPS+，认证方式配置页面如[图7](#%E6%96%B0%E5%BB%BAXX-0B9872C5__4a160ade-ada1-4f6b-ad64-35871dc899d5)所示。
图7  LDAP/LDAPS+本地认证方式
[]images/1611384337648.png)
根据规划配置相关参数，部分参数说明参见[表3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__3076d5ae-2d95-4472-84bd-1c53f7d22aec)。
参数|说明
---|---
用户基底|DC=zte,DC=intra
用户DN后缀|@zte.intra
用户角色|系统监控员
证书文件|证书文件需要从LDAP服务器获取
证书密码|证书密码需要从LDAP服务器获取
 说明： 
用户基底和用户DN后缀仅供参考，现场以对接的ladp服务器参数为准。 
单击确定按钮，完成认证方式的配置。系统右上角出现修改认证方式成功的提示框，如[图8](#%E6%96%B0%E5%BB%BAXX-0B9872C5__004bf541-7148-496d-b60b-51160b305c12)所示。
图8  修改认证方式成功
[]images/1611385421113.png)
在认证方式下拉列表框中选择天翼云，认证方式配置页面如[图9](#%E6%96%B0%E5%BB%BAXX-0B9872C5__02fe6151-ce88-438f-ae01-733a7014d5c1)所示。
图9  天翼云认证方式
[]images/1648713148087.png)
参照[图9](#%E6%96%B0%E5%BB%BAXX-0B9872C5__02fe6151-ce88-438f-ae01-733a7014d5c1)中示例配置相关参数，单击确定按钮，完成认证方式的配置。
#### 管理密钥 
##### 摘要 
介绍如何启用密钥中心功能以及管理业务私钥。 
##### 步骤 
选择更多→系统管理→配置中心→系统配置
，进入系统配置页面。
选择安全设置→密钥管理
，打开密钥管理配置页面，如[图1](#z21dc444dbd994b97898a9e68d65d4cb5__c7795d0d-6e4d-4528-938c-7fc776277dff)所示。
图1  密钥管理
[]images/image(%E9%87%8D%E7%94%A81).png)
单击修改，系统询问是否启用密钥中心，如[图2](#z21dc444dbd994b97898a9e68d65d4cb5__cbe13796-6f77-447f-9eb8-d942416cabf4)所示。
图2  启用密钥中心
[]images/1618298967481.png)
选择是，单击确定，系统提示启用秘钥中心，将无法关闭。单击确定，启用密钥中心。
刷新界面，选择配置中心→密钥管理
，打开密钥管理页面，如[图3](#z21dc444dbd994b97898a9e68d65d4cb5__bbbbb139-6b1f-430b-8335-4c792c262504)所示。
图3  密钥管理
[]images/1618299286467.png)
密钥管理中列出了各应用对应的业务私钥，单击操作栏的更新按钮，更新密钥。
单击操作栏的查看密钥按钮，查看密钥，如[图4](#z21dc444dbd994b97898a9e68d65d4cb5__fb14235b-9e69-44f0-b34f-6e4c1c36e556)所示。
图4  查看密钥
[]images/1618299254589.png)
## 备份 
### 备份恢复 
TECS_Director_Backup_and_Restoration 


TECS Director支持数据备份及恢复。


#### 手工备份数据 
##### 摘要 
TECS Director支持备份基础数据和大数据，大数据包括frpt报表数据、历史告警和通知、恢复日志和模型数据。
本节介绍手工备份数据的步骤。 
##### 前提 
使用领域管理员账户登录TECS Director。
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572918643256(%E9%87%8D%E7%94%A81).png)按钮，选择更多→系统管理→数据备份恢复
，默认打开手工备份页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__c77f54bf-59a0-4382-bd99-922b4b5f58f0)所示。
图1  手工备份页面
[]images/1579413659046.png)
备份基础数据
在基础数据备份页签，根据规划选择服务器路径和超时时间。
单击执行按钮，启动备份操作。备份进行时，基础数据备份列表中显示了各个微服务备份数据的执行进度。
备份业务数据
备份frpt报表数据 
在手工备份页面，切换至业务数据备份页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__1194d99b-a8eb-401a-9de0-40376ce5622e)所示。
图2  业务数据备份页签
[]images/ba5b833060a6474f8767839b9983ae2c.png)
在frpt报表数据行，单击操作列下的配置按钮，打开Frpt报表数据页签，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__7e978f7c-f26c-4d56-adbd-0061455de528)所示。
图3  Frpt报表数据页签
[]images/1582360309047.png)
在备份删除动作中选择仅备份，备份选择中勾选全部报表，根据规划选择服务器路径和超时时间。
单击执行按钮，启动报表大数据备份。备份完成后，执行结果中可以看到备份执行结果和文件名称，如[图4](#%E6%96%B0%E5%BB%BAXX-0B9872C5__3288e32a-0247-4142-9f1c-a2e1e1bab315)所示。
图4  备份Frpt报表数据执行结果
[]images/1582360335949.png)
备份历史告警和通知 
业务数据备份页签中，在告警行，单击操作列下的配置按钮，打开告警页签，如[图5](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f801eda3-f76b-465d-93ee-8f36a66ce739)所示。
图5  告警页签
[]images/1582360490317.png)
在备份删除动作中选择仅备份，根据规划选择其余参数。
单击执行按钮，启动历史告警和通知数据的备份。备份完成后，执行结果中可以看到备份执行结果和文件名称，如[图6](#%E6%96%B0%E5%BB%BAXX-0B9872C5__6f7ceade-9c8f-455e-b366-19d3d42f4e9e)所示。
图6  备份历史告警和通知数据执行结果
[]images/1582360528183.png)
备份恢复日志 
业务数据备份页签中，在备份恢复行，单击操作列下的配置按钮，打开备份恢复页签，如[图7](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f364c8a5-77a4-4a4e-9e6b-4f6cc77eeb5c)所示。
图7  备份恢复日志
[]images/1582360565408.png)
在备份删除动作中选择仅备份，根据规划选择其余参数。
单击执行按钮，启动恢复日志备份。备份完成后，执行结果中可以看到备份执行结果和文件名称，如[图8](#%E6%96%B0%E5%BB%BAXX-0B9872C5__4441f8a7-efb0-480e-ba62-d368a08fd333)所示。
图8  备份恢复日志执行结果
[]images/1582360592566.png)
备份模型数据 
业务数据备份页签中，在模型数据行，单击操作列下的配置按钮，打开模型数据页签，如[图9](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f5f5e14a-712e-4a81-9d44-88f146437254)所示。
图9  模型数据页签
[]images/1582360624779.png)
根据规划选择服务器路径和超时时间
单击执行按钮，启动模型数据备份。备份完成后，执行结果中可以看到备份执行结果和文件名称，如[图10](#%E6%96%B0%E5%BB%BAXX-0B9872C5__7ae0a0da-1e21-4263-9821-48e9deb04252)所示。
图10  备份数据模型执行结果
[]images/1582360658733.png)
#### 自动备份数据 
##### 摘要 
TECS Director支持自动备份基础数据和大数据，大数据包括frpt报表数据、历史告警和通知、恢复日志和模型数据。
本节介绍自动备份数据的步骤。 
##### 前提 
使用领域管理员登录TECS Director。
##### 相关信息 
大数据备份默认为开启状态。 
大数据自动备份任务包含数据备份和对系统业务数据的清理设置。 
数据清理分为按时间清理和按容量清理。按时间清理是指系统业务数据存储达到设置的天数时，备份当前数据并清理超期数据，如设置按180天清理，当系统业务数据存储达到180天时，清理180天以前的数据。按空间清理是指系统业务数据存储达到设置的容量上限时开始清理，达到下限值时停止清理。 
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572918643256(%E9%87%8D%E7%94%A82).png)按钮，选择更多→系统管理→备份恢复
，默认打开手工备份页面，在左侧功能导航树中选择备份恢复→自动备份
，进入自动备份页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d4f2f932-6df9-4fa2-99a7-533217d4c945)所示。
图1  自动备份页面
[]images/1579587762697.png)
备份基础数据
在自动备份页面，切换到基础数据自动备份页签，打开定时备份开关。
根据规划选择超时时间和执行周期
单击确定按钮，开启基础数据自动备份。
备份大数据
备份frpt报表数据 
在自动备份页面，切换到大数据自动备份页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__4b70066e-2125-4cf7-8076-5d1864722676)所示。
图2  大数据自动备份页签
[]images/1582360725235.png)
 说明： 
大数据备份默认为开启状态。 
在frpt报表数据行，单击操作列下的配置任务按钮，打开Frpt报表数据页签，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__bfabe20f-195b-42fe-aed6-ed8372ed3b72)所示。
图3  Frpt报表数据页签
[]images/1582360773033.png)
根据规划选择超时时间和执行周期。
在备份项与清理设置列表中，单击操作列下的修改按钮，弹出报表数据对话框，如[图4](#%E6%96%B0%E5%BB%BAXX-0B9872C5__0c1b03b6-5fe7-4bb8-a25a-e82bc86e1865)所示。
图4  报表数据对话框
[]images/1582360800635.png)
根据规划修改该备份项的清理时间，单击确定按钮，返回Frpt报表数据页签。
单击确定按钮，完成frpt报表数据自动备份设置。
备份历史告警和通知 
大数据自动备份页签中，在告警行单击操作列下的配置任务按钮，打开告警页签，如[图5](#%E6%96%B0%E5%BB%BAXX-0B9872C5__c056f4b3-1026-4667-ac3c-c715aafd6416)所示。
图5  告警页签
[]images/1582361247336.png)
根据规划选择超时时间和执行周期。
在备份项与清理设置列表中，根据规划勾选需要进行备份的备份项。
单击操作列下的修改按钮，可对备份项的清理时间、清理容量及门限进行设置。
单击确定按钮，完成历史告警和通知的自动备份设置。
备份基础数据日志和大数据日志 
大数据自动备份页签中，在备份恢复行单击操作列下的配置任务按钮，打开备份恢复页签，如[图6](#%E6%96%B0%E5%BB%BAXX-0B9872C5__c59c6af9-83f3-45ff-94dc-96610a3d2516)所示。
图6  备份恢复页签
[]images/1582361302753.png)
根据规划选择超时时间和执行周期。
在备份项与清理设置列表中，根据规划勾选需要进行备份的备份项。
单击操作列下的修改按钮，可对备份项的清理时间进行设置。
单击确定按钮，完成基础数据日志和大数据日志自动备份设置。
备份模型数据 
大数据自动备份页签中，在模型数据行单击操作列下的配置任务按钮，打开模型数据页签，如[图7](#%E6%96%B0%E5%BB%BAXX-0B9872C5__e4217692-abed-4569-b2a0-905c18862b5e)所示。
图7  模型数据页签
[]images/1582361358535.png)
根据规划选择超时时间和执行周期。
在备份项与清理设置列表中，单击操作列下的修改按钮，可对备份项的清理时间进行设置。
单击确定按钮，完成基础模型数据的自动备份设置。
#### 恢复数据 
##### 摘要 
TECS Director支持恢复备份数据。
本节介绍恢复备份数据的步骤。 
##### 前提 
使用领域管理员账户登录TECS Director。
##### 步骤 
打开数据恢复页面
单击TECS Director顶部菜单栏中的[]images/1572918643256(%E9%87%8D%E7%94%A83).png)按钮，选择更多→系统管理→备份恢复
，默认打开手工备份页面，在左侧功能导航树中选择备份恢复→数据恢复
，进入数据恢复页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__1230e1c5-2987-4830-9a2a-a90a7e26b8d5)所示。
图1  数据恢复页面
[]images/1579603904175.png)
恢复基础数据
在基础数据恢复页签，根据规划填写相关参数。
单击执行按钮，开始执行基础数据恢复。
恢复业务数据
在数据恢复页面，切换到业务数据恢复页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f6711d3e-a268-40aa-bd74-ec95ab567010)所示。
图2  业务数据恢复页签
[]images/ffacbb0f51ad4dc4af86833dbad8c6c4.png)
根据不同情况选择执行如下操作。 
如果...|那么...
---|---
恢复报表数据|在业务数据恢复列表中，勾选frpt报表数据，并根据规划选择服务器路径、备份文件和超时时间。单击执行按钮，完成报表数据恢复。
恢复历史告警和通知数据|在业务数据恢复列表中，勾选告警，并根据规划选择服务器路径、备份文件和超时时间。单击执行按钮，完成历史告警和通知数据恢复。
恢复日志数据|在业务数据恢复列表中，勾选备份恢复，并根据规划选择服务器路径、备份文件和超时时间。单击执行按钮，完成日志数据恢复。
恢复模型数据|在业务数据恢复列表中，勾选模型数据，并根据规划选择服务器路径、备份文件和超时时间。单击执行按钮，完成模型数据恢复。
#### 删除大数据 
##### 摘要 
TECS Director支持删除大数据，包括frpt报表数据、历史告警和通知数据和备份恢复日志数据。
本节介绍删除大数据的步骤。 
##### 前提 
使用领域管理员账户登录TECS Director。
##### 步骤 
打开页面
单击TECS Director顶部菜单栏中的[]images/1572918643256(%E9%87%8D%E7%94%A84).png)按钮，选择更多→系统管理→备份恢复
，默认打开手工备份页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__e396bf98-5aae-473c-a0bc-766fa5a7cc26)所示。
图1  手工备份页面
[]images/1579413659046(%E9%87%8D%E7%94%A81).png)
在手工备份页面，切换至业务数据备份页签，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__e9664e9a-48f6-420c-95da-b59d8ab28840)所示。
图2  业务数据备份页签
[]images/1582360093122(%E9%87%8D%E7%94%A81).png)
删除frpt报表数据
在frpt报表数据行，单击操作列下的配置按钮，打开Frpt报表数据页签，如[图3](#%E6%96%B0%E5%BB%BAXX-0B9872C5__af7ca4b3-1041-4dc9-9278-1afdcdd904d5)所示。
图3  Frpt报表数据页签
[]images/1582360309047(%E9%87%8D%E7%94%A81).png)
在备份删除动作中选择仅删除，如[图4](#%E6%96%B0%E5%BB%BAXX-0B9872C5__f995a1fd-8fe3-4c2e-b5a0-df30bfe4579d)所示。
图4  删除Frpt报表数据
[]images/1579684844116.png)
根据规划选择删除过滤方式、备份选择和超时时间。
单击执行按钮，启动数据清理。
删除历史告警和通知数据
业务数据备份页签中，在告警行，单击操作列下的配置按钮，打开告警页签。
在备份删除动作中选择仅删除，如[图5](#%E6%96%B0%E5%BB%BAXX-0B9872C5__08b0466a-3450-4454-93fa-523c25d1b8f2)所示。
图5  删除历史告警和通知数据
[]images/1579685396198.png)
根据规划选择删除过滤方式、备份选择和超时时间。
单击执行按钮， 启动数据清理。
删除备份恢复日志数据
业务数据备份页签中，在备份恢复行，单击操作列下的配置按钮，打开备份恢复页签。
在备份删除动作中选择仅删除，如[图6](#%E6%96%B0%E5%BB%BAXX-0B9872C5__a62c0ce1-1793-462f-b60f-e4fe3c7f7921)所示。
图6  删除备份恢复日志数据
[]images/1579685556141.png)
根据规划选择删除过滤方式、备份选择和超时时间。
单击执行按钮， 启动数据清理。
#### 配置备份选项 
##### 摘要 
TECS Director支持配置备份选项，包括任务执行时间、备份文件清理、自定义服务器信息和异地服务器信息。
本节介绍配置备份选项的步骤。 
##### 前提 
使用领域管理员账户登录TECS Director。
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1572918643256(%E9%87%8D%E7%94%A85).png)按钮，选择更多→系统管理→备份恢复
，默认打开手工备份页面，在左侧功能导航树中选择备份恢复→备份选项
，进入备份选项页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__98d5bd86-e286-4718-87db-a22379a10513)和[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__d6c6cb59-28a8-49bf-9894-7a521e184d3b)所示。
图1  备份选项页面-1
[]images/1579742579113.png)
图2  备份选项页面-2
[]images/-2.png)
在备份选项页面，单击底部的修改按钮，页面各选项变为可修改状态。
在任务执行时间下的执行时间中修改自动备份的执行时间。
 说明： 
这里设置的时间为基础数据自动备份的时间，大数据自动备份的时候自动延后一小时左右，具体时间系统自动算出。 
在备份文件清理下，设置基础数据和大数据的清理门限，可以根据时间设置门限，根据容量大小设置门限。
（可选）在自定义服务器信息下的自定义服务器中勾选启用。根据规划填写自定义服务器的相关参数。
 说明： 
在禁用情况下，用户只能选择默认服务器实现数据备份恢复业务；在启用情况下，用户可选择默认服务器或自定义服务器进行数据备份恢复业务。 
（可选）在异地服务器信息下的异地服务器中勾选启用。根据规划填写异地服务器的相关参数。
 说明： 
在禁用情况下，用户只能选择默认服务器或自定义服务器实现数据备份恢复业务；在启用情况下，用户可在备份时选择同时备份到异地服务器，在恢复时从异地服务器选择待恢复文件。 
单击确定按钮，完成备份选项配置。
#### 查看备份恢复日志 
##### 摘要 
TECS Director支持查看备份恢复日志，用户可以查看每次执行备份恢复和容量清理的执行记录。
本节介绍查看备份恢复日志的步骤。 
##### 前提 
使用领域管理员账户登录TECS Director
##### 步骤 
单击TECS Director顶部菜单栏中的[]images/1582357573223.png)按钮，选择更多→系统管理→备份恢复
，默认打开手工备份页面，在左侧功能导航树中选择备份恢复→备份恢复日志
，进入备份恢复日志页面，如[图1](#%E6%96%B0%E5%BB%BAXX-0B9872C5__a5926d19-3cdc-4dbf-9f08-ea90bc1520c1)所示。
图1  备份恢复日志页面
[]images/1582357573163.png)
在要查看的备份恢复任务所在行，单击详情列中的详情按钮，打开该任务的详情页面，可以查看具体执行内容和执行结果，如[图2](#%E6%96%B0%E5%BB%BAXX-0B9872C5__028db66e-2f12-4f48-b49d-0735977a9d54)所示。
图2  备份恢复日志详情
[]images/1582357987614.png)
## 容灾 
### 容灾对接指南 
#### 摘要 
本节介绍如何进行两个站点之间的容灾对接。 
#### 步骤 
配置容灾站点
在部署TECS Director的主站点A上，在地址栏中输入https://[tecs_client ip]:3011/myportal打开容灾页面，使用TCF的admin账户或容灾账户进行登录，登录的用户名和密码为： 
TCF：admin / xxxxx 
容灾账号：ssm / PaaS1!2@3#4$ 
 说明： 
输入容灾页面地址https://[tecs_client ip]:3011/myportal后，页面会跳转显示https://[tecs_client ip]:1043/ngportal/login？provider_as_idp=true&scope=user.name&response_type=code&client_id=910122879ad84d16a2a942132439e8ec&redirect_uri=https:%2F%2F[tecs_client ip]:3011%2Fmyportal，登录容灾账户后页面地址显示为https://[tecs_client ip]:3011/myportal/index/#/。 
在容灾管理页面，单击新增按钮，打开新增站点对话框，如[图1](#z0309a55a3df24fb283ba240ae46eb189__cfbaf405-7b7b-4234-8ae7-ca1a0add26a3)所示。
图1  新增站点的配置弹窗
[]images/image.png)
根据需要填写配置，配置说明参见[表1](#z0309a55a3df24fb283ba240ae46eb189__4786da2e-d0bb-452b-b495-4c8f6632bc4c)，单击确定按钮，等待站点配置完成，站点配置成功后如[图2](#z0309a55a3df24fb283ba240ae46eb189__ccb6147a-9e3d-4668-ab9a-2ec61681b383)所示。
名称|说明
---|---
角色|对于当前环境，根据实际需要配置角色为“主用”、“备用”或“同城备用”。
站点名称|站点名称是容灾环境的唯一标识符，一经填写不可更改，因此注意名称一定要具有唯一性与辨识性（与另一个站点的名称不同）。
租户|基本信息中的租户选择director。
描述|按照实际需要进行填写，主要起到对站点信息进行补充说明的作用。
用户名|一般是gr
密码|为容灾页面的登录密码PaaS1!2@3#4$，其中，gr登录密码用户也可按照要求自行配置：长度8~245位，必须包含大写字母、小写字母、数字和特殊符号四种，不能包含汉字。
门户地址|登录页面所使用的tecs_client ip
图2  站点配置完成
[]images/dbeea3d9162e41d18604cbaae962b2e3.png)
对备用站点B也进行上述配置。 
配置站点间的接入
在主站点上单击容灾按钮，进入容灾页面，如[图3](#z0309a55a3df24fb283ba240ae46eb189__11720a47-4578-4a5a-8070-b91870e9e909)所示。
图3  容灾界面
[]images/6edc694f5bbe433ab32dfdd908be2113.png)
 说明： 
此时可以观察到容灾页面上只显示了本端配置，没有对端站点的信息，因此需要将其接入主站点。 
单击接入对端，打开配置对端站点页面，如[图4](#z0309a55a3df24fb283ba240ae46eb189__d736ca9d-1cb4-4ce0-ad93-414038823606)所示。
图4  配置对端站点
[]images/4.png)
在配置对端站点页面上进行配置，其中ip填写对端的容灾对接ip，密码与容灾对接登录方式一致，单击获取对端信息获按钮进入[图5](#z0309a55a3df24fb283ba240ae46eb189__376a1068-7897-4e28-be69-192fe9e60020)所示页面，此时端口信息以及门户地址已经由系统自动填充，（若环境使用的是双栈地址，则无法自动填充，主备站点需要手动选择同时使用ipv4或者ipv6地址）。
图5  获取对端信息
[]images/4b4eb15fd92748db902c0aaf3ffca6a1.png)
选择完成后，单击确定按钮，完成主站点A与备站点B的单向接入配置，如[图6](#z0309a55a3df24fb283ba240ae46eb189__924039ef-cbd1-43d9-a7d7-ad340de22eba)所示。
图6  完成接入对端
[]images/c2125a7ecd97458c8e6985d02cf7ae4f.png)
根据上述配置在备站点B的容灾页面上接入主站点A，完成双向配置，如[图7](#z0309a55a3df24fb283ba240ae46eb189__997e8688-b23d-47cf-ab16-1e294d16747a)所示。
图7  站点A上的站点间接入配置完成
[]images/084ae3f3a04d4d479722bc94df6537f8.png)
配置容灾中间件
在主用站点A上，对备用站点B的各个中间件依次单击配置按钮，在弹出的页面上进行配置，对于如cos、ftp、kms服务等，直接单击确定按钮，如[图8](#z0309a55a3df24fb283ba240ae46eb189__b3030985-5259-45a1-b7af-758026bbc6b3)所示。
 说明： 
需要配置的中间件以及对应Director服务： 
application：业务数据 
cos：能力开放服务 
ElasticSearch：elasticsearch 
FTP：ftp-director服务 
kms：秘钥 
PostgreSQL：postgresql 
PostgreSQLCache：postgresqlcache 
图8  基本属性页面
[]images/0d78a8e7ec794a519f798dc1d91902c0.png)
对于ElasticSearch组件，索引【禁止】配置以cms-sys开头的系统日志，如[图9](#z0309a55a3df24fb283ba240ae46eb189__c68d1d39-7ad9-4ac5-9502-4374aa2ca499)所示。
图9  配置ElasticSearch组件
[]images/90f8f347ea884ed7b88512efae1a670a.png)
 说明： 
只有ElasticSearch组件需要特殊配置，其它不需要。 
对于postgre相关的中间件，配置需要手动选择数据传输ip地址，端口信息已经自动填充。若GR网络为双栈需要手动选择地址，单栈环境会自动填充，如[图10](#z0309a55a3df24fb283ba240ae46eb189__cc4fe88b-f1b6-437a-b4f8-c2f51f2c203e)所示。
图10  配置postgre相关的中间件
[]images/182c70f47e8c43278c5276ee1aebefe9.png)
单击确定按钮，完成中间件配置后，选择需要容灾的中间件，单击启动按钮，一键启动中间件服务，如[图11](#z0309a55a3df24fb283ba240ae46eb189__44d68402-b0ab-45bb-9b94-ce21e9490296)所示。
图11  启动中间件服务
[]images/07ec418ad39e45b4896a0c2df9f467a9.png)
 说明： 
application实例——集群文件PVC是不需要进行容灾对接的，所以启动时无需勾选。 
在备用站点B容灾界面重复上述配置，两个站点数据同步大约需要5~15分钟，完成后，主备站点的中间件配置以及激活过程完成，如[图12](#z0309a55a3df24fb283ba240ae46eb189__cb2ce704-7212-4c64-b495-4d366733f030)所示。
图12  完成配置
[]images/40db5065eca64a60820dedaf2fe1b7a1.png)
#### 相关任务 
切换站点： 
在任意站点的容灾页面上单击主备切换按钮，弹出主备切换对话框，选择需要升主的站点，输入切换原因，单击切换，如[图13](#z0309a55a3df24fb283ba240ae46eb189__5bc3f587-3329-4881-831b-ca159564615a)所示。
图13  切换站点
[]images/9648d9ecffb144de9743b5d138838f6d.png)
选择需要升主的站点，输入切换原因，单击切换按钮。
 说明： 
切换过程大约持续5-10分钟，切换完成后，中间件状态将会在5分钟之内进行更新，如果状态持续异常，则需要联系技术人员提供相应支持。 
