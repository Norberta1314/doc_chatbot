# 告警SNMP北向接口规范 
## 范围 
TECS Director网管北向SNMP接口规范包括：公共接口规范、告警管理接口规范。
本规范规定了中兴通讯TECS Director对上级NMS提供的标准北向SNMP接口的技术规范。
本规范适用于中兴通讯TECS Director与上级NMS系统对接的规划和设计。
## 术语和缩略语 
TECS Director网管北向SNMP接口规范包括：公共接口规范、告警管理接口规范。相关缩略语和术语参见[表1](b81b6306c0934483b4a398cd64515154.html#topicid7956331__tableid2180053)和[表2](b81b6306c0934483b4a398cd64515154.html#topicid7956331__tableid2765516)。
缩略语|中文解释|英文解释
---|---|---
NMS|网络管理系统|Network Management System
ME|管理网元|Managed Element
Itf-N|北向接口|Interface Northbound
IRP|集成参考点|Integration Reference Point
MIB|管理信息库|Management Information Base
OID|对象标识符|Object Identifier
术语|说明
---|---
告警级别|当前告警的级别
告警原始级别|未清除告警，告警原始级别和告警级别相同已清除告警，告警原始级别为已清除级别
## 接口概述 
## 接口概述 
### SNMP接口简介 
简单网络管理协议（SNMP：Simple Network Management Protocol）是由互联网工程任务组（IETF：Internet Engineering Task Force ）定义的一套网络管理协议。使用SNMP，一个管理工作站可以远程管理支持这种协议的网络设备，包括监视网络状态、修改网络设备配置、接收网络事件警告等。SNMP接口适用于TECS Director北向对接第三方告警平台的情况。
### 接口位置和接口类型 
TECS Director北向SNMP是中兴通讯提供的北向适配器，使NMS通过SNMP协议网管获取所需数据。它的位置如[图1](83302a90ad6c48a4905c3f5a014350f9.html#topicid7828799__827d3798-679c-4400-ae1a-39ad9ced291b)所示。
图1  北向SNMP接口位置图
[]images/image.png)
### 支持的SNMP协议 
采用SNMP协议方式进行数据交互，相应的协议栈参见[表1](9ef66a112134464c8b16f3ae369ea823.html#topicid2710864__tableid6264460)。
应用层|SNMP
---|---
传输层|UDP
网络层|IP
数据链路层|DL
物理层|PHY
SNMP接口支持IETF的SNMPv2c，SNMPv3协议。具体支持情况参见[表2](9ef66a112134464c8b16f3ae369ea823.html#topicid2710864__tableid7825651)。
协议类型|支持类型
---|---
SNMPv2c|SNMPv2c 协议标准操作SNMP GetSNMP Get NextSNMP Get BulkSNMP SetSNMPv2cTrapSNMPv2c 基于Community 的安全模型
SNMPv3|SNMPv3 协议标准操作SNMP GetSNMP Get NextSNMP Get BulkSNMP SetSNMPv3 TrapSNMPv3 基于用户的安全模型
## SNMP北向公共接口规范 
### SNMP版本支持 
ZTE SNMP北向接口支持SNMP协议的V2C和V3版本，在实际开局时可根据需要通过配置的方式使系统提供不同的版本支持。
### ZTE MIB根节点定义 
MIB即管理信息库（Management Information Base）是SNMP中管理数据的标准，在这个标准里规定了网络代理所使用的数据标识，数据类型，以及对数据的操作等信息。
MIB中的数据标识以一种根在上的树状方式组织，称为对象命名树（Object Naming Tree）。树上的每个对象以从树根（虚拟根）开始到对象为止所经过结点的序列来唯一标识。如[图1](5fa72780da0543d6953c658b4b90f559.html#topicid7303964__38d60f91-5dd6-4882-9d33-4d9b9f560b8e)所示。
图1  MIB对象命名树
[]images/1619517309486.png)
图中“zteMIB”结点可用｛.1.3.6.1.4.1.3902｝标识，在实际的环境中该结点也是公司内定义自己对象标识起始点。为图示方便，本文画告警北向SNMP接口的对象命名树时，只画出完整对象树从enterprises结点开始的子树，子树的根结点直接用结点在完整对象树中的完整标识符{.1.3.6.1.4.1}表示。
## SNMP北向告警接口规范 
### 告警北向SNMP接口的MIB说明 
#### alarmIRP部分 
alarmIRP中定义来自于mib定义文件zxcomc-snmp-alarmirp-mib-v1.1.txt，主要定义北向接口中和告警属性直接相关的对象。主要包含：
alarmIRPInfo{.1.3.6.1.4.1.3902.4101.1.1}分支，其下属性用于定义alarm集成参考点的一些基础信息，如版本等。 
alarmCount{.1.3.6.1.4.1.3902.4101.1.2}分支，其下属性为当前告警的总数值以及各级别的分项计数值。 
currentAlarmTable{.1.3.6.1.4.1.3902.4101.1.3}分支，为告警表格定义，其下属性为告警表格中各字段的属性标识。这些字段属性标识除用于当前告警表格查询外，也在告警的Trap上报消息中使用。 
alarmNotifications{.1.3.6.1.4.1.3902.4101.1.4}分支，其下属性用于定义告警Trap标识，目前有8种告警Trap，新告警上报Trap(alarmNew)，告警清除Trap(alarmCleared)、确认状态改变（alarmAckChange）、注释状态改变（alarmCommentChange）、告警同步（alarmSync）、系统消息（messageInfo）、告警级别改变消息（alarmSeverityChange）、告警路径改变（关联业务）消息（alarmServiceChange）、告警同步开始（alarmSyncStart）、告警同步结束（alarmSyncEnd）。 
alarmFilter{.1.3.6.1.4.1.3902.4101.1.6}分支，用于定义告警北向SNMP接口中Trap消息的过滤条件，只有不被过滤的告警消息才可能被转换成Trap信息发出。 
alarmOperation{.1.3.6.1.4.1.3902.4101.1.7}分支，告警同步（alarmSync）。 
#### csIRP部分 
csIRP中定义来自于mib定义文件zxcomc-snmp-csirp-mib.txt，该库中主要定义北向接口中和协议控制相关的对象。
[]images/1619517546161.png)主要包含： 
csIRPInfo{.1.3.6.1.4.1.3902.4101.4.1}分支，其下属性用于定义cs集成参考点的一些基础信息，如版本、心跳Trap发送周期等。 
csNotifications{.1.3.6.1.4.1.3902.4101.4.2}分支，其下属性用于定义心跳Trap标识。 
### 告警北向SNMP接口的功能 
告警北向SNMP接口目前包括如下功能： 
#### 查看系统通讯监控版本 
NMS系统可以通过对告警北向SNMP接口MIB中定义的csIRPVersion对象（.1.3.6.1.4.1.3902.4101.4.1.1.0 ）执行get操作获取系统通讯监控版本。目前系统返回版本值为"CS IRP V2.0"。
#### 发送心跳Trap 
TECS Director可以根据设定的心跳Trap周期，定时使用SNMP接口MIB中定义的heartbeatNotification标识发送心跳Trap到北向网管。不同序号的心跳Trap含义参见[表1](2e86b02c94204a91bf94dc4f0efb42bc.html#topicid9019728__tableid2580240)。
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值： .1.3.6.1.4.1.3902.4101.4.2.1.1
3|heartbeatperiod|心跳周期|Integer类型|.1.3.6.1.4.1.3902.4101.4.1.2.0|默认单位为秒
#### 查看及设置心跳Trap周期 
NMS系统可以通过对SNMP接口MIB中定义的csIRPHeartbeatPeriod对象（.1.3.6.1.4.1.3902.4101.4.1.2.0）执行get或者set操作来查看及设置心跳Trap周期。
对象zteMIB.alarm.csIRP.csIRPInfo.csIRPHeartbeatPeriod用于控制心跳Trap的发送频率。取值单位为秒，可设置值为0、或者5~300。默认发送频率为30秒。 
 说明： 
心跳Trap设置值0代表不发送心跳Trap。设置值超过300或者小于5不生效，set操作会返回-1。 
心跳Trap修改后一直有效。若系统重启或北向接口维护工具参数修改，则心跳周期会恢复为用户在接口开通/维护时的设置值。 
#### 查看接口的告警定义版本 
NMS系统可以通过对告警北向SNMP接口MIB中定义的alarmIrpVersion对象（.1.3.6.1.4.1.3902.4101.1.1.1.0）执行get操作来获取告警定义版本。目前系统返回版本值为"ALARM IRP V2.0"。
#### 当前告警表格查询 
NMS系统可以通过对SNMP接口MIB中定义的currentAlarmTable对象（.1.3.6.1.4.1.3902.4101.1.3）执行SNMP表格操作以取得系统中所有的当前告警。表格中告警各字段属性在该currentAlarmTable对象下级定义。
序号|SNMP北向告警属性名称|TECS Director告警属性名称|说明|OID
---|---|---|---|---
1|alarmId|alarmKey（告警主键）|标识一条告警，不允许使用中文。告警源产生告警时提供的告警唯一标识，该值用于唯一标识一条当前告警。|.1.3.6.1.4.1.3902.4101.1.3.1.1
2|alarmManagedObjectInstance|如果position为空，则取值为网元（ME）如果网元内定位不为空，则取值为网元（ME）+网元内定位（position）的全OID|根据TECS Director资源模块规范，ME值中不能出现逗号（, ），因此，对NMS收到的此属性来说，只能是如下两种格式：ME或者ME,position 。|.1.3.6.1.4.1.3902.4101.1.3.1.2
3|alarmEventTime|告警表格查询时取值为告警产生时间（AlarmRaisedTime）告警Trap中的此属性取值根据事件类型不同而代表不同的TECS Director告警属性值。对于新告警上报Trap，此值为告警产生时间（AlarmRaisedTime）。对于告警恢复Trap，取值为告警恢复时间（AlarmClearedTime）。对于告警确认状态改变Trap，取值为告警确认状态改变时间（AckTime）。对于注释改变Trap，取值为注释时间（CommentTime）。对于同步后补采Trap，取值为告警上报时间（AlarmRaisedTime）。|-|.1.3.6.1.4.1.3902.4101.1.3.1.3
4|alarmEventType|告警类型（AlarmType）|存在编码转换，详情参见告警北向SNMP接口的告警类型和TECS 云管系统告警类型的取值对照表。|.1.3.6.1.4.1.3902.4101.1.3.1.4
5|alarmProbableCause|标准告警码|由各专业网在上报的告警码模型中定义，未定义时默认值为0。|.1.3.6.1.4.1.3902.4101.1.3.1.5
6|alarmPerceivedSeverity|告警级别（PerceivedSeverity）|TECS Director消息往Trap消息转换时，级别取值存在编码转换，详情参见告警北向SNMP接口的告警级别和TECS 云管系统告警级别取值对照表。|.1.3.6.1.4.1.3902.4101.1.3.1.6
7|alarmSpecificProblem|告警原因|文本串，可能存在中文内容。|.1.3.6.1.4.1.3902.4101.1.3.1.7
8|alarmAdditionalText|告警附加信息（AdditionalText）|文本串，可能存在中文内容。|.1.3.6.1.4.1.3902.4101.1.3.1.8
9|alarmIndex|告警索引号，是告警北向模块为每一条当前告警分派的唯一整形编号。|索引号是循环分配使用，不能保证每条告警分配的索引号均是递增。|.1.3.6.1.4.1.3902.4101.1.3.1.9
10|alarmComment|告警注释（CommentText）|告警表格操作时，可以查看，也可以设置新值。|.1.3.6.1.4.1.3902.4101.1.3.1.10
11|alarmCode|厂商告警码编号，该码值和alarmSystemType一起构成一个TECS Director中唯一的告警码。|参见告警北向SNMP接口的告警级别和TECS 云管系统告警级别取值对照表。|.1.3.6.1.4.1.3902.4101.1.3.1.11
12|alarmNetype|网元类型（Moc）|-|.1.3.6.1.4.1.3902.4101.1.3.1.12
13|rowStatus|告警表格行状态，TECS Director中无此属性|查告警表时取值只有：1－活跃；对指定告警设置该属性6－删除，代表清除指定告警。|.1.3.6.1.4.1.3902.4101.1.3.1.13
14|alarmCodeName|告警码名称（ProbableCause.Name）|-|.1.3.6.1.4.1.3902.4101.1.3.1.14
15|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和网元以下位置时时，取值为"网元名称,位置名称"。|.1.3.6.1.4.1.3902.4101.1.3.1.15
16|alarmSystemType|告警资源类型|-|.1.3.6.1.4.1.3902.4101.1.3.1.16
17|alarmNeIP|告警网元IP （NeIp）|支持两个IP；当包含IPV6时仅上报第一个IP。|.1.3.6.1.4.1.3902.4101.1.3.1.17
18|alarmAck|确认状态（AckState）|1表示确认，2表示未确认。|.1.3.6.1.4.1.3902.4101.1.3.1.18
19|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空。|.1.3.6.1.4.1.3902.4101.1.3.1.19
20|timeZoneID|告警上报时区ID（TimeZoneID）|-|.1.3.6.1.4.1.3902.4101.1.3.1.20
21|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移。|.1.3.6.1.4.1.3902.4101.1.3.1.21
22|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移。|.1.3.6.1.4.1.3902.4101.1.3.1.22
23|aid|告警标识（Aid）|特定范围内的告警唯一标识，只是一个字符串，无其他任何含义。|.1.3.6.1.4.1.3902.4101.1.3.1.23
24|id|告警编号（ID）|告警的唯一数字编号，告警编号唯一标识同一告警。|.1.3.6.1.4.1.3902.4101.1.3.1.24
25|alarmOtherInfo|告警自定义属性|-|.1.3.6.1.4.1.3902.4101.1.3.1.25
26|alarmMocObjectInstance|网元名称|-|.1.3.6.1.4.1.3902.4101.1.3.1.26
#### 查询当前各级别告警数目 
NMS系统可以通过对告警北向SNMP接口MIB中定义的alarmCount对象分支下的各属性执行get操作来获取当前告警的总数值以及各级别的分项计数值。
其中： 
alarmIndeterminateNumber (1.3.6.1.4.1.3902.4101.1.2.1.0)指未定义级别告警数量，目前固定为0。 
alarmCriticalNumber (.1.3.6.1.4.1.3902.4101.1.2.2.0)指严重级别告警数量。 
alarmMajorNumber (.1.3.6.1.4.1.3902.4101.1.2.3.0) 指主要级别告警数量。 
alarmMinorNumber (.1.3.6.1.4.1.3902.4101.1.2.4.0) 指次要级别告警数量。 
alarmWarningNumber (.1.3.6.1.4.1.3902.4101.1.2.5.0) 指警告级别告警数量。 
alarmNumber (.1.3.6.1.4.1.3902.4101.1.2.6.0) 指当前告警总数量。 
#### 清除当前告警表格中指定告警 
TECS_Director_Alarm_SNMP_Northbound_Interface_Specifications 
NMS系统可以通过对SNMP接口MIB中定义的告警表格中的rowStatus属性执行set操作来清除指定告警。清除约定如下：
告警SNMP北向告警表格中的alarmIndex为北向模块为每个告警分派的唯一索引值。对zteMIB.alarm.alarmIRP.currentAlarmTable.currentAlarmEntry.rowStatus.
<alarmIndex>执行set操作，并且set的value为"6" (这里只能取这一个值)，代表对告警索引号为<alarmIndex>的告警执行清除操作。
 说明： 
文中的<alarmIndex>代表变量，其值由用户根据约定输入。 
#### 设置当前告警表格中指定告警的告警注释 
NMS系统可以通过对SNMP接口MIB中定义的告警表格中的alarmComment属性执行set操作来修改指定告警的注释。设置约定如下：
告警SNMP北向告警表格中的alarmIndex为北向模块为每个告警分派的唯一索引值。对zteMIB.alarm.alarmIRP.currentAlarmTable.currentAlarmEntry. alarmComment. <alarmIndex>执行set操作,并且set的value为<commentValue>，代表对告警索引号为<alarmIndex>的告警执行增加告警注释操作，并且新的告警注释内容为<commentValue>。
 说明： 
文中的<alarmIndex>代表变量，其值由用户根据约定输入。 
#### 确认/反确认当前告警表格中的指定告警 
NMS系统可以通过对SNMP接口MIB中定义的告警表格中的alarmAck属性执行set操作来修改指定告警的确认状态。设置约定如下：
告警SNMP北向告警表格中的alarmIndex为北向模块为每条当前告警分派的唯一索引值。对zteMIB.alarm.alarmIRP.currentAlarmTable.currentAlarmEntry.alarmAck. <alarmIndex>执行set 操作，并且set 的value为"1"(确认)或者"2"(未确认)，代表对告警索引号为<alarmIndex>的告警执行确认或者反确认操作。注意确认/反确认操作时，set的value取值只能来自下表中的接口编码值。确认状态参见告警北向SNMP接口的确认状态取值对照表。
 说明： 
文中的<alarmIndex>代表变量，其值由用户根据约定输入。 
#### 告警级别修改 
通过对SNMP接口MIB中定义的告警表格中的alarmPerceivedSeverity属性＋表格索引执行set操作来修改指定告警的级别。取值范围参考告警北向SNMP接口的告警级别和TECS Director告警级别取值对照表。告警级别修改有如下业务规则约束：
修改告警的级别取值范围为2~5。 
Set操作参数不满足级别约定，设置值为1或6，Set操作返回失败（NULL）；设置值不在1~6范围内，抛出异常。 
Set操作成功或告警对应的告警码为固定级别，Set操作返回输入参数。 
#### Trap消息中属性的OID说明 
各Trap消息（如告警上报Trap、告警清除Trap等）的每个属性都有一个OID，fm在实际发送trap消息时会在一些属性的OID后面均增加告警的序号（sequence），如：资源类型属性.1.3.6.1.4.1.3902.4101.1.3.1.16.7750019，7750019为告警的sequence字段值。
告警序号是在告警上报时，由fm生成的唯一值。 
除以下OID外，所有OID都会加上序号（sequence）：
.1.3.6.1.2.1.1.3.0 
.1.3.6.1.6.3.1.1.4.1.0 
.1.3.6.1.4.1.3902.4101.1.1.4 
.1.3.6.1.4.1.3902.4101.1.1.3 
.1.3.6.1.4.1.3902.4101.1.1.2 
#### 发送告警上报Trap 
系统可以使用SNMP接口MIB中定义的alarmNew标识（.1.3.6.1.4.1.3902.4101.1.4.1.1）将未被Trap过滤条件过滤掉的告警上报消息Trap往北向网管。Trap消息中的告警属性值请参阅[当前告警表格查询](090b943ea3a74454a25b03bd7c6c4448.html)。
系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。默认情况下，可见性告警和不可见性告警均会上报。 
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.1
3|alarmEventTime|告警发生时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码，即厂商告警码。|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码。|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|-
12|alarmSpecificProblem|告警特殊原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAdditionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING：0-60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0支持通过上报的时区偏移量和夏令时偏移量计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0支持通过上报的时区偏移量和夏令时偏移量计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString（SIZE(0..255)）有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString （SIZE(0..255)）|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
alarmProbableCause字段的值为0代表无北向原因码 
#### 发送告警恢复Trap 
系统可以使用SNMP接口MIB中定义的alarmCleared标识（.1.3.6.1.4.1.3902.4101.1.4.1.2）将未被Trap过滤条件过滤掉的告警恢复消息Trap往北向网管。Trap消息中的告警属性值更详细说明请参阅[当前告警表格查询](090b943ea3a74454a25b03bd7c6c4448.html)。系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.2
3|alarmEventTime|告警清除时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码，即厂商告警码。|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码。|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|-
12|alarmSpecificProblem|告警原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAdditionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING：0~60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0 ，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString（SIZE (0..255)） 有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString （SIZE (0..255)）|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
#### 发送告警确认状态改变Trap 
系统可以使用SNMP接口MIB中定义的alarmAckChange标识(.1.3.6.1.4.1.3902.4101.1.4.1.3)将未被Trap过滤条件过滤掉的告警状态改变消息Trap往北向网管。Trap消息中的告警属性值更详细说明请参阅当前告警表格查询一节的内容。系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。 
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.3
3|alarmEventTime|告警确认时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码，即厂商告警码|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|-
12|alarmSpecificProblem|告警原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAddphitionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING：0~60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0  ，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString (SIZE (0..255))有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
#### 发送告警注释变化Trap 
系统可以使用SNMP接口MIB中定义的alarmCommentChange标识（.1.3.6.1.4.1.3902.4101.1.4.1.4）将未被Trap过滤条件过滤掉的告警注释改变消息Trap往北向网管。Trap消息中的告警属性值更详细说明请参阅[当前告警表格查询](090b943ea3a74454a25b03bd7c6c4448.html)。系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.4
3|alarmEventTime|告警注释时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码，即厂商告警码。|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码。|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|-
12|alarmSpecificProblem|告警原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAdditionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING：0~60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString（SIZE (0..255)）有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString（SIZE (0..255)）|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
#### 发送告警级别改变Trap 
系统可以使用SNMP接口MIB中定义的alarmSeverityChange标识（.1.3.6.1.4.1.3902.4101.1.4.1.8）将未被Trap过滤条件过滤掉的告警级别改变消息Trap往北向网管。Trap消息中的告警属性值更详细说明请参阅当前告警表格查询一节的内容。系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.8
3|alarmEventTime|告警级别改变时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码,即厂商告警码。|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码。|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|-
12|alarmSpecificProblem|告警原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAdditionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING：0~60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString （SIZE (0..255)）有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString （SIZE (0..255)）|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
#### 发送告警路径改变（关联业务）Trap 
系统可以使用SNMP接口MIB中定义的alarmServiceChange标识 （.1.3.6.1.4.1.3902.4101.1.4.1.10）将未被Trap过滤条件过滤掉的告警路径改变消息Trap往北向网管。Trap消息中的告警属性值更详细说明请参阅[当前告警表格查询](090b943ea3a74454a25b03bd7c6c4448.html)。系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。
TECS Director在基础mib中增加了告警路径改变trap（alarmPathChange entry .1.3.6.1.4.1.3902.4101.1.4.1.13）,为冗余信息，V1.20.10.06P01版本中删除并在版本说明书中说明。
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.10
3|alarmEventTime|告警路径改变时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码,即厂商告警码。|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码。|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|-
12|alarmSpecificProblem|告警原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAdditionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING0-60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0 ，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0-50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString (SIZE (0..255))有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
#### 发送告警列表重建Trap 
   上级网管和TECS Director上都保存了一个活动告警列表，当SNMP北向接口不能确认上级网管和TECS Director的活动告警列表一致时，发出一个告警列表重建通知，上级网管接收到该通知后，可以考虑重新从TECS Director上获取当前告警数据。

统一网管系统在服务启动或北向SNMP服务正常启动后，自动发送列表重建Trap到北向网管。
序号|参数项名称|说明|参数值类型|值定义（OID）
---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0
3|systemDN|TECS Director|STRING|.1.3.6.1.4.1.3902.4101.1.1.3
0~255个字符|3|systemDN|TECS Director|.1.3.6.1.4.1.3902.4101.1.1.3
#### 基于网元位置的告警同步 
当NMS需要和TECS Director进行全网告警同步，可以通过[当前告警表格查询](090b943ea3a74454a25b03bd7c6c4448.html)来获取所有TECS Director当前告警来完成。如果NMS只需要进行局部告警同步，比如只针对某一组网元位置的告警进行同步，则可以利用"基于网元位置的告警同步"功能来达成目标。具体操作是由NMS模块向SNMP北向接口MIB中定义中的syncAlarm节点执行set操作以传入本次需要同步的位置信息， 然后SNMP模块会查询TECS Director上该位置的所有告警，并封装成多条告警同步Trap，上报到NMS。
##### 触发网元位置同步的set操作 
NMS需要向mib定义中的syncAlarm（.1.3.6.1.4.1.3902.4101.1.7.1.0）结点发出set动作以触发满足条件告警的TRAP同步上报.Set操作条件目前支持：发生开始时间条件，发生结束时间条件，网元条件。多个网元之间的关系是“或”的关系，网元条件和上报时间的条件是"与"的关系。 
例如：beginraisetime:2017-07-04 15:30:00;endraisetime:2017-07-05 15:30:00;position:me,me2; 
 说明： 
注意：网元条件必须在发生时间条件之后。 
网元同步条件例子说明如下： 
网元条件说明如下：网元位置同步set动作的参数格式形如：“position:pos1,pos2;”参数以 “position:”开头，“;”结尾。参数中“pos1”、“pos2” 、……“posN”代表ME ID。参数中多个网元ID之间以“,”分割。位置查询不支持分组查询。协议栈的最大限制是64K，一般网元的最大长度为200个字节，所以position最多可以配置64*1024/200=327个。 
发生开始时间条件说明如下：发生开始时间同步set动作的参数格式形如：“beginraisetime:2013-10-25 15:30:00;”参数以 “beginraisetime:”开头，“;”结尾。参数中只能设置一个时间值，当告警的发生时间大于或等于设置的时间值，则满足条件。 
发生结束时间条件说明如下：发生结束时间同步set动作的参数格式形如：“endraisetime:2013-10-25 15:30:00;”参数以 “endraisetime:”开头，“;”结尾。参数中只能设置一个时间值，当告警的发生时间小于或等于设置的时间值，则满足条件。 
同步set操作后返回值如下：表1  网元位置同步操作返回值返回值返回类型解释0INTEGER设置成功1INTEGER服务器忙，稍后重试2INTEGER服务端处理上一个请求信息3INTEGER输入条件参数格式错误。4INTEGER可进行同步操作5INTEGERTrap上报关闭对syncAlarm节点Set操作成功后，系统指定位置上所有当前告警将被封装为告警同步Trap，并发往NMS。为保持消息一致性，在同步Trap发送期间，所有正常上报的告警消息应暂停发送，直到同步Trap发送完毕后才恢复正常。对Set操作的返回值不进行处理，若要处理需要做数据类型转换和异常捕获。 
##### 告警同步Trap 
系统可以使用SNMP接口MIB中定义的alarmSync标识（.1.3.6.1.4.1.3902.4101.1.4.1.6）将未被Trap过滤条件过滤掉的告警同步数据Trap往北向网管。Trap消息中的告警属性值更详细说明请参阅当前告警表格查询一节的内容。系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。 
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.6
3|alarmEventTime|告警发生时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.1.3.1.3|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|alarmCode|告警码，即厂商告警码。|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.11|-
8|alarmManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.2|-
9|alarmEventType|告警类型|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.4|-
10|alarmProbableCause|告警码中的北向原因码，即标准告警码。|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.5|-
11|alarmPerceivedSeverity|告警级别|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.6|详细说明参见告警北向SNMP接口的告警级别和TECS 云管系统告警级别取值对照表
12|alarmSpecificProblem|告警原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.7|-
13|alarmAdditionalText|告警附加文本|STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.8|-
14|alarmNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.12|-
15|alarmIndex|索引|Integer32|.1.3.6.1.4.1.3902.4101.1.3.1.9|-
16|alarmId|告警唯一标识|STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.1|-
17|alarmCodeName|告警码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.1.3.1.14|-
18|alarmManagedObjectInstanceName|告警位置名称（网元或网元内定位的名称）|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.15|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为"网元名称,部件名称"。
19|alarmSystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.16|-
20|alarmNeIP|网元IP|STRING：0~60个字符|.1.3.6.1.4.1.3902.4101.1.3.1.17|-
21|alarmAck|告警确认状态|Integer|.1.3.6.1.4.1.3902.4101.1.3.1.18|1表示确认，2表示未确认。
22|cleiCode|网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）|为了兼容而保留，值始终为空|.1.3.6.1.4.1.3902.4101.1.3.1.19|-
23|timeZoneID|告警上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.20|-
24|timeZoneOffset|上报时区偏移量（TimeZoneOffset ）|默认值为0 支持通过上报的时区偏移量和夏令时偏移量计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.21|-
25|dSTSaving|告警上报时间夏令时偏移量（DSTSaving）|默认值为0支持通过上报的时区偏移量和夏令时偏移量计算时间偏移|.1.3.6.1.4.1.3902.4101.1.3.1.22|-
26|aid|告警AID|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.23|-
27|id|告警ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.1.3.1.24|-
28|alarmMocObjectInstance|网元名称|DisplayString （SIZE(0..255)）有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.1.3.1.26|-
29|alarmComment|告警注释|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.3.1.10|-
30|alarmOtherInfo|告警自定义属性|DisplayString （SIZE(0..255)）|.1.3.6.1.4.1.3902.4101.1.3.1.25|-
##### 告警同步开始Trap 
在设置了系统支持上报告警同步开始和告警同步结束TRAP消息下，系统可以使用SNMP接口MIB中定义的alarmSyncStart标识（.1.3.6.1.4.1.3902.4101.1.4.1.11）在告警同步Trap发送给北向网管之前，先发送一条标识告警同步开始的Trap消息给北向网管。 
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.11
3|systemDN|TECS Director|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
4|syncUniqueId|同步编号|Integer|.1.3.6.1.4.1.3902.4101.1.1.6|-
##### 告警同步结束Trap 
在设置了系统支持上报告警同步开始和告警同步结束TRAP消息下，系统可以使用SNMP接口MIB中定义的alarmSyncEnd标识（.1.3.6.1.4.1.3902.4101.1.4.1.12）在告警同步Trap全部发送给北向网管之后，先发送一条标识告警同步结束的Trap消息给北向网管。 
序号|参数项名称|说明|参数值类型|值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.3.6.1.4.1.3902.4101.1.4.1.12
3|systemDN|TECS Director|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
4|syncUniqueId|同步编号|Integer|.1.3.6.1.4.1.3902.4101.1.1.6|-
#### 开启/停止告警Trap上报 
系统可以通过对SNMP接口MIB中定义的alarmOperation 下的alarmTrapEnable(.1.3.6.1.4.1.3902.4101.1.7.3.0)节点进行set操作，控制系统是否发送Trap消息，设置约定如下：
参数值|说明
---|---
0|停止告警Trap上报
1|开启告警Trap上报
系统默认开启，设置成功后，永久生效。当关闭Trap消息，告警SNMP进程只发送心跳和列表重建消息，不再发送告警上报、恢复、确认状态改变、注释改变和同步消息。
#### 查看及设置告警Trap过滤条件 
NMS系统可以通过对SNMP接口MIB中定义的alarmFilter对象分支下的各属性执行get或者set操作来查看或者设置告警Trap过滤条件。
本过滤条件和按专业网预配置告警Trap过滤条件一节中设置的过滤条件是“与”关系，即一条Trap消息必须在通过这两套过滤条件的所有检测后，才能最终上报NMS。
告警Trap过滤条件有如下业务规则约束： 
告警SNMP中的Trap过滤只对告警Trap有效，对告警表格查询无效。 
除非特别声明，所有类型的告警Trap都要受本过滤条件的影响。 
告警Trap上报过滤结点（zteMIB.alarm.alarmIRP.alarmFilter.alarmFilterEnable）（.1.3.6.1.4.1.3902.4101.1.6.1.0）取值决定了过滤规则有效与否，其取值为0：过滤禁用，1：过滤启用 
当Trap上报过滤功能激活后，上报的告警需要经过多个过滤条件的检查，只有当此告警不被任何一个过滤条件屏蔽时，才上报此告警。各过滤条件的取值如下表。 
SNMP北向Trap过滤条件名称|过滤条件取值和效果
---|---
alarmTypeFilter.1.3.6.1.4.1.3902.4101.1.6.3.4.0|0：过滤禁用，或者1-11（11种NMS告警类型的类型编号）表示只有设置的告警类型允许Trap上报
alarmSeverityFilter.1.3.6.1.4.1.3902.4101.1.6.3.5.0|0：过滤禁用，或者1-6（6种NMS告警级别的的级别编号）表示只有设置的告警级别允许Trap上报
alarmCodesExcludeFilter.1.3.6.1.4.1.3902.4101.1.6.3.6.0|空串（””）：过滤禁用，或者【告警码1，告警码2，告警码3…..，告警码n 】 格式的字符串表示这些特定告警码的告警不允许Trap上报
alarmTypeExcludeFilter.1.3.6.1.4.1.3902.4101.1.6.3.7.0|空串（””）：过滤禁用，或者【告警类型1,告警类型2，告警类型3…..,告警类型n】格式的字符串表示这些特定告警类型的告警不允许Trap上报
alarmServerityExcludeFilter.1.3.6.1.4.1.3902.4101.1.6.3.8.0|（””）：过滤禁用，或者【告警级别1，告警级别2，告警级别3…..，告警级别n】 格式的字符串表示这些特定告警级别的告警不允许Trap上报
alarmSystemTypeCodeExcludeFilter.1.3.6.1.4.1.3902.4101.1.6.3.9.0|（””）：过滤禁用，或者【系统类型1，平台告警码1】【系统类型2，平台告警码2】格式的字符串表示这些特定系统类型和平台告警码的告警不允许Trap上报
alarmPosition1OrPosition2ExcludeFilter.1.3.6.1.4.1.3902.4101.1.6.3.10.0|（””）：过滤禁用，或者主位置，从位置格式的字符串表示这些特定主位置和从位置的告警不允许Trap上报
alarmSystemTypeCauseExcludeFilter.1.3.6.1.4.1.3902.4101.1.6.3.11.0|（””）：过滤禁用，或者 【系统类型1，北向告警码1】【系统类型2，北向告警码2】格式的字符串表示这些特定系统类型和北向告警码的告警不允许Trap上报
告警SNMP北向收到对过滤参数的设置命令后，除了修改本地过滤参数状态，还会持久化新状态到运行时文件中，以保证即使系统重启或者北向接口维护工具修改参数后，也不会丢失过滤状态设置。
告警级别过滤条件设置时，应使用接口编码值，该值和TECS Director自身采用的告警级别编码值不同。参见[告警北向SNMP接口的告警级别和TECS 云管系统告警级别取值对照表](e7e1f4ae78794db7af8cccd51166dfe5.html)。
告警类型过滤条件设置时，应使用接口编码值，该值和TECS Director自身采用的告警类型编码值不同。参见[告警北向SNMP接口的告警类型和TECS 云管系统告警类型的取值对照表](3a3993cdc3f64a27a85c2d8638875f6f.html)。
#### 发送异常消息通知 
告警同步过程中，若遇到系统内部异常，系统会发送异常Trap消息。 
序号|参数项名称|参数项说明|参数值类型|参数值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值.1.3.6.1.4.1.3902.4101.1.4.1.7
3|systemDN|TECS Director|STRING：0-255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
4|-|错误码|STRING：0-50个字符|.1.3.6.1.4.1.3902.4101.1.1.5|取值1
#### 设置告警表格过滤条件 
告警列表除按照统一的过滤规则（专业网预配置告警Trap过滤条件），支持在获取当前告警列表临时设置过滤条件。系统可以通过对SNMP接口MIB中定义的alarmTableFilter(.1.3.6.1.4.1.3902.4101.1.7.2.0)节点设置表格条件，该过滤条件对原始表和扩展表的查询都生效。
参数格式示例： 
PerceivedSeverity:1,3; TypeOfEvent:1,2;ProbableCause:1001,1002;SystemTypeAndCause:[6,1000][11,1200];SystemTypeAndCode:[6,1000][6,1010];Position1OrPostion2:COMM:EMS=0806164728805, CommonTopoObject=123;beginraisetime:2017-10-16 10:50:50,GMT-8:00;endraisetime:2017-10-16 10:57:36,GMT-8:00;NEPosition:COMM:EMS=0806164728805,CommonTopoObject=123 
参数取值范围： 
条件|取值范围
---|---
前缀include/exclude|条件前面加上前缀可以查询不同范围的告警Include：表示查询满足条件的告警exclude：表示过滤掉满足条件的告警无前缀：等同于exclude
告警级别 PerceivedSeverity|[1,6]
告警类型TypeOfEvent|[1,11]
系统类型 SystemType|系统类型
告警码 ProbableCause|北向告警码
网元NEPosition|网元位置，不支持分组查询
发生开始时间beginraisetime|告警发生时间下限，没有设置无下限
发生结束时间endraisetime|告警发生时间上限，没有设置无上限
系统类型北向告警码SystemTypeAndCause|系统类型和北向告警码组合条件，格式为：[SystemType,ProbableCause][SystemType,ProbableCause]
主位置从位置Position1OrPosition2|主位置或从位置过滤条件，格式为：Position1,Position2
系统类型平台告警码SystemTypeAndCode|系统类型和平台告警码组合条件，格式为：[SystemType,AlarmCode][SystemType, AlarmCode]
当前告警Id|告警Id，以逗号分隔
参数说明： 
每个条件以分号隔开，条件值之间使用逗号分割。 
条件可以为1个或多个，若输入字符串为空，关闭表格条件。 
条件值之间使用逗号分割，多个条件值中若有部分错误，仅保存正确条件值；若多个条件值均错误，重置该条件为空。 
若输入多个条件，网元位置条件必须在最后。 
满足条件的告警将被过滤。 
条件名称不对，忽略该条件值。 
设置成功，返回当前条件值。 
NEPosition参数值和syncAlarm节点参数值取值相同。 
参数名以文档为准。 
建议用户设置前缀避免使用上产生误解。 
协议栈的最大限制是64 K，一般网元的最大长度为200个字节，所以NEPosition最多可以配置64×1024÷200=327个。 
设置表格过滤条件Set操作返回值说明： 
返回值|返回类型|说明
---|---|---
当前表格过滤条件|String|操作成功
5，6，8，9，10，11，13，14|INTEGER|条件位置错误
7|INTEGER|系统错误
12|INTEGER|条件前缀位置错误
### 告警北向SNMP接口的业务规约 
#### 关于字符编码 
创建的agent中可以指定字符编码，用来指定trap消息和get数据中字段的编码方式。 
平台使用系统默认编码方式将消息转换成字节流，再通过“iso-8859-1”编码构造新的消息体。若对接操作过程中出现乱码情况，可修改SNMP agent的编码方式来解决。 
#### 关于Set操作返回值说明 
返回值为Set操作的输入参数，部分节点Set操作返回值请参考相关章节的Set操作返回值说明。 
#### 关于SNMP Trap信息的解析 
SNMP Trap信息的解析只能参照mib定义，使用OID去获取各变量取值。而不能忽略变量OID直接按照固定的变量顺序去取值。
#### 关于如何保持TECS 云管系统和NMS告警数据一致 
要保持NMS和TECS Director的告警一致性可以从以下几个方面入手：
NMS可以通过以下两个接口得到TECS Director的当前告警：
通过SNMP告警北向提供的当前告警表格查询功能可以获取TECS Director上最新的1万当前告警。 
通过SNMP告警北向提供的基于网元位置的告警同步功能，可以重新取得TECS Director上指定网元位置的所有当前告警。 
NMS可以通过以下方法判断Trap消息是否丢失
TECS Director发往NMS的所有告警Trap信息中都包括两个序号标识sendNotificationId（本次发送序列号）和lastSendNotificationId（上次发送序列号）。在启用单个代理且配置一个Trap目标地址的情况下，利用这两个标识NMS可以知道是否按序无遗漏的收到来自SNMP北向的告警Trap信息。其用法为，NMS收到第一条Trap信息时，保存此Trap的sendNotificationId值，不妨记为lastId，然后收到下一条Trap时比较新Trap的lastSendNotificationId值和前面记录的lastid是否一致，若一致则说明这两条Trap是按序连续发出的，此时NMS用新Trap的sendNotificationId值更新lastId值，然后重复前述检查过程，即可保证按序无遗漏接收告警信息。若检查时发现新Trap的lastSendNotificationId值和前面记录的lastid不一致，则意味着要么这两条Trap之间存在某些Trap丢失，要么发送方发出的多条Trap在接收方发生乱序(因为SNMP协议底层采用udp协议，这两种情况都可能发生)，此时NMS可以启动容错程序，比如缓存一段时间内的Trap信息看能否重整理排序或者接收到中间丢失的Trap信息，若经容错处理后还是未能收到丢失的Trap或者不能把顺序整理成功，则NMS可以通过获取当前告警接口重新和TECS Director同步。但在启用多个代理或者单个代理配置多个Trap目标地址的情况下，这两个标识只保证是递增的。 
TECS Director重启后或在发送过程中出现异常，sendNotificationId和lastSendNotificationId会自动归零，NMS可以在一段时间后通过告警接口重新和TECS Director同步。 
关于SNMP告警编号说明参见[表1](af2a22ac1b6045c1979073004e634705.html#topicid4103916__tableid6135409)。
名称|说明|OID
---|---|---
alarmIndex|统一告警北向SNMP表格中告警的标识。|.1.3.6.1.4.1.3902.4101.1.3.1.9
alarmId|告警源产生告警时提供的告警唯一标识。|.1.3.6.1.4.1.3902.4101.1.3.1.1
aid|在特定专业网范围内的告警唯一标识，对于TECS Director此值只是一个字符串，无其他任何含义。|.1.3.6.1.4.1.3902.4101.1.3.1.23
id|告警在TECS Director网管系统中的唯一标识。|.1.3.6.1.4.1.3902.4101.1.3.1.24
#### 通知MIB文件说明 
通知MIB定义在zxcomc-snmp-notificationirp-mib-v1.0.txt文件中，该MIB文件在alarmIRP部分新增notificationIRP对象，该MIB库主要定义统一北向接口中和通知属性相关的对象，功能如下：
ntsAttribute{ .1.3.6.1.4.1.3902.4101.10.1}分支，其下属性为通知中各字段的属性标识。 
ntsNotifications{.1.3.6.1.4.1.3902.4101.10.2}分支，其下属性用于定义通知Trap标识，目前有通知上报Trap(ntsNotificationNew)。 
ntsNotificationFilter{.1.3.6.1.4.1.3902.4101.10.3}分支，用于通知Trap消息的上报过滤条件，只有满足条件的通知消息才被发送到上级。 
#### 通知上报功能说明 
##### 开启通知上报 
通知上报功能可以在agent中设置是否接收通知消息。 
snmp agent中支持通知上报字段supportNotificationFlag的参数值，参数值含义参见[表1](c3f7aededaeb4efe897f09d40882a3d6.html#topicid5015011__e442d089-f8a4-4274-a528-117fed2bcd85)。
参数值|含义
---|---
0|停止通知Trap上报
1|开启通知Trap上报
##### 通知Trap上报说明 
当系统开启统一北向通知转发功能，系统使用SNMP接口MIB中定义的ntsNotificationNew标识（.1.3.6.1.4.1.3902.4101.10.2.1.1）将通知消息发往上级对接系统。系统实际上报通知Trap信息中的字段顺序以文档表格中的顺序为准。 
序号|参数项名称|参数项说明|参数值类型|参数值定义（OID）|备注
---|---|---|---|---|---
1|-|时间戳|TimeTicks|.1.3.6.1.2.1.1.3.0|-
2|-|消息类型|Object|.1.3.6.1.6.3.1.1.4.1.0|取值：.1.1.3.6.1.4.1.3902.4101.10.2.1.1
3|notifyEventTime|通知发生时间|DateAndTime类型|.1.3.6.1.4.1.3902.4101.10.1.1.0|-
4|sendNotificationId|本次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.2|-
5|lastSendNotificationId|上次发送序列号|Integer|.1.3.6.1.4.1.3902.4101.1.1.4|-
6|systemDN|系统DN|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.1.1.3|-
7|notifyCode|通知码码,即厂商告警码|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.10.1.2.0|-
8|notifyManagedObjectInstance|网元位置|STRING：0~255个字符|.1.3.6.1.4.1.3902.4101.10.1.3.0|-
9|notifyProbableCause|通知码中的北向原因码码|Integer|.1.3.6.1.4.1.3902.4101.10.1.4.0|-
10|notifySpecificProblem|特殊原因|STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.10.1.5.0|-
11|notifyAdditionalText|附加文本|STRING：0~255个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.10.1.6.0|-
12|notifyNetype|网元类型|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.10.1.7.0|-
13|notifyCodeName|通知码名称|STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致|.1.3.6.1.4.1.3902.4101.10.1.8.0|-
14|notifyManagedObjectInstanceName|网元或网元内定位的名称|STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.10.1.9.0|当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和位置时，取值为“网元名称,位置名称”。
15|notifySystemType|资源类型|STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.10.1.10.0|-
16|notifyNeIP|网元IP|STRING：0~60个字符|.1.3.6.1.4.1.3902.4101.10.1.11.0|-
17|notifyTimeZoneID|通知上报时间时区ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.10.1.12.0|-
18|notifyTimeZoneOffset|上报时间时区偏移量|为了兼容而保留，默认值为0|.1.3.6.1.4.1.3902.4101.10.1.13.0|-
19|notifyDSTSaving|告警上报时间夏令时偏移量(DSTSaving)|为了兼容而保留，默认值为0|.1.3.6.1.4.1.3902.4101.10.1.14.0|-
20|notifyAid|通知Aid|STRING：0~50个字符有越界风险，修改mib文件中长度限制为510，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.10.1.15.0|-
21|notifyId|通知ID|STRING：0~50个字符|.1.3.6.1.4.1.3902.4101.10.1.16.0|-
22|notifyMocObjectInstance|网元名称|DisplayString (SIZE (0..255))有越界风险，修改mib文件中长度限制为300，V1.20.10.06P01实现并在版本说明书中说明|.1.3.6.1.4.1.3902.4101.10.1.17.0|-
23|notifyCustomAttr1|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.18.0|-
24|notifyCustomAttr2|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.19.0|-
25|notifyCustomAttr3|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.20.0|-
26|notifyCustomAttr4|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.21.0|-
27|notifyCustomAttr5|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.22.0|-
28|notifyCustomAttr6|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.23.0|-
29|notifyCustomAttr7|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.24.0|-
30|notifyCustomAttr8|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.25.0|-
31|notifyCustomAttr9|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.26.0|-
32|notifyCustomAttr10|通知自定义属性|DisplayString (SIZE (0..255))|.1.3.6.1.4.1.3902.4101.10.1.27.0|-
## 参考 
### 告警北向SNMP接口的告警级别和TECS 云管系统告警级别取值对照表 
告警级别类型|解释|TECS Director编码|接口编码
---|---|---|---
indeterminate|未定义级别（TECS Director中已存在的告警不使用该级别）|0|1
critical|严重级别|1|2
major|主要级别|2|3
minor|次要级别|3|4
warning|警告级别|4|5
cleared|已清除级别（TECS Director中已存在的告警不使用该级别）|5|6
### 告警北向SNMP接口的告警类型和TECS 云管系统告警类型的取值对照表 
告警类型|解释|TECS Director编码|接口编码
---|---|---|---
Communications Alarm|与信息传输过程相关的告警类型（ITU-T建议X.733中定义）|0|1
Processing Error Alarm|与软件或进程故障相关的告警类型（ITU-T建议X.733中定义）|1|2
Environmental Alarm|与设备所处的环境相关的告警类型（ITU-T建议X.733中定义）|4|3
Quality of Service Alarm|与服务质量降级相关的告警类型（ITU-T建议X.733中定义）|2|4
Equipment Alarm|与设备故障相关的告警类型（ITU-T建议X.733中定义）|3|5
Integrity Violation|非法修改、插入或删除信息的指示|6|6
Operational Violation|被请求的服务因为无效、障碍或错误调用引起的不能正常运行的指示|7|7
Physical Violation|物理资源遭到侵害（某种程度上为安全性攻击）的指示|8|8
Security Violation|安全性服务或机制检测到的安全性攻击的指示|9|9
Time Domain Violation|非预期时间或禁止时间发生某种事件的指示|10|10
OMC ALARM|TECS Director网管告警|5|11
### 告警北向SNMP接口的确认状态取值对照表 
告警状态|TECS Director编码|接口编码
---|---|---
确认|1|1
未确认/反确认|2|2
网元条件说明如下：  
网元位置同步set动作的参数格式形如：“position:pos1,pos2;”参数以 “position:”开头，“;”结尾。参数中“pos1”、“pos2” 、……“posN”代表网元ID。即在TECS Director处定义的网元标识，也就是TECS Director告警属性中的position1值，此值可从应用方资源北向中直接获取，或者通过告警表格中的告警属性alarmManagedObjectInstance取得。（alarmManagedObjectInstance属性参见当前告警表格查询）参数中多个网元ID之间以“,”分割。位置查询不支持分组查询。协议栈的最大限制是64 K，一般网元的最大长度为200个字节，所以position最多可以配置64×1024÷200=327个。 
发生开始时间条件说明如下：发生开始时间同步set动作的参数格式形如：“beginraisetime:2013-10-25 15:30:00;”参数以 “beginraisetime:”开头，“;”结尾。参数中只能设置一个时间值，当告警的发生时间大于或等于设置的时间值，则满足条件。 
发生结束时间条件说明如下：发生结束时间同步set动作的参数格式形如：“endraisetime:2013-10-25 15:30:00;”参数以 “endraisetime:”开头，“;”结尾。参数中只能设置一个时间值，当告警的发生时间小于或等于设置的时间值，则满足条件。 
